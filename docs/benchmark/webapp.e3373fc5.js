parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"uXNM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
},{}],"l0Jm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logResults=exports.resultsToMarkdown=exports.runAllTestsAsync=exports.runAllTests=exports.runTestAsync=exports.runTest=exports.prepareTests=void 0;const n=40,t={x:0,y:-10},e={x:.5625,y:1},o={x:1.125,y:0},s=5,r=0,a=1/60,c=3,u=3,p={x:-40,y:0},i={x:40,y:0},l={x:-7,y:.75},f={x:.5,y:.5},m=64,x=1024;function g(t){const r=t.createBoxShape(f.x,f.y),a={...l};for(let c=0;c<n;++c){const u={...a};for(let e=c;e<n;++e)t.createBoxBody(r,u.x,u.y,s),u.x+=o.x,u.y+=o.y;a.x+=e.x,a.y+=e.y}}async function y(n,t){return new Promise(e=>{let o=0;t(0,m+x);const s=()=>{o<m?(n.step(a,c,u),t(o,m+x),o++,window.requestAnimationFrame(s)):e()};window.requestAnimationFrame(s)})}async function h(n,t){return new Promise(e=>{let o=0;t(0,m+x);const s=[],r=()=>{if(o<x){const e=performance.now();n.step(a,c,u),s.push(performance.now()-e),t(m+o,m+x),o++,window.requestAnimationFrame(r)}else e(s)};window.requestAnimationFrame(r)})}function w(n){for(let t=0;t<m;t++)n.step(a,c,u)}function d(n){const t=[];for(let e=0;e<x;e++){const e=performance.now();n.step(a,c,u),t.push(performance.now()-e)}return t.sort()}function v(n){let t=0;for(const e of n)t+=e;return t/x}function A(n,t){return n[Math.floor(t*n.length/100)]}function T(n){return n.map(n=>n(t,p,i,r))}function F(n){g(n),w(n);const t=d(n);return{name:n.name,avg:v(t),p5:A(t,5),p95:A(t,95)}}async function R(n,t){g(n),await y(n,t);const e=await h(n,t);return{name:n.name,avg:v(e),p5:A(e,5),p95:A(e,95)}}function j(n){const t=T(n),e=[];console.log("Running Benchmarks:");for(const o of t){const n=F(o);e.push(n),console.log(` ✓ ${n.name}`)}return e.sort((n,t)=>n.avg-t.avg)}exports.prepareTests=T,exports.runTest=F,exports.runTestAsync=R,exports.runAllTests=j;const B=()=>void 0;async function M(n){const t=T(n);console.log("Running Benchmarks:");const e=[];for(const o of t){const n=await R(o,B);console.log(` ✓ ${n.name}`),e.push(n)}return e.sort((n,t)=>n.avg-t.avg)}function $(n){const t=["Name","avg ms/frame","5th %ile","95th %ile","Ratio"],e=n.map(t=>[t.name,t.avg.toFixed(2),t.p5.toString(),t.p95.toString(),(t.avg/n[0].avg).toFixed(2)]),o=t.map((n,t)=>Math.max(n.length,...e.map(n=>n[t].length)));const s=`| ${o.map(function(n){return"-".repeat(n)}).join(" | ")} |`,r=[];function a(n,t){const e=o[t];return n.length<e?t>0?" ".repeat(e-n.length)+n:n+" ".repeat(e-n.length):n}r.push(`| ${t.map(a).join(" | ")} |`),r.push(s);for(const c of e)r.push(`| ${c.map(a).join(" | ")} |`);return r.join("\n")}function k(n){console.log("\nResults:"),console.log($(n))}exports.runAllTestsAsync=M,exports.resultsToMarkdown=$,exports.logResults=k;
},{}],"Dbpo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Serializer=Ps,exports.clipSegmentToLine=Ii,exports.getPointStates=Mi,exports.mixFriction=Ni,exports.mixRestitution=ki,exports.testbed=Ts,exports.testOverlap=exports.stats=exports.internal=exports.default=exports.WorldManifold=exports.World=exports.WheelJoint=exports.WeldJoint=exports.VelocityConstraintPoint=exports.Vec3=exports.Vec2=exports.TreeNode=exports.Transform=exports.TimeOfImpact=exports.Testbed=exports.TOIOutputState=exports.TOIOutput=exports.TOIInput=exports.Sweep=exports.SimplexCache=exports.ShapeCastOutput=exports.ShapeCastInput=exports.ShapeCast=exports.Shape=exports.SettingsInternal=exports.Settings=exports.Rot=exports.RopeJoint=exports.RevoluteJoint=exports.PulleyJoint=exports.PrismaticJoint=exports.PolygonShape=exports.Polygon=exports.PointState=exports.MouseJoint=exports.MotorJoint=exports.Math=exports.Mat33=exports.Mat22=exports.ManifoldType=exports.ManifoldPoint=exports.Manifold=exports.JointEdge=exports.Joint=exports.GearJoint=exports.FrictionJoint=exports.FixtureProxy=exports.Fixture=exports.EdgeShape=exports.Edge=exports.DynamicTree=exports.DistanceProxy=exports.DistanceOutput=exports.DistanceJoint=exports.DistanceInput=exports.Distance=exports.ContactID=exports.ContactFeatureType=exports.ContactEdge=exports.Contact=exports.CollidePolygons=exports.CollidePolygonCircle=exports.CollideEdgePolygon=exports.CollideEdgeCircle=exports.CollideCircles=exports.ClipVertex=exports.CircleShape=exports.Circle=exports.ChainShape=exports.Chain=exports.BoxShape=exports.Box=exports.Body=exports.AABB=void 0;var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};function e(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}var i=function(){return(i=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},o=function(t,e){null==t&&(t={});var o=i({},t);for(var s in e)e.hasOwnProperty(s)&&void 0===t[s]&&(o[s]=e[s]);if("function"==typeof Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(e),r=0;r<n.length;r++){var a=n[r];e.propertyIsEnumerable(a)&&void 0===t[a]&&(o[a]=e[a])}return o},s=Math.random,n=1e-9,r=Number.isFinite;function a(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1}function m(t){return t>0&&0==(t&t-1)}function h(t,e,i){return void 0===e?(i=1,e=0):void 0===i&&(i=e,e=0),i>e?(t=(t-e)%(i-e))+(t<0?i:e):(t=(t-i)%(e-i))+(t<=0?e:i)}function c(t,e,i){return t<e?e:t>i?i:t}function _(t,e){return void 0===t?(e=1,t=0):void 0===e&&(e=t,t=0),t===e?t:s()*(e-t)+t}var l=Object.create(Math);exports.Math=l,l.EPSILON=n,l.isFinite=r,l.nextPowerOfTwo=a,l.isPowerOfTwo=m,l.mod=h,l.clamp=c,l.random=_;var u=Math.abs,p=Math.sqrt,y=Math.max,d=Math.min,f=function(){function t(e,i){if(!(this instanceof t))return new t(e,i);void 0===e?(this.x=0,this.y=0):"object"==typeof e?(this.x=e.x,this.y=e.y):(this.x=e,this.y=i)}return t.prototype._serialize=function(){return{x:this.x,y:this.y}},t._deserialize=function(e){var i=Object.create(t.prototype);return i.x=e.x,i.y=e.y,i},t.zero=function(){var e=Object.create(t.prototype);return e.x=0,e.y=0,e},t.neo=function(e,i){var o=Object.create(t.prototype);return o.x=e,o.y=i,o},t.clone=function(e){return t.neo(e.x,e.y)},t.prototype.toString=function(){return JSON.stringify(this)},t.isValid=function(t){return null!=t&&(Number.isFinite(t.x)&&Number.isFinite(t.y))},t.assert=function(t){},t.prototype.clone=function(){return t.clone(this)},t.prototype.setZero=function(){return this.x=0,this.y=0,this},t.prototype.set=function(t,e){return"object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),this},t.prototype.setNum=function(t,e){return this.x=t,this.y=e,this},t.prototype.setVec2=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.wSet=function(t,e,i,o){return void 0!==i||void 0!==o?this.setCombine(t,e,i,o):this.setMul(t,e)},t.prototype.setCombine=function(t,e,i,o){var s=t*e.x+i*o.x,n=t*e.y+i*o.y;return this.x=s,this.y=n,this},t.prototype.setMul=function(t,e){var i=t*e.x,o=t*e.y;return this.x=i,this.y=o,this},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.wAdd=function(t,e,i,o){return void 0!==i||void 0!==o?this.addCombine(t,e,i,o):this.addMul(t,e)},t.prototype.addCombine=function(t,e,i,o){var s=t*e.x+i*o.x,n=t*e.y+i*o.y;return this.x+=s,this.y+=n,this},t.prototype.addMul=function(t,e){var i=t*e.x,o=t*e.y;return this.x+=i,this.y+=o,this},t.prototype.wSub=function(t,e,i,o){return void 0!==i||void 0!==o?this.subCombine(t,e,i,o):this.subMul(t,e)},t.prototype.subCombine=function(t,e,i,o){var s=t*e.x+i*o.x,n=t*e.y+i*o.y;return this.x-=s,this.y-=n,this},t.prototype.subMul=function(t,e){var i=t*e.x,o=t*e.y;return this.x-=i,this.y-=o,this},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.mul=function(t){return this.x*=t,this.y*=t,this},t.prototype.length=function(){return t.lengthOf(this)},t.prototype.lengthSquared=function(){return t.lengthSquared(this)},t.prototype.normalize=function(){var t=this.length();if(t<n)return 0;var e=1/t;return this.x*=e,this.y*=e,t},t.lengthOf=function(t){return p(t.x*t.x+t.y*t.y)},t.lengthSquared=function(t){return t.x*t.x+t.y*t.y},t.distance=function(t,e){var i=t.x-e.x,o=t.y-e.y;return p(i*i+o*o)},t.distanceSquared=function(t,e){var i=t.x-e.x,o=t.y-e.y;return i*i+o*o},t.areEqual=function(t,e){return t===e||"object"==typeof e&&null!==e&&t.x===e.x&&t.y===e.y},t.skew=function(e){return t.neo(-e.y,e.x)},t.dot=function(t,e){return t.x*e.x+t.y*e.y},t.cross=function(e,i){return"number"==typeof i?t.neo(i*e.y,-i*e.x):"number"==typeof e?t.neo(-e*i.y,e*i.x):e.x*i.y-e.y*i.x},t.crossVec2Vec2=function(t,e){return t.x*e.y-t.y*e.x},t.crossVec2Num=function(e,i){return t.neo(i*e.y,-i*e.x)},t.crossNumVec2=function(e,i){return t.neo(-e*i.y,e*i.x)},t.addCross=function(e,i,o){return"number"==typeof o?t.neo(o*i.y+e.x,-o*i.x+e.y):"number"==typeof i?t.neo(-i*o.y+e.x,i*o.x+e.y):void 0},t.addCrossVec2Num=function(e,i,o){return t.neo(o*i.y+e.x,-o*i.x+e.y)},t.addCrossNumVec2=function(e,i,o){return t.neo(-i*o.y+e.x,i*o.x+e.y)},t.add=function(e,i){return t.neo(e.x+i.x,e.y+i.y)},t.wAdd=function(e,i,o,s){return void 0!==o||void 0!==s?t.combine(e,i,o,s):t.mulNumVec2(e,i)},t.combine=function(e,i,o,s){return t.zero().setCombine(e,i,o,s)},t.sub=function(e,i){return t.neo(e.x-i.x,e.y-i.y)},t.mul=function(e,i){return"object"==typeof e?t.neo(e.x*i,e.y*i):"object"==typeof i?t.neo(e*i.x,e*i.y):void 0},t.mulVec2Num=function(e,i){return t.neo(e.x*i,e.y*i)},t.mulNumVec2=function(e,i){return t.neo(e*i.x,e*i.y)},t.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},t.neg=function(e){return t.neo(-e.x,-e.y)},t.abs=function(e){return t.neo(u(e.x),u(e.y))},t.mid=function(e,i){return t.neo(.5*(e.x+i.x),.5*(e.y+i.y))},t.upper=function(e,i){return t.neo(y(e.x,i.x),y(e.y,i.y))},t.lower=function(e,i){return t.neo(d(e.x,i.x),d(e.y,i.y))},t.prototype.clamp=function(t){var e=this.x*this.x+this.y*this.y;if(e>t*t){var i=t/p(e);this.x*=i,this.y*=i}return this},t.clamp=function(e,i){var o=t.neo(e.x,e.y);return o.clamp(i),o},t.scaleFn=function(e,i){return function(o){return t.neo(o.x*e,o.y*i)}},t.translateFn=function(e,i){return function(o){return t.neo(o.x+e,o.y+i)}},t}();exports.Vec2=f;var v=Math.max,x=Math.min,A=function(){function t(e,i){if(!(this instanceof t))return new t(e,i);this.lowerBound=f.zero(),this.upperBound=f.zero(),"object"==typeof e&&this.lowerBound.setVec2(e),"object"==typeof i?this.upperBound.setVec2(i):"object"==typeof e&&this.upperBound.setVec2(e)}return t.prototype.isValid=function(){return t.isValid(this)},t.isValid=function(t){return null!=t&&(f.isValid(t.lowerBound)&&f.isValid(t.upperBound)&&f.sub(t.upperBound,t.lowerBound).lengthSquared()>=0)},t.assert=function(t){},t.prototype.getCenter=function(){return f.neo(.5*(this.lowerBound.x+this.upperBound.x),.5*(this.lowerBound.y+this.upperBound.y))},t.prototype.getExtents=function(){return f.neo(.5*(this.upperBound.x-this.lowerBound.x),.5*(this.upperBound.y-this.lowerBound.y))},t.prototype.getPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+this.upperBound.y-this.lowerBound.y)},t.prototype.combine=function(t,e){e=e||this;var i=t.lowerBound,o=t.upperBound,s=e.lowerBound,n=e.upperBound,r=x(i.x,s.x),a=x(i.y,s.y),m=v(n.x,o.x),h=v(n.y,o.y);this.lowerBound.setNum(r,a),this.upperBound.setNum(m,h)},t.prototype.combinePoints=function(t,e){this.lowerBound.setNum(x(t.x,e.x),x(t.y,e.y)),this.upperBound.setNum(v(t.x,e.x),v(t.y,e.y))},t.prototype.set=function(t){this.lowerBound.setNum(t.lowerBound.x,t.lowerBound.y),this.upperBound.setNum(t.upperBound.x,t.upperBound.y)},t.prototype.contains=function(t){var e=!0;return e=(e=(e=(e=e&&this.lowerBound.x<=t.lowerBound.x)&&this.lowerBound.y<=t.lowerBound.y)&&t.upperBound.x<=this.upperBound.x)&&t.upperBound.y<=this.upperBound.y},t.prototype.extend=function(e){return t.extend(this,e),this},t.extend=function(t,e){return t.lowerBound.x-=e,t.lowerBound.y-=e,t.upperBound.x+=e,t.upperBound.y+=e,t},t.testOverlap=function(t,e){var i=e.lowerBound.x-t.upperBound.x,o=t.lowerBound.x-e.upperBound.x,s=e.lowerBound.y-t.upperBound.y,n=t.lowerBound.y-e.upperBound.y;return!(i>0||s>0||o>0||n>0)},t.areEqual=function(t,e){return f.areEqual(t.lowerBound,e.lowerBound)&&f.areEqual(t.upperBound,e.upperBound)},t.diff=function(t,e){var i=v(0,x(t.upperBound.x,e.upperBound.x)-v(e.lowerBound.x,t.lowerBound.x)),o=v(0,x(t.upperBound.y,e.upperBound.y)-v(e.lowerBound.y,t.lowerBound.y));return(t.upperBound.x-t.lowerBound.x)*(t.upperBound.y-t.lowerBound.y)+(e.upperBound.x-e.lowerBound.x)*(e.upperBound.y-e.lowerBound.y)-i*o},t.prototype.rayCast=function(t,e){for(var i=-1/0,o=1/0,s=e.p1,r=f.sub(e.p2,e.p1),a=f.abs(r),m=f.zero(),h="x";null!==h;h="x"===h?"y":null)if(a.x<n){if(s[h]<this.lowerBound[h]||this.upperBound[h]<s[h])return!1}else{var c=1/r[h],_=(this.lowerBound[h]-s[h])*c,l=(this.upperBound[h]-s[h])*c,u=-1;if(_>l){var p=_;_=l,l=p,u=1}if(_>i&&(m.setZero(),m[h]=u,i=_),i>(o=x(o,l)))return!1}return!(i<0||e.maxFraction<i)&&(t.fraction=i,t.normal=m,!0)},t.prototype.toString=function(){return JSON.stringify(this)},t.combinePoints=function(t,e,i){return t.lowerBound.x=x(e.x,i.x),t.lowerBound.y=x(e.y,i.y),t.upperBound.x=v(e.x,i.x),t.upperBound.y=v(e.y,i.y),t},t.combinedPerimeter=function(t,e){var i=x(t.lowerBound.x,e.lowerBound.x),o=x(t.lowerBound.y,e.lowerBound.y);return 2*(v(t.upperBound.x,e.upperBound.x)-i+v(t.upperBound.y,e.upperBound.y)-o)},t}();exports.AABB=A;var g=Math.PI,b=function(){function t(){}return Object.defineProperty(t,"polygonRadius",{get:function(){return 2*t.linearSlop},enumerable:!1,configurable:!0}),t.lengthUnitsPerMeter=1,t.maxManifoldPoints=2,t.maxPolygonVertices=12,t.aabbExtension=.1,t.aabbMultiplier=2,t.linearSlop=.005,t.angularSlop=2/180*g,t.maxSubSteps=8,t.maxTOIContacts=32,t.maxTOIIterations=20,t.maxDistanceIterations=20,t.velocityThreshold=1,t.maxLinearCorrection=.2,t.maxAngularCorrection=8/180*g,t.maxTranslation=2,t.maxRotation=.5*g,t.baumgarte=.2,t.toiBaugarte=.75,t.timeToSleep=.5,t.linearSleepTolerance=.01,t.angularSleepTolerance=2/180*g,t}();exports.Settings=b;var B=function(){function t(){}return Object.defineProperty(t,"maxManifoldPoints",{get:function(){return b.maxManifoldPoints},enumerable:!1,configurable:!0}),Object.defineProperty(t,"maxPolygonVertices",{get:function(){return b.maxPolygonVertices},enumerable:!1,configurable:!0}),Object.defineProperty(t,"aabbExtension",{get:function(){return b.aabbExtension*b.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(t,"aabbMultiplier",{get:function(){return b.aabbMultiplier},enumerable:!1,configurable:!0}),Object.defineProperty(t,"linearSlop",{get:function(){return b.linearSlop*b.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(t,"linearSlopSquared",{get:function(){return b.linearSlop*b.lengthUnitsPerMeter*b.linearSlop*b.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(t,"angularSlop",{get:function(){return b.angularSlop},enumerable:!1,configurable:!0}),Object.defineProperty(t,"polygonRadius",{get:function(){return 2*b.linearSlop},enumerable:!1,configurable:!0}),Object.defineProperty(t,"maxSubSteps",{get:function(){return b.maxSubSteps},enumerable:!1,configurable:!0}),Object.defineProperty(t,"maxTOIContacts",{get:function(){return b.maxTOIContacts},enumerable:!1,configurable:!0}),Object.defineProperty(t,"maxTOIIterations",{get:function(){return b.maxTOIIterations},enumerable:!1,configurable:!0}),Object.defineProperty(t,"maxDistanceIterations",{get:function(){return b.maxDistanceIterations},enumerable:!1,configurable:!0}),Object.defineProperty(t,"velocityThreshold",{get:function(){return b.velocityThreshold*b.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(t,"maxLinearCorrection",{get:function(){return b.maxLinearCorrection*b.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(t,"maxAngularCorrection",{get:function(){return b.maxAngularCorrection},enumerable:!1,configurable:!0}),Object.defineProperty(t,"maxTranslation",{get:function(){return b.maxTranslation*b.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(t,"maxTranslationSquared",{get:function(){return b.maxTranslation*b.lengthUnitsPerMeter*b.maxTranslation*b.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(t,"maxRotation",{get:function(){return b.maxRotation},enumerable:!1,configurable:!0}),Object.defineProperty(t,"maxRotationSquared",{get:function(){return b.maxRotation*b.maxRotation},enumerable:!1,configurable:!0}),Object.defineProperty(t,"baumgarte",{get:function(){return b.baumgarte},enumerable:!1,configurable:!0}),Object.defineProperty(t,"toiBaugarte",{get:function(){return b.toiBaugarte},enumerable:!1,configurable:!0}),Object.defineProperty(t,"timeToSleep",{get:function(){return b.timeToSleep},enumerable:!1,configurable:!0}),Object.defineProperty(t,"linearSleepTolerance",{get:function(){return b.linearSleepTolerance*b.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(t,"linearSleepToleranceSqr",{get:function(){return b.linearSleepTolerance*b.lengthUnitsPerMeter*b.linearSleepTolerance*b.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(t,"angularSleepTolerance",{get:function(){return b.angularSleepTolerance},enumerable:!1,configurable:!0}),Object.defineProperty(t,"angularSleepToleranceSqr",{get:function(){return b.angularSleepTolerance*b.angularSleepTolerance},enumerable:!1,configurable:!0}),t}();exports.SettingsInternal=B;var w=function(){function t(t){this._list=[],this._max=1/0,this._hasCreateFn=!1,this._createCount=0,this._hasAllocateFn=!1,this._allocateCount=0,this._hasReleaseFn=!1,this._releaseCount=0,this._hasDisposeFn=!1,this._disposeCount=0,this._list=[],this._max=t.max||this._max,this._createFn=t.create,this._hasCreateFn="function"==typeof this._createFn,this._allocateFn=t.allocate,this._hasAllocateFn="function"==typeof this._allocateFn,this._releaseFn=t.release,this._hasReleaseFn="function"==typeof this._releaseFn,this._disposeFn=t.dispose,this._hasDisposeFn="function"==typeof this._disposeFn}return t.prototype.max=function(t){return"number"==typeof t?(this._max=t,this):this._max},t.prototype.size=function(){return this._list.length},t.prototype.allocate=function(){var t;return this._list.length>0?t=this._list.shift():(this._createCount++,t=this._hasCreateFn?this._createFn():{}),this._allocateCount++,this._hasAllocateFn&&this._allocateFn(t),t},t.prototype.release=function(t){this._list.length<this._max?(this._releaseCount++,this._hasReleaseFn&&this._releaseFn(t),this._list.push(t)):(this._disposeCount++,this._hasDisposeFn&&(t=this._disposeFn(t)))},t.prototype.toString=function(){return" +"+this._createCount+" >"+this._allocateCount+" <"+this._releaseCount+" -"+this._disposeCount+" ="+this._list.length+"/"+this._max},t}(),V=Math.abs,C=Math.max,M=function(){function t(t){this.aabb=new A,this.userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=-1,this.id=t}return t.prototype.toString=function(){return this.id+": "+this.userData},t.prototype.isLeaf=function(){return null==this.child1},t}();exports.TreeNode=M;var I=new w({create:function(){return new M},release:function(t){t.userData=null,t.parent=null,t.child1=null,t.child2=null,t.height=-1,t.id=void 0}}),P=function(){function t(){this.inputPool=new w({create:function(){return{}},release:function(t){}}),this.stackPool=new w({create:function(){return[]},release:function(t){t.length=0}}),this.iteratorPool=new w({create:function(){return new S},release:function(t){t.close()}}),this.m_root=null,this.m_nodes={},this.m_lastProxyId=0}return t.prototype.getUserData=function(t){return this.m_nodes[t].userData},t.prototype.getFatAABB=function(t){return this.m_nodes[t].aabb},t.prototype.allocateNode=function(){var t=I.allocate();return t.id=++this.m_lastProxyId,this.m_nodes[t.id]=t,t},t.prototype.freeNode=function(t){delete this.m_nodes[t.id],I.release(t)},t.prototype.createProxy=function(t,e){var i=this.allocateNode();return i.aabb.set(t),A.extend(i.aabb,B.aabbExtension),i.userData=e,i.height=0,this.insertLeaf(i),i.id},t.prototype.destroyProxy=function(t){var e=this.m_nodes[t];this.removeLeaf(e),this.freeNode(e)},t.prototype.moveProxy=function(t,e,i){var o=this.m_nodes[t];return!o.aabb.contains(e)&&(this.removeLeaf(o),o.aabb.set(e),e=o.aabb,A.extend(e,B.aabbExtension),i.x<0?e.lowerBound.x+=i.x*B.aabbMultiplier:e.upperBound.x+=i.x*B.aabbMultiplier,i.y<0?e.lowerBound.y+=i.y*B.aabbMultiplier:e.upperBound.y+=i.y*B.aabbMultiplier,this.insertLeaf(o),!0)},t.prototype.insertLeaf=function(t){if(null==this.m_root)return this.m_root=t,void(this.m_root.parent=null);for(var e=t.aabb,i=this.m_root;!i.isLeaf();){var o=i.child1,s=i.child2,n=i.aabb.getPerimeter(),r=A.combinedPerimeter(i.aabb,e),a=2*r,m=2*(r-n),h=A.combinedPerimeter(e,o.aabb)+m;if(!o.isLeaf())h-=o.aabb.getPerimeter();var c=A.combinedPerimeter(e,s.aabb)+m;if(!s.isLeaf())c-=s.aabb.getPerimeter();if(a<h&&a<c)break;i=h<c?o:s}var _=i,l=_.parent,u=this.allocateNode();for(u.parent=l,u.userData=null,u.aabb.combine(e,_.aabb),u.height=_.height+1,null!=l?(l.child1===_?l.child1=u:l.child2=u,u.child1=_,u.child2=t,_.parent=u,t.parent=u):(u.child1=_,u.child2=t,_.parent=u,t.parent=u,this.m_root=u),i=t.parent;null!=i;){o=(i=this.balance(i)).child1,s=i.child2;i.height=1+C(o.height,s.height),i.aabb.combine(o.aabb,s.aabb),i=i.parent}},t.prototype.removeLeaf=function(t){if(t!==this.m_root){var e,i=t.parent,o=i.parent;if(e=i.child1===t?i.child2:i.child1,null!=o){o.child1===i?o.child1=e:o.child2=e,e.parent=o,this.freeNode(i);for(var s=o;null!=s;){var n=(s=this.balance(s)).child1,r=s.child2;s.aabb.combine(n.aabb,r.aabb),s.height=1+C(n.height,r.height),s=s.parent}}else this.m_root=e,e.parent=null,this.freeNode(i)}else this.m_root=null},t.prototype.balance=function(t){var e=t;if(e.isLeaf()||e.height<2)return t;var i=e.child1,o=e.child2,s=o.height-i.height;if(s>1){var n=o.child1,r=o.child2;return o.child1=e,o.parent=e.parent,e.parent=o,null!=o.parent?o.parent.child1===t?o.parent.child1=o:o.parent.child2=o:this.m_root=o,n.height>r.height?(o.child2=n,e.child2=r,r.parent=e,e.aabb.combine(i.aabb,r.aabb),o.aabb.combine(e.aabb,n.aabb),e.height=1+C(i.height,r.height),o.height=1+C(e.height,n.height)):(o.child2=r,e.child2=n,n.parent=e,e.aabb.combine(i.aabb,n.aabb),o.aabb.combine(e.aabb,r.aabb),e.height=1+C(i.height,n.height),o.height=1+C(e.height,r.height)),o}if(s<-1){var a=i.child1,m=i.child2;return i.child1=e,i.parent=e.parent,e.parent=i,null!=i.parent?i.parent.child1===e?i.parent.child1=i:i.parent.child2=i:this.m_root=i,a.height>m.height?(i.child2=a,e.child1=m,m.parent=e,e.aabb.combine(o.aabb,m.aabb),i.aabb.combine(e.aabb,a.aabb),e.height=1+C(o.height,m.height),i.height=1+C(e.height,a.height)):(i.child2=m,e.child1=a,a.parent=e,e.aabb.combine(o.aabb,a.aabb),i.aabb.combine(e.aabb,m.aabb),e.height=1+C(o.height,a.height),i.height=1+C(e.height,m.height)),i}return e},t.prototype.getHeight=function(){return null==this.m_root?0:this.m_root.height},t.prototype.getAreaRatio=function(){if(null==this.m_root)return 0;for(var t,e=this.m_root.aabb.getPerimeter(),i=0,o=this.iteratorPool.allocate().preorder(this.m_root);t=o.next();)t.height<0||(i+=t.aabb.getPerimeter());return this.iteratorPool.release(o),i/e},t.prototype.computeHeight=function(t){var e;if((e=void 0!==t?this.m_nodes[t]:this.m_root).isLeaf())return 0;var i=this.computeHeight(e.child1.id),o=this.computeHeight(e.child2.id);return 1+C(i,o)},t.prototype.validateStructure=function(t){if(null!=t){this.m_root;var e=t.child1,i=t.child2;t.isLeaf()||(this.validateStructure(e),this.validateStructure(i))}},t.prototype.validateMetrics=function(t){if(null!=t){var e=t.child1,i=t.child2;if(!t.isLeaf())e.height,i.height,(new A).combine(e.aabb,i.aabb),this.validateMetrics(e),this.validateMetrics(i)}},t.prototype.validate=function(){},t.prototype.getMaxBalance=function(){for(var t,e=0,i=this.iteratorPool.allocate().preorder(this.m_root);t=i.next();)if(!(t.height<=1)){var o=V(t.child2.height-t.child1.height);e=C(e,o)}return this.iteratorPool.release(i),e},t.prototype.rebuildBottomUp=function(){for(var t,e=[],i=0,o=this.iteratorPool.allocate().preorder(this.m_root);t=o.next();)t.height<0||(t.isLeaf()?(t.parent=null,e[i]=t,++i):this.freeNode(t));for(this.iteratorPool.release(o);i>1;){for(var s=1/0,n=-1,r=-1,a=0;a<i;++a)for(var m=e[a].aabb,h=a+1;h<i;++h){var c=e[h].aabb,_=A.combinedPerimeter(m,c);_<s&&(n=a,r=h,s=_)}var l=e[n],u=e[r],p=this.allocateNode();p.child1=l,p.child2=u,p.height=1+C(l.height,u.height),p.aabb.combine(l.aabb,u.aabb),p.parent=null,l.parent=p,u.parent=p,e[r]=e[i-1],e[n]=p,--i}this.m_root=e[0]},t.prototype.shiftOrigin=function(t){for(var e,i=this.iteratorPool.allocate().preorder(this.m_root);e=i.next();){var o=e.aabb;o.lowerBound.x-=t.x,o.lowerBound.y-=t.y,o.upperBound.x-=t.x,o.upperBound.y-=t.y}this.iteratorPool.release(i)},t.prototype.query=function(t,e){var i=this.stackPool.allocate();for(i.push(this.m_root);i.length>0;){var o=i.pop();if(null!=o)if(A.testOverlap(o.aabb,t))if(o.isLeaf()){if(!1===e(o.id))return}else i.push(o.child1),i.push(o.child2)}this.stackPool.release(i)},t.prototype.rayCast=function(t,e){var i=t.p1,o=t.p2,s=f.sub(o,i);s.normalize();var n=f.crossNumVec2(1,s),r=f.abs(n),a=t.maxFraction,m=new A,h=f.combine(1-a,i,a,o);m.combinePoints(i,h);var c=this.stackPool.allocate(),_=this.inputPool.allocate();for(c.push(this.m_root);c.length>0;){var l=c.pop();if(null!=l&&!1!==A.testOverlap(l.aabb,m)){var u=l.aabb.getCenter(),p=l.aabb.getExtents();if(!(V(f.dot(n,f.sub(i,u)))-f.dot(r,p)>0))if(l.isLeaf()){_.p1=f.clone(t.p1),_.p2=f.clone(t.p2),_.maxFraction=a;var y=e(_,l.id);if(0===y)return;y>0&&(a=y,h=f.combine(1-a,i,a,o),m.combinePoints(i,h))}else c.push(l.child1),c.push(l.child2)}}this.stackPool.release(c),this.inputPool.release(_)},t}();exports.DynamicTree=P;var S=function(){function t(){this.parents=[],this.states=[]}return t.prototype.preorder=function(t){return this.parents.length=0,this.parents.push(t),this.states.length=0,this.states.push(0),this},t.prototype.next=function(){for(;this.parents.length>0;){var t=this.parents.length-1,e=this.parents[t];if(0===this.states[t])return this.states[t]=1,e;if(1===this.states[t]&&(this.states[t]=2,e.child1))return this.parents.push(e.child1),this.states.push(1),e.child1;if(2===this.states[t]&&(this.states[t]=3,e.child2))return this.parents.push(e.child2),this.states.push(1),e.child2;this.parents.pop(),this.states.pop()}},t.prototype.close=function(){this.parents.length=0},t}(),z=Math.max,T=Math.min,F=function(){function t(){var t=this;this.m_tree=new P,this.m_moveBuffer=[],this.query=function(e,i){t.m_tree.query(e,i)},this.queryCallback=function(e){if(e===t.m_queryProxyId)return!0;var i=T(e,t.m_queryProxyId),o=z(e,t.m_queryProxyId),s=t.m_tree.getUserData(i),n=t.m_tree.getUserData(o);return t.m_callback(s,n),!0}}return t.prototype.getUserData=function(t){return this.m_tree.getUserData(t)},t.prototype.testOverlap=function(t,e){var i=this.m_tree.getFatAABB(t),o=this.m_tree.getFatAABB(e);return A.testOverlap(i,o)},t.prototype.getFatAABB=function(t){return this.m_tree.getFatAABB(t)},t.prototype.getProxyCount=function(){return this.m_moveBuffer.length},t.prototype.getTreeHeight=function(){return this.m_tree.getHeight()},t.prototype.getTreeBalance=function(){return this.m_tree.getMaxBalance()},t.prototype.getTreeQuality=function(){return this.m_tree.getAreaRatio()},t.prototype.rayCast=function(t,e){this.m_tree.rayCast(t,e)},t.prototype.shiftOrigin=function(t){this.m_tree.shiftOrigin(t)},t.prototype.createProxy=function(t,e){var i=this.m_tree.createProxy(t,e);return this.bufferMove(i),i},t.prototype.destroyProxy=function(t){this.unbufferMove(t),this.m_tree.destroyProxy(t)},t.prototype.moveProxy=function(t,e,i){this.m_tree.moveProxy(t,e,i)&&this.bufferMove(t)},t.prototype.touchProxy=function(t){this.bufferMove(t)},t.prototype.bufferMove=function(t){this.m_moveBuffer.push(t)},t.prototype.unbufferMove=function(t){for(var e=0;e<this.m_moveBuffer.length;++e)this.m_moveBuffer[e]===t&&(this.m_moveBuffer[e]=null)},t.prototype.updatePairs=function(t){for(this.m_callback=t;this.m_moveBuffer.length>0;)if(this.m_queryProxyId=this.m_moveBuffer.pop(),null!==this.m_queryProxyId){var e=this.m_tree.getFatAABB(this.m_queryProxyId);this.m_tree.query(e,this.queryCallback)}},t}(),L=Math.sin,q=Math.cos,N=Math.sqrt;function k(t,e){return{x:t,y:e}}function D(t){return{s:L(t),c:q(t)}}function j(t,e,i){return t.x=e,t.y=i,t}function R(t,e){return t.x=e.x,t.y=e.y,t}function O(t){return t.x=0,t.y=0,t}function E(t){return t.x=-t.x,t.y=-t.y,t}function J(t,e){return t.x+=e.x,t.y+=e.y,t}function Y(t,e,i){return t.x=e.x+i.x,t.y=e.x+i.y,t}function W(t,e){return t.x-=e.x,t.y-=e.y,t}function H(t,e,i){return t.x=e.x-i.x,t.y=e.y-i.y,t}function U(t,e){return t.x*=e,t.y*=e,t}function Z(t,e,i){return t.x=e*i.x,t.y=e*i.y,t}function K(t,e,i){return t.x+=e*i.x,t.y+=e*i.y,t}function X(t,e,i){return t.x-=e*i.x,t.y-=e*i.y,t}function G(t,e,i,o,s){return t.x=e*i.x+o*s.x,t.y=e*i.y+o*s.y,t}function Q(t,e,i,o,s,n,r){return t.x=e*i.x+o*s.x+n*r.x,t.y=e*i.y+o*s.y+n*r.y,t}function $(t){var e=N(t.x*t.x+t.y*t.y);if(0!==e){var i=1/e;t.x*=i,t.y*=i}return e}function tt(t){var e=N(t.x*t.x+t.y*t.y);if(e>0){var i=1/e;t.x*=i,t.y*=i}return t}function et(t,e,i){var o=i*e.y,s=-i*e.x;return t.x=o,t.y=s,t}function it(t,e,i){var o=-e*i.y,s=e*i.x;return t.x=o,t.y=s,t}function ot(t,e){return t.x*e.y-t.y*e.x}function st(t,e){return t.x*e.x+t.y*e.y}function nt(t){return t.x*t.x+t.y*t.y}function rt(t,e){var i=t.x-e.x,o=t.y-e.y;return N(i*i+o*o)}function at(t,e){var i=t.x-e.x,o=t.y-e.y;return i*i+o*o}function mt(t,e){return t.c=q(e),t.s=L(e),t}function ht(t,e,i){return t.x=e.c*i.x-e.s*i.y,t.y=e.s*i.x+e.c*i.y,t}function ct(t,e,i){var o=e.c*i.x+e.s*i.y,s=-e.s*i.x+e.c*i.y;return t.x=o,t.y=s,t}function _t(t,e,i,o){var s=e.c*o.x+e.s*o.y,n=-e.s*o.x+e.c*o.y,r=i.c*s-i.s*n,a=i.s*s+i.c*n;return t.x=r,t.y=a,t}function lt(t,e,i){return{p:k(t,e),q:D(i)}}function ut(t,e){return t.p.x=e.p.x,t.p.y=e.p.y,t.q.s=e.q.s,t.q.c=e.q.c,t}function pt(t,e,i){var o=e.q.c*i.x-e.q.s*i.y+e.p.x,s=e.q.s*i.x+e.q.c*i.y+e.p.y;return t.x=o,t.y=s,t}function yt(t,e,i){var o=i.x-e.p.x,s=i.y-e.p.y,n=e.q.c*o+e.q.s*s,r=-e.q.s*o+e.q.c*s;return t.x=n,t.y=r,t}function dt(t,e,i,o){var s=e.q.c*o.x-e.q.s*o.y+e.p.x,n=e.q.s*o.x+e.q.c*o.y+e.p.y,r=s-i.p.x,a=n-i.p.y,m=i.q.c*r+i.q.s*a,h=-i.q.s*r+i.q.c*a;return t.x=m,t.y=h,t}function ft(t,e,i){var o=e.q.c*i.q.c+e.q.s*i.q.s,s=e.q.c*i.q.s-e.q.s*i.q.c,n=e.q.c*(i.p.x-e.p.x)+e.q.s*(i.p.y-e.p.y),r=-e.q.s*(i.p.x-e.p.x)+e.q.c*(i.p.y-e.p.y);return t.q.c=o,t.q.s=s,t.p.x=n,t.p.y=r,t}var vt=Math.sin,xt=Math.cos,At=Math.atan2,gt=function(){function t(e){if(!(this instanceof t))return new t(e);"number"==typeof e?this.setAngle(e):"object"==typeof e?this.setRot(e):this.setIdentity()}return t.neo=function(e){var i=Object.create(t.prototype);return i.setAngle(e),i},t.clone=function(e){var i=Object.create(t.prototype);return i.s=e.s,i.c=e.c,i},t.identity=function(){var e=Object.create(t.prototype);return e.s=0,e.c=1,e},t.isValid=function(t){return null!=t&&(Number.isFinite(t.s)&&Number.isFinite(t.c))},t.assert=function(t){},t.prototype.setIdentity=function(){this.s=0,this.c=1},t.prototype.set=function(t){"object"==typeof t?(this.s=t.s,this.c=t.c):(this.s=vt(t),this.c=xt(t))},t.prototype.setRot=function(t){this.s=t.s,this.c=t.c},t.prototype.setAngle=function(t){this.s=vt(t),this.c=xt(t)},t.prototype.getAngle=function(){return At(this.s,this.c)},t.prototype.getXAxis=function(){return f.neo(this.c,this.s)},t.prototype.getYAxis=function(){return f.neo(-this.s,this.c)},t.mul=function(e,i){if("c"in i&&"s"in i){var o=t.identity();return o.s=e.s*i.c+e.c*i.s,o.c=e.c*i.c-e.s*i.s,o}if("x"in i&&"y"in i)return f.neo(e.c*i.x-e.s*i.y,e.s*i.x+e.c*i.y)},t.mulRot=function(e,i){var o=t.identity();return o.s=e.s*i.c+e.c*i.s,o.c=e.c*i.c-e.s*i.s,o},t.mulVec2=function(t,e){return f.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},t.mulSub=function(t,e,i){var o=t.c*(e.x-i.x)-t.s*(e.y-i.y),s=t.s*(e.x-i.x)+t.c*(e.y-i.y);return f.neo(o,s)},t.mulT=function(e,i){if("c"in i&&"s"in i){var o=t.identity();return o.s=e.c*i.s-e.s*i.c,o.c=e.c*i.c+e.s*i.s,o}if("x"in i&&"y"in i)return f.neo(e.c*i.x+e.s*i.y,-e.s*i.x+e.c*i.y)},t.mulTRot=function(e,i){var o=t.identity();return o.s=e.c*i.s-e.s*i.c,o.c=e.c*i.c+e.s*i.s,o},t.mulTVec2=function(t,e){return f.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)},t}();exports.Rot=gt;var bt=Math.atan2,Bt=Math.PI,wt=k(0,0),Vt=function(){function t(){this.localCenter=f.zero(),this.c=f.zero(),this.a=0,this.alpha0=0,this.c0=f.zero(),this.a0=0}return t.prototype.recycle=function(){O(this.localCenter),O(this.c),this.a=0,this.alpha0=0,O(this.c0),this.a0=0},t.prototype.setTransform=function(t){pt(wt,t,this.localCenter),R(this.c,wt),R(this.c0,wt),this.a=this.a0=bt(t.q.s,t.q.c)},t.prototype.setLocalCenter=function(t,e){R(this.localCenter,t),pt(wt,e,this.localCenter),R(this.c,wt),R(this.c0,wt)},t.prototype.getTransform=function(t,e){void 0===e&&(e=0),mt(t.q,(1-e)*this.a0+e*this.a),G(t.p,1-e,this.c0,e,this.c),W(t.p,ht(wt,t.q,this.localCenter))},t.prototype.advance=function(t){var e=(t-this.alpha0)/(1-this.alpha0);G(this.c0,e,this.c,1-e,this.c0),this.a0=e*this.a+(1-e)*this.a0,this.alpha0=t},t.prototype.forward=function(){this.a0=this.a,R(this.c0,this.c)},t.prototype.normalize=function(){var t=h(this.a0,-Bt,+Bt);this.a-=this.a0-t,this.a0=t},t.prototype.set=function(t){R(this.localCenter,t.localCenter),R(this.c,t.c),this.a=t.a,this.alpha0=t.alpha0,R(this.c0,t.c0),this.a0=t.a0},t}();exports.Sweep=Vt;var Ct=function(){function t(e,i){if(!(this instanceof t))return new t(e,i);this.p=f.zero(),this.q=gt.identity(),void 0!==e&&this.p.setVec2(e),void 0!==i&&this.q.setAngle(i)}return t.clone=function(e){var i=Object.create(t.prototype);return i.p=f.clone(e.p),i.q=gt.clone(e.q),i},t.neo=function(e,i){var o=Object.create(t.prototype);return o.p=f.clone(e),o.q=gt.clone(i),o},t.identity=function(){var e=Object.create(t.prototype);return e.p=f.zero(),e.q=gt.identity(),e},t.prototype.setIdentity=function(){this.p.setZero(),this.q.setIdentity()},t.prototype.set=function(t,e){void 0===e?(this.p.set(t.p),this.q.set(t.q)):(this.p.set(t),this.q.set(e))},t.prototype.setNum=function(t,e){this.p.setVec2(t),this.q.setAngle(e)},t.prototype.setTransform=function(t){this.p.setVec2(t.p),this.q.setRot(t.q)},t.isValid=function(t){return null!=t&&(f.isValid(t.p)&&gt.isValid(t.q))},t.assert=function(t){},t.mul=function(e,i){if(Array.isArray(i)){for(var o=[],s=0;s<i.length;s++)o[s]=t.mul(e,i[s]);return o}return"x"in i&&"y"in i?t.mulVec2(e,i):"p"in i&&"q"in i?t.mulXf(e,i):void 0},t.mulAll=function(e,i){for(var o=[],s=0;s<i.length;s++)o[s]=t.mul(e,i[s]);return o},t.mulFn=function(e){return function(i){return t.mul(e,i)}},t.mulVec2=function(t,e){var i=t.q.c*e.x-t.q.s*e.y+t.p.x,o=t.q.s*e.x+t.q.c*e.y+t.p.y;return f.neo(i,o)},t.mulXf=function(e,i){var o=t.identity();return o.q=gt.mulRot(e.q,i.q),o.p=f.add(gt.mulVec2(e.q,i.p),e.p),o},t.mulT=function(e,i){return"x"in i&&"y"in i?t.mulTVec2(e,i):"p"in i&&"q"in i?t.mulTXf(e,i):void 0},t.mulTVec2=function(t,e){var i=e.x-t.p.x,o=e.y-t.p.y,s=t.q.c*i+t.q.s*o,n=-t.q.s*i+t.q.c*o;return f.neo(s,n)},t.mulTXf=function(e,i){var o=t.identity();return o.q.setRot(gt.mulTRot(e.q,i.q)),o.p.setVec2(gt.mulTVec2(e.q,f.sub(i.p,e.p))),o},t}();exports.Transform=Ct;var Mt=function(){return function(){this.v=f.zero(),this.w=0}}(),It=Math.sin,Pt=Math.cos,St=function(){function t(){this.c=f.zero(),this.a=0}return t.prototype.getTransform=function(t,e){return t.q.c=Pt(this.a),t.q.s=It(this.a),t.p.x=this.c.x-(t.q.c*e.x-t.q.s*e.y),t.p.y=this.c.y-(t.q.s*e.x+t.q.c*e.y),t},t}();function zt(t,e,i,o){return t.q.c=Pt(o),t.q.s=It(o),t.p.x=i.x-(t.q.c*e.x-t.q.s*e.y),t.p.y=i.y-(t.q.s*e.x+t.q.c*e.y),t}var Tt=function(){function t(){this.style={},this.appData={}}return t.isValid=function(t){return null!=t&&("string"==typeof t.m_type&&"number"==typeof t.m_radius)},t}();exports.Shape=Tt;var Ft=new A,Lt=new A,qt=k(0,0),Nt={userData:null,friction:.2,restitution:0,density:0,isSensor:!1,filterGroupIndex:0,filterCategoryBits:1,filterMaskBits:65535},kt=function(){return function(t,e){this.aabb=new A,this.fixture=t,this.childIndex=e,this.proxyId}}();exports.FixtureProxy=kt;var Dt=function(){function t(t,e,i){this.style={},this.appData={},e.shape?(i=e,e=e.shape):"number"==typeof i&&(i={density:i}),i=o(i,Nt),this.m_body=t,this.m_friction=i.friction,this.m_restitution=i.restitution,this.m_density=i.density,this.m_isSensor=i.isSensor,this.m_filterGroupIndex=i.filterGroupIndex,this.m_filterCategoryBits=i.filterCategoryBits,this.m_filterMaskBits=i.filterMaskBits,this.m_shape=e,this.m_next=null,this.m_proxies=[],this.m_proxyCount=0;for(var s=this.m_shape.getChildCount(),n=0;n<s;++n)this.m_proxies[n]=new kt(this,n);this.m_userData=i.userData}return t.prototype._reset=function(){var t=this.getBody(),e=t.m_world.m_broadPhase;this.destroyProxies(e),this.m_shape._reset&&this.m_shape._reset();for(var i=this.m_shape.getChildCount(),o=0;o<i;++o)this.m_proxies[o]=new kt(this,o);this.createProxies(e,t.m_xf),t.resetMassData()},t.prototype._serialize=function(){return{friction:this.m_friction,restitution:this.m_restitution,density:this.m_density,isSensor:this.m_isSensor,filterGroupIndex:this.m_filterGroupIndex,filterCategoryBits:this.m_filterCategoryBits,filterMaskBits:this.m_filterMaskBits,shape:this.m_shape}},t._deserialize=function(e,i,o){var s=o(Tt,e.shape);return s&&new t(i,s,e)},t.prototype.getType=function(){return this.m_shape.m_type},t.prototype.getShape=function(){return this.m_shape},t.prototype.isSensor=function(){return this.m_isSensor},t.prototype.setSensor=function(t){t!=this.m_isSensor&&(this.m_body.setAwake(!0),this.m_isSensor=t)},t.prototype.getUserData=function(){return this.m_userData},t.prototype.setUserData=function(t){this.m_userData=t},t.prototype.getBody=function(){return this.m_body},t.prototype.getNext=function(){return this.m_next},t.prototype.getDensity=function(){return this.m_density},t.prototype.setDensity=function(t){this.m_density=t},t.prototype.getFriction=function(){return this.m_friction},t.prototype.setFriction=function(t){this.m_friction=t},t.prototype.getRestitution=function(){return this.m_restitution},t.prototype.setRestitution=function(t){this.m_restitution=t},t.prototype.testPoint=function(t){return this.m_shape.testPoint(this.m_body.getTransform(),t)},t.prototype.rayCast=function(t,e,i){return this.m_shape.rayCast(t,e,this.m_body.getTransform(),i)},t.prototype.getMassData=function(t){this.m_shape.computeMass(t,this.m_density)},t.prototype.getAABB=function(t){return this.m_proxies[t].aabb},t.prototype.createProxies=function(t,e){this.m_proxyCount=this.m_shape.getChildCount();for(var i=0;i<this.m_proxyCount;++i){var o=this.m_proxies[i];this.m_shape.computeAABB(o.aabb,e,i),o.proxyId=t.createProxy(o.aabb,o)}},t.prototype.destroyProxies=function(t){for(var e=0;e<this.m_proxyCount;++e){var i=this.m_proxies[e];t.destroyProxy(i.proxyId),i.proxyId=null}this.m_proxyCount=0},t.prototype.synchronize=function(t,e,i){for(var o=0;o<this.m_proxyCount;++o){var s=this.m_proxies[o];this.m_shape.computeAABB(Ft,e,s.childIndex),this.m_shape.computeAABB(Lt,i,s.childIndex),s.aabb.combine(Ft,Lt),H(qt,i.p,e.p),t.moveProxy(s.proxyId,s.aabb,qt)}},t.prototype.setFilterData=function(t){this.m_filterGroupIndex=t.groupIndex,this.m_filterCategoryBits=t.categoryBits,this.m_filterMaskBits=t.maskBits,this.refilter()},t.prototype.getFilterGroupIndex=function(){return this.m_filterGroupIndex},t.prototype.setFilterGroupIndex=function(t){this.m_filterGroupIndex=t,this.refilter()},t.prototype.getFilterCategoryBits=function(){return this.m_filterCategoryBits},t.prototype.setFilterCategoryBits=function(t){this.m_filterCategoryBits=t,this.refilter()},t.prototype.getFilterMaskBits=function(){return this.m_filterMaskBits},t.prototype.setFilterMaskBits=function(t){this.m_filterMaskBits=t,this.refilter()},t.prototype.refilter=function(){if(null!=this.m_body){for(var t=this.m_body.getContactList();t;){var e=t.contact,i=e.getFixtureA(),o=e.getFixtureB();i!=this&&o!=this||e.flagForFiltering(),t=t.next}var s=this.m_body.getWorld();if(null!=s)for(var n=s.m_broadPhase,r=0;r<this.m_proxyCount;++r)n.touchProxy(this.m_proxies[r].proxyId)}},t.prototype.shouldCollide=function(t){if(t.m_filterGroupIndex===this.m_filterGroupIndex&&0!==t.m_filterGroupIndex)return t.m_filterGroupIndex>0;var e=0!=(t.m_filterMaskBits&this.m_filterCategoryBits),i=0!=(t.m_filterCategoryBits&this.m_filterMaskBits);return e&&i},t}();exports.Fixture=Dt;var jt="static",Rt="kinematic",Ot="dynamic",Et=k(0,0),Jt=k(0,0),Yt=k(0,0),Wt=k(0,0),Ht=lt(0,0,0),Ut={type:jt,position:f.zero(),angle:0,linearVelocity:f.zero(),angularVelocity:0,linearDamping:0,angularDamping:0,fixedRotation:!1,bullet:!1,gravityScale:1,allowSleep:!0,awake:!0,active:!0,userData:null},Zt=function(){function t(t,e){this.style={},this.appData={},e=o(e,Ut),this.m_world=t,this.m_awakeFlag=e.awake,this.m_autoSleepFlag=e.allowSleep,this.m_bulletFlag=e.bullet,this.m_fixedRotationFlag=e.fixedRotation,this.m_activeFlag=e.active,this.m_islandFlag=!1,this.m_toiFlag=!1,this.m_userData=e.userData,this.m_type=e.type,this.m_type==Ot?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_xf=Ct.identity(),this.m_xf.p.setVec2(e.position),this.m_xf.q.setAngle(e.angle),this.m_sweep=new Vt,this.m_sweep.setTransform(this.m_xf),this.c_velocity=new Mt,this.c_position=new St,this.m_force=f.zero(),this.m_torque=0,this.m_linearVelocity=f.clone(e.linearVelocity),this.m_angularVelocity=e.angularVelocity,this.m_linearDamping=e.linearDamping,this.m_angularDamping=e.angularDamping,this.m_gravityScale=e.gravityScale,this.m_sleepTime=0,this.m_jointList=null,this.m_contactList=null,this.m_fixtureList=null,this.m_prev=null,this.m_next=null,this.m_destroyed=!1}return t.prototype._serialize=function(){for(var t=[],e=this.m_fixtureList;e;e=e.m_next)t.push(e);return{type:this.m_type,bullet:this.m_bulletFlag,position:this.m_xf.p,angle:this.m_xf.q.getAngle(),linearVelocity:this.m_linearVelocity,angularVelocity:this.m_angularVelocity,fixtures:t}},t._deserialize=function(e,i,o){var s=new t(i,e);if(e.fixtures)for(var n=e.fixtures.length-1;n>=0;n--){var r=o(Dt,e.fixtures[n],s);s._addFixture(r)}return s},t.prototype.isWorldLocked=function(){return!(!this.m_world||!this.m_world.isLocked())},t.prototype.getWorld=function(){return this.m_world},t.prototype.getNext=function(){return this.m_next},t.prototype.setUserData=function(t){this.m_userData=t},t.prototype.getUserData=function(){return this.m_userData},t.prototype.getFixtureList=function(){return this.m_fixtureList},t.prototype.getJointList=function(){return this.m_jointList},t.prototype.getContactList=function(){return this.m_contactList},t.prototype.isStatic=function(){return this.m_type==jt},t.prototype.isDynamic=function(){return this.m_type==Ot},t.prototype.isKinematic=function(){return this.m_type==Rt},t.prototype.setStatic=function(){return this.setType(jt),this},t.prototype.setDynamic=function(){return this.setType(Ot),this},t.prototype.setKinematic=function(){return this.setType(Rt),this},t.prototype.getType=function(){return this.m_type},t.prototype.setType=function(t){if(1!=this.isWorldLocked()&&this.m_type!=t){this.m_type=t,this.resetMassData(),this.m_type==jt&&(this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_sweep.forward(),this.synchronizeFixtures()),this.setAwake(!0),this.m_force.setZero(),this.m_torque=0;for(var e=this.m_contactList;e;){var i=e;e=e.next,this.m_world.destroyContact(i.contact)}this.m_contactList=null;for(var o=this.m_world.m_broadPhase,s=this.m_fixtureList;s;s=s.m_next)for(var n=0;n<s.m_proxyCount;++n)o.touchProxy(s.m_proxies[n].proxyId)}},t.prototype.isBullet=function(){return this.m_bulletFlag},t.prototype.setBullet=function(t){this.m_bulletFlag=!!t},t.prototype.isSleepingAllowed=function(){return this.m_autoSleepFlag},t.prototype.setSleepingAllowed=function(t){this.m_autoSleepFlag=!!t,0==this.m_autoSleepFlag&&this.setAwake(!0)},t.prototype.isAwake=function(){return this.m_awakeFlag},t.prototype.setAwake=function(t){t?(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_force.setZero(),this.m_torque=0)},t.prototype.isActive=function(){return this.m_activeFlag},t.prototype.setActive=function(t){if(t!=this.m_activeFlag)if(this.m_activeFlag=!!t,this.m_activeFlag){for(var e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.createProxies(e,this.m_xf);this.m_world.m_newFixture=!0}else{for(e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.destroyProxies(e);for(var o=this.m_contactList;o;){var s=o;o=o.next,this.m_world.destroyContact(s.contact)}this.m_contactList=null}},t.prototype.isFixedRotation=function(){return this.m_fixedRotationFlag},t.prototype.setFixedRotation=function(t){this.m_fixedRotationFlag!=t&&(this.m_fixedRotationFlag=!!t,this.m_angularVelocity=0,this.resetMassData())},t.prototype.getTransform=function(){return this.m_xf},t.prototype.setTransform=function(t,e){if(1!=this.isWorldLocked()){this.m_xf.setNum(t,e),this.m_sweep.setTransform(this.m_xf);for(var i=this.m_world.m_broadPhase,o=this.m_fixtureList;o;o=o.m_next)o.synchronize(i,this.m_xf,this.m_xf);this.setAwake(!0)}},t.prototype.synchronizeTransform=function(){this.m_sweep.getTransform(this.m_xf,1)},t.prototype.synchronizeFixtures=function(){this.m_sweep.getTransform(Ht,0);for(var t=this.m_world.m_broadPhase,e=this.m_fixtureList;e;e=e.m_next)e.synchronize(t,Ht,this.m_xf)},t.prototype.advance=function(t){this.m_sweep.advance(t),R(this.m_sweep.c,this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_sweep.getTransform(this.m_xf,1)},t.prototype.getPosition=function(){return this.m_xf.p},t.prototype.setPosition=function(t){this.setTransform(t,this.m_sweep.a)},t.prototype.getAngle=function(){return this.m_sweep.a},t.prototype.setAngle=function(t){this.setTransform(this.m_xf.p,t)},t.prototype.getWorldCenter=function(){return this.m_sweep.c},t.prototype.getLocalCenter=function(){return this.m_sweep.localCenter},t.prototype.getLinearVelocity=function(){return this.m_linearVelocity},t.prototype.getLinearVelocityFromWorldPoint=function(t){var e=f.sub(t,this.m_sweep.c);return f.add(this.m_linearVelocity,f.crossNumVec2(this.m_angularVelocity,e))},t.prototype.getLinearVelocityFromLocalPoint=function(t){return this.getLinearVelocityFromWorldPoint(this.getWorldPoint(t))},t.prototype.setLinearVelocity=function(t){this.m_type!=jt&&(f.dot(t,t)>0&&this.setAwake(!0),this.m_linearVelocity.setVec2(t))},t.prototype.getAngularVelocity=function(){return this.m_angularVelocity},t.prototype.setAngularVelocity=function(t){this.m_type!=jt&&(t*t>0&&this.setAwake(!0),this.m_angularVelocity=t)},t.prototype.getLinearDamping=function(){return this.m_linearDamping},t.prototype.setLinearDamping=function(t){this.m_linearDamping=t},t.prototype.getAngularDamping=function(){return this.m_angularDamping},t.prototype.setAngularDamping=function(t){this.m_angularDamping=t},t.prototype.getGravityScale=function(){return this.m_gravityScale},t.prototype.setGravityScale=function(t){this.m_gravityScale=t},t.prototype.getMass=function(){return this.m_mass},t.prototype.getInertia=function(){return this.m_I+this.m_mass*f.dot(this.m_sweep.localCenter,this.m_sweep.localCenter)},t.prototype.getMassData=function(t){t.mass=this.m_mass,t.I=this.getInertia(),R(t.center,this.m_sweep.localCenter)},t.prototype.resetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,O(this.m_sweep.localCenter),this.isStatic()||this.isKinematic())return R(this.m_sweep.c0,this.m_xf.p),R(this.m_sweep.c,this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);O(Jt);for(var t=this.m_fixtureList;t;t=t.m_next)if(0!=t.m_density){var e={mass:0,center:k(0,0),I:0};t.getMassData(e),this.m_mass+=e.mass,K(Jt,e.mass,e.center),this.m_I+=e.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,Z(Jt,this.m_invMass,Jt)):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&0==this.m_fixedRotationFlag?(this.m_I-=this.m_mass*st(Jt,Jt),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0),R(Et,this.m_sweep.c),this.m_sweep.setLocalCenter(Jt,this.m_xf),H(Yt,this.m_sweep.c,Et),it(Wt,this.m_angularVelocity,Yt),J(this.m_linearVelocity,Wt)},t.prototype.setMassData=function(t){1!=this.isWorldLocked()&&this.m_type==Ot&&(this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,t.I>0&&0==this.m_fixedRotationFlag&&(this.m_I=t.I-this.m_mass*st(t.center,t.center),this.m_invI=1/this.m_I),R(Et,this.m_sweep.c),this.m_sweep.setLocalCenter(t.center,this.m_xf),H(Yt,this.m_sweep.c,Et),it(Wt,this.m_angularVelocity,Yt),J(this.m_linearVelocity,Wt))},t.prototype.applyForce=function(t,e,i){void 0===i&&(i=!0),this.m_type==Ot&&(i&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_force.add(t),this.m_torque+=f.crossVec2Vec2(f.sub(e,this.m_sweep.c),t)))},t.prototype.applyForceToCenter=function(t,e){void 0===e&&(e=!0),this.m_type==Ot&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&this.m_force.add(t))},t.prototype.applyTorque=function(t,e){void 0===e&&(e=!0),this.m_type==Ot&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_torque+=t))},t.prototype.applyLinearImpulse=function(t,e,i){void 0===i&&(i=!0),this.m_type==Ot&&(i&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.addMul(this.m_invMass,t),this.m_angularVelocity+=this.m_invI*f.crossVec2Vec2(f.sub(e,this.m_sweep.c),t)))},t.prototype.applyAngularImpulse=function(t,e){void 0===e&&(e=!0),this.m_type==Ot&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*t))},t.prototype.shouldCollide=function(t){if(this.m_type!=Ot&&t.m_type!=Ot)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other==t&&0==e.joint.m_collideConnected)return!1;return!0},t.prototype._addFixture=function(t){if(1==this.isWorldLocked())return null;if(this.m_activeFlag){var e=this.m_world.m_broadPhase;t.createProxies(e,this.m_xf)}return t.m_next=this.m_fixtureList,this.m_fixtureList=t,t.m_density>0&&this.resetMassData(),this.m_world.m_newFixture=!0,t},t.prototype.createFixture=function(t,e){if(1==this.isWorldLocked())return null;var i=new Dt(this,t,e);return this._addFixture(i),i},t.prototype.destroyFixture=function(t){if(1!=this.isWorldLocked()){if(this.m_fixtureList===t)this.m_fixtureList=t.m_next;else for(var e=this.m_fixtureList;null!=e;){if(e.m_next===t){e.m_next=t.m_next;break}e=e.m_next}for(var i=this.m_contactList;i;){var o=i.contact;i=i.next;var s=o.getFixtureA(),n=o.getFixtureB();t!=s&&t!=n||this.m_world.destroyContact(o)}if(this.m_activeFlag){var r=this.m_world.m_broadPhase;t.destroyProxies(r)}t.m_body=null,t.m_next=null,this.m_world.publish("remove-fixture",t),this.resetMassData()}},t.prototype.getWorldPoint=function(t){return Ct.mulVec2(this.m_xf,t)},t.prototype.getWorldVector=function(t){return gt.mulVec2(this.m_xf.q,t)},t.prototype.getLocalPoint=function(t){return Ct.mulTVec2(this.m_xf,t)},t.prototype.getLocalVector=function(t){return gt.mulTVec2(this.m_xf.q,t)},t.STATIC="static",t.KINEMATIC="kinematic",t.DYNAMIC="dynamic",t}();exports.Body=Zt;var Kt=function(){return function(){this.other=null,this.joint=null,this.prev=null,this.next=null}}();exports.JointEdge=Kt;var Xt=function(){function t(t,e,i){this.m_type="unknown-joint",this.m_prev=null,this.m_next=null,this.m_edgeA=new Kt,this.m_edgeB=new Kt,this.m_islandFlag=!1,this.style={},this.appData={},e="bodyA"in t?t.bodyA:e,i="bodyB"in t?t.bodyB:i,this.m_bodyA=e,this.m_bodyB=i,this.m_collideConnected=!!t.collideConnected,this.m_userData=t.userData}return t.prototype.isActive=function(){return this.m_bodyA.isActive()&&this.m_bodyB.isActive()},t.prototype.getType=function(){return this.m_type},t.prototype.getBodyA=function(){return this.m_bodyA},t.prototype.getBodyB=function(){return this.m_bodyB},t.prototype.getNext=function(){return this.m_next},t.prototype.getUserData=function(){return this.m_userData},t.prototype.setUserData=function(t){this.m_userData=t},t.prototype.getCollideConnected=function(){return this.m_collideConnected},t.prototype.shiftOrigin=function(t){},t.prototype._resetAnchors=function(t){return this._reset(t)},t}();exports.Joint=Xt;var Gt={gjkCalls:0,gjkIters:0,gjkMaxIters:0,toiTime:0,toiMaxTime:0,toiCalls:0,toiIters:0,toiMaxIters:0,toiRootIters:0,toiMaxRootIters:0,toString:function(t){t="string"==typeof t?t:"\n";var e="";for(var i in this)"function"!=typeof this[i]&&"object"!=typeof this[i]&&(e+=i+": "+this[i]+t);return e}};exports.stats=Gt;var Qt=function(){return Date.now()},$t=function(t){return Date.now()-t},te={now:Qt,diff:$t},ee=Math.max,ie=k(0,0),oe=k(0,0),se=k(0,0),ne=k(0,0),re=k(0,0),ae=k(0,0),me=k(0,0);Gt.gjkCalls=0,Gt.gjkIters=0,Gt.gjkMaxIters=0;var he=function(){function t(){this.proxyA=new ue,this.proxyB=new ue,this.transformA=Ct.identity(),this.transformB=Ct.identity(),this.useRadii=!1}return t.prototype.recycle=function(){this.proxyA.recycle(),this.proxyB.recycle(),this.transformA.setIdentity(),this.transformB.setIdentity(),this.useRadii=!1},t}();exports.DistanceInput=he;var ce=function(){function t(){this.pointA=k(0,0),this.pointB=k(0,0),this.distance=0,this.iterations=0}return t.prototype.recycle=function(){O(this.pointA),O(this.pointB),this.distance=0,this.iterations=0},t}();exports.DistanceOutput=ce;var _e=function(){function t(){this.metric=0,this.indexA=[],this.indexB=[],this.count=0}return t.prototype.recycle=function(){this.metric=0,this.indexA.length=0,this.indexB.length=0,this.count=0},t}();exports.SimplexCache=_e;var le=function(t,e,i){++Gt.gjkCalls;var o=i.proxyA,s=i.proxyB,r=i.transformA,a=i.transformB;ve.recycle(),ve.readCache(e,o,r,s,a);for(var m=ve.m_v,h=B.maxDistanceIterations,c=[],_=[],l=0,u=0;u<h;){l=ve.m_count;for(var p=0;p<l;++p)c[p]=m[p].indexA,_[p]=m[p].indexB;if(ve.solve(),3===ve.m_count)break;var y=ve.getSearchDirection();if(nt(y)<n*n)break;var d=m[ve.m_count];d.indexA=o.getSupport(ct(ie,r.q,Z(ie,-1,y))),pt(d.wA,r,o.getVertex(d.indexA)),d.indexB=s.getSupport(ct(ie,a.q,y)),pt(d.wB,a,s.getVertex(d.indexB)),H(d.w,d.wB,d.wA),++u,++Gt.gjkIters;var f=!1;for(p=0;p<l;++p)if(d.indexA===c[p]&&d.indexB===_[p]){f=!0;break}if(f)break;++ve.m_count}if(Gt.gjkMaxIters=ee(Gt.gjkMaxIters,u),ve.getWitnessPoints(t.pointA,t.pointB),t.distance=rt(t.pointA,t.pointB),t.iterations=u,ve.writeCache(e),i.useRadii){var v=o.m_radius,x=s.m_radius;if(t.distance>v+x&&t.distance>n)t.distance-=v+x,H(oe,t.pointB,t.pointA),tt(oe),K(t.pointA,v,oe),X(t.pointB,x,oe);else{var A=H(ie,t.pointA,t.pointB);R(t.pointA,A),R(t.pointB,A),t.distance=0}}};exports.Distance=le;var ue=function(){function t(){this.m_vertices=[],this.m_count=0,this.m_radius=0}return t.prototype.recycle=function(){this.m_vertices.length=0,this.m_count=0,this.m_radius=0},t.prototype.getVertexCount=function(){return this.m_count},t.prototype.getVertex=function(t){return this.m_vertices[t]},t.prototype.getSupport=function(t){for(var e=-1,i=-1/0,o=0;o<this.m_count;++o){var s=st(this.m_vertices[o],t);s>i&&(e=o,i=s)}return e},t.prototype.getSupportVertex=function(t){return this.m_vertices[this.getSupport(t)]},t.prototype.set=function(t,e){t.computeDistanceProxy(this,e)},t.prototype.setVertices=function(t,e,i){this.m_vertices=t,this.m_count=e,this.m_radius=i},t}();exports.DistanceProxy=ue;var pe=function(){function t(){this.wA=k(0,0),this.indexA=0,this.wB=k(0,0),this.indexB=0,this.w=k(0,0),this.a=0}return t.prototype.recycle=function(){this.indexA=0,this.indexB=0,O(this.wA),O(this.wB),O(this.w),this.a=0},t.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,R(this.wA,t.wA),R(this.wB,t.wB),R(this.w,t.w),this.a=t.a},t}(),ye=k(0,0),de=k(0,0),fe=function(){function t(){this.m_v1=new pe,this.m_v2=new pe,this.m_v3=new pe,this.m_v=[this.m_v1,this.m_v2,this.m_v3]}return t.prototype.recycle=function(){this.m_v1.recycle(),this.m_v2.recycle(),this.m_v3.recycle(),this.m_count=0},t.prototype.toString=function(){return 3===this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y,this.m_v3.a,this.m_v3.wA.x,this.m_v3.wA.y,this.m_v3.wB.x,this.m_v3.wB.y].toString():2===this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y].toString():1===this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y].toString():"+"+this.m_count},t.prototype.readCache=function(t,e,i,o,s){this.m_count=t.count;for(var r=0;r<this.m_count;++r){(_=this.m_v[r]).indexA=t.indexA[r],_.indexB=t.indexB[r];var a=e.getVertex(_.indexA),m=o.getVertex(_.indexB);pt(_.wA,i,a),pt(_.wB,s,m),H(_.w,_.wB,_.wA),_.a=0}if(this.m_count>1){var h=t.metric,c=this.getMetric();(c<.5*h||2*h<c||c<n)&&(this.m_count=0)}if(0===this.m_count){var _;(_=this.m_v[0]).indexA=0,_.indexB=0;a=e.getVertex(0),m=o.getVertex(0);pt(_.wA,i,a),pt(_.wB,s,m),H(_.w,_.wB,_.wA),_.a=1,this.m_count=1}},t.prototype.writeCache=function(t){t.metric=this.getMetric(),t.count=this.m_count;for(var e=0;e<this.m_count;++e)t.indexA[e]=this.m_v[e].indexA,t.indexB[e]=this.m_v[e].indexB},t.prototype.getSearchDirection=function(){var t=this.m_v1,e=this.m_v2;switch(this.m_v3,this.m_count){case 1:return j(ye,-t.w.x,-t.w.y);case 2:return H(se,e.w,t.w),-ot(se,t.w)>0?j(ye,-se.y,se.x):j(ye,se.y,-se.x);default:return O(ye)}},t.prototype.getClosestPoint=function(){var t=this.m_v1,e=this.m_v2;switch(this.m_v3,this.m_count){case 0:return O(de);case 1:return R(de,t.w);case 2:return G(de,t.a,t.w,e.a,e.w);case 3:default:return O(de)}},t.prototype.getWitnessPoints=function(t,e){var i=this.m_v1,o=this.m_v2,s=this.m_v3;switch(this.m_count){case 0:break;case 1:R(t,i.wA),R(e,i.wB);break;case 2:G(t,i.a,i.wA,o.a,o.wA),G(e,i.a,i.wB,o.a,o.wB);break;case 3:Q(t,i.a,i.wA,o.a,o.wA,s.a,s.wA),R(e,t)}},t.prototype.getMetric=function(){switch(this.m_count){case 0:case 1:return 0;case 2:return rt(this.m_v1.w,this.m_v2.w);case 3:return ot(H(ae,this.m_v2.w,this.m_v1.w),H(me,this.m_v3.w,this.m_v1.w));default:return 0}},t.prototype.solve=function(){switch(this.m_count){case 1:break;case 2:this.solve2();break;case 3:this.solve3()}},t.prototype.solve2=function(){var t=this.m_v1.w,e=this.m_v2.w;H(se,e,t);var i=-st(t,se);if(i<=0)return this.m_v1.a=1,void(this.m_count=1);var o=st(e,se);if(o<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);var s=1/(o+i);this.m_v1.a=o*s,this.m_v2.a=i*s,this.m_count=2},t.prototype.solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w;H(se,e,t);var o=st(t,se),s=st(e,se),n=-o;H(ne,i,t);var r=st(t,ne),a=st(i,ne),m=-r;H(re,i,e);var h=st(e,re),c=st(i,re),_=-h,l=ot(se,ne),u=l*ot(e,i),p=l*ot(i,t),y=l*ot(t,e);if(n<=0&&m<=0)return this.m_v1.a=1,void(this.m_count=1);if(s>0&&n>0&&y<=0){var d=1/(s+n);return this.m_v1.a=s*d,this.m_v2.a=n*d,void(this.m_count=2)}if(a>0&&m>0&&p<=0){var f=1/(a+m);return this.m_v1.a=a*f,this.m_v3.a=m*f,this.m_count=2,void this.m_v2.set(this.m_v3)}if(s<=0&&_<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);if(a<=0&&c<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.set(this.m_v3);if(c>0&&_>0&&u<=0){var v=1/(c+_);return this.m_v2.a=c*v,this.m_v3.a=_*v,this.m_count=2,void this.m_v1.set(this.m_v3)}var x=1/(u+p+y);this.m_v1.a=u*x,this.m_v2.a=p*x,this.m_v3.a=y*x,this.m_count=3},t}(),ve=new fe,xe=new he,Ae=new _e,ge=new ce,be=function(t,e,i,o,s,r){return xe.recycle(),xe.proxyA.set(t,e),xe.proxyB.set(i,o),ut(xe.transformA,s),ut(xe.transformB,r),xe.useRadii=!0,ge.recycle(),Ae.recycle(),le(ge,Ae,xe),ge.distance<10*n};exports.testOverlap=be,le.testOverlap=be,le.Input=he,le.Output=ce,le.Proxy=ue,le.Cache=_e;var Be=function(){function t(){this.proxyA=new ue,this.proxyB=new ue,this.transformA=Ct.identity(),this.transformB=Ct.identity(),this.translationB=f.zero()}return t.prototype.recycle=function(){this.proxyA.recycle(),this.proxyB.recycle(),this.transformA.setIdentity(),this.transformB.setIdentity(),O(this.translationB)},t}();exports.ShapeCastInput=Be;var we=function(){return function(){this.point=f.zero(),this.normal=f.zero(),this.lambda=1,this.iterations=0}}();exports.ShapeCastOutput=we;var Ve=function(t,e){t.iterations=0,t.lambda=1,t.normal.setZero(),t.point.setZero();var i=e.proxyA,o=e.proxyB,s=ee(i.m_radius,B.polygonRadius),n=s+ee(o.m_radius,B.polygonRadius),r=e.transformA,a=e.transformB,m=e.translationB,h=f.zero(),c=0,_=new fe;_.m_count=0;for(var l=_.m_v,u=i.getSupport(gt.mulTVec2(r.q,f.neg(m))),p=Ct.mulVec2(r,i.getVertex(u)),y=o.getSupport(gt.mulTVec2(a.q,m)),d=Ct.mulVec2(a,o.getVertex(y)),v=f.sub(p,d),x=ee(B.polygonRadius,n-B.polygonRadius),A=.5*B.linearSlop,g=0;g<20&&v.length()-x>A;){t.iterations+=1,u=i.getSupport(gt.mulTVec2(r.q,f.neg(v))),p=Ct.mulVec2(r,i.getVertex(u)),y=o.getSupport(gt.mulTVec2(a.q,v)),d=Ct.mulVec2(a,o.getVertex(y));var b=f.sub(p,d);v.normalize();var w=f.dot(v,b),V=f.dot(v,m);if(w-x>c*V){if(V<=0)return!1;if((c=(w-x)/V)>1)return!1;h.setMul(-1,v),_.m_count=0}var C=l[_.m_count];switch(C.indexA=y,C.wA=f.combine(1,d,c,m),C.indexB=u,C.wB=p,C.w=f.sub(C.wB,C.wA),C.a=1,_.m_count+=1,_.m_count){case 1:break;case 2:_.solve2();break;case 3:_.solve3()}if(3==_.m_count)return!1;v.setVec2(_.getClosestPoint()),++g}if(0==g)return!1;var M=f.zero(),I=f.zero();return _.getWitnessPoints(I,M),v.lengthSquared()>0&&(h.setMul(-1,v),h.normalize()),t.point=f.combine(1,M,s,h),t.normal=h,t.lambda=c,t.iterations=g,!0};exports.ShapeCast=Ve;var Ce,Me=Math.abs,Ie=Math.max,Pe=function(){function t(){this.proxyA=new ue,this.proxyB=new ue,this.sweepA=new Vt,this.sweepB=new Vt}return t.prototype.recycle=function(){this.proxyA.recycle(),this.proxyB.recycle(),this.sweepA.recycle(),this.sweepB.recycle(),this.tMax=-1},t}();exports.TOIInput=Pe,exports.TOIOutputState=Ce,function(t){t[t.e_unset=-1]="e_unset",t[t.e_unknown=0]="e_unknown",t[t.e_failed=1]="e_failed",t[t.e_overlapped=2]="e_overlapped",t[t.e_touching=3]="e_touching",t[t.e_separated=4]="e_separated"}(Ce||(exports.TOIOutputState=Ce={}));var Se=function(){function t(){this.state=Ce.e_unset,this.t=-1}return t.prototype.recycle=function(){this.state=Ce.e_unset,this.t=-1},t}();exports.TOIOutput=Se,Gt.toiTime=0,Gt.toiMaxTime=0,Gt.toiCalls=0,Gt.toiIters=0,Gt.toiMaxIters=0,Gt.toiRootIters=0,Gt.toiMaxRootIters=0;var ze,Te=new he,Fe=new ce,Le=new _e,qe=lt(0,0,0),Ne=lt(0,0,0),ke=k(0,0),De=k(0,0),je=k(0,0),Re=k(0,0),Oe=k(0,0),Ee=k(0,0),Je=k(0,0),Ye=k(0,0),We=function(t,e){var i=te.now();++Gt.toiCalls,t.state=Ce.e_unknown,t.t=e.tMax;var o=e.proxyA,s=e.proxyB,n=e.sweepA,r=e.sweepB;n.normalize(),r.normalize();var a=e.tMax,m=o.m_radius+s.m_radius,h=Ie(B.linearSlop,m-3*B.linearSlop),c=.25*B.linearSlop,_=0,l=B.maxTOIIterations,u=0;for(Le.recycle(),Te.proxyA.setVertices(o.m_vertices,o.m_count,o.m_radius),Te.proxyB.setVertices(s.m_vertices,s.m_count,s.m_radius),Te.useRadii=!1;;){if(n.getTransform(qe,_),r.getTransform(Ne,_),ut(Te.transformA,qe),ut(Te.transformB,Ne),le(Fe,Le,Te),Fe.distance<=0){t.state=Ce.e_overlapped,t.t=0;break}if(Fe.distance<h+c){t.state=Ce.e_touching,t.t=_;break}Ue.initialize(Le,o,n,s,r,_);for(var p=!1,y=a,d=0;;){var f=Ue.findMinSeparation(y);if(f>h+c){t.state=Ce.e_separated,t.t=a,p=!0;break}if(f>h-c){_=y;break}var v=Ue.evaluate(_);if(v<h-c){t.state=Ce.e_failed,t.t=_,p=!0;break}if(v<=h+c){t.state=Ce.e_touching,t.t=_,p=!0;break}for(var x=0,A=_,g=y;;){var b=void 0;b=1&x?A+(h-v)*(g-A)/(f-v):.5*(A+g),++x,++Gt.toiRootIters;var w=Ue.evaluate(b);if(Me(w-h)<c){y=b;break}if(w>h?(A=b,v=w):(g=b,f=w),50===x)break}if(Gt.toiMaxRootIters=Ie(Gt.toiMaxRootIters,x),++d===B.maxPolygonVertices)break}if(++u,++Gt.toiIters,p)break;if(u===l){t.state=Ce.e_failed,t.t=_;break}}Gt.toiMaxIters=Ie(Gt.toiMaxIters,u);var V=te.diff(i);Gt.toiMaxTime=Ie(Gt.toiMaxTime,V),Gt.toiTime+=V,Ue.recycle()};exports.TimeOfImpact=We,function(t){t[t.e_unset=-1]="e_unset",t[t.e_points=1]="e_points",t[t.e_faceA=2]="e_faceA",t[t.e_faceB=3]="e_faceB"}(ze||(ze={}));var He=function(){function t(){this.m_proxyA=null,this.m_proxyB=null,this.m_sweepA=null,this.m_sweepB=null,this.m_type=ze.e_unset,this.m_localPoint=k(0,0),this.m_axis=k(0,0),this.indexA=-1,this.indexB=-1}return t.prototype.recycle=function(){this.m_proxyA=null,this.m_proxyB=null,this.m_sweepA=null,this.m_sweepB=null,this.m_type=ze.e_unset,O(this.m_localPoint),O(this.m_axis),this.indexA=-1,this.indexB=-1},t.prototype.initialize=function(t,e,i,o,s,n){var r=t.count;if(this.m_proxyA=e,this.m_proxyB=o,this.m_sweepA=i,this.m_sweepB=s,this.m_sweepA.getTransform(qe,n),this.m_sweepB.getTransform(Ne,n),1===r){this.m_type=ze.e_points;var a=this.m_proxyA.getVertex(t.indexA[0]),m=this.m_proxyB.getVertex(t.indexB[0]);return pt(De,qe,a),pt(je,Ne,m),H(this.m_axis,je,De),p=$(this.m_axis)}if(t.indexA[0]===t.indexA[1]){this.m_type=ze.e_faceB;var h=o.getVertex(t.indexB[0]),c=o.getVertex(t.indexB[1]);et(this.m_axis,H(ke,c,h),1),tt(this.m_axis),ht(Re,Ne.q,this.m_axis),G(this.m_localPoint,.5,h,.5,c),pt(je,Ne,this.m_localPoint);var _=e.getVertex(t.indexA[0]);return(p=st(Ct.mulVec2(qe,_),Re)-st(je,Re))<0&&(E(this.m_axis),p=-p),p}this.m_type=ze.e_faceA;var l=this.m_proxyA.getVertex(t.indexA[0]),u=this.m_proxyA.getVertex(t.indexA[1]);et(this.m_axis,H(ke,u,l),1),tt(this.m_axis),ht(Re,qe.q,this.m_axis),G(this.m_localPoint,.5,l,.5,u),pt(De,qe,this.m_localPoint);var p,y=this.m_proxyB.getVertex(t.indexB[0]);return pt(je,Ne,y),(p=st(je,Re)-st(De,Re))<0&&(E(this.m_axis),p=-p),p},t.prototype.compute=function(t,e){switch(this.m_sweepA.getTransform(qe,e),this.m_sweepB.getTransform(Ne,e),this.m_type){case ze.e_points:return t&&(ct(Oe,qe.q,this.m_axis),ct(Ee,Ne.q,Z(ke,-1,this.m_axis)),this.indexA=this.m_proxyA.getSupport(Oe),this.indexB=this.m_proxyB.getSupport(Ee)),R(Je,this.m_proxyA.getVertex(this.indexA)),R(Ye,this.m_proxyB.getVertex(this.indexB)),pt(De,qe,Je),pt(je,Ne,Ye),st(je,this.m_axis)-st(De,this.m_axis);case ze.e_faceA:return ht(Re,qe.q,this.m_axis),pt(De,qe,this.m_localPoint),t&&(ct(Ee,Ne.q,Z(ke,-1,Re)),this.indexA=-1,this.indexB=this.m_proxyB.getSupport(Ee)),R(Ye,this.m_proxyB.getVertex(this.indexB)),pt(je,Ne,Ye),st(je,Re)-st(De,Re);case ze.e_faceB:return ht(Re,Ne.q,this.m_axis),pt(je,Ne,this.m_localPoint),t&&(ct(Oe,qe.q,Z(ke,-1,Re)),this.indexB=-1,this.indexA=this.m_proxyA.getSupport(Oe)),R(Je,this.m_proxyA.getVertex(this.indexA)),pt(De,qe,Je),st(De,Re)-st(je,Re);default:return t&&(this.indexA=-1,this.indexB=-1),0}},t.prototype.findMinSeparation=function(t){return this.compute(!0,t)},t.prototype.evaluate=function(t){return this.compute(!1,t)},t}(),Ue=new He;We.Input=Pe,We.Output=Se;var Ze=Math.abs,Ke=Math.sqrt,Xe=Math.min,Ge=function(){function t(){this.dt=0,this.inv_dt=0,this.velocityIterations=0,this.positionIterations=0,this.warmStarting=!1,this.blockSolve=!0,this.inv_dt0=0,this.dtRatio=1}return t.prototype.reset=function(t){this.dt>0&&(this.inv_dt0=this.inv_dt),this.dt=t,this.inv_dt=0==t?0:1/t,this.dtRatio=t*this.inv_dt0},t}(),Qe=new Ge,$e=k(0,0),ti=k(0,0),ei=k(0,0),ii=new Pe,oi=new Se,si=new Vt,ni=new Vt,ri=new Vt,ai=function(){function t(t){this.contact=t,this.normals=[],this.tangents=[]}return t.prototype.recycle=function(){this.normals.length=0,this.tangents.length=0},Object.defineProperty(t.prototype,"normalImpulses",{get:function(){var t=this.contact,e=this.normals;e.length=0;for(var i=0;i<t.v_points.length;++i)e.push(t.v_points[i].normalImpulse);return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tangentImpulses",{get:function(){var t=this.contact,e=this.tangents;e.length=0;for(var i=0;i<t.v_points.length;++i)e.push(t.v_points[i].tangentImpulse);return e},enumerable:!1,configurable:!0}),t}(),mi=function(){function t(t){this.m_world=t,this.m_stack=[],this.m_bodies=[],this.m_contacts=[],this.m_joints=[]}return t.prototype.clear=function(){this.m_stack.length=0,this.m_bodies.length=0,this.m_contacts.length=0,this.m_joints.length=0},t.prototype.addBody=function(t){this.m_bodies.push(t)},t.prototype.addContact=function(t){this.m_contacts.push(t)},t.prototype.addJoint=function(t){this.m_joints.push(t)},t.prototype.solveWorld=function(t){for(var e=this.m_world,i=e.m_bodyList;i;i=i.m_next)i.m_islandFlag=!1;for(var o=e.m_contactList;o;o=o.m_next)o.m_islandFlag=!1;for(var s=e.m_jointList;s;s=s.m_next)s.m_islandFlag=!1;for(var n=this.m_stack,r=e.m_bodyList;r;r=r.m_next)if(!r.m_islandFlag&&0!=r.isAwake()&&0!=r.isActive()&&!r.isStatic()){for(this.clear(),n.push(r),r.m_islandFlag=!0;n.length>0;){i=n.pop();if(this.addBody(i),i.m_awakeFlag=!0,!i.isStatic()){for(var a=i.m_contactList;a;a=a.next){var m=a.contact;if(!m.m_islandFlag&&(0!=m.isEnabled()&&0!=m.isTouching())){var h=m.m_fixtureA.m_isSensor,c=m.m_fixtureB.m_isSensor;if(!h&&!c)this.addContact(m),m.m_islandFlag=!0,(l=a.other).m_islandFlag||(n.push(l),l.m_islandFlag=!0)}}for(var _=i.m_jointList;_;_=_.next){var l;if(1!=_.joint.m_islandFlag)0!=(l=_.other).isActive()&&(this.addJoint(_.joint),_.joint.m_islandFlag=!0,l.m_islandFlag||(n.push(l),l.m_islandFlag=!0))}}}this.solveIsland(t);for(var u=0;u<this.m_bodies.length;++u){(i=this.m_bodies[u]).isStatic()&&(i.m_islandFlag=!1)}}},t.prototype.solveIsland=function(t){for(var e=this.m_world,i=e.m_gravity,o=e.m_allowSleep,s=t.dt,n=0;n<this.m_bodies.length;++n){var r=this.m_bodies[n];R($e,r.m_sweep.c);var a=r.m_sweep.a;R(ti,r.m_linearVelocity);var m=r.m_angularVelocity;R(r.m_sweep.c0,r.m_sweep.c),r.m_sweep.a0=r.m_sweep.a,r.isDynamic()&&(K(ti,s*r.m_gravityScale,i),K(ti,s*r.m_invMass,r.m_force),m+=s*r.m_invI*r.m_torque,Z(ti,1/(1+s*r.m_linearDamping),ti),m*=1/(1+s*r.m_angularDamping)),R(r.c_position.c,$e),r.c_position.a=a,R(r.c_velocity.v,ti),r.c_velocity.w=m}for(n=0;n<this.m_contacts.length;++n){this.m_contacts[n].initConstraint(t)}for(n=0;n<this.m_contacts.length;++n){this.m_contacts[n].initVelocityConstraint(t)}if(t.warmStarting)for(n=0;n<this.m_contacts.length;++n){this.m_contacts[n].warmStartConstraint(t)}for(n=0;n<this.m_joints.length;++n){this.m_joints[n].initVelocityConstraints(t)}for(n=0;n<t.velocityIterations;++n){for(var h=0;h<this.m_joints.length;++h){this.m_joints[h].solveVelocityConstraints(t)}for(h=0;h<this.m_contacts.length;++h){this.m_contacts[h].solveVelocityConstraint(t)}}for(n=0;n<this.m_contacts.length;++n){this.m_contacts[n].storeConstraintImpulses(t)}for(n=0;n<this.m_bodies.length;++n){r=this.m_bodies[n];R($e,r.c_position.c);a=r.c_position.a;R(ti,r.c_velocity.v);m=r.c_velocity.w;Z(ei,s,ti);var c=nt(ei);if(c>B.maxTranslationSquared){var _=B.maxTranslation/Ke(c);U(ti,_)}var l=s*m;if(l*l>B.maxRotationSquared)m*=_=B.maxRotation/Ze(l);K($e,s,ti),a+=s*m,R(r.c_position.c,$e),r.c_position.a=a,R(r.c_velocity.v,ti),r.c_velocity.w=m}var u=!1;for(n=0;n<t.positionIterations;++n){var p=0;for(h=0;h<this.m_contacts.length;++h){var y=this.m_contacts[h].solvePositionConstraint(t);p=Xe(p,y)}var d=p>=-3*B.linearSlop,f=!0;for(h=0;h<this.m_joints.length;++h){var v=this.m_joints[h].solvePositionConstraints(t);f=f&&v}if(d&&f){u=!0;break}}for(n=0;n<this.m_bodies.length;++n){R((r=this.m_bodies[n]).m_sweep.c,r.c_position.c),r.m_sweep.a=r.c_position.a,R(r.m_linearVelocity,r.c_velocity.v),r.m_angularVelocity=r.c_velocity.w,r.synchronizeTransform()}if(this.postSolveIsland(),o){var x=1/0,A=B.linearSleepToleranceSqr,g=B.angularSleepToleranceSqr;for(n=0;n<this.m_bodies.length;++n){(r=this.m_bodies[n]).isStatic()||(0==r.m_autoSleepFlag||r.m_angularVelocity*r.m_angularVelocity>g||nt(r.m_linearVelocity)>A?(r.m_sleepTime=0,x=0):(r.m_sleepTime+=s,x=Xe(x,r.m_sleepTime)))}if(x>=B.timeToSleep&&u)for(n=0;n<this.m_bodies.length;++n){(r=this.m_bodies[n]).setAwake(!1)}}},t.prototype.solveWorldTOI=function(t){var e=this.m_world;if(e.m_stepComplete){for(var i=e.m_bodyList;i;i=i.m_next)i.m_islandFlag=!1,i.m_sweep.alpha0=0;for(var o=e.m_contactList;o;o=o.m_next)o.m_toiFlag=!1,o.m_islandFlag=!1,o.m_toiCount=0,o.m_toi=1}for(;;){for(var s=null,r=1,a=e.m_contactList;a;a=a.m_next)if(0!=a.isEnabled()&&!(a.m_toiCount>B.maxSubSteps)){var m=1;if(a.m_toiFlag)m=a.m_toi;else{var h=a.getFixtureA(),c=a.getFixtureB();if(h.isSensor()||c.isSensor())continue;var _=h.getBody(),l=c.getBody(),u=_.isAwake()&&!_.isStatic(),p=l.isAwake()&&!l.isStatic();if(0==u&&0==p)continue;var y=_.isBullet()||!_.isDynamic(),d=l.isBullet()||!l.isDynamic();if(0==y&&0==d)continue;var f=_.m_sweep.alpha0;_.m_sweep.alpha0<l.m_sweep.alpha0?(f=l.m_sweep.alpha0,_.m_sweep.advance(f)):l.m_sweep.alpha0<_.m_sweep.alpha0&&(f=_.m_sweep.alpha0,l.m_sweep.advance(f));var v=a.getChildIndexA(),x=a.getChildIndexB();_.m_sweep,l.m_sweep,ii.proxyA.set(h.getShape(),v),ii.proxyB.set(c.getShape(),x),ii.sweepA.set(_.m_sweep),ii.sweepB.set(l.m_sweep),ii.tMax=1,We(oi,ii);var A=oi.t;m=oi.state==Ce.e_touching?Xe(f+(1-f)*A,1):1,a.m_toi=m,a.m_toiFlag=!0}m<r&&(s=a,r=m)}if(null==s||1-10*n<r){e.m_stepComplete=!0;break}var g=s.getFixtureA(),b=s.getFixtureB(),w=g.getBody(),V=b.getBody();if(ni.set(w.m_sweep),ri.set(V.m_sweep),w.advance(r),V.advance(r),s.update(e),s.m_toiFlag=!1,++s.m_toiCount,0!=s.isEnabled()&&0!=s.isTouching()){w.setAwake(!0),V.setAwake(!0),this.clear(),this.addBody(w),this.addBody(V),this.addContact(s),w.m_islandFlag=!0,V.m_islandFlag=!0,s.m_islandFlag=!0;for(var C=[w,V],M=0;M<C.length;++M){if((F=C[M]).isDynamic())for(var I=F.m_contactList;I;I=I.next){var P=I.contact;if(!P.m_islandFlag){var S=I.other;if(!S.isDynamic()||F.isBullet()||S.isBullet()){var z=P.m_fixtureA.m_isSensor,T=P.m_fixtureB.m_isSensor;z||T||(si.set(S.m_sweep),0==S.m_islandFlag&&S.advance(r),P.update(e),0!=P.isEnabled()&&0!=P.isTouching()?(P.m_islandFlag=!0,this.addContact(P),S.m_islandFlag||(S.m_islandFlag=!0,S.isStatic()||S.setAwake(!0),this.addBody(S))):(S.m_sweep.set(si),S.synchronizeTransform()))}}}}Qe.reset((1-r)*t.dt),Qe.dtRatio=1,Qe.positionIterations=20,Qe.velocityIterations=t.velocityIterations,Qe.warmStarting=!1,this.solveIslandTOI(Qe,w,V);for(M=0;M<this.m_bodies.length;++M){var F;if((F=this.m_bodies[M]).m_islandFlag=!1,F.isDynamic()){F.synchronizeFixtures();for(I=F.m_contactList;I;I=I.next)I.contact.m_toiFlag=!1,I.contact.m_islandFlag=!1}}if(e.findNewContacts(),e.m_subStepping){e.m_stepComplete=!1;break}}else s.setEnabled(!1),w.m_sweep.set(ni),V.m_sweep.set(ri),w.synchronizeTransform(),V.synchronizeTransform()}},t.prototype.solveIslandTOI=function(t,e,i){for(var o=0;o<this.m_bodies.length;++o){R((m=this.m_bodies[o]).c_position.c,m.m_sweep.c),m.c_position.a=m.m_sweep.a,R(m.c_velocity.v,m.m_linearVelocity),m.c_velocity.w=m.m_angularVelocity}for(o=0;o<this.m_contacts.length;++o){this.m_contacts[o].initConstraint(t)}for(o=0;o<t.positionIterations;++o){for(var s=0,n=0;n<this.m_contacts.length;++n){var r=this.m_contacts[n].solvePositionConstraintTOI(t,e,i);s=Xe(s,r)}if(s>=-1.5*B.linearSlop)break}R(e.m_sweep.c0,e.c_position.c),e.m_sweep.a0=e.c_position.a,R(i.m_sweep.c0,i.c_position.c),i.m_sweep.a0=i.c_position.a;for(o=0;o<this.m_contacts.length;++o){this.m_contacts[o].initVelocityConstraint(t)}for(o=0;o<t.velocityIterations;++o)for(n=0;n<this.m_contacts.length;++n){this.m_contacts[n].solveVelocityConstraint(t)}var a=t.dt;for(o=0;o<this.m_bodies.length;++o){var m=this.m_bodies[o];R($e,m.c_position.c);var h=m.c_position.a;R(ti,m.c_velocity.v);var c=m.c_velocity.w;Z(ei,a,ti);var _=nt(ei);if(_>B.maxTranslationSquared){var l=B.maxTranslation/Ke(_);U(ti,l)}var u=a*c;if(u*u>B.maxRotationSquared)c*=l=B.maxRotation/Ze(u);K($e,a,ti),h+=a*c,R(m.c_position.c,$e),m.c_position.a=h,R(m.c_velocity.v,ti),m.c_velocity.w=c,R(m.m_sweep.c,$e),m.m_sweep.a=h,R(m.m_linearVelocity,ti),m.m_angularVelocity=c,m.synchronizeTransform()}this.postSolveIsland()},t.prototype.postSolveIsland=function(){for(var t=0;t<this.m_contacts.length;++t){var e=this.m_contacts[t];this.m_world.postSolve(e,e.m_impulse)}},t}();mi.TimeStep=Ge;var hi=function(){function t(t,e,i,o){"object"==typeof t&&null!==t?(this.ex=f.clone(t),this.ey=f.clone(e)):"number"==typeof t?(this.ex=f.neo(t,i),this.ey=f.neo(e,o)):(this.ex=f.zero(),this.ey=f.zero())}return t.prototype.toString=function(){return JSON.stringify(this)},t.isValid=function(t){return null!=t&&(f.isValid(t.ex)&&f.isValid(t.ey))},t.assert=function(t){},t.prototype.set=function(t,e,i,o){"number"==typeof t&&"number"==typeof e&&"number"==typeof i&&"number"==typeof o?(this.ex.setNum(t,i),this.ey.setNum(e,o)):"object"==typeof t&&"object"==typeof e?(this.ex.setVec2(t),this.ey.setVec2(e)):"object"==typeof t&&(this.ex.setVec2(t.ex),this.ey.setVec2(t.ey))},t.prototype.setIdentity=function(){this.ex.x=1,this.ey.x=0,this.ex.y=0,this.ey.y=1},t.prototype.setZero=function(){this.ex.x=0,this.ey.x=0,this.ex.y=0,this.ey.y=0},t.prototype.getInverse=function(){var e=this.ex.x,i=this.ey.x,o=this.ex.y,s=this.ey.y,n=e*s-i*o;0!==n&&(n=1/n);var r=new t;return r.ex.x=n*s,r.ey.x=-n*i,r.ex.y=-n*o,r.ey.y=n*e,r},t.prototype.solve=function(t){var e=this.ex.x,i=this.ey.x,o=this.ex.y,s=this.ey.y,n=e*s-i*o;0!==n&&(n=1/n);var r=f.zero();return r.x=n*(s*t.x-i*t.y),r.y=n*(e*t.y-o*t.x),r},t.mul=function(e,i){if(i&&"x"in i&&"y"in i){var o=e.ex.x*i.x+e.ey.x*i.y,s=e.ex.y*i.x+e.ey.y*i.y;return f.neo(o,s)}if(i&&"ex"in i&&"ey"in i)return new t(e.ex.x*i.ex.x+e.ey.x*i.ex.y,e.ex.x*i.ey.x+e.ey.x*i.ey.y,e.ex.y*i.ex.x+e.ey.y*i.ex.y,e.ex.y*i.ey.x+e.ey.y*i.ey.y)},t.mulVec2=function(t,e){var i=t.ex.x*e.x+t.ey.x*e.y,o=t.ex.y*e.x+t.ey.y*e.y;return f.neo(i,o)},t.mulMat22=function(e,i){return new t(e.ex.x*i.ex.x+e.ey.x*i.ex.y,e.ex.x*i.ey.x+e.ey.x*i.ey.y,e.ex.y*i.ex.x+e.ey.y*i.ex.y,e.ex.y*i.ey.x+e.ey.y*i.ey.y)},t.mulT=function(e,i){return i&&"x"in i&&"y"in i?f.neo(f.dot(i,e.ex),f.dot(i,e.ey)):i&&"ex"in i&&"ey"in i?new t(f.neo(f.dot(e.ex,i.ex),f.dot(e.ey,i.ex)),f.neo(f.dot(e.ex,i.ey),f.dot(e.ey,i.ey))):void 0},t.mulTVec2=function(t,e){return f.neo(f.dot(e,t.ex),f.dot(e,t.ey))},t.mulTMat22=function(e,i){return new t(f.neo(f.dot(e.ex,i.ex),f.dot(e.ey,i.ex)),f.neo(f.dot(e.ex,i.ey),f.dot(e.ey,i.ey)))},t.abs=function(e){return new t(f.abs(e.ex),f.abs(e.ey))},t.add=function(e,i){return new t(f.add(e.ex,i.ex),f.add(e.ey,i.ey))},t}();exports.Mat22=hi;var ci,_i,li,ui=Math.sqrt,pi=k(0,0),yi=k(0,0),di=k(0,0),fi=k(0,0),vi=k(0,0),xi=k(0,0),Ai=k(0,0),gi=k(0,0);exports.ManifoldType=ci,function(t){t[t.e_unset=-1]="e_unset",t[t.e_circles=0]="e_circles",t[t.e_faceA=1]="e_faceA",t[t.e_faceB=2]="e_faceB"}(ci||(exports.ManifoldType=ci={})),exports.ContactFeatureType=_i,function(t){t[t.e_unset=-1]="e_unset",t[t.e_vertex=0]="e_vertex",t[t.e_face=1]="e_face"}(_i||(exports.ContactFeatureType=_i={})),exports.PointState=li,function(t){t[t.nullState=0]="nullState",t[t.addState=1]="addState",t[t.persistState=2]="persistState",t[t.removeState=3]="removeState"}(li||(exports.PointState=li={}));var bi=function(){function t(){this.v=k(0,0),this.id=new Vi}return t.prototype.set=function(t){R(this.v,t.v),this.id.set(t.id)},t.prototype.recycle=function(){O(this.v),this.id.recycle()},t}();exports.ClipVertex=bi;var Bi=function(){function t(){this.localNormal=k(0,0),this.localPoint=k(0,0),this.points=[new wi,new wi],this.pointCount=0}return t.prototype.set=function(t){this.type=t.type,R(this.localNormal,t.localNormal),R(this.localPoint,t.localPoint),this.pointCount=t.pointCount,this.points[0].set(t.points[0]),this.points[1].set(t.points[1])},t.prototype.recycle=function(){this.type=ci.e_unset,O(this.localNormal),O(this.localPoint),this.pointCount=0,this.points[0].recycle(),this.points[1].recycle()},t.prototype.getWorldManifold=function(t,e,i,o,s){if(0==this.pointCount)return t;(t=t||new Ci).pointCount=this.pointCount;var r=t.normal,a=t.points,m=t.separations;switch(this.type){case ci.e_circles:j(r,1,0);var h=this.points[0];pt(pi,e,this.localPoint),pt(yi,o,h.localPoint),H(xi,yi,pi);var c=nt(xi);if(c>n*n)Z(r,1/ui(c),xi);G(fi,1,pi,i,r),G(vi,1,yi,-s,r),G(a[0],.5,fi,.5,vi),m[0]=st(H(di,vi,fi),r);break;case ci.e_faceA:ht(r,e.q,this.localNormal),pt(Ai,e,this.localPoint);for(var _=0;_<this.pointCount;++_){h=this.points[_];pt(gi,o,h.localPoint),G(fi,1,gi,i-st(H(di,gi,Ai),r),r),G(vi,1,gi,-s,r),G(a[_],.5,fi,.5,vi),m[_]=st(H(di,vi,fi),r)}break;case ci.e_faceB:ht(r,o.q,this.localNormal),pt(Ai,o,this.localPoint);for(_=0;_<this.pointCount;++_){h=this.points[_];pt(gi,e,h.localPoint),G(vi,1,gi,s-st(H(di,gi,Ai),r),r),G(fi,1,gi,-i,r),G(a[_],.5,fi,.5,vi),m[_]=st(H(di,fi,vi),r)}E(r)}return t},t.clipSegmentToLine=Ii,t.ClipVertex=bi,t.getPointStates=Mi,t.PointState=li,t}();exports.Manifold=Bi;var wi=function(){function t(){this.localPoint=k(0,0),this.normalImpulse=0,this.tangentImpulse=0,this.id=new Vi}return t.prototype.set=function(t){R(this.localPoint,t.localPoint),this.normalImpulse=t.normalImpulse,this.tangentImpulse=t.tangentImpulse,this.id.set(t.id)},t.prototype.recycle=function(){O(this.localPoint),this.normalImpulse=0,this.tangentImpulse=0,this.id.recycle()},t}();exports.ManifoldPoint=wi;var Vi=function(){function t(){this.key=-1,this.indexA=-1,this.indexB=-1,this.typeA=_i.e_unset,this.typeB=_i.e_unset}return t.prototype.setFeatures=function(t,e,i,o){this.indexA=t,this.indexB=i,this.typeA=e,this.typeB=o,this.key=this.indexA+4*this.indexB+16*this.typeA+64*this.typeB},t.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.typeA=t.typeA,this.typeB=t.typeB,this.key=this.indexA+4*this.indexB+16*this.typeA+64*this.typeB},t.prototype.swapFeatures=function(){var t=this.indexA,e=this.indexB,i=this.typeA,o=this.typeB;this.indexA=e,this.indexB=t,this.typeA=o,this.typeB=i,this.key=this.indexA+4*this.indexB+16*this.typeA+64*this.typeB},t.prototype.recycle=function(){this.indexA=0,this.indexB=0,this.typeA=_i.e_unset,this.typeB=_i.e_unset,this.key=-1},t}();exports.ContactID=Vi;var Ci=function(){function t(){this.normal=k(0,0),this.points=[k(0,0),k(0,0)],this.separations=[0,0],this.pointCount=0}return t.prototype.recycle=function(){O(this.normal),O(this.points[0]),O(this.points[1]),this.separations[0]=0,this.separations[1]=0,this.pointCount=0},t}();function Mi(t,e,i,o){for(var s=0;s<i.pointCount;++s){var n=i.points[s].id;t[s]=li.removeState;for(var r=0;r<o.pointCount;++r)if(o.points[r].id.key===n.key){t[s]=li.persistState;break}}for(s=0;s<o.pointCount;++s){n=o.points[s].id;e[s]=li.addState;for(r=0;r<i.pointCount;++r)if(i.points[r].id.key===n.key){e[s]=li.persistState;break}}}function Ii(t,e,i,o,s){var n=0,r=st(i,e[0].v)-o,a=st(i,e[1].v)-o;if(r<=0&&t[n++].set(e[0]),a<=0&&t[n++].set(e[1]),r*a<0){var m=r/(r-a);G(t[n].v,1-m,e[0].v,m,e[1].v),t[n].id.setFeatures(s,_i.e_vertex,e[0].id.indexB,_i.e_face),++n}return n}exports.WorldManifold=Ci;var Pi=Math.sqrt,Si=Math.max,zi=Math.min,Ti=new w({create:function(){return new lo},release:function(t){t.recycle()}}),Fi=new Bi,Li=new Ci,qi=function(){function t(t){this.prev=null,this.next=null,this.other=null,this.contact=t}return t.prototype.recycle=function(){this.prev=null,this.next=null,this.other=null},t}();function Ni(t,e){return Pi(t*e)}function ki(t,e){return t>e?t:e}exports.ContactEdge=qi;var Di=[],ji=function(){function t(){this.rA=k(0,0),this.rB=k(0,0),this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}return t.prototype.recycle=function(){O(this.rA),O(this.rB),this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0},t}();exports.VelocityConstraintPoint=ji;var Ri=k(0,0),Oi=k(0,0),Ei=k(0,0),Ji=k(0,0),Yi=k(0,0),Wi=lt(0,0,0),Hi=lt(0,0,0),Ui=k(0,0),Zi=k(0,0),Ki=k(0,0),Xi=k(0,0),Gi=k(0,0),Qi=k(0,0),$i=k(0,0),to=k(0,0),eo=k(0,0),io=k(0,0),oo=k(0,0),so=k(0,0),no=k(0,0),ro=k(0,0),ao=k(0,0),mo=k(0,0),ho=k(0,0),co=k(0,0),_o=k(0,0),lo=function(){function t(){this.m_nodeA=new qi(this),this.m_nodeB=new qi(this),this.m_fixtureA=null,this.m_fixtureB=null,this.m_indexA=-1,this.m_indexB=-1,this.m_evaluateFcn=null,this.m_manifold=new Bi,this.m_prev=null,this.m_next=null,this.m_toi=1,this.m_toiCount=0,this.m_toiFlag=!1,this.m_friction=0,this.m_restitution=0,this.m_tangentSpeed=0,this.m_enabledFlag=!0,this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_impulse=new ai(this),this.v_points=[new ji,new ji],this.v_normal=k(0,0),this.v_normalMass=new hi,this.v_K=new hi,this.v_pointCount=0,this.v_tangentSpeed=0,this.v_friction=0,this.v_restitution=0,this.v_invMassA=0,this.v_invMassB=0,this.v_invIA=0,this.v_invIB=0,this.p_localPoints=[k(0,0),k(0,0)],this.p_localNormal=k(0,0),this.p_localPoint=k(0,0),this.p_localCenterA=k(0,0),this.p_localCenterB=k(0,0),this.p_type=ci.e_unset,this.p_radiusA=0,this.p_radiusB=0,this.p_pointCount=0,this.p_invMassA=0,this.p_invMassB=0,this.p_invIA=0,this.p_invIB=0}return t.prototype.initialize=function(t,e,i,o,s){this.m_fixtureA=t,this.m_fixtureB=i,this.m_indexA=e,this.m_indexB=o,this.m_evaluateFcn=s,this.m_friction=Ni(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=ki(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},t.prototype.recycle=function(){this.m_nodeA.recycle(),this.m_nodeB.recycle(),this.m_fixtureA=null,this.m_fixtureB=null,this.m_indexA=-1,this.m_indexB=-1,this.m_evaluateFcn=null,this.m_manifold.recycle(),this.m_prev=null,this.m_next=null,this.m_toi=1,this.m_toiCount=0,this.m_toiFlag=!1,this.m_friction=0,this.m_restitution=0,this.m_tangentSpeed=0,this.m_enabledFlag=!0,this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_impulse.recycle();for(var t=0,e=this.v_points;t<e.length;t++){e[t].recycle()}O(this.v_normal),this.v_normalMass.setZero(),this.v_K.setZero(),this.v_pointCount=0,this.v_tangentSpeed=0,this.v_friction=0,this.v_restitution=0,this.v_invMassA=0,this.v_invMassB=0,this.v_invIA=0,this.v_invIB=0;for(var i=0,o=this.p_localPoints;i<o.length;i++){O(o[i])}O(this.p_localNormal),O(this.p_localPoint),O(this.p_localCenterA),O(this.p_localCenterB),this.p_type=ci.e_unset,this.p_radiusA=0,this.p_radiusB=0,this.p_pointCount=0,this.p_invMassA=0,this.p_invMassB=0,this.p_invIA=0,this.p_invIB=0},t.prototype.initConstraint=function(t){var e=this.m_fixtureA,i=this.m_fixtureB;if(null!==e&&null!==i){var o=e.m_body,s=i.m_body;if(null!==o&&null!==s){var n=e.m_shape,r=i.m_shape;if(null!==n&&null!==r){var a=this.m_manifold,m=a.pointCount;this.v_invMassA=o.m_invMass,this.v_invMassB=s.m_invMass,this.v_invIA=o.m_invI,this.v_invIB=s.m_invI,this.v_friction=this.m_friction,this.v_restitution=this.m_restitution,this.v_tangentSpeed=this.m_tangentSpeed,this.v_pointCount=m,this.v_K.setZero(),this.v_normalMass.setZero(),this.p_invMassA=o.m_invMass,this.p_invMassB=s.m_invMass,this.p_invIA=o.m_invI,this.p_invIB=s.m_invI,R(this.p_localCenterA,o.m_sweep.localCenter),R(this.p_localCenterB,s.m_sweep.localCenter),this.p_radiusA=n.m_radius,this.p_radiusB=r.m_radius,this.p_type=a.type,R(this.p_localNormal,a.localNormal),R(this.p_localPoint,a.localPoint),this.p_pointCount=m;for(var h=0;h<B.maxManifoldPoints;++h)this.v_points[h].recycle(),O(this.p_localPoints[h]);for(h=0;h<m;++h){var c=a.points[h],_=this.v_points[h];t.warmStarting&&(_.normalImpulse=t.dtRatio*c.normalImpulse,_.tangentImpulse=t.dtRatio*c.tangentImpulse),R(this.p_localPoints[h],c.localPoint)}}}}},t.prototype.getManifold=function(){return this.m_manifold},t.prototype.getWorldManifold=function(t){var e=this.m_fixtureA,i=this.m_fixtureB;if(null!==e&&null!==i){var o=e.m_body,s=i.m_body;if(null!==o&&null!==s){var n=e.m_shape,r=i.m_shape;if(null!==n&&null!==r)return this.m_manifold.getWorldManifold(t,o.getTransform(),n.m_radius,s.getTransform(),r.m_radius)}}},t.prototype.setEnabled=function(t){this.m_enabledFlag=!!t},t.prototype.isEnabled=function(){return this.m_enabledFlag},t.prototype.isTouching=function(){return this.m_touchingFlag},t.prototype.getNext=function(){return this.m_next},t.prototype.getFixtureA=function(){return this.m_fixtureA},t.prototype.getFixtureB=function(){return this.m_fixtureB},t.prototype.getChildIndexA=function(){return this.m_indexA},t.prototype.getChildIndexB=function(){return this.m_indexB},t.prototype.flagForFiltering=function(){this.m_filterFlag=!0},t.prototype.setFriction=function(t){this.m_friction=t},t.prototype.getFriction=function(){return this.m_friction},t.prototype.resetFriction=function(){var t=this.m_fixtureA,e=this.m_fixtureB;null!==t&&null!==e&&(this.m_friction=Ni(t.m_friction,e.m_friction))},t.prototype.setRestitution=function(t){this.m_restitution=t},t.prototype.getRestitution=function(){return this.m_restitution},t.prototype.resetRestitution=function(){var t=this.m_fixtureA,e=this.m_fixtureB;null!==t&&null!==e&&(this.m_restitution=ki(t.m_restitution,e.m_restitution))},t.prototype.setTangentSpeed=function(t){this.m_tangentSpeed=t},t.prototype.getTangentSpeed=function(){return this.m_tangentSpeed},t.prototype.evaluate=function(t,e,i){var o=this.m_fixtureA,s=this.m_fixtureB;null!==o&&null!==s&&this.m_evaluateFcn(t,e,o,this.m_indexA,i,s,this.m_indexB)},t.prototype.update=function(t){var e=this.m_fixtureA,i=this.m_fixtureB;if(null!==e&&null!==i){var o=e.m_body,s=i.m_body;if(null!==o&&null!==s){var n=e.m_shape,r=i.m_shape;if(null!==n&&null!==r){this.m_enabledFlag=!0;var a=!1,m=this.m_touchingFlag,h=e.m_isSensor,c=i.m_isSensor,_=h||c,l=o.m_xf,u=s.m_xf;if(_)a=be(n,this.m_indexA,r,this.m_indexB,l,u),this.m_manifold.pointCount=0;else{Fi.recycle(),Fi.set(this.m_manifold),this.m_manifold.recycle(),this.evaluate(this.m_manifold,l,u),a=this.m_manifold.pointCount>0;for(var p=0;p<this.m_manifold.pointCount;++p){var y=this.m_manifold.points[p];y.normalImpulse=0,y.tangentImpulse=0;for(var d=0;d<Fi.pointCount;++d){var f=Fi.points[d];if(f.id.key===y.id.key){y.normalImpulse=f.normalImpulse,y.tangentImpulse=f.tangentImpulse;break}}}a!==m&&(o.setAwake(!0),s.setAwake(!0))}this.m_touchingFlag=a;var v="object"==typeof t&&null!==t;!m&&a&&v&&t.beginContact(this),m&&!a&&v&&t.endContact(this),!_&&a&&v&&Fi&&t.preSolve(this,Fi)}}}},t.prototype.solvePositionConstraint=function(t){return this._solvePositionConstraint(t,null,null)},t.prototype.solvePositionConstraintTOI=function(t,e,i){return this._solvePositionConstraint(t,e,i)},t.prototype._solvePositionConstraint=function(t,e,i){var o=null!==e&&null!==i,s=0,n=this.m_fixtureA,r=this.m_fixtureB;if(null===n||null===r)return s;var a=n.m_body,m=r.m_body;if(null===a||null===m)return s;a.c_velocity,m.c_velocity;var h=a.c_position,_=m.c_position,l=this.p_localCenterA,u=this.p_localCenterB,p=0,y=0;o&&a!==e&&a!==i||(p=this.p_invMassA,y=this.p_invIA);var d=0,f=0;o&&m!==e&&m!==i||(d=this.p_invMassB,f=this.p_invIB),R(Ri,h.c);var v=h.a;R(Ei,_.c);for(var x=_.a,A=0;A<this.p_pointCount;++A){zt(Wi,l,Ri,v),zt(Hi,u,Ei,x);var g=void 0;switch(this.p_type){case ci.e_circles:pt(Ui,Wi,this.p_localPoint),pt(Zi,Hi,this.p_localPoints[0]),H(to,Zi,Ui),tt(to),G(eo,.5,Ui,.5,Zi),g=st(Zi,to)-st(Ui,to)-this.p_radiusA-this.p_radiusB;break;case ci.e_faceA:ht(to,Wi.q,this.p_localNormal),pt(Xi,Wi,this.p_localPoint),pt(Ki,Hi,this.p_localPoints[A]),g=st(Ki,to)-st(Xi,to)-this.p_radiusA-this.p_radiusB,R(eo,Ki);break;case ci.e_faceB:ht(to,Hi.q,this.p_localNormal),pt(Xi,Hi,this.p_localPoint),pt(Ki,Wi,this.p_localPoints[A]),g=st(Ki,to)-st(Xi,to)-this.p_radiusA-this.p_radiusB,R(eo,Ki),E(to);break;default:return s}H(Gi,eo,Ri),H(Qi,eo,Ei),s=zi(s,g);var b=c((o?B.toiBaugarte:B.baumgarte)*(g+B.linearSlop),-B.maxLinearCorrection,0),w=ot(Gi,to),V=ot(Qi,to),C=p+d+y*w*w+f*V*V;Z($i,C>0?-b/C:0,to),X(Ri,p,$i),v-=y*ot(Gi,$i),K(Ei,d,$i),x+=f*ot(Qi,$i)}return R(h.c,Ri),h.a=v,R(_.c,Ei),_.a=x,s},t.prototype.initVelocityConstraint=function(t){var e=this.m_fixtureA,i=this.m_fixtureB;if(null!==e&&null!==i){var o=e.m_body,s=i.m_body;if(null!==o&&null!==s){var n=o.c_velocity,r=s.c_velocity,a=o.c_position,m=s.c_position,h=this.p_radiusA,c=this.p_radiusB,_=this.m_manifold,l=this.v_invMassA,u=this.v_invMassB,p=this.v_invIA,y=this.v_invIB,d=this.p_localCenterA,f=this.p_localCenterB;R(Ri,a.c);var v=a.a;R(Oi,n.v);var x=n.w;R(Ei,m.c);var A=m.a;R(Ji,r.v);var g=r.w;zt(Wi,d,Ri,v),zt(Hi,f,Ei,A),Li.recycle(),_.getWorldManifold(Li,Wi,h,Hi,c),R(this.v_normal,Li.normal);for(var b=0;b<this.v_pointCount;++b){var w=this.v_points[b],V=Li.points[b];H(w.rA,V,Ri),H(w.rB,V,Ei);var C=ot(w.rA,this.v_normal),M=ot(w.rB,this.v_normal),I=l+u+p*C*C+y*M*M;w.normalMass=I>0?1/I:0,et(Yi,this.v_normal,1);var P=ot(w.rA,Yi),S=ot(w.rB,Yi),z=l+u+p*P*P+y*S*S;w.tangentMass=z>0?1/z:0,w.velocityBias=0;var T=0;T+=st(this.v_normal,Ji),T+=st(this.v_normal,it(_o,g,w.rB)),T-=st(this.v_normal,Oi),(T-=st(this.v_normal,it(_o,x,w.rA)))<-B.velocityThreshold&&(w.velocityBias=-this.v_restitution*T)}if(2==this.v_pointCount&&t.blockSolve){var F=this.v_points[0],L=this.v_points[1],q=ot(F.rA,this.v_normal),N=ot(F.rB,this.v_normal),k=ot(L.rA,this.v_normal),D=ot(L.rB,this.v_normal),j=l+u+p*q*q+y*N*N,O=l+u+p*k*k+y*D*D,E=l+u+p*q*k+y*N*D;if(j*j<1e3*(j*O-E*E)){this.v_K.ex.setNum(j,E),this.v_K.ey.setNum(E,O);var J=this.v_K.ex.x,Y=this.v_K.ey.x,W=this.v_K.ex.y,U=this.v_K.ey.y,Z=J*U-Y*W;0!==Z&&(Z=1/Z),this.v_normalMass.ex.x=Z*U,this.v_normalMass.ey.x=-Z*Y,this.v_normalMass.ex.y=-Z*W,this.v_normalMass.ey.y=Z*J}else this.v_pointCount=1}R(a.c,Ri),a.a=v,R(n.v,Oi),n.w=x,R(m.c,Ei),m.a=A,R(r.v,Ji),r.w=g}}},t.prototype.warmStartConstraint=function(t){var e=this.m_fixtureA,i=this.m_fixtureB;if(null!==e&&null!==i){var o=e.m_body,s=i.m_body;if(null!==o&&null!==s){var n=o.c_velocity,r=s.c_velocity;o.c_position,s.c_position;var a=this.v_invMassA,m=this.v_invIA,h=this.v_invMassB,c=this.v_invIB;R(Oi,n.v);var _=n.w;R(Ji,r.v);var l=r.w;R(to,this.v_normal),et(Yi,to,1);for(var u=0;u<this.v_pointCount;++u){var p=this.v_points[u];G($i,p.normalImpulse,to,p.tangentImpulse,Yi),_-=m*ot(p.rA,$i),X(Oi,a,$i),l+=c*ot(p.rB,$i),K(Ji,h,$i)}R(n.v,Oi),n.w=_,R(r.v,Ji),r.w=l}}},t.prototype.storeConstraintImpulses=function(t){for(var e=this.m_manifold,i=0;i<this.v_pointCount;++i)e.points[i].normalImpulse=this.v_points[i].normalImpulse,e.points[i].tangentImpulse=this.v_points[i].tangentImpulse},t.prototype.solveVelocityConstraint=function(t){var e=this.m_fixtureA,i=this.m_fixtureB;if(null!==e&&null!==i){var o=e.m_body,s=i.m_body;if(null!==o&&null!==s){var n=o.c_velocity;o.c_position;var r=s.c_velocity;s.c_position;var a=this.v_invMassA,m=this.v_invIA,h=this.v_invMassB,_=this.v_invIB;R(Oi,n.v);var l=n.w;R(Ji,r.v);var u=r.w;R(to,this.v_normal),et(Yi,to,1);for(var p=this.v_friction,y=0;y<this.v_pointCount;++y){var d=this.v_points[y];O(io),J(io,Ji),J(io,it(_o,u,d.rB)),W(io,Oi),W(io,it(_o,l,d.rA));var f=st(io,Yi)-this.v_tangentSpeed,v=d.tangentMass*-f,x=p*d.normalImpulse;v=(g=c(d.tangentImpulse+v,-x,x))-d.tangentImpulse,d.tangentImpulse=g,Z($i,v,Yi),X(Oi,a,$i),l-=m*ot(d.rA,$i),K(Ji,h,$i),u+=_*ot(d.rB,$i)}if(1==this.v_pointCount||0==t.blockSolve)for(var A=0;A<this.v_pointCount;++A){d=this.v_points[A];O(io),J(io,Ji),J(io,it(_o,u,d.rB)),W(io,Oi),W(io,it(_o,l,d.rA));var g,b=st(io,to);v=-d.normalMass*(b-d.velocityBias);v=(g=Si(d.normalImpulse+v,0))-d.normalImpulse,d.normalImpulse=g,Z($i,v,to),X(Oi,a,$i),l-=m*ot(d.rA,$i),K(Ji,h,$i),u+=_*ot(d.rB,$i)}else{var B=this.v_points[0],w=this.v_points[1];j(ro,B.normalImpulse,w.normalImpulse),O(oo),J(oo,Ji),J(oo,it(_o,u,B.rB)),W(oo,Oi),W(oo,it(_o,l,B.rA)),O(so),J(so,Ji),J(so,it(_o,u,w.rB)),W(so,Oi),W(so,it(_o,l,w.rA));var V=st(oo,to),C=st(so,to);for(j(no,V-B.velocityBias,C-w.velocityBias),no.x-=this.v_K.ex.x*ro.x+this.v_K.ey.x*ro.y,no.y-=this.v_K.ex.y*ro.x+this.v_K.ey.y*ro.y;;){if(O(ao),ao.x=-(this.v_normalMass.ex.x*no.x+this.v_normalMass.ey.x*no.y),ao.y=-(this.v_normalMass.ex.y*no.x+this.v_normalMass.ey.y*no.y),ao.x>=0&&ao.y>=0){H(mo,ao,ro),Z(ho,mo.x,to),Z(co,mo.y,to),Q(Oi,-a,ho,-a,co,1,Oi),l-=m*(ot(B.rA,ho)+ot(w.rA,co)),Q(Ji,h,ho,h,co,1,Ji),u+=_*(ot(B.rB,ho)+ot(w.rB,co)),B.normalImpulse=ao.x,w.normalImpulse=ao.y;break}if(ao.x=-B.normalMass*no.x,ao.y=0,V=0,C=this.v_K.ex.y*ao.x+no.y,ao.x>=0&&C>=0){H(mo,ao,ro),Z(ho,mo.x,to),Z(co,mo.y,to),Q(Oi,-a,ho,-a,co,1,Oi),l-=m*(ot(B.rA,ho)+ot(w.rA,co)),Q(Ji,h,ho,h,co,1,Ji),u+=_*(ot(B.rB,ho)+ot(w.rB,co)),B.normalImpulse=ao.x,w.normalImpulse=ao.y;break}if(ao.x=0,ao.y=-w.normalMass*no.y,V=this.v_K.ey.x*ao.y+no.x,C=0,ao.y>=0&&V>=0){H(mo,ao,ro),Z(ho,mo.x,to),Z(co,mo.y,to),Q(Oi,-a,ho,-a,co,1,Oi),l-=m*(ot(B.rA,ho)+ot(w.rA,co)),Q(Ji,h,ho,h,co,1,Ji),u+=_*(ot(B.rB,ho)+ot(w.rB,co)),B.normalImpulse=ao.x,w.normalImpulse=ao.y;break}if(ao.x=0,ao.y=0,V=no.x,C=no.y,V>=0&&C>=0){H(mo,ao,ro),Z(ho,mo.x,to),Z(co,mo.y,to),Q(Oi,-a,ho,-a,co,1,Oi),l-=m*(ot(B.rA,ho)+ot(w.rA,co)),Q(Ji,h,ho,h,co,1,Ji),u+=_*(ot(B.rB,ho)+ot(w.rB,co)),B.normalImpulse=ao.x,w.normalImpulse=ao.y;break}break}}R(n.v,Oi),n.w=l,R(r.v,Ji),r.w=u}}},t.addType=function(t,e,i){Di[t]=Di[t]||{},Di[t][e]=i},t.create=function(t,e,i,o){var s,n=t.m_shape.m_type,r=i.m_shape.m_type,a=Ti.allocate();if(s=Di[n]&&Di[n][r])a.initialize(t,e,i,o,s);else{if(!(s=Di[r]&&Di[r][n]))return null;a.initialize(i,o,t,e,s)}t=a.m_fixtureA,i=a.m_fixtureB,e=a.getChildIndexA(),o=a.getChildIndexB();var m=t.m_body,h=i.m_body;return a.m_nodeA.contact=a,a.m_nodeA.other=h,a.m_nodeA.prev=null,a.m_nodeA.next=m.m_contactList,null!=m.m_contactList&&(m.m_contactList.prev=a.m_nodeA),m.m_contactList=a.m_nodeA,a.m_nodeB.contact=a,a.m_nodeB.other=m,a.m_nodeB.prev=null,a.m_nodeB.next=h.m_contactList,null!=h.m_contactList&&(h.m_contactList.prev=a.m_nodeB),h.m_contactList=a.m_nodeB,0==t.isSensor()&&0==i.isSensor()&&(m.setAwake(!0),h.setAwake(!0)),a},t.destroy=function(t,e){var i=t.m_fixtureA,o=t.m_fixtureB;if(null!==i&&null!==o){var s=i.m_body,n=o.m_body;null!==s&&null!==n&&(t.isTouching()&&e.endContact(t),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==s.m_contactList&&(s.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==n.m_contactList&&(n.m_contactList=t.m_nodeB.next),t.m_manifold.pointCount>0&&!i.m_isSensor&&!o.m_isSensor&&(s.setAwake(!0),n.setAwake(!0)),Ti.release(t))}},t}();exports.Contact=lo;var uo={gravity:f.zero(),allowSleep:!0,warmStarting:!0,continuousPhysics:!0,subStepping:!1,blockSolve:!0,velocityIterations:8,positionIterations:3},po=function(){function t(e){if(!(this instanceof t))return new t(e);this.s_step=new Ge,e?f.isValid(e)&&(e={gravity:e}):e={},e=o(e,uo),this.m_solver=new mi(this),this.m_broadPhase=new F,this.m_contactList=null,this.m_contactCount=0,this.m_bodyList=null,this.m_bodyCount=0,this.m_jointList=null,this.m_jointCount=0,this.m_stepComplete=!0,this.m_allowSleep=e.allowSleep,this.m_gravity=f.clone(e.gravity),this.m_clearForces=!0,this.m_newFixture=!1,this.m_locked=!1,this.m_warmStarting=e.warmStarting,this.m_continuousPhysics=e.continuousPhysics,this.m_subStepping=e.subStepping,this.m_blockSolve=e.blockSolve,this.m_velocityIterations=e.velocityIterations,this.m_positionIterations=e.positionIterations,this.m_t=0}return t.prototype._serialize=function(){for(var t=[],e=[],i=this.getBodyList();i;i=i.getNext())t.push(i);for(var o=this.getJointList();o;o=o.getNext())"function"==typeof o._serialize&&e.push(o);return{gravity:this.m_gravity,bodies:t,joints:e}},t._deserialize=function(e,i,o){if(!e)return new t;var s=new t(e.gravity);if(e.bodies)for(var n=e.bodies.length-1;n>=0;n-=1)s._addBody(o(Zt,e.bodies[n],s));if(e.joints)for(n=e.joints.length-1;n>=0;n--)s.createJoint(o(Xt,e.joints[n],s));return s},t.prototype.getBodyList=function(){return this.m_bodyList},t.prototype.getJointList=function(){return this.m_jointList},t.prototype.getContactList=function(){return this.m_contactList},t.prototype.getBodyCount=function(){return this.m_bodyCount},t.prototype.getJointCount=function(){return this.m_jointCount},t.prototype.getContactCount=function(){return this.m_contactCount},t.prototype.setGravity=function(t){this.m_gravity.set(t)},t.prototype.getGravity=function(){return this.m_gravity},t.prototype.isLocked=function(){return this.m_locked},t.prototype.setAllowSleeping=function(t){if(t!=this.m_allowSleep&&(this.m_allowSleep=t,0==this.m_allowSleep))for(var e=this.m_bodyList;e;e=e.m_next)e.setAwake(!0)},t.prototype.getAllowSleeping=function(){return this.m_allowSleep},t.prototype.setWarmStarting=function(t){this.m_warmStarting=t},t.prototype.getWarmStarting=function(){return this.m_warmStarting},t.prototype.setContinuousPhysics=function(t){this.m_continuousPhysics=t},t.prototype.getContinuousPhysics=function(){return this.m_continuousPhysics},t.prototype.setSubStepping=function(t){this.m_subStepping=t},t.prototype.getSubStepping=function(){return this.m_subStepping},t.prototype.setAutoClearForces=function(t){this.m_clearForces=t},t.prototype.getAutoClearForces=function(){return this.m_clearForces},t.prototype.clearForces=function(){for(var t=this.m_bodyList;t;t=t.getNext())t.m_force.setZero(),t.m_torque=0},t.prototype.queryAABB=function(t,e){var i=this.m_broadPhase;this.m_broadPhase.query(t,function(t){var o=i.getUserData(t);return e(o.fixture)})},t.prototype.rayCast=function(t,e,i){var o=this.m_broadPhase;this.m_broadPhase.rayCast({maxFraction:1,p1:t,p2:e},function(t,e){var s=o.getUserData(e),n=s.fixture,r=s.childIndex,a={};if(n.rayCast(a,t,r)){var m=a.fraction,h=f.add(f.mulNumVec2(1-m,t.p1),f.mulNumVec2(m,t.p2));return i(n,h,a.normal,m)}return t.maxFraction})},t.prototype.getProxyCount=function(){return this.m_broadPhase.getProxyCount()},t.prototype.getTreeHeight=function(){return this.m_broadPhase.getTreeHeight()},t.prototype.getTreeBalance=function(){return this.m_broadPhase.getTreeBalance()},t.prototype.getTreeQuality=function(){return this.m_broadPhase.getTreeQuality()},t.prototype.shiftOrigin=function(t){if(!this.m_locked){for(var e=this.m_bodyList;e;e=e.m_next)e.m_xf.p.sub(t),e.m_sweep.c0.sub(t),e.m_sweep.c.sub(t);for(var i=this.m_jointList;i;i=i.m_next)i.shiftOrigin(t);this.m_broadPhase.shiftOrigin(t)}},t.prototype._addBody=function(t){this.isLocked()||(t.m_prev=null,t.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=t),this.m_bodyList=t,++this.m_bodyCount)},t.prototype.createBody=function(t,e){if(this.isLocked())return null;var i={};t&&(f.isValid(t)?i={position:t,angle:e}:"object"==typeof t&&(i=t));var o=new Zt(this,i);return this._addBody(o),o},t.prototype.createDynamicBody=function(t,e){var i={};return t&&(f.isValid(t)?i={position:t,angle:e}:"object"==typeof t&&(i=t)),i.type="dynamic",this.createBody(i)},t.prototype.createKinematicBody=function(t,e){var i={};return t&&(f.isValid(t)?i={position:t,angle:e}:"object"==typeof t&&(i=t)),i.type="kinematic",this.createBody(i)},t.prototype.destroyBody=function(t){if(!this.isLocked()){if(t.m_destroyed)return!1;for(var e=t.m_jointList;e;){var i=e;e=e.next,this.publish("remove-joint",i.joint),this.destroyJoint(i.joint),t.m_jointList=e}t.m_jointList=null;for(var o=t.m_contactList;o;){var s=o;o=o.next,this.destroyContact(s.contact),t.m_contactList=o}t.m_contactList=null;for(var n=t.m_fixtureList;n;){var r=n;n=n.m_next,this.publish("remove-fixture",r),r.destroyProxies(this.m_broadPhase),t.m_fixtureList=n}return t.m_fixtureList=null,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),t.m_destroyed=!0,--this.m_bodyCount,this.publish("remove-body",t),!0}},t.prototype.createJoint=function(t){if(this.isLocked())return null;if(t.m_prev=null,t.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=t),this.m_jointList=t,++this.m_jointCount,t.m_edgeA.joint=t,t.m_edgeA.other=t.m_bodyB,t.m_edgeA.prev=null,t.m_edgeA.next=t.m_bodyA.m_jointList,t.m_bodyA.m_jointList&&(t.m_bodyA.m_jointList.prev=t.m_edgeA),t.m_bodyA.m_jointList=t.m_edgeA,t.m_edgeB.joint=t,t.m_edgeB.other=t.m_bodyA,t.m_edgeB.prev=null,t.m_edgeB.next=t.m_bodyB.m_jointList,t.m_bodyB.m_jointList&&(t.m_bodyB.m_jointList.prev=t.m_edgeB),t.m_bodyB.m_jointList=t.m_edgeB,0==t.m_collideConnected)for(var e=t.m_bodyB.getContactList();e;e=e.next)e.other==t.m_bodyA&&e.contact.flagForFiltering();return t},t.prototype.destroyJoint=function(t){if(!this.isLocked()){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var e=t.m_bodyA,i=t.m_bodyB;if(e.setAwake(!0),i.setAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==e.m_jointList&&(e.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==i.m_jointList&&(i.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,--this.m_jointCount,0==t.m_collideConnected)for(var o=i.getContactList();o;)o.other==e&&o.contact.flagForFiltering(),o=o.next;this.publish("remove-joint",t)}},t.prototype.step=function(t,e,i){if(this.publish("pre-step",t),(0|e)!==e&&(e=0),e=e||this.m_velocityIterations,i=i||this.m_positionIterations,this.m_newFixture&&(this.findNewContacts(),this.m_newFixture=!1),this.m_locked=!0,this.s_step.reset(t),this.s_step.velocityIterations=e,this.s_step.positionIterations=i,this.s_step.warmStarting=this.m_warmStarting,this.s_step.blockSolve=this.m_blockSolve,this.updateContacts(),this.m_stepComplete&&t>0){this.m_solver.solveWorld(this.s_step);for(var o=this.m_bodyList;o;o=o.getNext())0!=o.m_islandFlag&&(o.isStatic()||o.synchronizeFixtures());this.findNewContacts()}this.m_continuousPhysics&&t>0&&this.m_solver.solveWorldTOI(this.s_step),this.m_clearForces&&this.clearForces(),this.m_locked=!1,this.publish("post-step",t)},t.prototype.findNewContacts=function(){var t=this;this.m_broadPhase.updatePairs(function(e,i){return t.createContact(e,i)})},t.prototype.createContact=function(t,e){var i=t.fixture,o=e.fixture,s=t.childIndex,n=e.childIndex,r=i.getBody(),a=o.getBody();if(r!=a){for(var m=a.getContactList();m;){if(m.other==r){var h=m.contact.getFixtureA(),c=m.contact.getFixtureB(),_=m.contact.getChildIndexA(),l=m.contact.getChildIndexB();if(h==i&&c==o&&_==s&&l==n)return;if(h==o&&c==i&&_==n&&l==s)return}m=m.next}if(0!=a.shouldCollide(r)&&0!=o.shouldCollide(i)){var u=lo.create(i,s,o,n);null!=u&&(u.m_prev=null,null!=this.m_contactList&&(u.m_next=this.m_contactList,this.m_contactList.m_prev=u),this.m_contactList=u,++this.m_contactCount)}}},t.prototype.updateContacts=function(){for(var t,e=this.m_contactList;t=e;){e=t.getNext();var i=t.getFixtureA(),o=t.getFixtureB(),s=t.getChildIndexA(),n=t.getChildIndexB(),r=i.getBody(),a=o.getBody();if(t.m_filterFlag){if(0==a.shouldCollide(r)){this.destroyContact(t);continue}if(0==o.shouldCollide(i)){this.destroyContact(t);continue}t.m_filterFlag=!1}var m=r.isAwake()&&!r.isStatic(),h=a.isAwake()&&!a.isStatic();if(0!=m||0!=h){var c=i.m_proxies[s].proxyId,_=o.m_proxies[n].proxyId;0!=this.m_broadPhase.testOverlap(c,_)?t.update(this):this.destroyContact(t)}}},t.prototype.destroyContact=function(t){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_contactList&&(this.m_contactList=t.m_next),lo.destroy(t,this),--this.m_contactCount},t.prototype.on=function(t,e){return"string"!=typeof t||"function"!=typeof e?this:(this._listeners||(this._listeners={}),this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this)},t.prototype.off=function(t,e){if("string"!=typeof t||"function"!=typeof e)return this;var i=this._listeners&&this._listeners[t];if(!i||!i.length)return this;var o=i.indexOf(e);return o>=0&&i.splice(o,1),this},t.prototype.publish=function(t,e,i,o){var s=this._listeners&&this._listeners[t];if(!s||!s.length)return 0;for(var n=0;n<s.length;n++)s[n].call(this,e,i,o);return s.length},t.prototype.beginContact=function(t){this.publish("begin-contact",t)},t.prototype.endContact=function(t){this.publish("end-contact",t)},t.prototype.preSolve=function(t,e){this.publish("pre-solve",t,e)},t.prototype.postSolve=function(t,e){this.publish("post-solve",t,e)},t}();exports.World=po;var yo=function(){function t(e,i,o){if(!(this instanceof t))return new t(e,i,o);void 0===e?(this.x=0,this.y=0,this.z=0):"object"==typeof e?(this.x=e.x,this.y=e.y,this.z=e.z):(this.x=e,this.y=i,this.z=o)}return t.prototype._serialize=function(){return{x:this.x,y:this.y,z:this.z}},t._deserialize=function(e){var i=Object.create(t.prototype);return i.x=e.x,i.y=e.y,i.z=e.z,i},t.neo=function(e,i,o){var s=Object.create(t.prototype);return s.x=e,s.y=i,s.z=o,s},t.zero=function(){var e=Object.create(t.prototype);return e.x=0,e.y=0,e.z=0,e},t.clone=function(e){return t.neo(e.x,e.y,e.z)},t.prototype.toString=function(){return JSON.stringify(this)},t.isValid=function(t){return null!=t&&(Number.isFinite(t.x)&&Number.isFinite(t.y)&&Number.isFinite(t.z))},t.assert=function(t){},t.prototype.setZero=function(){return this.x=0,this.y=0,this.z=0,this},t.prototype.set=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},t.prototype.mul=function(t){return this.x*=t,this.y*=t,this.z*=t,this},t.areEqual=function(t,e){return t===e||"object"==typeof t&&null!==t&&"object"==typeof e&&null!==e&&t.x===e.x&&t.y===e.y&&t.z===e.z},t.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},t.cross=function(e,i){return new t(e.y*i.z-e.z*i.y,e.z*i.x-e.x*i.z,e.x*i.y-e.y*i.x)},t.add=function(e,i){return new t(e.x+i.x,e.y+i.y,e.z+i.z)},t.sub=function(e,i){return new t(e.x-i.x,e.y-i.y,e.z-i.z)},t.mul=function(e,i){return new t(i*e.x,i*e.y,i*e.z)},t.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},t.neg=function(e){return new t(-e.x,-e.y,-e.z)},t}();exports.Vec3=yo;var fo=k(0,0),vo=k(0,0),xo=function(t){function i(e,o){var s=this;return s instanceof i?((s=t.call(this)||this).m_type=i.TYPE,s.m_radius=B.polygonRadius,s.m_vertex1=e?f.clone(e):f.zero(),s.m_vertex2=o?f.clone(o):f.zero(),s.m_vertex0=f.zero(),s.m_vertex3=f.zero(),s.m_hasVertex0=!1,s.m_hasVertex3=!1,s):new i(e,o)}return e(i,t),i.prototype._serialize=function(){return{type:this.m_type,vertex1:this.m_vertex1,vertex2:this.m_vertex2,vertex0:this.m_vertex0,vertex3:this.m_vertex3,hasVertex0:this.m_hasVertex0,hasVertex3:this.m_hasVertex3}},i._deserialize=function(t){var e=new i(t.vertex1,t.vertex2);return e.m_hasVertex0&&e.setPrevVertex(t.vertex0),e.m_hasVertex3&&e.setNextVertex(t.vertex3),e},i.prototype._reset=function(){},i.prototype.getRadius=function(){return this.m_radius},i.prototype.getType=function(){return this.m_type},i.prototype.setNext=function(t){return this.setNextVertex(t)},i.prototype.setNextVertex=function(t){return t?(this.m_vertex3.setVec2(t),this.m_hasVertex3=!0):(this.m_vertex3.setZero(),this.m_hasVertex3=!1),this},i.prototype.getNextVertex=function(){return this.m_vertex3},i.prototype.setPrev=function(t){return this.setPrevVertex(t)},i.prototype.setPrevVertex=function(t){return t?(this.m_vertex0.setVec2(t),this.m_hasVertex0=!0):(this.m_vertex0.setZero(),this.m_hasVertex0=!1),this},i.prototype.getPrevVertex=function(){return this.m_vertex0},i.prototype._set=function(t,e){return this.m_vertex1.setVec2(t),this.m_vertex2.setVec2(e),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this},i.prototype._clone=function(){var t=new i;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_vertex1.setVec2(this.m_vertex1),t.m_vertex2.setVec2(this.m_vertex2),t.m_vertex0.setVec2(this.m_vertex0),t.m_vertex3.setVec2(this.m_vertex3),t.m_hasVertex0=this.m_hasVertex0,t.m_hasVertex3=this.m_hasVertex3,t},i.prototype.getChildCount=function(){return 1},i.prototype.testPoint=function(t,e){return!1},i.prototype.rayCast=function(t,e,i,o){var s=gt.mulTVec2(i.q,f.sub(e.p1,i.p)),n=gt.mulTVec2(i.q,f.sub(e.p2,i.p)),r=f.sub(n,s),a=this.m_vertex1,m=this.m_vertex2,h=f.sub(m,a),c=f.neo(h.y,-h.x);c.normalize();var _=f.dot(c,f.sub(a,s)),l=f.dot(c,r);if(0==l)return!1;var u=_/l;if(u<0||e.maxFraction<u)return!1;var p=f.add(s,f.mulNumVec2(u,r)),y=f.sub(m,a),d=f.dot(y,y);if(0==d)return!1;var v=f.dot(f.sub(p,a),y)/d;return!(v<0||1<v)&&(t.fraction=u,t.normal=_>0?gt.mulVec2(i.q,c).neg():gt.mulVec2(i.q,c),!0)},i.prototype.computeAABB=function(t,e,i){pt(fo,e,this.m_vertex1),pt(vo,e,this.m_vertex2),A.combinePoints(t,fo,vo),A.extend(t,this.m_radius)},i.prototype.computeMass=function(t,e){t.mass=0,G(t.center,.5,this.m_vertex1,.5,this.m_vertex2),t.I=0},i.prototype.computeDistanceProxy=function(t){t.m_vertices[0]=this.m_vertex1,t.m_vertices[1]=this.m_vertex2,t.m_vertices.length=2,t.m_count=2,t.m_radius=this.m_radius},i.TYPE="edge",i}(Tt);exports.EdgeShape=xo;var Ao=xo;exports.Edge=Ao;var go=k(0,0),bo=k(0,0),Bo=function(t){function i(e,o){var s=this;return s instanceof i?((s=t.call(this)||this).m_type=i.TYPE,s.m_radius=B.polygonRadius,s.m_vertices=[],s.m_count=0,s.m_prevVertex=null,s.m_nextVertex=null,s.m_hasPrevVertex=!1,s.m_hasNextVertex=!1,s.m_isLoop=!!o,e&&e.length&&(o?s._createLoop(e):s._createChain(e)),s):new i(e,o)}return e(i,t),i.prototype._serialize=function(){var t={type:this.m_type,vertices:this.m_vertices,isLoop:this.m_isLoop,hasPrevVertex:this.m_hasPrevVertex,hasNextVertex:this.m_hasNextVertex,prevVertex:null,nextVertex:null};return this.m_prevVertex&&(t.prevVertex=this.m_prevVertex),this.m_nextVertex&&(t.nextVertex=this.m_nextVertex),t},i._deserialize=function(t,e,o){var s=[];if(t.vertices)for(var n=0;n<t.vertices.length;n++)s.push(o(f,t.vertices[n]));var r=new i(s,t.isLoop);return t.prevVertex&&r.setPrevVertex(t.prevVertex),t.nextVertex&&r.setNextVertex(t.nextVertex),r},i.prototype.getType=function(){return this.m_type},i.prototype.getRadius=function(){return this.m_radius},i.prototype._createLoop=function(t){if(!(t.length<3)){for(var e=1;e<t.length;++e)t[e-1],t[e];this.m_vertices=[],this.m_count=t.length+1;for(e=0;e<t.length;++e)this.m_vertices[e]=f.clone(t[e]);return this.m_vertices[t.length]=f.clone(t[0]),this.m_prevVertex=this.m_vertices[this.m_count-2],this.m_nextVertex=this.m_vertices[1],this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this}},i.prototype._createChain=function(t){for(var e=1;e<t.length;++e)t[e-1],t[e];this.m_count=t.length;for(e=0;e<t.length;++e)this.m_vertices[e]=f.clone(t[e]);return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex=null,this.m_nextVertex=null,this},i.prototype._reset=function(){this.m_isLoop?this._createLoop(this.m_vertices):this._createChain(this.m_vertices)},i.prototype.setPrevVertex=function(t){this.m_prevVertex=t,this.m_hasPrevVertex=!0},i.prototype.getPrevVertex=function(){return this.m_prevVertex},i.prototype.setNextVertex=function(t){this.m_nextVertex=t,this.m_hasNextVertex=!0},i.prototype.getNextVertex=function(){return this.m_nextVertex},i.prototype._clone=function(){var t=new i;return t._createChain(this.m_vertices),t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_prevVertex=this.m_prevVertex,t.m_nextVertex=this.m_nextVertex,t.m_hasPrevVertex=this.m_hasPrevVertex,t.m_hasNextVertex=this.m_hasNextVertex,t},i.prototype.getChildCount=function(){return this.m_count-1},i.prototype.getChildEdge=function(t,e){t.m_type=xo.TYPE,t.m_radius=this.m_radius,t.m_vertex1=this.m_vertices[e],t.m_vertex2=this.m_vertices[e+1],e>0?(t.m_vertex0=this.m_vertices[e-1],t.m_hasVertex0=!0):(t.m_vertex0=this.m_prevVertex,t.m_hasVertex0=this.m_hasPrevVertex),e<this.m_count-2?(t.m_vertex3=this.m_vertices[e+2],t.m_hasVertex3=!0):(t.m_vertex3=this.m_nextVertex,t.m_hasVertex3=this.m_hasNextVertex)},i.prototype.getVertex=function(t){return t<this.m_count?this.m_vertices[t]:this.m_vertices[0]},i.prototype.isLoop=function(){return this.m_isLoop},i.prototype.testPoint=function(t,e){return!1},i.prototype.rayCast=function(t,e,i,o){return new xo(this.getVertex(o),this.getVertex(o+1)).rayCast(t,e,i,0)},i.prototype.computeAABB=function(t,e,i){pt(go,e,this.getVertex(i)),pt(bo,e,this.getVertex(i+1)),A.combinePoints(t,go,bo)},i.prototype.computeMass=function(t,e){t.mass=0,O(t.center),t.I=0},i.prototype.computeDistanceProxy=function(t,e){t.m_vertices[0]=this.getVertex(e),t.m_vertices[1]=this.getVertex(e+1),t.m_count=2,t.m_radius=this.m_radius},i.TYPE="chain",i}(Tt);exports.ChainShape=Bo;var wo=Bo;exports.Chain=wo;var Vo=Math.max,Co=Math.min,Mo=k(0,0),Io=k(0,0),Po=k(0,0),So=k(0,0),zo=k(0,0),To=k(0,0),Fo=function(t){function i(e){var o=this;return o instanceof i?((o=t.call(this)||this).m_type=i.TYPE,o.m_radius=B.polygonRadius,o.m_centroid=f.zero(),o.m_vertices=[],o.m_normals=[],o.m_count=0,e&&e.length&&o._set(e),o):new i(e)}return e(i,t),i.prototype._serialize=function(){return{type:this.m_type,vertices:this.m_vertices}},i._deserialize=function(t,e,o){var s=[];if(t.vertices)for(var n=0;n<t.vertices.length;n++)s.push(o(f,t.vertices[n]));return new i(s)},i.prototype.getType=function(){return this.m_type},i.prototype.getRadius=function(){return this.m_radius},i.prototype._clone=function(){var t=new i;t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_count=this.m_count,t.m_centroid.setVec2(this.m_centroid);for(var e=0;e<this.m_count;e++)t.m_vertices.push(this.m_vertices[e].clone());for(e=0;e<this.m_normals.length;e++)t.m_normals.push(this.m_normals[e].clone());return t},i.prototype.getChildCount=function(){return 1},i.prototype._reset=function(){this._set(this.m_vertices)},i.prototype._set=function(t){if(t.length<3)this._setAsBox(1,1);else{for(var e=Co(t.length,B.maxPolygonVertices),i=[],o=0;o<e;++o){for(var s=t[o],n=!0,r=0;r<i.length;++r)if(f.distanceSquared(s,i[r])<.25*B.linearSlopSquared){n=!1;break}n&&i.push(f.clone(s))}if((e=i.length)<3)this._setAsBox(1,1);else{var a=0,m=i[0].x;for(o=1;o<e;++o){var h=i[o].x;(h>m||h===m&&i[o].y<i[a].y)&&(a=o,m=h)}for(var c=[],_=0,l=a;;){c[_]=l;var u=0;for(r=1;r<e;++r)if(u!==l){var p=f.sub(i[u],i[c[_]]),y=(s=f.sub(i[r],i[c[_]]),f.crossVec2Vec2(p,s));y<0&&(u=r),0===y&&s.lengthSquared()>p.lengthSquared()&&(u=r)}else u=r;if(++_,l=u,u===a)break}if(_<3)this._setAsBox(1,1);else{this.m_count=_,this.m_vertices=[];for(o=0;o<_;++o)this.m_vertices[o]=i[c[o]];for(o=0;o<_;++o){var d=o,v=o+1<_?o+1:0,x=f.sub(this.m_vertices[v],this.m_vertices[d]);this.m_normals[o]=f.crossVec2Num(x,1),this.m_normals[o].normalize()}this.m_centroid=Lo(this.m_vertices,_)}}}},i.prototype._setAsBox=function(t,e,i,o){if(this.m_vertices[0]=f.neo(t,-e),this.m_vertices[1]=f.neo(t,e),this.m_vertices[2]=f.neo(-t,e),this.m_vertices[3]=f.neo(-t,-e),this.m_normals[0]=f.neo(1,0),this.m_normals[1]=f.neo(0,1),this.m_normals[2]=f.neo(-1,0),this.m_normals[3]=f.neo(0,-1),this.m_count=4,i&&f.isValid(i)){o=o||0,R(this.m_centroid,i);var s=Ct.identity();s.p.setVec2(i),s.q.setAngle(o);for(var n=0;n<this.m_count;++n)this.m_vertices[n]=Ct.mulVec2(s,this.m_vertices[n]),this.m_normals[n]=gt.mulVec2(s.q,this.m_normals[n])}},i.prototype.testPoint=function(t,e){for(var i=yt(Mo,t,e),o=0;o<this.m_count;++o){if(st(this.m_normals[o],i)-st(this.m_normals[o],this.m_vertices[o])>0)return!1}return!0},i.prototype.rayCast=function(t,e,i,o){for(var s=gt.mulTVec2(i.q,f.sub(e.p1,i.p)),n=gt.mulTVec2(i.q,f.sub(e.p2,i.p)),r=f.sub(n,s),a=0,m=e.maxFraction,h=-1,c=0;c<this.m_count;++c){var _=f.dot(this.m_normals[c],f.sub(this.m_vertices[c],s)),l=f.dot(this.m_normals[c],r);if(0==l){if(_<0)return!1}else l<0&&_<a*l?(a=_/l,h=c):l>0&&_<m*l&&(m=_/l);if(m<a)return!1}return h>=0&&(t.fraction=a,t.normal=gt.mulVec2(i.q,this.m_normals[h]),!0)},i.prototype.computeAABB=function(t,e,i){for(var o=1/0,s=1/0,n=-1/0,r=-1/0,a=0;a<this.m_count;++a){var m=pt(Mo,e,this.m_vertices[a]);o=Co(o,m.x),n=Vo(n,m.x),s=Co(s,m.y),r=Vo(r,m.y)}j(t.lowerBound,o-this.m_radius,s-this.m_radius),j(t.upperBound,n+this.m_radius,r+this.m_radius)},i.prototype.computeMass=function(t,e){O(zo);var i=0,o=0;O(To);for(var s=0;s<this.m_count;++s)J(To,this.m_vertices[s]);Z(To,1/this.m_count,To);for(s=0;s<this.m_count;++s){H(Po,this.m_vertices[s],To),s+1<this.m_count?H(So,this.m_vertices[s+1],To):H(So,this.m_vertices[0],To);var n=ot(Po,So),r=.5*n;i+=r,G(Mo,r*(1/3),Po,r*(1/3),So),J(zo,Mo);var a=Po.x,m=Po.y,h=So.x,c=So.y;o+=1/3*.25*n*(a*a+h*a+h*h+(m*m+c*m+c*c))}t.mass=e*i,Z(zo,1/i,zo),Y(t.center,zo,To),t.I=e*o,t.I+=t.mass*(st(t.center,t.center)-st(zo,zo))},i.prototype.validate=function(){for(var t=0;t<this.m_count;++t){var e=t,i=t<this.m_count-1?e+1:0,o=this.m_vertices[e];H(Io,this.m_vertices[i],o);for(var s=0;s<this.m_count;++s){if(s!=e&&s!=i)if(ot(Io,H(Mo,this.m_vertices[s],o))<0)return!1}}return!0},i.prototype.computeDistanceProxy=function(t){for(var e=0;e<this.m_count;++e)t.m_vertices[e]=this.m_vertices[e];t.m_vertices.length=this.m_count,t.m_count=this.m_count,t.m_radius=this.m_radius},i.TYPE="polygon",i}(Tt);function Lo(t,e){for(var i=f.zero(),o=0,s=f.zero(),n=0;n<e;++n){var r=s,a=t[n],m=n+1<e?t[n+1]:t[0],h=f.sub(a,r),c=f.sub(m,r),_=.5*f.crossVec2Vec2(h,c);o+=_,Q(Mo,1,r,1,a,1,m),K(i,_*(1/3),Mo)}return i.mul(1/o),i}exports.PolygonShape=Fo;var qo=Fo;exports.Polygon=qo;var No=function(t){function i(e,o,s,n){var r=this;return r instanceof i?((r=t.call(this)||this)._setAsBox(e,o,s,n),r):new i(e,o,s,n)}return e(i,t),i.TYPE="polygon",i}(Fo);exports.BoxShape=No;var ko=No;exports.Box=ko;var Do=Math.sqrt,jo=Math.PI,Ro=k(0,0),Oo=function(t){function i(e,o){var s=this;return s instanceof i?((s=t.call(this)||this).m_type=i.TYPE,s.m_p=f.zero(),s.m_radius=1,"object"==typeof e&&f.isValid(e)?(s.m_p.setVec2(e),"number"==typeof o&&(s.m_radius=o)):"number"==typeof e&&(s.m_radius=e),s):new i(e,o)}return e(i,t),i.prototype._serialize=function(){return{type:this.m_type,p:this.m_p,radius:this.m_radius}},i._deserialize=function(t){return new i(t.p,t.radius)},i.prototype._reset=function(){},i.prototype.getType=function(){return this.m_type},i.prototype.getRadius=function(){return this.m_radius},i.prototype.getCenter=function(){return this.m_p},i.prototype._clone=function(){var t=new i;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_p=this.m_p.clone(),t},i.prototype.getChildCount=function(){return 1},i.prototype.testPoint=function(t,e){return at(e,pt(Ro,t,this.m_p))<=this.m_radius*this.m_radius},i.prototype.rayCast=function(t,e,i,o){var s=f.add(i.p,gt.mulVec2(i.q,this.m_p)),r=f.sub(e.p1,s),a=f.dot(r,r)-this.m_radius*this.m_radius,m=f.sub(e.p2,e.p1),h=f.dot(r,m),c=f.dot(m,m),_=h*h-c*a;if(_<0||c<n)return!1;var l=-(h+Do(_));return 0<=l&&l<=e.maxFraction*c&&(l/=c,t.fraction=l,t.normal=f.add(r,f.mulNumVec2(l,m)),t.normal.normalize(),!0)},i.prototype.computeAABB=function(t,e,i){var o=pt(Ro,e,this.m_p);j(t.lowerBound,o.x-this.m_radius,o.y-this.m_radius),j(t.upperBound,o.x+this.m_radius,o.y+this.m_radius)},i.prototype.computeMass=function(t,e){t.mass=e*jo*this.m_radius*this.m_radius,R(t.center,this.m_p),t.I=t.mass*(.5*this.m_radius*this.m_radius+nt(this.m_p))},i.prototype.computeDistanceProxy=function(t){t.m_vertices[0]=this.m_p,t.m_vertices.length=1,t.m_count=1,t.m_radius=this.m_radius},i.TYPE="circle",i}(Tt);exports.CircleShape=Oo;var Eo=Oo;exports.Circle=Eo;var Jo=Math.abs,Yo=Math.PI,Wo={frequencyHz:0,dampingRatio:0},Ho=function(t){function s(e,i,n,r,a){var m=this;if(!(m instanceof s))return new s(e,i,n,r,a);if(n&&r&&"m_type"in r&&"x"in n&&"y"in n){var h=n;n=r,r=h}return e=o(e,Wo),i=(m=t.call(this,e,i,n)||this).m_bodyA,n=m.m_bodyB,m.m_type=s.TYPE,m.m_localAnchorA=f.clone(r?i.getLocalPoint(r):e.localAnchorA||f.zero()),m.m_localAnchorB=f.clone(a?n.getLocalPoint(a):e.localAnchorB||f.zero()),m.m_length=Number.isFinite(e.length)?e.length:f.distance(i.getWorldPoint(m.m_localAnchorA),n.getWorldPoint(m.m_localAnchorB)),m.m_frequencyHz=e.frequencyHz,m.m_dampingRatio=e.dampingRatio,m.m_impulse=0,m.m_gamma=0,m.m_bias=0,m}return e(s,t),s.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,length:this.m_length,impulse:this.m_impulse,gamma:this.m_gamma,bias:this.m_bias}},s._deserialize=function(t,e,o){return(t=i({},t)).bodyA=o(Zt,t.bodyA,e),t.bodyB=o(Zt,t.bodyB,e),new s(t)},s.prototype._reset=function(t){t.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.setVec2(t.localAnchorA),t.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.setVec2(t.localAnchorB),t.length>0?this.m_length=+t.length:t.length<0||(t.anchorA||t.anchorA||t.anchorA||t.anchorA)&&(this.m_length=f.distance(this.m_bodyA.getWorldPoint(this.m_localAnchorA),this.m_bodyB.getWorldPoint(this.m_localAnchorB))),Number.isFinite(t.frequencyHz)&&(this.m_frequencyHz=t.frequencyHz),Number.isFinite(t.dampingRatio)&&(this.m_dampingRatio=t.dampingRatio)},s.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},s.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},s.prototype.setLength=function(t){this.m_length=t},s.prototype.getLength=function(){return this.m_length},s.prototype.setFrequency=function(t){this.m_frequencyHz=t},s.prototype.getFrequency=function(){return this.m_frequencyHz},s.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},s.prototype.getDampingRatio=function(){return this.m_dampingRatio},s.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},s.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},s.prototype.getReactionForce=function(t){return f.mulNumVec2(this.m_impulse,this.m_u).mul(t)},s.prototype.getReactionTorque=function(t){return 0},s.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,o=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,m=this.m_bodyB.c_velocity.w,h=gt.neo(i),c=gt.neo(r);this.m_rA=gt.mulVec2(h,f.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=gt.mulVec2(c,f.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_u=f.sub(f.add(n,this.m_rB),f.add(e,this.m_rA));var _=this.m_u.length();_>B.linearSlop?this.m_u.mul(1/_):this.m_u.setNum(0,0);var l=f.crossVec2Vec2(this.m_rA,this.m_u),u=f.crossVec2Vec2(this.m_rB,this.m_u),p=this.m_invMassA+this.m_invIA*l*l+this.m_invMassB+this.m_invIB*u*u;if(this.m_mass=0!=p?1/p:0,this.m_frequencyHz>0){var y=_-this.m_length,d=2*Yo*this.m_frequencyHz,v=2*this.m_mass*this.m_dampingRatio*d,x=this.m_mass*d*d,A=t.dt;this.m_gamma=A*(v+A*x),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=y*A*x*this.m_gamma,p+=this.m_gamma,this.m_mass=0!=p?1/p:0}else this.m_gamma=0,this.m_bias=0;if(t.warmStarting){this.m_impulse*=t.dtRatio;var g=f.mulNumVec2(this.m_impulse,this.m_u);o.subMul(this.m_invMassA,g),s-=this.m_invIA*f.crossVec2Vec2(this.m_rA,g),a.addMul(this.m_invMassB,g),m+=this.m_invIB*f.crossVec2Vec2(this.m_rB,g)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.setVec2(o),this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v.setVec2(a),this.m_bodyB.c_velocity.w=m},s.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,n=f.add(e,f.crossNumVec2(i,this.m_rA)),r=f.add(o,f.crossNumVec2(s,this.m_rB)),a=f.dot(this.m_u,r)-f.dot(this.m_u,n),m=-this.m_mass*(a+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=m;var h=f.mulNumVec2(m,this.m_u);e.subMul(this.m_invMassA,h),i-=this.m_invIA*f.crossVec2Vec2(this.m_rA,h),o.addMul(this.m_invMassB,h),s+=this.m_invIB*f.crossVec2Vec2(this.m_rB,h),this.m_bodyA.c_velocity.v.setVec2(e),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.setVec2(o),this.m_bodyB.c_velocity.w=s},s.prototype.solvePositionConstraints=function(t){if(this.m_frequencyHz>0)return!0;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,n=gt.neo(i),r=gt.neo(s),a=gt.mulSub(n,this.m_localAnchorA,this.m_localCenterA),m=gt.mulSub(r,this.m_localAnchorB,this.m_localCenterB),h=f.sub(f.add(o,m),f.add(e,a)),_=c(h.normalize()-this.m_length,-B.maxLinearCorrection,B.maxLinearCorrection),l=-this.m_mass*_,u=f.mulNumVec2(l,h);return e.subMul(this.m_invMassA,u),i-=this.m_invIA*f.crossVec2Vec2(a,u),o.addMul(this.m_invMassB,u),s+=this.m_invIB*f.crossVec2Vec2(m,u),this.m_bodyA.c_position.c.setVec2(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.setVec2(o),this.m_bodyB.c_position.a=s,Jo(_)<B.linearSlop},s.TYPE="distance-joint",s}(Xt);exports.DistanceJoint=Ho;var Uo={maxForce:0,maxTorque:0},Zo=function(t){function s(e,i,n,r){var a=this;return a instanceof s?(e=o(e,Uo),i=(a=t.call(this,e,i,n)||this).m_bodyA,n=a.m_bodyB,a.m_type=s.TYPE,a.m_localAnchorA=f.clone(r?i.getLocalPoint(r):e.localAnchorA||f.zero()),a.m_localAnchorB=f.clone(r?n.getLocalPoint(r):e.localAnchorB||f.zero()),a.m_linearImpulse=f.zero(),a.m_angularImpulse=0,a.m_maxForce=e.maxForce,a.m_maxTorque=e.maxTorque,a):new s(e,i,n,r)}return e(s,t),s.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,maxForce:this.m_maxForce,maxTorque:this.m_maxTorque,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB}},s._deserialize=function(t,e,o){return(t=i({},t)).bodyA=o(Zt,t.bodyA,e),t.bodyB=o(Zt,t.bodyB,e),new s(t)},s.prototype._reset=function(t){t.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.setVec2(t.localAnchorA),t.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.setVec2(t.localAnchorB),Number.isFinite(t.maxForce)&&(this.m_maxForce=t.maxForce),Number.isFinite(t.maxTorque)&&(this.m_maxTorque=t.maxTorque)},s.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},s.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},s.prototype.setMaxForce=function(t){this.m_maxForce=t},s.prototype.getMaxForce=function(){return this.m_maxForce},s.prototype.setMaxTorque=function(t){this.m_maxTorque=t},s.prototype.getMaxTorque=function(){return this.m_maxTorque},s.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},s.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},s.prototype.getReactionForce=function(t){return f.mulNumVec2(t,this.m_linearImpulse)},s.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},s.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_position.a,n=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,a=gt.neo(e),m=gt.neo(s);this.m_rA=gt.mulVec2(a,f.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=gt.mulVec2(m,f.sub(this.m_localAnchorB,this.m_localCenterB));var h=this.m_invMassA,c=this.m_invMassB,_=this.m_invIA,l=this.m_invIB,u=new hi;if(u.ex.x=h+c+_*this.m_rA.y*this.m_rA.y+l*this.m_rB.y*this.m_rB.y,u.ex.y=-_*this.m_rA.x*this.m_rA.y-l*this.m_rB.x*this.m_rB.y,u.ey.x=u.ex.y,u.ey.y=h+c+_*this.m_rA.x*this.m_rA.x+l*this.m_rB.x*this.m_rB.x,this.m_linearMass=u.getInverse(),this.m_angularMass=_+l,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var p=f.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);i.subMul(h,p),o-=_*(f.crossVec2Vec2(this.m_rA,p)+this.m_angularImpulse),n.addMul(c,p),r+=l*(f.crossVec2Vec2(this.m_rB,p)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=r},s.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,n=this.m_invMassA,r=this.m_invMassB,a=this.m_invIA,m=this.m_invIB,h=t.dt,_=s-i,l=-this.m_angularMass*_,u=this.m_angularImpulse,p=h*this.m_maxTorque;this.m_angularImpulse=c(this.m_angularImpulse+l,-p,p),i-=a*(l=this.m_angularImpulse-u),s+=m*l;_=f.sub(f.add(o,f.crossNumVec2(s,this.m_rB)),f.add(e,f.crossNumVec2(i,this.m_rA))),l=f.neg(hi.mulVec2(this.m_linearMass,_)),u=this.m_linearImpulse;this.m_linearImpulse.add(l);p=h*this.m_maxForce;this.m_linearImpulse.lengthSquared()>p*p&&(this.m_linearImpulse.normalize(),this.m_linearImpulse.mul(p)),l=f.sub(this.m_linearImpulse,u),e.subMul(n,l),i-=a*f.crossVec2Vec2(this.m_rA,l),o.addMul(r,l),s+=m*f.crossVec2Vec2(this.m_rB,l),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},s.prototype.solvePositionConstraints=function(t){return!0},s.TYPE="friction-joint",s}(Xt);exports.FrictionJoint=Zo;var Ko=function(){function t(t,e,i){"object"==typeof t&&null!==t?(this.ex=yo.clone(t),this.ey=yo.clone(e),this.ez=yo.clone(i)):(this.ex=yo.zero(),this.ey=yo.zero(),this.ez=yo.zero())}return t.prototype.toString=function(){return JSON.stringify(this)},t.isValid=function(t){return null!=t&&(yo.isValid(t.ex)&&yo.isValid(t.ey)&&yo.isValid(t.ez))},t.assert=function(t){},t.prototype.setZero=function(){return this.ex.setZero(),this.ey.setZero(),this.ez.setZero(),this},t.prototype.solve33=function(t){var e=this.ey.y*this.ez.z-this.ey.z*this.ez.y,i=this.ey.z*this.ez.x-this.ey.x*this.ez.z,o=this.ey.x*this.ez.y-this.ey.y*this.ez.x,s=this.ex.x*e+this.ex.y*i+this.ex.z*o;0!==s&&(s=1/s);var n=new yo;return e=this.ey.y*this.ez.z-this.ey.z*this.ez.y,i=this.ey.z*this.ez.x-this.ey.x*this.ez.z,o=this.ey.x*this.ez.y-this.ey.y*this.ez.x,n.x=s*(t.x*e+t.y*i+t.z*o),e=t.y*this.ez.z-t.z*this.ez.y,i=t.z*this.ez.x-t.x*this.ez.z,o=t.x*this.ez.y-t.y*this.ez.x,n.y=s*(this.ex.x*e+this.ex.y*i+this.ex.z*o),e=this.ey.y*t.z-this.ey.z*t.y,i=this.ey.z*t.x-this.ey.x*t.z,o=this.ey.x*t.y-this.ey.y*t.x,n.z=s*(this.ex.x*e+this.ex.y*i+this.ex.z*o),n},t.prototype.solve22=function(t){var e=this.ex.x,i=this.ey.x,o=this.ex.y,s=this.ey.y,n=e*s-i*o;0!==n&&(n=1/n);var r=f.zero();return r.x=n*(s*t.x-i*t.y),r.y=n*(e*t.y-o*t.x),r},t.prototype.getInverse22=function(t){var e=this.ex.x,i=this.ey.x,o=this.ex.y,s=this.ey.y,n=e*s-i*o;0!==n&&(n=1/n),t.ex.x=n*s,t.ey.x=-n*i,t.ex.z=0,t.ex.y=-n*o,t.ey.y=n*e,t.ey.z=0,t.ez.x=0,t.ez.y=0,t.ez.z=0},t.prototype.getSymInverse33=function(t){var e=yo.dot(this.ex,yo.cross(this.ey,this.ez));0!==e&&(e=1/e);var i=this.ex.x,o=this.ey.x,s=this.ez.x,n=this.ey.y,r=this.ez.y,a=this.ez.z;t.ex.x=e*(n*a-r*r),t.ex.y=e*(s*r-o*a),t.ex.z=e*(o*r-s*n),t.ey.x=t.ex.y,t.ey.y=e*(i*a-s*s),t.ey.z=e*(s*o-i*r),t.ez.x=t.ex.z,t.ez.y=t.ey.z,t.ez.z=e*(i*n-o*o)},t.mul=function(t,e){if(e&&"z"in e&&"y"in e&&"x"in e){var i=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,o=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,s=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new yo(i,o,s)}if(e&&"y"in e&&"x"in e){i=t.ex.x*e.x+t.ey.x*e.y,o=t.ex.y*e.x+t.ey.y*e.y;return f.neo(i,o)}},t.mulVec3=function(t,e){var i=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,o=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,s=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new yo(i,o,s)},t.mulVec2=function(t,e){var i=t.ex.x*e.x+t.ey.x*e.y,o=t.ex.y*e.x+t.ey.y*e.y;return f.neo(i,o)},t.add=function(e,i){return new t(yo.add(e.ex,i.ex),yo.add(e.ey,i.ey),yo.add(e.ez,i.ez))},t}();exports.Mat33=Ko;var Xo,Go=Math.abs;!function(t){t[t.inactiveLimit=0]="inactiveLimit",t[t.atLowerLimit=1]="atLowerLimit",t[t.atUpperLimit=2]="atUpperLimit",t[t.equalLimits=3]="equalLimits"}(Xo||(Xo={}));var Qo={lowerAngle:0,upperAngle:0,maxMotorTorque:0,motorSpeed:0,enableLimit:!1,enableMotor:!1},$o=function(t){function o(e,i,s,n){var r,a,m,h,c,_,l=this;return l instanceof o?(e=null!=e?e:{},i=(l=t.call(this,e,i,s)||this).m_bodyA,s=l.m_bodyB,l.m_mass=new Ko,l.m_limitState=Xo.inactiveLimit,l.m_type=o.TYPE,f.isValid(n)?l.m_localAnchorA=i.getLocalPoint(n):f.isValid(e.localAnchorA)?l.m_localAnchorA=f.clone(e.localAnchorA):l.m_localAnchorA=f.zero(),f.isValid(n)?l.m_localAnchorB=s.getLocalPoint(n):f.isValid(e.localAnchorB)?l.m_localAnchorB=f.clone(e.localAnchorB):l.m_localAnchorB=f.zero(),Number.isFinite(e.referenceAngle)?l.m_referenceAngle=e.referenceAngle:l.m_referenceAngle=s.getAngle()-i.getAngle(),l.m_impulse=new yo,l.m_motorImpulse=0,l.m_lowerAngle=null!==(r=e.lowerAngle)&&void 0!==r?r:Qo.lowerAngle,l.m_upperAngle=null!==(a=e.upperAngle)&&void 0!==a?a:Qo.upperAngle,l.m_maxMotorTorque=null!==(m=e.maxMotorTorque)&&void 0!==m?m:Qo.maxMotorTorque,l.m_motorSpeed=null!==(h=e.motorSpeed)&&void 0!==h?h:Qo.motorSpeed,l.m_enableLimit=null!==(c=e.enableLimit)&&void 0!==c?c:Qo.enableLimit,l.m_enableMotor=null!==(_=e.enableMotor)&&void 0!==_?_:Qo.enableMotor,l):new o(e,i,s,n)}return e(o,t),o.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,lowerAngle:this.m_lowerAngle,upperAngle:this.m_upperAngle,maxMotorTorque:this.m_maxMotorTorque,motorSpeed:this.m_motorSpeed,enableLimit:this.m_enableLimit,enableMotor:this.m_enableMotor,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,referenceAngle:this.m_referenceAngle}},o._deserialize=function(t,e,s){return(t=i({},t)).bodyA=s(Zt,t.bodyA,e),t.bodyB=s(Zt,t.bodyB,e),new o(t)},o.prototype._reset=function(t){t.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.setVec2(t.localAnchorA),t.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.setVec2(t.localAnchorB),Number.isFinite(t.referenceAngle)&&(this.m_referenceAngle=t.referenceAngle),void 0!==t.enableLimit&&(this.m_enableLimit=t.enableLimit),Number.isFinite(t.lowerAngle)&&(this.m_lowerAngle=t.lowerAngle),Number.isFinite(t.upperAngle)&&(this.m_upperAngle=t.upperAngle),Number.isFinite(t.maxMotorTorque)&&(this.m_maxMotorTorque=t.maxMotorTorque),Number.isFinite(t.motorSpeed)&&(this.m_motorSpeed=t.motorSpeed),void 0!==t.enableMotor&&(this.m_enableMotor=t.enableMotor)},o.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},o.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},o.prototype.getReferenceAngle=function(){return this.m_referenceAngle},o.prototype.getJointAngle=function(){var t=this.m_bodyA;return this.m_bodyB.m_sweep.a-t.m_sweep.a-this.m_referenceAngle},o.prototype.getJointSpeed=function(){var t=this.m_bodyA;return this.m_bodyB.m_angularVelocity-t.m_angularVelocity},o.prototype.isMotorEnabled=function(){return this.m_enableMotor},o.prototype.enableMotor=function(t){t!=this.m_enableMotor&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t)},o.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},o.prototype.setMotorSpeed=function(t){t!=this.m_motorSpeed&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t)},o.prototype.getMotorSpeed=function(){return this.m_motorSpeed},o.prototype.setMaxMotorTorque=function(t){t!=this.m_maxMotorTorque&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t)},o.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},o.prototype.isLimitEnabled=function(){return this.m_enableLimit},o.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},o.prototype.getLowerLimit=function(){return this.m_lowerAngle},o.prototype.getUpperLimit=function(){return this.m_upperAngle},o.prototype.setLimits=function(t,e){t==this.m_lowerAngle&&e==this.m_upperAngle||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=t,this.m_upperAngle=e)},o.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},o.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},o.prototype.getReactionForce=function(t){return f.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},o.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},o.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_position.a,n=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,a=gt.neo(e),m=gt.neo(s);this.m_rA=gt.mulVec2(a,f.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=gt.mulVec2(m,f.sub(this.m_localAnchorB,this.m_localCenterB));var h=this.m_invMassA,c=this.m_invMassB,_=this.m_invIA,l=this.m_invIB,u=_+l===0;if(this.m_mass.ex.x=h+c+this.m_rA.y*this.m_rA.y*_+this.m_rB.y*this.m_rB.y*l,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*_-this.m_rB.y*this.m_rB.x*l,this.m_mass.ez.x=-this.m_rA.y*_-this.m_rB.y*l,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=h+c+this.m_rA.x*this.m_rA.x*_+this.m_rB.x*this.m_rB.x*l,this.m_mass.ez.y=this.m_rA.x*_+this.m_rB.x*l,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=_+l,this.m_motorMass=_+l,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),(0==this.m_enableMotor||u)&&(this.m_motorImpulse=0),this.m_enableLimit&&0==u){var p=s-e-this.m_referenceAngle;Go(this.m_upperAngle-this.m_lowerAngle)<2*B.angularSlop?this.m_limitState=Xo.equalLimits:p<=this.m_lowerAngle?(this.m_limitState!=Xo.atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=Xo.atLowerLimit):p>=this.m_upperAngle?(this.m_limitState!=Xo.atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=Xo.atUpperLimit):(this.m_limitState=Xo.inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=Xo.inactiveLimit;if(t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var y=f.neo(this.m_impulse.x,this.m_impulse.y);i.subMul(h,y),o-=_*(f.crossVec2Vec2(this.m_rA,y)+this.m_motorImpulse+this.m_impulse.z),n.addMul(c,y),r+=l*(f.crossVec2Vec2(this.m_rB,y)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=r},o.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,n=this.m_invMassA,r=this.m_invMassB,a=this.m_invIA,m=this.m_invIB,h=a+m===0;if(this.m_enableMotor&&this.m_limitState!=Xo.equalLimits&&0==h){var _=s-i-this.m_motorSpeed,l=-this.m_motorMass*_,u=this.m_motorImpulse,p=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=c(this.m_motorImpulse+l,-p,p),i-=a*(l=this.m_motorImpulse-u),s+=m*l}if(this.m_enableLimit&&this.m_limitState!=Xo.inactiveLimit&&0==h){var y=f.zero();y.addCombine(1,o,1,f.crossNumVec2(s,this.m_rB)),y.subCombine(1,e,1,f.crossNumVec2(i,this.m_rA));var d=s-i;_=new yo(y.x,y.y,d),l=yo.neg(this.m_mass.solve33(_));if(this.m_limitState==Xo.equalLimits)this.m_impulse.add(l);else if(this.m_limitState==Xo.atLowerLimit){if(this.m_impulse.z+l.z<0){var v=f.combine(-1,y,this.m_impulse.z,f.neo(this.m_mass.ez.x,this.m_mass.ez.y)),x=this.m_mass.solve22(v);l.x=x.x,l.y=x.y,l.z=-this.m_impulse.z,this.m_impulse.x+=x.x,this.m_impulse.y+=x.y,this.m_impulse.z=0}else this.m_impulse.add(l)}else if(this.m_limitState==Xo.atUpperLimit){if(this.m_impulse.z+l.z>0){v=f.combine(-1,y,this.m_impulse.z,f.neo(this.m_mass.ez.x,this.m_mass.ez.y)),x=this.m_mass.solve22(v);l.x=x.x,l.y=x.y,l.z=-this.m_impulse.z,this.m_impulse.x+=x.x,this.m_impulse.y+=x.y,this.m_impulse.z=0}else this.m_impulse.add(l)}var A=f.neo(l.x,l.y);e.subMul(n,A),i-=a*(f.crossVec2Vec2(this.m_rA,A)+l.z),o.addMul(r,A),s+=m*(f.crossVec2Vec2(this.m_rB,A)+l.z)}else{(_=f.zero()).addCombine(1,o,1,f.crossNumVec2(s,this.m_rB)),_.subCombine(1,e,1,f.crossNumVec2(i,this.m_rA));l=this.m_mass.solve22(f.neg(_));this.m_impulse.x+=l.x,this.m_impulse.y+=l.y,e.subMul(n,l),i-=a*f.crossVec2Vec2(this.m_rA,l),o.addMul(r,l),s+=m*f.crossVec2Vec2(this.m_rB,l)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},o.prototype.solvePositionConstraints=function(t){var e,i=this.m_bodyA.c_position.c,o=this.m_bodyA.c_position.a,s=this.m_bodyB.c_position.c,n=this.m_bodyB.c_position.a,r=gt.neo(o),a=gt.neo(n),m=0,h=this.m_invIA+this.m_invIB==0;if(this.m_enableLimit&&this.m_limitState!=Xo.inactiveLimit&&0==h){var _=n-o-this.m_referenceAngle,l=0;if(this.m_limitState==Xo.equalLimits){var u=c(_-this.m_lowerAngle,-B.maxAngularCorrection,B.maxAngularCorrection);l=-this.m_motorMass*u,m=Go(u)}else if(this.m_limitState==Xo.atLowerLimit){m=-(u=_-this.m_lowerAngle),u=c(u+B.angularSlop,-B.maxAngularCorrection,0),l=-this.m_motorMass*u}else if(this.m_limitState==Xo.atUpperLimit){m=u=_-this.m_upperAngle,u=c(u-B.angularSlop,0,B.maxAngularCorrection),l=-this.m_motorMass*u}o-=this.m_invIA*l,n+=this.m_invIB*l}r.setAngle(o),a.setAngle(n);var p=gt.mulVec2(r,f.sub(this.m_localAnchorA,this.m_localCenterA)),y=gt.mulVec2(a,f.sub(this.m_localAnchorB,this.m_localCenterB));(u=f.zero()).addCombine(1,s,1,y),u.subCombine(1,i,1,p),e=u.length();var d=this.m_invMassA,v=this.m_invMassB,x=this.m_invIA,A=this.m_invIB,g=new hi;g.ex.x=d+v+x*p.y*p.y+A*y.y*y.y,g.ex.y=-x*p.x*p.y-A*y.x*y.y,g.ey.x=g.ex.y,g.ey.y=d+v+x*p.x*p.x+A*y.x*y.x;var b=f.neg(g.solve(u));return i.subMul(d,b),o-=x*f.crossVec2Vec2(p,b),s.addMul(v,b),n+=A*f.crossVec2Vec2(y,b),this.m_bodyA.c_position.c.setVec2(i),this.m_bodyA.c_position.a=o,this.m_bodyB.c_position.c.setVec2(s),this.m_bodyB.c_position.a=n,e<=B.linearSlop&&m<=B.angularSlop},o.TYPE="revolute-joint",o}(Xt);exports.RevoluteJoint=$o;var ts,es=Math.abs,is=Math.max,os=Math.min;!function(t){t[t.inactiveLimit=0]="inactiveLimit",t[t.atLowerLimit=1]="atLowerLimit",t[t.atUpperLimit=2]="atUpperLimit",t[t.equalLimits=3]="equalLimits"}(ts||(ts={}));var ss={enableLimit:!1,lowerTranslation:0,upperTranslation:0,enableMotor:!1,maxMotorForce:0,motorSpeed:0},ns=function(t){function s(e,i,n,r,a){var m=this;return m instanceof s?(e=o(e,ss),i=(m=t.call(this,e,i,n)||this).m_bodyA,n=m.m_bodyB,m.m_type=s.TYPE,m.m_localAnchorA=f.clone(r?i.getLocalPoint(r):e.localAnchorA||f.zero()),m.m_localAnchorB=f.clone(r?n.getLocalPoint(r):e.localAnchorB||f.zero()),m.m_localXAxisA=f.clone(a?i.getLocalVector(a):e.localAxisA||f.neo(1,0)),m.m_localXAxisA.normalize(),m.m_localYAxisA=f.crossNumVec2(1,m.m_localXAxisA),m.m_referenceAngle=Number.isFinite(e.referenceAngle)?e.referenceAngle:n.getAngle()-i.getAngle(),m.m_impulse=new yo,m.m_motorMass=0,m.m_motorImpulse=0,m.m_lowerTranslation=e.lowerTranslation,m.m_upperTranslation=e.upperTranslation,m.m_maxMotorForce=e.maxMotorForce,m.m_motorSpeed=e.motorSpeed,m.m_enableLimit=e.enableLimit,m.m_enableMotor=e.enableMotor,m.m_limitState=ts.inactiveLimit,m.m_axis=f.zero(),m.m_perp=f.zero(),m.m_K=new Ko,m):new s(e,i,n,r,a)}return e(s,t),s.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,lowerTranslation:this.m_lowerTranslation,upperTranslation:this.m_upperTranslation,maxMotorForce:this.m_maxMotorForce,motorSpeed:this.m_motorSpeed,enableLimit:this.m_enableLimit,enableMotor:this.m_enableMotor,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,localAxisA:this.m_localXAxisA,referenceAngle:this.m_referenceAngle}},s._deserialize=function(t,e,o){return(t=i({},t)).bodyA=o(Zt,t.bodyA,e),t.bodyB=o(Zt,t.bodyB,e),t.localAxisA=f.clone(t.localAxisA),new s(t)},s.prototype._reset=function(t){t.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.setVec2(t.localAnchorA),t.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.setVec2(t.localAnchorB),t.localAxisA&&(this.m_localXAxisA.setVec2(t.localAxisA),this.m_localYAxisA.setVec2(f.crossNumVec2(1,t.localAxisA))),Number.isFinite(t.referenceAngle)&&(this.m_referenceAngle=t.referenceAngle),void 0!==t.enableLimit&&(this.m_enableLimit=!!t.enableLimit),Number.isFinite(t.lowerTranslation)&&(this.m_lowerTranslation=t.lowerTranslation),Number.isFinite(t.upperTranslation)&&(this.m_upperTranslation=t.upperTranslation),void 0!==t.enableMotor&&(this.m_enableMotor=!!t.enableMotor),Number.isFinite(t.maxMotorForce)&&(this.m_maxMotorForce=t.maxMotorForce),Number.isFinite(t.motorSpeed)&&(this.m_motorSpeed=t.motorSpeed)},s.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},s.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},s.prototype.getLocalAxisA=function(){return this.m_localXAxisA},s.prototype.getReferenceAngle=function(){return this.m_referenceAngle},s.prototype.getJointTranslation=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_bodyB.getWorldPoint(this.m_localAnchorB),i=f.sub(e,t),o=this.m_bodyA.getWorldVector(this.m_localXAxisA);return f.dot(i,o)},s.prototype.getJointSpeed=function(){var t=this.m_bodyA,e=this.m_bodyB,i=gt.mulVec2(t.m_xf.q,f.sub(this.m_localAnchorA,t.m_sweep.localCenter)),o=gt.mulVec2(e.m_xf.q,f.sub(this.m_localAnchorB,e.m_sweep.localCenter)),s=f.add(t.m_sweep.c,i),n=f.add(e.m_sweep.c,o),r=f.sub(n,s),a=gt.mulVec2(t.m_xf.q,this.m_localXAxisA),m=t.m_linearVelocity,h=e.m_linearVelocity,c=t.m_angularVelocity,_=e.m_angularVelocity;return f.dot(r,f.crossNumVec2(c,a))+f.dot(a,f.sub(f.addCrossNumVec2(h,_,o),f.addCrossNumVec2(m,c,i)))},s.prototype.isLimitEnabled=function(){return this.m_enableLimit},s.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},s.prototype.getLowerLimit=function(){return this.m_lowerTranslation},s.prototype.getUpperLimit=function(){return this.m_upperTranslation},s.prototype.setLimits=function(t,e){t==this.m_lowerTranslation&&e==this.m_upperTranslation||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e,this.m_impulse.z=0)},s.prototype.isMotorEnabled=function(){return this.m_enableMotor},s.prototype.enableMotor=function(t){t!=this.m_enableMotor&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t)},s.prototype.setMotorSpeed=function(t){t!=this.m_motorSpeed&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t)},s.prototype.setMaxMotorForce=function(t){t!=this.m_maxMotorForce&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorForce=t)},s.prototype.getMaxMotorForce=function(){return this.m_maxMotorForce},s.prototype.getMotorSpeed=function(){return this.m_motorSpeed},s.prototype.getMotorForce=function(t){return t*this.m_motorImpulse},s.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},s.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},s.prototype.getReactionForce=function(t){return f.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis).mul(t)},s.prototype.getReactionTorque=function(t){return t*this.m_impulse.y},s.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,o=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,m=this.m_bodyB.c_velocity.w,h=gt.neo(i),c=gt.neo(r),_=gt.mulVec2(h,f.sub(this.m_localAnchorA,this.m_localCenterA)),l=gt.mulVec2(c,f.sub(this.m_localAnchorB,this.m_localCenterB)),u=f.zero();u.addCombine(1,n,1,l),u.subCombine(1,e,1,_);var p=this.m_invMassA,y=this.m_invMassB,d=this.m_invIA,v=this.m_invIB;this.m_axis=gt.mulVec2(h,this.m_localXAxisA),this.m_a1=f.crossVec2Vec2(f.add(u,_),this.m_axis),this.m_a2=f.crossVec2Vec2(l,this.m_axis),this.m_motorMass=p+y+d*this.m_a1*this.m_a1+v*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),this.m_perp=gt.mulVec2(h,this.m_localYAxisA),this.m_s1=f.crossVec2Vec2(f.add(u,_),this.m_perp),this.m_s2=f.crossVec2Vec2(l,this.m_perp),f.crossVec2Vec2(_,this.m_perp);var x=p+y+d*this.m_s1*this.m_s1+v*this.m_s2*this.m_s2,A=d*this.m_s1+v*this.m_s2,g=d*this.m_s1*this.m_a1+v*this.m_s2*this.m_a2,b=d+v;0==b&&(b=1);var w=d*this.m_a1+v*this.m_a2,V=p+y+d*this.m_a1*this.m_a1+v*this.m_a2*this.m_a2;if(this.m_K.ex.set(x,A,g),this.m_K.ey.set(A,b,w),this.m_K.ez.set(g,w,V),this.m_enableLimit){var C=f.dot(this.m_axis,u);es(this.m_upperTranslation-this.m_lowerTranslation)<2*B.linearSlop?this.m_limitState=ts.equalLimits:C<=this.m_lowerTranslation?this.m_limitState!=ts.atLowerLimit&&(this.m_limitState=ts.atLowerLimit,this.m_impulse.z=0):C>=this.m_upperTranslation?this.m_limitState!=ts.atUpperLimit&&(this.m_limitState=ts.atUpperLimit,this.m_impulse.z=0):(this.m_limitState=ts.inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=ts.inactiveLimit,this.m_impulse.z=0;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var M=f.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis),I=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,P=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;o.subMul(p,M),s-=d*I,a.addMul(y,M),m+=v*P}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.setVec2(o),this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v.setVec2(a),this.m_bodyB.c_velocity.w=m},s.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,n=this.m_invMassA,r=this.m_invMassB,a=this.m_invIA,m=this.m_invIB;if(this.m_enableMotor&&this.m_limitState!=ts.equalLimits){var h=f.dot(this.m_axis,f.sub(o,e))+this.m_a2*s-this.m_a1*i,_=this.m_motorMass*(this.m_motorSpeed-h),l=this.m_motorImpulse,u=t.dt*this.m_maxMotorForce;this.m_motorImpulse=c(this.m_motorImpulse+_,-u,u),_=this.m_motorImpulse-l;var p=f.mulNumVec2(_,this.m_axis),y=_*this.m_a1,d=_*this.m_a2;e.subMul(n,p),i-=a*y,o.addMul(r,p),s+=m*d}var v=f.zero();if(v.x+=f.dot(this.m_perp,o)+this.m_s2*s,v.x-=f.dot(this.m_perp,e)+this.m_s1*i,v.y=s-i,this.m_enableLimit&&this.m_limitState!=ts.inactiveLimit){var x=0;x+=f.dot(this.m_axis,o)+this.m_a2*s,x-=f.dot(this.m_axis,e)+this.m_a1*i;h=new yo(v.x,v.y,x);var A=yo.clone(this.m_impulse),g=this.m_K.solve33(yo.neg(h));this.m_impulse.add(g),this.m_limitState==ts.atLowerLimit?this.m_impulse.z=is(this.m_impulse.z,0):this.m_limitState==ts.atUpperLimit&&(this.m_impulse.z=os(this.m_impulse.z,0));var b=f.combine(-1,v,-(this.m_impulse.z-A.z),f.neo(this.m_K.ez.x,this.m_K.ez.y)),B=f.add(this.m_K.solve22(b),f.neo(A.x,A.y));this.m_impulse.x=B.x,this.m_impulse.y=B.y,g=yo.sub(this.m_impulse,A);p=f.combine(g.x,this.m_perp,g.z,this.m_axis),y=g.x*this.m_s1+g.y+g.z*this.m_a1,d=g.x*this.m_s2+g.y+g.z*this.m_a2;e.subMul(n,p),i-=a*y,o.addMul(r,p),s+=m*d}else{g=this.m_K.solve22(f.neg(v));this.m_impulse.x+=g.x,this.m_impulse.y+=g.y;p=f.mulNumVec2(g.x,this.m_perp),y=g.x*this.m_s1+g.y,d=g.x*this.m_s2+g.y;e.subMul(n,p),i-=a*y,o.addMul(r,p),s+=m*d}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},s.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,n=gt.neo(i),r=gt.neo(s),a=this.m_invMassA,m=this.m_invMassB,h=this.m_invIA,_=this.m_invIB,l=gt.mulVec2(n,f.sub(this.m_localAnchorA,this.m_localCenterA)),u=gt.mulVec2(r,f.sub(this.m_localAnchorB,this.m_localCenterB)),p=f.sub(f.add(o,u),f.add(e,l)),y=gt.mulVec2(n,this.m_localXAxisA),d=f.crossVec2Vec2(f.add(p,l),y),v=f.crossVec2Vec2(u,y),x=gt.mulVec2(n,this.m_localYAxisA),A=f.crossVec2Vec2(f.add(p,l),x),g=f.crossVec2Vec2(u,x),b=new yo,w=f.zero();w.x=f.dot(x,p),w.y=s-i-this.m_referenceAngle;var V=es(w.x),C=es(w.y),M=B.linearSlop,I=B.maxLinearCorrection,P=!1,S=0;if(this.m_enableLimit){var z=f.dot(y,p);es(this.m_upperTranslation-this.m_lowerTranslation)<2*M?(S=c(z,-I,I),V=is(V,es(z)),P=!0):z<=this.m_lowerTranslation?(S=c(z-this.m_lowerTranslation+M,-I,0),V=Math.max(V,this.m_lowerTranslation-z),P=!0):z>=this.m_upperTranslation&&(S=c(z-this.m_upperTranslation-M,0,I),V=Math.max(V,z-this.m_upperTranslation),P=!0)}if(P){var T=a+m+h*A*A+_*g*g,F=h*A+_*g,L=h*A*d+_*g*v;0==(D=h+_)&&(D=1);var q=h*d+_*v,N=a+m+h*d*d+_*v*v;(j=new Ko).ex.set(T,F,L),j.ey.set(F,D,q),j.ez.set(L,q,N);var k=new yo;k.x=w.x,k.y=w.y,k.z=S,b=j.solve33(yo.neg(k))}else{var D,j;T=a+m+h*A*A+_*g*g,F=h*A+_*g;0==(D=h+_)&&(D=1),(j=new hi).ex.setNum(T,F),j.ey.setNum(F,D);var R=j.solve(f.neg(w));b.x=R.x,b.y=R.y,b.z=0}var O=f.combine(b.x,x,b.z,y),E=b.x*A+b.y+b.z*d,J=b.x*g+b.y+b.z*v;return e.subMul(a,O),i-=h*E,o.addMul(m,O),s+=_*J,this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c=o,this.m_bodyB.c_position.a=s,V<=B.linearSlop&&C<=B.angularSlop},s.TYPE="prismatic-joint",s}(Xt);exports.PrismaticJoint=ns;var rs={ratio:1},as=function(t){function s(e,i,n,r,a,m){var h,c,_=this;if(!(_ instanceof s))return new s(e,i,n,r,a,m);e=o(e,rs),i=(_=t.call(this,e,i,n)||this).m_bodyA,n=_.m_bodyB,_.m_type=s.TYPE,_.m_joint1=r||e.joint1,_.m_joint2=a||e.joint2,_.m_ratio=Number.isFinite(m)?m:e.ratio,_.m_type1=_.m_joint1.getType(),_.m_type2=_.m_joint2.getType(),_.m_bodyC=_.m_joint1.getBodyA(),_.m_bodyA=_.m_joint1.getBodyB();var l=_.m_bodyA.m_xf,u=_.m_bodyA.m_sweep.a,p=_.m_bodyC.m_xf,y=_.m_bodyC.m_sweep.a;if(_.m_type1===$o.TYPE){var d=_.m_joint1;_.m_localAnchorC=d.m_localAnchorA,_.m_localAnchorA=d.m_localAnchorB,_.m_referenceAngleA=d.m_referenceAngle,_.m_localAxisC=f.zero(),h=u-y-_.m_referenceAngleA}else{var v=_.m_joint1;_.m_localAnchorC=v.m_localAnchorA,_.m_localAnchorA=v.m_localAnchorB,_.m_referenceAngleA=v.m_referenceAngle,_.m_localAxisC=v.m_localXAxisA;var x=_.m_localAnchorC,A=gt.mulTVec2(p.q,f.add(gt.mulVec2(l.q,_.m_localAnchorA),f.sub(l.p,p.p)));h=f.dot(A,_.m_localAxisC)-f.dot(x,_.m_localAxisC)}_.m_bodyD=_.m_joint2.getBodyA(),_.m_bodyB=_.m_joint2.getBodyB();var g=_.m_bodyB.m_xf,b=_.m_bodyB.m_sweep.a,B=_.m_bodyD.m_xf,w=_.m_bodyD.m_sweep.a;if(_.m_type2===$o.TYPE){d=_.m_joint2;_.m_localAnchorD=d.m_localAnchorA,_.m_localAnchorB=d.m_localAnchorB,_.m_referenceAngleB=d.m_referenceAngle,_.m_localAxisD=f.zero(),c=b-w-_.m_referenceAngleB}else{v=_.m_joint2;_.m_localAnchorD=v.m_localAnchorA,_.m_localAnchorB=v.m_localAnchorB,_.m_referenceAngleB=v.m_referenceAngle,_.m_localAxisD=v.m_localXAxisA;var V=_.m_localAnchorD,C=gt.mulTVec2(B.q,f.add(gt.mulVec2(g.q,_.m_localAnchorB),f.sub(g.p,B.p)));c=f.dot(C,_.m_localAxisD)-f.dot(V,_.m_localAxisD)}return _.m_constant=h+_.m_ratio*c,_.m_impulse=0,_}return e(s,t),s.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,joint1:this.m_joint1,joint2:this.m_joint2,ratio:this.m_ratio}},s._deserialize=function(t,e,o){return(t=i({},t)).bodyA=o(Zt,t.bodyA,e),t.bodyB=o(Zt,t.bodyB,e),t.joint1=o(Xt,t.joint1,e),t.joint2=o(Xt,t.joint2,e),new s(t)},s.prototype._reset=function(t){Number.isFinite(t.ratio)&&(this.m_ratio=t.ratio)},s.prototype.getJoint1=function(){return this.m_joint1},s.prototype.getJoint2=function(){return this.m_joint2},s.prototype.setRatio=function(t){this.m_ratio=t},s.prototype.getRatio=function(){return this.m_ratio},s.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},s.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},s.prototype.getReactionForce=function(t){return f.mulNumVec2(this.m_impulse,this.m_JvAC).mul(t)},s.prototype.getReactionTorque=function(t){return t*(this.m_impulse*this.m_JwA)},s.prototype.initVelocityConstraints=function(t){this.m_lcA=this.m_bodyA.m_sweep.localCenter,this.m_lcB=this.m_bodyB.m_sweep.localCenter,this.m_lcC=this.m_bodyC.m_sweep.localCenter,this.m_lcD=this.m_bodyD.m_sweep.localCenter,this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_position.a,n=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,a=this.m_bodyC.c_position.a,m=this.m_bodyC.c_velocity.v,h=this.m_bodyC.c_velocity.w,c=this.m_bodyD.c_position.a,_=this.m_bodyD.c_velocity.v,l=this.m_bodyD.c_velocity.w,u=gt.neo(e),p=gt.neo(s),y=gt.neo(a),d=gt.neo(c);if(this.m_mass=0,this.m_type1==$o.TYPE)this.m_JvAC=f.zero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{var v=gt.mulVec2(y,this.m_localAxisC),x=gt.mulSub(y,this.m_localAnchorC,this.m_lcC),A=gt.mulSub(u,this.m_localAnchorA,this.m_lcA);this.m_JvAC=v,this.m_JwC=f.crossVec2Vec2(x,v),this.m_JwA=f.crossVec2Vec2(A,v),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_type2==$o.TYPE)this.m_JvBD=f.zero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{v=gt.mulVec2(d,this.m_localAxisD);var g=gt.mulSub(d,this.m_localAnchorD,this.m_lcD),b=gt.mulSub(p,this.m_localAnchorB,this.m_lcB);this.m_JvBD=f.mulNumVec2(this.m_ratio,v),this.m_JwD=this.m_ratio*f.crossVec2Vec2(g,v),this.m_JwB=this.m_ratio*f.crossVec2Vec2(b,v),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,t.warmStarting?(i.addMul(this.m_mA*this.m_impulse,this.m_JvAC),o+=this.m_iA*this.m_impulse*this.m_JwA,n.addMul(this.m_mB*this.m_impulse,this.m_JvBD),r+=this.m_iB*this.m_impulse*this.m_JwB,m.subMul(this.m_mC*this.m_impulse,this.m_JvAC),h-=this.m_iC*this.m_impulse*this.m_JwC,_.subMul(this.m_mD*this.m_impulse,this.m_JvBD),l-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,this.m_bodyA.c_velocity.v.setVec2(i),this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v.setVec2(n),this.m_bodyB.c_velocity.w=r,this.m_bodyC.c_velocity.v.setVec2(m),this.m_bodyC.c_velocity.w=h,this.m_bodyD.c_velocity.v.setVec2(_),this.m_bodyD.c_velocity.w=l},s.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,n=this.m_bodyC.c_velocity.v,r=this.m_bodyC.c_velocity.w,a=this.m_bodyD.c_velocity.v,m=this.m_bodyD.c_velocity.w,h=f.dot(this.m_JvAC,e)-f.dot(this.m_JvAC,n)+f.dot(this.m_JvBD,o)-f.dot(this.m_JvBD,a);h+=this.m_JwA*i-this.m_JwC*r+(this.m_JwB*s-this.m_JwD*m);var c=-this.m_mass*h;this.m_impulse+=c,e.addMul(this.m_mA*c,this.m_JvAC),i+=this.m_iA*c*this.m_JwA,o.addMul(this.m_mB*c,this.m_JvBD),s+=this.m_iB*c*this.m_JwB,n.subMul(this.m_mC*c,this.m_JvAC),r-=this.m_iC*c*this.m_JwC,a.subMul(this.m_mD*c,this.m_JvBD),m-=this.m_iD*c*this.m_JwD,this.m_bodyA.c_velocity.v.setVec2(e),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.setVec2(o),this.m_bodyB.c_velocity.w=s,this.m_bodyC.c_velocity.v.setVec2(n),this.m_bodyC.c_velocity.w=r,this.m_bodyD.c_velocity.v.setVec2(a),this.m_bodyD.c_velocity.w=m},s.prototype.solvePositionConstraints=function(t){var e,i,o,s,n,r,a,m,h=this.m_bodyA.c_position.c,c=this.m_bodyA.c_position.a,_=this.m_bodyB.c_position.c,l=this.m_bodyB.c_position.a,u=this.m_bodyC.c_position.c,p=this.m_bodyC.c_position.a,y=this.m_bodyD.c_position.c,d=this.m_bodyD.c_position.a,v=gt.neo(c),x=gt.neo(l),A=gt.neo(p),g=gt.neo(d),b=0;if(this.m_type1==$o.TYPE)o=f.zero(),n=1,a=1,b+=this.m_iA+this.m_iC,e=c-p-this.m_referenceAngleA;else{var w=gt.mulVec2(A,this.m_localAxisC),V=gt.mulSub(A,this.m_localAnchorC,this.m_lcC),C=gt.mulSub(v,this.m_localAnchorA,this.m_lcA);o=w,a=f.crossVec2Vec2(V,w),n=f.crossVec2Vec2(C,w),b+=this.m_mC+this.m_mA+this.m_iC*a*a+this.m_iA*n*n;var M=f.sub(this.m_localAnchorC,this.m_lcC),I=gt.mulTVec2(A,f.add(C,f.sub(h,u)));e=f.dot(f.sub(I,M),this.m_localAxisC)}if(this.m_type2==$o.TYPE)s=f.zero(),r=this.m_ratio,m=this.m_ratio,b+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),i=l-d-this.m_referenceAngleB;else{w=gt.mulVec2(g,this.m_localAxisD);var P=gt.mulSub(g,this.m_localAnchorD,this.m_lcD),S=gt.mulSub(x,this.m_localAnchorB,this.m_lcB);s=f.mulNumVec2(this.m_ratio,w),m=this.m_ratio*f.crossVec2Vec2(P,w),r=this.m_ratio*f.crossVec2Vec2(S,w),b+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*m*m+this.m_iB*r*r;var z=f.sub(this.m_localAnchorD,this.m_lcD),T=gt.mulTVec2(g,f.add(S,f.sub(_,y)));i=f.dot(T,this.m_localAxisD)-f.dot(z,this.m_localAxisD)}var F=e+this.m_ratio*i-this.m_constant,L=0;return b>0&&(L=-F/b),h.addMul(this.m_mA*L,o),c+=this.m_iA*L*n,_.addMul(this.m_mB*L,s),l+=this.m_iB*L*r,u.subMul(this.m_mC*L,o),p-=this.m_iC*L*a,y.subMul(this.m_mD*L,s),d-=this.m_iD*L*m,this.m_bodyA.c_position.c.setVec2(h),this.m_bodyA.c_position.a=c,this.m_bodyB.c_position.c.setVec2(_),this.m_bodyB.c_position.a=l,this.m_bodyC.c_position.c.setVec2(u),this.m_bodyC.c_position.a=p,this.m_bodyD.c_position.c.setVec2(y),this.m_bodyD.c_position.a=d,0<B.linearSlop},s.TYPE="gear-joint",s}(Xt);exports.GearJoint=as;var ms={maxForce:1,maxTorque:1,correctionFactor:.3},hs=function(t){function s(e,i,n){var r=this;return r instanceof s?(e=o(e,ms),i=(r=t.call(this,e,i,n)||this).m_bodyA,n=r.m_bodyB,r.m_type=s.TYPE,r.m_linearOffset=f.isValid(e.linearOffset)?f.clone(e.linearOffset):i.getLocalPoint(n.getPosition()),r.m_angularOffset=Number.isFinite(e.angularOffset)?e.angularOffset:n.getAngle()-i.getAngle(),r.m_linearImpulse=f.zero(),r.m_angularImpulse=0,r.m_maxForce=e.maxForce,r.m_maxTorque=e.maxTorque,r.m_correctionFactor=e.correctionFactor,r):new s(e,i,n)}return e(s,t),s.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,maxForce:this.m_maxForce,maxTorque:this.m_maxTorque,correctionFactor:this.m_correctionFactor,linearOffset:this.m_linearOffset,angularOffset:this.m_angularOffset}},s._deserialize=function(t,e,o){return(t=i({},t)).bodyA=o(Zt,t.bodyA,e),t.bodyB=o(Zt,t.bodyB,e),new s(t)},s.prototype._reset=function(t){Number.isFinite(t.angularOffset)&&(this.m_angularOffset=t.angularOffset),Number.isFinite(t.maxForce)&&(this.m_maxForce=t.maxForce),Number.isFinite(t.maxTorque)&&(this.m_maxTorque=t.maxTorque),Number.isFinite(t.correctionFactor)&&(this.m_correctionFactor=t.correctionFactor),f.isValid(t.linearOffset)&&this.m_linearOffset.set(t.linearOffset)},s.prototype.setMaxForce=function(t){this.m_maxForce=t},s.prototype.getMaxForce=function(){return this.m_maxForce},s.prototype.setMaxTorque=function(t){this.m_maxTorque=t},s.prototype.getMaxTorque=function(){return this.m_maxTorque},s.prototype.setCorrectionFactor=function(t){this.m_correctionFactor=t},s.prototype.getCorrectionFactor=function(){return this.m_correctionFactor},s.prototype.setLinearOffset=function(t){t.x==this.m_linearOffset.x&&t.y==this.m_linearOffset.y||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_linearOffset.set(t))},s.prototype.getLinearOffset=function(){return this.m_linearOffset},s.prototype.setAngularOffset=function(t){t!=this.m_angularOffset&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_angularOffset=t)},s.prototype.getAngularOffset=function(){return this.m_angularOffset},s.prototype.getAnchorA=function(){return this.m_bodyA.getPosition()},s.prototype.getAnchorB=function(){return this.m_bodyB.getPosition()},s.prototype.getReactionForce=function(t){return f.mulNumVec2(t,this.m_linearImpulse)},s.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},s.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,o=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,m=this.m_bodyB.c_velocity.w,h=gt.neo(i),c=gt.neo(r);this.m_rA=gt.mulVec2(h,f.sub(this.m_linearOffset,this.m_localCenterA)),this.m_rB=gt.mulVec2(c,f.neg(this.m_localCenterB));var _=this.m_invMassA,l=this.m_invMassB,u=this.m_invIA,p=this.m_invIB,y=new hi;if(y.ex.x=_+l+u*this.m_rA.y*this.m_rA.y+p*this.m_rB.y*this.m_rB.y,y.ex.y=-u*this.m_rA.x*this.m_rA.y-p*this.m_rB.x*this.m_rB.y,y.ey.x=y.ex.y,y.ey.y=_+l+u*this.m_rA.x*this.m_rA.x+p*this.m_rB.x*this.m_rB.x,this.m_linearMass=y.getInverse(),this.m_angularMass=u+p,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),this.m_linearError=f.zero(),this.m_linearError.addCombine(1,n,1,this.m_rB),this.m_linearError.subCombine(1,e,1,this.m_rA),this.m_angularError=r-i-this.m_angularOffset,t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var d=f.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);o.subMul(_,d),s-=u*(f.crossVec2Vec2(this.m_rA,d)+this.m_angularImpulse),a.addMul(l,d),m+=p*(f.crossVec2Vec2(this.m_rB,d)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=o,this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v=a,this.m_bodyB.c_velocity.w=m},s.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,n=this.m_invMassA,r=this.m_invMassB,a=this.m_invIA,m=this.m_invIB,h=t.dt,_=t.inv_dt,l=s-i+_*this.m_correctionFactor*this.m_angularError,u=-this.m_angularMass*l,p=this.m_angularImpulse,y=h*this.m_maxTorque;this.m_angularImpulse=c(this.m_angularImpulse+u,-y,y),i-=a*(u=this.m_angularImpulse-p),s+=m*u,(l=f.zero()).addCombine(1,o,1,f.crossNumVec2(s,this.m_rB)),l.subCombine(1,e,1,f.crossNumVec2(i,this.m_rA)),l.addMul(_*this.m_correctionFactor,this.m_linearError);u=f.neg(hi.mulVec2(this.m_linearMass,l)),p=f.clone(this.m_linearImpulse);this.m_linearImpulse.add(u);y=h*this.m_maxForce;this.m_linearImpulse.clamp(y),u=f.sub(this.m_linearImpulse,p),e.subMul(n,u),i-=a*f.crossVec2Vec2(this.m_rA,u),o.addMul(r,u),s+=m*f.crossVec2Vec2(this.m_rB,u),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},s.prototype.solvePositionConstraints=function(t){return!0},s.TYPE="motor-joint",s}(Xt);exports.MotorJoint=hs;var cs=Math.PI,_s={maxForce:0,frequencyHz:5,dampingRatio:.7},ls=function(t){function s(e,i,n,r){var a=this;return a instanceof s?(e=o(e,_s),i=(a=t.call(this,e,i,n)||this).m_bodyA,n=a.m_bodyB,a.m_type=s.TYPE,f.isValid(r)?a.m_targetA=f.clone(r):f.isValid(e.target)?a.m_targetA=f.clone(e.target):a.m_targetA=f.zero(),a.m_localAnchorB=Ct.mulTVec2(n.getTransform(),a.m_targetA),a.m_maxForce=e.maxForce,a.m_impulse=f.zero(),a.m_frequencyHz=e.frequencyHz,a.m_dampingRatio=e.dampingRatio,a.m_beta=0,a.m_gamma=0,a.m_rB=f.zero(),a.m_localCenterB=f.zero(),a.m_invMassB=0,a.m_invIB=0,a.m_mass=new hi,a.m_C=f.zero(),a):new s(e,i,n,r)}return e(s,t),s.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,target:this.m_targetA,maxForce:this.m_maxForce,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,_localAnchorB:this.m_localAnchorB}},s._deserialize=function(t,e,o){(t=i({},t)).bodyA=o(Zt,t.bodyA,e),t.bodyB=o(Zt,t.bodyB,e),t.target=f.clone(t.target);var n=new s(t);return t._localAnchorB&&(n.m_localAnchorB=t._localAnchorB),n},s.prototype._reset=function(t){Number.isFinite(t.maxForce)&&(this.m_maxForce=t.maxForce),Number.isFinite(t.frequencyHz)&&(this.m_frequencyHz=t.frequencyHz),Number.isFinite(t.dampingRatio)&&(this.m_dampingRatio=t.dampingRatio)},s.prototype.setTarget=function(t){f.areEqual(t,this.m_targetA)||(this.m_bodyB.setAwake(!0),this.m_targetA.set(t))},s.prototype.getTarget=function(){return this.m_targetA},s.prototype.setMaxForce=function(t){this.m_maxForce=t},s.prototype.getMaxForce=function(){return this.m_maxForce},s.prototype.setFrequency=function(t){this.m_frequencyHz=t},s.prototype.getFrequency=function(){return this.m_frequencyHz},s.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},s.prototype.getDampingRatio=function(){return this.m_dampingRatio},s.prototype.getAnchorA=function(){return f.clone(this.m_targetA)},s.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},s.prototype.getReactionForce=function(t){return f.mulNumVec2(t,this.m_impulse)},s.prototype.getReactionTorque=function(t){return 0*t},s.prototype.shiftOrigin=function(t){this.m_targetA.sub(t)},s.prototype.initVelocityConstraints=function(t){this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyB.c_position,i=this.m_bodyB.c_velocity,o=e.c,s=e.a,n=i.v,r=i.w,a=gt.neo(s),m=this.m_bodyB.getMass(),h=2*cs*this.m_frequencyHz,c=2*m*this.m_dampingRatio*h,_=m*(h*h),l=t.dt;this.m_gamma=l*(c+l*_),0!=this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=l*_*this.m_gamma,this.m_rB=gt.mulVec2(a,f.sub(this.m_localAnchorB,this.m_localCenterB));var u=new hi;u.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,u.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,u.ey.x=u.ex.y,u.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,this.m_mass=u.getInverse(),this.m_C.setVec2(o),this.m_C.addCombine(1,this.m_rB,-1,this.m_targetA),this.m_C.mul(this.m_beta),r*=.98,t.warmStarting?(this.m_impulse.mul(t.dtRatio),n.addMul(this.m_invMassB,this.m_impulse),r+=this.m_invIB*f.crossVec2Vec2(this.m_rB,this.m_impulse)):this.m_impulse.setZero(),i.v.setVec2(n),i.w=r},s.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyB.c_velocity,i=f.clone(e.v),o=e.w,s=f.crossNumVec2(o,this.m_rB);s.add(i),s.addCombine(1,this.m_C,this.m_gamma,this.m_impulse),s.neg();var n=hi.mulVec2(this.m_mass,s),r=f.clone(this.m_impulse);this.m_impulse.add(n);var a=t.dt*this.m_maxForce;this.m_impulse.clamp(a),n=f.sub(this.m_impulse,r),i.addMul(this.m_invMassB,n),o+=this.m_invIB*f.crossVec2Vec2(this.m_rB,n),e.v.setVec2(i),e.w=o},s.prototype.solvePositionConstraints=function(t){return!0},s.TYPE="mouse-joint",s}(Xt);exports.MouseJoint=ls;var us=Math.abs,ps={collideConnected:!0},ys=function(t){function s(e,i,n,r,a,m,h,c){var _=this;return _ instanceof s?(e=o(e,ps),i=(_=t.call(this,e,i,n)||this).m_bodyA,n=_.m_bodyB,_.m_type=s.TYPE,_.m_groundAnchorA=f.clone(r||(e.groundAnchorA||f.neo(-1,1))),_.m_groundAnchorB=f.clone(a||(e.groundAnchorB||f.neo(1,1))),_.m_localAnchorA=f.clone(m?i.getLocalPoint(m):e.localAnchorA||f.neo(-1,0)),_.m_localAnchorB=f.clone(h?n.getLocalPoint(h):e.localAnchorB||f.neo(1,0)),_.m_lengthA=Number.isFinite(e.lengthA)?e.lengthA:f.distance(m,r),_.m_lengthB=Number.isFinite(e.lengthB)?e.lengthB:f.distance(h,a),_.m_ratio=Number.isFinite(c)?c:e.ratio,_.m_constant=_.m_lengthA+_.m_ratio*_.m_lengthB,_.m_impulse=0,_):new s(e,i,n,r,a,m,h,c)}return e(s,t),s.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,groundAnchorA:this.m_groundAnchorA,groundAnchorB:this.m_groundAnchorB,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,lengthA:this.m_lengthA,lengthB:this.m_lengthB,ratio:this.m_ratio}},s._deserialize=function(t,e,o){return(t=i({},t)).bodyA=o(Zt,t.bodyA,e),t.bodyB=o(Zt,t.bodyB,e),new s(t)},s.prototype._reset=function(t){f.isValid(t.groundAnchorA)&&this.m_groundAnchorA.set(t.groundAnchorA),f.isValid(t.groundAnchorB)&&this.m_groundAnchorB.set(t.groundAnchorB),f.isValid(t.localAnchorA)?this.m_localAnchorA.set(t.localAnchorA):f.isValid(t.anchorA)&&this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)),f.isValid(t.localAnchorB)?this.m_localAnchorB.set(t.localAnchorB):f.isValid(t.anchorB)&&this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)),Number.isFinite(t.lengthA)&&(this.m_lengthA=t.lengthA),Number.isFinite(t.lengthB)&&(this.m_lengthB=t.lengthB),Number.isFinite(t.ratio)&&(this.m_ratio=t.ratio)},s.prototype.getGroundAnchorA=function(){return this.m_groundAnchorA},s.prototype.getGroundAnchorB=function(){return this.m_groundAnchorB},s.prototype.getLengthA=function(){return this.m_lengthA},s.prototype.getLengthB=function(){return this.m_lengthB},s.prototype.getRatio=function(){return this.m_ratio},s.prototype.getCurrentLengthA=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_groundAnchorA;return f.distance(t,e)},s.prototype.getCurrentLengthB=function(){var t=this.m_bodyB.getWorldPoint(this.m_localAnchorB),e=this.m_groundAnchorB;return f.distance(t,e)},s.prototype.shiftOrigin=function(t){this.m_groundAnchorA.sub(t),this.m_groundAnchorB.sub(t)},s.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},s.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},s.prototype.getReactionForce=function(t){return f.mulNumVec2(this.m_impulse,this.m_uB).mul(t)},s.prototype.getReactionTorque=function(t){return 0},s.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,o=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,m=this.m_bodyB.c_velocity.w,h=gt.neo(i),c=gt.neo(r);this.m_rA=gt.mulVec2(h,f.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=gt.mulVec2(c,f.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_uA=f.sub(f.add(e,this.m_rA),this.m_groundAnchorA),this.m_uB=f.sub(f.add(n,this.m_rB),this.m_groundAnchorB);var _=this.m_uA.length(),l=this.m_uB.length();_>10*B.linearSlop?this.m_uA.mul(1/_):this.m_uA.setZero(),l>10*B.linearSlop?this.m_uB.mul(1/l):this.m_uB.setZero();var u=f.crossVec2Vec2(this.m_rA,this.m_uA),p=f.crossVec2Vec2(this.m_rB,this.m_uB),y=this.m_invMassA+this.m_invIA*u*u,d=this.m_invMassB+this.m_invIB*p*p;if(this.m_mass=y+this.m_ratio*this.m_ratio*d,this.m_mass>0&&(this.m_mass=1/this.m_mass),t.warmStarting){this.m_impulse*=t.dtRatio;var v=f.mulNumVec2(-this.m_impulse,this.m_uA),x=f.mulNumVec2(-this.m_ratio*this.m_impulse,this.m_uB);o.addMul(this.m_invMassA,v),s+=this.m_invIA*f.crossVec2Vec2(this.m_rA,v),a.addMul(this.m_invMassB,x),m+=this.m_invIB*f.crossVec2Vec2(this.m_rB,x)}else this.m_impulse=0;this.m_bodyA.c_velocity.v=o,this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v=a,this.m_bodyB.c_velocity.w=m},s.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,n=f.add(e,f.crossNumVec2(i,this.m_rA)),r=f.add(o,f.crossNumVec2(s,this.m_rB)),a=-f.dot(this.m_uA,n)-this.m_ratio*f.dot(this.m_uB,r),m=-this.m_mass*a;this.m_impulse+=m;var h=f.mulNumVec2(-m,this.m_uA),c=f.mulNumVec2(-this.m_ratio*m,this.m_uB);e.addMul(this.m_invMassA,h),i+=this.m_invIA*f.crossVec2Vec2(this.m_rA,h),o.addMul(this.m_invMassB,c),s+=this.m_invIB*f.crossVec2Vec2(this.m_rB,c),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},s.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,n=gt.neo(i),r=gt.neo(s),a=gt.mulVec2(n,f.sub(this.m_localAnchorA,this.m_localCenterA)),m=gt.mulVec2(r,f.sub(this.m_localAnchorB,this.m_localCenterB)),h=f.sub(f.add(e,this.m_rA),this.m_groundAnchorA),c=f.sub(f.add(o,this.m_rB),this.m_groundAnchorB),_=h.length(),l=c.length();_>10*B.linearSlop?h.mul(1/_):h.setZero(),l>10*B.linearSlop?c.mul(1/l):c.setZero();var u=f.crossVec2Vec2(a,h),p=f.crossVec2Vec2(m,c),y=this.m_invMassA+this.m_invIA*u*u,d=this.m_invMassB+this.m_invIB*p*p,v=y+this.m_ratio*this.m_ratio*d;v>0&&(v=1/v);var x=this.m_constant-_-this.m_ratio*l,A=us(x),g=-v*x,b=f.mulNumVec2(-g,h),w=f.mulNumVec2(-this.m_ratio*g,c);return e.addMul(this.m_invMassA,b),i+=this.m_invIA*f.crossVec2Vec2(a,b),o.addMul(this.m_invMassB,w),s+=this.m_invIB*f.crossVec2Vec2(m,w),this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c=o,this.m_bodyB.c_position.a=s,A<B.linearSlop},s.TYPE="pulley-joint",s}(Xt);exports.PulleyJoint=ys;var ds,fs=Math.min;!function(t){t[t.inactiveLimit=0]="inactiveLimit",t[t.atLowerLimit=1]="atLowerLimit",t[t.atUpperLimit=2]="atUpperLimit",t[t.equalLimits=3]="equalLimits"}(ds||(ds={}));var vs={maxLength:0},xs=function(t){function s(e,i,n,r){var a=this;return a instanceof s?(e=o(e,vs),i=(a=t.call(this,e,i,n)||this).m_bodyA,n=a.m_bodyB,a.m_type=s.TYPE,a.m_localAnchorA=f.clone(r?i.getLocalPoint(r):e.localAnchorA||f.neo(-1,0)),a.m_localAnchorB=f.clone(r?n.getLocalPoint(r):e.localAnchorB||f.neo(1,0)),a.m_maxLength=e.maxLength,a.m_mass=0,a.m_impulse=0,a.m_length=0,a.m_state=ds.inactiveLimit,a):new s(e,i,n,r)}return e(s,t),s.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,maxLength:this.m_maxLength}},s._deserialize=function(t,e,o){return(t=i({},t)).bodyA=o(Zt,t.bodyA,e),t.bodyB=o(Zt,t.bodyB,e),new s(t)},s.prototype._reset=function(t){Number.isFinite(t.maxLength)&&(this.m_maxLength=t.maxLength)},s.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},s.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},s.prototype.setMaxLength=function(t){this.m_maxLength=t},s.prototype.getMaxLength=function(){return this.m_maxLength},s.prototype.getLimitState=function(){return this.m_state},s.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},s.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},s.prototype.getReactionForce=function(t){return f.mulNumVec2(this.m_impulse,this.m_u).mul(t)},s.prototype.getReactionTorque=function(t){return 0},s.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,o=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,m=this.m_bodyB.c_velocity.w,h=gt.neo(i),c=gt.neo(r);this.m_rA=gt.mulSub(h,this.m_localAnchorA,this.m_localCenterA),this.m_rB=gt.mulSub(c,this.m_localAnchorB,this.m_localCenterB),this.m_u=f.zero(),this.m_u.addCombine(1,n,1,this.m_rB),this.m_u.subCombine(1,e,1,this.m_rA),this.m_length=this.m_u.length();var _=this.m_length-this.m_maxLength;if(this.m_state=_>0?ds.atUpperLimit:ds.inactiveLimit,!(this.m_length>B.linearSlop))return this.m_u.setZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.mul(1/this.m_length);var l=f.crossVec2Vec2(this.m_rA,this.m_u),u=f.crossVec2Vec2(this.m_rB,this.m_u),p=this.m_invMassA+this.m_invIA*l*l+this.m_invMassB+this.m_invIB*u*u;if(this.m_mass=0!=p?1/p:0,t.warmStarting){this.m_impulse*=t.dtRatio;var y=f.mulNumVec2(this.m_impulse,this.m_u);o.subMul(this.m_invMassA,y),s-=this.m_invIA*f.crossVec2Vec2(this.m_rA,y),a.addMul(this.m_invMassB,y),m+=this.m_invIB*f.crossVec2Vec2(this.m_rB,y)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.setVec2(o),this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v.setVec2(a),this.m_bodyB.c_velocity.w=m},s.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,n=f.addCrossNumVec2(e,i,this.m_rA),r=f.addCrossNumVec2(o,s,this.m_rB),a=this.m_length-this.m_maxLength,m=f.dot(this.m_u,f.sub(r,n));a<0&&(m+=t.inv_dt*a);var h=-this.m_mass*m,c=this.m_impulse;this.m_impulse=fs(0,this.m_impulse+h),h=this.m_impulse-c;var _=f.mulNumVec2(h,this.m_u);e.subMul(this.m_invMassA,_),i-=this.m_invIA*f.crossVec2Vec2(this.m_rA,_),o.addMul(this.m_invMassB,_),s+=this.m_invIB*f.crossVec2Vec2(this.m_rB,_),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},s.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,n=gt.neo(i),r=gt.neo(s),a=gt.mulSub(n,this.m_localAnchorA,this.m_localCenterA),m=gt.mulSub(r,this.m_localAnchorB,this.m_localCenterB),h=f.zero();h.addCombine(1,o,1,m),h.subCombine(1,e,1,a);var _=h.normalize(),l=_-this.m_maxLength;l=c(l,0,B.maxLinearCorrection);var u=-this.m_mass*l,p=f.mulNumVec2(u,h);return e.subMul(this.m_invMassA,p),i-=this.m_invIA*f.crossVec2Vec2(a,p),o.addMul(this.m_invMassB,p),s+=this.m_invIB*f.crossVec2Vec2(m,p),this.m_bodyA.c_position.c.setVec2(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.setVec2(o),this.m_bodyB.c_position.a=s,_-this.m_maxLength<B.linearSlop},s.TYPE="rope-joint",s}(Xt);exports.RopeJoint=xs;var As=Math.abs,gs=Math.PI,bs={frequencyHz:0,dampingRatio:0},Bs=function(t){function s(e,i,n,r){var a=this;return a instanceof s?(e=o(e,bs),i=(a=t.call(this,e,i,n)||this).m_bodyA,n=a.m_bodyB,a.m_type=s.TYPE,a.m_localAnchorA=f.clone(r?i.getLocalPoint(r):e.localAnchorA||f.zero()),a.m_localAnchorB=f.clone(r?n.getLocalPoint(r):e.localAnchorB||f.zero()),a.m_referenceAngle=Number.isFinite(e.referenceAngle)?e.referenceAngle:n.getAngle()-i.getAngle(),a.m_frequencyHz=e.frequencyHz,a.m_dampingRatio=e.dampingRatio,a.m_impulse=new yo,a.m_bias=0,a.m_gamma=0,a.m_rA,a.m_rB,a.m_localCenterA,a.m_localCenterB,a.m_invMassA,a.m_invMassB,a.m_invIA,a.m_invIB,a.m_mass=new Ko,a):new s(e,i,n,r)}return e(s,t),s.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,referenceAngle:this.m_referenceAngle}},s._deserialize=function(t,e,o){return(t=i({},t)).bodyA=o(Zt,t.bodyA,e),t.bodyB=o(Zt,t.bodyB,e),new s(t)},s.prototype._reset=function(t){t.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.setVec2(t.localAnchorA),t.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.setVec2(t.localAnchorB),Number.isFinite(t.frequencyHz)&&(this.m_frequencyHz=t.frequencyHz),Number.isFinite(t.dampingRatio)&&(this.m_dampingRatio=t.dampingRatio)},s.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},s.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},s.prototype.getReferenceAngle=function(){return this.m_referenceAngle},s.prototype.setFrequency=function(t){this.m_frequencyHz=t},s.prototype.getFrequency=function(){return this.m_frequencyHz},s.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},s.prototype.getDampingRatio=function(){return this.m_dampingRatio},s.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},s.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},s.prototype.getReactionForce=function(t){return f.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},s.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},s.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_position.a,n=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,a=gt.neo(e),m=gt.neo(s);this.m_rA=gt.mulVec2(a,f.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=gt.mulVec2(m,f.sub(this.m_localAnchorB,this.m_localCenterB));var h=this.m_invMassA,c=this.m_invMassB,_=this.m_invIA,l=this.m_invIB,u=new Ko;if(u.ex.x=h+c+this.m_rA.y*this.m_rA.y*_+this.m_rB.y*this.m_rB.y*l,u.ey.x=-this.m_rA.y*this.m_rA.x*_-this.m_rB.y*this.m_rB.x*l,u.ez.x=-this.m_rA.y*_-this.m_rB.y*l,u.ex.y=u.ey.x,u.ey.y=h+c+this.m_rA.x*this.m_rA.x*_+this.m_rB.x*this.m_rB.x*l,u.ez.y=this.m_rA.x*_+this.m_rB.x*l,u.ex.z=u.ez.x,u.ey.z=u.ez.y,u.ez.z=_+l,this.m_frequencyHz>0){u.getInverse22(this.m_mass);var p=_+l,y=p>0?1/p:0,d=s-e-this.m_referenceAngle,v=2*gs*this.m_frequencyHz,x=2*y*this.m_dampingRatio*v,A=y*v*v,g=t.dt;this.m_gamma=g*(x+g*A),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=d*g*A*this.m_gamma,p+=this.m_gamma,this.m_mass.ez.z=0!=p?1/p:0}else 0==u.ez.z?(u.getInverse22(this.m_mass),this.m_gamma=0,this.m_bias=0):(u.getSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0);if(t.warmStarting){this.m_impulse.mul(t.dtRatio);var b=f.neo(this.m_impulse.x,this.m_impulse.y);i.subMul(h,b),o-=_*(f.crossVec2Vec2(this.m_rA,b)+this.m_impulse.z),n.addMul(c,b),r+=l*(f.crossVec2Vec2(this.m_rB,b)+this.m_impulse.z)}else this.m_impulse.setZero();this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=r},s.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,n=this.m_invMassA,r=this.m_invMassB,a=this.m_invIA,m=this.m_invIB;if(this.m_frequencyHz>0){var h=s-i,c=-this.m_mass.ez.z*(h+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=c,i-=a*c,s+=m*c,(u=f.zero()).addCombine(1,o,1,f.crossNumVec2(s,this.m_rB)),u.subCombine(1,e,1,f.crossNumVec2(i,this.m_rA));var _=f.neg(Ko.mulVec2(this.m_mass,u));this.m_impulse.x+=_.x,this.m_impulse.y+=_.y;var l=f.clone(_);e.subMul(n,l),i-=a*f.crossVec2Vec2(this.m_rA,l),o.addMul(r,l),s+=m*f.crossVec2Vec2(this.m_rB,l)}else{var u;(u=f.zero()).addCombine(1,o,1,f.crossNumVec2(s,this.m_rB)),u.subCombine(1,e,1,f.crossNumVec2(i,this.m_rA));h=s-i;var p=new yo(u.x,u.y,h),y=yo.neg(Ko.mulVec3(this.m_mass,p));this.m_impulse.add(y);l=f.neo(y.x,y.y);e.subMul(n,l),i-=a*(f.crossVec2Vec2(this.m_rA,l)+y.z),o.addMul(r,l),s+=m*(f.crossVec2Vec2(this.m_rB,l)+y.z)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},s.prototype.solvePositionConstraints=function(t){var e,i,o=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,a=gt.neo(s),m=gt.neo(r),h=this.m_invMassA,c=this.m_invMassB,_=this.m_invIA,l=this.m_invIB,u=gt.mulVec2(a,f.sub(this.m_localAnchorA,this.m_localCenterA)),p=gt.mulVec2(m,f.sub(this.m_localAnchorB,this.m_localCenterB)),y=new Ko;if(y.ex.x=h+c+u.y*u.y*_+p.y*p.y*l,y.ey.x=-u.y*u.x*_-p.y*p.x*l,y.ez.x=-u.y*_-p.y*l,y.ex.y=y.ey.x,y.ey.y=h+c+u.x*u.x*_+p.x*p.x*l,y.ez.y=u.x*_+p.x*l,y.ex.z=y.ez.x,y.ey.z=y.ez.y,y.ez.z=_+l,this.m_frequencyHz>0){(v=f.zero()).addCombine(1,n,1,p),v.subCombine(1,o,1,u),e=v.length(),i=0;var d=f.neg(y.solve22(v));o.subMul(h,d),s-=_*f.crossVec2Vec2(u,d),n.addMul(c,d),r+=l*f.crossVec2Vec2(p,d)}else{var v;(v=f.zero()).addCombine(1,n,1,p),v.subCombine(1,o,1,u);var x=r-s-this.m_referenceAngle;e=v.length(),i=As(x);var A=new yo(v.x,v.y,x),g=new yo;if(y.ez.z>0)g=yo.neg(y.solve33(A));else{var b=f.neg(y.solve22(v));g.set(b.x,b.y,0)}d=f.neo(g.x,g.y);o.subMul(h,d),s-=_*(f.crossVec2Vec2(u,d)+g.z),n.addMul(c,d),r+=l*(f.crossVec2Vec2(p,d)+g.z)}return this.m_bodyA.c_position.c=o,this.m_bodyA.c_position.a=s,this.m_bodyB.c_position.c=n,this.m_bodyB.c_position.a=r,e<=B.linearSlop&&i<=B.angularSlop},s.TYPE="weld-joint",s}(Xt);exports.WeldJoint=Bs;var ws=Math.abs,Vs=Math.PI,Cs={enableMotor:!1,maxMotorTorque:0,motorSpeed:0,frequencyHz:2,dampingRatio:.7},Ms=function(t){function s(e,i,n,r,a){var m=this;return m instanceof s?(e=o(e,Cs),i=(m=t.call(this,e,i,n)||this).m_bodyA,n=m.m_bodyB,m.m_ax=f.zero(),m.m_ay=f.zero(),m.m_type=s.TYPE,m.m_localAnchorA=f.clone(r?i.getLocalPoint(r):e.localAnchorA||f.zero()),m.m_localAnchorB=f.clone(r?n.getLocalPoint(r):e.localAnchorB||f.zero()),f.isValid(a)?m.m_localXAxisA=i.getLocalVector(a):f.isValid(e.localAxisA)?m.m_localXAxisA=f.clone(e.localAxisA):f.isValid(e.localAxis)?m.m_localXAxisA=f.clone(e.localAxis):m.m_localXAxisA=f.neo(1,0),m.m_localYAxisA=f.crossNumVec2(1,m.m_localXAxisA),m.m_mass=0,m.m_impulse=0,m.m_motorMass=0,m.m_motorImpulse=0,m.m_springMass=0,m.m_springImpulse=0,m.m_maxMotorTorque=e.maxMotorTorque,m.m_motorSpeed=e.motorSpeed,m.m_enableMotor=e.enableMotor,m.m_frequencyHz=e.frequencyHz,m.m_dampingRatio=e.dampingRatio,m.m_bias=0,m.m_gamma=0,m):new s(e,i,n,r,a)}return e(s,t),s.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,enableMotor:this.m_enableMotor,maxMotorTorque:this.m_maxMotorTorque,motorSpeed:this.m_motorSpeed,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,localAxisA:this.m_localXAxisA}},s._deserialize=function(t,e,o){return(t=i({},t)).bodyA=o(Zt,t.bodyA,e),t.bodyB=o(Zt,t.bodyB,e),new s(t)},s.prototype._reset=function(t){t.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.setVec2(t.localAnchorA),t.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.setVec2(t.localAnchorB),t.localAxisA&&(this.m_localXAxisA.setVec2(t.localAxisA),this.m_localYAxisA.setVec2(f.crossNumVec2(1,t.localAxisA))),void 0!==t.enableMotor&&(this.m_enableMotor=t.enableMotor),Number.isFinite(t.maxMotorTorque)&&(this.m_maxMotorTorque=t.maxMotorTorque),Number.isFinite(t.motorSpeed)&&(this.m_motorSpeed=t.motorSpeed),Number.isFinite(t.frequencyHz)&&(this.m_frequencyHz=t.frequencyHz),Number.isFinite(t.dampingRatio)&&(this.m_dampingRatio=t.dampingRatio)},s.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},s.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},s.prototype.getLocalAxisA=function(){return this.m_localXAxisA},s.prototype.getJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.getWorldPoint(this.m_localAnchorA),o=e.getWorldPoint(this.m_localAnchorB),s=f.sub(o,i),n=t.getWorldVector(this.m_localXAxisA);return f.dot(s,n)},s.prototype.getJointSpeed=function(){var t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-t},s.prototype.isMotorEnabled=function(){return this.m_enableMotor},s.prototype.enableMotor=function(t){t!=this.m_enableMotor&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t)},s.prototype.setMotorSpeed=function(t){t!=this.m_motorSpeed&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t)},s.prototype.getMotorSpeed=function(){return this.m_motorSpeed},s.prototype.setMaxMotorTorque=function(t){t!=this.m_maxMotorTorque&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t)},s.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},s.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},s.prototype.setSpringFrequencyHz=function(t){this.m_frequencyHz=t},s.prototype.getSpringFrequencyHz=function(){return this.m_frequencyHz},s.prototype.setSpringDampingRatio=function(t){this.m_dampingRatio=t},s.prototype.getSpringDampingRatio=function(){return this.m_dampingRatio},s.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},s.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},s.prototype.getReactionForce=function(t){return f.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax).mul(t)},s.prototype.getReactionTorque=function(t){return t*this.m_motorImpulse},s.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_invMassA,i=this.m_invMassB,o=this.m_invIA,s=this.m_invIB,n=this.m_bodyA.c_position.c,r=this.m_bodyA.c_position.a,a=this.m_bodyA.c_velocity.v,m=this.m_bodyA.c_velocity.w,h=this.m_bodyB.c_position.c,c=this.m_bodyB.c_position.a,_=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,u=gt.neo(r),p=gt.neo(c),y=gt.mulVec2(u,f.sub(this.m_localAnchorA,this.m_localCenterA)),d=gt.mulVec2(p,f.sub(this.m_localAnchorB,this.m_localCenterB)),v=f.zero();if(v.addCombine(1,h,1,d),v.subCombine(1,n,1,y),this.m_ay=gt.mulVec2(u,this.m_localYAxisA),this.m_sAy=f.crossVec2Vec2(f.add(v,y),this.m_ay),this.m_sBy=f.crossVec2Vec2(d,this.m_ay),this.m_mass=e+i+o*this.m_sAy*this.m_sAy+s*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){this.m_ax=gt.mulVec2(u,this.m_localXAxisA),this.m_sAx=f.crossVec2Vec2(f.add(v,y),this.m_ax),this.m_sBx=f.crossVec2Vec2(d,this.m_ax);var x=e+i+o*this.m_sAx*this.m_sAx+s*this.m_sBx*this.m_sBx;if(x>0){this.m_springMass=1/x;var A=f.dot(v,this.m_ax),g=2*Vs*this.m_frequencyHz,b=2*this.m_springMass*this.m_dampingRatio*g,B=this.m_springMass*g*g,w=t.dt;this.m_gamma=w*(b+w*B),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=A*w*B*this.m_gamma,this.m_springMass=x+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=o+s,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),t.warmStarting){this.m_impulse*=t.dtRatio,this.m_springImpulse*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var V=f.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax),C=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,M=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;a.subMul(this.m_invMassA,V),m-=this.m_invIA*C,_.addMul(this.m_invMassB,V),l+=this.m_invIB*M}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.setVec2(a),this.m_bodyA.c_velocity.w=m,this.m_bodyB.c_velocity.v.setVec2(_),this.m_bodyB.c_velocity.w=l},s.prototype.solveVelocityConstraints=function(t){var e=this.m_invMassA,i=this.m_invMassB,o=this.m_invIA,s=this.m_invIB,n=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,a=this.m_bodyB.c_velocity.v,m=this.m_bodyB.c_velocity.w,h=f.dot(this.m_ax,a)-f.dot(this.m_ax,n)+this.m_sBx*m-this.m_sAx*r,_=-this.m_springMass*(h+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=_;var l=f.mulNumVec2(_,this.m_ax),u=_*this.m_sAx,p=_*this.m_sBx;n.subMul(e,l),r-=o*u,a.addMul(i,l);h=(m+=s*p)-r-this.m_motorSpeed,_=-this.m_motorMass*h;var y=this.m_motorImpulse,d=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=c(this.m_motorImpulse+_,-d,d),r-=o*(_=this.m_motorImpulse-y),m+=s*_;h=f.dot(this.m_ay,a)-f.dot(this.m_ay,n)+this.m_sBy*m-this.m_sAy*r,_=-this.m_mass*h;this.m_impulse+=_;l=f.mulNumVec2(_,this.m_ay),u=_*this.m_sAy,p=_*this.m_sBy;n.subMul(e,l),r-=o*u,a.addMul(i,l),m+=s*p,this.m_bodyA.c_velocity.v.setVec2(n),this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v.setVec2(a),this.m_bodyB.c_velocity.w=m},s.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,n=gt.neo(i),r=gt.neo(s),a=gt.mulVec2(n,f.sub(this.m_localAnchorA,this.m_localCenterA)),m=gt.mulVec2(r,f.sub(this.m_localAnchorB,this.m_localCenterB)),h=f.zero();h.addCombine(1,o,1,m),h.subCombine(1,e,1,a);var c=gt.mulVec2(n,this.m_localYAxisA),_=f.crossVec2Vec2(f.add(h,a),c),l=f.crossVec2Vec2(m,c),u=f.dot(h,c),p=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy,y=0!=p?-u/p:0,d=f.mulNumVec2(y,c),v=y*_,x=y*l;return e.subMul(this.m_invMassA,d),i-=this.m_invIA*v,o.addMul(this.m_invMassB,d),s+=this.m_invIB*x,this.m_bodyA.c_position.c.setVec2(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.setVec2(o),this.m_bodyB.c_position.a=s,ws(u)<=B.linearSlop},s.TYPE="wheel-joint",s}(Xt);exports.WheelJoint=Ms;var Is=0;function Ps(t){var e,o=(t=t||{}).rootClass||po,s=t.preSerialize||function(t){return t},n=t.postSerialize||function(t,e){return t},r=t.preDeserialize||function(t){return t},a=t.postDeserialize||function(t,e){return t},m={World:po,Body:Zt,Joint:Xt,Fixture:Dt,Shape:Tt},h=i({Vec2:f,Vec3:yo},m),c=((e={})[Zt.STATIC]=Zt,e[Zt.DYNAMIC]=Zt,e[Zt.KINEMATIC]=Zt,e[Bo.TYPE]=Bo,e[No.TYPE]=No,e[xo.TYPE]=xo,e[Fo.TYPE]=Fo,e[Oo.TYPE]=Oo,e[Ho.TYPE]=Ho,e[Zo.TYPE]=Zo,e[as.TYPE]=as,e[hs.TYPE]=hs,e[ls.TYPE]=ls,e[ns.TYPE]=ns,e[ys.TYPE]=ys,e[$o.TYPE]=$o,e[xs.TYPE]=xs,e[Bs.TYPE]=Bs,e[Ms.TYPE]=Ms,e);this.toJson=function(t){var e=[],i=[t],o={};function r(t,s){if(t.__sid=t.__sid||++Is,!o[t.__sid]){i.push(t);var n={refIndex:e.length+i.length,refType:s};o[t.__sid]=n}return o[t.__sid]}function a(t,e){if("object"!=typeof t||null===t)return t;if("function"==typeof t._serialize){if(t!==e)for(var i in m)if(t instanceof m[i])return r(t,i);h=(o=s(o=t))._serialize(),t=h=n(h,o)}var o,h;if(Array.isArray(t)){for(var c=[],_=0;_<t.length;_++)c[_]=a(t[_]);t=c}else{c={};for(var _ in t)t.hasOwnProperty(_)&&(c[_]=a(t[_]));t=c}return t}for(;i.length;){var h=i.shift(),c=a(h,h);e.push(c)}return e},this.fromJson=function(t){var e={};function i(t,e,i){var o=function(t,e){return e&&e._deserialize||(e=c[t.type]),e&&e._deserialize}(e,t);if(o){var n=o(e=r(e),i,s);return n=a(n,e)}}function s(o,s,n){if(!s.refIndex)return o&&o._deserialize&&i(o,s,n);o=h[s.refType]||o;var r=s.refIndex;if(!e[r]){var a=i(o,t[r],n);e[r]=a}return e[r]}return o._deserialize(t[0],null,s)}}var Ss=new Ps;Ps.toJson=Ss.toJson,Ps.fromJson=Ss.fromJson;var zs=function(){function t(){this.width=80,this.height=60,this.x=0,this.y=-10,this.scaleY=-1,this.hz=60,this.speed=1,this.ratio=16,this.background="#222222",this.activeKeys={},this.step=function(t,e){},this.keydown=function(t,e){},this.keyup=function(t,e){},this.statusText="",this.statusMap={}}return t.mount=function(t){throw new Error("Not implemented")},t.start=function(e){var i=t.mount();return i.start(e),i},t.prototype.status=function(t,e){if(void 0!==e){var i=t,o=e;"function"!=typeof o&&"object"!=typeof o&&(this.statusMap[i]=o)}else if(t&&"object"==typeof t)for(var s in t){var n=t[s];"function"!=typeof n&&"object"!=typeof n&&(this.statusMap[s]=n)}else"string"==typeof t&&(this.statusText=t);var r=this.statusText||"";for(var a in this.statusMap){var m=this.statusMap[a];"function"!=typeof m&&(r+=(r&&"\n")+a+": "+m)}this._status(r)},t.prototype.info=function(t){this._info(t)},t.prototype.color=function(t,e,i){return"rgb("+(t=256*t|0)+", "+(e=256*e|0)+", "+(i=256*i|0)+")"},t}();function Ts(t,e){var i,o;"function"==typeof t?(i=t,o=e):"function"==typeof e?(i=e,o=t):o=null!=t?t:e;var s=zs.mount(o);if(!i)return s;var n=i(s)||s.world;s.start(n)}function Fs(t,e,i,o,s,n,r){Ns(t,i.getShape(),e,n.getShape(),s)}exports.Testbed=zs,lo.addType(Oo.TYPE,Oo.TYPE,Fs);var Ls=k(0,0),qs=k(0,0),Ns=function(t,e,i,o,s){t.pointCount=0,pt(Ls,i,e.m_p),pt(qs,s,o.m_p);var n=at(qs,Ls),r=e.m_radius+o.m_radius;n>r*r||(t.type=ci.e_circles,R(t.localPoint,e.m_p),O(t.localNormal),t.pointCount=1,R(t.points[0].localPoint,o.m_p),t.points[0].id.setFeatures(0,_i.e_vertex,0,_i.e_vertex))};function ks(t,e,i,o,s,n,r){var a=i.getShape(),m=n.getShape();Ws(t,a,e,m,s)}function Ds(t,e,i,o,s,n,r){var a=i.getShape(),m=new xo;a.getChildEdge(m,o);var h=m,c=n.getShape();Ws(t,h,e,c,s)}exports.CollideCircles=Ns,lo.addType(xo.TYPE,Oo.TYPE,ks),lo.addType(Bo.TYPE,Oo.TYPE,Ds);var js=k(0,0),Rs=k(0,0),Os=k(0,0),Es=k(0,0),Js=k(0,0),Ys=k(0,0),Ws=function(t,e,i,o,s){t.pointCount=0,dt(Es,s,i,o.m_p);var n=e.m_vertex1,r=e.m_vertex2;H(js,r,n);var a=st(js,r)-st(js,Es),m=st(js,Es)-st(js,n),h=e.m_radius+o.m_radius;if(m<=0){if(R(Js,n),at(Es,n)>h*h)return;if(e.m_hasVertex0){var c=e.m_vertex0,_=n;if(H(Rs,_,c),st(Rs,_)-st(Rs,Es)>0)return}return t.type=ci.e_circles,O(t.localNormal),R(t.localPoint,Js),t.pointCount=1,R(t.points[0].localPoint,o.m_p),void t.points[0].id.setFeatures(0,_i.e_vertex,0,_i.e_vertex)}if(a<=0){if(R(Js,r),at(Es,Js)>h*h)return;if(e.m_hasVertex3){var l=e.m_vertex3,u=r;if(H(Os,l,u),st(Os,Es)-st(Os,u)>0)return}return t.type=ci.e_circles,O(t.localNormal),R(t.localPoint,Js),t.pointCount=1,R(t.points[0].localPoint,o.m_p),void t.points[0].id.setFeatures(1,_i.e_vertex,0,_i.e_vertex)}var p=nt(js);G(Js,a/p,n,m/p,r),at(Es,Js)>h*h||(it(Ys,1,js),st(Ys,Es)-st(Ys,n)<0&&E(Ys),tt(Ys),t.type=ci.e_faceA,R(t.localNormal,Ys),R(t.localPoint,n),t.pointCount=1,R(t.points[0].localPoint,o.m_p),t.points[0].id.setFeatures(0,_i.e_face,0,_i.e_vertex))};exports.CollideEdgeCircle=Ws;var Hs=[new bi,new bi],Us=[new bi,new bi],Zs=[new bi,new bi],Ks=k(0,0),Xs=k(0,0),Gs=k(0,0),Qs=lt(0,0,0),$s=k(0,0),tn=k(0,0),en=k(0,0),on=k(0,0),sn=k(0,0),nn=k(0,0),rn=k(0,0),an=k(0,0);function mn(t,e,i,o,s,n,r){ln(t,i.getShape(),e,n.getShape(),s)}function hn(t,e,i,o,s){var n=t.m_count,r=i.m_count,a=t.m_normals,m=t.m_vertices,h=i.m_vertices;ft(Qs,o,e);for(var c=0,_=-1/0,l=0;l<n;++l){ht(Gs,Qs.q,a[l]),pt(Xs,Qs,m[l]);for(var u=1/0,p=0;p<r;++p){var y=st(Gs,h[p])-st(Gs,Xs);y<u&&(u=y)}u>_&&(_=u,c=l)}s.maxSeparation=_,s.bestIndex=c}function cn(t,e,i,o,s,n){var r=e.m_normals,a=s.m_count,m=s.m_vertices,h=s.m_normals;_t(an,n.q,i.q,r[o]);for(var c=0,_=1/0,l=0;l<a;++l){var u=st(an,h[l]);u<_&&(_=u,c=l)}var p=c,y=p+1<a?p+1:0;pt(t[0].v,n,m[p]),t[0].id.setFeatures(o,_i.e_face,p,_i.e_vertex),pt(t[1].v,n,m[y]),t[1].id.setFeatures(o,_i.e_face,y,_i.e_vertex)}lo.addType(Fo.TYPE,Fo.TYPE,mn);var _n={maxSeparation:0,bestIndex:0},ln=function(t,e,i,o,s){t.pointCount=0;var n=e.m_radius+o.m_radius;hn(e,i,o,s,_n);var r=_n.bestIndex,a=_n.maxSeparation;if(!(a>n)){hn(o,s,e,i,_n);var m=_n.bestIndex,h=_n.maxSeparation;if(!(h>n)){var c,_,l,u,p,y;h>a+.1*B.linearSlop?(c=o,_=e,l=s,u=i,p=m,t.type=ci.e_faceB,y=!0):(c=e,_=o,l=i,u=s,p=r,t.type=ci.e_faceA,y=!1),Hs[0].recycle(),Hs[1].recycle(),cn(Hs,c,l,p,_,u);var d=c.m_count,f=c.m_vertices,v=p,x=p+1<d?p+1:0;R($s,f[v]),R(tn,f[x]),H(en,tn,$s),tt(en),et(on,en,1),G(sn,.5,$s,.5,tn),ht(nn,l.q,en),et(rn,nn,1),pt($s,l,$s),pt(tn,l,tn);var A=st(rn,$s),g=-st(nn,$s)+n,b=st(nn,tn)+n;if(Us[0].recycle(),Us[1].recycle(),Zs[0].recycle(),Zs[1].recycle(),j(Ks,-nn.x,-nn.y),!(Ii(Us,Hs,Ks,g,v)<2))if(j(Ks,nn.x,nn.y),!(Ii(Zs,Us,Ks,b,x)<2)){R(t.localNormal,on),R(t.localPoint,sn);for(var w=0,V=0;V<Zs.length;++V){if(st(rn,Zs[V].v)-A<=n){var C=t.points[w];yt(C.localPoint,u,Zs[V].v),C.id.set(Zs[V].id),y&&C.id.swapFeatures(),++w}}t.pointCount=w}}}};function un(t,e,i,o,s,n,r){dn(t,i.getShape(),e,n.getShape(),s)}exports.CollidePolygons=ln,lo.addType(Fo.TYPE,Oo.TYPE,un);var pn=k(0,0),yn=k(0,0),dn=function(t,e,i,o,s){t.pointCount=0,dt(pn,s,i,o.m_p);for(var r=0,a=-1/0,m=e.m_radius+o.m_radius,h=e.m_count,c=e.m_vertices,_=e.m_normals,l=0;l<h;++l){var u=st(_[l],pn)-st(_[l],c[l]);if(u>m)return;u>a&&(a=u,r=l)}var p=r,y=p+1<h?p+1:0,d=c[p],f=c[y];if(a<n)return t.pointCount=1,t.type=ci.e_faceA,R(t.localNormal,_[r]),G(t.localPoint,.5,d,.5,f),R(t.points[0].localPoint,o.m_p),void t.points[0].id.setFeatures(0,_i.e_vertex,0,_i.e_vertex);var v=st(pn,f)-st(pn,d)-st(d,f)+st(d,d),x=st(pn,d)-st(pn,f)-st(f,d)+st(f,f);if(v<=0){if(at(pn,d)>m*m)return;t.pointCount=1,t.type=ci.e_faceA,H(t.localNormal,pn,d),tt(t.localNormal),R(t.localPoint,d),R(t.points[0].localPoint,o.m_p),t.points[0].id.setFeatures(0,_i.e_vertex,0,_i.e_vertex)}else if(x<=0){if(at(pn,f)>m*m)return;t.pointCount=1,t.type=ci.e_faceA,H(t.localNormal,pn,f),tt(t.localNormal),R(t.localPoint,f),R(t.points[0].localPoint,o.m_p),t.points[0].id.setFeatures(0,_i.e_vertex,0,_i.e_vertex)}else{if(G(yn,.5,d,.5,f),st(pn,_[p])-st(yn,_[p])>m)return;t.pointCount=1,t.type=ci.e_faceA,R(t.localNormal,_[p]),R(t.localPoint,yn),R(t.points[0].localPoint,o.m_p),t.points[0].id.setFeatures(0,_i.e_vertex,0,_i.e_vertex)}};exports.CollidePolygonCircle=dn;var fn=Math.min;function vn(t,e,i,o,s,n,r){Hn(t,i.getShape(),e,n.getShape(),s)}lo.addType(xo.TYPE,Fo.TYPE,vn),lo.addType(Bo.TYPE,Fo.TYPE,bn);var xn,An,gn=new xo;function bn(t,e,i,o,s,n,r){i.getShape().getChildEdge(gn,o),Hn(t,gn,e,n.getShape(),s)}!function(t){t[t.e_unknown=-1]="e_unknown",t[t.e_edgeA=1]="e_edgeA",t[t.e_edgeB=2]="e_edgeB"}(xn||(xn={})),function(t){t[t.e_isolated=0]="e_isolated",t[t.e_concave=1]="e_concave",t[t.e_convex=2]="e_convex"}(An||(An={}));var Bn=function(){return function(){}}(),wn=function(){return function(){this.vertices=[],this.normals=[],this.count=0;for(var t=0;t<B.maxPolygonVertices;t++)this.vertices.push(k(0,0)),this.normals.push(k(0,0))}}(),Vn=function(){function t(){this.v1=k(0,0),this.v2=k(0,0),this.normal=k(0,0),this.sideNormal1=k(0,0),this.sideNormal2=k(0,0)}return t.prototype.recycle=function(){O(this.v1),O(this.v2),O(this.normal),O(this.sideNormal1),O(this.sideNormal2)},t}(),Cn=[new bi,new bi],Mn=[new bi,new bi],In=[new bi,new bi],Pn=new Bn,Sn=new Bn,zn=new wn,Tn=new Vn,Fn=k(0,0),Ln=k(0,0),qn=k(0,0),Nn=k(0,0),kn=lt(0,0,0),Dn=k(0,0),jn=k(0,0),Rn=k(0,0),On=k(0,0),En=k(0,0),Jn=k(0,0),Yn=k(0,0),Wn=k(0,0),Hn=function(t,e,i,o,s){ft(kn,i,s),pt(Fn,kn,o.m_centroid);var n=e.m_vertex0,r=e.m_vertex1,a=e.m_vertex2,m=e.m_vertex3,h=e.m_hasVertex0,c=e.m_hasVertex3;H(qn,a,r),tt(qn),j(Rn,qn.y,-qn.x);var _,l=st(Rn,Fn)-st(Rn,r),u=0,p=0,y=!1,d=!1;O(jn),O(On),h&&(H(Ln,r,n),tt(Ln),j(jn,Ln.y,-Ln.x),y=ot(Ln,qn)>=0,u=f.dot(jn,Fn)-f.dot(jn,n)),c&&(H(Nn,m,a),tt(Nn),j(On,Nn.y,-Nn.x),d=f.crossVec2Vec2(qn,Nn)>0,p=f.dot(On,Fn)-f.dot(On,a)),O(Dn),O(En),O(Jn),h&&c?y&&d?(_=u>=0||l>=0||p>=0)?(R(Dn,Rn),R(En,jn),R(Jn,On)):(Z(Dn,-1,Rn),Z(En,-1,Rn),Z(Jn,-1,Rn)):y?(_=u>=0||l>=0&&p>=0)?(R(Dn,Rn),R(En,jn),R(Jn,Rn)):(Z(Dn,-1,Rn),Z(En,-1,On),Z(Jn,-1,Rn)):d?(_=p>=0||u>=0&&l>=0)?(R(Dn,Rn),R(En,Rn),R(Jn,On)):(Z(Dn,-1,Rn),Z(En,-1,Rn),Z(Jn,-1,jn)):(_=u>=0&&l>=0&&p>=0)?(R(Dn,Rn),R(En,Rn),R(Jn,Rn)):(Z(Dn,-1,Rn),Z(En,-1,On),Z(Jn,-1,jn)):h?y?(_=u>=0||l>=0)?(R(Dn,Rn),R(En,jn),Z(Jn,-1,Rn)):(Z(Dn,-1,Rn),R(En,Rn),Z(Jn,-1,Rn)):(_=u>=0&&l>=0)?(R(Dn,Rn),R(En,Rn),Z(Jn,-1,Rn)):(Z(Dn,-1,Rn),R(En,Rn),Z(Jn,-1,jn)):c?d?(_=l>=0||p>=0)?(R(Dn,Rn),Z(En,-1,Rn),R(Jn,On)):(Z(Dn,-1,Rn),Z(En,-1,Rn),R(Jn,Rn)):(_=l>=0&&p>=0)?(R(Dn,Rn),Z(En,-1,Rn),R(Jn,Rn)):(Z(Dn,-1,Rn),Z(En,-1,On),R(Jn,Rn)):(_=l>=0)?(R(Dn,Rn),Z(En,-1,Rn),Z(Jn,-1,Rn)):(Z(Dn,-1,Rn),R(En,Rn),R(Jn,Rn)),zn.count=o.m_count;for(var v=0;v<o.m_count;++v)pt(zn.vertices[v],kn,o.m_vertices[v]),ht(zn.normals[v],kn.q,o.m_normals[v]);var x=o.m_radius+e.m_radius;t.pointCount=0,Pn.type=xn.e_edgeA,Pn.index=_?0:1,Pn.separation=1/0;for(v=0;v<zn.count;++v){var A=zn.vertices[v];(g=st(Dn,A)-st(Dn,r))<Pn.separation&&(Pn.separation=g)}if(Pn.type!=xn.e_unknown&&!(Pn.separation>x)){Sn.type=xn.e_unknown,Sn.index=-1,Sn.separation=-1/0,j(Yn,-Dn.y,Dn.x);for(v=0;v<zn.count;++v){Z(Wn,-1,zn.normals[v]);var g,b=st(Wn,zn.vertices[v])-st(Wn,r),w=st(Wn,zn.vertices[v])-st(Wn,a);if((g=fn(b,w))>x){Sn.type=xn.e_edgeB,Sn.index=v,Sn.separation=g;break}if(st(Wn,Yn)>=0){if(st(Wn,Dn)-st(Jn,Dn)<-B.angularSlop)continue}else if(st(Wn,Dn)-st(En,Dn)<-B.angularSlop)continue;g>Sn.separation&&(Sn.type=xn.e_edgeB,Sn.index=v,Sn.separation=g)}if(!(Sn.type!=xn.e_unknown&&Sn.separation>x)){var V;if(V=Sn.type==xn.e_unknown?Pn:Sn.separation>.98*Pn.separation+.001?Sn:Pn,In[0].recycle(),In[1].recycle(),V.type==xn.e_edgeA){t.type=ci.e_faceA;var C=0,M=st(Dn,zn.normals[0]);for(v=1;v<zn.count;++v){var I=st(Dn,zn.normals[v]);I<M&&(M=I,C=v)}var P=C,S=P+1<zn.count?P+1:0;R(In[0].v,zn.vertices[P]),In[0].id.setFeatures(0,_i.e_face,P,_i.e_vertex),R(In[1].v,zn.vertices[S]),In[1].id.setFeatures(0,_i.e_face,S,_i.e_vertex),_?(Tn.i1=0,Tn.i2=1,R(Tn.v1,r),R(Tn.v2,a),R(Tn.normal,Rn)):(Tn.i1=1,Tn.i2=0,R(Tn.v1,a),R(Tn.v2,r),Z(Tn.normal,-1,Rn))}else t.type=ci.e_faceB,R(In[0].v,r),In[0].id.setFeatures(0,_i.e_vertex,V.index,_i.e_face),R(In[1].v,a),In[1].id.setFeatures(0,_i.e_vertex,V.index,_i.e_face),Tn.i1=V.index,Tn.i2=Tn.i1+1<zn.count?Tn.i1+1:0,R(Tn.v1,zn.vertices[Tn.i1]),R(Tn.v2,zn.vertices[Tn.i2]),R(Tn.normal,zn.normals[Tn.i1]);if(j(Tn.sideNormal1,Tn.normal.y,-Tn.normal.x),j(Tn.sideNormal2,-Tn.sideNormal1.x,-Tn.sideNormal1.y),Tn.sideOffset1=st(Tn.sideNormal1,Tn.v1),Tn.sideOffset2=st(Tn.sideNormal2,Tn.v2),Cn[0].recycle(),Cn[1].recycle(),Mn[0].recycle(),Mn[1].recycle(),!(Ii(Cn,In,Tn.sideNormal1,Tn.sideOffset1,Tn.i1)<B.maxManifoldPoints))if(!(Ii(Mn,Cn,Tn.sideNormal2,Tn.sideOffset2,Tn.i2)<B.maxManifoldPoints)){V.type==xn.e_edgeA?(R(t.localNormal,Tn.normal),R(t.localPoint,Tn.v1)):(R(t.localNormal,o.m_normals[Tn.i1]),R(t.localPoint,o.m_vertices[Tn.i1]));var z=0;for(v=0;v<B.maxManifoldPoints;++v){if(st(Tn.normal,Mn[v].v)-st(Tn.normal,Tn.v1)<=x){var T=t.points[z];V.type==xn.e_edgeA?(yt(T.localPoint,kn,Mn[v].v),T.id.set(Mn[v].id)):(R(T.localPoint,Mn[v].v),T.id.set(Mn[v].id),T.id.swapFeatures()),++z}}t.pointCount=z}}}};exports.CollideEdgePolygon=Hn;var Un={CollidePolygons:ln,Settings:B,Sweep:Vt,Manifold:Bi,Distance:le,TimeOfImpact:We,DynamicTree:P,stats:Gt};exports.internal=Un;var Zn=Object.freeze({__proto__:null,Math:l,Serializer:Ps,Testbed:zs,testbed:Ts,Vec2:f,Vec3:yo,Mat22:hi,Mat33:Ko,Transform:Ct,Rot:gt,AABB:A,Shape:Tt,FixtureProxy:kt,Fixture:Dt,Body:Zt,ContactEdge:qi,mixFriction:Ni,mixRestitution:ki,VelocityConstraintPoint:ji,Contact:lo,JointEdge:Kt,Joint:Xt,World:po,CircleShape:Oo,Circle:Eo,EdgeShape:xo,Edge:Ao,PolygonShape:Fo,Polygon:qo,ChainShape:Bo,Chain:wo,BoxShape:No,Box:ko,CollideCircles:Ns,CollideEdgeCircle:Ws,CollidePolygons:ln,CollidePolygonCircle:dn,CollideEdgePolygon:Hn,DistanceJoint:Ho,FrictionJoint:Zo,GearJoint:as,MotorJoint:hs,MouseJoint:ls,PrismaticJoint:ns,PulleyJoint:ys,RevoluteJoint:$o,RopeJoint:xs,WeldJoint:Bs,WheelJoint:Ms,Settings:b,SettingsInternal:B,Sweep:Vt,get ManifoldType(){return ci},get ContactFeatureType(){return _i},get PointState(){return li},ClipVertex:bi,Manifold:Bi,ManifoldPoint:wi,ContactID:Vi,WorldManifold:Ci,getPointStates:Mi,clipSegmentToLine:Ii,DistanceInput:he,DistanceOutput:ce,SimplexCache:_e,Distance:le,DistanceProxy:ue,testOverlap:be,ShapeCastInput:Be,ShapeCastOutput:we,ShapeCast:Ve,TOIInput:Pe,get TOIOutputState(){return Ce},TOIOutput:Se,TimeOfImpact:We,TreeNode:M,DynamicTree:P,stats:Gt,internal:Un});exports.default=Zn;
},{}],"Rikx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.planckFactory=void 0;const e=require("planck"),t=(t,r,c,o)=>{const n=new e.World({gravity:new e.Vec2(t.x,t.y)}),a=n.createBody({}),p=new e.Edge(new e.Vec2(r.x,r.y),new e.Vec2(c.x,c.y));return a.createFixture(p,o),{name:"planck.js",createBoxShape:(t,r)=>new e.Box(t,r),createBoxBody(t,r,c,o){n.createBody({type:"dynamic",position:new e.Vec2(r,c)}).createFixture(t,o)},step(e,t,r){n.step(e,t,r)}}};exports.planckFactory=t;
},{"planck":"Dbpo"}],"r7L2":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"JEec":[function(require,module,exports) {
var process = require("process");
var r=require("process");"requestAnimationFrame"in globalThis&&(r.stdout={write:r=>(console.log(r),!0)},r.stderr={write:r=>(console.error(r),!0)});
},{"process":"r7L2"}],"ITsK":[function(require,module,exports) {

},{}],"NOXM":[function(require,module,exports) {
var process = require("process");
var __dirname = "/Users/qashto/dev/forks/box2d_benchmarks/node_modules/box2d.js";
var global = arguments[3];
var process=require("process"),__dirname="/Users/qashto/dev/forks/box2d_benchmarks/node_modules/box2d.js",global=arguments[3],c={};(function(){function c(e){throw e}var d=void 0,aa=!0,ba=null,ca=!1,e;e||(e=eval("(function() { try { return Module || {} } catch(e) { return {} } })()"));var da={},ea;for(ea in e)e.hasOwnProperty(ea)&&(da[ea]=e[ea]);var fa="object"==typeof process&&"function"==typeof require,ga="object"==typeof window,ia="function"==typeof importScripts,ja=!ga&&!fa&&!ia;if(fa){e.print||(e.print=function(e){process.stdout.write(e+"\n")}),e.printErr||(e.printErr=function(e){process.stderr.write(e+"\n")});var ka=require("fs"),la=require("path");e.read=function(e,t){e=la.normalize(e);var n=ka.readFileSync(e);return!n&&e!=la.resolve(e)&&(e=path.join(__dirname,"..","src",e),n=ka.readFileSync(e)),n&&!t&&(n=n.toString()),n},e.readBinary=function(t){return e.read(t,aa)},e.load=function(e){ma(read(e))},e.thisProgram=1<process.argv.length?process.argv[1].replace(/\\/g,"/"):"unknown-program",e.arguments=process.argv.slice(2),"undefined"!=typeof module&&(module.exports=e),process.on("uncaughtException",function(e){e instanceof na||c(e)})}else ja?(e.print||(e.print=print),"undefined"!=typeof printErr&&(e.printErr=printErr),e.read="undefined"!=typeof read?read:function(){c("no read() available (jsc?)")},e.readBinary=function(e){return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(oa("object"==typeof(e=read(e,"binary"))),e)},"undefined"!=typeof scriptArgs?e.arguments=scriptArgs:void 0!==arguments&&(e.arguments=arguments),this.Module=e,eval("if (typeof gc === 'function' && gc.toString().indexOf('[native code]') > 0) var gc = undefined")):ga||ia?(e.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,ca),t.send(ba),t.responseText},void 0!==arguments&&(e.arguments=arguments),"undefined"!=typeof console?(e.print||(e.print=function(e){console.log(e)}),e.printErr||(e.printErr=function(e){console.log(e)})):e.print||(e.print=function(){}),ga?window.Module=e:e.load=importScripts):c("Unknown runtime environment. Where are we?");function ma(e){eval.call(ba,e)}for(ea in!e.load&&e.read&&(e.load=function(t){ma(e.read(t))}),e.print||(e.print=function(){}),e.printErr||(e.printErr=e.print),e.arguments||(e.arguments=[]),e.thisProgram||(e.thisProgram="./this.program"),e.print=e.print,e.n=e.printErr,e.preRun=[],e.postRun=[],da)da.hasOwnProperty(ea)&&(e[ea]=da[ea]);var h={ga:function(e){qa=e},aa:function(){return qa},A:function(){return ra},J:function(e){ra=e},Q:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:return"*"===e[e.length-1]?h.B:"i"===e[0]?(oa(0==(e=parseInt(e.substr(1)))%8),e/8):0}},P:function(e){return Math.max(h.Q(e),h.B)},ha:16,ua:function(e,t,n){return n||"i64"!=e&&"double"!=e?e?Math.min(t||(e?h.P(e):0),h.B):Math.min(t,8):8},r:function(t,n,i){return i&&i.length?(i.splice||(i=Array.prototype.slice.call(i)),i.splice(0,0,n),e["dynCall_"+t].apply(ba,i)):e["dynCall_"+t].call(ba,n)},p:[ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba],V:function(e){for(var t=0;t<h.p.length;t++)if(!h.p[t])return h.p[t]=e,2*(1+t);c("Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS.")},fa:function(e){h.p[(e-2)/2]=ba},O:function(a,b){h.F||(h.F={});var f=h.F[a];if(f)return f;for(var f=[],g=0;g<b;g++)f.push(String.fromCharCode(36)+g);g=sa(a),'"'===g[0]&&(g.indexOf('"',1)===g.length-1?g=g.substr(1,g.length-2):ua("invalid EM_ASM input |"+g+"|. Please use EM_ASM(..code..) (no quotes) or EM_ASM({ ..code($0).. }, input) (to input values)"));try{var k=eval("(function(Module, FS) { return function("+f.join(",")+"){ "+g+" } })")(e,void 0!==va?va:ba)}catch(n){e.n("error in executing inline EM_ASM code: "+n+" on: \n\n"+g+"\n\nwith args |"+f+"| (make sure to use the right one out of EM_ASM, EM_ASM_ARGS, etc.)"),c(n)}return h.F[a]=k},q:function(t){h.q.I||(h.q.I={}),h.q.I[t]||(h.q.I[t]=1,e.n(t))},G:{},wa:function(e,t){oa(t),h.G[t]||(h.G[t]={});var n=h.G[t];return n[e]||(n[e]=function(){return h.r(t,e,arguments)}),n[e]},M:function(){var e=[],t=0;this.da=function(n){if(n&=255,0==e.length)return 0==(128&n)?String.fromCharCode(n):(e.push(n),t=192==(224&n)?1:224==(240&n)?2:3,"");if(t&&(e.push(n),0<--t))return"";n=e[0];var i=e[1],r=e[2],_=e[3];return 2==e.length?n=String.fromCharCode((31&n)<<6|63&i):3==e.length?n=String.fromCharCode((15&n)<<12|(63&i)<<6|63&r):(n=(7&n)<<18|(63&i)<<12|(63&r)<<6|63&_,n=String.fromCharCode(55296+((n-65536)/1024|0),(n-65536)%1024+56320)),e.length=0,n},this.ea=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;n++)t.push(e.charCodeAt(n));return t}},va:function(){c("You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work")},u:function(e){var t=ra;return ra=(ra=ra+e|0)+15&-16,t},U:function(e){var t=wa;return wa=(wa=wa+e|0)+15&-16,t},o:function(e){var t=xa;return(xa=(xa=xa+e|0)+15&-16)>=ya&&ua("Cannot enlarge memory arrays. Either (1) compile with -s TOTAL_MEMORY=X with X higher than the current value "+ya+", (2) compile with ALLOW_MEMORY_GROWTH which adjusts the size at runtime but prevents some optimizations, or (3) set Module.TOTAL_MEMORY before the program runs."),t},C:function(e,t){return Math.ceil(e/(t||16))*(t||16)},ca:function(e,t,n){return n?+(e>>>0)+4294967296*+(t>>>0):+(e>>>0)+4294967296*+(0|t)},L:8,B:4,ia:0};e.Runtime=h,h.addFunction=h.V,h.removeFunction=h.fa;var za=ca,Ba,Da,qa,Fa,Ga;function oa(e,t){e||ua("Assertion failed: "+t)}function Ea(a){var b=e["_"+a];if(!b)try{b=eval("_"+a)}catch(f){}return oa(b,"Cannot call unknown function "+a+" (perhaps LLVM optimizations or closure removed it?)"),b}function Ja(e,t,n){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":Ka[e>>0]=t;break;case"i16":La[e>>1]=t;break;case"i32":Ma[e>>2]=t;break;case"i64":Da=[t>>>0,(Ba=t,1<=+Oa(Ba)?0<Ba?(0|Pa(+Qa(Ba/4294967296),4294967295))>>>0:~~+Ra((Ba-+(~~Ba>>>0))/4294967296)>>>0:0)],Ma[e>>2]=Da[0],Ma[e+4>>2]=Da[1];break;case"float":Sa[e>>2]=t;break;case"double":Ta[e>>3]=t;break;default:ua("invalid type for setValue: "+n)}}function Ua(e,t){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return Ka[e>>0];case"i16":return La[e>>1];case"i32":case"i64":return Ma[e>>2];case"float":return Sa[e>>2];case"double":return Ta[e>>3];default:ua("invalid type for setValue: "+t)}return ba}!function(){function a(e){return{arguments:(e=e.toString().match(k).slice(1))[0],body:e[1],returnValue:e[2]}}var b=0,f={stackSave:function(){b=h.A()},stackRestore:function(){h.J(b)},arrayToC:function(e){var t=h.u(e.length);return Ha(e,t),t},stringToC:function(e){var t=0;return e!==ba&&e!==d&&0!==e&&Ia(e,t=h.u(1+(e.length<<2))),t}},g={string:f.stringToC,array:f.arrayToC};Ga=function(e,t,n,i){e=Ea(e);var r=[];if(i)for(var _=0;_<i.length;_++){var o=g[n[_]];o?(0===b&&(b=h.A()),r[_]=o(i[_])):r[_]=i[_]}return n=e.apply(ba,r),"string"===t&&(n=sa(n)),0!==b&&f.stackRestore(),n};var k=/^function\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/,n={},m;for(m in f)f.hasOwnProperty(m)&&(n[m]=a(f[m]));Fa=function(b,f,g){var g=g||[],k=Ea(b),b=g.every(function(e){return"number"===e}),m="string"!==f;if(m&&b)return k;var Aa=g.map(function(e,t){return"$"+t}),f="(function("+Aa.join(",")+") {",ib=g.length;if(!b)for(var f=f+(n.stackSave.body+";"),Va=0;Va<ib;Va++){var db=Aa[Va],Ca=g[Va];"number"!==Ca&&(Ca=n[Ca+"ToC"],f+="var "+Ca.arguments+" = "+db+";",f+=Ca.body+";",f+=db+"="+Ca.returnValue+";")}return g=a(function(){return k}).returnValue,f+="var ret = "+g+"("+Aa.join(",")+");",m||(g=a(function(){return sa}).returnValue,f+="ret = "+g+"(ret);"),b||(f+=n.stackRestore.body+";"),eval(f+"return ret})")}}(),e.cwrap=Fa,e.ccall=Ga,e.setValue=Ja,e.getValue=Ua;var Wa=1,Xa=2,Za=4;function $a(e,t,n,i){var r,_;"number"==typeof e?(r=aa,_=e):(r=ca,_=e.length);var o="string"==typeof t?t:ba;n=n==Za?i:[ab,h.u,h.U,h.o][n===d?Xa:n](Math.max(_,o?1:t.length));if(r){for(i=n,oa(0==(3&n)),e=n+(-4&_);i<e;i+=4)Ma[i>>2]=0;for(e=n+_;i<e;)Ka[i++>>0]=0;return n}if("i8"===o)return e.subarray||e.slice?bb.set(e,n):bb.set(new Uint8Array(e),n),n;var c,p;for(i=0;i<_;){var s=e[i];"function"==typeof s&&(s=h.xa(s)),0===(r=o||t[i])?i++:("i64"==r&&(r="i32"),Ja(n+i,s,r),p!==r&&(c=h.Q(r),p=r),i+=c)}return n}function sa(e,t){if(0===t||!e)return"";for(var n,i=ca,r=0;;){if(128<=(n=bb[e+r>>0]))i=aa;else if(0==n&&!t)break;if(r++,t&&r==t)break}t||(t=r);var _="";if(!i){for(;0<t;)n=String.fromCharCode.apply(String,bb.subarray(e,e+Math.min(t,1024))),_=_?_+n:n,e+=1024,t-=1024;return _}for(i=new h.M,r=0;r<t;r++)n=bb[e+r>>0],_+=i.da(n);return _}function cb(t){var n=!!e.___cxa_demangle;if(n)try{var i=ab(t.length);Ia(t.substr(1),i);var r=ab(4),_=e.___cxa_demangle(i,0,0,r);if(0===Ua(r,"i32")&&_)return sa(_)}catch(b){}finally{i&&eb(i),r&&eb(r),_&&eb(_)}var o=3,p={v:"void",b:"bool",c:"char",s:"short",i:"int",l:"long",f:"float",d:"double",w:"wchar_t",a:"signed char",h:"unsigned char",t:"unsigned short",j:"unsigned int",m:"unsigned long",x:"long long",y:"unsigned long long",z:"..."},s=[],u=aa;i=t;try{if("Object._main"==t||"_main"==t)return"main()";if("number"==typeof t&&(t=sa(t)),"_"!==t[0]||"_"!==t[1]||"Z"!==t[2])return t;switch(t[3]){case"n":return"operator new()";case"d":return"operator delete()"}i=function e(n,i,r){i=i||1/0;var _,b="",f=[];if("N"===t[o]){for("K"===t[++o]&&o++,_=[];"E"!==t[o];)if("S"===t[o]){o++;var a=t.indexOf("_",o);_.push(s[t.substring(o,a)||0]||"?"),o=a+1}else if("C"===t[o])_.push(_[_.length-1]),o+=2;else{var d=(a=parseInt(t.substr(o))).toString().length;if(!a||!d){o--;break}var y=t.substr(o+d,a);_.push(y),s.push(y),o+=d+a}if(o++,_=_.join("::"),0==--i)return n?[_]:_}else("K"===t[o]||u&&"L"===t[o])&&o++,(a=parseInt(t.substr(o)))&&(d=a.toString().length,_=t.substr(o+d,a),o+=d+a);u=ca,"I"===t[o]?(o++,a=e(aa),b+=(d=e(aa,1,aa))[0]+" "+_+"<"+a.join(", ")+">"):b=_;e:for(;o<t.length&&0<i--;)if(_=t[o++],_ in p)f.push(p[_]);else switch(_){case"P":f.push(e(aa,1,aa)[0]+"*");break;case"R":f.push(e(aa,1,aa)[0]+"&");break;case"L":o++,a=t.indexOf("E",o)-o,f.push(t.substr(o,a)),o+=a+2;break;case"A":a=parseInt(t.substr(o)),o+=a.toString().length,"_"!==t[o]&&c("?"),o++,f.push(e(aa,1,aa)[0]+" ["+a+"]");break;case"E":break e;default:b+="?"+_;break e}return!r&&1===f.length&&"void"===f[0]&&(f=[]),n?(b&&f.push(b+"?"),f):b+"("+f.join(", ")+")"}()}catch(f){i+="?"}return 0<=i.indexOf("?")&&!n&&h.q("warning: a problem occurred in builtin C++ name demangling; build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),i}function fb(){var e;e:{if(!(e=Error()).stack){try{c(Error(0))}catch(t){e=t}if(!e.stack){e="(no stack trace available)";break e}}e=e.stack.toString()}return e.replace(/__Z[\w\d_]+/g,function(e){var t=cb(e);return e===t?e:e+" ["+t+"]"})}e.ALLOC_NORMAL=0,e.ALLOC_STACK=Wa,e.ALLOC_STATIC=Xa,e.ALLOC_DYNAMIC=3,e.ALLOC_NONE=Za,e.allocate=$a,e.Pointer_stringify=sa,e.UTF16ToString=function(e){for(var t=0,n="";;){var i=La[e+2*t>>1];if(0==i)return n;++t,n+=String.fromCharCode(i)}},e.stringToUTF16=function(e,t){for(var n=0;n<e.length;++n)La[t+2*n>>1]=e.charCodeAt(n);La[t+2*e.length>>1]=0},e.UTF32ToString=function(e){for(var t=0,n="";;){var i=Ma[e+4*t>>2];if(0==i)return n;++t,65536<=i?(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|1023&i)):n+=String.fromCharCode(i)}},e.stringToUTF32=function(e,t){for(var n=0,i=0;i<e.length;++i){if(55296<=(r=e.charCodeAt(i))&&57343>=r)var r=65536+((1023&r)<<10)|1023&e.charCodeAt(++i);Ma[t+4*n>>2]=r,++n}Ma[t+4*n>>2]=0},e.stackTrace=function(){return fb()};for(var Ka,bb,La,gb,Ma,hb,Sa,Ta,jb=0,wa=0,kb=0,ra=0,lb=0,mb=0,xa=0,nb=e.TOTAL_STACK||5242880,ya=e.TOTAL_MEMORY||16777216,ob=65536;ob<ya||ob<2*nb;)ob=16777216>ob?2*ob:ob+16777216;ob!==ya&&(e.n("increasing TOTAL_MEMORY to "+ob+" to be compliant with the asm.js spec"),ya=ob),oa("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set,"JS engine does not provide full typed array support");var pb=new ArrayBuffer(ya);function qb(e){for(;0<e.length;){var t=e.shift();if("function"==typeof t)t();else{var n=t.ta;"number"==typeof n?t.D===d?h.r("v",n):h.r("vi",n,[t.D]):n(t.D===d?ba:t.D)}}}Ka=new Int8Array(pb),La=new Int16Array(pb),Ma=new Int32Array(pb),bb=new Uint8Array(pb),gb=new Uint16Array(pb),hb=new Uint32Array(pb),Sa=new Float32Array(pb),Ta=new Float64Array(pb),Ma[0]=255,oa(255===bb[0]&&0===bb[3],"Typed arrays 2 must be run on a little-endian system"),e.HEAP=d,e.buffer=pb,e.HEAP8=Ka,e.HEAP16=La,e.HEAP32=Ma,e.HEAPU8=bb,e.HEAPU16=gb,e.HEAPU32=hb,e.HEAPF32=Sa,e.HEAPF64=Ta;var rb=[],sb=[],tb=[],ub=[],vb=[],wb=ca;function yb(e){rb.unshift(e)}function zb(e){vb.unshift(e)}function Ab(e,t,n){return e=(new h.M).ea(e),n&&(e.length=n),t||e.push(0),e}function Bb(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];255<i&&(i&=255),t.push(String.fromCharCode(i))}return t.join("")}function Ia(e,t,n){for(e=Ab(e,n),n=0;n<e.length;)Ka[t+n>>0]=e[n],n+=1}function Ha(e,t){for(var n=0;n<e.length;n++)Ka[t+n>>0]=e[n]}function Cb(e,t){return 0<=e?e:32>=t?2*Math.abs(1<<t-1)+e:Math.pow(2,t)+e}function Db(e,t){if(0>=e)return e;var n=32>=t?Math.abs(1<<t-1):Math.pow(2,t-1);return e>=n&&(32>=t||e>n)&&(e=-2*n+e),e}e.addOnPreRun=e.na=yb,e.addOnInit=e.ka=function(e){sb.unshift(e)},e.addOnPreMain=e.ma=function(e){tb.unshift(e)},e.addOnExit=e.ja=function(e){ub.unshift(e)},e.addOnPostRun=e.la=zb,e.intArrayFromString=Ab,e.intArrayToString=Bb,e.writeStringToMemory=Ia,e.writeArrayToMemory=Ha,e.writeAsciiToMemory=function(e,t,n){for(var i=0;i<e.length;i++)Ka[t+i>>0]=e.charCodeAt(i);n||(Ka[t+e.length>>0]=0)},Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(e,t){var n=65535&e,i=65535&t;return n*i+((e>>>16)*i+n*(t>>>16)<<16)|0}),Math.za=Math.imul;var Oa=Math.abs,Eb=Math.cos,Fb=Math.sin,Gb=Math.atan2,Hb=Math.sqrt,Ra=Math.ceil,Qa=Math.floor,Pa=Math.min,Ib=0,Jb=ba,Kb=ba;function Lb(){Ib++,e.monitorRunDependencies&&e.monitorRunDependencies(Ib)}function Mb(){if(Ib--,e.monitorRunDependencies&&e.monitorRunDependencies(Ib),0==Ib&&(Jb!==ba&&(clearInterval(Jb),Jb=ba),Kb)){var t=Kb;Kb=ba,t()}}e.addRunDependency=Lb,e.removeRunDependency=Mb,e.preloadedImages={},e.preloadedAudios={};var Nb=ba,jb=8,wa=jb+19808;sb.push(),$a([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,200,3,0,0,42,0,0,0,43,0,0,0,42,0,0,0,43,0,0,0,42,0,0,0,42,0,0,0,44,0,0,0,42,0,0,0,54,74,83,68,114,97,119,0,54,98,50,68,114,97,119,0,136,74,0,0,184,3,0,0,176,74,0,0,176,3,0,0,192,3,0,0,0,0,0,0,123,32,118,97,114,32,115,101,108,102,32,61,32,77,111,100,117,108,101,91,39,103,101,116,67,97,99,104,101,39,93,40,77,111,100,117,108,101,91,39,74,83,68,114,97,119,39,93,41,91,36,48,93,59,32,105,102,32,40,33,115,101,108,102,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,39,68,114,97,119,84,114,97,110,115,102,111,114,109,39,41,41,32,116,104,114,111,119,32,39,97,32,74,83,73,109,112,108,101,109,101,110,116,97,116,105,111,110,32,109,117,115,116,32,105,109,112,108,101,109,101,110,116,32,97,108,108,32,102,117,110,99,116,105,111,110,115,44,32,121,111,117,32,102,111,114,103,111,116,32,74,83,68,114,97,119,58,58,68,114,97,119,84,114,97,110,115,102,111,114,109,46,39,59,32,115,101,108,102,46,68,114,97,119,84,114,97,110,115,102,111,114,109,40,36,49,41,59,32,125,0,123,32,118,97,114,32,115,101,108,102,32,61,32,77,111,100,117,108,101,91,39,103,101,116,67,97,99,104,101,39,93,40,77,111,100,117,108,101,91,39,74,83,68,114,97,119,39,93,41,91,36,48,93,59,32,105,102,32,40,33,115,101,108,102,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,39,68,114,97,119,83,101,103,109,101,110,116,39,41,41,32,116,104,114,111,119,32,39,97,32,74,83,73,109,112,108,101,109,101,110,116,97,116,105,111,110,32,109,117,115,116,32,105,109,112,108,101,109,101,110,116,32,97,108,108,32,102,117,110,99,116,105,111,110,115,44,32,121,111,117,32,102,111,114,103,111,116,32,74,83,68,114,97,119,58,58,68,114,97,119,83,101,103,109,101,110,116,46,39,59,32,115,101,108,102,46,68,114,97,119,83,101,103,109,101,110,116,40,36,49,44,36,50,44,36,51,41,59,32,125,0,123,32,118,97,114,32,115,101,108,102,32,61,32,77,111,100,117,108,101,91,39,103,101,116,67,97,99,104,101,39,93,40,77,111,100,117,108,101,91,39,74,83,68,114,97,119,39,93,41,91,36,48,93,59,32,105,102,32,40,33,115,101,108,102,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,39,68,114,97,119,83,111,108,105,100,67,105,114,99,108,101,39,41,41,32,116,104,114,111,119,32,39,97,32,74,83,73,109,112,108,101,109,101,110,116,97,116,105,111,110,32,109,117,115,116,32,105,109,112,108,101,109,101,110,116,32,97,108,108,32,102,117,110,99,116,105,111,110,115,44,32,121,111,117,32,102,111,114,103,111,116,32,74,83,68,114,97,119,58,58,68,114,97,119,83,111,108,105,100,67,105,114,99,108,101,46,39,59,32,115,101,108,102,46,68,114,97,119,83,111,108,105,100,67,105,114,99,108,101,40,36,49,44,36,50,44,36,51,44,36,52,41,59,32,125,0,0,123,32,118,97,114,32,115,101,108,102,32,61,32,77,111,100,117,108,101,91,39,103,101,116,67,97,99,104,101,39,93,40,77,111,100,117,108,101,91,39,74,83,68,114,97,119,39,93,41,91,36,48,93,59,32,105,102,32,40,33,115,101,108,102,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,39,68,114,97,119,67,105,114,99,108,101,39,41,41,32,116,104,114,111,119,32,39,97,32,74,83,73,109,112,108,101,109,101,110,116,97,116,105,111,110,32,109,117,115,116,32,105,109,112,108,101,109,101,110,116,32,97,108,108,32,102,117,110,99,116,105,111,110,115,44,32,121,111,117,32,102,111,114,103,111,116,32,74,83,68,114,97,119,58,58,68,114,97,119,67,105,114,99,108,101,46,39,59,32,115,101,108,102,46,68,114,97,119,67,105,114,99,108,101,40,36,49,44,36,50,44,36,51,41,59,32,125,0,0,0,0,123,32,118,97,114,32,115,101,108,102,32,61,32,77,111,100,117,108,101,91,39,103,101,116,67,97,99,104,101,39,93,40,77,111,100,117,108,101,91,39,74,83,68,114,97,119,39,93,41,91,36,48,93,59,32,105,102,32,40,33,115,101,108,102,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,39,68,114,97,119,83,111,108,105,100,80,111,108,121,103,111,110,39,41,41,32,116,104,114,111,119,32,39,97,32,74,83,73,109,112,108,101,109,101,110,116,97,116,105,111,110,32,109,117,115,116,32,105,109,112,108,101,109,101,110,116,32,97,108,108,32,102,117,110,99,116,105,111,110,115,44,32,121,111,117,32,102,111,114,103,111,116,32,74,83,68,114,97,119,58,58,68,114,97,119,83,111,108,105,100,80,111,108,121,103,111,110,46,39,59,32,115,101,108,102,46,68,114,97,119,83,111,108,105,100,80,111,108,121,103,111,110,40,36,49,44,36,50,44,36,51,41,59,32,125,0,0,123,32,118,97,114,32,115,101,108,102,32,61,32,77,111,100,117,108,101,91,39,103,101,116,67,97,99,104,101,39,93,40,77,111,100,117,108,101,91,39,74,83,68,114,97,119,39,93,41,91,36,48,93,59,32,105,102,32,40,33,115,101,108,102,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,39,68,114,97,119,80,111,108,121,103,111,110,39,41,41,32,116,104,114,111,119,32,39,97,32,74,83,73,109,112,108,101,109,101,110,116,97,116,105,111,110,32,109,117,115,116,32,105,109,112,108,101,109,101,110,116,32,97,108,108,32,102,117,110,99,116,105,111,110,115,44,32,121,111,117,32,102,111,114,103,111,116,32,74,83,68,114,97,119,58,58,68,114,97,119,80,111,108,121,103,111,110,46,39,59,32,115,101,108,102,46,68,114,97,119,80,111,108,121,103,111,110,40,36,49,44,36,50,44,36,51,41,59,32,125,0,0,0,0,0,56,9,0,0,44,0,0,0,45,0,0,0,42,0,0,0,0,0,0,0,49,53,74,83,67,111,110,116,97,99,116,70,105,108,116,101,114,0,0,0,0,0,0,0,176,74,0,0,32,9,0,0,40,49,0,0,0,0,0,0,123,32,118,97,114,32,115,101,108,102,32,61,32,77,111,100,117,108,101,91,39,103,101,116,67,97,99,104,101,39,93,40,77,111,100,117,108,101,91,39,74,83,67,111,110,116,97,99,116,70,105,108,116,101,114,39,93,41,91,36,48,93,59,32,105,102,32,40,33,115,101,108,102,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,39,83,104,111,117,108,100,67,111,108,108,105,100,101,39,41,41,32,116,104,114,111,119,32,39,97,32,74,83,73,109,112,108,101,109,101,110,116,97,116,105,111,110,32,109,117,115,116,32,105,109,112,108,101,109,101,110,116,32,97,108,108,32,102,117,110,99,116,105,111,110,115,44,32,121,111,117,32,102,111,114,103,111,116,32,74,83,67,111,110,116,97,99,116,70,105,108,116,101,114,58,58,83,104,111,117,108,100,67,111,108,108,105,100,101,46,39,59,32,114,101,116,117,114,110,32,115,101,108,102,46,83,104,111,117,108,100,67,111,108,108,105,100,101,40,36,49,44,36,50,41,59,32,125,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,67,111,108,108,105,115,105,111,110,47,83,104,97,112,101,115,47,98,50,80,111,108,121,103,111,110,83,104,97,112,101,46,104,0,0,0,0,0,0,0,0,208,10,0,0,46,0,0,0,47,0,0,0,43,0,0,0,44,0,0,0,42,0,0,0,43,0,0,0,49,55,74,83,67,111,110,116,97,99,116,76,105,115,116,101,110,101,114,0,0,0,0,0,49,55,98,50,67,111,110,116,97,99,116,76,105,115,116,101,110,101,114,0,0,0,0,0,136,74,0,0,176,10,0,0,176,74,0,0,152,10,0,0,200,10,0,0,0,0,0,0,123,32,118,97,114,32,115,101,108,102,32,61,32,77,111,100,117,108,101,91,39,103,101,116,67,97,99,104,101,39,93,40,77,111,100,117,108,101,91,39,74,83,67,111,110,116,97,99,116,76,105,115,116,101,110,101,114,39,93,41,91,36,48,93,59,32,105,102,32,40,33,115,101,108,102,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,39,80,111,115,116,83,111,108,118,101,39,41,41,32,116,104,114,111,119,32,39,97,32,74,83,73,109,112,108,101,109,101,110,116,97,116,105,111,110,32,109,117,115,116,32,105,109,112,108,101,109,101,110,116,32,97,108,108,32,102,117,110,99,116,105,111,110,115,44,32,121,111,117,32,102,111,114,103,111,116,32,74,83,67,111,110,116,97,99,116,76,105,115,116,101,110,101,114,58,58,80,111,115,116,83,111,108,118,101,46,39,59,32,115,101,108,102,46,80,111,115,116,83,111,108,118,101,40,36,49,44,36,50,41,59,32,125,0,0,0,0,123,32,118,97,114,32,115,101,108,102,32,61,32,77,111,100,117,108,101,91,39,103,101,116,67,97,99,104,101,39,93,40,77,111,100,117,108,101,91,39,74,83,67,111,110,116,97,99,116,76,105,115,116,101,110,101,114,39,93,41,91,36,48,93,59,32,105,102,32,40,33,115,101,108,102,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,39,80,114,101,83,111,108,118,101,39,41,41,32,116,104,114,111,119,32,39,97,32,74,83,73,109,112,108,101,109,101,110,116,97,116,105,111,110,32,109,117,115,116,32,105,109,112,108,101,109,101,110,116,32,97,108,108,32,102,117,110,99,116,105,111,110,115,44,32,121,111,117,32,102,111,114,103,111,116,32,74,83,67,111,110,116,97,99,116,76,105,115,116,101,110,101,114,58,58,80,114,101,83,111,108,118,101,46,39,59,32,115,101,108,102,46,80,114,101,83,111,108,118,101,40,36,49,44,36,50,41,59,32,125,0,0,0,0,0,0,0,123,32,118,97,114,32,115,101,108,102,32,61,32,77,111,100,117,108,101,91,39,103,101,116,67,97,99,104,101,39,93,40,77,111,100,117,108,101,91,39,74,83,67,111,110,116,97,99,116,76,105,115,116,101,110,101,114,39,93,41,91,36,48,93,59,32,105,102,32,40,33,115,101,108,102,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,39,69,110,100,67,111,110,116,97,99,116,39,41,41,32,116,104,114,111,119,32,39,97,32,74,83,73,109,112,108,101,109,101,110,116,97,116,105,111,110,32,109,117,115,116,32,105,109,112,108,101,109,101,110,116,32,97,108,108,32,102,117,110,99,116,105,111,110,115,44,32,121,111,117,32,102,111,114,103,111,116,32,74,83,67,111,110,116,97,99,116,76,105,115,116,101,110,101,114,58,58,69,110,100,67,111,110,116,97,99,116,46,39,59,32,115,101,108,102,46,69,110,100,67,111,110,116,97,99,116,40,36,49,41,59,32,125,0,0,0,0,123,32,118,97,114,32,115,101,108,102,32,61,32,77,111,100,117,108,101,91,39,103,101,116,67,97,99,104,101,39,93,40,77,111,100,117,108,101,91,39,74,83,67,111,110,116,97,99,116,76,105,115,116,101,110,101,114,39,93,41,91,36,48,93,59,32,105,102,32,40,33,115,101,108,102,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,39,66,101,103,105,110,67,111,110,116,97,99,116,39,41,41,32,116,104,114,111,119,32,39,97,32,74,83,73,109,112,108,101,109,101,110,116,97,116,105,111,110,32,109,117,115,116,32,105,109,112,108,101,109,101,110,116,32,97,108,108,32,102,117,110,99,116,105,111,110,115,44,32,121,111,117,32,102,111,114,103,111,116,32,74,83,67,111,110,116,97,99,116,76,105,115,116,101,110,101,114,58,58,66,101,103,105,110,67,111,110,116,97,99,116,46,39,59,32,115,101,108,102,46,66,101,103,105,110,67,111,110,116,97,99,116,40,36,49,41,59,32,125,0,0,0,0,0,0,0,0,0,0,216,14,0,0,48,0,0,0,49,0,0,0,42,0,0,0,0,0,0,0,49,55,74,83,82,97,121,67,97,115,116,67,97,108,108,98,97,99,107,0,0,0,0,0,49,55,98,50,82,97,121,67,97,115,116,67,97,108,108,98,97,99,107,0,0,0,0,0,136,74,0,0,184,14,0,0,176,74,0,0,160,14,0,0,208,14,0,0,0,0,0,0,123,32,118,97,114,32,115,101,108,102,32,61,32,77,111,100,117,108,101,91,39,103,101,116,67,97,99,104,101,39,93,40,77,111,100,117,108,101,91,39,74,83,82,97,121,67,97,115,116,67,97,108,108,98,97,99,107,39,93,41,91,36,48,93,59,32,105,102,32,40,33,115,101,108,102,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,39,82,101,112,111,114,116,70,105,120,116,117,114,101,39,41,41,32,116,104,114,111,119,32,39,97,32,74,83,73,109,112,108,101,109,101,110,116,97,116,105,111,110,32,109,117,115,116,32,105,109,112,108,101,109,101,110,116,32,97,108,108,32,102,117,110,99,116,105,111,110,115,44,32,121,111,117,32,102,111,114,103,111,116,32,74,83,82,97,121,67,97,115,116,67,97,108,108,98,97,99,107,58,58,82,101,112,111,114,116,70,105,120,116,117,114,101,46,39,59,32,114,101,116,117,114,110,32,115,101,108,102,46,82,101,112,111,114,116,70,105,120,116,117,114,101,40,36,49,44,36,50,44,36,51,44,36,52,41,59,32,125,0,0,0,0,0,0,0,56,16,0,0,50,0,0,0,51,0,0,0,42,0,0,0,0,0,0,0,49,53,74,83,81,117,101,114,121,67,97,108,108,98,97,99,107,0,0,0,0,0,0,0,49,53,98,50,81,117,101,114,121,67,97,108,108,98,97,99,107,0,0,0,0,0,0,0,136,74,0,0,24,16,0,0,176,74,0,0,0,16,0,0,48,16,0,0,0,0,0,0,123,32,118,97,114,32,115,101,108,102,32,61,32,77,111,100,117,108,101,91,39,103,101,116,67,97,99,104,101,39,93,40,77,111,100,117,108,101,91,39,74,83,81,117,101,114,121,67,97,108,108,98,97,99,107,39,93,41,91,36,48,93,59,32,105,102,32,40,33,115,101,108,102,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,39,82,101,112,111,114,116,70,105,120,116,117,114,101,39,41,41,32,116,104,114,111,119,32,39,97,32,74,83,73,109,112,108,101,109,101,110,116,97,116,105,111,110,32,109,117,115,116,32,105,109,112,108,101,109,101,110,116,32,97,108,108,32,102,117,110,99,116,105,111,110,115,44,32,121,111,117,32,102,111,114,103,111,116,32,74,83,81,117,101,114,121,67,97,108,108,98,97,99,107,58,58,82,101,112,111,114,116,70,105,120,116,117,114,101,46,39,59,32,114,101,116,117,114,110,32,115,101,108,102,46,82,101,112,111,114,116,70,105,120,116,117,114,101,40,36,49,41,59,32,125,0,0,0,0,0,0,0,0,48,32,60,61,32,99,104,105,108,100,73,110,100,101,120,32,38,38,32,99,104,105,108,100,73,110,100,101,120,32,60,32,109,95,112,114,111,120,121,67,111,117,110,116,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,98,50,70,105,120,116,117,114,101,46,104,0,71,101,116,65,65,66,66,0,98,50,73,115,86,97,108,105,100,40,100,101,110,115,105,116,121,41,32,38,38,32,100,101,110,115,105,116,121,32,62,61,32,48,46,48,102,0,0,0,83,101,116,68,101,110,115,105,116,121,0,0,0,0,0,0,0,0,0,0,104,18,0,0,52,0,0,0,53,0,0,0,45,0,0,0,46,0,0,0,47,0,0,0,48,0,0,0,50,49,74,83,68,101,115,116,114,117,99,116,105,111,110,76,105,115,116,101,110,101,114,0,50,56,98,50,68,101,115,116,114,117,99,116,105,111,110,76,105,115,116,101,110,101,114,87,114,97,112,112,101,114,0,0,50,49,98,50,68,101,115,116,114,117,99,116,105,111,110,76,105,115,116,101,110,101,114,0,136,74,0,0,48,18,0,0,16,75,0,0,16,18,0,0,0,0,0,0,1,0,0,0,72,18,0,0,0,0,0,0,176,74,0,0,248,17,0,0,80,18,0,0,0,0,0,0,123,32,118,97,114,32,115,101,108,102,32,61,32,77,111,100,117,108,101,91,39,103,101,116,67,97,99,104,101,39,93,40,77,111,100,117,108,101,91,39,74,83,68,101,115,116,114,117,99,116,105,111,110,76,105,115,116,101,110,101,114,39,93,41,91,36,48,93,59,32,105,102,32,40,33,115,101,108,102,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,39,83,97,121,71,111,111,100,98,121,101,70,105,120,116,117,114,101,39,41,41,32,116,104,114,111,119,32,39,97,32,74,83,73,109,112,108,101,109,101,110,116,97,116,105,111,110,32,109,117,115,116,32,105,109,112,108,101,109,101,110,116,32,97,108,108,32,102,117,110,99,116,105,111,110,115,44,32,121,111,117,32,102,111,114,103,111,116,32,74,83,68,101,115,116,114,117,99,116,105,111,110,76,105,115,116,101,110,101,114,58,58,83,97,121,71,111,111,100,98,121,101,70,105,120,116,117,114,101,46,39,59,32,115,101,108,102,46,83,97,121,71,111,111,100,98,121,101,70,105,120,116,117,114,101,40,36,49,41,59,32,125,0,0,0,0,0,0,0,123,32,118,97,114,32,115,101,108,102,32,61,32,77,111,100,117,108,101,91,39,103,101,116,67,97,99,104,101,39,93,40,77,111,100,117,108,101,91,39,74,83,68,101,115,116,114,117,99,116,105,111,110,76,105,115,116,101,110,101,114,39,93,41,91,36,48,93,59,32,105,102,32,40,33,115,101,108,102,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,39,83,97,121,71,111,111,100,98,121,101,74,111,105,110,116,39,41,41,32,116,104,114,111,119,32,39,97,32,74,83,73,109,112,108,101,109,101,110,116,97,116,105,111,110,32,109,117,115,116,32,105,109,112,108,101,109,101,110,116,32,97,108,108,32,102,117,110,99,116,105,111,110,115,44,32,121,111,117,32,102,111,114,103,111,116,32,74,83,68,101,115,116,114,117,99,116,105,111,110,76,105,115,116,101,110,101,114,58,58,83,97,121,71,111,111,100,98,121,101,74,111,105,110,116,46,39,59,32,115,101,108,102,46,83,97,121,71,111,111,100,98,121,101,74,111,105,110,116,40,36,49,41,59,32,125,0,0,0,0,0,0,0,0,0,248,21,0,0,49,0,0,0,50,0,0,0,42,0,0,0,42,0,0,0,54,0,0,0,51,0,0,0,55,0,0,0,56,0,0,0,52,0,0,0,53,0,0,0,43,0,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,74,111,105,110,116,115,47,98,50,77,111,116,111,114,74,111,105,110,116,46,99,112,112,0,0,0,0,0,98,50,73,115,86,97,108,105,100,40,102,97,99,116,111,114,41,32,38,38,32,48,46,48,102,32,60,61,32,102,97,99,116,111,114,32,38,38,32,102,97,99,116,111,114,32,60,61,32,49,46,48,102,0,0,0,83,101,116,67,111,114,114,101,99,116,105,111,110,70,97,99,116,111,114,0,0,0,0,0,32,32,98,50,77,111,116,111,114,74,111,105,110,116,68,101,102,32,106,100,59,10,0,0,32,32,106,100,46,108,105,110,101,97,114,79,102,102,115,101,116,46,83,101,116,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,0,0,0,0,0,0,32,32,106,100,46,97,110,103,117,108,97,114,79,102,102,115,101,116,32,61,32,37,46,49,53,108,101,102,59,10,0,0,32,32,106,100,46,99,111,114,114,101,99,116,105,111,110,70,97,99,116,111,114,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,0,0,0,0,49,50,98,50,77,111,116,111,114,74,111,105,110,116,0,0,55,98,50,74,111,105,110,116,0,0,0,0,0,0,0,0,136,74,0,0,224,21,0,0,176,74,0,0,208,21,0,0,240,21,0,0,0,0,0,0,100,101,110,32,62,32,48,46,48,102,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,67,111,108,108,105,115,105,111,110,47,98,50,67,111,108,108,105,100,101,69,100,103,101,46,99,112,112,0,0,98,50,67,111,108,108,105,100,101,69,100,103,101,65,110,100,67,105,114,99,108,101,0,0,48,32,60,61,32,101,100,103,101,49,32,38,38,32,101,100,103,101,49,32,60,32,112,111,108,121,49,45,62,109,95,99,111,117,110,116,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,67,111,108,108,105,115,105,111,110,47,98,50,67,111,108,108,105,100,101,80,111,108,121,103,111,110,46,99,112,112,0,0,0,0,0,0,0,98,50,70,105,110,100,73,110,99,105,100,101,110,116,69,100,103,101,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,32,60,61,32,105,110,100,101,120,32,38,38,32,105,110,100,101,120,32,60,32,99,104,97,105,110,45,62,109,95,99,111,117,110,116,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,67,111,108,108,105,115,105,111,110,47,98,50,68,105,115,116,97,110,99,101,46,99,112,112,0,0,0,0,0,98,50,68,105,115,116,97,110,99,101,0,0,0,0,0,0,71,101,116,77,101,116,114,105,99,0,0,0,0,0,0,0,71,101,116,87,105,116,110,101,115,115,80,111,105,110,116,115,0,0,0,0,0,0,0,0,99,97,99,104,101,45,62,99,111,117,110,116,32,60,61,32,51,0,0,0,0,0,0,0,82,101,97,100,67,97,99,104,101,0,0,0,0,0,0,0,109,95,110,111,100,101,67,111,117,110,116,32,61,61,32,109,95,110,111,100,101,67,97,112,97,99,105,116,121,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,67,111,108,108,105,115,105,111,110,47,98,50,68,121,110,97,109,105,99,84,114,101,101,46,99,112,112,0,0,65,108,108,111,99,97,116,101,78,111,100,101,0,0,0,0,48,32,60,61,32,110,111,100,101,73,100,32,38,38,32,110,111,100,101,73,100,32,60,32,109,95,110,111,100,101,67,97,112,97,99,105,116,121,0,0,70,114,101,101,78,111,100,101,0,0,0,0,0,0,0,0,48,32,60,32,109,95,110,111,100,101,67,111,117,110,116,0,68,101,115,116,114,111,121,80,114,111,120,121,0,0,0,0,109,95,110,111,100,101,115,91,112,114,111,120,121,73,100,93,46,73,115,76,101,97,102,40,41,0,0,0,0,0,0,0,77,111,118,101,80,114,111,120,121,0,0,0,0,0,0,0,99,104,105,108,100,49,32,33,61,32,40,45,49,41,0,0,73,110,115,101,114,116,76,101,97,102,0,0,0,0,0,0,99,104,105,108,100,50,32,33,61,32,40,45,49,41,0,0,105,65,32,33,61,32,40,45,49,41,0,0,0,0,0,0,66,97,108,97,110,99,101,0,48,32,60,61,32,105,66,32,38,38,32,105,66,32,60,32,109,95,110,111,100,101,67,97,112,97,99,105,116,121,0,0,48,32,60,61,32,105,67,32,38,38,32,105,67,32,60,32,109,95,110,111,100,101,67,97,112,97,99,105,116,121,0,0,48,32,60,61,32,105,70,32,38,38,32,105,70,32,60,32,109,95,110,111,100,101,67,97,112,97,99,105,116,121,0,0,48,32,60,61,32,105,71,32,38,38,32,105,71,32,60,32,109,95,110,111,100,101,67,97,112,97,99,105,116,121,0,0,109,95,110,111,100,101,115,91,67,45,62,112,97,114,101,110,116,93,46,99,104,105,108,100,50,32,61,61,32,105,65,0,48,32,60,61,32,105,68,32,38,38,32,105,68,32,60,32,109,95,110,111,100,101,67,97,112,97,99,105,116,121,0,0,48,32,60,61,32,105,69,32,38,38,32,105,69,32,60,32,109,95,110,111,100,101,67,97,112,97,99,105,116,121,0,0,109,95,110,111,100,101,115,91,66,45,62,112,97,114,101,110,116,93,46,99,104,105,108,100,50,32,61,61,32,105,65,0,110,111,100,101,45,62,73,115,76,101,97,102,40,41,32,61,61,32,102,97,108,115,101,0,71,101,116,77,97,120,66,97,108,97,110,99,101,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,116,97,114,103,101,116,32,62,32,116,111,108,101,114,97,110,99,101,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,67,111,108,108,105,115,105,111,110,47,98,50,84,105,109,101,79,102,73,109,112,97,99,116,46,99,112,112,0,98,50,84,105,109,101,79,102,73,109,112,97,99,116,0,0,69,118,97,108,117,97,116,101,0,0,0,0,0,0,0,0,48,32,60,61,32,105,110,100,101,120,32,38,38,32,105,110,100,101,120,32,60,32,109,95,99,111,117,110,116,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,67,111,108,108,105,115,105,111,110,47,98,50,68,105,115,116,97,110,99,101,46,104,0,0,0,0,0,0,0,71,101,116,86,101,114,116,101,120,0,0,0,0,0,0,0,70,105,110,100,77,105,110,83,101,112,97,114,97,116,105,111,110,0,0,0,0,0,0,0,48,32,60,32,99,111,117,110,116,32,38,38,32,99,111,117,110,116,32,60,32,51,0,0,0,0,0,0,208,28,0,0,57,0,0,0,58,0,0,0,44,0,0,0,42,0,0,0,43,0,0,0,42,0,0,0,45,0,0,0,43,0,0,0,109,95,118,101,114,116,105,99,101,115,32,61,61,32,48,76,32,38,38,32,109,95,99,111,117,110,116,32,61,61,32,48,0,0,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,67,111,108,108,105,115,105,111,110,47,83,104,97,112,101,115,47,98,50,67,104,97,105,110,83,104,97,112,101,46,99,112,112,0,0,0,0,67,114,101,97,116,101,76,111,111,112,0,0,0,0,0,0,98,50,68,105,115,116,97,110,99,101,83,113,117,97,114,101,100,40,118,49,44,32,118,50,41,32,62,32,48,46,48,48,53,102,32,42,32,48,46,48,48,53,102,0,0,0,0,0,67,114,101,97,116,101,67,104,97,105,110,0,0,0,0,0,99,111,117,110,116,32,62,61,32,50,0,0,0,0,0,0,98,50,68,105,115,116,97,110,99,101,83,113,117,97,114,101,100,40,118,101,114,116,105,99,101,115,91,105,45,49,93,44,32,118,101,114,116,105,99,101,115,91,105,93,41,32,62,32,48,46,48,48,53,102,32,42,32,48,46,48,48,53,102,0,48,32,60,61,32,105,110,100,101,120,32,38,38,32,105,110,100,101,120,32,60,32,109,95,99,111,117,110,116,32,45,32,49,0,0,0,0,0,0,0,71,101,116,67,104,105,108,100,69,100,103,101,0,0,0,0,99,104,105,108,100,73,110,100,101,120,32,60,32,109,95,99,111,117,110,116,0,0,0,0,67,111,109,112,117,116,101,65,65,66,66,0,0,0,0,0,49,50,98,50,67,104,97,105,110,83,104,97,112,101,0,0,55,98,50,83,104,97,112,101,0,0,0,0,0,0,0,0,136,74,0,0,184,28,0,0,176,74,0,0,168,28,0,0,200,28,0,0,0,0,0,0,0,0,0,0,24,29,0,0,59,0,0,0,60,0,0,0,45,0,0,0,43,0,0,0,44,0,0,0,43,0,0,0,46,0,0,0,44,0,0,0,49,51,98,50,67,105,114,99,108,101,83,104,97,112,101,0,176,74,0,0,8,29,0,0,200,28,0,0,0,0,0,0,0,0,0,0,96,29,0,0,61,0,0,0,62,0,0,0,46,0,0,0,44,0,0,0,45,0,0,0,44,0,0,0,47,0,0,0,45,0,0,0,49,49,98,50,69,100,103,101,83,104,97,112,101,0,0,0,176,74,0,0,80,29,0,0,200,28,0,0,0,0,0,0,51,32,60,61,32,99,111,117,110,116,32,38,38,32,99,111,117,110,116,32,60,61,32,56,0,0,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,67,111,108,108,105,115,105,111,110,47,83,104,97,112,101,115,47,98,50,80,111,108,121,103,111,110,83,104,97,112,101,46,99,112,112,0,0,83,101,116,0,0,0,0,0,101,100,103,101,46,76,101,110,103,116,104,83,113,117,97,114,101,100,40,41,32,62,32,49,46,49,57,50,48,57,50,56,57,53,53,48,55,56,49,50,53,101,45,48,55,70,32,42,32,49,46,49,57,50,48,57,50,56,57,53,53,48,55,56,49,50,53,101,45,48,55,70,0,0,0,0,0,0,0,0,48,46,48,102,32,60,61,32,108,111,119,101,114,32,38,38,32,108,111,119,101,114,32,60,61,32,105,110,112,117,116,46,109,97,120,70,114,97,99,116,105,111,110,0,0,0,0,0,109,95,99,111,117,110,116,32,62,61,32,51,0,0,0,0,67,111,109,112,117,116,101,77,97,115,115,0,0,0,0,0,97,114,101,97,32,62,32,49,46,49,57,50,48,57,50,56,57,53,53,48,55,56,49,50,53,101,45,48,55,70,0,0,0,0,0,0,208,30,0,0,63,0,0,0,64,0,0,0,47,0,0,0,45,0,0,0,46,0,0,0,45,0,0,0,48,0,0,0,46,0,0,0,49,52,98,50,80,111,108,121,103,111,110,83,104,97,112,101,0,0,0,0,0,0,0,0,176,74,0,0,184,30,0,0,200,28,0,0,0,0,0,0,99,111,117,110,116,32,62,61,32,51,0,0,0,0,0,0,67,111,109,112,117,116,101,67,101,110,116,114,111,105,100,0,16,0,0,0,32,0,0,0,64,0,0,0,96,0,0,0,128,0,0,0,160,0,0,0,192,0,0,0,224,0,0,0,0,1,0,0,64,1,0,0,128,1,0,0,192,1,0,0,0,2,0,0,128,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,106,32,60,32,98,50,95,98,108,111,99,107,83,105,122,101,115,0,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,67,111,109,109,111,110,47,98,50,66,108,111,99,107,65,108,108,111,99,97,116,111,114,46,99,112,112,0,0,98,50,66,108,111,99,107,65,108,108,111,99,97,116,111,114,0,0,0,0,0,0,0,0,48,32,60,32,115,105,122,101,0,0,0,0,0,0,0,0,48,32,60,61,32,105,110,100,101,120,32,38,38,32,105,110,100,101,120,32,60,32,98,50,95,98,108,111,99,107,83,105,122,101,115,0,0,0,0,0,98,108,111,99,107,67,111,117,110,116,32,42,32,98,108,111,99,107,83,105,122,101,32,60,61,32,98,50,95,99,104,117,110,107,83,105,122,101,0,0,109,95,105,110,100,101,120,32,61,61,32,48,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,67,111,109,109,111,110,47,98,50,83,116,97,99,107,65,108,108,111,99,97,116,111,114,46,99,112,112,0,0,126,98,50,83,116,97,99,107,65,108,108,111,99,97,116,111,114,0,0,0,0,0,0,0,109,95,101,110,116,114,121,67,111,117,110,116,32,61,61,32,48,0,0,0,0,0,0,0,109,95,101,110,116,114,121,67,111,117,110,116,32,60,32,98,50,95,109,97,120,83,116,97,99,107,69,110,116,114,105,101,115,0,0,0,0,0,0,0,65,108,108,111,99,97,116,101,0,0,0,0,0,0,0,0,109,95,101,110,116,114,121,67,111,117,110,116,32,62,32,48,0,0,0,0,0,0,0,0,70,114,101,101,0,0,0,0,112,32,61,61,32,101,110,116,114,121,45,62,100,97,116,97,0,0,0,0,0,0,0,0,98,100,45,62,112,111,115,105,116,105,111,110,46,73,115,86,97,108,105,100,40,41,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,98,50,66,111,100,121,46,99,112,112,0,0,98,50,66,111,100,121,0,0,98,100,45,62,108,105,110,101,97,114,86,101,108,111,99,105,116,121,46,73,115,86,97,108,105,100,40,41,0,0,0,0,98,50,73,115,86,97,108,105,100,40,98,100,45,62,97,110,103,108,101,41,0,0,0,0,98,50,73,115,86,97,108,105,100,40,98,100,45,62,97,110,103,117,108,97,114,86,101,108,111,99,105,116,121,41,0,0,98,50,73,115,86,97,108,105,100,40,98,100,45,62,97,110,103,117,108,97,114,68,97,109,112,105,110,103,41,32,38,38,32,98,100,45,62,97,110,103,117,108,97,114,68,97,109,112,105,110,103,32,62,61,32,48,46,48,102,0,0,0,0,0,98,50,73,115,86,97,108,105,100,40,98,100,45,62,108,105,110,101,97,114,68,97,109,112,105,110,103,41,32,38,38,32,98,100,45,62,108,105,110,101,97,114,68,97,109,112,105,110,103,32,62,61,32,48,46,48,102,0,0,0,0,0,0,0,109,95,119,111,114,108,100,45,62,73,115,76,111,99,107,101,100,40,41,32,61,61,32,102,97,108,115,101,0,0,0,0,83,101,116,84,121,112,101,0,67,114,101,97,116,101,70,105,120,116,117,114,101,0,0,0,68,101,115,116,114,111,121,70,105,120,116,117,114,101,0,0,102,105,120,116,117,114,101,45,62,109,95,98,111,100,121,32,61,61,32,116,104,105,115,0,109,95,102,105,120,116,117,114,101,67,111,117,110,116,32,62,32,48,0,0,0,0,0,0,102,111,117,110,100,0,0,0,109,95,116,121,112,101,32,61,61,32,98,50,95,100,121,110,97,109,105,99,66,111,100,121,0,0,0,0,0,0,0,0,82,101,115,101,116,77,97,115,115,68,97,116,97,0,0,0,109,95,73,32,62,32,48,46,48,102,0,0,0,0,0,0,83,101,116,77,97,115,115,68,97,116,97,0,0,0,0,0,83,101,116,84,114,97,110,115,102,111,114,109,0,0,0,0,83,101,116,65,99,116,105,118,101,0,0,0,0,0,0,0,32,32,98,50,66,111,100,121,68,101,102,32,98,100,59,10,0,0,0,0,0,0,0,0,32,32,98,100,46,116,121,112,101,32,61,32,98,50,66,111,100,121,84,121,112,101,40,37,100,41,59,10,0,0,0,0,32,32,98,100,46,112,111,115,105,116,105,111,110,46,83,101,116,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,0,0,32,32,98,100,46,97,110,103,108,101,32,61,32,37,46,49,53,108,101,102,59,10,0,0,32,32,98,100,46,108,105,110,101,97,114,86,101,108,111,99,105,116,121,46,83,101,116,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,0,0,0,0,32,32,98,100,46,97,110,103,117,108,97,114,86,101,108,111,99,105,116,121,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,0,0,0,0,0,32,32,98,100,46,108,105,110,101,97,114,68,97,109,112,105,110,103,32,61,32,37,46,49,53,108,101,102,59,10,0,0,32,32,98,100,46,97,110,103,117,108,97,114,68,97,109,112,105,110,103,32,61,32,37,46,49,53,108,101,102,59,10,0,32,32,98,100,46,97,108,108,111,119,83,108,101,101,112,32,61,32,98,111,111,108,40,37,100,41,59,10,0,0,0,0,32,32,98,100,46,97,119,97,107,101,32,61,32,98,111,111,108,40,37,100,41,59,10,0,32,32,98,100,46,102,105,120,101,100,82,111,116,97,116,105,111,110,32,61,32,98,111,111,108,40,37,100,41,59,10,0,32,32,98,100,46,98,117,108,108,101,116,32,61,32,98,111,111,108,40,37,100,41,59,10,0,0,0,0,0,0,0,0,32,32,98,100,46,97,99,116,105,118,101,32,61,32,98,111,111,108,40,37,100,41,59,10,0,0,0,0,0,0,0,0,32,32,98,100,46,103,114,97,118,105,116,121,83,99,97,108,101,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,32,32,98,111,100,105,101,115,91,37,100,93,32,61,32,109,95,119,111,114,108,100,45,62,67,114,101,97,116,101,66,111,100,121,40,38,98,100,41,59,10,0,0,0,0,0,0,0,32,32,123,10,0,0,0,0,32,32,125,10,0,0,0,0,0,49,0,0,0,0,0,0,224,39,0,0,0,0,0,0,109,95,99,111,117,110,116,32,62,32,48,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,67,111,109,109,111,110,47,98,50,71,114,111,119,97,98,108,101,83,116,97,99,107,46,104,0,0,0,0,0,80,111,112,0,0,0,0,0,0,0,0,0,200,10,0,0,65,0,0,0,66,0,0,0,54,0,0,0,55,0,0,0,44,0,0,0,45,0,0,0,109,95,112,114,111,120,121,67,111,117,110,116,32,61,61,32],"i8",Za,h.L),$a([48,0,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,98,50,70,105,120,116,117,114,101,46,99,112,112,0,0,0,0,0,0,0,67,114,101,97,116,101,80,114,111,120,105,101,115,0,0,0,32,32,32,32,98,50,70,105,120,116,117,114,101,68,101,102,32,102,100,59,10,0,0,0,32,32,32,32,102,100,46,102,114,105,99,116,105,111,110,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,0,0,32,32,32,32,102,100,46,114,101,115,116,105,116,117,116,105,111,110,32,61,32,37,46,49,53,108,101,102,59,10,0,0,32,32,32,32,102,100,46,100,101,110,115,105,116,121,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,0,0,0,32,32,32,32,102,100,46,105,115,83,101,110,115,111,114,32,61,32,98,111,111,108,40,37,100,41,59,10,0,0,0,0,32,32,32,32,102,100,46,102,105,108,116,101,114,46,99,97,116,101,103,111,114,121,66,105,116,115,32,61,32,117,105,110,116,49,54,40,37,100,41,59,10,0,0,0,0,0,0,0,32,32,32,32,102,100,46,102,105,108,116,101,114,46,109,97,115,107,66,105,116,115,32,61,32,117,105,110,116,49,54,40,37,100,41,59,10,0,0,0,32,32,32,32,102,100,46,102,105,108,116,101,114,46,103,114,111,117,112,73,110,100,101,120,32,61,32,105,110,116,49,54,40,37,100,41,59,10,0,0,32,32,32,32,98,50,67,105,114,99,108,101,83,104,97,112,101,32,115,104,97,112,101,59,10,0,0,0,0,0,0,0,32,32,32,32,115,104,97,112,101,46,109,95,114,97,100,105,117,115,32,61,32,37,46,49,53,108,101,102,59,10,0,0,32,32,32,32,115,104,97,112,101,46,109,95,112,46,83,101,116,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,0,0,32,32,32,32,98,50,69,100,103,101,83,104,97,112,101,32,115,104,97,112,101,59,10,0,32,32,32,32,115,104,97,112,101,46,109,95,118,101,114,116,101,120,48,46,83,101,116,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,0,0,0,0,32,32,32,32,115,104,97,112,101,46,109,95,118,101,114,116,101,120,49,46,83,101,116,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,0,0,0,0,32,32,32,32,115,104,97,112,101,46,109,95,118,101,114,116,101,120,50,46,83,101,116,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,0,0,0,0,32,32,32,32,115,104,97,112,101,46,109,95,118,101,114,116,101,120,51,46,83,101,116,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,0,0,0,0,32,32,32,32,115,104,97,112,101,46,109,95,104,97,115,86,101,114,116,101,120,48,32,61,32,98,111,111,108,40,37,100,41,59,10,0,0,0,0,0,32,32,32,32,115,104,97,112,101,46,109,95,104,97,115,86,101,114,116,101,120,51,32,61,32,98,111,111,108,40,37,100,41,59,10,0,0,0,0,0,32,32,32,32,98,50,80,111,108,121,103,111,110,83,104,97,112,101,32,115,104,97,112,101,59,10,0,0,0,0,0,0,32,32,32,32,98,50,86,101,99,50,32,118,115,91,37,100,93,59,10,0,0,0,0,0,32,32,32,32,118,115,91,37,100,93,46,83,101,116,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,0,0,0,0,0,32,32,32,32,115,104,97,112,101,46,83,101,116,40,118,115,44,32,37,100,41,59,10,0,32,32,32,32,98,50,67,104,97,105,110,83,104,97,112,101,32,115,104,97,112,101,59,10,0,0,0,0,0,0,0,0,32,32,32,32,115,104,97,112,101,46,67,114,101,97,116,101,67,104,97,105,110,40,118,115,44,32,37,100,41,59,10,0,32,32,32,32,115,104,97,112,101,46,109,95,112,114,101,118,86,101,114,116,101,120,46,83,101,116,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,0,32,32,32,32,115,104,97,112,101,46,109,95,110,101,120,116,86,101,114,116,101,120,46,83,101,116,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,0,32,32,32,32,115,104,97,112,101,46,109,95,104,97,115,80,114,101,118,86,101,114,116,101,120,32,61,32,98,111,111,108,40,37,100,41,59,10,0,0,32,32,32,32,115,104,97,112,101,46,109,95,104,97,115,78,101,120,116,86,101,114,116,101,120,32,61,32,98,111,111,108,40,37,100,41,59,10,0,0,10,0,0,0,0,0,0,0,32,32,32,32,102,100,46,115,104,97,112,101,32,61,32,38,115,104,97,112,101,59,10,0,32,32,32,32,98,111,100,105,101,115,91,37,100,93,45,62,67,114,101,97,116,101,70,105,120,116,117,114,101,40,38,102,100,41,59,10,0,0,0,0,116,111,105,73,110,100,101,120,65,32,60,32,109,95,98,111,100,121,67,111,117,110,116,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,98,50,73,115,108,97,110,100,46,99,112,112,0,0,0,0,0,0,0,0,116,111,105,73,110,100,101,120,66,32,60,32,109,95,98,111,100,121,67,111,117,110,116,0,73,115,76,111,99,107,101,100,40,41,32,61,61,32,102,97,108,115,101,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,98,50,87,111,114,108,100,46,99,112,112,0,67,114,101,97,116,101,66,111,100,121,0,0,0,0,0,0,109,95,98,111,100,121,67,111,117,110,116,32,62,32,48,0,68,101,115,116,114,111,121,66,111,100,121,0,0,0,0,0,67,114,101,97,116,101,74,111,105,110,116,0,0,0,0,0,68,101,115,116,114,111,121,74,111,105,110,116,0,0,0,0,109,95,106,111,105,110,116,67,111,117,110,116,32,62,32,48,0,0,0,0,0,0,0,0,98,45,62,73,115,65,99,116,105,118,101,40,41,32,61,61,32,116,114,117,101,0,0,0,83,111,108,118,101,0,0,0,115,116,97,99,107,67,111,117,110,116,32,60,32,115,116,97,99,107,83,105,122,101,0,0,116,121,112,101,65,32,61,61,32,98,50,95,100,121,110,97,109,105,99,66,111,100,121,32,124,124,32,116,121,112,101,66,32,61,61,32,98,50,95,100,121,110,97,109,105,99,66,111,100,121,0,0,0,0,0,0,83,111,108,118,101,84,79,73,0,0,0,0,0,0,0,0,97,108,112,104,97,48,32,60,32,49,46,48,102,0,0,0,118,101,114,116,101,120,67,111,117,110,116,32,60,61,32,56,0,0,0,0,0,0,0,0,68,114,97,119,83,104,97,112,101,0,0,0,0,0,0,0,98,50,86,101,99,50,32,103,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,0,0,0,109,95,119,111,114,108,100,45,62,83,101,116,71,114,97,118,105,116,121,40,103,41,59,10,0,0,0,0,0,0,0,0,98,50,66,111,100,121,42,42,32,98,111,100,105,101,115,32,61,32,40,98,50,66,111,100,121,42,42,41,98,50,65,108,108,111,99,40,37,100,32,42,32,115,105,122,101,111,102,40,98,50,66,111,100,121,42,41,41,59,10,0,0,0,0,0,98,50,74,111,105,110,116,42,42,32,106,111,105,110,116,115,32,61,32,40,98,50,74,111,105,110,116,42,42,41,98,50,65,108,108,111,99,40,37,100,32,42,32,115,105,122,101,111,102,40,98,50,74,111,105,110,116,42,41,41,59,10,0,0,123,10,0,0,0,0,0,0,125,10,0,0,0,0,0,0,98,50,70,114,101,101,40,106,111,105,110,116,115,41,59,10,0,0,0,0,0,0,0,0,98,50,70,114,101,101,40,98,111,100,105,101,115,41,59,10,0,0,0,0,0,0,0,0,106,111,105,110,116,115,32,61,32,78,85,76,76,59,10,0,98,111,100,105,101,115,32,61,32,78,85,76,76,59,10,0,114,46,76,101,110,103,116,104,83,113,117,97,114,101,100,40,41,32,62,32,48,46,48,102,0,0,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,67,111,108,108,105,115,105,111,110,47,98,50,68,121,110,97,109,105,99,84,114,101,101,46,104,0,0,0,0,82,97,121,67,97,115,116,0,48,32,60,61,32,112,114,111,120,121,73,100,32,38,38,32,112,114,111,120,121,73,100,32,60,32,109,95,110,111,100,101,67,97,112,97,99,105,116,121,0,0,0,0,0,0,0,0,71,101,116,85,115,101,114,68,97,116,97,0,0,0,0,0,71,101,116,70,97,116,65,65,66,66,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,67,111,109,109,111,110,47,98,50,77,97,116,104,46,104,0,0,0,0,0,0,65,100,118,97,110,99,101,0,109,95,106,111,105,110,116,67,111,117,110,116,32,60,32,109,95,106,111,105,110,116,67,97,112,97,99,105,116,121,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,98,50,73,115,108,97,110,100,46,104,0,0,65,100,100,0,0,0,0,0,109,95,99,111,110,116,97,99,116,67,111,117,110,116,32,60,32,109,95,99,111,110,116,97,99,116,67,97,112,97,99,105,116,121,0,0,0,0,0,0,109,95,98,111,100,121,67,111,117,110,116,32,60,32,109,95,98,111,100,121,67,97,112,97,99,105,116,121,0,0,0,0,0,0,0,0,40,49,0,0,67,0,0,0,68,0,0,0,47,0,0,0,0,0,0,0,49,53,98,50,67,111,110,116,97,99,116,70,105,108,116,101,114,0,0,0,0,0,0,0,136,74,0,0,16,49,0,0,0,0,0,0,224,49,0,0,49,0,0,0,69,0,0,0,70,0,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,67,111,110,116,97,99,116,115,47,98,50,67,104,97,105,110,65,110,100,67,105,114,99,108,101,67,111,110,116,97,99,116,46,99,112,112,0,0,0,0,0,0,0,0,98,50,67,104,97,105,110,65,110,100,67,105,114,99,108,101,67,111,110,116,97,99,116,0,50,51,98,50,67,104,97,105,110,65,110,100,67,105,114,99,108,101,67,111,110,116,97,99,116,0,0,0,0,0,0,0,57,98,50,67,111,110,116,97,99,116,0,0,0,0,0,0,136,74,0,0,200,49,0,0,176,74,0,0,168,49,0,0,216,49,0,0,0,0,0,0,0,0,0,0,192,50,0,0,50,0,0,0,71,0,0,0,72,0,0,0,0,0,0,0,109,95,102,105,120,116,117,114,101,65,45,62,71,101,116,84,121,112,101,40,41,32,61,61,32,98,50,83,104,97,112,101,58,58,101,95,99,104,97,105,110,0,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,67,111,110,116,97,99,116,115,47,98,50,67,104,97,105,110,65,110,100,80,111,108,121,103,111,110,67,111,110,116,97,99,116,46,99,112,112,0,0,0,0,0,0,0,98,50,67,104,97,105,110,65,110,100,80,111,108,121,103,111,110,67,111,110,116,97,99,116,0,0,0,0,0,0,0,0,50,52,98,50,67,104,97,105,110,65,110,100,80,111,108,121,103,111,110,67,111,110,116,97,99,116,0,0,0,0,0,0,176,74,0,0,160,50,0,0,216,49,0,0,0,0,0,0,0,0,0,0,128,51,0,0,51,0,0,0,73,0,0,0,74,0,0,0,0,0,0,0,109,95,102,105,120,116,117,114,101,65,45,62,71,101,116,84,121,112,101,40,41,32,61,61,32,98,50,83,104,97,112,101,58,58,101,95,99,105,114,99,108,101,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,67,111,110,116,97,99,116,115,47,98,50,67,105,114,99,108,101,67,111,110,116,97,99,116,46,99,112,112,0,0,0,0,0,0,0,0,98,50,67,105,114,99,108,101,67,111,110,116,97,99,116,0,49,53,98,50,67,105,114,99,108,101,67,111,110,116,97,99,116,0,0,0,0,0,0,0,176,74,0,0,104,51,0,0,216,49,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,32,60,61,32,116,121,112,101,49,32,38,38,32,116,121,112,101,49,32,60,32,98,50,83,104,97,112,101,58,58,101,95,116,121,112,101,67,111,117,110,116,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,67,111,110,116,97,99,116,115,47,98,50,67,111,110,116,97,99,116,46,99,112,112,0,0,0,0,0,0,48,32,60,61,32,116,121,112,101,50,32,38,38,32,116,121,112,101,50,32,60,32,98,50,83,104,97,112,101,58,58,101,95,116,121,112,101,67,111,117,110,116,0,0,0,0,0,0,115,95,105,110,105,116,105,97,108,105,122,101,100,32,61,61,32,116,114,117,101,0,0,0,48,32,60,61,32,116,121,112,101,65,32,38,38,32,116,121,112,101,66,32,60,32,98,50,83,104,97,112,101,58,58,101,95,116,121,112,101,67,111,117,110,116,0,0,0,0,0,0,112,111,105,110,116,67,111,117,110,116,32,62,32,48,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,67,111,110,116,97,99,116,115,47,98,50,67,111,110,116,97,99,116,83,111,108,118,101,114,46,99,112,112,0,0,0,0,0,0,0,0,98,50,67,111,110,116,97,99,116,83,111,108,118,101,114,0,109,97,110,105,102,111,108,100,45,62,112,111,105,110,116,67,111,117,110,116,32,62,32,48,0,0,0,0,0,0,0,0,73,110,105,116,105,97,108,105,122,101,86,101,108,111,99,105,116,121,67,111,110,115,116,114,97,105,110,116,115,0,0,0,112,111,105,110,116,67,111,117,110,116,32,61,61,32,49,32,124,124,32,112,111,105,110,116,67,111,117,110,116,32,61,61,32,50,0,0,0,0,0,0,83,111,108,118,101,86,101,108,111,99,105,116,121,67,111,110,115,116,114,97,105,110,116,115,0,0,0,0,0,0,0,0,97,46,120,32,62,61,32,48,46,48,102,32,38,38,32,97,46,121,32,62,61,32,48,46,48,102,0,0,0,0,0,0,112,99,45,62,112,111,105,110,116,67,111,117,110,116,32,62,32,48,0,0,0,0,0,0,0,0,0,0,232,54,0,0,52,0,0,0,75,0,0,0,76,0,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,67,111,110,116,97,99,116,115,47,98,50,69,100,103,101,65,110,100,67,105,114,99,108,101,67,111,110,116,97,99,116,46,99,112,112,0,98,50,69,100,103,101,65,110,100,67,105,114,99,108,101,67,111,110,116,97,99,116,0,0,50,50,98,50,69,100,103,101,65,110,100,67,105,114,99,108,101,67,111,110,116,97,99,116,0,0,0,0,0,0,0,0,176,74,0,0,200,54,0,0,216,49,0,0,0,0,0,0,0,0,0,0,192,55,0,0,53,0,0,0,77,0,0,0,78,0,0,0,0,0,0,0,109,95,102,105,120,116,117,114,101,65,45,62,71,101,116,84,121,112,101,40,41,32,61,61,32,98,50,83,104,97,112,101,58,58,101,95,101,100,103,101,0,0,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,67,111,110,116,97,99,116,115,47,98,50,69,100,103,101,65,110,100,80,111,108,121,103,111,110,67,111,110,116,97,99,116,46,99,112,112,0,0,0,0,0,0,0,0,98,50,69,100,103,101,65,110,100,80,111,108,121,103,111,110,67,111,110,116,97,99,116,0,50,51,98,50,69,100,103,101,65,110,100,80,111,108,121,103,111,110,67,111,110,116,97,99,116,0,0,0,0,0,0,0,176,74,0,0,160,55,0,0,216,49,0,0,0,0,0,0,0,0,0,0,160,56,0,0,54,0,0,0,79,0,0,0,80,0,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,67,111,110,116,97,99,116,115,47,98,50,80,111,108,121,103,111,110,65,110,100,67,105,114,99,108,101,67,111,110,116,97,99,116,46,99,112,112,0,0,0,0,0,0,98,50,80,111,108,121,103,111,110,65,110,100,67,105,114,99,108,101,67,111,110,116,97,99,116,0,0,0,0,0,0,0,109,95,102,105,120,116,117,114,101,66,45,62,71,101,116,84,121,112,101,40,41,32,61,61,32,98,50,83,104,97,112,101,58,58,101,95,99,105,114,99,108,101,0,0,0,0,0,0,50,53,98,50,80,111,108,121,103,111,110,65,110,100,67,105,114,99,108,101,67,111,110,116,97,99,116,0,0,0,0,0,176,74,0,0,128,56,0,0,216,49,0,0,0,0,0,0,0,0,0,0,152,57,0,0,55,0,0,0,81,0,0,0,82,0,0,0,0,0,0,0,109,95,102,105,120,116,117,114,101,65,45,62,71,101,116,84,121,112,101,40,41,32,61,61,32,98,50,83,104,97,112,101,58,58,101,95,112,111,108,121,103,111,110,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,67,111,110,116,97,99,116,115,47,98,50,80,111,108,121,103,111,110,67,111,110,116,97,99,116,46,99,112,112,0,0,0,0,0,0,0,98,50,80,111,108,121,103,111,110,67,111,110,116,97,99,116,0,0,0,0,0,0,0,0,109,95,102,105,120,116,117,114,101,66,45,62,71,101,116,84,121,112,101,40,41,32,61,61,32,98,50,83,104,97,112,101,58,58,101,95,112,111,108,121,103,111,110,0,0,0,0,0,49,54,98,50,80,111,108,121,103,111,110,67,111,110,116,97,99,116,0,0,0,0,0,0,176,74,0,0,128,57,0,0,216,49,0,0,0,0,0,0,0,0,0,0,48,58,0,0,56,0,0,0,57,0,0,0,47,0,0,0,43,0,0,0,83,0,0,0,51,0,0,0,84,0,0,0,85,0,0,0,58,0,0,0,59,0,0,0,48,0,0,0,0,0,0,0,32,32,98,50,68,105,115,116,97,110,99,101,74,111,105,110,116,68,101,102,32,106,100,59,10,0,0,0,0,0,0,0,32,32,106,100,46,108,101,110,103,116,104,32,61,32,37,46,49,53,108,101,102,59,10,0,49,53,98,50,68,105,115,116,97,110,99,101,74,111,105,110,116,0,0,0,0,0,0,0,176,74,0,0,24,58,0,0,240,21,0,0,0,0,0,0,0,0,0,0,152,59,0,0,60,0,0,0,61,0,0,0,48,0,0,0,44,0,0,0,86,0,0,0,51,0,0,0,87,0,0,0,88,0,0,0,62,0,0,0,63,0,0,0,49,0,0,0,0,0,0,0,98,50,73,115,86,97,108,105,100,40,102,111,114,99,101,41,32,38,38,32,102,111,114,99,101,32,62,61,32,48,46,48,102,0,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,74,111,105,110,116,115,47,98,50,70,114,105,99,116,105,111,110,74,111,105,110,116,46,99,112,112,0,0,83,101,116,77,97,120,70,111,114,99,101,0,0,0,0,0,98,50,73,115,86,97,108,105,100,40,116,111,114,113,117,101,41,32,38,38,32,116,111,114,113,117,101,32,62,61,32,48,46,48,102,0,0,0,0,0,83,101,116,77,97,120,84,111,114,113,117,101,0,0,0,0,32,32,98,50,70,114,105,99,116,105,111,110,74,111,105,110,116,68,101,102,32,106,100,59,10,0,0,0,0,0,0,0,32,32,106,100,46,109,97,120,70,111,114,99,101,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,0,0,0,0,32,32,106,100,46,109,97,120,84,111,114,113,117,101,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,0,0,0,49,53,98,50,70,114,105,99,116,105,111,110,74,111,105,110,116,0,0,0,0,0,0,0,176,74,0,0,128,59,0,0,240,21,0,0,0,0,0,0,0,0,0,0,56,61,0,0,64,0,0,0,65,0,0,0,49,0,0,0,45,0,0,0,89,0,0,0,51,0,0,0,90,0,0,0,91,0,0,0,66,0,0,0,67,0,0,0,50,0,0,0,0,0,0,0,109,95,116,121,112,101,65,32,61,61,32,101,95,114,101,118,111,108,117,116,101,74,111,105,110,116,32,124,124,32,109,95,116,121,112,101,65,32,61,61,32,101,95,112,114,105,115,109,97,116,105,99,74,111,105,110,116,0,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,74,111,105,110,116,115,47,98,50,71,101,97,114,74,111,105,110,116,46,99,112,112,0,0,0,0,0,0,98,50,71,101,97,114,74,111,105,110,116,0,0,0,0,0,109,95,116,121,112,101,66,32,61,61,32,101,95,114,101,118,111,108,117,116,101,74,111,105,110,116,32,124,124,32,109,95,116,121,112,101,66,32,61,61,32,101,95,112,114,105,115,109,97,116,105,99,74,111,105,110,116,0,0,0,0,0,0,0,98,50,73,115,86,97,108,105,100,40,114,97,116,105,111,41,0,0,0,0,0,0,0,0,83,101,116,82,97,116,105,111,0,0,0,0,0,0,0,0,32,32,98,50,71,101,97,114,74,111,105,110,116,68,101,102,32,106,100,59,10,0,0,0,32,32,106,100,46,106,111,105,110,116,49,32,61,32,106,111,105,110,116,115,91,37,100,93,59,10,0,0,0,0,0,0,32,32,106,100,46,106,111,105,110,116,50,32,61,32,106,111,105,110,116,115,91,37,100,93,59,10,0,0,0,0,0,0,49,49,98,50,71,101,97,114,74,111,105,110,116,0,0,0,176,74,0,0,40,61,0,0,240,21,0,0,0,0,0,0,102,97,108,115,101,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,74,111,105,110,116,115,47,98,50,74,111,105,110,116,46,99,112,112,0,0,67,114,101,97,116,101,0,0,68,101,115,116,114,111,121,0,0,0,0,0,240,21,0,0,42,0,0,0,42,0,0,0,42,0,0,0,42,0,0,0,92,0,0,0,51,0,0,0,93,0,0,0,94,0,0,0,42,0,0,0,42,0,0,0,42,0,0,0,0,0,0,0,100,101,102,45,62,98,111,100,121,65,32,33,61,32,100,101,102,45,62,98,111,100,121,66,0,0,0,0,0,0,0,0,98,50,74,111,105,110,116,0,47,47,32,68,117,109,112,32,105,115,32,110,111,116,32,115,117,112,112,111,114,116,101,100,32,102,111,114,32,116,104,105,115,32,106,111,105,110,116,32,116,121,112,101,46,10,0,0,0,0,0,0,184,63,0,0,68,0,0,0,69,0,0,0,50,0,0,0,46,0,0,0,95,0,0,0,70,0,0,0,96,0,0,0,97,0,0,0,71,0,0,0,72,0,0,0,51,0,0,0,0,0,0,0,100,101,102,45,62,116,97,114,103,101,116,46,73,115,86,97,108,105,100,40,41,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,74,111,105,110,116,115,47,98,50,77,111,117,115,101,74,111,105,110,116,46,99,112,112,0,0,0,0,0,98,50,77,111,117,115,101,74,111,105,110,116,0,0,0,0,98,50,73,115,86,97,108,105,100,40,100,101,102,45,62,109,97,120,70,111,114,99,101,41,32,38,38,32,100,101,102,45,62,109,97,120,70,111,114,99,101,32,62,61,32,48,46,48,102,0,0,0,0,0,0,0,98,50,73,115,86,97,108,105,100,40,100,101,102,45,62,102,114,101,113,117,101,110,99,121,72,122,41,32,38,38,32,100,101,102,45,62,102,114,101,113,117,101,110,99,121,72,122,32,62,61,32,48,46,48,102,0,98,50,73,115,86,97,108,105,100,40,100,101,102,45,62,100,97,109,112,105,110,103,82,97,116,105,111,41,32,38,38,32,100,101,102,45,62,100,97,109,112,105,110,103,82,97,116,105,111,32,62,61,32,48,46,48,102,0,0,0,0,0,0,0,100,32,43,32,104,32,42,32,107,32,62,32,49,46,49,57,50,48,57,50,56,57,53,53,48,55,56,49,50,53,101,45,48,55,70,0,0,0,0,0,73,110,105,116,86,101,108,111,99,105,116,121,67,111,110,115,116,114,97,105,110,116,115,0,49,50,98,50,77,111,117,115,101,74,111,105,110,116,0,0,176,74,0,0,168,63,0,0,240,21,0,0,0,0,0,0,77,111,117,115,101,32,106,111,105,110,116,32,100,117,109,112,105,110,103,32,105,115,32,110,111,116,32,115,117,112,112,111,114,116,101,100,46,10,0,0,0,0,0,0,8,65,0,0,73,0,0,0,74,0,0,0,51,0,0,0,47,0,0,0,98,0,0,0,51,0,0,0,99,0,0,0,100,0,0,0,75,0,0,0,76,0,0,0,52,0,0,0,0,0,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,74,111,105,110,116,115,47,98,50,80,114,105,115,109,97,116,105,99,74,111,105,110,116,46,99,112,112,0,32,32,98,50,80,114,105,115,109,97,116,105,99,74,111,105,110,116,68,101,102,32,106,100,59,10,0,0,0,0,0,0,32,32,106,100,46,108,111,119,101,114,84,114,97,110,115,108,97,116,105,111,110,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,0,0,0,0,32,32,106,100,46,117,112,112,101,114,84,114,97,110,115,108,97,116,105,111,110,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,0,0,0,0,32,32,106,100,46,109,97,120,77,111,116,111,114,70,111,114,99,101,32,61,32,37,46,49,53,108,101,102,59,10,0,0,49,54,98,50,80,114,105,115,109,97,116,105,99,74,111,105,110,116,0,0,0,0,0,0,176,74,0,0,240,64,0,0,240,21,0,0,0,0,0,0,114,97,116,105,111,32,62,32,49,46,49,57,50,48,57,50,56,57,53,53,48,55,56,49,50,53,101,45,48,55,70,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,74,111,105,110,116,115,47,98,50,80,117,108,108,101,121,74,111,105,110,116,46,99,112,112,0,0,0,0,73,110,105,116,105,97,108,105,122,101,0,0,0,0,0,0,0,0,0,0,192,66,0,0,77,0,0,0,78,0,0,0,52,0,0,0,48,0,0,0,101,0,0,0,79,0,0,0,102,0,0,0,103,0,0,0,80,0,0,0,81,0,0,0,53,0,0,0,0,0,0,0,100,101,102,45,62,114,97,116,105,111,32,33,61,32,48,46,48,102,0,0,0,0,0,0,98,50,80,117,108,108,101,121,74,111,105,110,116,0,0,0,32,32,98,50,80,117,108,108,101,121,74,111,105,110,116,68,101,102,32,106,100,59,10,0,32,32,106,100,46,103,114,111,117,110,100,65,110,99,104,111,114,65,46,83,101,116,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,0,0,0,0,0,32,32,106,100,46,103,114,111,117,110,100,65,110,99,104,111,114,66,46,83,101,116,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,0,0,0,0,0,32,32,106,100,46,108,101,110,103,116,104,65,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,0,0,0,0,0,32,32,106,100,46,108,101,110,103,116,104,66,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,0,0,0,0,0,32,32,106,100,46,114,97,116,105,111,32,61,32,37,46,49,53,108,101,102,59,10,0,0,49,51,98,50,80,117,108,108,101,121,74,111,105,110,116,0,176,74,0,0,176,66,0,0,240,21,0,0,0,0,0,0,0,0,0,0,248,67,0,0,82,0,0,0,83,0,0,0,53,0,0,0,49,0,0,0,104,0,0,0,51,0,0,0,105,0,0,0,106,0,0,0,84,0,0,0,85,0,0,0,54,0,0,0,0,0,0,0,108,111,119,101,114,32,60,61,32,117,112,112,101,114,0,0,66,111,120,50,68,95,118,50,46,51,46,49,47,66,111,120,50,68,47,68,121,110,97,109,105,99,115,47,74,111,105,110,116,115,47,98,50,82,101,118,111,108,117,116,101,74,111,105,110,116,46,99,112,112,0,0,83,101,116,76,105,109,105,116,115,0,0,0,0,0,0,0,32,32,98,50,82,101,118,111,108,117,116,101,74,111,105,110,116,68,101,102,32,106,100,59,10,0,0,0,0,0,0,0,32,32,106,100,46,101,110,97,98,108,101,76,105,109,105,116,32,61,32,98,111,111,108,40,37,100,41,59,10,0,0,0,32,32,106,100,46,108,111,119,101,114,65,110,103,108,101,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,0,0,32,32,106,100,46,117,112,112,101,114,65,110,103,108,101,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,0,0,49,53,98,50,82,101,118,111,108,117,116,101,74,111,105,110,116,0,0,0,0,0,0,0,176,74,0,0,224,67,0,0,240,21,0,0,0,0,0,0,0,0,0,0,136,68,0,0,86,0,0,0,87,0,0,0,54,0,0,0,50,0,0,0,107,0,0,0,51,0,0,0,108,0,0,0,109,0,0,0,88,0,0,0,89,0,0,0,55,0,0,0,0,0,0,0,32,32,98,50,82,111,112,101,74,111,105,110,116,68,101,102,32,106,100,59,10,0,0,0,32,32,106,100,46,109,97,120,76,101,110,103,116,104,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,0,0,0,49,49,98,50,82,111,112,101,74,111,105,110,116,0,0,0,176,74,0,0,120,68,0,0,240,21,0,0,0,0,0,0,0,0,0,0,24,69,0,0,90,0,0,0,91,0,0,0,55,0,0,0,51,0,0,0,110,0,0,0,51,0,0,0,111,0,0,0,112,0,0,0,92,0,0,0,93,0,0,0,56,0,0,0,0,0,0,0,32,32,98,50,87,101,108,100,74,111,105,110,116,68,101,102,32,106,100,59,10,0,0,0,32,32,106,100,46,114,101,102,101,114,101,110,99,101,65,110,103,108,101,32,61,32,37,46,49,53,108,101,102,59,10,0,49,49,98,50,87,101,108,100,74,111,105,110,116,0,0,0,176,74,0,0,8,69,0,0,240,21,0,0,0,0,0,0,0,0,0,0,72,71,0,0,94,0,0,0,95,0,0,0,56,0,0,0,52,0,0,0,113,0,0,0,51,0,0,0,114,0,0,0,115,0,0,0,96,0,0,0,97,0,0,0,57,0,0,0,0,0,0,0,32,32,98,50,87,104,101,101,108,74,111,105,110,116,68,101,102,32,106,100,59,10,0,0,32,32,106,100,46,98,111,100,121,65,32,61,32,98,111,100,105,101,115,91,37,100,93,59,10,0,0,0,0,0,0,0,32,32,106,100,46,98,111,100,121,66,32,61,32,98,111,100,105,101,115,91,37,100,93,59,10,0,0,0,0,0,0,0,32,32,106,100,46,99,111,108,108,105,100,101,67,111,110,110,101,99,116,101,100,32,61,32,98,111,111,108,40,37,100,41,59,10,0,0,0,0,0,0,32,32,106,100,46,108,111,99,97,108,65,110,99,104,111,114,65,46,83,101,116,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,0,0,0,0,0,0,32,32,106,100,46,108,111,99,97,108,65,110,99,104,111,114,66,46,83,101,116,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,0,0,0,0,0,0,32,32,106,100,46,108,111,99,97,108,65,120,105,115,65,46,83,101,116,40,37,46,49,53,108,101,102,44,32,37,46,49,53,108,101,102,41,59,10,0,32,32,106,100,46,101,110,97,98,108,101,77,111,116,111,114,32,61,32,98,111,111,108,40,37,100,41,59,10,0,0,0,32,32,106,100,46,109,111,116,111,114,83,112,101,101,100,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,0,0,32,32,106,100,46,109,97,120,77,111,116,111,114,84,111,114,113,117,101,32,61,32,37,46,49,53,108,101,102,59,10,0,32,32,106,100,46,102,114,101,113,117,101,110,99,121,72,122,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,0,32,32,106,100,46,100,97,109,112,105,110,103,82,97,116,105,111,32,61,32,37,46,49,53,108,101,102,59,10,0,0,0,32,32,106,111,105,110,116,115,91,37,100,93,32,61,32,109,95,119,111,114,108,100,45,62,67,114,101,97,116,101,74,111,105,110,116,40,38,106,100,41,59,10,0,0,0,0,0,0,49,50,98,50,87,104,101,101,108,74,111,105,110,116,0,0,176,74,0,0,56,71,0,0,240,21,0,0,0,0,0,0,43,0,0,0,0,0,0,0,117,110,99,97,117,103,104,116,0,0,0,0,0,0,0,0,116,101,114,109,105,110,97,116,105,110,103,32,119,105,116,104,32,37,115,32,101,120,99,101,112,116,105,111,110,32,111,102,32,116,121,112,101,32,37,115,58,32,37,115,0,0,0,0,116,101,114,109,105,110,97,116,105,110,103,32,119,105,116,104,32,37,115,32,101,120,99,101,112,116,105,111,110,32,111,102,32,116,121,112,101,32,37,115,0,0,0,0,0,0,0,0,116,101,114,109,105,110,97,116,105,110,103,32,119,105,116,104,32,37,115,32,102,111,114,101,105,103,110,32,101,120,99,101,112,116,105,111,110,0,0,0,116,101,114,109,105,110,97,116,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,116,104,114,101,97,100,95,111,110,99,101,32,102,97,105,108,117,114,101,32,105,110,32,95,95,99,120,97,95,103,101,116,95,103,108,111,98,97,108,115,95,102,97,115,116,40,41,0,0,0,0,0,0,0,0,99,97,110,110,111,116,32,99,114,101,97,116,101,32,112,116,104,114,101,97,100,32,107,101,121,32,102,111,114,32,95,95,99,120,97,95,103,101,116,95,103,108,111,98,97,108,115,40,41,0,0,0,0,0,0,0,99,97,110,110,111,116,32,122,101,114,111,32,111,117,116,32,116,104,114,101,97,100,32,118,97,108,117,101,32,102,111,114,32,95,95,99,120,97,95,103,101,116,95,103,108,111,98,97,108,115,40,41,0,0,0,0,0,0,0,0,248,72,0,0,116,0,0,0,117,0,0,0,46,0,0,0,0,0,0,0,115,116,100,58,58,98,97,100,95,97,108,108,111,99,0,0,83,116,57,98,97,100,95,97,108,108,111,99,0,0,0,0,176,74,0,0,232,72,0,0,128,73,0,0,0,0,0,0,116,101,114,109,105,110,97,116,101,95,104,97,110,100,108,101,114,32,117,110,101,120,112,101,99,116,101,100,108,121,32,114,101,116,117,114,110,101,100,0,116,101,114,109,105,110,97,116,101,95,104,97,110,100,108,101,114,32,117,110,101,120,112,101,99,116,101,100,108,121,32,116,104,114,101,119,32,97,110,32,101,120,99,101,112,116,105,111,110,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,83,116,57,101,120,99,101,112,116,105,111,110,0,0,0,0,136,74,0,0,112,73,0,0,83,116,57,116,121,112,101,95,105,110,102,111,0,0,0,0,136,74,0,0,136,73,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,54,95,95,115,104,105,109,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,0,0,0,176,74,0,0,160,73,0,0,152,73,0,0,0,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,55,95,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,0,0,176,74,0,0,216,73,0,0,200,73,0,0,0,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,57,95,95,112,111,105,110,116,101,114,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,55,95,95,112,98,97,115,101,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,0,0,176,74,0,0,56,74,0,0,200,73,0,0,0,0,0,0,176,74,0,0,16,74,0,0,96,74,0,0,0,0,0,0,0,0,0,0,0,74,0,0,118,0,0,0,119,0,0,0,120,0,0,0,121,0,0,0,48,0,0,0,42,0,0,0,42,0,0,0,56,0,0,0,0,0,0,0,248,74,0,0,118,0,0,0,122,0,0,0,120,0,0,0,121,0,0,0,48,0,0,0,43,0,0,0,43,0,0,0,57,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,48,95,95,115,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,176,74,0,0,208,74,0,0,0,74,0,0,0,0,0,0,0,0,0,0,88,75,0,0,118,0,0,0,123,0,0,0,120,0,0,0,121,0,0,0,48,0,0,0,44,0,0,0,44,0,0,0,58,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,49,95,95,118,109,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,0,0,176,74,0,0,48,75,0,0,0,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"i8",Za,h.L+10240);var Ob=h.C($a(12,"i8",Xa),8);oa(0==Ob%8);var Pb=Qa;function Qb(){return!!Qb.K}var Rb=0,Sb=[],Tb={};function Ub(e){if(!e||Tb[e])return e;for(var t in Tb)if(Tb[t].N===e)return t;return e}function Vb(){if(!(_=Rb))return 0|(i.setTempRet0(0),0);var t=Tb[_],n=t.type;if(!n)return 0|(i.setTempRet0(0),_);var r=Array.prototype.slice.call(arguments);e.___cxa_is_pointer_type(n),Vb.buffer||(Vb.buffer=ab(4)),Ma[Vb.buffer>>2]=_;for(var _=Vb.buffer,o=0;o<r.length;o++)if(r[o]&&e.___cxa_can_catch(r[o],n,_))return _=Ma[_>>2],t.N=_,0|(i.setTempRet0(r[o]),_);return _=Ma[_>>2],0|(i.setTempRet0(n),_)}function Xb(e,t){Xb.H||(Xb.H={}),e in Xb.H||(h.r("v",t),Xb.H[e]=1)}e._memset=Wb,e._strlen=Yb;var va=d,Zb=0;function $b(e){return Ma[Zb>>2]=e}var ac=9;function bc(e,t,n){if(!(e=va.$(e)))return $b(ac),-1;try{return va.write(e,Ka,t,n)}catch(i){return va.ba(i),-1}}function cc(e){return(e=va.R(e))?e.sa:-1}function dc(e,t){var n=Cb(255&e);return Ka[dc.T>>0]=n,-1==bc(cc(t),dc.T,1)?((n=va.R(t))&&(n.error=aa),-1):n}var ec={},fc=1;function gc(e,t,n,i){return 0==(n*=t)?0:-1==(e=bc(cc(i),e,n))?((t=va.R(i))&&(t.error=aa),0):e/t|0}function hc(e){return 0>e||0===e&&-1/0==1/e}function ic(e,t){function n(e){var n;return"double"===e?(Ma[Ob>>2]=Ma[t+o>>2],Ma[Ob+4>>2]=Ma[t+(o+4)>>2],n=+Ta[Ob>>3]):"i64"==e?n=[Ma[t+o>>2],Ma[t+(o+4)>>2]]:(e="i32",n=Ma[t+o>>2]),o+=h.P(e),n}for(var i,r,_=e,o=0,c=[];;){var p=_;if(0===(i=Ka[_>>0]))break;if(r=Ka[_+1>>0],37==i){var s=ca,u=ca,b=ca,f=ca,a=ca;e:for(;;){switch(r){case 43:s=aa;break;case 45:u=aa;break;case 35:b=aa;break;case 48:if(f)break e;f=aa;break;case 32:a=aa;break;default:break e}r=Ka[++_+1>>0]}var d=0;if(42==r)d=n("i32"),r=Ka[++_+1>>0];else for(;48<=r&&57>=r;)d=10*d+(r-48),r=Ka[++_+1>>0];var y,l=ca,m=-1;if(46==r){if(m=0,l=aa,42==(r=Ka[++_+1>>0]))m=n("i32"),_++;else for(;!(48>(r=Ka[_+1>>0])||57<r);)m=10*m+(r-48),_++;r=Ka[_+1>>0]}switch(0>m&&(m=6,l=ca),String.fromCharCode(r)){case"h":104==(r=Ka[_+2>>0])?(_++,y=1):y=2;break;case"l":108==(r=Ka[_+2>>0])?(_++,y=8):y=4;break;case"L":case"q":case"j":y=8;break;case"z":case"t":case"I":y=4;break;default:y=ba}switch(y&&_++,r=Ka[_+1>>0],String.fromCharCode(r)){case"d":case"i":case"u":case"o":case"x":case"X":case"p":p=100==r||105==r;var v,g=i=n("i"+8*(y=y||4));8==y&&(i=h.ca(i[0],i[1],117==r)),4>=y&&(i=(p?Db:Cb)(i&Math.pow(256,y)-1,8*y));var J=Math.abs(i);p="";if(100==r||105==r)v=8==y&&jc?jc.stringify(g[0],g[1],ba):Db(i,8*y).toString(10);else if(117==r)v=8==y&&jc?jc.stringify(g[0],g[1],aa):Cb(i,8*y).toString(10),i=Math.abs(i);else if(111==r)v=(b?"0":"")+J.toString(8);else if(120==r||88==r){if(p=b&&0!=i?"0x":"",8==y&&jc)if(g[1]){for(v=(g[1]>>>0).toString(16),b=(g[0]>>>0).toString(16);8>b.length;)b="0"+b;v+=b}else v=(g[0]>>>0).toString(16);else if(0>i){for(i=-i,v=(J-1).toString(16),g=[],b=0;b<v.length;b++)g.push((15-parseInt(v[b],16)).toString(16));for(v=g.join("");v.length<2*y;)v="f"+v}else v=J.toString(16);88==r&&(p=p.toUpperCase(),v=v.toUpperCase())}else 112==r&&(0===J?v="(nil)":(p="0x",v=J.toString(16)));if(l)for(;v.length<m;)v="0"+v;for(0<=i&&(s?p="+"+p:a&&(p=" "+p)),"-"==v.charAt(0)&&(p="-"+p,v=v.substr(1));p.length+v.length<d;)u?v+=" ":f?v="0"+v:p=" "+p;(v=p+v).split("").forEach(function(e){c.push(e.charCodeAt(0))});break;case"f":case"F":case"e":case"E":case"g":case"G":if(i=n("double"),isNaN(i))v="nan",f=ca;else if(isFinite(i)){if(l=ca,y=Math.min(m,20),103!=r&&71!=r||(l=aa,(m=m||1)>(y=parseInt(i.toExponential(y).split("e")[1],10))&&-4<=y?(r=(103==r?"f":"F").charCodeAt(0),m-=y+1):(r=(103==r?"e":"E").charCodeAt(0),m--),y=Math.min(m,20)),101==r||69==r?(v=i.toExponential(y),/[eE][-+]\d$/.test(v)&&(v=v.slice(0,-1)+"0"+v.slice(-1))):102!=r&&70!=r||(v=i.toFixed(y),0===i&&hc(i)&&(v="-"+v)),p=v.split("e"),l&&!b)for(;1<p[0].length&&-1!=p[0].indexOf(".")&&("0"==p[0].slice(-1)||"."==p[0].slice(-1));)p[0]=p[0].slice(0,-1);else for(b&&-1==v.indexOf(".")&&(p[0]+=".");m>y++;)p[0]+="0";v=p[0]+(1<p.length?"e"+p[1]:""),69==r&&(v=v.toUpperCase()),0<=i&&(s?v="+"+v:a&&(v=" "+v))}else v=(0>i?"-":"")+"inf",f=ca;for(;v.length<d;)v=u?v+" ":!f||"-"!=v[0]&&"+"!=v[0]?(f?"0":" ")+v:v[0]+"0"+v.slice(1);97>r&&(v=v.toUpperCase()),v.split("").forEach(function(e){c.push(e.charCodeAt(0))});break;case"s":if(f=(s=n("i8*"))?Yb(s):6,l&&(f=Math.min(f,m)),!u)for(;f<d--;)c.push(32);if(s)for(b=0;b<f;b++)c.push(bb[s++>>0]);else c=c.concat(Ab("(null)".substr(0,f),aa));if(u)for(;f<d--;)c.push(32);break;case"c":for(u&&c.push(n("i8"));0<--d;)c.push(32);u||c.push(n("i8"));break;case"n":u=n("i32*"),Ma[u>>2]=c.length;break;case"%":c.push(i);break;default:for(b=p;b<_+2;b++)c.push(Ka[b>>0])}_+=2}else c.push(i),_+=1}return c}function kc(e,t,n){return n=ic(t,n),t=h.A(),e=gc($a(n,"i8",Wa),1,n.length,e),h.J(t),e}function lc(t,n){var i=ic(t,n),r=Bb(i);return"\n"===r[r.length-1]&&(r=r.substr(0,r.length-1)),e.print(r),i.length}function nc(e){nc.Z||(xa=xa+4095&-4096,nc.Z=aa,oa(h.o),nc.W=h.o,h.o=function(){ua("cannot dynamically allocate, sbrk now has control")});var t=xa;return 0!=e&&nc.W(e),t}function ab(e){return h.o(e+8)+8&4294967288}e._memcpy=mc,e._malloc=ab;var oc=$a(1,"i32*",Xa);dc.T=$a([0],"i8",Xa),Zb=h.U(4),Ma[Zb>>2]=0,kb=ra=h.C(wa),lb=kb+nb,mb=xa=h.C(lb),oa(mb<ya,"TOTAL_MEMORY not big enough for stack"),e.X={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array},e.Y={abort:ua,assert:oa,min:Pa,jsCall:function(){var e=Array.prototype.slice.call(arguments);return h.p[e[0]].apply(ba,e.slice(1))},invoke_iiii:function(t,n,r,_){try{return e.dynCall_iiii(t,n,r,_)}catch(o){"number"!=typeof o&&"longjmp"!==o&&c(o),i.setThrew(1,0)}},invoke_viiiii:function(t,n,r,_,o,p){try{e.dynCall_viiiii(t,n,r,_,o,p)}catch(s){"number"!=typeof s&&"longjmp"!==s&&c(s),i.setThrew(1,0)}},invoke_did:function(t,n,r){try{return e.dynCall_did(t,n,r)}catch(_){"number"!=typeof _&&"longjmp"!==_&&c(_),i.setThrew(1,0)}},invoke_vi:function(t,n){try{e.dynCall_vi(t,n)}catch(r){"number"!=typeof r&&"longjmp"!==r&&c(r),i.setThrew(1,0)}},invoke_diiiid:function(t,n,r,_,o,p){try{return e.dynCall_diiiid(t,n,r,_,o,p)}catch(s){"number"!=typeof s&&"longjmp"!==s&&c(s),i.setThrew(1,0)}},invoke_vii:function(t,n,r){try{e.dynCall_vii(t,n,r)}catch(_){"number"!=typeof _&&"longjmp"!==_&&c(_),i.setThrew(1,0)}},invoke_viidii:function(t,n,r,_,o,p){try{e.dynCall_viidii(t,n,r,_,o,p)}catch(s){"number"!=typeof s&&"longjmp"!==s&&c(s),i.setThrew(1,0)}},invoke_ii:function(t,n){try{return e.dynCall_ii(t,n)}catch(r){"number"!=typeof r&&"longjmp"!==r&&c(r),i.setThrew(1,0)}},invoke_viidi:function(t,n,r,_,o){try{e.dynCall_viidi(t,n,r,_,o)}catch(p){"number"!=typeof p&&"longjmp"!==p&&c(p),i.setThrew(1,0)}},invoke_viii:function(t,n,r,_){try{e.dynCall_viii(t,n,r,_)}catch(o){"number"!=typeof o&&"longjmp"!==o&&c(o),i.setThrew(1,0)}},invoke_v:function(t){try{e.dynCall_v(t)}catch(n){"number"!=typeof n&&"longjmp"!==n&&c(n),i.setThrew(1,0)}},invoke_viid:function(t,n,r,_){try{e.dynCall_viid(t,n,r,_)}catch(o){"number"!=typeof o&&"longjmp"!==o&&c(o),i.setThrew(1,0)}},invoke_viiiiii:function(t,n,r,_,o,p,s){try{e.dynCall_viiiiii(t,n,r,_,o,p,s)}catch(u){"number"!=typeof u&&"longjmp"!==u&&c(u),i.setThrew(1,0)}},invoke_iii:function(t,n,r){try{return e.dynCall_iii(t,n,r)}catch(_){"number"!=typeof _&&"longjmp"!==_&&c(_),i.setThrew(1,0)}},invoke_iiiiii:function(t,n,r,_,o,p){try{return e.dynCall_iiiiii(t,n,r,_,o,p)}catch(s){"number"!=typeof s&&"longjmp"!==s&&c(s),i.setThrew(1,0)}},invoke_viiii:function(t,n,r,_,o){try{e.dynCall_viiii(t,n,r,_,o)}catch(p){"number"!=typeof p&&"longjmp"!==p&&c(p),i.setThrew(1,0)}},_cosf:Eb,_send:function(e,t,n){return d.ya(e)?bc(e,t,n):($b(ac),-1)},_pthread_key_create:function(e){return 0==e?22:(Ma[e>>2]=fc,ec[fc]=0,fc++,0)},___cxa_guard_acquire:function(e){return Ka[e>>0]?0:Ka[e>>0]=1},___setErrNo:$b,_vfprintf:function(e,t,n){return kc(e,t,Ma[n>>2])},_emscripten_asm_const_int:function(e){var t=Array.prototype.slice.call(arguments,1);return 0|h.O(e,t.length).apply(ba,t)},___assert_fail:function(e,t,n,i){za=aa,c("Assertion failed: "+sa(e)+", at: "+[t?sa(t):"unknown filename",n,i?sa(i):"unknown function"]+" at "+fb())},_atan2f:Gb,__ZSt18uncaught_exceptionv:Qb,___cxa_guard_release:function(){},_pwrite:function(e,t,n,i){if(!(e=va.$(e)))return $b(ac),-1;try{return va.write(e,Ka,t,n,i)}catch(r){return va.ba(r),-1}},_emscripten_asm_const_double:function(e){var t=Array.prototype.slice.call(arguments,1);return+h.O(e,t.length).apply(ba,t)},_fprintf:kc,__reallyNegative:hc,_sbrk:nc,___cxa_begin_catch:function(e){Qb.K--,Sb.push(e);var t=Ub(e);return t&&Tb[t].S++,e},_sinf:Fb,_fileno:cc,___resumeException:function(e){Rb||(Rb=e);var t=Ub(e);t&&(Tb[t].S=0),c(e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch.")},___cxa_find_matching_catch:Vb,_sysconf:function(e){switch(e){case 30:return 4096;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 79:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return $b(22),-1},_pthread_getspecific:function(e){return ec[e]||0},_vprintf:function(e,t){return lc(e,Ma[t>>2])},_emscripten_memcpy_big:function(e,t,n){return bb.set(bb.subarray(t,t+n),e),e},_pthread_once:Xb,_printf:lc,_floorf:Pb,_sqrtf:Hb,_write:bc,___errno_location:function(){return Zb},_pthread_setspecific:function(e,t){return e in ec?(ec[e]=t,0):22},_fputc:dc,___cxa_throw:function(e,t,n){Tb[e]={e:e,N:e,type:t,qa:n,S:0},Rb=e,"uncaught_exception"in Qb?Qb.K++:Qb.K=1,c(e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch.")},_abort:function(){e.abort()},_fwrite:gc,_time:function(e){var t=Date.now()/1e3|0;return e&&(Ma[e>>2]=t),t},___cxa_allocate_exception:function(e){return ab(e)},__formatString:ic,___cxa_pure_virtual:function(){za=aa,c("Pure virtual function called!")},STACKTOP:ra,STACK_MAX:lb,tempDoublePtr:Ob,ABORT:za,NaN:NaN,Infinity:1/0,_stderr:oc};var i=function(e,t,n){"use asm";var i=new e.Int8Array(n);var r=new e.Int16Array(n);var _=new e.Int32Array(n);var o=new e.Uint8Array(n);var c=new e.Uint16Array(n);var p=new e.Uint32Array(n);var s=new e.Float32Array(n);var u=new e.Float64Array(n);var b=t.STACKTOP|0;var f=t.STACK_MAX|0;var a=t.tempDoublePtr|0;var d=t.ABORT|0;var y=t._stderr|0;var l=0;var m=0;var h=0;var v=0;var g=+t.NaN,J=+t.Infinity;var D=0,x=0,G=0,j=0,A=0.0,S=0,C=0,B=0,k=0.0;var w=0;var M=0;var R=0;var q=0;var F=0;var P=0;var T=0;var L=0;var I=0;var W=0;var E=e.Math.floor;var O=e.Math.abs;var V=e.Math.sqrt;var U=e.Math.pow;var N=e.Math.cos;var z=e.Math.sin;var H=e.Math.tan;var Q=e.Math.acos;var K=e.Math.asin;var $=e.Math.atan;var Z=e.Math.atan2;var Y=e.Math.exp;var X=e.Math.log;var ee=e.Math.ceil;var te=e.Math.imul;var ne=t.abort;var ie=t.assert;var re=t.min;var _e=t.jsCall;var oe=t.invoke_iiii;var ce=t.invoke_viiiii;var pe=t.invoke_did;var se=t.invoke_vi;var ue=t.invoke_diiiid;var be=t.invoke_vii;var fe=t.invoke_viidii;var ae=t.invoke_ii;var de=t.invoke_viidi;var ye=t.invoke_viii;var le=t.invoke_v;var me=t.invoke_viid;var he=t.invoke_viiiiii;var ve=t.invoke_iii;var ge=t.invoke_iiiiii;var Je=t.invoke_viiii;var De=t._cosf;var xe=t._send;var Ge=t._pthread_key_create;var je=t.___cxa_guard_acquire;var Ae=t.___setErrNo;var Se=t._vfprintf;var Ce=t._emscripten_asm_const_int;var Be=t.___assert_fail;var ke=t._atan2f;var we=t.__ZSt18uncaught_exceptionv;var Me=t.___cxa_guard_release;var Re=t._pwrite;var qe=t._emscripten_asm_const_double;var Fe=t._fprintf;var Pe=t.__reallyNegative;var Te=t._sbrk;var Le=t.___cxa_begin_catch;var Ie=t._sinf;var We=t._fileno;var Ee=t.___resumeException;var Oe=t.___cxa_find_matching_catch;var Ve=t._sysconf;var Ue=t._pthread_getspecific;var Ne=t._vprintf;var ze=t._emscripten_memcpy_big;var He=t._pthread_once;var Qe=t._printf;var Ke=t._floorf;var $e=t._sqrtf;var Ze=t._write;var Ye=t.___errno_location;var Xe=t._pthread_setspecific;var et=t._fputc;var tt=t.___cxa_throw;var nt=t._abort;var it=t._fwrite;var rt=t._time;var _t=t.___cxa_allocate_exception;var ot=t.__formatString;var ct=t.___cxa_pure_virtual;var pt=0.0;function st(e){e=e|0;var t=0;t=b;b=b+e|0;b=b+15&-16;return t|0}function ut(){return b|0}function bt(e){e=e|0;b=e}function ft(e,t){e=e|0;t=t|0;if(!l){l=e;m=t}}function at(e){e=e|0;i[a>>0]=i[e>>0];i[a+1>>0]=i[e+1>>0];i[a+2>>0]=i[e+2>>0];i[a+3>>0]=i[e+3>>0]}function dt(e){e=e|0;i[a>>0]=i[e>>0];i[a+1>>0]=i[e+1>>0];i[a+2>>0]=i[e+2>>0];i[a+3>>0]=i[e+3>>0];i[a+4>>0]=i[e+4>>0];i[a+5>>0]=i[e+5>>0];i[a+6>>0]=i[e+6>>0];i[a+7>>0]=i[e+7>>0]}function yt(e){e=e|0;w=e}function lt(){return w|0}function mt(){var e=0,t=0,n=0;e=b;t=kS(4)|0;if(t){n=t;_[n>>2]=4576;b=e;return n|0}while(1){t=_[4698]|0;_[4698]=t+0;if(!t){t=4;break}Jq[t&63]();n=kS(4)|0;if(n){t=5;break}}if((t|0)==4){n=_t(4)|0;_[n>>2]=18632;tt(n|0,18680,116)}else if((t|0)==5){_[n>>2]=4576;b=e;return n|0}return 0}function ht(e,t){e=e|0;t=t|0;var n=0;n=b;lq[_[(_[e>>2]|0)+16>>2]&127](e,t);b=n;return}function vt(e,t){e=e|0;t=t|0;var n=0;n=b;lq[_[(_[e>>2]|0)+20>>2]&127](e,t);b=n;return}function gt(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function Jt(e){e=e|0;return _[e+16>>2]|0}function Dt(e,t){e=e|0;t=t|0;_[e+16>>2]=t;return}function xt(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function Gt(e){e=e|0;return e+80|0}function jt(e){e=e|0;return e+88|0}function At(e,t){e=e|0;t=+t;s[e+104>>2]=t;return}function St(e){e=e|0;return+ +s[e+104>>2]}function Ct(e,t){e=e|0;t=+t;s[e+68>>2]=t;return}function Bt(e){e=e|0;return+ +s[e+68>>2]}function kt(e,t){e=e|0;t=+t;s[e+72>>2]=t;return}function wt(e){e=e|0;return+ +s[e+72>>2]}function Mt(e){e=e|0;return _[e+4>>2]|0}function Rt(e){e=e|0;return _[e+48>>2]|0}function qt(e){e=e|0;return _[e+52>>2]|0}function Ft(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[16]|0)==0?(je(16)|0)!=0:0)Me(16);lq[_[_[e>>2]>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=8;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 8}function Pt(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[32]|0)==0?(je(32)|0)!=0:0)Me(32);lq[_[(_[e>>2]|0)+4>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=24;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 24}function Tt(e,t){e=e|0;t=+t;var n=0,r=0,o=0;r=b;b=b+16|0;n=r;if((i[48]|0)==0?(je(48)|0)!=0:0)Me(48);Dq[_[(_[e>>2]|0)+8>>2]&63](n,e,t);o=n;e=_[o+4>>2]|0;n=40;_[n>>2]=_[o>>2];_[n+4>>2]=e;b=r;return 40}function Lt(e,t){e=e|0;t=+t;var n=0;n=b;t=+aq[_[(_[e>>2]|0)+12>>2]&63](e,t);b=n;return+t}function It(e){e=e|0;return _[e+12>>2]|0}function Wt(e){e=e|0;return _[e+64>>2]|0}function Et(e,t){e=e|0;t=t|0;_[e+64>>2]=t;return}function Ot(e){e=e|0;var t=0;t=b;if(!(r[(_[e+48>>2]|0)+4>>1]&32)){e=0;b=t;return e|0}e=(r[(_[e+52>>2]|0)+4>>1]&32)!=0;b=t;return e|0}function Vt(e){e=e|0;return(i[e+61>>0]|0)!=0|0}function Ut(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+28>>2]&127](e);b=t;return}function Nt(){var e=0,t=0,n=0;e=b;t=kS(36)|0;if(t){n=t;b=e;return n|0}while(1){t=_[4698]|0;_[4698]=t+0;if(!t){t=4;break}Jq[t&63]();n=kS(36)|0;if(n){t=5;break}}if((t|0)==4){n=_t(4)|0;_[n>>2]=18632;tt(n|0,18680,116)}else if((t|0)==5){b=e;return n|0}return 0}function zt(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,c=0;i=b;r=kS(36)|0;e:do{if(!r){while(1){r=_[4698]|0;_[4698]=r+0;if(!r)break;Jq[r&63]();r=kS(36)|0;if(r)break e}r=_t(4)|0;_[r>>2]=18632;tt(r|0,18680,116)}}while(0);c=r+12|0;o=r+24|0;_[r+0>>2]=_[e+0>>2];_[r+4>>2]=_[e+4>>2];_[r+8>>2]=_[e+8>>2];_[c+0>>2]=_[t+0>>2];_[c+4>>2]=_[t+4>>2];_[c+8>>2]=_[t+8>>2];_[o+0>>2]=_[n+0>>2];_[o+4>>2]=_[n+4>>2];_[o+8>>2]=_[n+8>>2];b=i;return r|0}function Ht(e){e=e|0;var t=0,n=0;t=b;n=e+0|0;e=n+36|0;do{_[n>>2]=0;n=n+4|0}while((n|0)<(e|0));b=t;return}function Qt(e,t){e=e|0;t=t|0;var n=0,r=0;r=b;b=b+16|0;n=r;if((i[72]|0)==0?(je(72)|0)!=0:0)Me(72);jj(n,e,t);_[14]=_[n+0>>2];_[15]=_[n+4>>2];_[16]=_[n+8>>2];b=r;return 56}function Kt(e,t){e=e|0;t=t|0;var n=0,r=0.0,_=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0;n=b;if((i[88]|0)==0?(je(88)|0)!=0:0)Me(88);_=+s[e>>2];o=+s[e+12>>2];r=+s[e+4>>2];c=+s[e+16>>2];p=_*c-o*r;if(p!=0.0)p=1.0/p;u=+s[t>>2];f=+s[t+4>>2];c=+(p*(c*u-o*f));p=+(p*(_*f-r*u));e=80;s[e>>2]=c;s[e+4>>2]=p;b=n;return 80}function $t(e,t){e=e|0;t=t|0;var n=0,i=0.0,r=0.0,o=0.0,c=0.0,p=0.0;n=b;i=+s[e>>2];o=+s[e+12>>2];r=+s[e+4>>2];c=+s[e+16>>2];p=i*c-o*r;if(p!=0.0)p=1.0/p;s[t>>2]=c*p;c=-p;s[t+12>>2]=o*c;s[t+8>>2]=0.0;s[t+4>>2]=r*c;s[t+16>>2]=i*p;e=t+20|0;_[e+0>>2]=0;_[e+4>>2]=0;_[e+8>>2]=0;_[e+12>>2]=0;b=n;return}function Zt(e,t){e=e|0;t=t|0;var n=0;n=b;Cj(e,t);b=n;return}function Yt(e){e=e|0;return e|0}function Xt(e,t){e=e|0;t=t|0;var n=0;n=b;_[e+0>>2]=_[t+0>>2];_[e+4>>2]=_[t+4>>2];_[e+8>>2]=_[t+8>>2];b=n;return}function en(e){e=e|0;return e+12|0}function tn(e,t){e=e|0;t=t|0;var n=0;n=b;e=e+12|0;_[e+0>>2]=_[t+0>>2];_[e+4>>2]=_[t+4>>2];_[e+8>>2]=_[t+8>>2];b=n;return}function nn(e){e=e|0;return e+24|0}function rn(e,t){e=e|0;t=t|0;var n=0;n=b;e=e+24|0;_[e+0>>2]=_[t+0>>2];_[e+4>>2]=_[t+4>>2];_[e+8>>2]=_[t+8>>2];b=n;return}function _n(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function on(e){e=e|0;return _[(_[e+12>>2]|0)+4>>2]|0}function cn(e){e=e|0;return _[e+12>>2]|0}function pn(e,t){e=e|0;t=t|0;var n=0,p=0,u=0,f=0;n=b;p=e+38|0;if((t&1|0)==(o[p>>0]|0|0)){b=n;return}e=_[e+8>>2]|0;u=e+4|0;f=c[u>>1]|0;if(!(f&2)){r[u>>1]=f|2;s[e+144>>2]=0.0}i[p>>0]=t&1;b=n;return}function sn(e){e=e|0;return(i[e+38>>0]|0)!=0|0}function un(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,c=0,p=0,s=0,u=0,f=0;n=b;u=e+32|0;r[u+0>>1]=r[t+0>>1]|0;r[u+2>>1]=r[t+2>>1]|0;r[u+4>>1]=r[t+4>>1]|0;t=_[e+8>>2]|0;if(!t){b=n;return}o=_[t+112>>2]|0;if(o)do{i=_[o+4>>2]|0;if((_[i+48>>2]|0)==(e|0)?1:(_[i+52>>2]|0)==(e|0)){u=i+4|0;_[u>>2]=_[u>>2]|8}o=_[o+12>>2]|0}while((o|0)!=0);c=_[t+88>>2]|0;if(!c){b=n;return}t=e+28|0;if((_[t>>2]|0)<=0){b=n;return}e=e+24|0;o=c+102912|0;i=c+102908|0;s=c+102904|0;u=_[o>>2]|0;p=0;do{c=_[(_[e>>2]|0)+(p*28|0)+24>>2]|0;if((u|0)==(_[i>>2]|0)){f=_[s>>2]|0;_[i>>2]=u<<1;u=kS(u<<3)|0;_[s>>2]=u;FS(u|0,f|0,_[o>>2]<<2|0)|0;wS(f);u=_[o>>2]|0}_[(_[s>>2]|0)+(u<<2)>>2]=c;u=(_[o>>2]|0)+1|0;_[o>>2]=u;p=p+1|0}while((p|0)<(_[t>>2]|0));b=n;return}function bn(e){e=e|0;return e+32|0}function fn(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,c=0,p=0,s=0,u=0;t=b;n=_[e+8>>2]|0;if(!n){b=t;return}r=_[n+112>>2]|0;if(r)do{i=_[r+4>>2]|0;if((_[i+48>>2]|0)==(e|0)?1:(_[i+52>>2]|0)==(e|0)){s=i+4|0;_[s>>2]=_[s>>2]|8}r=_[r+12>>2]|0}while((r|0)!=0);o=_[n+88>>2]|0;if(!o){b=t;return}n=e+28|0;if((_[n>>2]|0)<=0){b=t;return}e=e+24|0;r=o+102912|0;i=o+102908|0;o=o+102904|0;s=_[r>>2]|0;p=0;do{c=_[(_[e>>2]|0)+(p*28|0)+24>>2]|0;if((s|0)==(_[i>>2]|0)){u=_[o>>2]|0;_[i>>2]=s<<1;s=kS(s<<3)|0;_[o>>2]=s;FS(s|0,u|0,_[r>>2]<<2|0)|0;wS(u);s=_[r>>2]|0}_[(_[o>>2]|0)+(s<<2)>>2]=c;s=(_[r>>2]|0)+1|0;_[r>>2]=s;p=p+1|0}while((p|0)<(_[n>>2]|0));b=t;return}function an(e){e=e|0;return _[e+8>>2]|0}function dn(e){e=e|0;return _[e+4>>2]|0}function yn(e){e=e|0;return _[e+40>>2]|0}function ln(e,t){e=e|0;t=t|0;_[e+40>>2]=t;return}function mn(e,t){e=e|0;t=t|0;var n=0,i=0;n=b;i=_[e+12>>2]|0;e=bq[_[(_[i>>2]|0)+16>>2]&63](i,(_[e+8>>2]|0)+12|0,t)|0;b=n;return e|0}function hn(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0;r=b;o=_[e+12>>2]|0;t=jq[_[(_[o>>2]|0)+20>>2]&63](o,t,n,(_[e+8>>2]|0)+12|0,i)|0;b=r;return t|0}function vn(e,t){e=e|0;t=t|0;var n=0,i=0;n=b;i=_[e+12>>2]|0;Dq[_[(_[i>>2]|0)+28>>2]&63](i,t,+s[e>>2]);b=n;return}function gn(e,t){e=e|0;t=+t;var n=0;n=b;if(((s[a>>2]=t,_[a>>2]|0)&2139095040|0)!=2139095040&t>=0.0){s[e>>2]=t;b=n;return}else Be(4512,4464,295,4552)}function Jn(e){e=e|0;return+ +s[e>>2]}function Dn(e){e=e|0;return+ +s[e+16>>2]}function xn(e,t){e=e|0;t=+t;s[e+16>>2]=t;return}function Gn(e){e=e|0;return+ +s[e+20>>2]}function jn(e,t){e=e|0;t=+t;s[e+20>>2]=t;return}function An(e,t){e=e|0;t=t|0;var n=0;n=b;if((t|0)>-1?(_[e+28>>2]|0)>(t|0):0){b=n;return(_[e+24>>2]|0)+(t*28|0)|0}Be(4416,4464,341,4504);return 0}function Sn(e,t){e=e|0;t=t|0;var n=0;n=b;_A(e,t);b=n;return}function Cn(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function Bn(){var e=0,t=0;e=b;t=kS(6)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(6)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);r[t>>1]=1;r[t+2>>1]=-1;r[t+4>>1]=0;b=e;return t|0}function kn(e){e=e|0;return r[e>>1]|0}function wn(e,t){e=e|0;t=t|0;r[e>>1]=t;return}function Mn(e){e=e|0;return r[e+2>>1]|0}function Rn(e,t){e=e|0;t=t|0;r[e+2>>1]=t;return}function qn(e){e=e|0;return r[e+4>>1]|0}function Fn(e,t){e=e|0;t=t|0;r[e+4>>1]=t;return}function Pn(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function Tn(){var e=0,t=0,n=0;e=b;t=kS(4)|0;if(t){n=t;_[n>>2]=4080;b=e;return n|0}while(1){t=_[4698]|0;_[4698]=t+0;if(!t){t=4;break}Jq[t&63]();n=kS(4)|0;if(n){t=5;break}}if((t|0)==4){n=_t(4)|0;_[n>>2]=18632;tt(n|0,18680,116)}else if((t|0)==5){_[n>>2]=4080;b=e;return n|0}return 0}function Ln(e,t){e=e|0;t=t|0;var n=0;n=b;e=Gq[_[(_[e>>2]|0)+8>>2]&63](e,t)|0;b=n;return e|0}function In(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function Wn(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,c=0,p=0;n=b;o=_[e+52>>2]|0;i=o+4|0;c=r[i>>1]|0;if((c&2)==0?(p=c&65535,(p&2|0)==0):0){r[i>>1]=p|2;s[o+144>>2]=0.0}o=t;c=_[o+4>>2]|0;p=e+76|0;_[p>>2]=_[o>>2];_[p+4>>2]=c;b=n;return}function En(e){e=e|0;return e+76|0}function On(e,t){e=e|0;t=+t;s[e+104>>2]=t;return}function Vn(e){e=e|0;return+ +s[e+104>>2]}function Un(e,t){e=e|0;t=+t;s[e+84>>2]=t;return}function Nn(e){e=e|0;return+ +s[e+84>>2]}function zn(e,t){e=e|0;t=+t;s[e+88>>2]=t;return}function Hn(e){e=e|0;return+ +s[e+88>>2]}function Qn(e){e=e|0;return _[e+4>>2]|0}function Kn(e){e=e|0;return _[e+48>>2]|0}function $n(e){e=e|0;return _[e+52>>2]|0}function Zn(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[104]|0)==0?(je(104)|0)!=0:0)Me(104);lq[_[_[e>>2]>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=96;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 96}function Yn(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[120]|0)==0?(je(120)|0)!=0:0)Me(120);lq[_[(_[e>>2]|0)+4>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=112;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 112}function Xn(e,t){e=e|0;t=+t;var n=0,r=0,o=0;r=b;b=b+16|0;n=r;if((i[136]|0)==0?(je(136)|0)!=0:0)Me(136);Dq[_[(_[e>>2]|0)+8>>2]&63](n,e,t);o=n;e=_[o+4>>2]|0;n=128;_[n>>2]=_[o>>2];_[n+4>>2]=e;b=r;return 128}function ei(e,t){e=e|0;t=+t;var n=0;n=b;t=+aq[_[(_[e>>2]|0)+12>>2]&63](e,t);b=n;return+t}function ti(e){e=e|0;return _[e+12>>2]|0}function ni(e){e=e|0;return _[e+64>>2]|0}function ii(e,t){e=e|0;t=t|0;_[e+64>>2]=t;return}function ri(e){e=e|0;var t=0;t=b;if(!(r[(_[e+48>>2]|0)+4>>1]&32)){e=0;b=t;return e|0}e=(r[(_[e+52>>2]|0)+4>>1]&32)!=0;b=t;return e|0}function _i(e){e=e|0;return(i[e+61>>0]|0)!=0|0}function oi(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+28>>2]&127](e);b=t;return}function ci(){var e=0,t=0,n=0;e=b;t=kS(8)|0;if(t){n=t;b=e;return n|0}while(1){t=_[4698]|0;_[4698]=t+0;if(!t){t=4;break}Jq[t&63]();n=kS(8)|0;if(n){t=5;break}}if((t|0)==4){n=_t(4)|0;_[n>>2]=18632;tt(n|0,18680,116)}else if((t|0)==5){b=e;return n|0}return 0}function pi(e){e=+e;var t=0,n=0;t=b;n=kS(8)|0;e:do{if(!n){while(1){n=_[4698]|0;_[4698]=n+0;if(!n)break;Jq[n&63]();n=kS(8)|0;if(n)break e}n=_t(4)|0;_[n>>2]=18632;tt(n|0,18680,116)}}while(0);s[n>>2]=+z(+e);s[n+4>>2]=+N(+e);b=t;return n|0}function si(e,t){e=e|0;t=+t;s[e>>2]=+z(+t);s[e+4>>2]=+N(+t);return}function ui(e){e=e|0;s[e>>2]=0.0;s[e+4>>2]=1.0;return}function bi(e){e=e|0;var t=0.0;t=+Z(+ +s[e>>2],+ +s[e+4>>2]);return+t}function fi(e){e=e|0;var t=0,n=0.0,r=0.0;t=b;if((i[152]|0)==0?(je(152)|0)!=0:0)Me(152);r=+ +s[e+4>>2];n=+ +s[e>>2];e=144;s[e>>2]=r;s[e+4>>2]=n;b=t;return 144}function ai(e){e=e|0;var t=0,n=0.0,r=0.0;t=b;if((i[168]|0)==0?(je(168)|0)!=0:0)Me(168);r=+-+s[e>>2];n=+ +s[e+4>>2];e=160;s[e>>2]=r;s[e+4>>2]=n;b=t;return 160}function di(e){e=e|0;return+ +s[e>>2]}function yi(e,t){e=e|0;t=+t;s[e>>2]=t;return}function li(e){e=e|0;return+ +s[e+4>>2]}function mi(e,t){e=e|0;t=+t;s[e+4>>2]=t;return}function hi(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function vi(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,p=0,u=0;n=b;i=e+68|0;if(!(+s[t>>2]!=+s[i>>2])?!(+s[t+4>>2]!=+s[e+72>>2]):0){b=n;return}o=_[e+48>>2]|0;p=o+4|0;u=c[p>>1]|0;if(!(u&2)){r[p>>1]=u|2;s[o+144>>2]=0.0}e=_[e+52>>2]|0;o=e+4|0;p=c[o>>1]|0;if(!(p&2)){r[o>>1]=p|2;s[e+144>>2]=0.0}o=t;p=_[o+4>>2]|0;u=i;_[u>>2]=_[o>>2];_[u+4>>2]=p;b=n;return}function gi(e){e=e|0;return e+68|0}function Ji(e,t){e=e|0;t=+t;var n=0,i=0,o=0,p=0,u=0;n=b;i=e+76|0;if(!(+s[i>>2]!=t)){b=n;return}o=_[e+48>>2]|0;p=o+4|0;u=c[p>>1]|0;if(!(u&2)){r[p>>1]=u|2;s[o+144>>2]=0.0}e=_[e+52>>2]|0;o=e+4|0;p=c[o>>1]|0;if(!(p&2)){r[o>>1]=p|2;s[e+144>>2]=0.0}s[i>>2]=t;b=n;return}function Di(e){e=e|0;return+ +s[e+76>>2]}function xi(e,t){e=e|0;t=+t;var n=0;n=b;if(((s[a>>2]=t,_[a>>2]|0)&2139095040|0)!=2139095040&t>=0.0){s[e+92>>2]=t;b=n;return}else Be(14968,5304,228,15064)}function Gi(e){e=e|0;return+ +s[e+92>>2]}function ji(e,t){e=e|0;t=+t;var n=0;n=b;if(((s[a>>2]=t,_[a>>2]|0)&2139095040|0)!=2139095040&t>=0.0){s[e+96>>2]=t;b=n;return}else Be(15080,5304,239,15120)}function Ai(e){e=e|0;return+ +s[e+96>>2]}function Si(e,t){e=e|0;t=+t;var n=0;n=b;if(((s[a>>2]=t,_[a>>2]|0)&2139095040|0)!=2139095040&t>=0.0&t<=1.0){s[e+100>>2]=t;b=n;return}else Be(5360,5304,250,5416)}function Ci(e){e=e|0;return+ +s[e+100>>2]}function Bi(e){e=e|0;return _[e+4>>2]|0}function ki(e){e=e|0;return _[e+48>>2]|0}function wi(e){e=e|0;return _[e+52>>2]|0}function Mi(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[184]|0)==0?(je(184)|0)!=0:0)Me(184);lq[_[_[e>>2]>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=176;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 176}function Ri(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[200]|0)==0?(je(200)|0)!=0:0)Me(200);lq[_[(_[e>>2]|0)+4>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=192;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 192}function qi(e,t){e=e|0;t=+t;var n=0,r=0,o=0;r=b;b=b+16|0;n=r;if((i[216]|0)==0?(je(216)|0)!=0:0)Me(216);Dq[_[(_[e>>2]|0)+8>>2]&63](n,e,t);o=n;e=_[o+4>>2]|0;n=208;_[n>>2]=_[o>>2];_[n+4>>2]=e;b=r;return 208}function Fi(e,t){e=e|0;t=+t;var n=0;n=b;t=+aq[_[(_[e>>2]|0)+12>>2]&63](e,t);b=n;return+t}function Pi(e){e=e|0;return _[e+12>>2]|0}function Ti(e){e=e|0;return _[e+64>>2]|0}function Li(e,t){e=e|0;t=t|0;_[e+64>>2]=t;return}function Ii(e){e=e|0;var t=0;t=b;if(!(r[(_[e+48>>2]|0)+4>>1]&32)){e=0;b=t;return e|0}e=(r[(_[e+52>>2]|0)+4>>1]&32)!=0;b=t;return e|0}function Wi(e){e=e|0;return(i[e+61>>0]|0)!=0|0}function Ei(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+28>>2]&127](e);b=t;return}function Oi(e){e=e|0;return+ +s[e>>2]}function Vi(e,t){e=e|0;t=+t;s[e>>2]=t;return}function Ui(e){e=e|0;return+ +s[e+4>>2]}function Ni(e,t){e=e|0;t=+t;s[e+4>>2]=t;return}function zi(e){e=e|0;return+ +s[e+8>>2]}function Hi(e,t){e=e|0;t=+t;s[e+8>>2]=t;return}function Qi(e){e=e|0;return+ +s[e+12>>2]}function Ki(e,t){e=e|0;t=+t;s[e+12>>2]=t;return}function $i(e){e=e|0;return+ +s[e+16>>2]}function Zi(e,t){e=e|0;t=+t;s[e+16>>2]=t;return}function Yi(e){e=e|0;return+ +s[e+20>>2]}function Xi(e,t){e=e|0;t=+t;s[e+20>>2]=t;return}function er(e){e=e|0;return+ +s[e+24>>2]}function tr(e,t){e=e|0;t=+t;s[e+24>>2]=t;return}function nr(e){e=e|0;return+ +s[e+28>>2]}function ir(e,t){e=e|0;t=+t;s[e+28>>2]=t;return}function rr(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function _r(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function or(){var e=0,t=0,n=0,r=0;e=b;t=kS(52)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(52)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+44>>2]=0;r=t+4|0;n=t+36|0;_[r+0>>2]=0;_[r+4>>2]=0;_[r+8>>2]=0;_[r+12>>2]=0;_[r+16>>2]=0;_[r+20>>2]=0;_[r+24>>2]=0;_[r+28>>2]=0;i[n>>0]=1;i[t+37>>0]=1;i[t+38>>0]=0;i[t+39>>0]=0;_[t>>2]=0;i[t+40>>0]=1;s[t+48>>2]=1.0;b=e;return t|0}function cr(e){e=e|0;return _[e>>2]|0}function pr(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function sr(e){e=e|0;return e+4|0}function ur(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+4|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function br(e){e=e|0;return+ +s[e+12>>2]}function fr(e,t){e=e|0;t=+t;s[e+12>>2]=t;return}function ar(e){e=e|0;return e+16|0}function dr(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+16|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function yr(e){e=e|0;return+ +s[e+24>>2]}function lr(e,t){e=e|0;t=+t;s[e+24>>2]=t;return}function mr(e){e=e|0;return+ +s[e+28>>2]}function hr(e,t){e=e|0;t=+t;s[e+28>>2]=t;return}function vr(e){e=e|0;return+ +s[e+32>>2]}function gr(e,t){e=e|0;t=+t;s[e+32>>2]=t;return}function Jr(e){e=e|0;return(i[e+36>>0]|0)!=0|0}function Dr(e,t){e=e|0;t=t|0;i[e+36>>0]=t&1;return}function xr(e){e=e|0;return(i[e+37>>0]|0)!=0|0}function Gr(e,t){e=e|0;t=t|0;i[e+37>>0]=t&1;return}function jr(e){e=e|0;return(i[e+38>>0]|0)!=0|0}function Ar(e,t){e=e|0;t=t|0;i[e+38>>0]=t&1;return}function Sr(e){e=e|0;return(i[e+39>>0]|0)!=0|0}function Cr(e,t){e=e|0;t=t|0;i[e+39>>0]=t&1;return}function Br(e){e=e|0;return(i[e+40>>0]|0)!=0|0}function kr(e,t){e=e|0;t=t|0;i[e+40>>0]=t&1;return}function wr(e){e=e|0;return _[e+44>>2]|0}function Mr(e,t){e=e|0;t=t|0;_[e+44>>2]=t;return}function Rr(e){e=e|0;return+ +s[e+48>>2]}function qr(e,t){e=e|0;t=+t;s[e+48>>2]=t;return}function Fr(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function Pr(){var e=0,t=0,n=0;e=b;t=kS(4)|0;if(t){n=t;_[n>>2]=3728;b=e;return n|0}while(1){t=_[4698]|0;_[4698]=t+0;if(!t){t=4;break}Jq[t&63]();n=kS(4)|0;if(n){t=5;break}}if((t|0)==4){n=_t(4)|0;_[n>>2]=18632;tt(n|0,18680,116)}else if((t|0)==5){_[n>>2]=3728;b=e;return n|0}return 0}function Tr(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;var o=0;o=b;r=+yq[_[(_[e>>2]|0)+8>>2]&63](e,t,n,i,r);b=o;return+r}function Lr(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function Ir(e){e=e|0;return i[e>>0]|0}function Wr(e,t){e=e|0;t=t|0;i[e>>0]=t;return}function Er(e){e=e|0;return i[e+1>>0]|0}function Or(e,t){e=e|0;t=t|0;i[e+1>>0]=t;return}function Vr(e){e=e|0;return i[e+2>>0]|0}function Ur(e,t){e=e|0;t=t|0;i[e+2>>0]=t;return}function Nr(e){e=e|0;return i[e+3>>0]|0}function zr(e,t){e=e|0;t=t|0;i[e+3>>0]=t;return}function Hr(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function Qr(){var e=0,t=0,n=0;e=b;t=kS(8)|0;if(t){n=t;b=e;return n|0}while(1){t=_[4698]|0;_[4698]=t+0;if(!t){t=4;break}Jq[t&63]();n=kS(8)|0;if(n){t=5;break}}if((t|0)==4){n=_t(4)|0;_[n>>2]=18632;tt(n|0,18680,116)}else if((t|0)==5){b=e;return n|0}return 0}function Kr(e,t){e=+e;t=+t;var n=0,i=0;n=b;i=kS(8)|0;e:do{if(!i){while(1){i=_[4698]|0;_[4698]=i+0;if(!i)break;Jq[i&63]();i=kS(8)|0;if(i)break e}i=_t(4)|0;_[i>>2]=18632;tt(i|0,18680,116)}}while(0);s[i>>2]=e;s[i+4>>2]=t;b=n;return i|0}function $r(e){e=e|0;s[e>>2]=0.0;s[e+4>>2]=0.0;return}function Zr(e,t,n){e=e|0;t=+t;n=+n;s[e>>2]=t;s[e+4>>2]=n;return}function Yr(e,t){e=e|0;t=t|0;s[e>>2]=+s[t>>2]+ +s[e>>2];e=e+4|0;s[e>>2]=+s[t+4>>2]+ +s[e>>2];return}function Xr(e,t){e=e|0;t=t|0;s[e>>2]=+s[e>>2]-+s[t>>2];e=e+4|0;s[e>>2]=+s[e>>2]-+s[t+4>>2];return}function e_(e,t){e=e|0;t=+t;s[e>>2]=+s[e>>2]*t;e=e+4|0;s[e>>2]=+s[e>>2]*t;return}function t_(e){e=e|0;var t=0.0,n=0.0;n=+s[e>>2];t=+s[e+4>>2];t=+V(+(n*n+t*t));return+t}function n_(e){e=e|0;var t=0.0,n=0.0;n=+s[e>>2];t=+s[e+4>>2];return+(n*n+t*t)}function i_(e){e=e|0;var t=0,n=0.0,i=0.0,r=0.0,_=0,o=0.0;t=b;i=+s[e>>2];_=e+4|0;r=+s[_>>2];n=+V(+(i*i+r*r));if(n<1.1920928955078125e-7){r=0.0;b=t;return+r}o=1.0/n;s[e>>2]=i*o;s[_>>2]=r*o;r=n;b=t;return+r}function r_(e){e=e|0;var t=0;t=b;if(((s[a>>2]=+s[e>>2],_[a>>2]|0)&2139095040|0)==2139095040){e=0;b=t;return e|0}e=((s[a>>2]=+s[e+4>>2],_[a>>2]|0)&2139095040|0)!=2139095040;b=t;return e|0}function __(e){e=e|0;var t=0,n=0.0,r=0.0;t=b;if((i[232]|0)==0?(je(232)|0)!=0:0)Me(232);r=+-+s[e+4>>2];n=+ +s[e>>2];e=224;s[e>>2]=r;s[e+4>>2]=n;b=t;return 224}function o_(e){e=e|0;return+ +s[e>>2]}function c_(e,t){e=e|0;t=+t;s[e>>2]=t;return}function p_(e){e=e|0;return+ +s[e+4>>2]}function s_(e,t){e=e|0;t=+t;s[e+4>>2]=t;return}function u_(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function b_(){var e=0,t=0,n=0;e=b;t=kS(12)|0;if(t){n=t;b=e;return n|0}while(1){t=_[4698]|0;_[4698]=t+0;if(!t){t=4;break}Jq[t&63]();n=kS(12)|0;if(n){t=5;break}}if((t|0)==4){n=_t(4)|0;_[n>>2]=18632;tt(n|0,18680,116)}else if((t|0)==5){b=e;return n|0}return 0}function f_(e,t,n){e=+e;t=+t;n=+n;var i=0,r=0;i=b;r=kS(12)|0;e:do{if(!r){while(1){r=_[4698]|0;_[4698]=r+0;if(!r)break;Jq[r&63]();r=kS(12)|0;if(r)break e}r=_t(4)|0;_[r>>2]=18632;tt(r|0,18680,116)}}while(0);s[r>>2]=e;s[r+4>>2]=t;s[r+8>>2]=n;b=i;return r|0}function a_(e){e=e|0;s[e>>2]=0.0;s[e+4>>2]=0.0;s[e+8>>2]=0.0;return}function d_(e,t,n,i){e=e|0;t=+t;n=+n;i=+i;s[e>>2]=t;s[e+4>>2]=n;s[e+8>>2]=i;return}function y_(e,t){e=e|0;t=t|0;var n=0;s[e>>2]=+s[t>>2]+ +s[e>>2];n=e+4|0;s[n>>2]=+s[t+4>>2]+ +s[n>>2];e=e+8|0;s[e>>2]=+s[t+8>>2]+ +s[e>>2];return}function l_(e,t){e=e|0;t=t|0;var n=0;s[e>>2]=+s[e>>2]-+s[t>>2];n=e+4|0;s[n>>2]=+s[n>>2]-+s[t+4>>2];e=e+8|0;s[e>>2]=+s[e>>2]-+s[t+8>>2];return}function m_(e,t){e=e|0;t=+t;var n=0;s[e>>2]=+s[e>>2]*t;n=e+4|0;s[n>>2]=+s[n>>2]*t;e=e+8|0;s[e>>2]=+s[e>>2]*t;return}function h_(e){e=e|0;return+ +s[e>>2]}function v_(e,t){e=e|0;t=+t;s[e>>2]=t;return}function g_(e){e=e|0;return+ +s[e+4>>2]}function J_(e,t){e=e|0;t=+t;s[e+4>>2]=t;return}function D_(e){e=e|0;return+ +s[e+8>>2]}function x_(e,t){e=e|0;t=+t;s[e+8>>2]=t;return}function G_(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function j_(){var e=0,t=0;e=b;t=kS(16)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(16)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;b=e;return t|0}function A_(e){e=e|0;var t=0,n=0.0,i=0.0,r=0.0,o=0.0;t=b;i=+s[e+8>>2];r=+s[e>>2];n=+s[e+12>>2];o=+s[e+4>>2];if(!(i-r>=0.0&n-o>=0.0)){e=0;b=t;return e|0}if(((s[a>>2]=r,_[a>>2]|0)&2139095040|0)==2139095040){e=0;b=t;return e|0}if(((s[a>>2]=o,_[a>>2]|0)&2139095040|0)==2139095040){e=0;b=t;return e|0}if(((s[a>>2]=i,_[a>>2]|0)&2139095040|0)==2139095040){e=0;b=t;return e|0}e=((s[a>>2]=n,_[a>>2]|0)&2139095040|0)!=2139095040;b=t;return e|0}function S_(e){e=e|0;var t=0,n=0.0,r=0.0;t=b;if((i[248]|0)==0?(je(248)|0)!=0:0)Me(248);r=+((+s[e>>2]+ +s[e+8>>2])*.5);n=+((+s[e+4>>2]+ +s[e+12>>2])*.5);e=240;s[e>>2]=r;s[e+4>>2]=n;b=t;return 240}function C_(e){e=e|0;var t=0,n=0.0,r=0.0;t=b;if((i[264]|0)==0?(je(264)|0)!=0:0)Me(264);r=+((+s[e+8>>2]-+s[e>>2])*.5);n=+((+s[e+12>>2]-+s[e+4>>2])*.5);e=256;s[e>>2]=r;s[e+4>>2]=n;b=t;return 256}function B_(e){e=e|0;return+((+s[e+8>>2]-+s[e>>2]+(+s[e+12>>2]-+s[e+4>>2]))*2.0)}function k_(e,t){e=e|0;t=t|0;var n=0,i=0.0,r=0.0,_=0,o=0.0,c=0.0;n=b;i=+s[e>>2];r=+s[t>>2];o=+s[e+4>>2];c=+s[t+4>>2];r=+(i<r?i:r);c=+(o<c?o:c);_=e;s[_>>2]=r;s[_+4>>2]=c;_=e+8|0;c=+s[_>>2];r=+s[t+8>>2];o=+s[e+12>>2];i=+s[t+12>>2];r=+(c>r?c:r);i=+(o>i?o:i);e=_;s[e>>2]=r;s[e+4>>2]=i;b=n;return}function w_(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0.0,_=0.0,o=0.0,c=0.0,p=0;i=b;r=+s[t>>2];_=+s[n>>2];o=+s[t+4>>2];c=+s[n+4>>2];_=+(r<_?r:_);c=+(o<c?o:c);p=e;s[p>>2]=_;s[p+4>>2]=c;c=+s[t+8>>2];_=+s[n+8>>2];o=+s[t+12>>2];r=+s[n+12>>2];_=+(c>_?c:_);r=+(o>r?o:r);t=e+8|0;s[t>>2]=_;s[t+4>>2]=r;b=i;return}function M_(e,t){e=e|0;t=t|0;var n=0;n=b;if((+s[e>>2]<=+s[t>>2]?+s[e+4>>2]<=+s[t+4>>2]:0)?+s[t+8>>2]<=+s[e+8>>2]:0)t=+s[t+12>>2]<=+s[e+12>>2];else t=0;b=n;return t|0}function R_(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,c=0,p=0,u=0,f=0,d=0,y=0.0,l=0.0,m=0.0,h=0.0,v=0,g=0.0;i=b;b=b+32|0;p=i+8|0;o=i+24|0;c=i+16|0;r=i;f=n;v=_[f>>2]|0;f=_[f+4>>2]|0;d=p;_[d>>2]=v;_[d+4>>2]=f;m=+s[n+8>>2]-(_[a>>2]=v,+s[a>>2]);y=+s[n+12>>2]-+s[n+4>>2];s[o>>2]=m;s[o+4>>2]=y;if(!(m>0.0))m=-m;if(!(y>0.0))y=-y;s[c>>2]=m;s[c+4>>2]=y;f=e+8|0;u=r+4|0;d=0;y=3.4028234663852886e+38;l=-3.4028234663852886e+38;while(1){if(m<1.1920928955078125e-7){m=+s[p+(d<<2)>>2];if(m<+s[e+(d<<2)>>2]){r=0;e=17;break}if(+s[f+(d<<2)>>2]<m){r=0;e=17;break}}else{h=1.0/+s[o+(d<<2)>>2];m=+s[p+(d<<2)>>2];g=h*(+s[e+(d<<2)>>2]-m);m=h*(+s[f+(d<<2)>>2]-m);v=g>m;h=v?m:g;m=v?g:m;if(h>l){s[r>>2]=0.0;s[u>>2]=0.0;s[r+(d<<2)>>2]=v?1.0:-1.0;l=h}y=y<m?y:m;if(l>y){r=0;e=17;break}}d=d+1|0;if((d|0)>=2){e=14;break}m=+s[c+(d<<2)>>2]}if((e|0)==14){if(l<0.0){v=0;b=i;return v|0}if(+s[n+16>>2]<l){v=0;b=i;return v|0}s[t+8>>2]=l;f=r;d=_[f+4>>2]|0;v=t;_[v>>2]=_[f>>2];_[v+4>>2]=d;v=1;b=i;return v|0}else if((e|0)==17){b=i;return r|0}return 0}function q_(e){e=e|0;return e|0}function F_(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function P_(e){e=e|0;return e+8|0}function T_(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+8|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function L_(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function I_(){var e=0,t=0;e=b;t=kS(28)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(28)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);r[t+22>>1]=1;r[t+24>>1]=-1;r[t+26>>1]=0;_[t>>2]=0;_[t+4>>2]=0;s[t+8>>2]=.20000000298023224;s[t+12>>2]=0.0;s[t+16>>2]=0.0;i[t+20>>0]=0;b=e;return t|0}function W_(e){e=e|0;return _[e>>2]|0}function E_(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function O_(e){e=e|0;return _[e+4>>2]|0}function V_(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function U_(e){e=e|0;return+ +s[e+8>>2]}function N_(e,t){e=e|0;t=+t;s[e+8>>2]=t;return}function z_(e){e=e|0;return+ +s[e+12>>2]}function H_(e,t){e=e|0;t=+t;s[e+12>>2]=t;return}function Q_(e){e=e|0;return+ +s[e+16>>2]}function K_(e,t){e=e|0;t=+t;s[e+16>>2]=t;return}function $_(e){e=e|0;return(i[e+20>>0]|0)!=0|0}function Z_(e,t){e=e|0;t=t|0;i[e+20>>0]=t&1;return}function Y_(e){e=e|0;return e+22|0}function X_(e,t){e=e|0;t=t|0;var n=0;n=b;e=e+22|0;r[e+0>>1]=r[t+0>>1]|0;r[e+2>>1]=r[t+2>>1]|0;r[e+4>>1]=r[t+4>>1]|0;b=n;return}function eo(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function to(){var e=0,t=0,n=0;e=b;t=kS(44)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(44)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;i[t+16>>0]=0;_[t>>2]=9;n=t+20|0;_[n+0>>2]=0;_[n+4>>2]=0;_[n+8>>2]=0;_[n+12>>2]=0;_[n+16>>2]=0;_[n+20>>2]=0;b=e;return t|0}function no(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0;r=b;_[e+8>>2]=t;_[e+12>>2]=n;f=+s[i>>2]-+s[t+12>>2];a=i+4|0;o=+s[a>>2]-+s[t+16>>2];c=+s[t+24>>2];p=+s[t+20>>2];u=+(f*c+o*p);p=+(c*o-f*p);t=e+20|0;s[t>>2]=u;s[t+4>>2]=p;p=+s[i>>2]-+s[n+12>>2];u=+s[a>>2]-+s[n+16>>2];f=+s[n+24>>2];o=+s[n+20>>2];c=+(p*f+u*o);o=+(f*u-p*o);t=e+28|0;s[t>>2]=c;s[t+4>>2]=o;b=r;return}function io(e){e=e|0;return e+20|0}function ro(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+20|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function _o(e){e=e|0;return e+28|0}function oo(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+28|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function co(e){e=e|0;return+ +s[e+36>>2]}function po(e,t){e=e|0;t=+t;s[e+36>>2]=t;return}function so(e){e=e|0;return+ +s[e+40>>2]}function uo(e,t){e=e|0;t=+t;s[e+40>>2]=t;return}function bo(e){e=e|0;return _[e>>2]|0}function fo(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function ao(e){e=e|0;return _[e+4>>2]|0}function yo(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function lo(e){e=e|0;return _[e+8>>2]|0}function mo(e,t){e=e|0;t=t|0;_[e+8>>2]=t;return}function ho(e){e=e|0;return _[e+12>>2]|0}function vo(e,t){e=e|0;t=t|0;_[e+12>>2]=t;return}function go(e){e=e|0;return(i[e+16>>0]|0)!=0|0}function Jo(e,t){e=e|0;t=t|0;i[e+16>>0]=t&1;return}function Do(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function xo(){var e=0,t=0,n=0,i=0;e=b;i=kS(64)|0;e:do{if(!i){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();i=kS(64)|0;if(i)break e}i=_t(4)|0;_[i>>2]=18632;tt(i|0,18680,116)}}while(0);n=i+0|0;t=n+64|0;do{_[n>>2]=0;n=n+4|0}while((n|0)<(t|0));b=e;return i|0}function Go(e){e=e|0;return e+40|0}function jo(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+40|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Ao(e){e=e|0;return e+48|0}function So(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+48|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Co(e){e=e|0;return _[e+56>>2]|0}function Bo(e,t){e=e|0;t=t|0;_[e+56>>2]=t;return}function ko(e){e=e|0;return _[e+60>>2]|0}function wo(e,t){e=e|0;t=t|0;_[e+60>>2]=t;return}function Mo(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function Ro(){var e=0,t=0,n=0,r=0;e=b;t=kS(72)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(72)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;i[t+16>>0]=0;_[t>>2]=2;r=t+20|0;n=t+36|0;_[r+0>>2]=0;_[r+4>>2]=0;_[r+8>>2]=0;_[r+12>>2]=0;s[n>>2]=1.0;s[t+40>>2]=0.0;s[t+44>>2]=0.0;i[t+48>>0]=0;s[t+52>>2]=0.0;s[t+56>>2]=0.0;i[t+60>>0]=0;s[t+64>>2]=0.0;s[t+68>>2]=0.0;b=e;return t|0}function qo(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,c=0.0,p=0.0,u=0.0,f=0.0,a=0.0,d=0,y=0,l=0,m=0;o=b;_[e+8>>2]=t;_[e+12>>2]=n;p=+s[i>>2]-+s[t+12>>2];l=i+4|0;a=+s[l>>2]-+s[t+16>>2];y=t+24|0;u=+s[y>>2];d=t+20|0;c=+s[d>>2];f=+(p*u+a*c);c=+(u*a-p*c);m=e+20|0;s[m>>2]=f;s[m+4>>2]=c;c=+s[i>>2]-+s[n+12>>2];f=+s[l>>2]-+s[n+16>>2];p=+s[n+24>>2];a=+s[n+20>>2];u=+(c*p+f*a);a=+(p*f-c*a);i=e+28|0;s[i>>2]=u;s[i+4>>2]=a;a=+s[y>>2];u=+s[r>>2];c=+s[d>>2];f=+s[r+4>>2];p=+(a*u+c*f);c=+(a*f-u*c);i=e+36|0;s[i>>2]=p;s[i+4>>2]=c;s[e+44>>2]=+s[n+56>>2]-+s[t+56>>2];b=o;return}function Fo(e){e=e|0;return e+20|0}function Po(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+20|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function To(e){e=e|0;return e+28|0}function Lo(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+28|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Io(e){e=e|0;return e+36|0}function Wo(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+36|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Eo(e){e=e|0;return+ +s[e+44>>2]}function Oo(e,t){e=e|0;t=+t;s[e+44>>2]=t;return}function Vo(e){e=e|0;return(i[e+48>>0]|0)!=0|0}function Uo(e,t){e=e|0;t=t|0;i[e+48>>0]=t&1;return}function No(e){e=e|0;return+ +s[e+52>>2]}function zo(e,t){e=e|0;t=+t;s[e+52>>2]=t;return}function Ho(e){e=e|0;return+ +s[e+56>>2]}function Qo(e,t){e=e|0;t=+t;s[e+56>>2]=t;return}function Ko(e){e=e|0;return(i[e+60>>0]|0)!=0|0}function $o(e,t){e=e|0;t=t|0;i[e+60>>0]=t&1;return}function Zo(e){e=e|0;return+ +s[e+64>>2]}function Yo(e,t){e=e|0;t=+t;s[e+64>>2]=t;return}function Xo(e){e=e|0;return+ +s[e+68>>2]}function ec(e,t){e=e|0;t=+t;s[e+68>>2]=t;return}function tc(e){e=e|0;return _[e>>2]|0}function nc(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function ic(e){e=e|0;return _[e+4>>2]|0}function rc(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function _c(e){e=e|0;return _[e+8>>2]|0}function oc(e,t){e=e|0;t=t|0;_[e+8>>2]=t;return}function cc(e){e=e|0;return _[e+12>>2]|0}function pc(e,t){e=e|0;t=t|0;_[e+12>>2]=t;return}function sc(e){e=e|0;return(i[e+16>>0]|0)!=0|0}function uc(e,t){e=e|0;t=t|0;i[e+16>>0]=t&1;return}function bc(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function fc(e){e=e|0;var t=0,n=0,r=0,o=0,c=0,p=0;t=b;n=kS(103028)|0;e:do{if(!n){while(1){n=_[4698]|0;_[4698]=n+0;if(!n)break;Jq[n&63]();n=kS(103028)|0;if(n)break e}p=_t(4)|0;_[p>>2]=18632;tt(p|0,18680,116)}}while(0);o=n+8|0;_[o>>2]=128;_[n+4>>2]=0;r=kS(1024)|0;_[n>>2]=r;RS(r|0,0,_[o>>2]<<3|0)|0;o=n+12|0;r=o+56|0;do{_[o>>2]=0;o=o+4|0}while((o|0)<(r|0));do{if(!(i[8640]|0)){r=1;o=0;while(1){if((o|0)>=14){r=7;break}if((r|0)>(_[7936+(o<<2)>>2]|0)){o=o+1|0;i[7992+r>>0]=o}else i[7992+r>>0]=o;r=r+1|0;if((r|0)>=641){r=12;break}}if((r|0)==7)Be(8648,8672,71,8720);else if((r|0)==12){i[8640]=1;break}}}while(0);_[n+102468>>2]=0;_[n+102472>>2]=0;_[n+102476>>2]=0;_[n+102864>>2]=0;_[n+102872>>2]=-1;r=n+102884|0;_[r>>2]=16;_[n+102880>>2]=0;c=kS(576)|0;o=n+102876|0;_[o>>2]=c;RS(c|0,0,(_[r>>2]|0)*36|0)|0;c=(_[r>>2]|0)+-1|0;o=_[o>>2]|0;if((c|0)>0){p=0;do{c=p;p=p+1|0;_[o+(c*36|0)+20>>2]=p;_[o+(c*36|0)+32>>2]=-1;c=(_[r>>2]|0)+-1|0}while((p|0)<(c|0))}_[o+(c*36|0)+20>>2]=-1;_[o+(((_[r>>2]|0)+-1|0)*36|0)+32>>2]=-1;c=n+102888|0;p=n+102920|0;_[c+0>>2]=0;_[c+4>>2]=0;_[c+8>>2]=0;_[c+12>>2]=0;_[p>>2]=16;_[n+102924>>2]=0;_[n+102916>>2]=kS(128)|0;_[n+102908>>2]=16;_[n+102912>>2]=0;_[n+102904>>2]=kS(64)|0;_[n+102932>>2]=0;_[n+102936>>2]=0;_[n+102940>>2]=10112;_[n+102944>>2]=10120;p=n+102948|0;c=n+102968|0;_[n+102980>>2]=0;_[n+102984>>2]=0;r=n+102992|0;_[p+0>>2]=0;_[p+4>>2]=0;_[p+8>>2]=0;_[p+12>>2]=0;_[p+16>>2]=0;i[r>>0]=1;i[n+102993>>0]=1;i[n+102994>>0]=0;i[n+102995>>0]=1;i[n+102976>>0]=1;r=e;o=_[r+4>>2]|0;_[c>>2]=_[r>>2];_[c+4>>2]=o;_[n+102868>>2]=4;s[n+102988>>2]=0.0;_[p>>2]=n;p=n+102996|0;_[p+0>>2]=0;_[p+4>>2]=0;_[p+8>>2]=0;_[p+12>>2]=0;_[p+16>>2]=0;_[p+20>>2]=0;_[p+24>>2]=0;_[p+28>>2]=0;b=t;return n|0}function ac(e,t){e=e|0;t=t|0;_[e+102980>>2]=t;return}function dc(e,t){e=e|0;t=t|0;_[e+102940>>2]=t;return}function yc(e,t){e=e|0;t=t|0;_[e+102944>>2]=t;return}function lc(e,t){e=e|0;t=t|0;_[e+102984>>2]=t;return}function mc(e,t){e=e|0;t=t|0;var n=0,o=0,c=0,p=0,u=0,f=0,d=0,y=0,l=0,m=0,h=0.0;n=b;if(_[e+102868>>2]&2)Be(11528,11552,109,11592);o=xj(e,152)|0;if(!o)o=0;else{p=t+4|0;if(((s[a>>2]=+s[p>>2],_[a>>2]|0)&2139095040|0)==2139095040)Be(9064,9088,27,9128);if(((s[a>>2]=+s[t+8>>2],_[a>>2]|0)&2139095040|0)==2139095040)Be(9064,9088,27,9128);d=t+16|0;if(((s[a>>2]=+s[d>>2],_[a>>2]|0)&2139095040|0)==2139095040)Be(9136,9088,28,9128);if(((s[a>>2]=+s[t+20>>2],_[a>>2]|0)&2139095040|0)==2139095040)Be(9136,9088,28,9128);y=t+12|0;if(((s[a>>2]=+s[y>>2],_[a>>2]|0)&2139095040|0)==2139095040)Be(9168,9088,29,9128);l=t+24|0;if(((s[a>>2]=+s[l>>2],_[a>>2]|0)&2139095040|0)==2139095040)Be(9192,9088,30,9128);f=t+32|0;h=+s[f>>2];if(((s[a>>2]=h,_[a>>2]|0)&2139095040|0)==2139095040|!(h>=0.0))Be(9224,9088,31,9128);u=t+28|0;h=+s[u>>2];if(((s[a>>2]=h,_[a>>2]|0)&2139095040|0)==2139095040|!(h>=0.0))Be(9288,9088,32,9128);c=o+4|0;m=(i[t+39>>0]|0)==0?0:8;r[c>>1]=m;if(i[t+38>>0]|0){m=(m&65535|16)&65535;r[c>>1]=m}if(i[t+36>>0]|0){m=(m&65535|4)&65535;r[c>>1]=m}if(i[t+37>>0]|0){m=(m&65535|2)&65535;r[c>>1]=m}if(i[t+40>>0]|0)r[c>>1]=m&65535|32;_[o+88>>2]=e;m=p;p=_[m>>2]|0;m=_[m+4>>2]|0;c=o+12|0;_[c>>2]=p;_[c+4>>2]=m;h=+s[y>>2];s[o+20>>2]=+z(+h);s[o+24>>2]=+N(+h);s[o+28>>2]=0.0;s[o+32>>2]=0.0;c=o+36|0;_[c>>2]=p;_[c+4>>2]=m;c=o+44|0;_[c>>2]=p;_[c+4>>2]=m;s[o+52>>2]=+s[y>>2];s[o+56>>2]=+s[y>>2];s[o+60>>2]=0.0;_[o+108>>2]=0;_[o+112>>2]=0;_[o+92>>2]=0;_[o+96>>2]=0;y=d;c=_[y+4>>2]|0;m=o+64|0;_[m>>2]=_[y>>2];_[m+4>>2]=c;s[o+72>>2]=+s[l>>2];s[o+132>>2]=+s[u>>2];s[o+136>>2]=+s[f>>2];s[o+140>>2]=+s[t+48>>2];s[o+76>>2]=0.0;s[o+80>>2]=0.0;s[o+84>>2]=0.0;s[o+144>>2]=0.0;m=_[t>>2]|0;_[o>>2]=m;c=o+116|0;if((m|0)==2){s[c>>2]=1.0;s[o+120>>2]=1.0}else{s[c>>2]=0.0;s[o+120>>2]=0.0}s[o+124>>2]=0.0;s[o+128>>2]=0.0;_[o+148>>2]=_[t+44>>2];_[o+100>>2]=0;_[o+104>>2]=0}_[o+92>>2]=0;c=e+102952|0;_[o+96>>2]=_[c>>2];t=_[c>>2]|0;if(!t){_[c>>2]=o;m=e+102960|0;l=_[m>>2]|0;l=l+1|0;_[m>>2]=l;b=n;return o|0}_[t+92>>2]=o;_[c>>2]=o;m=e+102960|0;l=_[m>>2]|0;l=l+1|0;_[m>>2]=l;b=n;return o|0}function hc(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,c=0,p=0,s=0,u=0,f=0,a=0,d=0;n=b;r=e+102960|0;if((_[r>>2]|0)<=0)Be(11608,11552,133,11624);if(_[e+102868>>2]&2)Be(11528,11552,134,11624);p=t+108|0;s=_[p>>2]|0;if(s){c=e+102980|0;do{f=s;s=_[s+12>>2]|0;u=_[c>>2]|0;if(!u)u=f+4|0;else{d=f+4|0;lq[_[(_[u>>2]|0)+8>>2]&127](u,_[d>>2]|0);u=d}sA(e,_[u>>2]|0);_[p>>2]=s}while((s|0)!=0)}_[p>>2]=0;c=t+112|0;s=_[c>>2]|0;if(s){p=e+102872|0;do{d=s;s=_[s+12>>2]|0;Ij(p,_[d+4>>2]|0)}while((s|0)!=0)}_[c>>2]=0;c=t+100|0;f=_[c>>2]|0;e:do{if(!f)o=t+104|0;else{u=e+102980|0;p=e+102872|0;s=t+104|0;while(1){a=f;f=_[f+4>>2]|0;d=_[u>>2]|0;if(d)lq[_[(_[d>>2]|0)+12>>2]&127](d,a);iA(a,p);tA(a,e);d=i[8036]|0;if((d&255)>=14)break;d=e+((d&255)<<2)+12|0;_[a>>2]=_[d>>2];_[d>>2]=a;_[c>>2]=f;_[s>>2]=(_[s>>2]|0)+-1;if(!f){o=s;break e}}Be(8760,8672,171,9032)}}while(0);_[c>>2]=0;_[o>>2]=0;c=t+92|0;p=_[c>>2]|0;o=t+96|0;if(p)_[p+96>>2]=_[o>>2];p=_[o>>2]|0;if(p)_[p+92>>2]=_[c>>2];c=e+102952|0;if((_[c>>2]|0)==(t|0))_[c>>2]=_[o>>2];_[r>>2]=(_[r>>2]|0)+-1;r=i[8144]|0;if((r&255)<14){d=e+((r&255)<<2)+12|0;_[t>>2]=_[d>>2];_[d>>2]=t;b=n;return}else Be(8760,8672,171,9032)}function vc(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,c=0,p=0,u=0,f=0,d=0,y=0,l=0,m=0,h=0,v=0,g=0,J=0,D=0,x=0.0,G=0.0,j=0.0,A=0.0,S=0,C=0.0,B=0.0,k=0.0,w=0.0,M=0.0,R=0.0,q=0.0,F=0.0,P=0,T=0.0;n=b;if(_[e+102868>>2]&2)Be(11528,11552,214,11640);do{switch(_[t>>2]|0){case 4:{r=xj(e,196)|0;do{if(r){_[r>>2]=15768;p=t+8|0;o=t+12|0;if((_[p>>2]|0)==(_[o>>2]|0))Be(15816,15696,185,15848);_[r+4>>2]=_[t>>2];_[r+8>>2]=0;_[r+12>>2]=0;_[r+48>>2]=_[p>>2];_[r+52>>2]=_[o>>2];_[r+56>>2]=0;i[r+61>>0]=i[t+16>>0]|0;i[r+60>>0]=0;_[r+64>>2]=_[t+4>>2];o=r+16|0;_[o+0>>2]=0;_[o+4>>2]=0;_[o+8>>2]=0;_[o+12>>2]=0;_[o+16>>2]=0;_[o+20>>2]=0;_[o+24>>2]=0;_[o+28>>2]=0;_[r>>2]=16776;o=t+20|0;p=_[o+4>>2]|0;S=r+68|0;_[S>>2]=_[o>>2];_[S+4>>2]=p;S=t+28|0;p=_[S+4>>2]|0;o=r+76|0;_[o>>2]=_[S>>2];_[o+4>>2]=p;o=t+36|0;p=_[o+4>>2]|0;S=r+92|0;_[S>>2]=_[o>>2];_[S+4>>2]=p;S=t+44|0;p=_[S+4>>2]|0;o=r+100|0;_[o>>2]=_[S>>2];_[o+4>>2]=p;o=t+52|0;s[r+84>>2]=+s[o>>2];p=t+56|0;s[r+88>>2]=+s[p>>2];x=+s[t+60>>2];if(x!=0.0){s[r+112>>2]=x;s[r+108>>2]=+s[o>>2]+x*+s[p>>2];s[r+116>>2]=0.0;c=r;break}else Be(16824,16696,65,16848)}else c=0}while(0);r=c;break};case 9:{r=xj(e,180)|0;do{if(r){_[r>>2]=15768;o=t+8|0;c=t+12|0;if((_[o>>2]|0)==(_[c>>2]|0))Be(15816,15696,185,15848);else{_[r+4>>2]=_[t>>2];_[r+8>>2]=0;_[r+12>>2]=0;_[r+48>>2]=_[o>>2];_[r+52>>2]=_[c>>2];_[r+56>>2]=0;i[r+61>>0]=i[t+16>>0]|0;i[r+60>>0]=0;_[r+64>>2]=_[t+4>>2];y=r+16|0;_[y+0>>2]=0;_[y+4>>2]=0;_[y+8>>2]=0;_[y+12>>2]=0;_[y+16>>2]=0;_[y+20>>2]=0;_[y+24>>2]=0;_[y+28>>2]=0;_[r>>2]=14920;y=t+20|0;S=_[y+4>>2]|0;D=r+68|0;_[D>>2]=_[y>>2];_[D+4>>2]=S;D=t+28|0;S=_[D+4>>2]|0;y=r+76|0;_[y>>2]=_[D>>2];_[y+4>>2]=S;s[r+84>>2]=0.0;s[r+88>>2]=0.0;s[r+92>>2]=0.0;s[r+96>>2]=+s[t+36>>2];s[r+100>>2]=+s[t+40>>2];y=r;break}}else y=0}while(0);r=y;break};case 2:{r=xj(e,256)|0;if(!r)r=0;else{_[r>>2]=15768;o=t+8|0;c=t+12|0;if((_[o>>2]|0)==(_[c>>2]|0))Be(15816,15696,185,15848);_[r+4>>2]=_[t>>2];_[r+8>>2]=0;_[r+12>>2]=0;_[r+48>>2]=_[o>>2];_[r+52>>2]=_[c>>2];_[r+56>>2]=0;i[r+61>>0]=i[t+16>>0]|0;i[r+60>>0]=0;_[r+64>>2]=_[t+4>>2];o=r+16|0;_[o+0>>2]=0;_[o+4>>2]=0;_[o+8>>2]=0;_[o+12>>2]=0;_[o+16>>2]=0;_[o+20>>2]=0;_[o+24>>2]=0;_[o+28>>2]=0;_[r>>2]=16376;o=r+84|0;S=t+20|0;D=_[S+4>>2]|0;J=r+68|0;_[J>>2]=_[S>>2];_[J+4>>2]=D;J=t+28|0;D=_[J+4>>2]|0;S=r+76|0;_[S>>2]=_[J>>2];_[S+4>>2]=D;S=t+36|0;D=_[S>>2]|0;S=_[S+4>>2]|0;J=o;_[J>>2]=D;_[J+4>>2]=S;x=(_[a>>2]=D,+s[a>>2]);G=(_[a>>2]=S,+s[a>>2]);j=+V(+(x*x+G*G));if(!(j<1.1920928955078125e-7)){C=1.0/j;x=x*C;s[o>>2]=x;G=G*C;s[r+88>>2]=G}A=+-G;C=+x;D=r+92|0;s[D>>2]=A;s[D+4>>2]=C;s[r+100>>2]=+s[t+44>>2];D=r+104|0;s[r+252>>2]=0.0;S=t+52|0;_[D+0>>2]=0;_[D+4>>2]=0;_[D+8>>2]=0;_[D+12>>2]=0;s[r+120>>2]=+s[S>>2];s[r+124>>2]=+s[t+56>>2];s[r+128>>2]=+s[t+64>>2];s[r+132>>2]=+s[t+68>>2];i[r+136>>0]=i[t+48>>0]|0;i[r+137>>0]=i[t+60>>0]|0;_[r+140>>2]=0;S=r+184|0;_[S+0>>2]=0;_[S+4>>2]=0;_[S+8>>2]=0;_[S+12>>2]=0}break};case 7:{c=xj(e,224)|0;do{if(c){_[c>>2]=15768;r=t+8|0;o=t+12|0;if((_[r>>2]|0)==(_[o>>2]|0))Be(15816,15696,185,15848);else{_[c+4>>2]=_[t>>2];_[c+8>>2]=0;_[c+12>>2]=0;_[c+48>>2]=_[r>>2];_[c+52>>2]=_[o>>2];_[c+56>>2]=0;i[c+61>>0]=i[t+16>>0]|0;i[c+60>>0]=0;_[c+64>>2]=_[t+4>>2];D=c+16|0;_[D+0>>2]=0;_[D+4>>2]=0;_[D+8>>2]=0;_[D+12>>2]=0;_[D+16>>2]=0;_[D+20>>2]=0;_[D+24>>2]=0;_[D+28>>2]=0;_[c>>2]=17712;D=t+20|0;S=_[D+4>>2]|0;l=c+76|0;_[l>>2]=_[D>>2];_[l+4>>2]=S;l=t+28|0;S=_[l+4>>2]|0;D=c+84|0;_[D>>2]=_[l>>2];_[D+4>>2]=S;D=t+36|0;S=_[D>>2]|0;D=_[D+4>>2]|0;l=c+92|0;_[l>>2]=S;_[l+4>>2]=D;l=c+100|0;s[l>>2]=-(_[a>>2]=D,+s[a>>2]);_[l+4>>2]=S;s[c+204>>2]=0.0;s[c+108>>2]=0.0;s[c+208>>2]=0.0;s[c+112>>2]=0.0;s[c+212>>2]=0.0;s[c+116>>2]=0.0;s[c+120>>2]=+s[t+48>>2];s[c+124>>2]=+s[t+52>>2];i[c+128>>0]=i[t+44>>0]|0;s[c+68>>2]=+s[t+56>>2];s[c+72>>2]=+s[t+60>>2];s[c+216>>2]=0.0;s[c+220>>2]=0.0;l=c+172|0;_[l+0>>2]=0;_[l+4>>2]=0;_[l+8>>2]=0;_[l+12>>2]=0;l=c;break}}else l=0}while(0);r=l;break};case 3:{r=xj(e,176)|0;do{if(r){_[r>>2]=15768;c=t+8|0;o=t+12|0;if((_[c>>2]|0)==(_[o>>2]|0))Be(15816,15696,185,15848);else{_[r+4>>2]=_[t>>2];_[r+8>>2]=0;_[r+12>>2]=0;_[r+48>>2]=_[c>>2];_[r+52>>2]=_[o>>2];_[r+56>>2]=0;i[r+61>>0]=i[t+16>>0]|0;i[r+60>>0]=0;_[r+64>>2]=_[t+4>>2];m=r+16|0;_[m+0>>2]=0;_[m+4>>2]=0;_[m+8>>2]=0;_[m+12>>2]=0;_[m+16>>2]=0;_[m+20>>2]=0;_[m+24>>2]=0;_[m+28>>2]=0;_[r>>2]=14768;m=t+20|0;S=_[m+4>>2]|0;D=r+80|0;_[D>>2]=_[m>>2];_[D+4>>2]=S;D=t+28|0;S=_[D+4>>2]|0;m=r+88|0;_[m>>2]=_[D>>2];_[m+4>>2]=S;s[r+104>>2]=+s[t+36>>2];s[r+68>>2]=+s[t+40>>2];s[r+72>>2]=+s[t+44>>2];s[r+100>>2]=0.0;s[r+96>>2]=0.0;s[r+76>>2]=0.0;m=r;break}}else m=0}while(0);r=m;break};case 1:{r=xj(e,228)|0;do{if(r){_[r>>2]=15768;c=t+8|0;o=t+12|0;if((_[c>>2]|0)==(_[o>>2]|0))Be(15816,15696,185,15848);else{_[r+4>>2]=_[t>>2];_[r+8>>2]=0;_[r+12>>2]=0;_[r+48>>2]=_[c>>2];_[r+52>>2]=_[o>>2];_[r+56>>2]=0;i[r+61>>0]=i[t+16>>0]|0;i[r+60>>0]=0;_[r+64>>2]=_[t+4>>2];S=r+16|0;_[S+0>>2]=0;_[S+4>>2]=0;_[S+8>>2]=0;_[S+12>>2]=0;_[S+16>>2]=0;_[S+20>>2]=0;_[S+24>>2]=0;_[S+28>>2]=0;_[r>>2]=17112;S=t+20|0;f=_[S+4>>2]|0;D=r+68|0;_[D>>2]=_[S>>2];_[D+4>>2]=f;D=t+28|0;f=_[D+4>>2]|0;S=r+76|0;_[S>>2]=_[D>>2];_[S+4>>2]=f;s[r+116>>2]=+s[t+36>>2];S=r+84|0;f=t+44|0;_[S+0>>2]=0;_[S+4>>2]=0;_[S+8>>2]=0;_[S+12>>2]=0;s[r+120>>2]=+s[f>>2];s[r+124>>2]=+s[t+48>>2];s[r+104>>2]=+s[t+60>>2];s[r+108>>2]=+s[t+56>>2];i[r+112>>0]=i[t+40>>0]|0;i[r+100>>0]=i[t+52>>0]|0;_[r+224>>2]=0;f=r;break}}else f=0}while(0);r=f;break};case 8:{r=xj(e,208)|0;do{if(r){_[r>>2]=15768;c=t+8|0;o=t+12|0;if((_[c>>2]|0)==(_[o>>2]|0))Be(15816,15696,185,15848);else{_[r+4>>2]=_[t>>2];_[r+8>>2]=0;_[r+12>>2]=0;_[r+48>>2]=_[c>>2];_[r+52>>2]=_[o>>2];_[r+56>>2]=0;i[r+61>>0]=i[t+16>>0]|0;i[r+60>>0]=0;_[r+64>>2]=_[t+4>>2];d=r+16|0;_[d+0>>2]=0;_[d+4>>2]=0;_[d+8>>2]=0;_[d+12>>2]=0;_[d+16>>2]=0;_[d+20>>2]=0;_[d+24>>2]=0;_[d+28>>2]=0;_[r>>2]=17568;d=t+20|0;S=_[d+4>>2]|0;D=r+80|0;_[D>>2]=_[d>>2];_[D+4>>2]=S;D=t+28|0;S=_[D+4>>2]|0;d=r+88|0;_[d>>2]=_[D>>2];_[d+4>>2]=S;s[r+96>>2]=+s[t+36>>2];s[r+68>>2]=+s[t+40>>2];s[r+72>>2]=+s[t+44>>2];s[r+104>>2]=0.0;s[r+108>>2]=0.0;s[r+112>>2]=0.0;d=r;break}}else d=0}while(0);r=d;break};case 6:{r=xj(e,276)|0;if(!r)r=0;else{_[r>>2]=15768;c=t+8|0;o=t+12|0;if((_[c>>2]|0)==(_[o>>2]|0))Be(15816,15696,185,15848);_[r+4>>2]=_[t>>2];_[r+8>>2]=0;_[r+12>>2]=0;S=r+48|0;_[S>>2]=_[c>>2];d=r+52|0;_[d>>2]=_[o>>2];_[r+56>>2]=0;i[r+61>>0]=i[t+16>>0]|0;i[r+60>>0]=0;_[r+64>>2]=_[t+4>>2];m=r+16|0;_[m+0>>2]=0;_[m+4>>2]=0;_[m+8>>2]=0;_[m+12>>2]=0;_[m+16>>2]=0;_[m+20>>2]=0;_[m+24>>2]=0;_[m+28>>2]=0;_[r>>2]=15280;m=r+92|0;c=r+100|0;v=r+108|0;u=r+116|0;h=r+124|0;o=r+132|0;D=t+20|0;J=_[D>>2]|0;_[r+68>>2]=J;f=t+24|0;y=_[f>>2]|0;_[r+72>>2]=y;l=_[J+4>>2]|0;_[r+76>>2]=l;p=_[y+4>>2]|0;_[r+80>>2]=p;if((l+-1|0)>>>0>=2)Be(15328,15392,53,15448);if((p+-1|0)>>>0>=2)Be(15464,15392,54,15448);g=_[J+48>>2]|0;_[r+84>>2]=g;J=_[J+52>>2]|0;_[S>>2]=J;j=+s[J+20>>2];A=+s[J+24>>2];x=+s[g+20>>2];G=+s[g+24>>2];D=_[D>>2]|0;if((l|0)==1){A=+s[J+56>>2];C=+s[g+56>>2];S=D+68|0;J=_[S+4>>2]|0;g=v;_[g>>2]=_[S>>2];_[g+4>>2]=J;g=D+76|0;J=_[g+4>>2]|0;S=m;_[S>>2]=_[g>>2];_[S+4>>2]=J;x=+s[D+116>>2];s[r+140>>2]=x;s[h>>2]=0.0;s[r+128>>2]=0.0;x=A-C-x}else{R=+s[g+16>>2];B=+s[g+12>>2];q=+s[J+16>>2];F=+s[J+12>>2];l=D+68|0;P=_[l>>2]|0;l=_[l+4>>2]|0;J=v;_[J>>2]=P;_[J+4>>2]=l;J=D+76|0;g=_[J>>2]|0;J=_[J+4>>2]|0;S=m;_[S>>2]=g;_[S+4>>2]=J;s[r+140>>2]=+s[D+100>>2];S=D+84|0;D=_[S>>2]|0;S=_[S+4>>2]|0;v=h;_[v>>2]=D;_[v+4>>2]=S;k=(_[a>>2]=P,+s[a>>2]);C=(_[a>>2]=l,+s[a>>2]);M=(_[a>>2]=g,+s[a>>2]);w=(_[a>>2]=J,+s[a>>2]);B=F-B+(A*M-j*w);A=q-R+(j*M+A*w);j=(_[a>>2]=D,+s[a>>2])*(G*B+x*A-k);x=j+(_[a>>2]=S,+s[a>>2])*(G*A-x*B-C)}l=_[y+48>>2]|0;_[r+88>>2]=l;y=_[y+52>>2]|0;_[d>>2]=y;A=+s[y+20>>2];j=+s[y+24>>2];G=+s[l+20>>2];C=+s[l+24>>2];f=_[f>>2]|0;if((p|0)==1){q=+s[y+56>>2];F=+s[l+56>>2];P=f+68|0;S=_[P+4>>2]|0;D=u;_[D>>2]=_[P>>2];_[D+4>>2]=S;D=f+76|0;S=_[D+4>>2]|0;P=c;_[P>>2]=_[D>>2];_[P+4>>2]=S;G=+s[f+116>>2];s[r+144>>2]=G;s[o>>2]=0.0;s[r+136>>2]=0.0;G=q-F-G}else{k=+s[l+16>>2];q=+s[l+12>>2];B=+s[y+16>>2];T=+s[y+12>>2];g=f+68|0;v=_[g>>2]|0;g=_[g+4>>2]|0;D=u;_[D>>2]=v;_[D+4>>2]=g;D=f+76|0;J=_[D>>2]|0;D=_[D+4>>2]|0;P=c;_[P>>2]=J;_[P+4>>2]=D;s[r+144>>2]=+s[f+100>>2];P=f+84|0;S=_[P>>2]|0;P=_[P+4>>2]|0;h=o;_[h>>2]=S;_[h+4>>2]=P;M=(_[a>>2]=v,+s[a>>2]);F=(_[a>>2]=g,+s[a>>2]);w=(_[a>>2]=J,+s[a>>2]);R=(_[a>>2]=D,+s[a>>2]);q=T-q+(j*w-A*R);R=B-k+(A*w+j*R);M=(_[a>>2]=S,+s[a>>2])*(C*q+G*R-M);G=M+(_[a>>2]=P,+s[a>>2])*(C*R-G*q-F)}T=+s[t+28>>2];s[r+152>>2]=T;s[r+148>>2]=x+G*T;s[r+156>>2]=0.0}break};case 5:{r=xj(e,168)|0;do{if(r){_[r>>2]=15768;c=t+8|0;p=t+12|0;if((_[c>>2]|0)==(_[p>>2]|0))Be(15816,15696,185,15848);_[r+4>>2]=_[t>>2];_[r+8>>2]=0;_[r+12>>2]=0;_[r+48>>2]=_[c>>2];p=_[p>>2]|0;_[r+52>>2]=p;_[r+56>>2]=0;i[r+61>>0]=i[t+16>>0]|0;i[r+60>>0]=0;_[r+64>>2]=_[t+4>>2];c=r+16|0;_[c+0>>2]=0;_[c+4>>2]=0;_[c+8>>2]=0;_[c+12>>2]=0;_[c+16>>2]=0;_[c+20>>2]=0;_[c+24>>2]=0;_[c+28>>2]=0;_[r>>2]=15912;c=t+20|0;if(((s[a>>2]=+s[c>>2],_[a>>2]|0)&2139095040|0)==2139095040)Be(15960,15984,34,16040);if(((s[a>>2]=+s[t+24>>2],_[a>>2]|0)&2139095040|0)==2139095040)Be(15960,15984,34,16040);u=t+28|0;T=+s[u>>2];if(((s[a>>2]=T,_[a>>2]|0)&2139095040|0)==2139095040|!(T>=0.0))Be(16056,15984,35,16040);f=t+32|0;T=+s[f>>2];if(((s[a>>2]=T,_[a>>2]|0)&2139095040|0)==2139095040|!(T>=0.0))Be(16112,15984,36,16040);d=t+36|0;T=+s[d>>2];if(((s[a>>2]=T,_[a>>2]|0)&2139095040|0)==2139095040|!(T>=0.0))Be(16168,15984,37,16040);else{o=c;P=_[o>>2]|0;o=_[o+4>>2]|0;S=r+76|0;_[S>>2]=P;_[S+4>>2]=o;q=(_[a>>2]=P,+s[a>>2])-+s[p+12>>2];R=(_[a>>2]=o,+s[a>>2])-+s[p+16>>2];M=+s[p+24>>2];T=+s[p+20>>2];F=+(q*M+R*T);T=+(M*R-q*T);o=r+68|0;s[o>>2]=F;s[o+4>>2]=T;s[r+104>>2]=+s[u>>2];s[r+96>>2]=0.0;s[r+100>>2]=0.0;s[r+84>>2]=+s[f>>2];s[r+88>>2]=+s[d>>2];s[r+92>>2]=0.0;s[r+108>>2]=0.0;o=r;break}}else o=0}while(0);r=o;break};case 10:{r=xj(e,168)|0;do{if(r){_[r>>2]=15768;c=t+8|0;o=t+12|0;if((_[c>>2]|0)==(_[o>>2]|0))Be(15816,15696,185,15848);else{_[r+4>>2]=_[t>>2];_[r+8>>2]=0;_[r+12>>2]=0;_[r+48>>2]=_[c>>2];_[r+52>>2]=_[o>>2];_[r+56>>2]=0;i[r+61>>0]=i[t+16>>0]|0;i[r+60>>0]=0;_[r+64>>2]=_[t+4>>2];p=r+16|0;_[p+0>>2]=0;_[p+4>>2]=0;_[p+8>>2]=0;_[p+12>>2]=0;_[p+16>>2]=0;_[p+20>>2]=0;_[p+24>>2]=0;_[p+28>>2]=0;_[r>>2]=17424;p=t+20|0;P=_[p+4>>2]|0;S=r+68|0;_[S>>2]=_[p>>2];_[S+4>>2]=P;S=t+28|0;P=_[S+4>>2]|0;p=r+76|0;_[p>>2]=_[S>>2];_[p+4>>2]=P;s[r+84>>2]=+s[t+36>>2];s[r+160>>2]=0.0;s[r+92>>2]=0.0;_[r+164>>2]=0;s[r+88>>2]=0.0;p=r;break}}else p=0}while(0);r=p;break};case 11:{r=xj(e,192)|0;do{if(r){_[r>>2]=15768;c=t+8|0;o=t+12|0;if((_[c>>2]|0)==(_[o>>2]|0))Be(15816,15696,185,15848);else{_[r+4>>2]=_[t>>2];_[r+8>>2]=0;_[r+12>>2]=0;_[r+48>>2]=_[c>>2];_[r+52>>2]=_[o>>2];_[r+56>>2]=0;i[r+61>>0]=i[t+16>>0]|0;i[r+60>>0]=0;_[r+64>>2]=_[t+4>>2];S=r+16|0;_[S+0>>2]=0;_[S+4>>2]=0;_[S+8>>2]=0;_[S+12>>2]=0;_[S+16>>2]=0;_[S+20>>2]=0;_[S+24>>2]=0;_[S+28>>2]=0;_[r>>2]=5256;S=t+20|0;P=_[S+4>>2]|0;u=r+68|0;_[u>>2]=_[S>>2];_[u+4>>2]=P;s[r+76>>2]=+s[t+28>>2];s[r+80>>2]=0.0;s[r+84>>2]=0.0;s[r+88>>2]=0.0;s[r+92>>2]=+s[t+32>>2];s[r+96>>2]=+s[t+36>>2];s[r+100>>2]=+s[t+40>>2];u=r;break}}else u=0}while(0);r=u;break};default:Be(15688,15696,121,15744)}}while(0);_[r+8>>2]=0;c=e+102956|0;_[r+12>>2]=_[c>>2];o=_[c>>2]|0;if(o)_[o+8>>2]=r;_[c>>2]=r;c=e+102964|0;_[c>>2]=(_[c>>2]|0)+1;c=r+16|0;_[r+20>>2]=r;e=r+52|0;_[c>>2]=_[e>>2];_[r+24>>2]=0;o=r+48|0;p=_[o>>2]|0;u=p+108|0;_[r+28>>2]=_[u>>2];u=_[u>>2]|0;if(u){_[u+8>>2]=c;p=_[o>>2]|0}_[p+108>>2]=c;c=r+32|0;_[r+36>>2]=r;_[c>>2]=_[o>>2];_[r+40>>2]=0;o=_[e>>2]|0;p=o+108|0;_[r+44>>2]=_[p>>2];p=_[p>>2]|0;if(p){_[p+8>>2]=c;o=_[e>>2]|0}_[o+108>>2]=c;e=_[t+8>>2]|0;if(i[t+16>>0]|0){b=n;return r|0}t=_[(_[t+12>>2]|0)+112>>2]|0;if(!t){b=n;return r|0}do{if((_[t>>2]|0)==(e|0)){P=(_[t+4>>2]|0)+4|0;_[P>>2]=_[P>>2]|8}t=_[t+12>>2]|0}while((t|0)!=0);b=n;return r|0}function gc(e,t){e=e|0;t=t|0;var n=0;n=b;sA(e,t);b=n;return}function Jc(e,t,n,i){e=e|0;t=+t;n=n|0;i=i|0;var r=0;r=b;Ph(e,t,n,i);b=r;return}function Dc(e){e=e|0;var t=0;t=b;e=_[e+102952>>2]|0;if(!e){b=t;return}do{s[e+76>>2]=0.0;s[e+80>>2]=0.0;s[e+84>>2]=0.0;e=_[e+96>>2]|0}while((e|0)!=0);b=t;return}function xc(e){e=e|0;var t=0,n=0,i=0,o=0,c=0,p=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0,h=0,v=0,g=0,J=0,D=0,x=0,G=0,j=0,A=0,S=0,C=0,B=0,k=0,w=0,M=0,R=0,q=0,F=0,P=0,T=0,L=0,I=0,W=0,E=0,O=0,V=0,U=0,N=0,z=0,H=0.0,Q=0.0,K=0.0,$=0.0;t=b;b=b+208|0;d=t+40|0;a=t+24|0;m=t+80|0;v=t+104|0;l=t+48|0;y=t+32|0;h=t;x=t+160|0;D=t+64|0;J=t+176|0;G=t+192|0;j=t+88|0;o=t+144|0;u=t+112|0;i=t+8|0;n=e+102984|0;c=_[n>>2]|0;if(!c){b=t;return}c=_[c+4>>2]|0;if((c&1|0)!=0?(E=_[e+102952>>2]|0,(E|0)!=0):0){W=x+4|0;A=x+8|0;S=x+12|0;w=G+4|0;M=G+8|0;R=G+12|0;q=j+4|0;F=j+8|0;P=j+12|0;T=D+4|0;L=D+8|0;I=D+12|0;C=J+4|0;B=J+8|0;k=J+12|0;do{O=E+12|0;U=_[E+100>>2]|0;if(U){V=E+4|0;do{N=r[V>>1]|0;do{if(N&32){z=_[E>>2]|0;if((z|0)==1){s[J>>2]=.5;s[C>>2]=.5;s[B>>2]=.8999999761581421;s[k>>2]=1.0;Th(e,_[U+12>>2]|0,O,J);break}else if(z)if(!(N&2)){s[G>>2]=.6000000238418579;s[w>>2]=.6000000238418579;s[M>>2]=.6000000238418579;s[R>>2]=1.0;Th(e,_[U+12>>2]|0,O,G);break}else{s[j>>2]=.8999999761581421;s[q>>2]=.699999988079071;s[F>>2]=.699999988079071;s[P>>2]=1.0;Th(e,_[U+12>>2]|0,O,j);break}else{s[D>>2]=.5;s[T>>2]=.8999999761581421;s[L>>2]=.5;s[I>>2]=1.0;Th(e,_[U+12>>2]|0,O,D);break}}else{s[x>>2]=.5;s[W>>2]=.5;s[A>>2]=.30000001192092896;s[S>>2]=1.0;Th(e,_[U+12>>2]|0,O,x)}}while(0);U=_[U+4>>2]|0}while((U|0)!=0)}E=_[E+96>>2]|0}while((E|0)!=0)}if((c&2|0)!=0?(g=_[e+102956>>2]|0,(g|0)!=0):0){J=l+4|0;D=l+8|0;x=l+12|0;do{N=(_[g+52>>2]|0)+12|0;U=(_[g+48>>2]|0)+12|0;G=_[U+4>>2]|0;z=d;_[z>>2]=_[U>>2];_[z+4>>2]=G;z=_[N+4>>2]|0;G=a;_[G>>2]=_[N>>2];_[G+4>>2]=z;lq[_[_[g>>2]>>2]&127](m,g);lq[_[(_[g>>2]|0)+4>>2]&127](v,g);s[l>>2]=.5;s[J>>2]=.800000011920929;s[D>>2]=.800000011920929;s[x>>2]=1.0;G=_[g+4>>2]|0;if((G|0)==3){z=_[n>>2]|0;Aq[_[(_[z>>2]|0)+24>>2]&63](z,m,v,l)}else if((G|0)==4){z=g+68|0;N=_[z+4>>2]|0;U=y;_[U>>2]=_[z>>2];_[U+4>>2]=N;U=g+76|0;N=_[U+4>>2]|0;z=h;_[z>>2]=_[U>>2];_[z+4>>2]=N;z=_[n>>2]|0;Aq[_[(_[z>>2]|0)+24>>2]&63](z,y,m,l);z=_[n>>2]|0;Aq[_[(_[z>>2]|0)+24>>2]&63](z,h,v,l);z=_[n>>2]|0;Aq[_[(_[z>>2]|0)+24>>2]&63](z,y,h,l)}else if((G|0)!=5){z=_[n>>2]|0;Aq[_[(_[z>>2]|0)+24>>2]&63](z,d,m,l);z=_[n>>2]|0;Aq[_[(_[z>>2]|0)+24>>2]&63](z,m,v,l);z=_[n>>2]|0;Aq[_[(_[z>>2]|0)+24>>2]&63](z,a,v,l)}g=_[g+12>>2]|0}while((g|0)!=0)}if(c&8){a=e+102932|0;while(1){a=_[a>>2]|0;if(!a)break;else a=a+12|0}}e:do{if((c&4|0)!=0?(s[o>>2]=.8999999761581421,s[o+4>>2]=.30000001192092896,s[o+8>>2]=.8999999761581421,s[o+12>>2]=1.0,f=_[e+102952>>2]|0,(f|0)!=0):0){d=e+102884|0;J=e+102876|0;a=u+4|0;g=u+8|0;v=u+12|0;h=u+16|0;m=u+20|0;l=u+24|0;y=u+28|0;t:while(1){if((r[f+4>>1]&32)!=0?(p=_[f+100>>2]|0,(p|0)!=0):0){A=p;do{j=A+28|0;if((_[j>>2]|0)>0){G=A+24|0;x=0;do{D=_[(_[G>>2]|0)+(x*28|0)+24>>2]|0;if((D|0)<=-1){o=37;break t}if((_[d>>2]|0)<=(D|0)){o=37;break t}z=_[J>>2]|0;Q=+s[z+(D*36|0)>>2];$=+s[z+(D*36|0)+4>>2];K=+s[z+(D*36|0)+8>>2];H=+s[z+(D*36|0)+12>>2];s[u>>2]=Q;s[a>>2]=$;s[g>>2]=K;s[v>>2]=$;s[h>>2]=K;s[m>>2]=H;s[l>>2]=Q;s[y>>2]=H;z=_[n>>2]|0;Aq[_[(_[z>>2]|0)+8>>2]&63](z,u,4,o);x=x+1|0}while((x|0)<(_[j>>2]|0))}A=_[A+4>>2]|0}while((A|0)!=0)}f=_[f+96>>2]|0;if(!f)break e}if((o|0)==37)Be(12256,12200,164,12320)}}while(0);if(!(c&16)){b=t;return}e=_[e+102952>>2]|0;if(!e){b=t;return}do{U=e+12|0;_[i+0>>2]=_[U+0>>2];_[i+4>>2]=_[U+4>>2];_[i+8>>2]=_[U+8>>2];_[i+12>>2]=_[U+12>>2];U=e+44|0;N=_[U+4>>2]|0;z=i;_[z>>2]=_[U>>2];_[z+4>>2]=N;z=_[n>>2]|0;lq[_[(_[z>>2]|0)+28>>2]&127](z,i);e=_[e+96>>2]|0}while((e|0)!=0);b=t;return}function Gc(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,c=0,p=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0,h=0,v=0,g=0;c=b;b=b+1040|0;r=c;o=r+4|0;_[r>>2]=o;p=r+1028|0;_[p>>2]=0;u=r+1032|0;_[u>>2]=256;a=_[r>>2]|0;_[a+(_[p>>2]<<2)>>2]=_[e+102872>>2];g=_[p>>2]|0;h=g+1|0;_[p>>2]=h;do{if((g|0)>-1){l=e+102876|0;y=n+4|0;d=n+8|0;a=n+12|0;e=e+102884|0;e:while(1){if((h|0)<=0){p=4;break}h=h+-1|0;_[p>>2]=h;g=_[r>>2]|0;m=_[g+(h<<2)>>2]|0;do{if((m|0)!=-1?(f=_[l>>2]|0,!((+s[n>>2]-+s[f+(m*36|0)+8>>2]>0.0?1:+s[y>>2]-+s[f+(m*36|0)+12>>2]>0.0)|+s[f+(m*36|0)>>2]-+s[d>>2]>0.0|+s[f+(m*36|0)+4>>2]-+s[a>>2]>0.0)):0){v=f+(m*36|0)+24|0;if((_[v>>2]|0)==-1){if((m|0)<=-1){p=11;break e}if((_[e>>2]|0)<=(m|0)){p=11;break e}if(!(Gq[_[(_[t>>2]|0)+8>>2]&63](t,_[(_[f+(m*36|0)+16>>2]|0)+16>>2]|0)|0)){p=21;break e}h=_[p>>2]|0;break}if((h|0)==(_[u>>2]|0)?(_[u>>2]=h<<1,h=kS(h<<3)|0,_[r>>2]=h,FS(h|0,g|0,_[p>>2]<<2|0)|0,(g|0)!=(o|0)):0)wS(g);h=_[r>>2]|0;_[h+(_[p>>2]<<2)>>2]=_[v>>2];v=(_[p>>2]|0)+1|0;_[p>>2]=v;m=f+(m*36|0)+28|0;if((v|0)==(_[u>>2]|0)?(_[u>>2]=v<<1,g=kS(v<<3)|0,_[r>>2]=g,FS(g|0,h|0,_[p>>2]<<2|0)|0,(h|0)!=(o|0)):0)wS(h);_[(_[r>>2]|0)+(_[p>>2]<<2)>>2]=_[m>>2];h=(_[p>>2]|0)+1|0;_[p>>2]=h}}while(0);if((h|0)<=0){p=21;break}}if((p|0)==4)Be(10128,10144,67,10192);else if((p|0)==11)Be(12256,12200,158,12304);else if((p|0)==21){i=_[r>>2]|0;break}}else i=a}while(0);if((i|0)==(o|0)){b=c;return}wS(i);_[r>>2]=0;b=c;return}function jc(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,c=0,p=0,u=0.0,f=0.0,d=0,y=0,l=0.0,m=0.0,h=0,v=0.0,g=0.0,J=0.0,D=0.0,x=0,G=0,j=0.0,A=0.0,S=0.0,C=0,B=0,k=0,w=0,M=0.0,R=0,q=0,F=0,P=0,T=0.0,L=0,I=0,W=0.0,E=0.0,O=0.0,U=0.0,N=0,z=0,H=0,Q=0,K=0.0,$=0.0,Z=0.0;r=b;b=b+1088|0;p=r+1064|0;c=r+1056|0;o=r+20|0;d=r;h=_[n>>2]|0;n=_[n+4>>2]|0;x=i;i=_[x>>2]|0;x=_[x+4>>2]|0;D=(_[a>>2]=h,+s[a>>2]);v=(_[a>>2]=n,+s[a>>2]);g=(_[a>>2]=i,+s[a>>2]);g=g-D;J=(_[a>>2]=x,+s[a>>2])-v;j=g*g+J*J;if(!(j>0.0))Be(12168,12200,209,12248);j=+V(+j);if(j<1.1920928955078125e-7){S=J;A=g}else{A=1.0/j;S=J*A;A=g*A}j=-S;M=S<-0.0?j:S;if(A>0.0)S=A;else S=-A;E=D+g;O=v+J;G=o+4|0;_[o>>2]=G;B=o+1028|0;_[B>>2]=0;C=o+1032|0;_[C>>2]=256;_[(_[o>>2]|0)+(_[B>>2]<<2)>>2]=_[e+102872>>2];Q=_[B>>2]|0;H=Q+1|0;_[B>>2]=H;e:do{if((Q|0)>-1){k=e+102876|0;w=d+8|0;R=d+16|0;q=e+102884|0;F=p+8|0;P=d+4|0;L=d+8|0;e=d+12|0;I=c+4|0;T=D<E?D:E;W=v>O?v:O;E=D>E?D:E;O=v<O?v:O;U=1.0;t:while(1){n:while(1){if((H|0)<=0){c=11;break t}H=H+-1|0;_[B>>2]=H;z=_[o>>2]|0;N=_[z+(H<<2)>>2]|0;do{if((N|0)!=-1?(y=_[k>>2]|0,l=+s[y+(N*36|0)+8>>2],u=+s[y+(N*36|0)+12>>2],f=+s[y+(N*36|0)>>2],m=+s[y+(N*36|0)+4>>2],!(T-l>0.0|O-u>0.0|f-E>0.0|m-W>0.0)):0){K=(D-(l+f)*.5)*j+A*(v-(u+m)*.5);if(!(K>0.0))K=-K;if(!(K-(M*(l-f)*.5+S*(u-m)*.5)>0.0)){Q=y+(N*36|0)+24|0;if((_[Q>>2]|0)!=-1){if((H|0)==(_[C>>2]|0)?(_[C>>2]=H<<1,H=kS(H<<3)|0,_[o>>2]=H,FS(H|0,z|0,_[B>>2]<<2|0)|0,(z|0)!=(G|0)):0)wS(z);z=_[o>>2]|0;_[z+(_[B>>2]<<2)>>2]=_[Q>>2];H=(_[B>>2]|0)+1|0;_[B>>2]=H;N=y+(N*36|0)+28|0;if((H|0)==(_[C>>2]|0)?(_[C>>2]=H<<1,Q=kS(H<<3)|0,_[o>>2]=Q,FS(Q|0,z|0,_[B>>2]<<2|0)|0,(z|0)!=(G|0)):0)wS(z);_[(_[o>>2]|0)+(_[B>>2]<<2)>>2]=_[N>>2];H=(_[B>>2]|0)+1|0;_[B>>2]=H;break}Q=d;_[Q>>2]=h;_[Q+4>>2]=n;Q=w;_[Q>>2]=i;_[Q+4>>2]=x;s[R>>2]=U;if((N|0)<=-1){c=21;break t}if((_[q>>2]|0)<=(N|0)){c=21;break t}Q=_[y+(N*36|0)+16>>2]|0;N=_[Q+16>>2]|0;H=_[N+12>>2]|0;if(jq[_[(_[H>>2]|0)+20>>2]&63](H,p,d,(_[N+8>>2]|0)+12|0,_[Q+20>>2]|0)|0){K=+s[F>>2];Z=1.0-K;$=Z*+s[P>>2]+K*+s[e>>2];s[c>>2]=+s[d>>2]*Z+K*+s[L>>2];s[I>>2]=$;K=+yq[_[(_[t>>2]|0)+8>>2]&63](t,N,c,p,K)}else K=+s[R>>2];if(K==0.0)break e;if(K>0.0)break n;H=_[B>>2]|0}}}while(0);if((H|0)<=0)break e}E=D+g*K;O=v+J*K;H=_[B>>2]|0;if((H|0)<=0)break e;else{T=D<E?D:E;W=v>O?v:O;E=D>E?D:E;O=v<O?v:O;U=K}}if((c|0)==11)Be(10128,10144,67,10192);else if((c|0)==21)Be(12256,12200,158,12304)}}while(0);c=_[o>>2]|0;if((c|0)==(G|0)){b=r;return}wS(c);_[o>>2]=0;b=r;return}function Ac(e){e=e|0;return _[e+102952>>2]|0}function Sc(e){e=e|0;return _[e+102956>>2]|0}function Cc(e){e=e|0;return _[e+102932>>2]|0}function Bc(e,t){e=e|0;t=t|0;var n=0,p=0;n=b;p=e+102976|0;if((t&1|0)==(o[p>>0]|0|0)){b=n;return}i[p>>0]=t&1;if(t){b=n;return}e=_[e+102952>>2]|0;if(!e){b=n;return}do{p=e+4|0;t=c[p>>1]|0;if(!(t&2)){r[p>>1]=t|2;s[e+144>>2]=0.0}e=_[e+96>>2]|0}while((e|0)!=0);b=n;return}function kc(e){e=e|0;return(i[e+102976>>0]|0)!=0|0}function wc(e,t){e=e|0;t=t|0;i[e+102992>>0]=t&1;return}function Mc(e){e=e|0;return(i[e+102992>>0]|0)!=0|0}function Rc(e,t){e=e|0;t=t|0;i[e+102993>>0]=t&1;return}function qc(e){e=e|0;return(i[e+102993>>0]|0)!=0|0}function Fc(e,t){e=e|0;t=t|0;i[e+102994>>0]=t&1;return}function Pc(e){e=e|0;return(i[e+102994>>0]|0)!=0|0}function Tc(e){e=e|0;return _[e+102900>>2]|0}function Lc(e){e=e|0;return _[e+102960>>2]|0}function Ic(e){e=e|0;return _[e+102964>>2]|0}function Wc(e){e=e|0;return _[e+102936>>2]|0}function Ec(e){e=e|0;var t=0,n=0;t=b;n=_[e+102872>>2]|0;if((n|0)==-1){n=0;b=t;return n|0}n=_[(_[e+102876>>2]|0)+(n*36|0)+32>>2]|0;b=t;return n|0}function Oc(e){e=e|0;var t=0,n=0,i=0,r=0,o=0;t=b;n=_[e+102884>>2]|0;if((n|0)<=0){o=0;b=t;return o|0}e=_[e+102876>>2]|0;i=0;r=0;while(1){if((_[e+(i*36|0)+32>>2]|0)>=2){o=_[e+(i*36|0)+24>>2]|0;if((o|0)==-1){n=5;break}o=(_[e+((_[e+(i*36|0)+28>>2]|0)*36|0)+32>>2]|0)-(_[e+(o*36|0)+32>>2]|0)|0;o=(o|0)>0?o:0-o|0;r=(r|0)>(o|0)?r:o}i=i+1|0;if((i|0)>=(n|0)){n=8;break}}if((n|0)==5)Be(6616,6088,683,6640);else if((n|0)==8){b=t;return r|0}return 0}function Vc(e){e=e|0;var t=0,n=0.0,i=0,r=0,o=0.0;t=b;r=_[e+102872>>2]|0;if((r|0)==-1){o=0.0;b=t;return+o}i=_[e+102876>>2]|0;n=(+s[i+(r*36|0)+8>>2]-+s[i+(r*36|0)>>2]+(+s[i+(r*36|0)+12>>2]-+s[i+(r*36|0)+4>>2]))*2.0;e=_[e+102884>>2]|0;if((e|0)>0){r=0;o=0.0;do{if((_[i+(r*36|0)+32>>2]|0)>=0)o=o+(+s[i+(r*36|0)+8>>2]-+s[i+(r*36|0)>>2]+(+s[i+(r*36|0)+12>>2]-+s[i+(r*36|0)+4>>2]))*2.0;r=r+1|0}while((r|0)<(e|0))}else o=0.0;o=o/n;b=t;return+o}function Uc(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+102968|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Nc(e){e=e|0;var t=0,n=0,r=0;t=b;if((i[280]|0)==0?(je(280)|0)!=0:0)Me(280);r=e+102968|0;n=_[r+4>>2]|0;e=272;_[e>>2]=_[r>>2];_[e+4>>2]=n;b=t;return 272}function zc(e){e=e|0;return(_[e+102868>>2]&2|0)!=0|0}function Hc(e,t){e=e|0;t=t|0;var n=0;e=e+102868|0;n=_[e>>2]|0;_[e>>2]=t?n|4:n&-5;return}function Qc(e){e=e|0;return(_[e+102868>>2]&4|0)!=0|0}function Kc(e){e=e|0;return e+102996|0}function $c(e){e=e|0;var t=0,n=0,i=0,r=0,o=0.0;n=b;b=b+16|0;t=n;if(_[e+102868>>2]&2){b=n;return}o=+s[e+102972>>2];u[a>>3]=+s[e+102968>>2];_[t>>2]=_[a>>2];_[t+4>>2]=_[a+4>>2];i=t+8|0;u[a>>3]=o;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(11880,t);Bj(11912,t);_[t>>2]=_[e+102960>>2];Bj(11944,t);_[t>>2]=_[e+102964>>2];Bj(12008,t);i=_[e+102952>>2]|0;if(i){r=0;while(1){_[i+8>>2]=r;Pj(i);i=_[i+96>>2]|0;if(!i)break;else r=r+1|0}}e=e+102956|0;r=_[e>>2]|0;if(r){i=0;while(1){_[r+56>>2]=i;r=_[r+12>>2]|0;if(!r)break;else i=i+1|0}i=_[e>>2]|0;if(i){do{if((_[i+4>>2]|0)!=6){Bj(12072,t);dq[_[(_[i>>2]|0)+16>>2]&127](i);Bj(12080,t)}i=_[i+12>>2]|0}while((i|0)!=0);e=_[e>>2]|0;if(e)do{if((_[e+4>>2]|0)==6){Bj(12072,t);dq[_[(_[e>>2]|0)+16>>2]&127](e);Bj(12080,t)}e=_[e+12>>2]|0}while((e|0)!=0)}}Bj(12088,t);Bj(12112,t);Bj(12136,t);Bj(12152,t);b=n;return}function Zc(e){e=e|0;var t=0,n=0,i=0,r=0;t=b;if(!e){b=t;return}n=_[e+102952>>2]|0;if(n)do{i=n;n=_[n+96>>2]|0;i=_[i+100>>2]|0;while(1){if(!i)break;r=_[i+4>>2]|0;_[i+28>>2]=0;tA(i,e);i=r}}while((n|0)!=0);wS(_[e+102904>>2]|0);wS(_[e+102916>>2]|0);wS(_[e+102876>>2]|0);if(_[e+102468>>2]|0)Be(8840,8856,32,8904);if(_[e+102864>>2]|0)Be(8928,8856,33,8904);n=e+4|0;r=_[e>>2]|0;if((_[n>>2]|0)>0){i=0;do{wS(_[r+(i<<3)+4>>2]|0);i=i+1|0;r=_[e>>2]|0}while((i|0)<(_[n>>2]|0))}wS(r);wS(e);b=t;return}function Yc(e){e=e|0;return e+68|0}function Xc(e){e=e|0;return e+76|0}function ep(e){e=e|0;return e+84|0}function tp(e){e=e|0;return+ +s[e+100>>2]}function np(e){e=e|0;var t=0.0,n=0.0,i=0.0,r=0.0,o=0,c=0.0,p=0.0,u=0,b=0.0,f=0.0,a=0.0,d=0.0;o=_[e+48>>2]|0;n=+s[o+24>>2];p=+s[e+68>>2];r=+s[o+20>>2];c=+s[e+72>>2];u=_[e+52>>2]|0;f=+s[u+24>>2];d=+s[e+76>>2];a=+s[u+20>>2];b=+s[e+80>>2];i=+s[e+84>>2];t=+s[e+88>>2];return+((+s[u+12>>2]+(f*d-a*b)-(+s[o+12>>2]+(n*p-r*c)))*(n*i-r*t)+(d*a+f*b+ +s[u+16>>2]-(p*r+n*c+ +s[o+16>>2]))*(r*i+n*t))}function ip(e){e=e|0;var t=0.0,n=0,i=0.0,r=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0.0,d=0.0,y=0.0,l=0,m=0;n=b;l=_[e+48>>2]|0;m=_[e+52>>2]|0;d=+s[e+68>>2]-+s[l+28>>2];r=+s[e+72>>2]-+s[l+32>>2];u=+s[l+24>>2];a=+s[l+20>>2];i=d*u-r*a;d=u*r+d*a;r=+s[e+76>>2]-+s[m+28>>2];p=+s[e+80>>2]-+s[m+32>>2];y=+s[m+24>>2];f=+s[m+20>>2];c=r*y-p*f;f=y*p+r*f;r=+s[e+84>>2];p=+s[e+88>>2];y=u*r-a*p;p=a*r+u*p;e=l+64|0;u=+s[e>>2];r=+s[e+4>>2];e=m+64|0;a=+s[e>>2];t=+s[l+72>>2];o=+s[m+72>>2];t=(f+ +s[m+48>>2]-(d+ +s[l+48>>2]))*y*t-(c+ +s[m+44>>2]-(i+ +s[l+44>>2]))*p*t+(y*(d*t+(a-f*o-u))+p*(+s[e+4>>2]+c*o-r-i*t));b=n;return+t}function rp(e){e=e|0;return(i[e+136>>0]|0)!=0|0}function _p(e,t){e=e|0;t=t|0;var n=0,p=0,u=0,f=0,a=0;n=b;p=e+136|0;if((t&1|0)==(o[p>>0]|0|0)){b=n;return}u=_[e+48>>2]|0;f=u+4|0;a=c[f>>1]|0;if(!(a&2)){r[f>>1]=a|2;s[u+144>>2]=0.0}u=_[e+52>>2]|0;f=u+4|0;a=c[f>>1]|0;if(!(a&2)){r[f>>1]=a|2;s[u+144>>2]=0.0}i[p>>0]=t&1;s[e+112>>2]=0.0;b=n;return}function op(e){e=e|0;return+ +s[e+120>>2]}function cp(e){e=e|0;return+ +s[e+124>>2]}function pp(e,t,n){e=e|0;t=+t;n=+n;var i=0,o=0,p=0,u=0,f=0;o=b;if(!(t<=n))Be(17160,16424,567,17232);i=e+120|0;if(!(+s[i>>2]!=t)?!(+s[e+124>>2]!=n):0){b=o;return}f=_[e+48>>2]|0;p=f+4|0;u=c[p>>1]|0;if(!(u&2)){r[p>>1]=u|2;s[f+144>>2]=0.0}u=_[e+52>>2]|0;f=u+4|0;p=c[f>>1]|0;if(!(p&2)){r[f>>1]=p|2;s[u+144>>2]=0.0}s[i>>2]=t;s[e+124>>2]=n;s[e+112>>2]=0.0;b=o;return}function sp(e){e=e|0;return(i[e+137>>0]|0)!=0|0}function up(e,t){e=e|0;t=t|0;var n=0,o=0,p=0,u=0;n=b;o=_[e+48>>2]|0;p=o+4|0;u=c[p>>1]|0;if(!(u&2)){r[p>>1]=u|2;s[o+144>>2]=0.0}u=_[e+52>>2]|0;p=u+4|0;o=c[p>>1]|0;if(o&2){u=e+137|0;p=t&1;i[u>>0]=p;b=n;return}r[p>>1]=o|2;s[u+144>>2]=0.0;u=e+137|0;p=t&1;i[u>>0]=p;b=n;return}function bp(e,t){e=e|0;t=+t;var n=0,i=0,o=0,p=0;n=b;i=_[e+48>>2]|0;o=i+4|0;p=c[o>>1]|0;if(!(p&2)){r[o>>1]=p|2;s[i+144>>2]=0.0}p=_[e+52>>2]|0;o=p+4|0;i=c[o>>1]|0;if(i&2){p=e+132|0;s[p>>2]=t;b=n;return}r[o>>1]=i|2;s[p+144>>2]=0.0;p=e+132|0;s[p>>2]=t;b=n;return}function fp(e){e=e|0;return+ +s[e+132>>2]}function ap(e,t){e=e|0;t=+t;var n=0,i=0,o=0,p=0;n=b;i=_[e+48>>2]|0;o=i+4|0;p=c[o>>1]|0;if(!(p&2)){r[o>>1]=p|2;s[i+144>>2]=0.0}p=_[e+52>>2]|0;o=p+4|0;i=c[o>>1]|0;if(i&2){p=e+128|0;s[p>>2]=t;b=n;return}r[o>>1]=i|2;s[p+144>>2]=0.0;p=e+128|0;s[p>>2]=t;b=n;return}function dp(e){e=e|0;return+ +s[e+128>>2]}function yp(e,t){e=e|0;t=+t;return+(+s[e+116>>2]*t)}function lp(e){e=e|0;return _[e+4>>2]|0}function mp(e){e=e|0;return _[e+48>>2]|0}function hp(e){e=e|0;return _[e+52>>2]|0}function vp(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[296]|0)==0?(je(296)|0)!=0:0)Me(296);lq[_[_[e>>2]>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=288;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 288}function gp(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[312]|0)==0?(je(312)|0)!=0:0)Me(312);lq[_[(_[e>>2]|0)+4>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=304;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 304}function Jp(e,t){e=e|0;t=+t;var n=0,r=0,o=0;r=b;b=b+16|0;n=r;if((i[328]|0)==0?(je(328)|0)!=0:0)Me(328);Dq[_[(_[e>>2]|0)+8>>2]&63](n,e,t);o=n;e=_[o+4>>2]|0;n=320;_[n>>2]=_[o>>2];_[n+4>>2]=e;b=r;return 320}function Dp(e,t){e=e|0;t=+t;var n=0;n=b;t=+aq[_[(_[e>>2]|0)+12>>2]&63](e,t);b=n;return+t}function xp(e){e=e|0;return _[e+12>>2]|0}function Gp(e){e=e|0;return _[e+64>>2]|0}function jp(e,t){e=e|0;t=t|0;_[e+64>>2]=t;return}function Ap(e){e=e|0;var t=0;t=b;if(!(r[(_[e+48>>2]|0)+4>>1]&32)){e=0;b=t;return e|0}e=(r[(_[e+52>>2]|0)+4>>1]&32)!=0;b=t;return e|0}function Sp(e){e=e|0;return(i[e+61>>0]|0)!=0|0}function Cp(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+28>>2]&127](e);b=t;return}function Bp(e){e=e|0;return e|0}function kp(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function wp(e){e=e|0;return+ +s[e+8>>2]}function Mp(e,t){e=e|0;t=+t;s[e+8>>2]=t;return}function Rp(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function qp(e){e=e|0;return e|0}function Fp(e,t){e=e|0;t=t|0;t=o[t>>0]|o[t+1>>0]<<8|o[t+2>>0]<<16|o[t+3>>0]<<24;i[e>>0]=t;i[e+1>>0]=t>>8;i[e+2>>0]=t>>16;i[e+3>>0]=t>>24;return}function Pp(e){e=e|0;return _[e>>2]|0}function Tp(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function Lp(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function Ip(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function Wp(){var e=0,t=0,n=0;e=b;t=kS(4)|0;if(t){n=t;_[n>>2]=2688;b=e;return n|0}while(1){t=_[4698]|0;_[4698]=t+0;if(!t){t=4;break}Jq[t&63]();n=kS(4)|0;if(n){t=5;break}}if((t|0)==4){n=_t(4)|0;_[n>>2]=18632;tt(n|0,18680,116)}else if((t|0)==5){_[n>>2]=2688;b=e;return n|0}return 0}function Ep(e,t){e=e|0;t=t|0;var n=0;n=b;lq[_[(_[e>>2]|0)+8>>2]&127](e,t);b=n;return}function Op(e,t){e=e|0;t=t|0;var n=0;n=b;lq[_[(_[e>>2]|0)+12>>2]&127](e,t);b=n;return}function Vp(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=b;gq[_[(_[e>>2]|0)+16>>2]&63](e,t,n);b=i;return}function Up(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=b;gq[_[(_[e>>2]|0)+20>>2]&63](e,t,n);b=i;return}function Np(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function zp(){var e=0,t=0,n=0;e=b;t=kS(16)|0;if(t){n=t;b=e;return n|0}while(1){t=_[4698]|0;_[4698]=t+0;if(!t){t=4;break}Jq[t&63]();n=kS(16)|0;if(n){t=5;break}}if((t|0)==4){n=_t(4)|0;_[n>>2]=18632;tt(n|0,18680,116)}else if((t|0)==5){b=e;return n|0}return 0}function Hp(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0;n=b;i=kS(16)|0;e:do{if(!i){while(1){i=_[4698]|0;_[4698]=i+0;if(!i)break;Jq[i&63]();i=kS(16)|0;if(i)break e}i=_t(4)|0;_[i>>2]=18632;tt(i|0,18680,116)}}while(0);o=e;e=_[o+4>>2]|0;r=i;_[r>>2]=_[o>>2];_[r+4>>2]=e;r=t;e=_[r+4>>2]|0;t=i+8|0;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return i|0}function Qp(e,t,n,i){e=+e;t=+t;n=+n;i=+i;var r=0,o=0;r=b;o=kS(16)|0;e:do{if(!o){while(1){o=_[4698]|0;_[4698]=o+0;if(!o)break;Jq[o&63]();o=kS(16)|0;if(o)break e}o=_t(4)|0;_[o>>2]=18632;tt(o|0,18680,116)}}while(0);s[o>>2]=e;s[o+4>>2]=n;s[o+8>>2]=t;s[o+12>>2]=i;b=r;return o|0}function Kp(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0;r=t;t=_[r+4>>2]|0;i=e;_[i>>2]=_[r>>2];_[i+4>>2]=t;i=n;n=_[i+4>>2]|0;t=e+8|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function $p(e){e=e|0;s[e>>2]=1.0;s[e+8>>2]=0.0;s[e+4>>2]=0.0;s[e+12>>2]=1.0;return}function Zp(e){e=e|0;var t=0;t=b;_[e+0>>2]=0;_[e+4>>2]=0;_[e+8>>2]=0;_[e+12>>2]=0;b=t;return}function Yp(e){e=e|0;var t=0,n=0.0,r=0.0,_=0.0,o=0.0,c=0.0,p=0.0;t=b;if((i[352]|0)==0?(je(352)|0)!=0:0)Me(352);n=+s[e>>2];r=+s[e+8>>2];_=+s[e+4>>2];o=+s[e+12>>2];c=n*o-r*_;if(c!=0.0)c=1.0/c;p=-c;s[84]=o*c;s[85]=_*p;s[86]=r*p;s[87]=n*c;b=t;return 336}function Xp(e,t){e=e|0;t=t|0;var n=0,r=0.0,_=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0;n=b;if((i[368]|0)==0?(je(368)|0)!=0:0)Me(368);_=+s[e>>2];o=+s[e+8>>2];r=+s[e+4>>2];c=+s[e+12>>2];p=_*c-o*r;if(p!=0.0)p=1.0/p;u=+s[t>>2];f=+s[t+4>>2];c=+(p*(c*u-o*f));p=+(p*(_*f-r*u));e=360;s[e>>2]=c;s[e+4>>2]=p;b=n;return 360}function es(e){e=e|0;return e|0}function ts(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function ns(e){e=e|0;return e+8|0}function is(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+8|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function rs(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function _s(){var e=0,t=0,n=0,r=0;e=b;t=kS(64)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(64)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;i[t+16>>0]=0;_[t>>2]=7;r=t+20|0;n=t+36|0;_[r+0>>2]=0;_[r+4>>2]=0;_[r+8>>2]=0;_[r+12>>2]=0;s[n>>2]=1.0;s[t+40>>2]=0.0;i[t+44>>0]=0;s[t+48>>2]=0.0;s[t+52>>2]=0.0;s[t+56>>2]=2.0;s[t+60>>2]=.699999988079071;b=e;return t|0}function os(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,c=0.0,p=0.0,u=0.0,f=0.0,a=0.0,d=0,y=0,l=0;o=b;_[e+8>>2]=t;_[e+12>>2]=n;p=+s[i>>2]-+s[t+12>>2];y=i+4|0;a=+s[y>>2]-+s[t+16>>2];d=t+24|0;u=+s[d>>2];t=t+20|0;c=+s[t>>2];f=+(p*u+a*c);c=+(u*a-p*c);l=e+20|0;s[l>>2]=f;s[l+4>>2]=c;c=+s[i>>2]-+s[n+12>>2];f=+s[y>>2]-+s[n+16>>2];p=+s[n+24>>2];a=+s[n+20>>2];u=+(c*p+f*a);a=+(p*f-c*a);i=e+28|0;s[i>>2]=u;s[i+4>>2]=a;a=+s[d>>2];u=+s[r>>2];c=+s[t>>2];f=+s[r+4>>2];p=+(a*u+c*f);c=+(a*f-u*c);t=e+36|0;s[t>>2]=p;s[t+4>>2]=c;b=o;return}function cs(e){e=e|0;return e+20|0}function ps(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+20|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function ss(e){e=e|0;return e+28|0}function us(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+28|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function bs(e){e=e|0;return e+36|0}function fs(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+36|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function as(e){e=e|0;return(i[e+44>>0]|0)!=0|0}function ds(e,t){e=e|0;t=t|0;i[e+44>>0]=t&1;return}function ys(e){e=e|0;return+ +s[e+48>>2]}function ls(e,t){e=e|0;t=+t;s[e+48>>2]=t;return}function ms(e){e=e|0;return+ +s[e+52>>2]}function hs(e,t){e=e|0;t=+t;s[e+52>>2]=t;return}function vs(e){e=e|0;return+ +s[e+56>>2]}function gs(e,t){e=e|0;t=+t;s[e+56>>2]=t;return}function Js(e){e=e|0;return+ +s[e+60>>2]}function Ds(e,t){e=e|0;t=+t;s[e+60>>2]=t;return}function xs(e){e=e|0;return _[e>>2]|0}function Gs(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function js(e){e=e|0;return _[e+4>>2]|0}function As(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function Ss(e){e=e|0;return _[e+8>>2]|0}function Cs(e,t){e=e|0;t=t|0;_[e+8>>2]=t;return}function Bs(e){e=e|0;return _[e+12>>2]|0}function ks(e,t){e=e|0;t=t|0;_[e+12>>2]=t;return}function ws(e){e=e|0;return(i[e+16>>0]|0)!=0|0}function Ms(e,t){e=e|0;t=t|0;i[e+16>>0]=t&1;return}function Rs(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function qs(){var e=0,t=0,n=0;e=b;t=kS(20)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(20)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t>>2]=7400;n=t+4|0;_[n+0>>2]=0;_[n+4>>2]=0;_[n+8>>2]=0;_[n+12>>2]=0;b=e;return t|0}function Fs(e){e=e|0;return _[e+4>>2]|0}function Ps(e){e=e|0;var t=0;t=b;e=hq[_[(_[e>>2]|0)+12>>2]&63](e)|0;b=t;return e|0}function Ts(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=b;e=bq[_[(_[e>>2]|0)+16>>2]&63](e,t,n)|0;b=i;return e|0}function Ls(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0;o=b;e=jq[_[(_[e>>2]|0)+20>>2]&63](e,t,n,i,r)|0;b=o;return e|0}function Is(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=b;Aq[_[(_[e>>2]|0)+24>>2]&63](e,t,n,i);b=r;return}function Ws(e,t,n){e=e|0;t=t|0;n=+n;var i=0;i=b;Dq[_[(_[e>>2]|0)+28>>2]&63](e,t,n);b=i;return}function Es(e){e=e|0;return e+12|0}function Os(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+12|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Vs(e){e=e|0;return _[e+4>>2]|0}function Us(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function Ns(e){e=e|0;return+ +s[e+8>>2]}function zs(e,t){e=e|0;t=+t;s[e+8>>2]=t;return}function Hs(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function Qs(){var e=0,t=0,n=0;e=b;t=kS(48)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(48)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;i[t+16>>0]=0;_[t>>2]=8;n=t+20|0;_[n+0>>2]=0;_[n+4>>2]=0;_[n+8>>2]=0;_[n+12>>2]=0;_[n+16>>2]=0;_[n+20>>2]=0;_[n+24>>2]=0;b=e;return t|0}function Ks(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0,d=0;r=b;_[e+8>>2]=t;_[e+12>>2]=n;f=+s[i>>2]-+s[t+12>>2];a=i+4|0;o=+s[a>>2]-+s[t+16>>2];c=+s[t+24>>2];p=+s[t+20>>2];u=+(f*c+o*p);p=+(c*o-f*p);d=e+20|0;s[d>>2]=u;s[d+4>>2]=p;p=+s[i>>2]-+s[n+12>>2];u=+s[a>>2]-+s[n+16>>2];f=+s[n+24>>2];o=+s[n+20>>2];c=+(p*f+u*o);o=+(f*u-p*o);i=e+28|0;s[i>>2]=c;s[i+4>>2]=o;s[e+36>>2]=+s[n+56>>2]-+s[t+56>>2];b=r;return}function $s(e){e=e|0;return e+20|0}function Zs(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+20|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Ys(e){e=e|0;return e+28|0}function Xs(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+28|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function eu(e){e=e|0;return+ +s[e+36>>2]}function tu(e,t){e=e|0;t=+t;s[e+36>>2]=t;return}function nu(e){e=e|0;return+ +s[e+40>>2]}function iu(e,t){e=e|0;t=+t;s[e+40>>2]=t;return}function ru(e){e=e|0;return+ +s[e+44>>2]}function _u(e,t){e=e|0;t=+t;s[e+44>>2]=t;return}function ou(e){e=e|0;return _[e>>2]|0}function cu(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function pu(e){e=e|0;return _[e+4>>2]|0}function su(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function uu(e){e=e|0;return _[e+8>>2]|0}function bu(e,t){e=e|0;t=t|0;_[e+8>>2]=t;return}function fu(e){e=e|0;return _[e+12>>2]|0}function au(e,t){e=e|0;t=t|0;_[e+12>>2]=t;return}function du(e){e=e|0;return(i[e+16>>0]|0)!=0|0}function yu(e,t){e=e|0;t=t|0;i[e+16>>0]=t&1;return}function lu(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function mu(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function hu(e){e=e|0;return _[e+4>>2]|0}function vu(e,t){e=e|0;t=t|0;e=e+4|0;_[e>>2]=_[e>>2]|t;return}function gu(e,t){e=e|0;t=t|0;e=e+4|0;_[e>>2]=_[e>>2]&~t;return}function Ju(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function Du(){var e=0,t=0;e=b;t=kS(16)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(16)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;b=e;return t|0}function xu(e){e=e|0;return+ +s[e>>2]}function Gu(e,t){e=e|0;t=+t;s[e>>2]=t;return}function ju(e){e=e|0;return e+4|0}function Au(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+4|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Su(e){e=e|0;return+ +s[e+12>>2]}function Cu(e,t){e=e|0;t=+t;s[e+12>>2]=t;return}function Bu(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function ku(e){e=e|0;return _[e+4>>2]|0}function wu(e){e=e|0;return _[e+48>>2]|0}function Mu(e){e=e|0;return _[e+52>>2]|0}function Ru(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[384]|0)==0?(je(384)|0)!=0:0)Me(384);lq[_[_[e>>2]>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=376;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 376}function qu(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[400]|0)==0?(je(400)|0)!=0:0)Me(400);lq[_[(_[e>>2]|0)+4>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=392;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 392}function Fu(e,t){e=e|0;t=+t;var n=0,r=0,o=0;r=b;b=b+16|0;n=r;if((i[416]|0)==0?(je(416)|0)!=0:0)Me(416);Dq[_[(_[e>>2]|0)+8>>2]&63](n,e,t);o=n;e=_[o+4>>2]|0;n=408;_[n>>2]=_[o>>2];_[n+4>>2]=e;b=r;return 408}function Pu(e,t){e=e|0;t=+t;var n=0;n=b;t=+aq[_[(_[e>>2]|0)+12>>2]&63](e,t);b=n;return+t}function Tu(e){e=e|0;return _[e+12>>2]|0}function Lu(e){e=e|0;return _[e+64>>2]|0}function Iu(e,t){e=e|0;t=t|0;_[e+64>>2]=t;return}function Wu(e){e=e|0;var t=0;t=b;if(!(r[(_[e+48>>2]|0)+4>>1]&32)){e=0;b=t;return e|0}e=(r[(_[e+52>>2]|0)+4>>1]&32)!=0;b=t;return e|0}function Eu(e){e=e|0;return(i[e+61>>0]|0)!=0|0}function Ou(e){e=e|0;var t=0;t=b;dq[_[(_[e>>2]|0)+16>>2]&127](e);b=t;return}function Vu(e){e=e|0;return _[e+68>>2]|0}function Uu(e){e=e|0;return _[e+72>>2]|0}function Nu(e,t){e=e|0;t=+t;var n=0;n=b;if(((s[a>>2]=t,_[a>>2]|0)&2139095040|0)==2139095040)Be(15528,15392,394,15552);else{s[e+152>>2]=t;b=n;return}}function zu(e){e=e|0;return+ +s[e+152>>2]}function Hu(e){e=e|0;return _[e+4>>2]|0}function Qu(e){e=e|0;return _[e+48>>2]|0}function Ku(e){e=e|0;return _[e+52>>2]|0}function $u(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[432]|0)==0?(je(432)|0)!=0:0)Me(432);lq[_[_[e>>2]>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=424;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 424}function Zu(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[448]|0)==0?(je(448)|0)!=0:0)Me(448);lq[_[(_[e>>2]|0)+4>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=440;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 440}function Yu(e,t){e=e|0;t=+t;var n=0,r=0,o=0;r=b;b=b+16|0;n=r;if((i[464]|0)==0?(je(464)|0)!=0:0)Me(464);Dq[_[(_[e>>2]|0)+8>>2]&63](n,e,t);o=n;e=_[o+4>>2]|0;n=456;_[n>>2]=_[o>>2];_[n+4>>2]=e;b=r;return 456}function Xu(e,t){e=e|0;t=+t;var n=0;n=b;t=+aq[_[(_[e>>2]|0)+12>>2]&63](e,t);b=n;return+t}function eb(e){e=e|0;return _[e+12>>2]|0}function tb(e){e=e|0;return _[e+64>>2]|0}function nb(e,t){e=e|0;t=t|0;_[e+64>>2]=t;return}function ib(e){e=e|0;var t=0;t=b;if(!(r[(_[e+48>>2]|0)+4>>1]&32)){e=0;b=t;return e|0}e=(r[(_[e+52>>2]|0)+4>>1]&32)!=0;b=t;return e|0}function rb(e){e=e|0;return(i[e+61>>0]|0)!=0|0}function _b(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+28>>2]&127](e);b=t;return}function ob(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function cb(e){e=e|0;return e+80|0}function pb(e){e=e|0;return e+88|0}function sb(e,t){e=e|0;t=+t;s[e+68>>2]=t;return}function ub(e){e=e|0;return+ +s[e+68>>2]}function bb(e,t){e=e|0;t=+t;s[e+72>>2]=t;return}function fb(e){e=e|0;return+ +s[e+72>>2]}function ab(e){e=e|0;var t=0;t=b;dq[_[(_[e>>2]|0)+16>>2]&127](e);b=t;return}function db(e){e=e|0;return _[e+4>>2]|0}function yb(e){e=e|0;return _[e+48>>2]|0}function lb(e){e=e|0;return _[e+52>>2]|0}function mb(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[480]|0)==0?(je(480)|0)!=0:0)Me(480);lq[_[_[e>>2]>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=472;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 472}function hb(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[496]|0)==0?(je(496)|0)!=0:0)Me(496);lq[_[(_[e>>2]|0)+4>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=488;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 488}function vb(e,t){e=e|0;t=+t;var n=0,r=0,o=0;r=b;b=b+16|0;n=r;if((i[512]|0)==0?(je(512)|0)!=0:0)Me(512);Dq[_[(_[e>>2]|0)+8>>2]&63](n,e,t);o=n;e=_[o+4>>2]|0;n=504;_[n>>2]=_[o>>2];_[n+4>>2]=e;b=r;return 504}function gb(e,t){e=e|0;t=+t;var n=0;n=b;t=+aq[_[(_[e>>2]|0)+12>>2]&63](e,t);b=n;return+t}function Jb(e){e=e|0;return _[e+12>>2]|0}function Db(e){e=e|0;return _[e+64>>2]|0}function xb(e,t){e=e|0;t=t|0;_[e+64>>2]=t;return}function Gb(e){e=e|0;var t=0;t=b;if(!(r[(_[e+48>>2]|0)+4>>1]&32)){e=0;b=t;return e|0}e=(r[(_[e+52>>2]|0)+4>>1]&32)!=0;b=t;return e|0}function jb(e){e=e|0;return(i[e+61>>0]|0)!=0|0}function Ab(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+28>>2]&127](e);b=t;return}function Sb(){var e=0,t=0;e=b;t=kS(16)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(16)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;b=e;return t|0}function Cb(e){e=e|0;return _[e>>2]|0}function Bb(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function kb(e){e=e|0;return _[e+4>>2]|0}function wb(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function Mb(e){e=e|0;return _[e+8>>2]|0}function Rb(e,t){e=e|0;t=t|0;_[e+8>>2]=t;return}function qb(e){e=e|0;return _[e+12>>2]|0}function Fb(e,t){e=e|0;t=t|0;_[e+12>>2]=t;return}function Pb(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function Tb(){var e=0,t=0;e=b;t=kS(64)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(64)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;_[t>>2]=4;s[t+20>>2]=-1.0;s[t+24>>2]=1.0;s[t+28>>2]=1.0;s[t+32>>2]=1.0;s[t+36>>2]=-1.0;s[t+40>>2]=0.0;s[t+44>>2]=1.0;s[t+48>>2]=0.0;s[t+52>>2]=0.0;s[t+56>>2]=0.0;s[t+60>>2]=1.0;i[t+16>>0]=1;b=e;return t|0}function Lb(e,t,n,i,r,o,c,p){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;c=c|0;p=+p;var u=0,f=0.0,a=0.0,d=0,y=0.0,l=0.0,m=0.0,h=0,v=0;u=b;_[e+8>>2]=t;_[e+12>>2]=n;d=i;h=_[d+4>>2]|0;v=e+20|0;_[v>>2]=_[d>>2];_[v+4>>2]=h;v=r;h=_[v+4>>2]|0;d=e+28|0;_[d>>2]=_[v>>2];_[d+4>>2]=h;m=+s[o>>2]-+s[t+12>>2];d=o+4|0;f=+s[d>>2]-+s[t+16>>2];a=+s[t+24>>2];y=+s[t+20>>2];l=+(m*a+f*y);y=+(a*f-m*y);t=e+36|0;s[t>>2]=l;s[t+4>>2]=y;y=+s[c>>2]-+s[n+12>>2];t=c+4|0;l=+s[t>>2]-+s[n+16>>2];m=+s[n+24>>2];f=+s[n+20>>2];a=+(y*m+l*f);f=+(m*l-y*f);n=e+44|0;s[n>>2]=a;s[n+4>>2]=f;f=+s[o>>2]-+s[i>>2];a=+s[d>>2]-+s[i+4>>2];s[e+52>>2]=+V(+(f*f+a*a));a=+s[c>>2]-+s[r>>2];f=+s[t>>2]-+s[r+4>>2];s[e+56>>2]=+V(+(a*a+f*f));s[e+60>>2]=p;if(p>1.1920928955078125e-7){b=u;return}else Be(16664,16696,51,16752)}function Ib(e){e=e|0;return e+20|0}function Wb(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+20|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Eb(e){e=e|0;return e+28|0}function Ob(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+28|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Vb(e){e=e|0;return e+36|0}function Ub(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+36|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Nb(e){e=e|0;return e+44|0}function zb(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+44|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Hb(e){e=e|0;return+ +s[e+52>>2]}function Qb(e,t){e=e|0;t=+t;s[e+52>>2]=t;return}function Kb(e){e=e|0;return+ +s[e+56>>2]}function $b(e,t){e=e|0;t=+t;s[e+56>>2]=t;return}function Zb(e){e=e|0;return+ +s[e+60>>2]}function Yb(e,t){e=e|0;t=+t;s[e+60>>2]=t;return}function Xb(e){e=e|0;return _[e>>2]|0}function ef(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function tf(e){e=e|0;return _[e+4>>2]|0}function nf(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function rf(e){e=e|0;return _[e+8>>2]|0}function _f(e,t){e=e|0;t=t|0;_[e+8>>2]=t;return}function of(e){e=e|0;return _[e+12>>2]|0}function cf(e,t){e=e|0;t=t|0;_[e+12>>2]=t;return}function pf(e){e=e|0;return(i[e+16>>0]|0)!=0|0}function sf(e,t){e=e|0;t=t|0;i[e+16>>0]=t&1;return}function uf(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function bf(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function ff(){var e=0,t=0;e=b;t=kS(20)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(20)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;_[t+16>>2]=0;b=e;return t|0}function af(e){e=e|0;return e|0}function df(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function yf(e){e=e|0;return+ +s[e+8>>2]}function lf(e,t){e=e|0;t=+t;s[e+8>>2]=t;return}function mf(e){e=e|0;return+ +s[e+12>>2]}function hf(e,t){e=e|0;t=+t;s[e+12>>2]=t;return}function vf(e){e=e|0;return e+16|0}function gf(e,t){e=e|0;t=t|0;_[e+16>>2]=_[t>>2];return}function Jf(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function Df(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function xf(){var e=0,t=0;e=b;t=kS(20)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(20)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;i[t+16>>0]=0;b=e;return t|0}function Gf(e){e=e|0;return _[e>>2]|0}function jf(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function Af(e){e=e|0;return _[e+4>>2]|0}function Sf(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function Cf(e){e=e|0;return _[e+8>>2]|0}function Bf(e,t){e=e|0;t=t|0;_[e+8>>2]=t;return}function kf(e){e=e|0;return _[e+12>>2]|0}function wf(e,t){e=e|0;t=t|0;_[e+12>>2]=t;return}function Mf(e){e=e|0;return(i[e+16>>0]|0)!=0|0}function Rf(e,t){e=e|0;t=t|0;i[e+16>>0]=t&1;return}function qf(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function Ff(){var e=0,t=0,n=0;e=b;t=kS(16)|0;if(t){n=t;b=e;return n|0}while(1){t=_[4698]|0;_[4698]=t+0;if(!t){t=4;break}Jq[t&63]();n=kS(16)|0;if(n){t=5;break}}if((t|0)==4){n=_t(4)|0;_[n>>2]=18632;tt(n|0,18680,116)}else if((t|0)==5){b=e;return n|0}return 0}function Pf(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0;n=b;i=kS(16)|0;e:do{if(!i){while(1){i=_[4698]|0;_[4698]=i+0;if(!i)break;Jq[i&63]();i=kS(16)|0;if(i)break e}i=_t(4)|0;_[i>>2]=18632;tt(i|0,18680,116)}}while(0);o=e;e=_[o+4>>2]|0;r=i;_[r>>2]=_[o>>2];_[r+4>>2]=e;r=t;e=_[r+4>>2]|0;t=i+8|0;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return i|0}function Tf(e){e=e|0;s[e>>2]=0.0;s[e+4>>2]=0.0;s[e+8>>2]=0.0;s[e+12>>2]=1.0;return}function Lf(e,t,n){e=e|0;t=t|0;n=+n;var i=0,r=0;r=t;i=_[r+4>>2]|0;t=e;_[t>>2]=_[r>>2];_[t+4>>2]=i;s[e+8>>2]=+z(+n);s[e+12>>2]=+N(+n);return}function If(e){e=e|0;return e|0}function Wf(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Ef(e){e=e|0;return e+8|0}function Of(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+8|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Vf(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function Uf(){var e=0,t=0;e=b;t=kS(40)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(40)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t>>2]=6952;_[t+4>>2]=3;s[t+8>>2]=.009999999776482582;_[t+12>>2]=0;_[t+16>>2]=0;i[t+36>>0]=0;i[t+37>>0]=0;b=e;return t|0}function Nf(e){e=e|0;var t=0,n=0;t=b;n=e+12|0;wS(_[n>>2]|0);_[n>>2]=0;_[e+16>>2]=0;b=t;return}function zf(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,c=0,p=0,u=0,f=0,d=0.0,y=0.0,l=0.0,m=0;o=b;r=e+12|0;if(_[r>>2]|0)Be(6984,7024,38,7080);c=e+16|0;if(_[c>>2]|0)Be(6984,7024,38,7080);if((n|0)<=2)Be(7904,7024,39,7080);u=t;f=_[u>>2]|0;u=_[u+4>>2]|0;p=1;while(1){l=(_[a>>2]=f,+s[a>>2]);d=(_[a>>2]=u,+s[a>>2]);m=t+(p<<3)|0;f=_[m>>2]|0;u=_[m+4>>2]|0;y=(_[a>>2]=f,+s[a>>2]);y=l-y;d=d-(_[a>>2]=u,+s[a>>2]);p=p+1|0;if(!(y*y+d*d>2499999936844688.0e-20)){p=9;break}if((p|0)>=(n|0)){p=10;break}}if((p|0)==9)Be(7096,7024,45,7080);else if((p|0)==10){u=n+1|0;_[c>>2]=u;u=kS(u<<3)|0;_[r>>2]=u;FS(u|0,t|0,n<<3|0)|0;u=_[r>>2]|0;m=u;p=_[m+4>>2]|0;u=u+(n<<3)|0;_[u>>2]=_[m>>2];_[u+4>>2]=p;u=_[r>>2]|0;p=u+((_[c>>2]|0)+-2<<3)|0;m=_[p+4>>2]|0;f=e+20|0;_[f>>2]=_[p>>2];_[f+4>>2]=m;u=u+8|0;f=_[u+4>>2]|0;m=e+28|0;_[m>>2]=_[u>>2];_[m+4>>2]=f;i[e+36>>0]=1;i[e+37>>0]=1;b=o;return}}function Hf(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=b;ZG(e,t,n);b=i;return}function Qf(e,t){e=e|0;t=t|0;var n=0,r=0;r=t;n=_[r+4>>2]|0;t=e+20|0;_[t>>2]=_[r>>2];_[t+4>>2]=n;i[e+36>>0]=1;return}function Kf(e,t){e=e|0;t=t|0;var n=0,r=0;r=t;n=_[r+4>>2]|0;t=e+28|0;_[t>>2]=_[r>>2];_[t+4>>2]=n;i[e+37>>0]=1;return}function $f(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=b;ej(e,t,n);b=i;return}function Zf(e){e=e|0;return _[e+4>>2]|0}function Yf(e){e=e|0;var t=0;t=b;e=hq[_[(_[e>>2]|0)+12>>2]&63](e)|0;b=t;return e|0}function Xf(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=b;e=bq[_[(_[e>>2]|0)+16>>2]&63](e,t,n)|0;b=i;return e|0}function ea(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0;o=b;e=jq[_[(_[e>>2]|0)+20>>2]&63](e,t,n,i,r)|0;b=o;return e|0}function ta(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=b;Aq[_[(_[e>>2]|0)+24>>2]&63](e,t,n,i);b=r;return}function na(e,t,n){e=e|0;t=t|0;n=+n;var i=0;i=b;Dq[_[(_[e>>2]|0)+28>>2]&63](e,t,n);b=i;return}function ia(e){e=e|0;return _[e+12>>2]|0}function ra(e,t){e=e|0;t=t|0;_[e+12>>2]=t;return}function _a(e){e=e|0;return _[e+16>>2]|0}function oa(e,t){e=e|0;t=t|0;_[e+16>>2]=t;return}function ca(e){e=e|0;return e+20|0}function pa(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+20|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function sa(e){e=e|0;return e+28|0}function ua(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+28|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function ba(e){e=e|0;return(i[e+36>>0]|0)!=0|0}function fa(e,t){e=e|0;t=t|0;i[e+36>>0]=t&1;return}function aa(e){e=e|0;return(i[e+37>>0]|0)!=0|0}function da(e,t){e=e|0;t=t|0;i[e+37>>0]=t&1;return}function ya(e){e=e|0;return _[e+4>>2]|0}function la(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function ma(e){e=e|0;return+ +s[e+8>>2]}function ha(e,t){e=e|0;t=+t;s[e+8>>2]=t;return}function va(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function ga(){var e=0,t=0,n=0;e=b;t=kS(16)|0;if(t){n=t;b=e;return n|0}while(1){t=_[4698]|0;_[4698]=t+0;if(!t){t=4;break}Jq[t&63]();n=kS(16)|0;if(n){t=5;break}}if((t|0)==4){n=_t(4)|0;_[n>>2]=18632;tt(n|0,18680,116)}else if((t|0)==5){b=e;return n|0}return 0}function Ja(e,t,n){e=+e;t=+t;n=+n;var i=0,r=0;i=b;r=kS(16)|0;e:do{if(!r){while(1){r=_[4698]|0;_[4698]=r+0;if(!r)break;Jq[r&63]();r=kS(16)|0;if(r)break e}r=_t(4)|0;_[r>>2]=18632;tt(r|0,18680,116)}}while(0);s[r>>2]=e;s[r+4>>2]=t;s[r+8>>2]=n;s[r+12>>2]=1.0;b=i;return r|0}function Da(e,t,n,i){e=e|0;t=+t;n=+n;i=+i;s[e>>2]=t;s[e+4>>2]=n;s[e+8>>2]=i;s[e+12>>2]=1.0;return}function xa(e){e=e|0;return+ +s[e>>2]}function Ga(e,t){e=e|0;t=+t;s[e>>2]=t;return}function ja(e){e=e|0;return+ +s[e+4>>2]}function Aa(e,t){e=e|0;t=+t;s[e+4>>2]=t;return}function Sa(e){e=e|0;return+ +s[e+8>>2]}function Ca(e,t){e=e|0;t=+t;s[e+8>>2]=t;return}function Ba(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function ka(e){e=e|0;return e+68|0}function wa(e){e=e|0;return e+76|0}function Ma(e,t){e=e|0;t=+t;s[e+84>>2]=t;return}function Ra(e){e=e|0;return+ +s[e+84>>2]}function qa(e){e=e|0;return _[e+164>>2]|0}function Fa(e){e=e|0;return _[e+4>>2]|0}function Pa(e){e=e|0;return _[e+48>>2]|0}function Ta(e){e=e|0;return _[e+52>>2]|0}function La(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[528]|0)==0?(je(528)|0)!=0:0)Me(528);lq[_[_[e>>2]>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=520;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 520}function Ia(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[544]|0)==0?(je(544)|0)!=0:0)Me(544);lq[_[(_[e>>2]|0)+4>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=536;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 536}function Wa(e,t){e=e|0;t=+t;var n=0,r=0,o=0;r=b;b=b+16|0;n=r;if((i[560]|0)==0?(je(560)|0)!=0:0)Me(560);Dq[_[(_[e>>2]|0)+8>>2]&63](n,e,t);o=n;e=_[o+4>>2]|0;n=552;_[n>>2]=_[o>>2];_[n+4>>2]=e;b=r;return 552}function Ea(e,t){e=e|0;t=+t;var n=0;n=b;t=+aq[_[(_[e>>2]|0)+12>>2]&63](e,t);b=n;return+t}function Oa(e){e=e|0;return _[e+12>>2]|0}function Va(e){e=e|0;return _[e+64>>2]|0}function Ua(e,t){e=e|0;t=t|0;_[e+64>>2]=t;return}function Na(e){e=e|0;var t=0;t=b;if(!(r[(_[e+48>>2]|0)+4>>1]&32)){e=0;b=t;return e|0}e=(r[(_[e+52>>2]|0)+4>>1]&32)!=0;b=t;return e|0}function za(e){e=e|0;return(i[e+61>>0]|0)!=0|0}function Ha(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+28>>2]&127](e);b=t;return}function Qa(e){e=e|0;return e|0}function Ka(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function $a(e){e=e|0;return e+8|0}function Za(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+8|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Ya(e){e=e|0;return+ +s[e+16>>2]}function Xa(e,t){e=e|0;t=+t;s[e+16>>2]=t;return}function ed(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function td(){var e=0,t=0;e=b;t=kS(152)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(152)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t>>2]=7832;_[t+4>>2]=2;s[t+8>>2]=.009999999776482582;_[t+148>>2]=0;s[t+12>>2]=0.0;s[t+16>>2]=0.0;b=e;return t|0}function nd(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0.0,o=0.0,c=0.0,p=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0,h=0,v=0,g=0,J=0,D=0.0,x=0.0,G=0.0,j=0.0,A=0.0;i=b;b=b+96|0;d=i+32|0;a=i;if((n+-3|0)>>>0>=6)Be(7536,7568,122,7624);J=~n;J=(J|0)>-9?J:-9;y=~J;FS(d|0,t|0,-8-(J<<3)|0)|0;if((J|0)>-4)Be(15688,7568,159,7624);l=0;t=1;D=+s[d>>2];do{x=+s[d+(t<<3)>>2];if(!(x>D)){if(x==D?+s[d+(t<<3)+4>>2]<+s[d+(l<<3)+4>>2]:0)u=9}else u=9;if((u|0)==9){u=0;l=t;D=x}t=t+1|0}while((t|0)!=(y|0));m=l;h=1;t=0;while(1){_[a+(t<<2)>>2]=m;g=d+(m<<3)|0;n=d+(m<<3)+4|0;J=0;v=1;do{if((J|0)!=(m|0)){j=+s[g>>2];x=+s[d+(J<<3)>>2]-j;D=+s[n>>2];G=+s[d+(J<<3)+4>>2]-D;j=+s[d+(v<<3)>>2]-j;D=+s[d+(v<<3)+4>>2]-D;A=x*D-G*j;J=A<0.0?v:J;if(A==0.0?j*j+D*D>x*x+G*G:0)J=v}else J=v;v=v+1|0}while((v|0)!=(y|0));n=t+1|0;if((J|0)==(l|0))break;else{m=J;h=h+1|0;t=n}}if((n|0)<3)Be(15688,7568,224,7624);_[e+148>>2]=n;if((t|0)>-1)f=0;else Be(7904,7568,76,7920);do{v=d+(_[a+(f<<2)>>2]<<3)|0;g=_[v+4>>2]|0;J=e+(f<<3)+20|0;_[J>>2]=_[v>>2];_[J+4>>2]=g;f=f+1|0}while((f|0)!=(h|0));d=0;do{y=d;d=d+1|0;a=(d|0)<(n|0);J=a?d:0;G=+s[e+(J<<3)+20>>2]-+s[e+(y<<3)+20>>2];D=+s[e+(J<<3)+24>>2]-+s[e+(y<<3)+24>>2];x=D*D;if(!(G*G+x>1.4210854715202004e-14)){u=23;break}f=e+(y<<3)+84|0;A=+D;G=+-G;J=f;s[J>>2]=A;s[J+4>>2]=G;y=e+(y<<3)+88|0;G=+s[y>>2];x=+V(+(x+G*G));if(!(x<1.1920928955078125e-7)){A=1.0/x;s[f>>2]=D*A;s[y>>2]=G*A}}while(a);if((u|0)==23)Be(7632,7568,243,7624);u=e+12|0;f=e+20|0;if((t|0)>1){o=0.0;c=0.0;r=0.0;p=0}else Be(7904,7568,76,7920);do{J=e+(p<<3)+20|0;D=+s[J>>2];x=+s[J+4>>2];p=p+1|0;if((p|0)<(n|0))t=e+(p<<3)+20|0;else t=f;J=t;G=+s[J>>2];j=+s[J+4>>2];A=(D*j-x*G)*.5;r=r+A;A=A*.3333333432674408;o=o+(D+0.0+G)*A;c=c+(x+0.0+j)*A}while((p|0)!=(n|0));if(r>1.1920928955078125e-7){A=1.0/r;j=+(o*A);A=+(c*A);J=u;s[J>>2]=j;s[J+4>>2]=A;b=i;return}else Be(7792,7568,115,7920)}function id(e,t,n){e=e|0;t=+t;n=+n;var i=0.0,r=0.0;_[e+148>>2]=4;i=-t;r=-n;s[e+20>>2]=i;s[e+24>>2]=r;s[e+28>>2]=t;s[e+32>>2]=r;s[e+36>>2]=t;s[e+40>>2]=n;s[e+44>>2]=i;s[e+48>>2]=n;s[e+84>>2]=0.0;s[e+88>>2]=-1.0;s[e+92>>2]=1.0;s[e+96>>2]=0.0;s[e+100>>2]=0.0;s[e+104>>2]=1.0;s[e+108>>2]=-1.0;s[e+112>>2]=0.0;s[e+12>>2]=0.0;s[e+16>>2]=0.0;return}function rd(e,t,n,i,r){e=e|0;t=+t;n=+n;i=i|0;r=+r;var o=0,c=0,p=0.0,u=0.0,f=0.0,a=0,d=0,y=0,l=0.0,m=0.0;c=b;o=e+148|0;_[o>>2]=4;p=-t;f=-n;s[e+20>>2]=p;s[e+24>>2]=f;s[e+28>>2]=t;s[e+32>>2]=f;s[e+36>>2]=t;s[e+40>>2]=n;s[e+44>>2]=p;s[e+48>>2]=n;s[e+84>>2]=0.0;s[e+88>>2]=-1.0;s[e+92>>2]=1.0;s[e+96>>2]=0.0;s[e+100>>2]=0.0;s[e+104>>2]=1.0;s[e+108>>2]=-1.0;s[e+112>>2]=0.0;y=i;d=_[y+4>>2]|0;a=e+12|0;_[a>>2]=_[y>>2];_[a+4>>2]=d;n=+s[i>>2];p=+s[i+4>>2];t=+z(+r);r=+N(+r);u=-1.0;i=0;while(1){y=e+(i<<3)+20|0;m=+s[y>>2];l=+(n+(r*m-t*f));f=+(p+(t*m+r*f));s[y>>2]=l;s[y+4>>2]=f;y=e+(i<<3)+84|0;f=+s[y>>2];l=+(r*f-t*u);f=+(t*f+r*u);s[y>>2]=l;s[y+4>>2]=f;i=i+1|0;if((i|0)>=(_[o>>2]|0))break;f=+s[e+(i<<3)+24>>2];u=+s[e+(i<<3)+88>>2]}b=c;return}function _d(e){e=e|0;return _[e+148>>2]|0}function od(e,t){e=e|0;t=t|0;var n=0;n=b;if((t|0)>-1?(_[e+148>>2]|0)>(t|0):0){b=n;return e+(t<<3)+20|0}Be(6800,2624,97,6880);return 0}function cd(e){e=e|0;return _[e+4>>2]|0}function pd(e){e=e|0;var t=0;t=b;e=hq[_[(_[e>>2]|0)+12>>2]&63](e)|0;b=t;return e|0}function sd(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=b;e=bq[_[(_[e>>2]|0)+16>>2]&63](e,t,n)|0;b=i;return e|0}function ud(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0;o=b;e=jq[_[(_[e>>2]|0)+20>>2]&63](e,t,n,i,r)|0;b=o;return e|0}function bd(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=b;Aq[_[(_[e>>2]|0)+24>>2]&63](e,t,n,i);b=r;return}function fd(e,t,n){e=e|0;t=t|0;n=+n;var i=0;i=b;Dq[_[(_[e>>2]|0)+28>>2]&63](e,t,n);b=i;return}function ad(e){e=e|0;return e+12|0}function dd(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+12|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function yd(e){e=e|0;return _[e+148>>2]|0}function ld(e,t){e=e|0;t=t|0;_[e+148>>2]=t;return}function md(e){e=e|0;return _[e+4>>2]|0}function hd(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function vd(e){e=e|0;return+ +s[e+8>>2]}function gd(e,t){e=e|0;t=+t;s[e+8>>2]=t;return}function Jd(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function Dd(){var e=0,t=0,n=0;e=b;t=kS(48)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(48)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t>>2]=7472;_[t+4>>2]=1;s[t+8>>2]=.009999999776482582;n=t+28|0;_[n+0>>2]=0;_[n+4>>2]=0;_[n+8>>2]=0;_[n+12>>2]=0;r[n+16>>1]=0;b=e;return t|0}function xd(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0;o=t;t=_[o+4>>2]|0;r=e+12|0;_[r>>2]=_[o>>2];_[r+4>>2]=t;r=n;n=_[r+4>>2]|0;t=e+20|0;_[t>>2]=_[r>>2];_[t+4>>2]=n;i[e+44>>0]=0;i[e+45>>0]=0;return}function Gd(e){e=e|0;return _[e+4>>2]|0}function jd(e){e=e|0;var t=0;t=b;e=hq[_[(_[e>>2]|0)+12>>2]&63](e)|0;b=t;return e|0}function Ad(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=b;e=bq[_[(_[e>>2]|0)+16>>2]&63](e,t,n)|0;b=i;return e|0}function Sd(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0;o=b;e=jq[_[(_[e>>2]|0)+20>>2]&63](e,t,n,i,r)|0;b=o;return e|0}function Cd(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=b;Aq[_[(_[e>>2]|0)+24>>2]&63](e,t,n,i);b=r;return}function Bd(e,t,n){e=e|0;t=t|0;n=+n;var i=0;i=b;Dq[_[(_[e>>2]|0)+28>>2]&63](e,t,n);b=i;return}function kd(e){e=e|0;return e+12|0}function wd(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+12|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Md(e){e=e|0;return e+20|0}function Rd(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+20|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function qd(e){e=e|0;return e+28|0}function Fd(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+28|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Pd(e){e=e|0;return e+36|0}function Td(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+36|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Ld(e){e=e|0;return(i[e+44>>0]|0)!=0|0}function Id(e,t){e=e|0;t=t|0;i[e+44>>0]=t&1;return}function Wd(e){e=e|0;return(i[e+45>>0]|0)!=0|0}function Ed(e,t){e=e|0;t=t|0;i[e+45>>0]=t&1;return}function Od(e){e=e|0;return _[e+4>>2]|0}function Vd(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function Ud(e){e=e|0;return+ +s[e+8>>2]}function Nd(e,t){e=e|0;t=+t;s[e+8>>2]=t;return}function zd(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function Hd(){var e=0,t=0,n=0;e=b;t=kS(4)|0;if(t){n=t;_[n>>2]=2320;b=e;return n|0}while(1){t=_[4698]|0;_[4698]=t+0;if(!t){t=4;break}Jq[t&63]();n=kS(4)|0;if(n){t=5;break}}if((t|0)==4){n=_t(4)|0;_[n>>2]=18632;tt(n|0,18680,116)}else if((t|0)==5){_[n>>2]=2320;b=e;return n|0}return 0}function Qd(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=b;e=bq[_[(_[e>>2]|0)+8>>2]&63](e,t,n)|0;b=i;return e|0}function Kd(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function $d(){var e=0,t=0,n=0;e=b;t=kS(64)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(64)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;i[t+16>>0]=0;_[t>>2]=1;n=t+20|0;s[t+44>>2]=0.0;s[t+48>>2]=0.0;s[t+60>>2]=0.0;s[t+56>>2]=0.0;i[t+52>>0]=0;_[n+0>>2]=0;_[n+4>>2]=0;_[n+8>>2]=0;_[n+12>>2]=0;_[n+16>>2]=0;i[n+20>>0]=0;b=e;return t|0}function Zd(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0,d=0;r=b;_[e+8>>2]=t;_[e+12>>2]=n;f=+s[i>>2]-+s[t+12>>2];a=i+4|0;o=+s[a>>2]-+s[t+16>>2];c=+s[t+24>>2];p=+s[t+20>>2];u=+(f*c+o*p);p=+(c*o-f*p);d=e+20|0;s[d>>2]=u;s[d+4>>2]=p;p=+s[i>>2]-+s[n+12>>2];u=+s[a>>2]-+s[n+16>>2];f=+s[n+24>>2];o=+s[n+20>>2];c=+(p*f+u*o);o=+(f*u-p*o);i=e+28|0;s[i>>2]=c;s[i+4>>2]=o;s[e+36>>2]=+s[n+56>>2]-+s[t+56>>2];b=r;return}function Yd(e){e=e|0;return e+20|0}function Xd(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+20|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function ey(e){e=e|0;return e+28|0}function ty(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+28|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function ny(e){e=e|0;return+ +s[e+36>>2]}function iy(e,t){e=e|0;t=+t;s[e+36>>2]=t;return}function ry(e){e=e|0;return(i[e+40>>0]|0)!=0|0}function _y(e,t){e=e|0;t=t|0;i[e+40>>0]=t&1;return}function oy(e){e=e|0;return+ +s[e+44>>2]}function cy(e,t){e=e|0;t=+t;s[e+44>>2]=t;return}function py(e){e=e|0;return+ +s[e+48>>2]}function sy(e,t){e=e|0;t=+t;s[e+48>>2]=t;return}function uy(e){e=e|0;return(i[e+52>>0]|0)!=0|0}function by(e,t){e=e|0;t=t|0;i[e+52>>0]=t&1;return}function fy(e){e=e|0;return+ +s[e+56>>2]}function ay(e,t){e=e|0;t=+t;s[e+56>>2]=t;return}function dy(e){e=e|0;return+ +s[e+60>>2]}function yy(e,t){e=e|0;t=+t;s[e+60>>2]=t;return}function ly(e){e=e|0;return _[e>>2]|0}function my(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function hy(e){e=e|0;return _[e+4>>2]|0}function vy(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function gy(e){e=e|0;return _[e+8>>2]|0}function Jy(e,t){e=e|0;t=t|0;_[e+8>>2]=t;return}function Dy(e){e=e|0;return _[e+12>>2]|0}function xy(e,t){e=e|0;t=t|0;_[e+12>>2]=t;return}function Gy(e){e=e|0;return(i[e+16>>0]|0)!=0|0}function jy(e,t){e=e|0;t=t|0;i[e+16>>0]=t&1;return}function Ay(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function Sy(){var e=0,t=0,n=0;e=b;t=kS(8)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(8)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);n=t;_[n>>2]=0;_[n+4>>2]=0;_[t+4>>2]=0;_[t>>2]=912;b=e;return t|0}function Cy(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=b;Aq[_[(_[e>>2]|0)+8>>2]&63](e,t,n,i);b=r;return}function By(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=b;Aq[_[(_[e>>2]|0)+12>>2]&63](e,t,n,i);b=r;return}function ky(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;var r=0;r=b;vq[_[(_[e>>2]|0)+16>>2]&63](e,t,n,i);b=r;return}function wy(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;var o=0;o=b;mq[_[(_[e>>2]|0)+20>>2]&63](e,t,n,i,r);b=o;return}function My(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=b;Aq[_[(_[e>>2]|0)+24>>2]&63](e,t,n,i);b=r;return}function Ry(e,t){e=e|0;t=t|0;var n=0;n=b;lq[_[(_[e>>2]|0)+28>>2]&127](e,t);b=n;return}function qy(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function Fy(e){e=e|0;return e+76|0}function Py(e){e=e|0;return e+84|0}function Ty(e){e=e|0;return e+92|0}function Ly(e){e=e|0;var t=0.0,n=0.0,i=0.0,r=0.0,o=0,c=0.0,p=0.0,u=0,b=0.0,f=0.0,a=0.0,d=0.0;o=_[e+48>>2]|0;u=_[e+52>>2]|0;n=+s[o+24>>2];p=+s[e+76>>2];r=+s[o+20>>2];c=+s[e+80>>2];f=+s[u+24>>2];d=+s[e+84>>2];a=+s[u+20>>2];b=+s[e+88>>2];i=+s[e+92>>2];t=+s[e+96>>2];return+((+s[u+12>>2]+(f*d-a*b)-(+s[o+12>>2]+(n*p-r*c)))*(n*i-r*t)+(d*a+f*b+ +s[u+16>>2]-(p*r+n*c+ +s[o+16>>2]))*(r*i+n*t))}function Iy(e){e=e|0;return+(+s[(_[e+52>>2]|0)+72>>2]-+s[(_[e+48>>2]|0)+72>>2])}function Wy(e){e=e|0;return(i[e+128>>0]|0)!=0|0}function Ey(e,t){e=e|0;t=t|0;var n=0,o=0,p=0,u=0;n=b;o=_[e+48>>2]|0;p=o+4|0;u=c[p>>1]|0;if(!(u&2)){r[p>>1]=u|2;s[o+144>>2]=0.0}u=_[e+52>>2]|0;p=u+4|0;o=c[p>>1]|0;if(o&2){u=e+128|0;p=t&1;i[u>>0]=p;b=n;return}r[p>>1]=o|2;s[u+144>>2]=0.0;u=e+128|0;p=t&1;i[u>>0]=p;b=n;return}function Oy(e,t){e=e|0;t=+t;var n=0,i=0,o=0,p=0;n=b;i=_[e+48>>2]|0;o=i+4|0;p=c[o>>1]|0;if(!(p&2)){r[o>>1]=p|2;s[i+144>>2]=0.0}p=_[e+52>>2]|0;o=p+4|0;i=c[o>>1]|0;if(i&2){p=e+124|0;s[p>>2]=t;b=n;return}r[o>>1]=i|2;s[p+144>>2]=0.0;p=e+124|0;s[p>>2]=t;b=n;return}function Vy(e){e=e|0;return+ +s[e+124>>2]}function Uy(e,t){e=e|0;t=+t;var n=0,i=0,o=0,p=0;n=b;i=_[e+48>>2]|0;o=i+4|0;p=c[o>>1]|0;if(!(p&2)){r[o>>1]=p|2;s[i+144>>2]=0.0}p=_[e+52>>2]|0;o=p+4|0;i=c[o>>1]|0;if(i&2){p=e+120|0;s[p>>2]=t;b=n;return}r[o>>1]=i|2;s[p+144>>2]=0.0;p=e+120|0;s[p>>2]=t;b=n;return}function Ny(e){e=e|0;return+ +s[e+120>>2]}function zy(e,t){e=e|0;t=+t;return+(+s[e+112>>2]*t)}function Hy(e,t){e=e|0;t=+t;s[e+68>>2]=t;return}function Qy(e){e=e|0;return+ +s[e+68>>2]}function Ky(e,t){e=e|0;t=+t;s[e+72>>2]=t;return}function $y(e){e=e|0;return+ +s[e+72>>2]}function Zy(e){e=e|0;return _[e+4>>2]|0}function Yy(e){e=e|0;return _[e+48>>2]|0}function Xy(e){e=e|0;return _[e+52>>2]|0}function el(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[576]|0)==0?(je(576)|0)!=0:0)Me(576);lq[_[_[e>>2]>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=568;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 568}function tl(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[592]|0)==0?(je(592)|0)!=0:0)Me(592);lq[_[(_[e>>2]|0)+4>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=584;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 584}function nl(e,t){e=e|0;t=+t;var n=0,r=0,o=0;r=b;b=b+16|0;n=r;if((i[608]|0)==0?(je(608)|0)!=0:0)Me(608);Dq[_[(_[e>>2]|0)+8>>2]&63](n,e,t);o=n;e=_[o+4>>2]|0;n=600;_[n>>2]=_[o>>2];_[n+4>>2]=e;b=r;return 600}function il(e,t){e=e|0;t=+t;var n=0;n=b;t=+aq[_[(_[e>>2]|0)+12>>2]&63](e,t);b=n;return+t}function rl(e){e=e|0;return _[e+12>>2]|0}function _l(e){e=e|0;return _[e+64>>2]|0}function ol(e,t){e=e|0;t=t|0;_[e+64>>2]=t;return}function cl(e){e=e|0;var t=0;t=b;if(!(r[(_[e+48>>2]|0)+4>>1]&32)){e=0;b=t;return e|0}e=(r[(_[e+52>>2]|0)+4>>1]&32)!=0;b=t;return e|0}function pl(e){e=e|0;return(i[e+61>>0]|0)!=0|0}function sl(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+28>>2]&127](e);b=t;return}function ul(e){e=e|0;var t=0,n=0,r=0;t=b;if((i[624]|0)==0?(je(624)|0)!=0:0)Me(624);r=e+68|0;n=_[r+4>>2]|0;e=616;_[e>>2]=_[r>>2];_[e+4>>2]=n;b=t;return 616}function bl(e){e=e|0;var t=0,n=0,r=0;t=b;if((i[640]|0)==0?(je(640)|0)!=0:0)Me(640);r=e+76|0;n=_[r+4>>2]|0;e=632;_[e>>2]=_[r>>2];_[e+4>>2]=n;b=t;return 632}function fl(e){e=e|0;return+ +s[e+84>>2]}function al(e){e=e|0;return+ +s[e+88>>2]}function dl(e){e=e|0;return+ +s[e+112>>2]}function yl(e){e=e|0;var t=0.0,n=0,i=0.0,r=0,o=0.0,c=0.0,p=0.0;n=b;r=_[e+48>>2]|0;o=+s[r+24>>2];p=+s[e+92>>2];c=+s[r+20>>2];t=+s[e+96>>2];e=e+68|0;i=+s[e>>2];i=+s[r+12>>2]+(o*p-c*t)-i;t=p*c+o*t+ +s[r+16>>2]-+s[e+4>>2];t=+V(+(i*i+t*t));b=n;return+t}function ll(e){e=e|0;var t=0.0,n=0,i=0.0,r=0,o=0.0,c=0.0,p=0.0;n=b;r=_[e+52>>2]|0;o=+s[r+24>>2];p=+s[e+100>>2];c=+s[r+20>>2];t=+s[e+104>>2];e=e+76|0;i=+s[e>>2];i=+s[r+12>>2]+(o*p-c*t)-i;t=p*c+o*t+ +s[r+16>>2]-+s[e+4>>2];t=+V(+(i*i+t*t));b=n;return+t}function ml(e){e=e|0;return _[e+4>>2]|0}function hl(e){e=e|0;return _[e+48>>2]|0}function vl(e){e=e|0;return _[e+52>>2]|0}function gl(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[656]|0)==0?(je(656)|0)!=0:0)Me(656);lq[_[_[e>>2]>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=648;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 648}function Jl(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[672]|0)==0?(je(672)|0)!=0:0)Me(672);lq[_[(_[e>>2]|0)+4>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=664;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 664}function Dl(e,t){e=e|0;t=+t;var n=0,r=0,o=0;r=b;b=b+16|0;n=r;if((i[688]|0)==0?(je(688)|0)!=0:0)Me(688);Dq[_[(_[e>>2]|0)+8>>2]&63](n,e,t);o=n;e=_[o+4>>2]|0;n=680;_[n>>2]=_[o>>2];_[n+4>>2]=e;b=r;return 680}function xl(e,t){e=e|0;t=+t;var n=0;n=b;t=+aq[_[(_[e>>2]|0)+12>>2]&63](e,t);b=n;return+t}function Gl(e){e=e|0;return _[e+12>>2]|0}function jl(e){e=e|0;return _[e+64>>2]|0}function Al(e,t){e=e|0;t=t|0;_[e+64>>2]=t;return}function Sl(e){e=e|0;var t=0;t=b;if(!(r[(_[e+48>>2]|0)+4>>1]&32)){e=0;b=t;return e|0}e=(r[(_[e+52>>2]|0)+4>>1]&32)!=0;b=t;return e|0}function Cl(e){e=e|0;return(i[e+61>>0]|0)!=0|0}function Bl(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+28>>2]&127](e);b=t;return}function kl(){var e=0,t=0;e=b;t=kS(40)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(40)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;i[t+16>>0]=0;_[t>>2]=5;s[t+20>>2]=0.0;s[t+24>>2]=0.0;s[t+28>>2]=0.0;s[t+32>>2]=5.0;s[t+36>>2]=.699999988079071;b=e;return t|0}function wl(e){e=e|0;return e+20|0}function Ml(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+20|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Rl(e){e=e|0;return+ +s[e+28>>2]}function ql(e,t){e=e|0;t=+t;s[e+28>>2]=t;return}function Fl(e){e=e|0;return+ +s[e+32>>2]}function Pl(e,t){e=e|0;t=+t;s[e+32>>2]=t;return}function Tl(e){e=e|0;return+ +s[e+36>>2]}function Ll(e,t){e=e|0;t=+t;s[e+36>>2]=t;return}function Il(e){e=e|0;return _[e>>2]|0}function Wl(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function El(e){e=e|0;return _[e+4>>2]|0}function Ol(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function Vl(e){e=e|0;return _[e+8>>2]|0}function Ul(e,t){e=e|0;t=t|0;_[e+8>>2]=t;return}function Nl(e){e=e|0;return _[e+12>>2]|0}function zl(e,t){e=e|0;t=t|0;_[e+12>>2]=t;return}function Hl(e){e=e|0;return(i[e+16>>0]|0)!=0|0}function Ql(e,t){e=e|0;t=t|0;i[e+16>>0]=t&1;return}function Kl(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function $l(e){e=e|0;return e+64|0}function Zl(e){e=e|0;return(_[e+4>>2]&2|0)!=0|0}function Yl(e,t){e=e|0;t=t|0;var n=0;e=e+4|0;n=_[e>>2]|0;_[e>>2]=t?n|4:n&-5;return}function Xl(e){e=e|0;return(_[e+4>>2]&4|0)!=0|0}function em(e){e=e|0;return _[e+12>>2]|0}function tm(e){e=e|0;return _[e+48>>2]|0}function nm(e){e=e|0;return _[e+56>>2]|0}function im(e){e=e|0;return _[e+52>>2]|0}function rm(e){e=e|0;return _[e+60>>2]|0}function _m(e,t){e=e|0;t=+t;s[e+136>>2]=t;return}function om(e){e=e|0;return+ +s[e+136>>2]}function cm(e){e=e|0;s[e+136>>2]=+V(+(+s[(_[e+48>>2]|0)+16>>2]*+s[(_[e+52>>2]|0)+16>>2]));return}function pm(e,t){e=e|0;t=+t;s[e+140>>2]=t;return}function sm(e){e=e|0;return+ +s[e+140>>2]}function um(e){e=e|0;var t=0.0,n=0.0;n=+s[(_[e+48>>2]|0)+20>>2];t=+s[(_[e+52>>2]|0)+20>>2];s[e+140>>2]=n>t?n:t;return}function bm(e,t){e=e|0;t=+t;s[e+144>>2]=t;return}function fm(e){e=e|0;return+ +s[e+144>>2]}function am(e){e=e|0;return _[e+4>>2]|0}function dm(e){e=e|0;var t=0;t=b;e=hq[_[(_[e>>2]|0)+12>>2]&63](e)|0;b=t;return e|0}function ym(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=b;e=bq[_[(_[e>>2]|0)+16>>2]&63](e,t,n)|0;b=i;return e|0}function lm(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0;o=b;e=jq[_[(_[e>>2]|0)+20>>2]&63](e,t,n,i,r)|0;b=o;return e|0}function mm(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=b;Aq[_[(_[e>>2]|0)+24>>2]&63](e,t,n,i);b=r;return}function hm(e,t,n){e=e|0;t=t|0;n=+n;var i=0;i=b;Dq[_[(_[e>>2]|0)+28>>2]&63](e,t,n);b=i;return}function vm(e){e=e|0;return _[e+4>>2]|0}function gm(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function Jm(e){e=e|0;return+ +s[e+8>>2]}function Dm(e,t){e=e|0;t=+t;s[e+8>>2]=t;return}function xm(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function Gm(){var e=0,t=0,n=0,r=0;e=b;t=kS(48)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(48)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;i[t+16>>0]=0;_[t>>2]=3;r=t+20|0;n=t+36|0;_[r+0>>2]=0;_[r+4>>2]=0;_[r+8>>2]=0;_[r+12>>2]=0;s[n>>2]=1.0;s[t+40>>2]=0.0;s[t+44>>2]=0.0;b=e;return t|0}function jm(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,c=0.0,p=0.0,u=0,f=0.0,a=0.0,d=0.0;o=b;_[e+8>>2]=t;_[e+12>>2]=n;d=+s[i>>2]-+s[t+12>>2];u=i+4|0;p=+s[u>>2]-+s[t+16>>2];c=+s[t+24>>2];f=+s[t+20>>2];a=+(d*c+p*f);f=+(c*p-d*f);t=e+20|0;s[t>>2]=a;s[t+4>>2]=f;f=+s[r>>2]-+s[n+12>>2];t=r+4|0;a=+s[t>>2]-+s[n+16>>2];d=+s[n+24>>2];p=+s[n+20>>2];c=+(f*d+a*p);p=+(d*a-f*p);n=e+28|0;s[n>>2]=c;s[n+4>>2]=p;p=+s[r>>2]-+s[i>>2];c=+s[t>>2]-+s[u>>2];s[e+36>>2]=+V(+(p*p+c*c));b=o;return}function Am(e){e=e|0;return e+20|0}function Sm(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+20|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function Cm(e){e=e|0;return e+28|0}function Bm(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+28|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function km(e){e=e|0;return+ +s[e+36>>2]}function wm(e,t){e=e|0;t=+t;s[e+36>>2]=t;return}function Mm(e){e=e|0;return+ +s[e+40>>2]}function Rm(e,t){e=e|0;t=+t;s[e+40>>2]=t;return}function qm(e){e=e|0;return+ +s[e+44>>2]}function Fm(e,t){e=e|0;t=+t;s[e+44>>2]=t;return}function Pm(e){e=e|0;return _[e>>2]|0}function Tm(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function Lm(e){e=e|0;return _[e+4>>2]|0}function Im(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function Wm(e){e=e|0;return _[e+8>>2]|0}function Em(e,t){e=e|0;t=t|0;_[e+8>>2]=t;return}function Om(e){e=e|0;return _[e+12>>2]|0}function Vm(e,t){e=e|0;t=t|0;_[e+12>>2]=t;return}function Um(e){e=e|0;return(i[e+16>>0]|0)!=0|0}function Nm(e,t){e=e|0;t=t|0;i[e+16>>0]=t&1;return}function zm(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function Hm(e,t){e=e|0;t=t|0;var n=0;n=b;e=qj(e,t)|0;b=n;return e|0}function Qm(e,t,n){e=e|0;t=t|0;n=+n;var o=0,c=0;o=b;b=b+32|0;c=o;r[c+22>>1]=1;r[c+24>>1]=-1;r[c+26>>1]=0;_[c+4>>2]=0;s[c+8>>2]=.20000000298023224;s[c+12>>2]=0.0;i[c+20>>0]=0;_[c>>2]=t;s[c+16>>2]=n;t=qj(e,c)|0;b=o;return t|0}function Km(e,t){e=e|0;t=t|0;var n=0,o=0,c=0,p=0,s=0,u=0,f=0,a=0,d=0;n=b;p=e+88|0;if(_[(_[p>>2]|0)+102868>>2]&2)Be(9352,9088,216,9408);c=t+8|0;if((_[c>>2]|0)!=(e|0))Be(9424,9088,222,9408);o=e+104|0;if((_[o>>2]|0)<=0)Be(9448,9088,225,9408);d=e+100|0;a=_[d>>2]|0;if(!a)Be(9472,9088,241,9408);else{f=a;s=d}while(1){a=f+4|0;if((f|0)==(t|0))break;f=_[a>>2]|0;if(!f){u=11;break}else s=a}if((u|0)==11)Be(9472,9088,241,9408);u=t+4|0;_[s>>2]=_[u>>2];s=_[e+112>>2]|0;if(s)do{f=_[s+4>>2]|0;s=_[s+12>>2]|0;if((_[f+48>>2]|0)==(t|0)?1:(_[f+52>>2]|0)==(t|0))Ij((_[p>>2]|0)+102872|0,f)}while((s|0)!=0);p=_[p>>2]|0;if(r[e+4>>1]&32)iA(t,p+102872|0);tA(t,p);_[c>>2]=0;_[u>>2]=0;c=i[8036]|0;if((c&255)<14){d=p+((c&255)<<2)+12|0;_[t>>2]=_[d>>2];_[d>>2]=t;_[o>>2]=(_[o>>2]|0)+-1;Mj(e);b=n;return}else Be(8760,8672,171,9032)}function $m(e,t,n){e=e|0;t=t|0;n=+n;var i=0,r=0,o=0,c=0.0,p=0.0,u=0.0,f=0.0,d=0.0,y=0,l=0;i=b;o=_[e+88>>2]|0;if(_[o+102868>>2]&2)Be(9352,9088,419,9560);r=e+12|0;f=+z(+n);s[e+20>>2]=f;u=+N(+n);s[e+24>>2]=u;y=_[t>>2]|0;t=_[t+4>>2]|0;l=r;_[l>>2]=y;_[l+4>>2]=t;d=+s[e+28>>2];c=+s[e+32>>2];p=(_[a>>2]=y,+s[a>>2])+(u*d-f*c);c=d*f+u*c+(_[a>>2]=t,+s[a>>2]);p=+p;c=+c;t=e+44|0;s[t>>2]=p;s[t+4>>2]=c;s[e+56>>2]=n;t=e+36|0;s[t>>2]=p;s[t+4>>2]=c;s[e+52>>2]=n;o=o+102872|0;e=_[e+100>>2]|0;if(!e){b=i;return}do{rA(e,o,r,r);e=_[e+4>>2]|0}while((e|0)!=0);b=i;return}function Zm(e){e=e|0;return e+12|0}function Ym(e){e=e|0;return e+12|0}function Xm(e){e=e|0;return+ +s[e+56>>2]}function eh(e){e=e|0;return e+44|0}function th(e){e=e|0;return e+28|0}function nh(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,p=0.0,u=0.0;n=b;if(!(_[e>>2]|0)){b=n;return}u=+s[t>>2];p=+s[t+4>>2];if(u*u+p*p>0.0?(o=e+4|0,i=c[o>>1]|0,(i&2|0)==0):0){r[o>>1]=i|2;s[e+144>>2]=0.0}i=t;o=_[i+4>>2]|0;t=e+64|0;_[t>>2]=_[i>>2];_[t+4>>2]=o;b=n;return}function ih(e){e=e|0;var t=0,n=0,r=0;t=b;if((i[704]|0)==0?(je(704)|0)!=0:0)Me(704);r=e+64|0;n=_[r+4>>2]|0;e=696;_[e>>2]=_[r>>2];_[e+4>>2]=n;b=t;return 696}function rh(e,t){e=e|0;t=+t;var n=0,i=0,o=0;n=b;if(!(_[e>>2]|0)){b=n;return}if(t*t>0.0?(o=e+4|0,i=c[o>>1]|0,(i&2|0)==0):0){r[o>>1]=i|2;s[e+144>>2]=0.0}s[e+72>>2]=t;b=n;return}function _h(e){e=e|0;return+ +s[e+72>>2]}function oh(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,c=0,p=0,u=0;o=b;if((_[e>>2]|0)!=2){b=o;return}p=e+4|0;u=r[p>>1]|0;if((i?(u&2)==0:0)?(c=u&65535,(c&2|0)==0):0){u=(c|2)&65535;r[p>>1]=u;s[e+144>>2]=0.0}if(!(u&2)){b=o;return}p=e+76|0;s[p>>2]=+s[t>>2]+ +s[p>>2];p=t+4|0;u=e+80|0;s[u>>2]=+s[p>>2]+ +s[u>>2];u=e+84|0;s[u>>2]=+s[u>>2]+((+s[n>>2]-+s[e+44>>2])*+s[p>>2]-(+s[n+4>>2]-+s[e+48>>2])*+s[t>>2]);b=o;return}function ch(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,c=0,p=0;i=b;if((_[e>>2]|0)!=2){b=i;return}c=e+4|0;p=r[c>>1]|0;if((n?(p&2)==0:0)?(o=p&65535,(o&2|0)==0):0){p=(o|2)&65535;r[c>>1]=p;s[e+144>>2]=0.0}if(!(p&2)){b=i;return}p=e+76|0;s[p>>2]=+s[t>>2]+ +s[p>>2];p=e+80|0;s[p>>2]=+s[t+4>>2]+ +s[p>>2];b=i;return}function ph(e,t,n){e=e|0;t=+t;n=n|0;var i=0,o=0,c=0,p=0;i=b;if((_[e>>2]|0)!=2){b=i;return}c=e+4|0;p=r[c>>1]|0;if((n?(p&2)==0:0)?(o=p&65535,(o&2|0)==0):0){p=(o|2)&65535;r[c>>1]=p;s[e+144>>2]=0.0}if(!(p&2)){b=i;return}p=e+84|0;s[p>>2]=+s[p>>2]+t;b=i;return}function sh(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,c=0,p=0,u=0,f=0.0,a=0.0;o=b;if((_[e>>2]|0)!=2){b=o;return}p=e+4|0;u=r[p>>1]|0;if((i?(u&2)==0:0)?(c=u&65535,(c&2|0)==0):0){u=(c|2)&65535;r[p>>1]=u;s[e+144>>2]=0.0}if(!(u&2)){b=o;return}a=+s[e+120>>2];p=t+4|0;f=a*+s[p>>2];u=e+64|0;s[u>>2]=a*+s[t>>2]+ +s[u>>2];u=e+68|0;s[u>>2]=f+ +s[u>>2];u=e+72|0;s[u>>2]=+s[u>>2]+ +s[e+128>>2]*((+s[n>>2]-+s[e+44>>2])*+s[p>>2]-(+s[n+4>>2]-+s[e+48>>2])*+s[t>>2]);b=o;return}function uh(e,t,n){e=e|0;t=+t;n=n|0;var i=0,o=0,c=0,p=0;i=b;if((_[e>>2]|0)!=2){b=i;return}c=e+4|0;p=r[c>>1]|0;if((n?(p&2)==0:0)?(o=p&65535,(o&2|0)==0):0){p=(o|2)&65535;r[c>>1]=p;s[e+144>>2]=0.0}if(!(p&2)){b=i;return}p=e+72|0;s[p>>2]=+s[p>>2]+ +s[e+128>>2]*t;b=i;return}function bh(e){e=e|0;return+ +s[e+116>>2]}function fh(e){e=e|0;var t=0.0,n=0.0;n=+s[e+28>>2];t=+s[e+32>>2];return+(+s[e+124>>2]+ +s[e+116>>2]*(n*n+t*t))}function ah(e,t){e=e|0;t=t|0;var n=0,i=0,r=0.0,o=0.0;n=e+116|0;s[t>>2]=+s[n>>2];i=e+28|0;o=+s[i>>2];r=+s[e+32>>2];s[t+12>>2]=+s[e+124>>2]+ +s[n>>2]*(o*o+r*r);n=_[i+4>>2]|0;e=t+4|0;_[e>>2]=_[i>>2];_[e+4>>2]=n;return}function dh(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,c=0.0,p=0.0,u=0,f=0.0,d=0.0,y=0.0,l=0.0,m=0.0;n=b;if(_[(_[e+88>>2]|0)+102868>>2]&2)Be(9352,9088,355,9544);if((_[e>>2]|0)!=2){b=n;return}u=e+120|0;s[u>>2]=0.0;o=e+124|0;s[o>>2]=0.0;i=e+128|0;s[i>>2]=0.0;c=+s[t>>2];c=!(c<=0.0)?c:1.0;s[e+116>>2]=c;s[u>>2]=1.0/c;p=+s[t+12>>2];do{if(p>0.0?(r[e+4>>1]&16)==0:0){d=+s[t+4>>2];f=+s[t+8>>2];c=p-c*(d*d+f*f);s[o>>2]=c;if(c>0.0){s[i>>2]=1.0/c;break}else Be(9528,9088,381,9544)}}while(0);u=e+44|0;o=u;d=+s[o>>2];c=+s[o+4>>2];o=t+4|0;i=_[o>>2]|0;o=_[o+4>>2]|0;t=e+28|0;_[t>>2]=i;_[t+4>>2]=o;l=+s[e+24>>2];m=(_[a>>2]=i,+s[a>>2]);p=+s[e+20>>2];y=(_[a>>2]=o,+s[a>>2]);f=+s[e+12>>2]+(l*m-p*y);y=m*p+l*y+ +s[e+16>>2];l=+f;p=+y;s[u>>2]=l;s[u+4>>2]=p;u=e+36|0;s[u>>2]=l;s[u+4>>2]=p;p=+s[e+72>>2];u=e+64|0;s[u>>2]=+s[u>>2]-p*(y-c);u=e+68|0;s[u>>2]=p*(f-d)+ +s[u>>2];b=n;return}function yh(e){e=e|0;var t=0;t=b;Mj(e);b=t;return}function lh(e,t){e=e|0;t=t|0;var n=0,r=0.0,_=0.0,o=0.0,c=0.0,p=0.0;n=b;if((i[720]|0)==0?(je(720)|0)!=0:0)Me(720);o=+s[e+24>>2];p=+s[t>>2];c=+s[e+20>>2];r=+s[t+4>>2];_=+(+s[e+12>>2]+(o*p-c*r));r=+(p*c+o*r+ +s[e+16>>2]);t=712;s[t>>2]=_;s[t+4>>2]=r;b=n;return 712}function mh(e,t){e=e|0;t=t|0;var n=0,r=0.0,_=0.0,o=0.0,c=0.0,p=0.0;n=b;if((i[736]|0)==0?(je(736)|0)!=0:0)Me(736);o=+s[e+24>>2];p=+s[t>>2];c=+s[e+20>>2];r=+s[t+4>>2];_=+(o*p-c*r);r=+(p*c+o*r);t=728;s[t>>2]=_;s[t+4>>2]=r;b=n;return 728}function hh(e,t){e=e|0;t=t|0;var n=0,r=0.0,_=0.0,o=0.0,c=0.0,p=0.0;n=b;if((i[752]|0)==0?(je(752)|0)!=0:0)Me(752);o=+s[t>>2]-+s[e+12>>2];c=+s[t+4>>2]-+s[e+16>>2];p=+s[e+24>>2];r=+s[e+20>>2];_=+(o*p+c*r);r=+(p*c-o*r);e=744;s[e>>2]=_;s[e+4>>2]=r;b=n;return 744}function vh(e,t){e=e|0;t=t|0;var n=0,r=0.0,_=0.0,o=0.0,c=0.0,p=0.0;n=b;if((i[768]|0)==0?(je(768)|0)!=0:0)Me(768);p=+s[e+24>>2];o=+s[t>>2];r=+s[e+20>>2];c=+s[t+4>>2];_=+(p*o+r*c);r=+(p*c-o*r);t=760;s[t>>2]=_;s[t+4>>2]=r;b=n;return 760}function gh(e,t){e=e|0;t=t|0;var n=0,r=0.0,_=0.0;n=b;if((i[784]|0)==0?(je(784)|0)!=0:0)Me(784);r=+s[e+72>>2];_=+(+s[e+64>>2]-r*(+s[t+4>>2]-+s[e+48>>2]));r=+(r*(+s[t>>2]-+s[e+44>>2])+ +s[e+68>>2]);t=776;s[t>>2]=_;s[t+4>>2]=r;b=n;return 776}function Jh(e,t){e=e|0;t=t|0;var n=0,r=0.0,_=0.0,o=0.0,c=0.0,p=0.0,u=0.0;n=b;if((i[800]|0)==0?(je(800)|0)!=0:0)Me(800);p=+s[e+24>>2];c=+s[t>>2];o=+s[e+20>>2];r=+s[t+4>>2];u=+s[e+72>>2];_=+(+s[e+64>>2]-u*(c*o+p*r+ +s[e+16>>2]-+s[e+48>>2]));r=+(u*(+s[e+12>>2]+(p*c-o*r)-+s[e+44>>2])+ +s[e+68>>2]);t=792;s[t>>2]=_;s[t+4>>2]=r;b=n;return 792}function Dh(e){e=e|0;return+ +s[e+132>>2]}function xh(e,t){e=e|0;t=+t;s[e+132>>2]=t;return}function Gh(e){e=e|0;return+ +s[e+136>>2]}function jh(e,t){e=e|0;t=+t;s[e+136>>2]=t;return}function Ah(e){e=e|0;return+ +s[e+140>>2]}function Sh(e,t){e=e|0;t=+t;s[e+140>>2]=t;return}function Ch(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,p=0,u=0,f=0,d=0,y=0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0,J=0;n=b;b=b+16|0;p=n;i=e+88|0;if(_[(_[i>>2]|0)+102868>>2]&2)Be(9352,9088,115,9384);if((_[e>>2]|0)==(t|0)){b=n;return}_[e>>2]=t;Mj(e);if((_[e>>2]|0)==0?(s[e+64>>2]=0.0,s[e+68>>2]=0.0,s[e+72>>2]=0.0,h=+s[e+56>>2],s[e+52>>2]=h,o=e+44|0,u=_[o>>2]|0,o=_[o+4>>2]|0,y=e+36|0,_[y>>2]=u,_[y+4>>2]=o,v=+z(+h),s[p+8>>2]=v,h=+N(+h),s[p+12>>2]=h,g=+s[e+28>>2],l=+s[e+32>>2],m=(_[a>>2]=u,+s[a>>2])-(h*g-v*l),l=(_[a>>2]=o,+s[a>>2])-(g*v+h*l),m=+m,l=+l,o=p,s[o>>2]=m,s[o+4>>2]=l,o=(_[i>>2]|0)+102872|0,u=_[e+100>>2]|0,(u|0)!=0):0){t=e+12|0;do{rA(u,o,p,t);u=_[u+4>>2]|0}while((u|0)!=0)}p=e+4|0;o=c[p>>1]|0;if(!(o&2)){r[p>>1]=o|2;s[e+144>>2]=0.0}s[e+76>>2]=0.0;s[e+80>>2]=0.0;s[e+84>>2]=0.0;o=e+112|0;p=_[o>>2]|0;if(p)do{y=p;p=_[p+12>>2]|0;Ij((_[i>>2]|0)+102872|0,_[y+4>>2]|0)}while((p|0)!=0);_[o>>2]=0;o=_[i>>2]|0;f=_[e+100>>2]|0;if(!f){b=n;return}i=o+102912|0;e=o+102908|0;o=o+102904|0;do{d=_[f+28>>2]|0;if((d|0)>0){t=f+24|0;y=_[i>>2]|0;p=0;do{u=_[(_[t>>2]|0)+(p*28|0)+24>>2]|0;if((y|0)==(_[e>>2]|0)){J=_[o>>2]|0;_[e>>2]=y<<1;y=kS(y<<3)|0;_[o>>2]=y;FS(y|0,J|0,_[i>>2]<<2|0)|0;wS(J);y=_[i>>2]|0}_[(_[o>>2]|0)+(y<<2)>>2]=u;y=(_[i>>2]|0)+1|0;_[i>>2]=y;p=p+1|0}while((p|0)!=(d|0))}f=_[f+4>>2]|0}while((f|0)!=0);b=n;return}function Bh(e){e=e|0;return _[e>>2]|0}function kh(e,t){e=e|0;t=t|0;var n=0;e=e+4|0;n=c[e>>1]|0;r[e>>1]=t?n|8:n&65527;return}function wh(e){e=e|0;return(r[e+4>>1]&8)!=0|0}function Mh(e,t){e=e|0;t=t|0;var n=0,i=0,_=0;n=b;i=e+4|0;_=c[i>>1]|0;if(t){r[i>>1]=_|4;b=n;return}t=_&65531;r[i>>1]=t;if(_&2){b=n;return}r[i>>1]=t|2;s[e+144>>2]=0.0;b=n;return}function Rh(e){e=e|0;return(r[e+4>>1]&4)!=0|0}function qh(e,t){e=e|0;t=t|0;var n=0,i=0,o=0;n=b;i=e+4|0;o=c[i>>1]|0;if(!t){r[i>>1]=o&65533;s[e+144>>2]=0.0;t=e+64|0;_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;_[t+16>>2]=0;_[t+20>>2]=0;b=n;return}if(o&2){b=n;return}r[i>>1]=o|2;s[e+144>>2]=0.0;b=n;return}function Fh(e){e=e|0;return(r[e+4>>1]&2)!=0|0}function Ph(e,t,n,p){e=e|0;t=+t;n=n|0;p=p|0;var u=0,f=0,d=0,y=0,l=0,m=0,h=0,v=0,g=0,J=0,D=0,x=0,G=0,j=0,A=0,S=0,C=0,B=0.0,k=0,w=0,M=0,R=0,q=0,F=0,P=0,T=0,L=0,I=0,W=0,O=0,U=0,H=0,Q=0,K=0,$=0,Z=0,Y=0,X=0,ee=0,te=0,ne=0,ie=0,re=0,_e=0,oe=0,ce=0,pe=0,se=0,ue=0,be=0,fe=0,ae=0,de=0,ye=0,le=0,me=0,he=0,ve=0,ge=0,Je=0,De=0,xe=0,Ge=0,je=0,Ae=0,Se=0,Ce=0,ke=0,we=0,Me=0,Re=0,qe=0,Fe=0,Pe=0,Te=0,Le=0,Ie=0,We=0,Ee=0,Oe=0,Ve=0,Ue=0,Ne=0,ze=0,He=0,Qe=0,Ke=0,$e=0,Ze=0,Ye=0,Xe=0,et=0,tt=0,nt=0,it=0,rt=0,_t=0,ot=0,ct=0,pt=0,st=0,ut=0,bt=0,ft=0,at=0,dt=0,yt=0,lt=0,mt=0,ht=0,vt=0,gt=0,Jt=0,Dt=0,xt=0,Gt=0,jt=0,At=0,St=0,Ct=0,Bt=0,kt=0,wt=0,Mt=0,Rt=0.0,qt=0,Ft=0.0,Pt=0.0,Tt=0,Lt=0.0,It=0.0,Wt=0.0,Et=0.0,Ot=0.0,Vt=0.0,Ut=0.0,Nt=0.0,zt=0.0,Ht=0.0,Qt=0.0,Kt=0.0,$t=0.0,Zt=0.0,Yt=0.0,Xt=0.0,en=0.0,tn=0.0,nn=0.0,rn=0.0,_n=0.0,on=0,cn=0.0,pn=0.0,sn=0.0,un=0.0,bn=0.0,fn=0.0,an=0.0,dn=0.0,yn=0.0,ln=0,mn=0,hn=0,vn=0,gn=0,Jn=0,Dn=0,xn=0,Gn=0,jn=0,An=0.0,Sn=0.0,Cn=0.0,Bn=0.0,kn=0,wn=0,Mn=0.0,Rn=0.0,qn=0,Fn=0.0,Pn=0.0,Tn=0,Ln=0,In=0,Wn=0,En=0,On=0,Vn=0.0;u=b;b=b+608|0;y=u;l=u+16|0;m=u+112|0;x=u+236|0;G=u+404|0;d=u+136|0;j=u+536|0;v=u+456|0;g=u+492|0;h=u+528|0;J=u+368|0;D=u+591|0;F=u+588|0;f=e+102868|0;C=_[f>>2]|0;if(C&1){Wj(e+102872|0);C=_[f>>2]&-2;_[f>>2]=C}_[f>>2]=C|2;C=t>0.0;if(C)B=1.0/t;else B=0.0;M=e+102988|0;Rt=+s[M>>2]*t;P=i[e+102992>>0]|0;k=e+102872|0;w=e+102932|0;W=_[w>>2]|0;e:do{if(W){R=e+102884|0;T=e+102876|0;I=e+102944|0;L=e+102940|0;t:while(1){Q=_[W+48>>2]|0;U=_[W+52>>2]|0;H=_[W+56>>2]|0;O=_[W+60>>2]|0;Z=_[Q+8>>2]|0;K=_[U+8>>2]|0;$=W+4|0;X=_[$>>2]|0;n:do{if(!(X&8))S=16;else{if(!(Fj(K,Z)|0)){On=_[W+12>>2]|0;Ij(k,W);W=On;break}Y=_[L>>2]|0;do{if(Y)if(bq[_[(_[Y>>2]|0)+8>>2]&63](Y,Q,U)|0){X=_[$>>2]|0;break}else{On=_[W+12>>2]|0;Ij(k,W);W=On;break n}}while(0);_[$>>2]=X&-9;S=16}}while(0);do{if((S|0)==16){S=0;if(!(r[Z+4>>1]&2))$=0;else $=(_[Z>>2]|0)!=0;if(!(r[K+4>>1]&2))K=0;else K=(_[K>>2]|0)!=0;if(!($|K)){W=_[W+12>>2]|0;break}H=_[(_[Q+24>>2]|0)+(H*28|0)+24>>2]|0;U=_[(_[U+24>>2]|0)+(O*28|0)+24>>2]|0;if((H|0)<=-1){S=24;break t}Q=_[R>>2]|0;if((Q|0)<=(H|0)){S=24;break t}O=_[T>>2]|0;if(!((U|0)>-1&(Q|0)>(U|0))){S=26;break t}if((+s[O+(U*36|0)>>2]-+s[O+(H*36|0)+8>>2]>0.0?1:+s[O+(U*36|0)+4>>2]-+s[O+(H*36|0)+12>>2]>0.0)|+s[O+(H*36|0)>>2]-+s[O+(U*36|0)+8>>2]>0.0|+s[O+(H*36|0)+4>>2]-+s[O+(U*36|0)+12>>2]>0.0){On=_[W+12>>2]|0;Ij(k,W);W=On;break}else{ev(W,_[I>>2]|0);W=_[W+12>>2]|0;break}}}while(0);if(!W)break e}if((S|0)==24)Be(12256,12200,164,12320);else if((S|0)==26)Be(12256,12200,164,12320)}}while(0);s[e+103e3>>2]=0.0;R=e+102995|0;if(!((i[R>>0]|0)==0|C^1)){T=e+103008|0;s[T>>2]=0.0;L=e+103012|0;s[L>>2]=0.0;I=e+103016|0;s[I>>2]=0.0;U=e+102960|0;W=e+68|0;oA(j,_[U>>2]|0,_[e+102936>>2]|0,_[e+102964>>2]|0,W,_[e+102944>>2]|0);O=e+102952|0;H=_[O>>2]|0;if(H)do{On=H+4|0;r[On>>1]=c[On>>1]&65534;H=_[H+96>>2]|0}while((H|0)!=0);H=_[w>>2]|0;if(H)do{On=H+4|0;_[On>>2]=_[On>>2]&-2;H=_[H+12>>2]|0}while((H|0)!=0);H=_[e+102956>>2]|0;if(H)do{i[H+60>>0]=0;H=_[H+12>>2]|0}while((H|0)!=0);We=_[U>>2]|0;Ie=kj(W,We<<2)|0;Oe=_[O>>2]|0;e:do{if(Oe){Pe=j+28|0;$=j+36|0;Fe=j+32|0;Te=e+102976|0;Me=j+8|0;Re=j+48|0;qe=j+16|0;ne=e+102968|0;ie=e+102972|0;De=j+20|0;we=j+24|0;ve=x+4|0;le=x+8|0;ae=x+12|0;fe=x+16|0;be=x+20|0;ue=x+21|0;se=x+24|0;re=x+28|0;ge=G+4|0;oe=G+8|0;Ce=G+12|0;ke=G+16|0;Le=G+20|0;H=G+21|0;Q=j+12|0;K=G+24|0;Z=G+28|0;Y=G+32|0;X=G+36|0;ee=G+40|0;te=P<<24>>24==0;pe=(n|0)>0;Ee=d+48|0;ce=d+40|0;de=d+44|0;ye=(p|0)>0;he=d+36|0;me=d+24|0;U=y+8|0;Je=y+12|0;xe=l+8|0;Ge=l+12|0;je=m+8|0;Ae=m+16|0;Se=d+32|0;_e=d+28|0;t:while(1){Ve=Oe+4|0;Ue=r[Ve>>1]|0;do{if((Ue&35)==34?(_[Oe>>2]|0)!=0:0){_[Pe>>2]=0;_[$>>2]=0;_[Fe>>2]=0;_[Ie>>2]=Oe;r[Ve>>1]=Ue&65535|1;Ne=1;do{Ne=Ne+-1|0;Ve=_[Ie+(Ne<<2)>>2]|0;ze=Ve+4|0;if(!(r[ze>>1]&32)){S=43;break t}uA(j,Ve);Ue=c[ze>>1]|0;if(!(Ue&2)){r[ze>>1]=Ue|2;s[Ve+144>>2]=0.0}do{if(_[Ve>>2]|0){Ue=_[Ve+112>>2]|0;if(Ue)do{ze=_[Ue+4>>2]|0;He=ze+4|0;do{if((_[He>>2]&7|0)==6){if(i[(_[ze+48>>2]|0)+38>>0]|0)break;if(i[(_[ze+52>>2]|0)+38>>0]|0)break;bA(j,ze);_[He>>2]=_[He>>2]|1;ze=_[Ue>>2]|0;He=ze+4|0;Qe=r[He>>1]|0;if(Qe&1)break;if((Ne|0)>=(We|0)){S=54;break t}_[Ie+(Ne<<2)>>2]=ze;r[He>>1]=Qe&65535|1;Ne=Ne+1|0}}while(0);Ue=_[Ue+12>>2]|0}while((Ue|0)!=0);Ve=_[Ve+108>>2]|0;if(!Ve)break;do{He=Ve+4|0;Ue=_[He>>2]|0;do{if(!(i[Ue+60>>0]|0)){Qe=_[Ve>>2]|0;$e=Qe+4|0;Ke=r[$e>>1]|0;if(!(Ke&32))break;ze=_[Fe>>2]|0;if((ze|0)>=(_[Re>>2]|0)){S=61;break t}_[Fe>>2]=ze+1;_[(_[qe>>2]|0)+(ze<<2)>>2]=Ue;i[(_[He>>2]|0)+60>>0]=1;if(Ke&1)break;if((Ne|0)>=(We|0)){S=64;break t}_[Ie+(Ne<<2)>>2]=Qe;r[$e>>1]=Ke&65535|1;Ne=Ne+1|0}}while(0);Ve=_[Ve+12>>2]|0}while((Ve|0)!=0)}}while(0)}while((Ne|0)>0);Ve=(i[Te>>0]|0)==0;Ue=_[Pe>>2]|0;He=(Ue|0)>0;if(He){Qe=_[Me>>2]|0;Ke=0;do{Ne=_[Qe+(Ke<<2)>>2]|0;ze=Ne+44|0;$e=_[ze>>2]|0;ze=_[ze+4>>2]|0;Pt=+s[Ne+56>>2];On=Ne+64|0;Ft=+s[On>>2];Lt=+s[On+4>>2];It=+s[Ne+72>>2];On=Ne+36|0;_[On>>2]=$e;_[On+4>>2]=ze;s[Ne+52>>2]=Pt;if((_[Ne>>2]|0)==2){Rn=+s[Ne+140>>2];Fn=+s[Ne+120>>2];Pn=1.0/(+s[Ne+132>>2]*t+1.0);Ft=(Ft+(Rn*+s[ne>>2]+Fn*+s[Ne+76>>2])*t)*Pn;Lt=(Lt+(Rn*+s[ie>>2]+Fn*+s[Ne+80>>2])*t)*Pn;It=(It+ +s[Ne+128>>2]*t*+s[Ne+84>>2])*(1.0/(+s[Ne+136>>2]*t+1.0))}Ne=_[De>>2]|0;On=Ne+(Ke*12|0)|0;_[On>>2]=$e;_[On+4>>2]=ze;s[Ne+(Ke*12|0)+8>>2]=Pt;ze=_[we>>2]|0;Fn=+Ft;Pn=+Lt;On=ze+(Ke*12|0)|0;s[On>>2]=Fn;s[On+4>>2]=Pn;s[ze+(Ke*12|0)+8>>2]=It;Ke=Ke+1|0}while((Ke|0)<(Ue|0))}else{ze=_[we>>2]|0;Ne=_[De>>2]|0}s[x>>2]=t;s[ve>>2]=B;s[le>>2]=Rt;_[ae>>2]=n;_[fe>>2]=p;i[be>>0]=P;i[ue+0>>0]=i[F+0>>0]|0;i[ue+1>>0]=i[F+1>>0]|0;i[ue+2>>0]=i[F+2>>0]|0;_[se>>2]=Ne;_[re>>2]=ze;s[G>>2]=t;s[ge>>2]=B;s[oe>>2]=Rt;_[Ce>>2]=n;_[ke>>2]=p;i[Le>>0]=P;i[H+0>>0]=i[F+0>>0]|0;i[H+1>>0]=i[F+1>>0]|0;i[H+2>>0]=i[F+2>>0]|0;_[K>>2]=_[Q>>2];_[Z>>2]=_[$>>2];_[Y>>2]=Ne;_[X>>2]=ze;_[ee>>2]=_[j>>2];tv(d,G);nv(d);if(!te?(q=_[Ee>>2]|0,(q|0)>0):0){Xe=_[_e>>2]|0;et=_[ce>>2]|0;Qe=0;do{$e=_[et+(Qe*156|0)+112>>2]|0;Ye=_[et+(Qe*156|0)+116>>2]|0;Ft=+s[et+(Qe*156|0)+120>>2];Et=+s[et+(Qe*156|0)+128>>2];Wt=+s[et+(Qe*156|0)+124>>2];It=+s[et+(Qe*156|0)+132>>2];tt=_[et+(Qe*156|0)+148>>2]|0;Ze=Xe+($e*12|0)|0;Ke=Ze;Vt=+s[Ke>>2];Nt=+s[Ke+4>>2];$e=Xe+($e*12|0)+8|0;Ut=+s[$e>>2];Ke=Xe+(Ye*12|0)|0;On=Ke;zt=+s[On>>2];Ht=+s[On+4>>2];Ye=Xe+(Ye*12|0)+8|0;Ot=+s[Ye>>2];On=et+(Qe*156|0)+72|0;Lt=+s[On>>2];Pt=+s[On+4>>2];if((tt|0)>0){nt=0;do{Rn=+s[et+(Qe*156|0)+(nt*36|0)+16>>2];Pn=+s[et+(Qe*156|0)+(nt*36|0)+20>>2];Fn=Lt*Rn+Pt*Pn;Pn=Pt*Rn-Lt*Pn;Ut=Ut-Et*(+s[et+(Qe*156|0)+(nt*36|0)>>2]*Pn-+s[et+(Qe*156|0)+(nt*36|0)+4>>2]*Fn);Vt=Vt-Ft*Fn;Nt=Nt-Ft*Pn;Ot=Ot+It*(Pn*+s[et+(Qe*156|0)+(nt*36|0)+8>>2]-Fn*+s[et+(Qe*156|0)+(nt*36|0)+12>>2]);zt=zt+Wt*Fn;Ht=Ht+Wt*Pn;nt=nt+1|0}while((nt|0)!=(tt|0))}Pn=+Vt;Fn=+Nt;On=Ze;s[On>>2]=Pn;s[On+4>>2]=Fn;s[$e>>2]=Ut;Fn=+zt;Pn=+Ht;On=Ke;s[On>>2]=Fn;s[On+4>>2]=Pn;s[Ye>>2]=Ot;Qe=Qe+1|0}while((Qe|0)<(q|0))}Qe=_[Fe>>2]|0;Ke=(Qe|0)>0;if(Ke){Ze=_[qe>>2]|0;$e=0;do{On=_[Ze+($e<<2)>>2]|0;lq[_[(_[On>>2]|0)+32>>2]&127](On,x);$e=$e+1|0}while(($e|0)<(Qe|0))}if(pe){Ye=0;do{if(Ke){$e=_[qe>>2]|0;Ze=0;do{On=_[$e+(Ze<<2)>>2]|0;lq[_[(_[On>>2]|0)+36>>2]&127](On,x);Ze=Ze+1|0}while((Ze|0)<(Qe|0))}iv(d);Ye=Ye+1|0}while((Ye|0)<(n|0))}Xe=_[Ee>>2]|0;if((Xe|0)>0){Ye=_[ce>>2]|0;Ze=_[de>>2]|0;$e=0;do{et=_[Ze+(_[Ye+($e*156|0)+152>>2]<<2)>>2]|0;Ke=_[Ye+($e*156|0)+148>>2]|0;if((Ke|0)>0){Qe=0;do{s[et+(Qe*20|0)+72>>2]=+s[Ye+($e*156|0)+(Qe*36|0)+16>>2];s[et+(Qe*20|0)+76>>2]=+s[Ye+($e*156|0)+(Qe*36|0)+20>>2];Qe=Qe+1|0}while((Qe|0)<(Ke|0))}$e=$e+1|0}while(($e|0)<(Xe|0))}if(He){He=0;do{Ue=Ne+(He*12|0)|0;On=Ue;Ft=+s[On>>2];Pt=+s[On+4>>2];Lt=+s[Ne+(He*12|0)+8>>2];On=ze+(He*12|0)|0;It=+s[On>>2];Et=+s[On+4>>2];Wt=+s[ze+(He*12|0)+8>>2];Pn=It*t;Ot=Et*t;Ot=Pn*Pn+Ot*Ot;if(Ot>4.0){Pn=2.0/+V(+Ot);It=It*Pn;Et=Et*Pn}Ot=Wt*t;if(Ot*Ot>2.4674012660980225){if(!(Ot>0.0))Ot=-Ot;Wt=Wt*(1.5707963705062866/Ot)}Pn=+(Ft+It*t);Fn=+(Pt+Et*t);Ne=Ue;s[Ne>>2]=Pn;s[Ne+4>>2]=Fn;Ne=_[De>>2]|0;s[Ne+(He*12|0)+8>>2]=Lt+Wt*t;ze=_[we>>2]|0;Fn=+It;Pn=+Et;Ue=ze+(He*12|0)|0;s[Ue>>2]=Fn;s[Ue+4>>2]=Pn;s[ze+(He*12|0)+8>>2]=Wt;He=He+1|0;Ue=_[Pe>>2]|0}while((He|0)<(Ue|0))}n:do{if(ye){Qe=_[Ee>>2]|0;He=0;while(1){if((Qe|0)>0){Ke=_[me>>2]|0;Ye=_[he>>2]|0;Ze=0;Nt=0.0;do{it=Ye+(Ze*88|0)|0;tt=_[Ye+(Ze*88|0)+32>>2]|0;Xe=_[Ye+(Ze*88|0)+36>>2]|0;nt=Ye+(Ze*88|0)+48|0;Et=+s[nt>>2];Ot=+s[nt+4>>2];Wt=+s[Ye+(Ze*88|0)+40>>2];Ft=+s[Ye+(Ze*88|0)+64>>2];nt=Ye+(Ze*88|0)+56|0;Vt=+s[nt>>2];Ut=+s[nt+4>>2];Lt=+s[Ye+(Ze*88|0)+44>>2];It=+s[Ye+(Ze*88|0)+68>>2];nt=_[Ye+(Ze*88|0)+84>>2]|0;$e=Ke+(tt*12|0)|0;et=$e;zt=+s[et>>2];Ht=+s[et+4>>2];tt=Ke+(tt*12|0)+8|0;Zt=+s[tt>>2];et=Ke+(Xe*12|0)|0;On=et;Qt=+s[On>>2];Kt=+s[On+4>>2];Xe=Ke+(Xe*12|0)+8|0;$t=+s[Xe>>2];if((nt|0)>0){Pt=Wt+Lt;rt=0;do{rn=+z(+Zt);s[U>>2]=rn;_n=+N(+Zt);s[Je>>2]=_n;nn=+z(+$t);s[xe>>2]=nn;Xt=+N(+$t);s[Ge>>2]=Xt;Yt=+(zt-(Et*_n-Ot*rn));rn=+(Ht-(Ot*_n+Et*rn));On=y;s[On>>2]=Yt;s[On+4>>2]=rn;rn=+(Qt-(Vt*Xt-Ut*nn));nn=+(Kt-(Ut*Xt+Vt*nn));On=l;s[On>>2]=rn;s[On+4>>2]=nn;rv(m,it,y,l,rt);On=m;nn=+s[On>>2];rn=+s[On+4>>2];On=je;Xt=+s[On>>2];Yt=+s[On+4>>2];_n=+s[Ae>>2];tn=Xt-zt;en=Yt-Ht;Xt=Xt-Qt;Yt=Yt-Kt;Nt=Nt<_n?Nt:_n;_n=(_n+.004999999888241291)*.20000000298023224;_n=_n<0.0?_n:0.0;cn=rn*tn-nn*en;Pn=rn*Xt-nn*Yt;cn=Pn*It*Pn+(Pt+cn*Ft*cn);if(cn>0.0)_n=-(_n<-.20000000298023224?-.20000000298023224:_n)/cn;else _n=0.0;Pn=nn*_n;Fn=rn*_n;zt=zt-Wt*Pn;Ht=Ht-Wt*Fn;Zt=Zt-Ft*(tn*Fn-en*Pn);Qt=Qt+Lt*Pn;Kt=Kt+Lt*Fn;$t=$t+It*(Xt*Fn-Yt*Pn);rt=rt+1|0}while((rt|0)!=(nt|0))}Pn=+zt;Fn=+Ht;On=$e;s[On>>2]=Pn;s[On+4>>2]=Fn;s[tt>>2]=Zt;Fn=+Qt;Pn=+Kt;On=et;s[On>>2]=Fn;s[On+4>>2]=Pn;s[Xe>>2]=$t;Ze=Ze+1|0}while((Ze|0)<(Qe|0))}else Nt=0.0;Ke=Nt>=-.014999999664723873;Ze=_[Fe>>2]|0;if((Ze|0)>0){Ye=_[qe>>2]|0;$e=0;Xe=1;do{On=_[Ye+($e<<2)>>2]|0;Xe=Xe&(Gq[_[(_[On>>2]|0)+40>>2]&63](On,x)|0);$e=$e+1|0}while(($e|0)<(Ze|0))}else Xe=1;He=He+1|0;if(Ke&Xe){He=0;break n}if((He|0)>=(p|0)){He=1;break}}}else He=1}while(0);if((Ue|0)>0){Ke=_[Me>>2]|0;Qe=0;do{On=_[Ke+(Qe<<2)>>2]|0;En=Ne+(Qe*12|0)|0;Wn=_[En>>2]|0;En=_[En+4>>2]|0;Tn=On+44|0;_[Tn>>2]=Wn;_[Tn+4>>2]=En;Rn=+s[Ne+(Qe*12|0)+8>>2];s[On+56>>2]=Rn;Tn=ze+(Qe*12|0)|0;Ln=_[Tn+4>>2]|0;In=On+64|0;_[In>>2]=_[Tn>>2];_[In+4>>2]=Ln;s[On+72>>2]=+s[ze+(Qe*12|0)+8>>2];Bn=+z(+Rn);s[On+20>>2]=Bn;Rn=+N(+Rn);s[On+24>>2]=Rn;Mn=+s[On+28>>2];Pn=+s[On+32>>2];Fn=(_[a>>2]=Wn,+s[a>>2])-(Rn*Mn-Bn*Pn);Pn=(_[a>>2]=En,+s[a>>2])-(Bn*Mn+Rn*Pn);Fn=+Fn;Pn=+Pn;On=On+12|0;s[On>>2]=Fn;s[On+4>>2]=Pn;Qe=Qe+1|0}while((Qe|0)<(Ue|0))}Ue=_[ce>>2]|0;pA(j,Ue);do{if(!Ve){Ve=_[Pe>>2]|0;if((Ve|0)<=0)break;Ne=_[Me>>2]|0;ze=0;Ft=3.4028234663852886e+38;do{Qe=_[Ne+(ze<<2)>>2]|0;n:do{if(_[Qe>>2]|0){do{if(r[Qe+4>>1]&4){Pn=+s[Qe+72>>2];if(Pn*Pn>.001218469929881394)break;Fn=+s[Qe+64>>2];Pn=+s[Qe+68>>2];if(Fn*Fn+Pn*Pn>9999999747378752.0e-20)break;On=Qe+144|0;Pn=+s[On>>2]+t;s[On>>2]=Pn;Ft=Ft<Pn?Ft:Pn;break n}}while(0);s[Qe+144>>2]=0.0;Ft=0.0}}while(0);ze=ze+1|0}while((ze|0)<(Ve|0));if(!(Ft>=.5)|He)break;else ze=0;do{On=_[Ne+(ze<<2)>>2]|0;En=On+4|0;r[En>>1]=c[En>>1]&65533;s[On+144>>2]=0.0;On=On+64|0;_[On+0>>2]=0;_[On+4>>2]=0;_[On+8>>2]=0;_[On+12>>2]=0;_[On+16>>2]=0;_[On+20>>2]=0;ze=ze+1|0}while((ze|0)<(Ve|0))}}while(0);Ve=_[Se>>2]|0;wj(Ve,Ue);wj(Ve,_[he>>2]|0);s[T>>2]=+s[T>>2]+0.0;s[L>>2]=+s[L>>2]+0.0;s[I>>2]=+s[I>>2]+0.0;Ve=_[Pe>>2]|0;if((Ve|0)<=0)break;Ue=_[Me>>2]|0;Ne=0;do{ze=_[Ue+(Ne<<2)>>2]|0;if(!(_[ze>>2]|0)){On=ze+4|0;r[On>>1]=c[On>>1]&65534}Ne=Ne+1|0}while((Ne|0)<(Ve|0))}}while(0);Oe=_[Oe+96>>2]|0;if(!Oe)break e}if((S|0)==43)Be(11696,11552,445,11720);else if((S|0)==54)Be(11728,11552,495,11720);else if((S|0)==61)Be(12384,12416,68,12456);else if((S|0)==64)Be(11728,11552,524,11720)}}while(0);wj(W,Ie);q=_[O>>2]|0;if(q)do{if((r[q+4>>1]&1)!=0?(_[q>>2]|0)!=0:0)Rj(q);q=_[q+96>>2]|0}while((q|0)!=0);Wj(k);s[e+103020>>2]=0.0;cA(j);s[e+103004>>2]=0.0}if(i[e+102993>>0]|0){if(C){q=e+102944|0;oA(j,64,32,0,e+68|0,_[q>>2]|0);if(i[R>>0]|0){F=_[e+102952>>2]|0;if(F)do{On=F+4|0;r[On>>1]=c[On>>1]&65534;s[F+60>>2]=0.0;F=_[F+96>>2]|0}while((F|0)!=0);F=_[w>>2]|0;if(F)do{On=F+4|0;_[On>>2]=_[On>>2]&-34;_[F+128>>2]=0;s[F+132>>2]=1.0;F=_[F+12>>2]|0}while((F|0)!=0)}le=j+28|0;ye=j+36|0;de=j+32|0;ae=h+4|0;fe=j+40|0;be=j+44|0;P=e+102994|0;ue=j+8|0;Je=x+16|0;ke=x+20|0;st=x+24|0;Ae=x+44|0;Se=x+48|0;pt=x+52|0;ot=x+28|0;me=x+56|0;Bt=x+92|0;Ct=x+128|0;St=x+56|0;At=x+60|0;jt=x+64|0;Gt=x+68|0;xt=x+72|0;Dt=x+76|0;Jt=x+80|0;bt=x+84|0;gt=x+88|0;vt=x+92|0;ht=x+96|0;mt=x+100|0;lt=x+104|0;yt=x+108|0;dt=x+112|0;at=x+116|0;ut=x+120|0;ft=x+124|0;ct=y+4|0;_t=l+28|0;rt=l+88|0;it=l+56|0;nt=l+64|0;tt=l+68|0;et=l+72|0;Xe=l+80|0;Ye=l+84|0;Ze=m+16|0;$e=d+4|0;Ke=d+8|0;Qe=d+12|0;He=d+16|0;ze=d+20|0;Ne=d+24|0;Ue=d+28|0;Ve=d+32|0;Oe=d+36|0;Ee=d+40|0;We=d+44|0;Ie=d+48|0;Le=d+52|0;Te=d+56|0;Pe=d+60|0;Fe=d+64|0;qe=d+68|0;Re=d+72|0;Me=d+76|0;we=d+80|0;Ce=y+9|0;Ge=d+92|0;xe=d+96|0;je=y+10|0;De=d+84|0;ge=d+92|0;L=d+84|0;he=d+88|0;se=j+20|0;pe=j+24|0;ce=j+12|0;oe=x+24|0;_e=x+28|0;re=x+40|0;ie=x+4|0;ne=x+8|0;te=x+12|0;ee=x+16|0;X=x+20|0;Y=x+21|0;Z=x+32|0;$=x+36|0;kt=(n|0)>0;ve=G+40|0;T=G+32|0;Q=G+36|0;K=G+48|0;H=G+24|0;U=y+8|0;O=y+12|0;I=l+8|0;p=l+12|0;F=m+8|0;W=m+16|0;e:while(1){wt=_[w>>2]|0;if(!wt){S=255;break}else{Rt=1.0;Mt=0}do{qt=wt+4|0;Tt=_[qt>>2]|0;do{if((Tt&4|0)!=0?(_[wt+128>>2]|0)<=8:0){if(!(Tt&32)){on=_[wt+48>>2]|0;Tt=_[wt+52>>2]|0;if(i[on+38>>0]|0)break;if(i[Tt+38>>0]|0)break;ln=_[on+8>>2]|0;hn=_[Tt+8>>2]|0;vn=_[ln>>2]|0;gn=_[hn>>2]|0;if(!((vn|0)==2|(gn|0)==2)){S=158;break e}mn=r[ln+4>>1]|0;Jn=r[hn+4>>1]|0;if(!((mn&2)!=0&(vn|0)!=0|(Jn&2)!=0&(gn|0)!=0))break;if(!((mn&8)!=0|(vn|0)!=2|((Jn&8)!=0|(gn|0)!=2)))break;vn=ln+28|0;Jn=ln+60|0;Pt=+s[Jn>>2];mn=hn+28|0;gn=hn+60|0;Ft=+s[gn>>2];do{if(Pt<Ft){if(!(Pt<1.0)){S=163;break e}Fn=(Ft-Pt)/(1.0-Pt);En=ln+36|0;Mn=+s[En>>2];On=ln+40|0;Rn=+s[On>>2];Pn=Fn*(+s[ln+48>>2]-Rn);s[En>>2]=Mn+Fn*(+s[ln+44>>2]-Mn);s[On>>2]=Rn+Pn;On=ln+52|0;Pn=+s[On>>2];s[On>>2]=Pn+Fn*(+s[ln+56>>2]-Pn);s[Jn>>2]=Ft}else{if(!(Ft<Pt)){Ft=Pt;break}if(!(Ft<1.0)){S=167;break e}Pn=(Pt-Ft)/(1.0-Ft);En=hn+36|0;Rn=+s[En>>2];On=hn+40|0;Fn=+s[On>>2];Ft=Pn*(+s[hn+48>>2]-Fn);s[En>>2]=Rn+Pn*(+s[hn+44>>2]-Rn);s[On>>2]=Fn+Ft;On=hn+52|0;Ft=+s[On>>2];s[On>>2]=Ft+Pn*(+s[hn+56>>2]-Ft);s[gn>>2]=Pt;Ft=Pt}}while(0);if(!(Ft<1.0)){S=170;break e}On=_[wt+56>>2]|0;ln=_[wt+60>>2]|0;_[Je>>2]=0;_[ke>>2]=0;s[st>>2]=0.0;_[Ae>>2]=0;_[Se>>2]=0;s[pt>>2]=0.0;IG(x,_[on+12>>2]|0,On);IG(ot,_[Tt+12>>2]|0,ln);Tt=me+0|0;on=vn+0|0;ln=Tt+36|0;do{_[Tt>>2]=_[on>>2];Tt=Tt+4|0;on=on+4|0}while((Tt|0)<(ln|0));Tt=Bt+0|0;on=mn+0|0;ln=Tt+36|0;do{_[Tt>>2]=_[on>>2];Tt=Tt+4|0;on=on+4|0}while((Tt|0)<(ln|0));s[Ct>>2]=1.0;_[1664]=(_[1664]|0)+1;Et=+s[St>>2];Wt=+s[At>>2];Qt=+s[jt>>2];Kt=+s[Gt>>2];_n=+s[xt>>2];rn=+s[Dt>>2];tn=+s[Jt>>2];Zt=+s[gt>>2];Ht=+s[vt>>2];$t=+s[ht>>2];It=+s[mt>>2];en=+s[lt>>2];nn=+s[yt>>2];Ot=+s[dt>>2];Vt=+s[at>>2];Lt=+s[ft>>2];Yt=+E(+(tn/6.2831854820251465))*6.2831854820251465;tn=tn-Yt;Yt=+s[bt>>2]-Yt;zt=+E(+(Vt/6.2831854820251465))*6.2831854820251465;Vt=Vt-zt;zt=+s[ut>>2]-zt;Xt=+s[st>>2]+ +s[pt>>2]+-.014999999664723873;Xt=Xt<.004999999888241291?.004999999888241291:Xt;if(!(Xt>.0012499999720603228)){S=172;break e}r[ct>>1]=0;_[l+0>>2]=_[x+0>>2];_[l+4>>2]=_[x+4>>2];_[l+8>>2]=_[x+8>>2];_[l+12>>2]=_[x+12>>2];_[l+16>>2]=_[x+16>>2];_[l+20>>2]=_[x+20>>2];_[l+24>>2]=_[x+24>>2];_[_t+0>>2]=_[ot+0>>2];_[_t+4>>2]=_[ot+4>>2];_[_t+8>>2]=_[ot+8>>2];_[_t+12>>2]=_[ot+12>>2];_[_t+16>>2]=_[ot+16>>2];_[_t+20>>2]=_[ot+20>>2];_[_t+24>>2]=_[ot+24>>2];i[rt>>0]=0;Ut=Xt+.0012499999720603228;Nt=Xt+-.0012499999720603228;Tt=0;Pt=0.0;t:while(1){un=1.0-Pt;pn=un*tn+Pt*Yt;cn=+z(+pn);pn=+N(+pn);an=un*Qt+Pt*_n-(pn*Et-cn*Wt);sn=un*Kt+Pt*rn-(cn*Et+pn*Wt);fn=un*Vt+Pt*zt;bn=+z(+fn);fn=+N(+fn);dn=un*It+Pt*nn-(fn*Ht-bn*$t);un=un*en+Pt*Ot-(bn*Ht+fn*$t);yn=+an;Pn=+sn;On=it;s[On>>2]=yn;s[On+4>>2]=Pn;s[nt>>2]=cn;s[tt>>2]=pn;Pn=+dn;yn=+un;On=et;s[On>>2]=Pn;s[On+4>>2]=yn;s[Xe>>2]=bn;s[Ye>>2]=fn;WG(m,y,l);yn=+s[Ze>>2];if(yn<=0.0){on=2;Pt=0.0;break}if(yn<Ut){on=3;break}_[d>>2]=x;_[$e>>2]=ot;ln=_[ct>>2]|0;hn=ln&65535;on=ln>>>16;vn=on&255;ln=ln>>>24;mn=ln&255;if(!(hn<<16>>16!=0&(hn&65535)<3)){S=177;break e}s[Ke>>2]=Et;s[Qe>>2]=Wt;s[He>>2]=Qt;s[ze>>2]=Kt;s[Ne>>2]=_n;s[Ue>>2]=rn;s[Ve>>2]=tn;s[Oe>>2]=Yt;s[Ee>>2]=Zt;s[We>>2]=Ht;s[Ie>>2]=$t;s[Le>>2]=It;s[Te>>2]=en;s[Pe>>2]=nn;s[Fe>>2]=Ot;s[qe>>2]=Vt;s[Re>>2]=zt;s[Me>>2]=Lt;do{if(hn<<16>>16!=1)if(vn<<24>>24==mn<<24>>24){_[we>>2]=2;hn=o[Ce>>0]|0;ln=_[Se>>2]|0;if((ln|0)<=(hn|0)){S=187;break e}mn=_[Ae>>2]|0;hn=mn+(hn<<3)|0;An=+s[hn>>2];yn=+s[hn+4>>2];hn=o[je>>0]|0;if((ln|0)<=(hn|0)){S=189;break e}On=mn+(hn<<3)|0;Bn=+s[On>>2];Sn=+s[On+4>>2];Rn=Bn-An;Mn=Sn-yn;Cn=-Rn;Fn=+Mn;Pn=+Cn;On=Ge;s[On>>2]=Fn;s[On+4>>2]=Pn;Rn=+V(+(Mn*Mn+Rn*Rn));if(!(Rn<1.1920928955078125e-7)){Pn=1.0/Rn;Mn=Mn*Pn;s[Ge>>2]=Mn;Cn=Pn*Cn;s[xe>>2]=Cn}An=(An+Bn)*.5;yn=(yn+Sn)*.5;Fn=+An;Pn=+yn;On=De;s[On>>2]=Fn;s[On+4>>2]=Pn;on=on&255;if((_[ke>>2]|0)<=(on|0)){S=193;break e}On=(_[Je>>2]|0)+(on<<3)|0;Fn=+s[On>>2];Pn=+s[On+4>>2];if(!((fn*Mn-bn*Cn)*(an+(pn*Fn-cn*Pn)-(dn+(fn*An-bn*yn)))+(bn*Mn+fn*Cn)*(sn+(cn*Fn+pn*Pn)-(un+(bn*An+fn*yn)))<0.0)){Pn=Qt;bn=Kt;un=_n;Fn=rn;sn=tn;pn=Yt;Rn=Et;Mn=Wt;Bn=It;Sn=en;dn=nn;Cn=Ot;fn=Vt;an=zt;An=Ht;yn=$t;ln=2;on=1;cn=1.0;break}bn=+-Mn;Pn=+-Cn;ln=Ge;s[ln>>2]=bn;s[ln+4>>2]=Pn;Pn=Qt;bn=Kt;un=_n;Fn=rn;sn=tn;pn=Yt;Rn=Et;Mn=Wt;Bn=It;Sn=en;dn=nn;Cn=Ot;fn=Vt;an=zt;An=Ht;yn=$t;ln=2;on=1;cn=1.0;break}else{_[we>>2]=1;hn=on&255;on=_[ke>>2]|0;if((on|0)<=(hn|0)){S=197;break e}mn=_[Je>>2]|0;On=mn+(hn<<3)|0;An=+s[On>>2];yn=+s[On+4>>2];if((on|0)<=(ln|0)){S=199;break e}On=mn+(ln<<3)|0;Mn=+s[On>>2];Sn=+s[On+4>>2];Rn=Mn-An;Bn=Sn-yn;Cn=-Rn;Fn=+Bn;Pn=+Cn;On=Ge;s[On>>2]=Fn;s[On+4>>2]=Pn;Rn=+V(+(Bn*Bn+Rn*Rn));if(!(Rn<1.1920928955078125e-7)){Pn=1.0/Rn;Bn=Bn*Pn;s[Ge>>2]=Bn;Cn=Pn*Cn;s[xe>>2]=Cn}An=(An+Mn)*.5;yn=(yn+Sn)*.5;Fn=+An;Pn=+yn;on=De;s[on>>2]=Fn;s[on+4>>2]=Pn;on=o[Ce>>0]|0;if((_[Se>>2]|0)<=(on|0)){S=203;break e}On=(_[Ae>>2]|0)+(on<<3)|0;Fn=+s[On>>2];Pn=+s[On+4>>2];if(!((pn*Bn-cn*Cn)*(dn+(fn*Fn-bn*Pn)-(an+(pn*An-cn*yn)))+(cn*Bn+pn*Cn)*(un+(bn*Fn+fn*Pn)-(sn+(cn*An+pn*yn)))<0.0)){Pn=Qt;bn=Kt;un=_n;Fn=rn;sn=tn;pn=Yt;Rn=Et;Mn=Wt;Bn=It;Sn=en;dn=nn;Cn=Ot;fn=Vt;an=zt;An=Ht;yn=$t;ln=1;on=1;cn=1.0;break}bn=+-Bn;Pn=+-Cn;ln=Ge;s[ln>>2]=bn;s[ln+4>>2]=Pn;Pn=Qt;bn=Kt;un=_n;Fn=rn;sn=tn;pn=Yt;Rn=Et;Mn=Wt;Bn=It;Sn=en;dn=nn;Cn=Ot;fn=Vt;an=zt;An=Ht;yn=$t;ln=1;on=1;cn=1.0;break}else{_[we>>2]=0;on=on&255;if((_[ke>>2]|0)<=(on|0)){S=180;break e}on=(_[Je>>2]|0)+(on<<3)|0;An=+s[on>>2];yn=+s[on+4>>2];on=o[Ce>>0]|0;if((_[Se>>2]|0)<=(on|0)){S=182;break e}On=(_[Ae>>2]|0)+(on<<3)|0;Fn=+s[On>>2];Pn=+s[On+4>>2];an=dn+(fn*Fn-bn*Pn)-(an+(pn*An-cn*yn));cn=un+(bn*Fn+fn*Pn)-(sn+(cn*An+pn*yn));Pn=+an;pn=+cn;On=Ge;s[On>>2]=Pn;s[On+4>>2]=pn;pn=+V(+(an*an+cn*cn));if(pn<1.1920928955078125e-7){Pn=Qt;bn=Kt;un=_n;Fn=rn;sn=tn;pn=Yt;Rn=Et;Mn=Wt;Bn=It;Sn=en;dn=nn;Cn=Ot;fn=Vt;an=zt;An=Ht;yn=$t;ln=0;on=1;cn=1.0;break}Pn=1.0/pn;s[Ge>>2]=an*Pn;s[xe>>2]=cn*Pn;Pn=Qt;bn=Kt;un=_n;Fn=rn;sn=tn;pn=Yt;Rn=Et;Mn=Wt;Bn=It;Sn=en;dn=nn;Cn=Ot;fn=Vt;an=zt;An=Ht;yn=$t;ln=0;on=1;cn=1.0}}while(0);while(1){Vn=1.0-cn;pn=Vn*sn+pn*cn;sn=+z(+pn);pn=+N(+pn);un=Vn*Pn+un*cn-(pn*Rn-sn*Mn);bn=Vn*bn+Fn*cn-(sn*Rn+pn*Mn);fn=Vn*fn+an*cn;an=+z(+fn);fn=+N(+fn);dn=Vn*Bn+dn*cn-(fn*An-an*yn);yn=Vn*Sn+Cn*cn-(an*An+fn*yn);if(!ln){An=+s[ge>>2];Sn=+s[xe>>2];Rn=pn*An+sn*Sn;Mn=pn*Sn-sn*An;Bn=-An;Vn=-Sn;Cn=fn*Bn+an*Vn;Bn=fn*Vn-an*Bn;ln=_[d>>2]|0;mn=_[ln+16>>2]|0;ln=_[ln+20>>2]|0;if((ln|0)>1){hn=0;Fn=Mn*+s[mn+4>>2]+Rn*+s[mn>>2];gn=1;while(1){Pn=Rn*+s[mn+(gn<<3)>>2]+Mn*+s[mn+(gn<<3)+4>>2];vn=Pn>Fn;hn=vn?gn:hn;gn=gn+1|0;if((gn|0)==(ln|0))break;else Fn=vn?Pn:Fn}}else hn=0;vn=_[$e>>2]|0;gn=_[vn+16>>2]|0;vn=_[vn+20>>2]|0;if((vn|0)>1){xn=0;Rn=Bn*+s[gn+4>>2]+Cn*+s[gn>>2];Jn=1;while(1){Mn=Cn*+s[gn+(Jn<<3)>>2]+Bn*+s[gn+(Jn<<3)+4>>2];Dn=Mn>Rn;xn=Dn?Jn:xn;Jn=Jn+1|0;if((Jn|0)==(vn|0))break;else Rn=Dn?Mn:Rn}}else xn=0;if(!((hn|0)>-1&(ln|0)>(hn|0))){S=214;break e}On=mn+(hn<<3)|0;Cn=+s[On>>2];Bn=+s[On+4>>2];if(!((xn|0)>-1&(vn|0)>(xn|0))){S=216;break e}On=gn+(xn<<3)|0;Pn=+s[On>>2];Vn=+s[On+4>>2];an=An*(dn+(fn*Pn-an*Vn)-(un+(pn*Cn-sn*Bn)))+Sn*(yn+(an*Pn+fn*Vn)-(bn+(sn*Cn+pn*Bn)))}else if((ln|0)==1){Vn=+s[ge>>2];Sn=+s[xe>>2];An=pn*Vn-sn*Sn;Sn=sn*Vn+pn*Sn;Vn=+s[L>>2];Bn=+s[he>>2];un=un+(pn*Vn-sn*Bn);pn=bn+(sn*Vn+pn*Bn);Bn=-An;Vn=-Sn;Cn=fn*Bn+an*Vn;Bn=fn*Vn-an*Bn;ln=_[$e>>2]|0;mn=_[ln+16>>2]|0;ln=_[ln+20>>2]|0;if((ln|0)>1){xn=0;sn=Bn*+s[mn+4>>2]+Cn*+s[mn>>2];hn=1;while(1){bn=Cn*+s[mn+(hn<<3)>>2]+Bn*+s[mn+(hn<<3)+4>>2];vn=bn>sn;xn=vn?hn:xn;hn=hn+1|0;if((hn|0)==(ln|0))break;else sn=vn?bn:sn}if((xn|0)<=-1){S=223;break e}}else xn=0;if((ln|0)<=(xn|0)){S=223;break e}hn=mn+(xn<<3)|0;Pn=+s[hn>>2];Vn=+s[hn+4>>2];an=An*(dn+(fn*Pn-an*Vn)-un)+Sn*(yn+(an*Pn+fn*Vn)-pn);hn=-1}else if((ln|0)==2){Pn=+s[ge>>2];Sn=+s[xe>>2];An=fn*Pn-an*Sn;Sn=an*Pn+fn*Sn;Pn=+s[L>>2];Vn=+s[he>>2];dn=dn+(fn*Pn-an*Vn);fn=yn+(an*Pn+fn*Vn);yn=-An;Vn=-Sn;an=pn*yn+sn*Vn;yn=pn*Vn-sn*yn;ln=_[d>>2]|0;mn=_[ln+16>>2]|0;ln=_[ln+20>>2]|0;if((ln|0)>1){hn=0;Cn=yn*+s[mn+4>>2]+an*+s[mn>>2];vn=1;while(1){Bn=an*+s[mn+(vn<<3)>>2]+yn*+s[mn+(vn<<3)+4>>2];gn=Bn>Cn;hn=gn?vn:hn;vn=vn+1|0;if((vn|0)==(ln|0))break;else Cn=gn?Bn:Cn}if((hn|0)<=-1){S=230;break e}}else hn=0;if((ln|0)<=(hn|0)){S=230;break e}xn=mn+(hn<<3)|0;Vn=+s[xn>>2];an=+s[xn+4>>2];an=An*(un+(pn*Vn-sn*an)-dn)+Sn*(bn+(sn*Vn+pn*an)-fn);xn=-1}else{S=232;break e}if(an>Ut){on=4;Pt=1.0;S=246;break t}if(an>Nt){Pt=cn;break}un=+QG(d,hn,xn,Pt);if(un<Nt){on=1;S=246;break t}if(!(un<=Ut)){pn=Pt;sn=cn;ln=0}else{on=3;S=246;break t}while(1){if(!(ln&1))fn=(pn+sn)*.5;else fn=pn+(Xt-un)*(sn-pn)/(an-un);ln=ln+1|0;_[1670]=(_[1670]|0)+1;bn=+QG(d,hn,xn,fn);dn=bn-Xt;if(!(dn>0.0))dn=-dn;if(dn<.0012499999720603228){cn=fn;break}mn=bn>Xt;if((ln|0)==50)break;else{pn=mn?fn:pn;sn=mn?sn:fn;un=mn?bn:un;an=mn?an:bn}}On=_[1672]|0;_[1672]=(On|0)>(ln|0)?On:ln;if((on|0)==8)break;Pn=+s[He>>2];bn=+s[ze>>2];un=+s[Ne>>2];Fn=+s[Ue>>2];sn=+s[Ve>>2];pn=+s[Oe>>2];Rn=+s[Ke>>2];Mn=+s[Qe>>2];Bn=+s[Le>>2];Sn=+s[Te>>2];dn=+s[Pe>>2];Cn=+s[Fe>>2];fn=+s[qe>>2];an=+s[Re>>2];An=+s[We>>2];yn=+s[Ie>>2];ln=_[we>>2]|0;on=on+1|0}Tt=Tt+1|0;_[1666]=(_[1666]|0)+1;if((Tt|0)==20){Tt=20;on=1;break}}if((S|0)==246){S=0;_[1666]=(_[1666]|0)+1;Tt=Tt+1|0}On=_[1668]|0;_[1668]=(On|0)>(Tt|0)?On:Tt;if((on|0)==3){Ft=Ft+(1.0-Ft)*Pt;Ft=Ft<1.0?Ft:1.0}else Ft=1.0;s[wt+132>>2]=Ft;_[qt>>2]=_[qt>>2]|32}else Ft=+s[wt+132>>2];if(Ft<Rt){Rt=Ft;Mt=wt}}}while(0);wt=_[wt+12>>2]|0}while((wt|0)!=0);if((Mt|0)==0|Rt>.9999988079071045){S=255;break}qt=_[(_[Mt+48>>2]|0)+8>>2]|0;wt=_[(_[Mt+52>>2]|0)+8>>2]|0;hn=qt+28|0;Tt=v+0|0;on=hn+0|0;ln=Tt+36|0;do{_[Tt>>2]=_[on>>2];Tt=Tt+4|0;on=on+4|0}while((Tt|0)<(ln|0));mn=wt+28|0;Tt=g+0|0;on=mn+0|0;ln=Tt+36|0;do{_[Tt>>2]=_[on>>2];Tt=Tt+4|0;on=on+4|0}while((Tt|0)<(ln|0));Tt=qt+60|0;Ft=+s[Tt>>2];if(!(Ft<1.0)){S=257;break}Rn=(Rt-Ft)/(1.0-Ft);gn=qt+44|0;On=qt+36|0;Ft=+s[On>>2];Jn=qt+48|0;vn=qt+40|0;Fn=+s[vn>>2];Pn=Rn*(+s[Jn>>2]-Fn);s[On>>2]=Ft+Rn*(+s[gn>>2]-Ft);s[vn>>2]=Fn+Pn;vn=qt+56|0;On=qt+52|0;Pn=+s[On>>2];Pn=Pn+Rn*(+s[vn>>2]-Pn);s[On>>2]=Pn;s[Tt>>2]=Rt;Tt=qt+36|0;On=_[Tt>>2]|0;Tt=_[Tt+4>>2]|0;Dn=qt+44|0;_[Dn>>2]=On;_[Dn+4>>2]=Tt;s[vn>>2]=Pn;Rn=+z(+Pn);Dn=qt+20|0;s[Dn>>2]=Rn;Pn=+N(+Pn);Gn=qt+24|0;s[Gn>>2]=Pn;kn=qt+12|0;jn=qt+28|0;Fn=+s[jn>>2];xn=qt+32|0;Ft=+s[xn>>2];Vn=(_[a>>2]=On,+s[a>>2])-(Pn*Fn-Rn*Ft);Ft=(_[a>>2]=Tt,+s[a>>2])-(Rn*Fn+Pn*Ft);Vn=+Vn;Ft=+Ft;Tt=kn;s[Tt>>2]=Vn;s[Tt+4>>2]=Ft;Tt=wt+60|0;Ft=+s[Tt>>2];if(!(Ft<1.0)){S=259;break}Mn=(Rt-Ft)/(1.0-Ft);qn=wt+44|0;on=wt+36|0;Vn=+s[on>>2];wn=wt+48|0;Tn=wt+40|0;Rn=+s[Tn>>2];Fn=Mn*(+s[wn>>2]-Rn);s[on>>2]=Vn+Mn*(+s[qn>>2]-Vn);s[Tn>>2]=Rn+Fn;Tn=wt+56|0;on=wt+52|0;Fn=+s[on>>2];Fn=Fn+Mn*(+s[Tn>>2]-Fn);s[on>>2]=Fn;s[Tt>>2]=Rt;Tt=wt+36|0;on=_[Tt>>2]|0;Tt=_[Tt+4>>2]|0;Ln=wt+44|0;_[Ln>>2]=on;_[Ln+4>>2]=Tt;s[Tn>>2]=Fn;Mn=+z(+Fn);Ln=wt+20|0;s[Ln>>2]=Mn;Fn=+N(+Fn);In=wt+24|0;s[In>>2]=Fn;On=wt+12|0;Wn=wt+28|0;Rn=+s[Wn>>2];En=wt+32|0;Vn=+s[En>>2];Pn=(_[a>>2]=on,+s[a>>2])-(Fn*Rn-Mn*Vn);Vn=(_[a>>2]=Tt,+s[a>>2])-(Mn*Rn+Fn*Vn);Pn=+Pn;Vn=+Vn;Tt=On;s[Tt>>2]=Pn;s[Tt+4>>2]=Vn;ev(Mt,_[q>>2]|0);Tt=Mt+4|0;on=_[Tt>>2]|0;_[Tt>>2]=on&-33;ln=Mt+128|0;_[ln>>2]=(_[ln>>2]|0)+1;if((on&6|0)!=6){_[Tt>>2]=on&-37;Tt=hn+0|0;on=v+0|0;ln=Tt+36|0;do{_[Tt>>2]=_[on>>2];Tt=Tt+4|0;on=on+4|0}while((Tt|0)<(ln|0));Tt=mn+0|0;on=g+0|0;ln=Tt+36|0;do{_[Tt>>2]=_[on>>2];Tt=Tt+4|0;on=on+4|0}while((Tt|0)<(ln|0));Rn=+s[vn>>2];Pn=+z(+Rn);s[Dn>>2]=Pn;Rn=+N(+Rn);s[Gn>>2]=Rn;Vn=+s[jn>>2];Fn=+s[xn>>2];Mn=+(+s[gn>>2]-(Rn*Vn-Pn*Fn));Fn=+(+s[Jn>>2]-(Pn*Vn+Rn*Fn));s[kn>>2]=Mn;s[kn+4>>2]=Fn;Fn=+s[Tn>>2];Mn=+z(+Fn);s[Ln>>2]=Mn;Fn=+N(+Fn);s[In>>2]=Fn;Rn=+s[Wn>>2];Vn=+s[En>>2];Pn=+(+s[qn>>2]-(Fn*Rn-Mn*Vn));Vn=+(+s[wn>>2]-(Mn*Rn+Fn*Vn));s[On>>2]=Pn;s[On+4>>2]=Vn;continue}on=qt+4|0;ln=c[on>>1]|0;if(!(ln&2)){r[on>>1]=ln|2;s[qt+144>>2]=0.0}mn=wt+4|0;ln=c[mn>>1]|0;if(!(ln&2)){r[mn>>1]=ln|2;s[wt+144>>2]=0.0}_[le>>2]=0;_[ye>>2]=0;_[de>>2]=0;uA(j,qt);uA(j,wt);bA(j,Mt);r[on>>1]=c[on>>1]|1;r[mn>>1]=c[mn>>1]|1;_[Tt>>2]=_[Tt>>2]|1;_[h>>2]=qt;_[ae>>2]=wt;Tt=qt;Mt=1;while(1){t:do{if((_[Tt>>2]|0)==2?(A=_[Tt+112>>2]|0,(A|0)!=0):0){vn=Tt+4|0;hn=A;do{if((_[le>>2]|0)==(_[fe>>2]|0))break t;if((_[ye>>2]|0)==(_[be>>2]|0))break t;Dn=_[hn+4>>2]|0;Jn=Dn+4|0;n:do{if(!(_[Jn>>2]&1)){mn=_[hn>>2]|0;do{if((_[mn>>2]|0)==2){if(r[vn>>1]&8)break;if(!(r[mn+4>>1]&8))break n}}while(0);if(i[(_[Dn+48>>2]|0)+38>>0]|0)break;if(i[(_[Dn+52>>2]|0)+38>>0]|0)break;gn=mn+28|0;Tt=J+0|0;on=gn+0|0;ln=Tt+36|0;do{_[Tt>>2]=_[on>>2];Tt=Tt+4|0;on=on+4|0}while((Tt|0)<(ln|0));Tt=mn+4|0;if(!(r[Tt>>1]&1)){on=mn+60|0;Ft=+s[on>>2];if(!(Ft<1.0)){S=280;break e}Mn=(Rt-Ft)/(1.0-Ft);On=mn+36|0;Vn=+s[On>>2];Wn=mn+40|0;Rn=+s[Wn>>2];Fn=Mn*(+s[mn+48>>2]-Rn);s[On>>2]=Vn+Mn*(+s[mn+44>>2]-Vn);s[Wn>>2]=Rn+Fn;Wn=mn+56|0;On=mn+52|0;Fn=+s[On>>2];Fn=Fn+Mn*(+s[Wn>>2]-Fn);s[On>>2]=Fn;s[on>>2]=Rt;On=mn+36|0;En=_[On>>2]|0;On=_[On+4>>2]|0;In=mn+44|0;_[In>>2]=En;_[In+4>>2]=On;s[Wn>>2]=Fn;Mn=+z(+Fn);s[mn+20>>2]=Mn;Fn=+N(+Fn);s[mn+24>>2]=Fn;Rn=+s[mn+28>>2];Vn=+s[mn+32>>2];Pn=(_[a>>2]=En,+s[a>>2])-(Fn*Rn-Mn*Vn);Vn=(_[a>>2]=On,+s[a>>2])-(Mn*Rn+Fn*Vn);Pn=+Pn;Vn=+Vn;On=mn+12|0;s[On>>2]=Pn;s[On+4>>2]=Vn}ev(Dn,_[q>>2]|0);on=_[Jn>>2]|0;if(!(on&4)){Tt=gn+0|0;on=J+0|0;ln=Tt+36|0;do{_[Tt>>2]=_[on>>2];Tt=Tt+4|0;on=on+4|0}while((Tt|0)<(ln|0));Fn=+s[mn+56>>2];Mn=+z(+Fn);s[mn+20>>2]=Mn;Fn=+N(+Fn);s[mn+24>>2]=Fn;Rn=+s[mn+28>>2];Vn=+s[mn+32>>2];Pn=+(+s[mn+44>>2]-(Fn*Rn-Mn*Vn));Vn=+(+s[mn+48>>2]-(Mn*Rn+Fn*Vn));On=mn+12|0;s[On>>2]=Pn;s[On+4>>2]=Vn;break}if(!(on&2)){Tt=gn+0|0;on=J+0|0;ln=Tt+36|0;do{_[Tt>>2]=_[on>>2];Tt=Tt+4|0;on=on+4|0}while((Tt|0)<(ln|0));Fn=+s[mn+56>>2];Mn=+z(+Fn);s[mn+20>>2]=Mn;Fn=+N(+Fn);s[mn+24>>2]=Fn;Rn=+s[mn+28>>2];Vn=+s[mn+32>>2];Pn=+(+s[mn+44>>2]-(Fn*Rn-Mn*Vn));Vn=+(+s[mn+48>>2]-(Mn*Rn+Fn*Vn));On=mn+12|0;s[On>>2]=Pn;s[On+4>>2]=Vn;break}_[Jn>>2]=on|1;bA(j,Dn);on=c[Tt>>1]|0;if(on&1)break;r[Tt>>1]=on|1;do{if(_[mn>>2]|0){if(on&2)break;r[Tt>>1]=on|3;s[mn+144>>2]=0.0}}while(0);uA(j,mn)}}while(0);hn=_[hn+12>>2]|0}while((hn|0)!=0)}}while(0);if((Mt|0)>=2)break;Tt=_[h+(Mt<<2)>>2]|0;Mt=Mt+1|0}Rt=(1.0-Rt)*t;Ft=1.0/Rt;Mt=_[qt+8>>2]|0;qt=_[wt+8>>2]|0;hn=_[le>>2]|0;if((hn|0)<=(Mt|0)){S=295;break}if((hn|0)<=(qt|0)){S=300;break}wt=(hn|0)>0;if(wt){ln=_[ue>>2]|0;on=_[se>>2]|0;Tt=_[pe>>2]|0;mn=0;do{On=_[ln+(mn<<2)>>2]|0;En=On+44|0;Wn=_[En+4>>2]|0;In=on+(mn*12|0)|0;_[In>>2]=_[En>>2];_[In+4>>2]=Wn;s[on+(mn*12|0)+8>>2]=+s[On+56>>2];In=On+64|0;Wn=_[In+4>>2]|0;En=Tt+(mn*12|0)|0;_[En>>2]=_[In>>2];_[En+4>>2]=Wn;s[Tt+(mn*12|0)+8>>2]=+s[On+72>>2];mn=mn+1|0}while((mn|0)<(hn|0))}else{on=_[se>>2]|0;Tt=_[pe>>2]|0}_[oe>>2]=_[ce>>2];_[_e>>2]=_[ye>>2];_[re>>2]=_[j>>2];s[x>>2]=Rt;s[ie>>2]=Ft;s[ne>>2]=1.0;_[te>>2]=n;_[ee>>2]=20;i[X>>0]=0;i[Y+0>>0]=i[D+0>>0]|0;i[Y+1>>0]=i[D+1>>0]|0;i[Y+2>>0]=i[D+2>>0]|0;_[Z>>2]=on;_[$>>2]=Tt;tv(G,x);hn=_[K>>2]|0;mn=(hn|0)>0;vn=_[Q>>2]|0;gn=_[H>>2]|0;ln=0;do{if(mn){Jn=0;Nt=0.0;do{wn=vn+(Jn*88|0)|0;xn=_[vn+(Jn*88|0)+32>>2]|0;jn=_[vn+(Jn*88|0)+36>>2]|0;kn=vn+(Jn*88|0)+48|0;It=+s[kn>>2];Vt=+s[kn+4>>2];kn=vn+(Jn*88|0)+56|0;Ot=+s[kn>>2];Et=+s[kn+4>>2];kn=_[vn+(Jn*88|0)+84>>2]|0;if((xn|0)==(Mt|0)|(xn|0)==(qt|0)){Ft=+s[vn+(Jn*88|0)+64>>2];Wt=+s[vn+(Jn*88|0)+40>>2]}else{Ft=0.0;Wt=0.0}if((jn|0)==(Mt|0)|(jn|0)==(qt|0)){Pt=+s[vn+(Jn*88|0)+68>>2];Lt=+s[vn+(Jn*88|0)+44>>2]}else{Pt=0.0;Lt=0.0}Dn=gn+(xn*12|0)|0;Gn=Dn;zt=+s[Gn>>2];Ht=+s[Gn+4>>2];Gn=gn+(xn*12|0)+8|0;Xt=+s[Gn>>2];xn=gn+(jn*12|0)|0;On=xn;Qt=+s[On>>2];Kt=+s[On+4>>2];jn=gn+(jn*12|0)+8|0;$t=+s[jn>>2];if((kn|0)>0){Ut=Wt+Lt;qn=0;do{nn=+z(+Xt);s[U>>2]=nn;_n=+N(+Xt);s[O>>2]=_n;rn=+z(+$t);s[I>>2]=rn;Yt=+N(+$t);s[p>>2]=Yt;Zt=+(zt-(It*_n-Vt*nn));nn=+(Ht-(Vt*_n+It*nn));On=y;s[On>>2]=Zt;s[On+4>>2]=nn;nn=+(Qt-(Ot*Yt-Et*rn));rn=+(Kt-(Et*Yt+Ot*rn));On=l;s[On>>2]=nn;s[On+4>>2]=rn;rv(m,wn,y,l,qn);On=m;rn=+s[On>>2];nn=+s[On+4>>2];On=F;Yt=+s[On>>2];Zt=+s[On+4>>2];_n=+s[W>>2];en=Yt-zt;tn=Zt-Ht;Yt=Yt-Qt;Zt=Zt-Kt;Nt=Nt<_n?Nt:_n;_n=(_n+.004999999888241291)*.75;_n=_n<0.0?_n:0.0;cn=nn*en-rn*tn;Vn=nn*Yt-rn*Zt;cn=Vn*Pt*Vn+(Ut+cn*Ft*cn);if(cn>0.0)_n=-(_n<-.20000000298023224?-.20000000298023224:_n)/cn;else _n=0.0;Vn=rn*_n;Pn=nn*_n;zt=zt-Wt*Vn;Ht=Ht-Wt*Pn;Xt=Xt-Ft*(en*Pn-tn*Vn);Qt=Qt+Lt*Vn;Kt=Kt+Lt*Pn;$t=$t+Pt*(Yt*Pn-Zt*Vn);qn=qn+1|0}while((qn|0)!=(kn|0))}Vn=+zt;Pn=+Ht;On=Dn;s[On>>2]=Vn;s[On+4>>2]=Pn;s[Gn>>2]=Xt;Pn=+Qt;Vn=+Kt;On=xn;s[On>>2]=Pn;s[On+4>>2]=Vn;s[jn>>2]=$t;Jn=Jn+1|0}while((Jn|0)<(hn|0))}else Nt=0.0;ln=ln+1|0}while(!(Nt>=-.007499999832361937)&(ln|0)<20);On=_[ue>>2]|0;In=On+(Mt<<2)|0;Ln=on+(Mt*12|0)|0;En=_[Ln+4>>2]|0;Wn=(_[In>>2]|0)+36|0;_[Wn>>2]=_[Ln>>2];_[Wn+4>>2]=En;s[(_[In>>2]|0)+52>>2]=+s[on+(Mt*12|0)+8>>2];On=On+(qt<<2)|0;In=on+(qt*12|0)|0;Wn=_[In+4>>2]|0;En=(_[On>>2]|0)+36|0;_[En>>2]=_[In>>2];_[En+4>>2]=Wn;s[(_[On>>2]|0)+52>>2]=+s[on+(qt*12|0)+8>>2];nv(G);if(kt){Mt=0;do{iv(G);Mt=Mt+1|0}while((Mt|0)<(n|0))}if(wt){Mt=0;do{wt=on+(Mt*12|0)|0;On=wt;Pt=+s[On>>2];Ft=+s[On+4>>2];Lt=+s[on+(Mt*12|0)+8>>2];On=Tt+(Mt*12|0)|0;It=+s[On>>2];Wt=+s[On+4>>2];Et=+s[Tt+(Mt*12|0)+8>>2];Vn=Rt*It;Ot=Rt*Wt;Ot=Vn*Vn+Ot*Ot;if(Ot>4.0){Vn=2.0/+V(+Ot);It=It*Vn;Wt=Wt*Vn}Ot=Rt*Et;if(Ot*Ot>2.4674012660980225){if(!(Ot>0.0))Ot=-Ot;Et=Et*(1.5707963705062866/Ot)}Pn=Pt+Rt*It;Bn=Ft+Rt*Wt;Fn=Lt+Rt*Et;Cn=+Pn;Vn=+Bn;on=wt;s[on>>2]=Cn;s[on+4>>2]=Vn;on=_[se>>2]|0;s[on+(Mt*12|0)+8>>2]=Fn;Tt=_[pe>>2]|0;Rn=+It;Mn=+Wt;On=Tt+(Mt*12|0)|0;s[On>>2]=Rn;s[On+4>>2]=Mn;s[Tt+(Mt*12|0)+8>>2]=Et;On=_[(_[ue>>2]|0)+(Mt<<2)>>2]|0;En=On+44|0;s[En>>2]=Cn;s[En+4>>2]=Vn;s[On+56>>2]=Fn;En=On+64|0;s[En>>2]=Rn;s[En+4>>2]=Mn;s[On+72>>2]=Et;Mn=+z(+Fn);s[On+20>>2]=Mn;Fn=+N(+Fn);s[On+24>>2]=Fn;Rn=+s[On+28>>2];Vn=+s[On+32>>2];Pn=+(Pn-(Fn*Rn-Mn*Vn));Vn=+(Bn-(Mn*Rn+Fn*Vn));On=On+12|0;s[On>>2]=Pn;s[On+4>>2]=Vn;Mt=Mt+1|0}while((Mt|0)<(_[le>>2]|0))}On=_[ve>>2]|0;pA(j,On);qt=_[T>>2]|0;wj(qt,On);wj(qt,_[Q>>2]|0);qt=_[le>>2]|0;if((qt|0)>0){wt=_[ue>>2]|0;Mt=0;do{Tt=_[wt+(Mt<<2)>>2]|0;On=Tt+4|0;r[On>>1]=c[On>>1]&65534;do{if((_[Tt>>2]|0)==2){Rj(Tt);Tt=_[Tt+112>>2]|0;if(!Tt)break;do{On=(_[Tt+4>>2]|0)+4|0;_[On>>2]=_[On>>2]&-34;Tt=_[Tt+12>>2]|0}while((Tt|0)!=0)}}while(0);Mt=Mt+1|0}while((Mt|0)<(qt|0))}Wj(k);if(i[P>>0]|0){S=332;break}}switch(S|0){case 158:{Be(11752,11552,641,11808);break};case 163:{Be(11824,12336,704,12376);break};case 167:{Be(11824,12336,704,12376);break};case 170:{Be(11824,11552,676,11808);break};case 172:{Be(6696,6720,279,6768);break};case 177:{Be(6920,6720,52,16752);break};case 180:{Be(6800,6832,103,6880);break};case 182:{Be(6800,6832,103,6880);break};case 187:{Be(6800,6832,103,6880);break};case 189:{Be(6800,6832,103,6880);break};case 193:{Be(6800,6832,103,6880);break};case 197:{Be(6800,6832,103,6880);break};case 199:{Be(6800,6832,103,6880);break};case 203:{Be(6800,6832,103,6880);break};case 214:{Be(6800,6832,103,6880);break};case 216:{Be(6800,6832,103,6880);break};case 223:{Be(6800,6832,103,6880);break};case 230:{Be(6800,6832,103,6880);break};case 232:{Be(15688,6720,186,6896);break};case 255:{i[R>>0]=1;break};case 257:{Be(11824,12336,704,12376);break};case 259:{Be(11824,12336,704,12376);break};case 280:{Be(11824,12336,704,12376);break};case 295:{Be(11432,11456,386,11808);break};case 300:{Be(11504,11456,387,11808);break};case 332:{i[R>>0]=0;break}}cA(j);s[e+103024>>2]=0.0;S=334}}else S=334;if((S|0)==334?C:0)s[M>>2]=B;d=_[f>>2]|0;if(!(d&4)){On=d&-3;_[f>>2]=On;On=e+102996|0;s[On>>2]=0.0;b=u;return}y=_[e+102952>>2]|0;if(!y){On=d&-3;_[f>>2]=On;On=e+102996|0;s[On>>2]=0.0;b=u;return}do{s[y+76>>2]=0.0;s[y+80>>2]=0.0;s[y+84>>2]=0.0;y=_[y+96>>2]|0}while((y|0)!=0);On=d&-3;_[f>>2]=On;On=e+102996|0;s[On>>2]=0.0;b=u;return}function Th(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,c=0,p=0,u=0,f=0,a=0,d=0,y=0.0,l=0.0,m=0.0,h=0.0,v=0,g=0.0,J=0.0,D=0,x=0,G=0,j=0.0;r=b;b=b+112|0;d=r+16|0;a=r+88|0;f=r+96|0;u=r+104|0;o=r+8|0;c=r;p=r+24|0;v=_[t+4>>2]|0;if((v|0)==3){p=_[t+16>>2]|0;f=_[t+12>>2]|0;t=n+12|0;y=+s[t>>2];J=+s[f>>2];d=n+8|0;l=+s[d>>2];g=+s[f+4>>2];h=+s[n>>2];a=n+4|0;m=+s[a>>2];s[o>>2]=h+(y*J-l*g);s[o+4>>2]=J*l+y*g+m;if((p|0)<=1){b=r;return}u=c+4|0;e=e+102984|0;v=1;while(1){g=+s[f+(v<<3)>>2];J=+s[f+(v<<3)+4>>2];s[c>>2]=h+(y*g-l*J);s[u>>2]=g*l+y*J+m;G=_[e>>2]|0;Aq[_[(_[G>>2]|0)+24>>2]&63](G,o,c,i);G=_[e>>2]|0;vq[_[(_[G>>2]|0)+16>>2]&63](G,o,.05000000074505806,i);G=c;x=_[G+4>>2]|0;D=o;_[D>>2]=_[G>>2];_[D+4>>2]=x;v=v+1|0;if((v|0)==(p|0))break;y=+s[t>>2];l=+s[d>>2];h=+s[n>>2];m=+s[a>>2]}b=r;return}else if(!v){g=+s[n+12>>2];l=+s[t+12>>2];h=+s[n+8>>2];m=+s[t+16>>2];J=l*h+g*m+ +s[n+4>>2];s[d>>2]=+s[n>>2]+(g*l-h*m);s[d+4>>2]=J;J=+s[t+8>>2];s[a>>2]=g-h*0.0;s[a+4>>2]=h+g*0.0;G=_[e+102984>>2]|0;mq[_[(_[G>>2]|0)+20>>2]&63](G,d,J,a,i);b=r;return}else if((v|0)==2){o=_[t+148>>2]|0;if((o|0)>=9)Be(11840,11552,1077,11864);if((o|0)>0){c=t+20|0;l=+s[n+12>>2];m=+s[n+8>>2];y=+s[n>>2];h=+s[n+4>>2];n=0;do{j=+s[c+(n<<3)>>2];J=+s[c+(n<<3)+4>>2];g=+(y+(l*j-m*J));J=+(j*m+l*J+h);G=p+(n<<3)|0;s[G>>2]=g;s[G+4>>2]=J;n=n+1|0}while((n|0)!=(o|0))}G=_[e+102984>>2]|0;Aq[_[(_[G>>2]|0)+12>>2]&63](G,p,o,i);b=r;return}else if((v|0)==1){g=+s[n+12>>2];J=+s[t+12>>2];h=+s[n+8>>2];m=+s[t+16>>2];l=+s[n>>2];j=+s[n+4>>2];s[f>>2]=l+(g*J-h*m);s[f+4>>2]=J*h+g*m+j;G=t+20|0;m=+s[G>>2];J=+s[G+4>>2];s[u>>2]=l+(g*m-h*J);s[u+4>>2]=m*h+g*J+j;G=_[e+102984>>2]|0;Aq[_[(_[G>>2]|0)+24>>2]&63](G,f,u,i);b=r;return}else{b=r;return}}function Lh(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;e=b;i=r[t+36>>1]|0;if(!(i<<16>>16==0?1:i<<16>>16!=(r[n+36>>1]|0))){i=i<<16>>16>0;b=e;return i|0}if(!((r[n+32>>1]&r[t+34>>1])<<16>>16)){i=0;b=e;return i|0}i=(r[n+34>>1]&r[t+32>>1])<<16>>16!=0;b=e;return i|0}function Ih(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,c=0,p=0.0,u=0.0;o=b;r=xj(r,148)|0;if(!r){c=0;b=o;return c|0}_[r+4>>2]=4;_[r+48>>2]=e;_[r+52>>2]=n;_[r+56>>2]=t;_[r+60>>2]=i;_[r+124>>2]=0;_[r+128>>2]=0;i=e+16|0;c=r+8|0;t=c+40|0;do{_[c>>2]=0;c=c+4|0}while((c|0)<(t|0));s[r+136>>2]=+V(+(+s[i>>2]*+s[n+16>>2]));u=+s[e+20>>2];p=+s[n+20>>2];s[r+140>>2]=u>p?u:p;s[r+144>>2]=0.0;_[r>>2]=12600;if((_[(_[e+12>>2]|0)+4>>2]|0)!=3)Be(12808,12616,42,12688);if(!(_[(_[n+12>>2]|0)+4>>2]|0)){c=r;b=o;return c|0}else Be(14416,12616,43,12688);return 0}function Wh(e,t){e=e|0;t=t|0;var n=0;n=b;dq[_[(_[e>>2]|0)+4>>2]&127](e);Gj(t,e,148);b=n;return}function Eh(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,c=0,p=0,u=0;o=b;b=b+48|0;c=o;p=_[(_[e+48>>2]|0)+12>>2]|0;_[c>>2]=7472;_[c+4>>2]=1;s[c+8>>2]=.009999999776482582;u=c+28|0;_[u+0>>2]=0;_[u+4>>2]=0;_[u+8>>2]=0;_[u+12>>2]=0;r[u+16>>1]=0;ej(p,c,_[e+56>>2]|0);FG(t,c,n,_[(_[e+52>>2]|0)+12>>2]|0,i);b=o;return}function Oh(e){e=e|0;return}function Vh(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function Uh(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,c=0,p=0.0,u=0.0;o=b;r=xj(r,148)|0;if(!r){c=0;b=o;return c|0}_[r+4>>2]=4;_[r+48>>2]=e;_[r+52>>2]=n;_[r+56>>2]=t;_[r+60>>2]=i;_[r+124>>2]=0;_[r+128>>2]=0;i=e+16|0;c=r+8|0;t=c+40|0;do{_[c>>2]=0;c=c+4|0}while((c|0)<(t|0));s[r+136>>2]=+V(+(+s[i>>2]*+s[n+16>>2]));u=+s[e+20>>2];p=+s[n+20>>2];s[r+140>>2]=u>p?u:p;s[r+144>>2]=0.0;_[r>>2]=12792;if((_[(_[e+12>>2]|0)+4>>2]|0)!=3)Be(12808,12856,42,12928);if((_[(_[n+12>>2]|0)+4>>2]|0)==2){c=r;b=o;return c|0}else Be(14672,12856,43,12928);return 0}function Nh(e,t){e=e|0;t=t|0;var n=0;n=b;dq[_[(_[e>>2]|0)+4>>2]&127](e);Gj(t,e,148);b=n;return}function zh(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,c=0,p=0,u=0;o=b;b=b+48|0;c=o;p=_[(_[e+48>>2]|0)+12>>2]|0;_[c>>2]=7472;_[c+4>>2]=1;s[c+8>>2]=.009999999776482582;u=c+28|0;_[u+0>>2]=0;_[u+4>>2]=0;_[u+8>>2]=0;_[u+12>>2]=0;r[u+16>>1]=0;ej(p,c,_[e+56>>2]|0);PG(t,c,n,_[(_[e+52>>2]|0)+12>>2]|0,i);b=o;return}function Hh(e){e=e|0;return}function Qh(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function Kh(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,c=0,p=0.0,u=0.0;t=b;r=xj(r,148)|0;if(!r){c=0;b=t;return c|0}_[r+4>>2]=4;_[r+48>>2]=e;_[r+52>>2]=n;_[r+56>>2]=0;_[r+60>>2]=0;_[r+124>>2]=0;_[r+128>>2]=0;o=e+16|0;c=r+8|0;i=c+40|0;do{_[c>>2]=0;c=c+4|0}while((c|0)<(i|0));s[r+136>>2]=+V(+(+s[o>>2]*+s[n+16>>2]));u=+s[e+20>>2];p=+s[n+20>>2];s[r+140>>2]=u>p?u:p;s[r+144>>2]=0.0;_[r>>2]=13016;if(_[(_[e+12>>2]|0)+4>>2]|0)Be(13032,13080,43,13144);if(!(_[(_[n+12>>2]|0)+4>>2]|0)){c=r;b=t;return c|0}else Be(14416,13080,44,13144);return 0}function $h(e,t){e=e|0;t=t|0;var n=0;n=b;dq[_[(_[e>>2]|0)+4>>2]&127](e);Gj(t,e,148);b=n;return}function Zh(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,c=0,p=0.0,u=0.0,f=0.0,a=0,d=0,y=0.0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0;r=b;d=_[(_[e+48>>2]|0)+12>>2]|0;a=_[(_[e+52>>2]|0)+12>>2]|0;o=t+60|0;_[o>>2]=0;e=d+12|0;p=+s[n+12>>2];l=+s[e>>2];y=+s[n+8>>2];u=+s[d+16>>2];c=a+12|0;h=+s[i+12>>2];g=+s[c>>2];v=+s[i+8>>2];m=+s[a+16>>2];f=+s[i>>2]+(h*g-v*m)-(+s[n>>2]+(p*l-y*u));u=g*v+h*m+ +s[i+4>>2]-(l*y+p*u+ +s[n+4>>2]);p=+s[d+8>>2]+ +s[a+8>>2];if(f*f+u*u>p*p){b=r;return}_[t+56>>2]=0;d=_[e+4>>2]|0;a=t+48|0;_[a>>2]=_[e>>2];_[a+4>>2]=d;s[t+40>>2]=0.0;s[t+44>>2]=0.0;_[o>>2]=1;a=_[c+4>>2]|0;d=t;_[d>>2]=_[c>>2];_[d+4>>2]=a;_[t+16>>2]=0;b=r;return}function Yh(e){e=e|0;return}function Xh(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function ev(e,t){e=e|0;t=t|0;var n=0,o=0,p=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0,h=0,v=0,g=0,J=0,D=0,x=0,G=0;o=b;b=b+192|0;l=o+100|0;h=o+88|0;y=o+64|0;n=o;m=e+64|0;p=n+0|0;f=m+0|0;u=p+64|0;do{_[p>>2]=_[f>>2];p=p+4|0;f=f+4|0}while((p|0)<(u|0));u=e+4|0;d=_[u>>2]|0;_[u>>2]=d|4;d=d>>>1;v=_[e+48>>2]|0;g=_[e+52>>2]|0;p=(i[g+38>>0]|i[v+38>>0])<<24>>24!=0;a=_[v+8>>2]|0;f=_[g+8>>2]|0;J=a+12|0;D=f+12|0;if(!p){Aq[_[_[e>>2]>>2]&63](e,m,J,D);g=e+124|0;y=(_[g>>2]|0)>0;if(y){D=_[n+60>>2]|0;x=(D|0)>0;v=0;do{h=e+(v*20|0)+72|0;s[h>>2]=0.0;m=e+(v*20|0)+76|0;s[m>>2]=0.0;l=_[e+(v*20|0)+80>>2]|0;e:do{if(x){G=0;while(1){J=G+1|0;if((_[n+(G*20|0)+16>>2]|0)==(l|0))break;if((J|0)<(D|0))G=J;else break e}s[h>>2]=+s[n+(G*20|0)+8>>2];s[m>>2]=+s[n+(G*20|0)+12>>2]}}while(0);v=v+1|0}while((v|0)<(_[g>>2]|0))}d=d&1;if(y^(d|0)!=0){m=a+4|0;l=c[m>>1]|0;if(!(l&2)){r[m>>1]=l|2;s[a+144>>2]=0.0}l=f+4|0;a=c[l>>1]|0;if(!(a&2)){r[l>>1]=a|2;s[f+144>>2]=0.0}}}else{v=_[v+12>>2]|0;x=_[g+12>>2]|0;g=_[e+56>>2]|0;G=_[e+60>>2]|0;_[l+16>>2]=0;_[l+20>>2]=0;s[l+24>>2]=0.0;_[l+44>>2]=0;_[l+48>>2]=0;s[l+52>>2]=0.0;IG(l,v,g);IG(l+28|0,x,G);G=l+56|0;_[G+0>>2]=_[J+0>>2];_[G+4>>2]=_[J+4>>2];_[G+8>>2]=_[J+8>>2];_[G+12>>2]=_[J+12>>2];G=l+72|0;_[G+0>>2]=_[D+0>>2];_[G+4>>2]=_[D+4>>2];_[G+8>>2]=_[D+8>>2];_[G+12>>2]=_[D+12>>2];i[l+88>>0]=1;r[h+4>>1]=0;WG(y,h,l);y=+s[y+16>>2]<11920928955078125.0e-22;_[e+124>>2]=0;d=d&1}f=_[u>>2]|0;_[u>>2]=y?f|2:f&-3;u=(d|0)==0;f=y^1;a=(t|0)==0;if(!(u^1|f|a))lq[_[(_[t>>2]|0)+8>>2]&127](t,e);if(!(u|y|a))lq[_[(_[t>>2]|0)+12>>2]&127](t,e);if(p|f|a){b=o;return}gq[_[(_[t>>2]|0)+16>>2]&63](t,e,n);b=o;return}function tv(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,c=0,p=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0,h=0.0,v=0.0,g=0,J=0,D=0,x=0,G=0,j=0;n=b;_[e+0>>2]=_[t+0>>2];_[e+4>>2]=_[t+4>>2];_[e+8>>2]=_[t+8>>2];_[e+12>>2]=_[t+12>>2];_[e+16>>2]=_[t+16>>2];_[e+20>>2]=_[t+20>>2];m=_[t+40>>2]|0;f=e+32|0;_[f>>2]=m;r=_[t+28>>2]|0;c=e+48|0;_[c>>2]=r;o=e+36|0;_[o>>2]=kj(m,r*88|0)|0;r=e+40|0;_[r>>2]=kj(_[f>>2]|0,(_[c>>2]|0)*156|0)|0;_[e+24>>2]=_[t+32>>2];_[e+28>>2]=_[t+36>>2];f=_[t+24>>2]|0;t=e+44|0;_[t>>2]=f;if((_[c>>2]|0)<=0){b=n;return}p=e+20|0;e=e+8|0;u=0;while(1){a=_[f+(u<<2)>>2]|0;d=_[a+48>>2]|0;y=_[a+52>>2]|0;m=_[d+8>>2]|0;l=_[y+8>>2]|0;f=_[a+124>>2]|0;if((f|0)<=0){r=4;break}h=+s[(_[y+12>>2]|0)+8>>2];v=+s[(_[d+12>>2]|0)+8>>2];y=_[r>>2]|0;s[y+(u*156|0)+136>>2]=+s[a+136>>2];s[y+(u*156|0)+140>>2]=+s[a+140>>2];s[y+(u*156|0)+144>>2]=+s[a+144>>2];j=m+8|0;_[y+(u*156|0)+112>>2]=_[j>>2];G=l+8|0;_[y+(u*156|0)+116>>2]=_[G>>2];D=m+120|0;s[y+(u*156|0)+120>>2]=+s[D>>2];x=l+120|0;s[y+(u*156|0)+124>>2]=+s[x>>2];J=m+128|0;s[y+(u*156|0)+128>>2]=+s[J>>2];g=l+128|0;s[y+(u*156|0)+132>>2]=+s[g>>2];_[y+(u*156|0)+152>>2]=u;_[y+(u*156|0)+148>>2]=f;d=y+(u*156|0)+80|0;_[d+0>>2]=0;_[d+4>>2]=0;_[d+8>>2]=0;_[d+12>>2]=0;_[d+16>>2]=0;_[d+20>>2]=0;_[d+24>>2]=0;_[d+28>>2]=0;d=_[o>>2]|0;_[d+(u*88|0)+32>>2]=_[j>>2];_[d+(u*88|0)+36>>2]=_[G>>2];s[d+(u*88|0)+40>>2]=+s[D>>2];s[d+(u*88|0)+44>>2]=+s[x>>2];x=m+28|0;m=_[x+4>>2]|0;D=d+(u*88|0)+48|0;_[D>>2]=_[x>>2];_[D+4>>2]=m;D=l+28|0;m=_[D+4>>2]|0;l=d+(u*88|0)+56|0;_[l>>2]=_[D>>2];_[l+4>>2]=m;s[d+(u*88|0)+64>>2]=+s[J>>2];s[d+(u*88|0)+68>>2]=+s[g>>2];l=a+104|0;m=_[l+4>>2]|0;g=d+(u*88|0)+16|0;_[g>>2]=_[l>>2];_[g+4>>2]=m;g=a+112|0;m=_[g+4>>2]|0;l=d+(u*88|0)+24|0;_[l>>2]=_[g>>2];_[l+4>>2]=m;_[d+(u*88|0)+84>>2]=f;s[d+(u*88|0)+76>>2]=v;s[d+(u*88|0)+80>>2]=h;_[d+(u*88|0)+72>>2]=_[a+120>>2];l=0;do{m=a+(l*20|0)+64|0;if(!(i[p>>0]|0)){s[y+(u*156|0)+(l*36|0)+16>>2]=0.0;s[y+(u*156|0)+(l*36|0)+20>>2]=0.0}else{s[y+(u*156|0)+(l*36|0)+16>>2]=+s[e>>2]*+s[a+(l*20|0)+72>>2];s[y+(u*156|0)+(l*36|0)+20>>2]=+s[e>>2]*+s[a+(l*20|0)+76>>2]}x=y+(u*156|0)+(l*36|0)|0;s[y+(u*156|0)+(l*36|0)+24>>2]=0.0;s[y+(u*156|0)+(l*36|0)+28>>2]=0.0;s[y+(u*156|0)+(l*36|0)+32>>2]=0.0;j=d+(u*88|0)+(l<<3)|0;_[x+0>>2]=0;_[x+4>>2]=0;_[x+8>>2]=0;_[x+12>>2]=0;x=m;G=_[x+4>>2]|0;_[j>>2]=_[x>>2];_[j+4>>2]=G;l=l+1|0}while((l|0)!=(f|0));u=u+1|0;if((u|0)>=(_[c>>2]|0)){r=12;break}f=_[t>>2]|0}if((r|0)==4)Be(13624,13640,73,13704);else if((r|0)==12){b=n;return}}function nv(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,c=0,p=0,u=0,f=0,a=0,d=0,y=0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0.0,A=0.0,S=0.0,C=0.0,B=0.0,k=0.0,w=0.0,M=0,R=0,q=0.0,F=0.0,P=0.0,T=0.0,L=0.0,I=0.0,W=0.0,E=0.0,O=0.0,U=0,H=0,Q=0,K=0,$=0,Z=0.0,Y=0.0,X=0.0,ee=0.0,te=0.0;t=b;b=b+32|0;i=t;n=e+48|0;if((_[n>>2]|0)<=0){b=t;return}c=e+40|0;o=e+36|0;p=e+44|0;r=e+24|0;a=e+28|0;e=i+4|0;y=i+8|0;f=i+24|0;u=0;while(1){d=_[c>>2]|0;U=_[o>>2]|0;M=_[(_[p>>2]|0)+(_[d+(u*156|0)+152>>2]<<2)>>2]|0;Q=_[d+(u*156|0)+112>>2]|0;R=_[d+(u*156|0)+116>>2]|0;B=+s[d+(u*156|0)+120>>2];C=+s[d+(u*156|0)+124>>2];l=+s[d+(u*156|0)+128>>2];m=+s[d+(u*156|0)+132>>2];K=U+(u*88|0)+48|0;E=+s[K>>2];I=+s[K+4>>2];K=U+(u*88|0)+56|0;L=+s[K>>2];O=+s[K+4>>2];K=_[r>>2]|0;$=K+(Q*12|0)|0;x=+s[$>>2];G=+s[$+4>>2];q=+s[K+(Q*12|0)+8>>2];$=_[a>>2]|0;H=$+(Q*12|0)|0;v=+s[H>>2];D=+s[H+4>>2];g=+s[$+(Q*12|0)+8>>2];Q=K+(R*12|0)|0;j=+s[Q>>2];A=+s[Q+4>>2];F=+s[K+(R*12|0)+8>>2];K=$+(R*12|0)|0;S=+s[K>>2];J=+s[K+4>>2];h=+s[$+(R*12|0)+8>>2];R=_[M+124>>2]|0;if((R|0)<=0){n=4;break}k=+s[U+(u*88|0)+80>>2];w=+s[U+(u*88|0)+76>>2];P=+z(+q);T=+N(+q);q=+z(+F);F=+N(+F);W=x-(E*T-I*P);E=G-(I*T+E*P);I=j-(L*F-O*q);L=A-(O*F+L*q);U=_[M+120>>2]|0;e:do{if(!U){s[i>>2]=1.0;s[e>>2]=0.0;Z=+s[M+112>>2];O=+s[M+116>>2];W=W+(T*Z-P*O);P=Z*P+T*O+E;O=+s[M+64>>2];E=+s[M+68>>2];T=I+(F*O-q*E);q=O*q+F*E+L;E=W-T;O=P-q;if(E*E+O*O>1.4210854715202004e-14){L=T-W;F=q-P;Z=+L;I=+F;$=i;s[$>>2]=Z;s[$+4>>2]=I;I=+V(+(L*L+F*F));if(!(I<1.1920928955078125e-7)){Z=1.0/I;L=L*Z;s[i>>2]=L;F=F*Z;s[e>>2]=F}}else{L=1.0;F=0.0}E=W+L*w;Z=P+F*w;W=T-L*k;O=q-F*k;T=+((E+W)*.5);I=+((Z+O)*.5);$=y;s[$>>2]=T;s[$+4>>2]=I;s[f>>2]=L*(W-E)+F*(O-Z)}else if((U|0)==2){Y=+s[M+104>>2];Z=+s[M+108>>2];O=F*Y-q*Z;Z=Y*q+F*Z;Y=+O;X=+Z;U=i;s[U>>2]=Y;s[U+4>>2]=X;X=+s[M+112>>2];Y=+s[M+116>>2];I=I+(F*X-q*Y);L=X*q+F*Y+L;F=O;q=Z;U=0;do{X=+s[M+(U*20|0)+64>>2];Y=+s[M+(U*20|0)+68>>2];O=W+(T*X-P*Y);Y=X*P+T*Y+E;X=k-(F*(O-I)+(Y-L)*q);Z=O+F*X;X=Y+q*X;O=O-F*w;Y=Y-q*w;te=+((O+Z)*.5);ee=+((Y+X)*.5);$=i+(U<<3)+8|0;s[$>>2]=te;s[$+4>>2]=ee;s[i+(U<<2)+24>>2]=+s[i>>2]*(O-Z)+ +s[e>>2]*(Y-X);U=U+1|0;F=+s[i>>2];q=+s[e>>2]}while((U|0)<(R|0));ee=+-F;te=+-q;$=i;s[$>>2]=ee;s[$+4>>2]=te}else if((U|0)==1){X=+s[M+104>>2];te=+s[M+108>>2];ee=T*X-P*te;te=X*P+T*te;X=+ee;Y=+te;U=i;s[U>>2]=X;s[U+4>>2]=Y;Y=+s[M+112>>2];X=+s[M+116>>2];W=W+(T*Y-P*X);P=Y*P+T*X+E;E=ee;T=te;U=0;while(1){te=+s[M+(U*20|0)+64>>2];ee=+s[M+(U*20|0)+68>>2];Y=I+(F*te-q*ee);ee=te*q+F*ee+L;te=w-(E*(Y-W)+(ee-P)*T);X=Y+E*te;te=ee+T*te;Y=Y-E*k;ee=ee-T*k;O=+((Y+X)*.5);Z=+((ee+te)*.5);$=i+(U<<3)+8|0;s[$>>2]=O;s[$+4>>2]=Z;s[i+(U<<2)+24>>2]=+s[i>>2]*(Y-X)+ +s[e>>2]*(ee-te);U=U+1|0;if((U|0)>=(R|0))break e;E=+s[i>>2];T=+s[e>>2]}}}while(0);R=d+(u*156|0)+72|0;$=i;U=_[$+4>>2]|0;M=R;_[M>>2]=_[$>>2];_[M+4>>2]=U;M=d+(u*156|0)+148|0;U=_[M>>2]|0;do{if((U|0)>0){H=d+(u*156|0)+76|0;C=B+C;Q=d+(u*156|0)+140|0;K=0;do{q=+s[i+(K<<3)+8>>2];k=q-x;ee=+s[i+(K<<3)+12>>2];F=+k;w=+(ee-G);$=d+(u*156|0)+(K*36|0)|0;s[$>>2]=F;s[$+4>>2]=w;q=q-j;w=+q;ee=+(ee-A);$=d+(u*156|0)+(K*36|0)+8|0;s[$>>2]=w;s[$+4>>2]=ee;ee=+s[H>>2];w=+s[d+(u*156|0)+(K*36|0)+4>>2];F=+s[R>>2];te=k*ee-w*F;B=+s[d+(u*156|0)+(K*36|0)+12>>2];F=ee*q-F*B;F=C+te*l*te+F*m*F;if(F>0.0)F=1.0/F;else F=0.0;s[d+(u*156|0)+(K*36|0)+24>>2]=F;F=+s[H>>2];ee=-+s[R>>2];te=k*ee-F*w;F=q*ee-F*B;F=C+te*l*te+F*m*F;if(F>0.0)F=1.0/F;else F=0.0;s[d+(u*156|0)+(K*36|0)+28>>2]=F;$=d+(u*156|0)+(K*36|0)+32|0;s[$>>2]=0.0;B=+s[R>>2]*(S-h*B-v+g*w)+ +s[H>>2]*(J+h*q-D-g*k);if(B<-1.0)s[$>>2]=-(B*+s[Q>>2]);K=K+1|0}while((K|0)!=(U|0));if((_[M>>2]|0)==2){X=+s[H>>2];v=+s[R>>2];Y=+s[d+(u*156|0)>>2]*X-+s[d+(u*156|0)+4>>2]*v;h=X*+s[d+(u*156|0)+8>>2]-v*+s[d+(u*156|0)+12>>2];ee=X*+s[d+(u*156|0)+36>>2]-v*+s[d+(u*156|0)+40>>2];v=X*+s[d+(u*156|0)+44>>2]-v*+s[d+(u*156|0)+48>>2];X=l*Y;te=m*h;h=C+Y*X+h*te;l=C+ee*l*ee+v*m*v;m=C+X*ee+te*v;v=h*l-m*m;if(!(h*h<v*1.0e3)){_[M>>2]=1;break}s[d+(u*156|0)+96>>2]=h;s[d+(u*156|0)+100>>2]=m;s[d+(u*156|0)+104>>2]=m;s[d+(u*156|0)+108>>2]=l;if(v!=0.0)v=1.0/v;te=-(v*m);s[d+(u*156|0)+80>>2]=l*v;s[d+(u*156|0)+84>>2]=te;s[d+(u*156|0)+88>>2]=te;s[d+(u*156|0)+92>>2]=h*v}}}while(0);u=u+1|0;if((u|0)>=(_[n>>2]|0)){n=32;break}}if((n|0)==4)Be(13720,13640,171,13752);else if((n|0)==32){b=t;return}}function iv(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,c=0,p=0,u=0.0,f=0.0,a=0.0,d=0.0,y=0.0,l=0.0,m=0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0.0,A=0.0,S=0.0,C=0.0,B=0.0,k=0.0,w=0.0,M=0.0,R=0,q=0.0,F=0.0,P=0,T=0.0,L=0.0,I=0.0,W=0.0,E=0.0,O=0,V=0,U=0,N=0.0,z=0.0;t=b;i=e+48|0;if((_[i>>2]|0)<=0){b=t;return}n=e+40|0;o=e+28|0;R=_[o>>2]|0;c=0;e:while(1){m=_[n>>2]|0;e=_[m+(c*156|0)+112>>2]|0;r=_[m+(c*156|0)+116>>2]|0;d=+s[m+(c*156|0)+120>>2];f=+s[m+(c*156|0)+128>>2];a=+s[m+(c*156|0)+124>>2];u=+s[m+(c*156|0)+132>>2];P=_[m+(c*156|0)+148>>2]|0;p=R+(e*12|0)|0;U=p;V=R+(r*12|0)|0;O=m+(c*156|0)+72|0;l=+s[O>>2];y=+s[O+4>>2];G=-l;j=+s[m+(c*156|0)+136>>2];O=(P|0)==1;if((P+-1|0)>>>0>=2){n=5;break}g=+s[V+4>>2];D=+s[V>>2];J=+s[U+4>>2];V=m+(c*156|0)+144|0;x=+s[U>>2];U=0;v=+s[R+(e*12|0)+8>>2];h=+s[R+(r*12|0)+8>>2];do{W=+s[m+(c*156|0)+(U*36|0)+12>>2];L=+s[m+(c*156|0)+(U*36|0)+8>>2];T=+s[m+(c*156|0)+(U*36|0)+4>>2];F=+s[m+(c*156|0)+(U*36|0)>>2];E=j*+s[m+(c*156|0)+(U*36|0)+16>>2];R=m+(c*156|0)+(U*36|0)+20|0;I=+s[R>>2];M=I-+s[m+(c*156|0)+(U*36|0)+28>>2]*(y*(D-h*W-x+v*T)+(g+h*L-J-v*F)*G-+s[V>>2]);q=-E;E=M<E?M:E;E=E<q?q:E;I=E-I;s[R>>2]=E;E=y*I;I=I*G;x=x-d*E;J=J-d*I;v=v-f*(F*I-T*E);D=D+a*E;g=g+a*I;h=h+u*(L*I-W*E);U=U+1|0}while((U|0)!=(P|0));do{if(!O){P=m+(c*156|0)+16|0;L=+s[P>>2];R=m+(c*156|0)+52|0;T=+s[R>>2];if(!(L>=0.0)|!(T>=0.0)){n=10;break e}A=+s[m+(c*156|0)+12>>2];j=+s[m+(c*156|0)+8>>2];C=+s[m+(c*156|0)+4>>2];w=+s[m+(c*156|0)>>2];G=+s[m+(c*156|0)+48>>2];S=+s[m+(c*156|0)+44>>2];k=+s[m+(c*156|0)+40>>2];B=+s[m+(c*156|0)+36>>2];F=+s[m+(c*156|0)+104>>2];I=+s[m+(c*156|0)+100>>2];M=l*(D-h*A-x+v*C)+y*(g+h*j-J-v*w)-+s[m+(c*156|0)+32>>2]-(L*+s[m+(c*156|0)+96>>2]+T*F);q=l*(D-h*G-x+v*k)+y*(g+h*S-J-v*B)-+s[m+(c*156|0)+68>>2]-(L*I+T*+s[m+(c*156|0)+108>>2]);z=+s[m+(c*156|0)+80>>2]*M+ +s[m+(c*156|0)+88>>2]*q;N=M*+s[m+(c*156|0)+84>>2]+q*+s[m+(c*156|0)+92>>2];W=-z;E=-N;if(!(!(z<=-0.0)|!(N<=-0.0))){L=W-L;N=E-T;I=l*L;L=y*L;z=l*N;N=y*N;F=I+z;T=L+N;s[P>>2]=W;s[R>>2]=E;x=x-d*F;J=J-d*T;D=D+a*F;g=g+a*T;v=v-f*(w*L-C*I+(B*N-k*z));h=h+u*(j*L-A*I+(S*N-G*z));break}z=M*+s[m+(c*156|0)+24>>2];W=-z;if(z<=-0.0?q+I*W>=0.0:0){I=W-L;N=0.0-T;E=l*I;I=y*I;z=l*N;N=y*N;T=z+E;L=N+I;s[P>>2]=W;s[R>>2]=0.0;x=x-d*T;J=J-d*L;D=D+a*T;g=g+a*L;v=v-f*(I*w-E*C+(N*B-z*k));h=h+u*(I*j-E*A+(N*S-z*G));break}z=q*+s[m+(c*156|0)+60>>2];I=-z;if(z<=-0.0?M+F*I>=0.0:0){W=0.0-L;N=I-T;E=l*W;W=y*W;z=l*N;N=y*N;T=E+z;L=W+N;s[P>>2]=0.0;s[R>>2]=I;x=x-d*T;J=J-d*L;D=D+a*T;g=g+a*L;v=v-f*(W*w-E*C+(N*B-z*k));h=h+u*(W*j-E*A+(N*S-z*G));break}if(!(!(M>=0.0)|!(q>=0.0))){W=0.0-L;N=0.0-T;E=l*W;W=y*W;z=l*N;N=y*N;L=E+z;I=W+N;s[P>>2]=0.0;s[R>>2]=0.0;x=x-d*L;J=J-d*I;D=D+a*L;g=g+a*I;v=v-f*(W*w-E*C+(N*B-z*k));h=h+u*(W*j-E*A+(N*S-z*G))}}else{R=0;while(1){N=+s[m+(c*156|0)+(R*36|0)+12>>2];W=+s[m+(c*156|0)+(R*36|0)+8>>2];I=+s[m+(c*156|0)+(R*36|0)+4>>2];L=+s[m+(c*156|0)+(R*36|0)>>2];U=m+(c*156|0)+(R*36|0)+16|0;E=+s[U>>2];z=E-+s[m+(c*156|0)+(R*36|0)+24>>2]*(l*(D-h*N-x+v*I)+y*(g+h*W-J-v*L)-+s[m+(c*156|0)+(R*36|0)+32>>2]);z=z>0.0?z:0.0;E=z-E;s[U>>2]=z;z=l*E;E=y*E;x=x-d*z;J=J-d*E;v=v-f*(L*E-I*z);D=D+a*z;g=g+a*E;h=h+u*(W*E-N*z);if(!R)break;else R=R+1|0}}}while(0);z=+x;N=+J;R=p;s[R>>2]=z;s[R+4>>2]=N;R=_[o>>2]|0;s[R+(e*12|0)+8>>2]=v;N=+D;z=+g;R=R+(r*12|0)|0;s[R>>2]=N;s[R+4>>2]=z;R=_[o>>2]|0;s[R+(r*12|0)+8>>2]=h;c=c+1|0;if((c|0)>=(_[i>>2]|0)){n=22;break}}if((n|0)==5)Be(13784,13640,314,13824);else if((n|0)==10)Be(13856,13640,412,13824);else if((n|0)==22){b=t;return}}function rv(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,c=0.0,p=0.0,u=0.0,f=0.0,a=0.0,d=0.0,y=0.0,l=0.0,m=0,h=0.0,v=0.0,g=0.0,J=0,D=0;o=b;if((_[t+84>>2]|0)<=0)Be(13888,13640,623,16752);m=_[t+72>>2]|0;if(!m){d=+s[n+12>>2];a=+s[t+24>>2];l=+s[n+8>>2];u=+s[t+28>>2];c=+s[n>>2]+(d*a-l*u);u=a*l+d*u+ +s[n+4>>2];d=+s[i+12>>2];l=+s[t>>2];a=+s[i+8>>2];f=+s[t+4>>2];p=+s[i>>2]+(d*l-a*f);f=l*a+d*f+ +s[i+4>>2];d=p-c;a=f-u;l=+d;y=+a;r=e;s[r>>2]=l;s[r+4>>2]=y;y=+V(+(d*d+a*a));if(y<1.1920928955078125e-7){l=d;y=a}else{y=1.0/y;l=d*y;s[e>>2]=l;y=a*y;s[e+4>>2]=y}p=+((c+p)*.5);f=+((u+f)*.5);r=e+8|0;s[r>>2]=p;s[r+4>>2]=f;s[e+16>>2]=d*l+a*y-+s[t+76>>2]-+s[t+80>>2];b=o;return}else if((m|0)==1){J=n+12|0;p=+s[J>>2];u=+s[t+16>>2];m=n+8|0;f=+s[m>>2];d=+s[t+20>>2];c=p*u-f*d;d=u*f+p*d;p=+c;f=+d;D=e;s[D>>2]=p;s[D+4>>2]=f;f=+s[J>>2];p=+s[t+24>>2];u=+s[m>>2];a=+s[t+28>>2];h=+s[i+12>>2];g=+s[t+(r<<3)>>2];v=+s[i+8>>2];l=+s[t+(r<<3)+4>>2];y=+s[i>>2]+(h*g-v*l);l=g*v+h*l+ +s[i+4>>2];s[e+16>>2]=c*(y-(+s[n>>2]+(f*p-u*a)))+(l-(p*u+f*a+ +s[n+4>>2]))*d-+s[t+76>>2]-+s[t+80>>2];y=+y;l=+l;r=e+8|0;s[r>>2]=y;s[r+4>>2]=l;b=o;return}else if((m|0)==2){J=i+12|0;f=+s[J>>2];a=+s[t+16>>2];D=i+8|0;d=+s[D>>2];g=+s[t+20>>2];v=f*a-d*g;g=a*d+f*g;f=+v;d=+g;m=e;s[m>>2]=f;s[m+4>>2]=d;d=+s[J>>2];f=+s[t+24>>2];a=+s[D>>2];y=+s[t+28>>2];u=+s[n+12>>2];c=+s[t+(r<<3)>>2];p=+s[n+8>>2];h=+s[t+(r<<3)+4>>2];l=+s[n>>2]+(u*c-p*h);h=c*p+u*h+ +s[n+4>>2];s[e+16>>2]=v*(l-(+s[i>>2]+(d*f-a*y)))+(h-(f*a+d*y+ +s[i+4>>2]))*g-+s[t+76>>2]-+s[t+80>>2];l=+l;h=+h;D=e+8|0;s[D>>2]=l;s[D+4>>2]=h;v=+-v;g=+-g;D=e;s[D>>2]=v;s[D+4>>2]=g;b=o;return}else{b=o;return}}function _v(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,c=0,p=0.0,u=0.0;t=b;r=xj(r,148)|0;if(!r){c=0;b=t;return c|0}_[r+4>>2]=4;_[r+48>>2]=e;_[r+52>>2]=n;_[r+56>>2]=0;_[r+60>>2]=0;_[r+124>>2]=0;_[r+128>>2]=0;o=e+16|0;c=r+8|0;i=c+40|0;do{_[c>>2]=0;c=c+4|0}while((c|0)<(i|0));s[r+136>>2]=+V(+(+s[o>>2]*+s[n+16>>2]));u=+s[e+20>>2];p=+s[n+20>>2];s[r+140>>2]=u>p?u:p;s[r+144>>2]=0.0;_[r>>2]=13920;if((_[(_[e+12>>2]|0)+4>>2]|0)!=1)Be(14096,13936,40,14e3);if(!(_[(_[n+12>>2]|0)+4>>2]|0)){c=r;b=t;return c|0}else Be(14416,13936,41,14e3);return 0}function ov(e,t){e=e|0;t=t|0;var n=0;n=b;dq[_[(_[e>>2]|0)+4>>2]&127](e);Gj(t,e,148);b=n;return}function cv(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=b;FG(t,_[(_[e+48>>2]|0)+12>>2]|0,n,_[(_[e+52>>2]|0)+12>>2]|0,i);b=r;return}function pv(e){e=e|0;return}function sv(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function uv(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,c=0,p=0.0,u=0.0;t=b;r=xj(r,148)|0;if(!r){c=0;b=t;return c|0}_[r+4>>2]=4;_[r+48>>2]=e;_[r+52>>2]=n;_[r+56>>2]=0;_[r+60>>2]=0;_[r+124>>2]=0;_[r+128>>2]=0;o=e+16|0;c=r+8|0;i=c+40|0;do{_[c>>2]=0;c=c+4|0}while((c|0)<(i|0));s[r+136>>2]=+V(+(+s[o>>2]*+s[n+16>>2]));u=+s[e+20>>2];p=+s[n+20>>2];s[r+140>>2]=u>p?u:p;s[r+144>>2]=0.0;_[r>>2]=14080;if((_[(_[e+12>>2]|0)+4>>2]|0)!=1)Be(14096,14144,40,14216);if((_[(_[n+12>>2]|0)+4>>2]|0)==2){c=r;b=t;return c|0}else Be(14672,14144,41,14216);return 0}function bv(e,t){e=e|0;t=t|0;var n=0;n=b;dq[_[(_[e>>2]|0)+4>>2]&127](e);Gj(t,e,148);b=n;return}function fv(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=b;PG(t,_[(_[e+48>>2]|0)+12>>2]|0,n,_[(_[e+52>>2]|0)+12>>2]|0,i);b=r;return}function av(e){e=e|0;return}function dv(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function yv(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,c=0,p=0.0,u=0.0;t=b;r=xj(r,148)|0;if(!r){c=0;b=t;return c|0}_[r+4>>2]=4;_[r+48>>2]=e;_[r+52>>2]=n;_[r+56>>2]=0;_[r+60>>2]=0;_[r+124>>2]=0;_[r+128>>2]=0;o=e+16|0;c=r+8|0;i=c+40|0;do{_[c>>2]=0;c=c+4|0}while((c|0)<(i|0));s[r+136>>2]=+V(+(+s[o>>2]*+s[n+16>>2]));u=+s[e+20>>2];p=+s[n+20>>2];s[r+140>>2]=u>p?u:p;s[r+144>>2]=0.0;_[r>>2]=14296;if((_[(_[e+12>>2]|0)+4>>2]|0)!=2)Be(14536,14312,40,14384);if(!(_[(_[n+12>>2]|0)+4>>2]|0)){c=r;b=t;return c|0}else Be(14416,14312,41,14384);return 0}function lv(e,t){e=e|0;t=t|0;var n=0;n=b;dq[_[(_[e>>2]|0)+4>>2]&127](e);Gj(t,e,148);b=n;return}function mv(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,c=0,p=0.0,u=0.0,f=0.0,d=0,y=0,l=0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0;r=b;c=_[(_[e+48>>2]|0)+12>>2]|0;y=_[(_[e+52>>2]|0)+12>>2]|0;o=t+60|0;_[o>>2]=0;e=y+12|0;x=+s[i+12>>2];u=+s[e>>2];f=+s[i+8>>2];G=+s[y+16>>2];p=+s[i>>2]+(x*u-f*G)-+s[n>>2];G=u*f+x*G+ +s[i+4>>2]-+s[n+4>>2];x=+s[n+12>>2];f=+s[n+8>>2];u=p*x+G*f;f=x*G-p*f;p=+s[c+8>>2]+ +s[y+8>>2];y=_[c+148>>2]|0;do{if((y|0)>0){n=0;i=0;m=-3.4028234663852886e+38;while(1){h=(u-+s[c+(n<<3)+20>>2])*+s[c+(n<<3)+84>>2]+(f-+s[c+(n<<3)+24>>2])*+s[c+(n<<3)+88>>2];if(h>p){n=19;break}j=h>m;m=j?h:m;i=j?n:i;n=n+1|0;if((n|0)>=(y|0)){n=4;break}}if((n|0)==4){j=m<1.1920928955078125e-7;break}else if((n|0)==19){b=r;return}}else{i=0;j=1}}while(0);l=i+1|0;d=c+(i<<3)+20|0;n=_[d>>2]|0;d=_[d+4>>2]|0;x=(_[a>>2]=n,+s[a>>2]);v=(_[a>>2]=d,+s[a>>2]);l=c+(((l|0)<(y|0)?l:0)<<3)+20|0;y=_[l>>2]|0;l=_[l+4>>2]|0;G=(_[a>>2]=y,+s[a>>2]);D=(_[a>>2]=l,+s[a>>2]);if(j){_[o>>2]=1;_[t+56>>2]=1;j=c+(i<<3)+84|0;l=_[j+4>>2]|0;y=t+40|0;_[y>>2]=_[j>>2];_[y+4>>2]=l;x=+((x+G)*.5);G=+((v+D)*.5);y=t+48|0;s[y>>2]=x;s[y+4>>2]=G;y=e;l=_[y+4>>2]|0;j=t;_[j>>2]=_[y>>2];_[j+4>>2]=l;_[t+16>>2]=0;b=r;return}h=u-x;g=f-v;m=u-G;J=f-D;if(h*(G-x)+g*(D-v)<=0.0){u=h*h+g*g;if(u>p*p){b=r;return}_[o>>2]=1;_[t+56>>2]=1;o=t+40|0;G=+h;p=+g;j=o;s[j>>2]=G;s[j+4>>2]=p;p=+V(+u);if(!(p<1.1920928955078125e-7)){G=1.0/p;s[o>>2]=h*G;s[t+44>>2]=g*G}y=t+48|0;_[y>>2]=n;_[y+4>>2]=d;y=e;l=_[y+4>>2]|0;j=t;_[j>>2]=_[y>>2];_[j+4>>2]=l;_[t+16>>2]=0;b=r;return}if(!(m*(x-G)+J*(v-D)<=0.0)){m=(x+G)*.5;h=(v+D)*.5;n=c+(i<<3)+84|0;if((u-m)*+s[n>>2]+(f-h)*+s[c+(i<<3)+88>>2]>p){b=r;return}_[o>>2]=1;_[t+56>>2]=1;j=n;l=_[j+4>>2]|0;y=t+40|0;_[y>>2]=_[j>>2];_[y+4>>2]=l;x=+m;G=+h;y=t+48|0;s[y>>2]=x;s[y+4>>2]=G;y=e;l=_[y+4>>2]|0;j=t;_[j>>2]=_[y>>2];_[j+4>>2]=l;_[t+16>>2]=0;b=r;return}u=m*m+J*J;if(u>p*p){b=r;return}_[o>>2]=1;_[t+56>>2]=1;o=t+40|0;G=+m;p=+J;j=o;s[j>>2]=G;s[j+4>>2]=p;p=+V(+u);if(!(p<1.1920928955078125e-7)){G=1.0/p;s[o>>2]=m*G;s[t+44>>2]=J*G}j=t+48|0;_[j>>2]=y;_[j+4>>2]=l;y=e;l=_[y+4>>2]|0;j=t;_[j>>2]=_[y>>2];_[j+4>>2]=l;_[t+16>>2]=0;b=r;return}function hv(e){e=e|0;return}function vv(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function gv(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,c=0,p=0.0,u=0.0;t=b;r=xj(r,148)|0;if(!r){c=0;b=t;return c|0}_[r+4>>2]=4;_[r+48>>2]=e;_[r+52>>2]=n;_[r+56>>2]=0;_[r+60>>2]=0;_[r+124>>2]=0;_[r+128>>2]=0;o=e+16|0;c=r+8|0;i=c+40|0;do{_[c>>2]=0;c=c+4|0}while((c|0)<(i|0));s[r+136>>2]=+V(+(+s[o>>2]*+s[n+16>>2]));u=+s[e+20>>2];p=+s[n+20>>2];s[r+140>>2]=u>p?u:p;s[r+144>>2]=0.0;_[r>>2]=14520;if((_[(_[e+12>>2]|0)+4>>2]|0)!=2)Be(14536,14584,43,14648);if((_[(_[n+12>>2]|0)+4>>2]|0)==2){c=r;b=t;return c|0}else Be(14672,14584,44,14648);return 0}function Jv(e,t){e=e|0;t=t|0;var n=0;n=b;dq[_[(_[e>>2]|0)+4>>2]&127](e);Gj(t,e,148);b=n;return}function Dv(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var o=0,c=0,p=0.0,u=0.0,f=0.0,a=0.0,d=0.0,y=0,l=0,m=0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0.0,A=0,S=0.0,C=0.0,B=0.0,k=0,w=0,M=0.0,R=0,q=0,F=0.0,P=0,T=0.0,L=0.0,I=0.0;o=b;b=b+80|0;w=o+76|0;m=o+72|0;y=o;l=o+48|0;c=o+24|0;A=_[(_[e+48>>2]|0)+12>>2]|0;k=_[(_[e+52>>2]|0)+12>>2]|0;e=t+60|0;_[e>>2]=0;p=+s[A+8>>2]+ +s[k+8>>2];_[w>>2]=0;u=+TG(w,A,n,k,r);if(u>p){b=o;return}_[m>>2]=0;f=+TG(m,k,r,A,n);if(f>p){b=o;return}if(f>u+.0005000000237487257){h=+s[r>>2];J=+s[r+4>>2];g=+s[r+8>>2];v=+s[r+12>>2];d=+s[n>>2];u=+s[n+4>>2];f=+s[n+8>>2];a=+s[n+12>>2];m=_[m>>2]|0;_[t+56>>2]=2;r=1;n=k}else{h=+s[n>>2];J=+s[n+4>>2];g=+s[n+8>>2];v=+s[n+12>>2];d=+s[r>>2];u=+s[r+4>>2];f=+s[r+8>>2];a=+s[r+12>>2];m=_[w>>2]|0;_[t+56>>2]=1;r=0;n=A;A=k}k=_[A+148>>2]|0;if((m|0)<=-1)Be(5728,5768,74,5824);w=_[n+148>>2]|0;if((w|0)<=(m|0))Be(5728,5768,74,5824);D=+s[n+(m<<3)+84>>2];T=+s[n+(m<<3)+88>>2];x=v*D-g*T;T=g*D+v*T;D=a*x+f*T;x=a*T-f*x;if((k|0)>0){R=0;P=0;G=3.4028234663852886e+38;while(1){j=D*+s[A+(R<<3)+84>>2]+x*+s[A+(R<<3)+88>>2];q=j<G;P=q?R:P;R=R+1|0;if((R|0)==(k|0))break;else G=q?j:G}}else P=0;q=P+1|0;q=(q|0)<(k|0)?q:0;j=+s[A+(P<<3)+20>>2];B=+s[A+(P<<3)+24>>2];S=+(d+(a*j-f*B));B=+(u+(f*j+a*B));R=y;s[R>>2]=S;s[R+4>>2]=B;R=m&255;k=y+8|0;i[k>>0]=R;i[k+1>>0]=P;i[k+2>>0]=1;i[k+3>>0]=0;B=+s[A+(q<<3)+20>>2];S=+s[A+(q<<3)+24>>2];j=+(d+(a*B-f*S));S=+(u+(f*B+a*S));A=y+12|0;s[A>>2]=j;s[A+4>>2]=S;A=y+20|0;i[A>>0]=R;i[A+1>>0]=q;i[A+2>>0]=1;i[A+3>>0]=0;A=m+1|0;A=(A|0)<(w|0)?A:0;P=n+(m<<3)+20|0;S=+s[P>>2];j=+s[P+4>>2];P=n+(A<<3)+20|0;B=+s[P>>2];C=+s[P+4>>2];M=B-S;T=C-j;D=+V(+(M*M+T*T));if(!(D<1.1920928955078125e-7)){F=1.0/D;M=M*F;T=T*F}F=v*M-g*T;x=v*T+g*M;G=-F;I=h+(v*S-g*j);L=J+(g*S+v*j);D=I*x+L*G;if((LG(l,y,G,-x,p-(I*F+L*x),m)|0)<2){b=o;return}if((LG(c,l,F,x,p+((h+(v*B-g*C))*F+(J+(g*B+v*C))*x),A)|0)<2){b=o;return}I=+T;L=+-M;y=t+40|0;s[y>>2]=I;s[y+4>>2]=L;L=+((S+B)*.5);I=+((j+C)*.5);y=t+48|0;s[y>>2]=L;s[y+4>>2]=I;y=r<<24>>24==0;l=0;m=0;do{h=+s[c+(l*12|0)>>2];v=+s[c+(l*12|0)+4>>2];if(x*h+v*G-D<=p){I=h-d;T=v-u;L=+(a*I+f*T);I=+(a*T-f*I);n=t+(m*20|0)|0;s[n>>2]=L;s[n+4>>2]=I;n=t+(m*20|0)+16|0;r=_[c+(l*12|0)+8>>2]|0;_[n>>2]=r;if(!y){i[n>>0]=r>>>8;i[n+1>>0]=r;i[n+2>>0]=r>>>24;i[n+3>>0]=r>>>16}m=m+1|0}l=l+1|0}while((l|0)!=2);_[e>>2]=m;b=o;return}function xv(e){e=e|0;return}function Gv(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function jv(e,t){e=e|0;t=t|0;var n=0.0,r=0.0,o=0.0,c=0.0,p=0,u=0,f=0,d=0,y=0.0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0.0,A=0,S=0.0,C=0.0,B=0.0,k=0.0,w=0.0,M=0.0,R=0,q=0,F=0,P=0,T=0,L=0,I=0,W=0,E=0,O=0,U=0,H=0.0;d=b;A=_[e+48>>2]|0;O=_[A+8>>2]|0;p=e+108|0;_[p>>2]=O;E=_[e+52>>2]|0;I=_[E+8>>2]|0;f=e+112|0;_[f>>2]=I;T=A+28|0;L=_[T>>2]|0;T=_[T+4>>2]|0;R=e+140|0;_[R>>2]=L;_[R+4>>2]=T;R=E+28|0;P=_[R>>2]|0;R=_[R+4>>2]|0;F=e+148|0;_[F>>2]=P;_[F+4>>2]=R;F=e+156|0;s[F>>2]=+s[A+120>>2];R=e+160|0;s[R>>2]=+s[E+120>>2];q=e+164|0;s[q>>2]=+s[A+128>>2];A=e+168|0;s[A>>2]=+s[E+128>>2];E=_[t+24>>2]|0;u=E+(O*12|0)|0;J=+s[u>>2];D=+s[u+4>>2];n=+s[E+(O*12|0)+8>>2];u=t+28|0;W=_[u>>2]|0;U=W+(O*12|0)|0;g=+s[U>>2];v=+s[U+4>>2];o=+s[W+(O*12|0)+8>>2];O=E+(I*12|0)|0;C=+s[O>>2];M=+s[O+4>>2];k=+s[E+(I*12|0)+8>>2];E=W+(I*12|0)|0;h=+s[E>>2];r=+s[E+4>>2];c=+s[W+(I*12|0)+8>>2];m=+z(+n);n=+N(+n);B=+z(+k);k=+N(+k);w=+s[e+80>>2]-(_[a>>2]=L,+s[a>>2]);l=+s[e+84>>2]-(_[a>>2]=T,+s[a>>2]);y=n*w-m*l;l=m*w+n*l;n=+y;w=+l;T=e+124|0;s[T>>2]=n;s[T+4>>2]=w;w=+s[e+88>>2]-(_[a>>2]=P,+s[a>>2]);n=+s[e+92>>2]-+s[e+152>>2];m=k*w-B*n;n=B*w+k*n;k=+m;w=+n;P=e+132|0;s[P>>2]=k;s[P+4>>2]=w;P=e+116|0;J=C+m-J-y;D=M+n-D-l;M=+J;C=+D;T=P;s[T>>2]=M;s[T+4>>2]=C;C=+V(+(J*J+D*D));if(C>.004999999888241291){M=1.0/C;J=J*M;s[P>>2]=J;D=M*D}else{s[P>>2]=0.0;D=0.0;J=0.0}s[e+120>>2]=D;M=D*y-l*J;B=D*m-J*n;x=+s[F>>2];G=+s[q>>2];j=+s[R>>2];S=+s[A>>2];B=j+(x+M*M*G)+B*B*S;if(B!=0.0)M=1.0/B;else M=0.0;A=e+172|0;s[A>>2]=M;k=+s[e+68>>2];if(k>0.0){C=C-+s[e+104>>2];H=k*6.2831854820251465;w=H*M*H;k=+s[t>>2];M=k*(H*M*2.0*+s[e+72>>2]+w*k);R=e+96|0;s[R>>2]=M;if(M!=0.0)M=1.0/M;else M=0.0;s[R>>2]=M;s[e+76>>2]=w*C*k*M;C=B+M;if(C!=0.0)C=1.0/C;else C=0.0;s[A>>2]=C}else{s[e+96>>2]=0.0;s[e+76>>2]=0.0}if(!(i[t+20>>0]|0)){s[e+100>>2]=0.0;C=g;B=v;w=h;M=r;k=o;H=c;U=_[p>>2]|0;O=_[u>>2]|0;U=O+(U*12|0)|0;C=+C;B=+B;O=U;s[O>>2]=C;U=U+4|0;s[U>>2]=B;U=_[p>>2]|0;O=_[u>>2]|0;U=O+(U*12|0)+8|0;s[U>>2]=k;U=_[f>>2]|0;U=O+(U*12|0)|0;w=+w;M=+M;O=U;s[O>>2]=w;U=U+4|0;s[U>>2]=M;U=_[f>>2]|0;O=_[u>>2]|0;U=O+(U*12|0)+8|0;s[U>>2]=H;b=d;return}else{U=e+100|0;C=+s[t+8>>2]*+s[U>>2];s[U>>2]=C;H=J*C;D=C*D;C=g-H*x;B=v-D*x;w=h+H*j;M=r+D*j;k=o-G*(D*y-H*l);H=c+S*(D*m-H*n);U=_[p>>2]|0;O=_[u>>2]|0;U=O+(U*12|0)|0;C=+C;B=+B;O=U;s[O>>2]=C;U=U+4|0;s[U>>2]=B;U=_[p>>2]|0;O=_[u>>2]|0;U=O+(U*12|0)+8|0;s[U>>2]=k;U=_[f>>2]|0;U=O+(U*12|0)|0;w=+w;M=+M;O=U;s[O>>2]=w;U=U+4|0;s[U>>2]=M;U=_[f>>2]|0;O=_[u>>2]|0;U=O+(U*12|0)+8|0;s[U>>2]=H;b=d;return}}function Av(e,t){e=e|0;t=t|0;var n=0,i=0,r=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0,d=0.0,y=0.0,l=0.0,m=0,h=0.0,v=0.0,g=0.0,J=0.0,D=0,x=0.0,G=0.0,j=0,A=0;n=b;a=e+108|0;D=_[a>>2]|0;i=t+28|0;j=_[i>>2]|0;m=j+(D*12|0)|0;t=m;l=+s[t>>2];h=+s[t+4>>2];J=+s[j+(D*12|0)+8>>2];t=e+112|0;D=_[t>>2]|0;A=j+(D*12|0)|0;f=+s[A>>2];u=+s[A+4>>2];g=+s[j+(D*12|0)+8>>2];d=+s[e+128>>2];o=+s[e+124>>2];r=+s[e+136>>2];v=+s[e+132>>2];c=+s[e+116>>2];y=+s[e+120>>2];D=e+100|0;G=+s[D>>2];x=+s[e+172>>2]*(+s[e+76>>2]+(c*(f-g*r-(l-J*d))+y*(u+g*v-(h+J*o)))+ +s[e+96>>2]*G);p=-x;s[D>>2]=G-x;c=c*p;p=y*p;y=+s[e+156>>2];d=J-+s[e+164>>2]*(o*p-c*d);o=+s[e+160>>2];r=g+ +s[e+168>>2]*(p*v-c*r);l=+(l-y*c);y=+(h-y*p);e=m;s[e>>2]=l;s[e+4>>2]=y;e=_[i>>2]|0;s[e+((_[a>>2]|0)*12|0)+8>>2]=d;c=+(f+c*o);o=+(u+p*o);e=e+((_[t>>2]|0)*12|0)|0;s[e>>2]=c;s[e+4>>2]=o;s[(_[i>>2]|0)+((_[t>>2]|0)*12|0)+8>>2]=r;b=n;return}function Sv(e,t){e=e|0;t=t|0;var n=0,i=0,r=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0.0,d=0.0,y=0,l=0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0,x=0,G=0,j=0.0,A=0.0,S=0.0;n=b;if(+s[e+68>>2]>0.0){l=1;b=n;return l|0}i=e+108|0;l=_[i>>2]|0;y=t+24|0;x=_[y>>2]|0;t=x+(l*12|0)|0;D=t;a=+s[D>>2];d=+s[D+4>>2];r=+s[x+(l*12|0)+8>>2];l=e+112|0;D=_[l>>2]|0;G=x+(D*12|0)|0;m=+s[G>>2];h=+s[G+4>>2];p=+s[x+(D*12|0)+8>>2];u=+z(+r);v=+N(+r);J=+z(+p);g=+N(+p);f=+s[e+80>>2]-+s[e+140>>2];c=+s[e+84>>2]-+s[e+144>>2];o=v*f-u*c;c=u*f+v*c;v=+s[e+88>>2]-+s[e+148>>2];f=+s[e+92>>2]-+s[e+152>>2];u=g*v-J*f;f=J*v+g*f;g=m+u-a-o;v=h+f-d-c;J=+V(+(g*g+v*v));if(J<1.1920928955078125e-7)J=0.0;else{j=1.0/J;g=g*j;v=v*j}J=J-+s[e+104>>2];J=J<.20000000298023224?J:.20000000298023224;J=J<-.20000000298023224?-.20000000298023224:J;S=-(+s[e+172>>2]*J);A=g*S;g=v*S;S=+s[e+156>>2];v=r-+s[e+164>>2]*(o*g-c*A);c=+s[e+160>>2];j=p+ +s[e+168>>2]*(u*g-f*A);a=+(a-S*A);d=+(d-S*g);G=t;s[G>>2]=a;s[G+4>>2]=d;G=_[y>>2]|0;s[G+((_[i>>2]|0)*12|0)+8>>2]=v;v=+(m+c*A);g=+(h+c*g);G=G+((_[l>>2]|0)*12|0)|0;s[G>>2]=v;s[G+4>>2]=g;s[(_[y>>2]|0)+((_[l>>2]|0)*12|0)+8>>2]=j;if(!(J>0.0))J=-J;G=J<.004999999888241291;b=n;return G|0}function Cv(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+48>>2]|0;c=+s[p+24>>2];o=+s[t+80>>2];r=+s[p+20>>2];i=+s[t+84>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function Bv(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+52>>2]|0;c=+s[p+24>>2];o=+s[t+88>>2];r=+s[p+20>>2];i=+s[t+92>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function kv(e,t,n){e=e|0;t=t|0;n=+n;var i=0.0;i=+s[t+100>>2]*n;n=i*+s[t+120>>2];s[e>>2]=+s[t+116>>2]*i;s[e+4>>2]=n;return}function wv(e,t){e=e|0;t=+t;return 0.0}function Mv(e){e=e|0;var t=0,n=0,i=0,r=0.0,c=0;t=b;b=b+16|0;n=t;c=_[(_[e+48>>2]|0)+8>>2]|0;i=_[(_[e+52>>2]|0)+8>>2]|0;Bj(14816,n);_[n>>2]=c;Bj(17784,n);_[n>>2]=i;Bj(17816,n);_[n>>2]=o[e+61>>0];Bj(17848,n);r=+s[e+84>>2];u[a>>3]=+s[e+80>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17888,n);r=+s[e+92>>2];u[a>>3]=+s[e+88>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17936,n);u[a>>3]=+s[e+104>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(14848,n);u[a>>3]=+s[e+68>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(18120,n);u[a>>3]=+s[e+72>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(18152,n);_[n>>2]=_[e+56>>2];Bj(18184,n);b=t;return}function Rv(e){e=e|0;return}function qv(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function Fv(e,t){e=e|0;t=t|0;var n=0.0,r=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0,d=0,y=0,l=0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0.0,A=0.0,S=0.0,C=0.0,B=0,k=0.0,w=0,M=0,R=0,q=0,F=0,P=0,T=0,L=0,I=0.0,W=0.0;l=b;d=_[e+48>>2]|0;T=_[d+8>>2]|0;f=e+104|0;_[f>>2]=T;P=_[e+52>>2]|0;q=_[P+8>>2]|0;y=e+108|0;_[y>>2]=q;M=d+28|0;R=_[M>>2]|0;M=_[M+4>>2]|0;B=e+128|0;_[B>>2]=R;_[B+4>>2]=M;B=P+28|0;w=_[B>>2]|0;B=_[B+4>>2]|0;F=e+136|0;_[F>>2]=w;_[F+4>>2]=B;m=+s[d+120>>2];s[e+144>>2]=m;h=+s[P+120>>2];s[e+148>>2]=h;v=+s[d+128>>2];s[e+152>>2]=v;D=+s[P+128>>2];s[e+156>>2]=D;P=_[t+24>>2]|0;G=+s[P+(T*12|0)+8>>2];d=t+28|0;F=_[d>>2]|0;L=F+(T*12|0)|0;g=+s[L>>2];r=+s[L+4>>2];p=+s[F+(T*12|0)+8>>2];A=+s[P+(q*12|0)+8>>2];P=F+(q*12|0)|0;o=+s[P>>2];c=+s[P+4>>2];u=+s[F+(q*12|0)+8>>2];x=+z(+G);G=+N(+G);C=+z(+A);A=+N(+A);k=+s[e+68>>2]-(_[a>>2]=R,+s[a>>2]);J=+s[e+72>>2]-(_[a>>2]=M,+s[a>>2]);n=G*k-x*J;J=x*k+G*J;G=+n;k=+J;M=e+112|0;s[M>>2]=G;s[M+4>>2]=k;k=+s[e+76>>2]-(_[a>>2]=w,+s[a>>2]);G=+s[e+80>>2]-(_[a>>2]=B,+s[a>>2]);x=A*k-C*G;G=C*k+A*G;A=+x;k=+G;B=e+120|0;s[B>>2]=A;s[B+4>>2]=k;k=m+h;A=k+J*v*J+G*D*G;C=v*n;j=D*x;S=-(J*C)-G*j;j=k+n*C+x*j;C=A*j-S*S;if(C!=0.0)C=1.0/C;k=-(S*C);s[e+160>>2]=j*C;s[e+164>>2]=k;s[e+168>>2]=k;s[e+172>>2]=A*C;j=v+D;if(j>0.0)j=1.0/j;s[e+176>>2]=j;B=e+84|0;if(!(i[t+20>>0]|0)){s[B>>2]=0.0;s[e+88>>2]=0.0;s[e+92>>2]=0.0;G=g;j=r;S=o;C=c;A=p;k=u;L=_[f>>2]|0;T=_[d>>2]|0;L=T+(L*12|0)|0;G=+G;j=+j;T=L;s[T>>2]=G;L=L+4|0;s[L>>2]=j;L=_[f>>2]|0;T=_[d>>2]|0;L=T+(L*12|0)+8|0;s[L>>2]=A;L=_[y>>2]|0;L=T+(L*12|0)|0;S=+S;C=+C;T=L;s[T>>2]=S;L=L+4|0;s[L>>2]=C;L=_[y>>2]|0;T=_[d>>2]|0;L=T+(L*12|0)+8|0;s[L>>2]=k;b=l;return}else{T=t+8|0;I=+s[T>>2];k=I*+s[B>>2];s[B>>2]=k;L=e+88|0;I=I*+s[L>>2];s[L>>2]=I;L=e+92|0;W=+s[T>>2]*+s[L>>2];s[L>>2]=W;g=g-m*k;j=r-m*I;S=o+h*k;C=c+h*I;A=p-v*(W+(I*n-k*J));k=u+D*(W+(I*x-k*G));L=_[f>>2]|0;T=_[d>>2]|0;L=T+(L*12|0)|0;G=+g;j=+j;T=L;s[T>>2]=G;L=L+4|0;s[L>>2]=j;L=_[f>>2]|0;T=_[d>>2]|0;L=T+(L*12|0)+8|0;s[L>>2]=A;L=_[y>>2]|0;L=T+(L*12|0)|0;S=+S;C=+C;T=L;s[T>>2]=S;L=L+4|0;s[L>>2]=C;L=_[y>>2]|0;T=_[d>>2]|0;L=T+(L*12|0)+8|0;s[L>>2]=k;b=l;return}}function Pv(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0,p=0,u=0.0,f=0.0,a=0.0,d=0,y=0.0,l=0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0,A=0.0,S=0.0,C=0.0,B=0.0,k=0,w=0;l=b;p=e+104|0;d=_[p>>2]|0;c=t+28|0;k=_[c>>2]|0;j=k+(d*12|0)|0;u=+s[j>>2];o=+s[j+4>>2];G=+s[k+(d*12|0)+8>>2];d=e+108|0;j=_[d>>2]|0;w=k+(j*12|0)|0;f=+s[w>>2];a=+s[w+4>>2];x=+s[k+(j*12|0)+8>>2];r=+s[e+144>>2];i=+s[e+148>>2];n=+s[e+152>>2];y=+s[e+156>>2];S=+s[t>>2];t=e+92|0;h=+s[t>>2];D=S*+s[e+100>>2];v=h-(x-G)*+s[e+176>>2];J=-D;D=v<D?v:D;D=D<J?J:D;s[t>>2]=D;h=D-h;G=G-n*h;h=x+y*h;x=+s[e+124>>2];D=+s[e+120>>2];J=+s[e+116>>2];v=+s[e+112>>2];B=J*G+(f-x*h-u);C=a+D*h-o-v*G;A=+s[e+164>>2]*B+ +s[e+172>>2]*C;t=e+84|0;j=t;g=+s[j>>2];m=+s[j+4>>2];C=g-(+s[e+160>>2]*B+ +s[e+168>>2]*C);s[t>>2]=C;j=e+88|0;A=+s[j>>2]-A;s[j>>2]=A;S=S*+s[e+96>>2];B=C*C+A*A;if(B>S*S){B=+V(+B);if(!(B<1.1920928955078125e-7)){B=1.0/B;C=C*B;s[t>>2]=C;A=A*B;s[j>>2]=A}C=S*C;s[t>>2]=C;A=S*A;s[j>>2]=A}B=C-g;C=A-m;S=+(u-r*B);A=+(o-r*C);w=(_[c>>2]|0)+((_[p>>2]|0)*12|0)|0;s[w>>2]=S;s[w+4>>2]=A;w=_[c>>2]|0;s[w+((_[p>>2]|0)*12|0)+8>>2]=G-n*(v*C-B*J);A=+(f+i*B);S=+(a+i*C);w=w+((_[d>>2]|0)*12|0)|0;s[w>>2]=A;s[w+4>>2]=S;s[(_[c>>2]|0)+((_[d>>2]|0)*12|0)+8>>2]=h+y*(C*D-B*x);b=l;return}function Tv(e,t){e=e|0;t=t|0;return 1}function Lv(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+48>>2]|0;c=+s[p+24>>2];o=+s[t+68>>2];r=+s[p+20>>2];i=+s[t+72>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function Iv(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+52>>2]|0;c=+s[p+24>>2];o=+s[t+76>>2];r=+s[p+20>>2];i=+s[t+80>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function Wv(e,t,n){e=e|0;t=t|0;n=+n;var i=0.0;i=+s[t+88>>2]*n;s[e>>2]=+s[t+84>>2]*n;s[e+4>>2]=i;return}function Ev(e,t){e=e|0;t=+t;return+(+s[e+92>>2]*t)}function Ov(e){e=e|0;var t=0,n=0,i=0,r=0.0,c=0;t=b;b=b+16|0;n=t;c=_[(_[e+48>>2]|0)+8>>2]|0;i=_[(_[e+52>>2]|0)+8>>2]|0;Bj(15136,n);_[n>>2]=c;Bj(17784,n);_[n>>2]=i;Bj(17816,n);_[n>>2]=o[e+61>>0];Bj(17848,n);r=+s[e+72>>2];u[a>>3]=+s[e+68>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17888,n);r=+s[e+80>>2];u[a>>3]=+s[e+76>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17936,n);u[a>>3]=+s[e+96>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(15168,n);u[a>>3]=+s[e+100>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(15200,n);_[n>>2]=_[e+56>>2];Bj(18184,n);b=t;return}function Vv(e){e=e|0;return}function Uv(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function Nv(e,t){e=e|0;t=t|0;var n=0,r=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,d=0.0,y=0.0,l=0.0,m=0.0,h=0,v=0,g=0.0,J=0,D=0,x=0,G=0.0,j=0.0,A=0.0,S=0.0,C=0.0,B=0.0,k=0.0,w=0.0,M=0.0,R=0,q=0.0,F=0.0,P=0.0,T=0.0,L=0.0,I=0.0,W=0,E=0.0,O=0.0,V=0.0,U=0.0,H=0,Q=0,K=0,$=0,Z=0,Y=0,X=0,ee=0,te=0,ne=0,ie=0,re=0.0,_e=0.0,oe=0.0,ce=0.0,pe=0.0,se=0.0,ue=0.0,be=0.0,fe=0.0,ae=0.0;x=b;te=_[e+48>>2]|0;ee=_[te+8>>2]|0;h=e+160|0;_[h>>2]=ee;$=_[e+52>>2]|0;X=_[$+8>>2]|0;n=e+164|0;_[n>>2]=X;v=_[e+84>>2]|0;Y=_[v+8>>2]|0;J=e+168|0;_[J>>2]=Y;Z=_[e+88>>2]|0;R=_[Z+8>>2]|0;D=e+172|0;_[D>>2]=R;Q=e+176|0;ne=te+28|0;K=_[ne+4>>2]|0;W=Q;_[W>>2]=_[ne>>2];_[W+4>>2]=K;W=e+184|0;K=$+28|0;ne=_[K+4>>2]|0;H=W;_[H>>2]=_[K>>2];_[H+4>>2]=ne;H=e+192|0;ne=v+28|0;K=_[ne+4>>2]|0;ie=H;_[ie>>2]=_[ne>>2];_[ie+4>>2]=K;ie=Z+28|0;K=_[ie>>2]|0;ie=_[ie+4>>2]|0;ne=e+200|0;_[ne>>2]=K;_[ne+4>>2]=ie;G=+s[te+120>>2];s[e+208>>2]=G;j=+s[$+120>>2];s[e+212>>2]=j;A=+s[v+120>>2];s[e+216>>2]=A;S=+s[Z+120>>2];s[e+220>>2]=S;C=+s[te+128>>2];s[e+224>>2]=C;B=+s[$+128>>2];s[e+228>>2]=B;k=+s[v+128>>2];s[e+232>>2]=k;w=+s[Z+128>>2];s[e+236>>2]=w;Z=_[t+24>>2]|0;q=+s[Z+(ee*12|0)+8>>2];v=t+28|0;$=_[v>>2]|0;te=$+(ee*12|0)|0;M=+s[te>>2];g=+s[te+4>>2];d=+s[$+(ee*12|0)+8>>2];O=+s[Z+(X*12|0)+8>>2];ee=$+(X*12|0)|0;r=+s[ee>>2];o=+s[ee+4>>2];y=+s[$+(X*12|0)+8>>2];P=+s[Z+(Y*12|0)+8>>2];X=$+(Y*12|0)|0;c=+s[X>>2];p=+s[X+4>>2];l=+s[$+(Y*12|0)+8>>2];V=+s[Z+(R*12|0)+8>>2];Z=$+(R*12|0)|0;u=+s[Z>>2];f=+s[Z+4>>2];m=+s[$+(R*12|0)+8>>2];T=+z(+q);q=+N(+q);L=+z(+O);O=+N(+O);F=+z(+P);P=+N(+P);I=+z(+V);V=+N(+V);R=e+272|0;s[R>>2]=0.0;E=(_[a>>2]=K,+s[a>>2]);if((_[e+76>>2]|0)==1){s[e+240>>2]=0.0;s[e+244>>2]=0.0;s[e+256>>2]=1.0;s[e+264>>2]=1.0;U=C+k;T=0.0;q=0.0;P=1.0;F=1.0}else{pe=+s[e+124>>2];re=+s[e+128>>2];_e=P*pe-F*re;re=F*pe+P*re;pe=+s[e+108>>2]-+s[H>>2];ce=+s[e+112>>2]-+s[e+196>>2];oe=+s[e+92>>2]-+s[Q>>2];U=+s[e+96>>2]-+s[e+180>>2];ue=+_e;se=+re;ie=e+240|0;s[ie>>2]=ue;s[ie+4>>2]=se;F=re*(P*pe-F*ce)-_e*(F*pe+P*ce);s[e+264>>2]=F;P=re*(q*oe-T*U)-_e*(T*oe+q*U);s[e+256>>2]=P;U=A+G+F*k*F+P*C*P;T=_e;q=re}U=U+0.0;s[R>>2]=U;if((_[e+80>>2]|0)==1){s[e+248>>2]=0.0;s[e+252>>2]=0.0;I=+s[e+152>>2];s[e+260>>2]=I;s[e+268>>2]=I;V=I*I*(B+w);L=0.0;E=0.0;O=I}else{be=+s[e+132>>2];_e=+s[e+136>>2];oe=V*be-I*_e;_e=I*be+V*_e;be=+s[e+116>>2]-E;re=+s[e+120>>2]-+s[e+204>>2];ce=+s[e+100>>2]-+s[W>>2];pe=+s[e+104>>2]-+s[e+188>>2];se=+s[e+152>>2];ue=oe*se;E=_e*se;ae=+ue;fe=+E;ie=e+248|0;s[ie>>2]=ae;s[ie+4>>2]=fe;I=(_e*(V*be-I*re)-oe*(I*be+V*re))*se;s[e+268>>2]=I;O=se*(_e*(O*ce-L*pe)-oe*(L*ce+O*pe));s[e+260>>2]=O;V=se*se*(S+j)+I*w*I+O*O*B;L=ue}V=U+V;s[R>>2]=V;if(V>0.0)V=1.0/V;else V=0.0;s[R>>2]=V;R=e+156|0;if(!(i[t+20>>0]|0)){s[R>>2]=0.0;V=M;U=g;_e=r;oe=o;pe=c;se=p;be=u;fe=f;re=d;ce=y;ue=l;ae=m;ie=_[h>>2]|0;ne=_[v>>2]|0;ie=ne+(ie*12|0)|0;V=+V;U=+U;ne=ie;s[ne>>2]=V;ie=ie+4|0;s[ie>>2]=U;ie=_[h>>2]|0;ne=_[v>>2]|0;ie=ne+(ie*12|0)+8|0;s[ie>>2]=re;ie=_[n>>2]|0;ie=ne+(ie*12|0)|0;_e=+_e;oe=+oe;ne=ie;s[ne>>2]=_e;ie=ie+4|0;s[ie>>2]=oe;ie=_[n>>2]|0;ne=_[v>>2]|0;ie=ne+(ie*12|0)+8|0;s[ie>>2]=ce;ie=_[J>>2]|0;ie=ne+(ie*12|0)|0;pe=+pe;se=+se;ne=ie;s[ne>>2]=pe;ie=ie+4|0;s[ie>>2]=se;ie=_[J>>2]|0;ne=_[v>>2]|0;ie=ne+(ie*12|0)+8|0;s[ie>>2]=ue;ie=_[D>>2]|0;ie=ne+(ie*12|0)|0;be=+be;fe=+fe;ne=ie;s[ne>>2]=be;ie=ie+4|0;s[ie>>2]=fe;ie=_[D>>2]|0;ne=_[v>>2]|0;ie=ne+(ie*12|0)+8|0;s[ie>>2]=ae;b=x;return}else{ae=+s[R>>2];U=G*ae;oe=ae*j;se=ae*A;fe=ae*S;V=M+T*U;U=g+U*q;_e=r+L*oe;oe=o+oe*E;pe=c-T*se;se=p-q*se;be=u-L*fe;fe=f-E*fe;re=d+ae*C*P;ce=y+ae*B*O;ue=l-ae*k*F;ae=m-ae*w*I;ie=_[h>>2]|0;ne=_[v>>2]|0;ie=ne+(ie*12|0)|0;V=+V;U=+U;ne=ie;s[ne>>2]=V;ie=ie+4|0;s[ie>>2]=U;ie=_[h>>2]|0;ne=_[v>>2]|0;ie=ne+(ie*12|0)+8|0;s[ie>>2]=re;ie=_[n>>2]|0;ie=ne+(ie*12|0)|0;_e=+_e;oe=+oe;ne=ie;s[ne>>2]=_e;ie=ie+4|0;s[ie>>2]=oe;ie=_[n>>2]|0;ne=_[v>>2]|0;ie=ne+(ie*12|0)+8|0;s[ie>>2]=ce;ie=_[J>>2]|0;ie=ne+(ie*12|0)|0;pe=+pe;se=+se;ne=ie;s[ne>>2]=pe;ie=ie+4|0;s[ie>>2]=se;ie=_[J>>2]|0;ne=_[v>>2]|0;ie=ne+(ie*12|0)+8|0;s[ie>>2]=ue;ie=_[D>>2]|0;ie=ne+(ie*12|0)|0;be=+be;fe=+fe;ne=ie;s[ne>>2]=be;ie=ie+4|0;s[ie>>2]=fe;ie=_[D>>2]|0;ne=_[v>>2]|0;ie=ne+(ie*12|0)+8|0;s[ie>>2]=ae;b=x;return}}function zv(e,t){e=e|0;t=t|0;var n=0,i=0,r=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0,d=0.0,y=0.0,l=0.0,m=0.0,h=0.0,v=0.0,g=0,J=0.0,D=0.0,x=0.0,G=0.0,j=0,A=0.0,S=0.0,C=0.0,B=0.0,k=0.0,w=0.0,M=0,R=0,q=0;n=b;j=e+160|0;g=_[j>>2]|0;i=t+28|0;R=_[i>>2]|0;a=R+(g*12|0)|0;C=+s[a>>2];B=+s[a+4>>2];D=+s[R+(g*12|0)+8>>2];g=e+164|0;a=_[g>>2]|0;t=R+(a*12|0)|0;x=+s[t>>2];G=+s[t+4>>2];y=+s[R+(a*12|0)+8>>2];a=e+168|0;t=_[a>>2]|0;M=R+(t*12|0)|0;v=+s[M>>2];h=+s[M+4>>2];o=+s[R+(t*12|0)+8>>2];t=e+172|0;M=_[t>>2]|0;q=R+(M*12|0)|0;f=+s[q>>2];u=+s[q+4>>2];w=+s[R+(M*12|0)+8>>2];l=+s[e+240>>2];m=+s[e+244>>2];c=+s[e+248>>2];p=+s[e+252>>2];A=+s[e+256>>2];d=+s[e+264>>2];J=+s[e+260>>2];r=+s[e+268>>2];S=+s[e+272>>2]*((C-v)*l+(B-h)*m+((x-f)*c+(G-u)*p)+(D*A-o*d+(y*J-w*r)));k=-S;M=e+156|0;s[M>>2]=+s[M>>2]-S;S=+s[e+208>>2]*k;A=D+ +s[e+224>>2]*k*A;D=+s[e+212>>2]*k;J=y+ +s[e+228>>2]*k*J;y=+s[e+216>>2]*k;d=o-+s[e+232>>2]*k*d;o=+s[e+220>>2]*k;r=w-+s[e+236>>2]*k*r;C=+(C+l*S);S=+(B+m*S);e=(_[i>>2]|0)+((_[j>>2]|0)*12|0)|0;s[e>>2]=C;s[e+4>>2]=S;e=_[i>>2]|0;s[e+((_[j>>2]|0)*12|0)+8>>2]=A;x=+(x+c*D);D=+(G+D*p);e=e+((_[g>>2]|0)*12|0)|0;s[e>>2]=x;s[e+4>>2]=D;e=_[i>>2]|0;s[e+((_[g>>2]|0)*12|0)+8>>2]=J;l=+(v-l*y);y=+(h-m*y);e=e+((_[a>>2]|0)*12|0)|0;s[e>>2]=l;s[e+4>>2]=y;e=_[i>>2]|0;s[e+((_[a>>2]|0)*12|0)+8>>2]=d;c=+(f-c*o);o=+(u-p*o);e=e+((_[t>>2]|0)*12|0)|0;s[e>>2]=c;s[e+4>>2]=o;s[(_[i>>2]|0)+((_[t>>2]|0)*12|0)+8>>2]=r;b=n;return}function Hv(e,t){e=e|0;t=t|0;var n=0,i=0,r=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0,d=0.0,y=0.0,l=0,m=0,h=0.0,v=0.0,g=0,J=0.0,D=0.0,x=0.0,G=0.0,j=0.0,A=0.0,S=0.0,C=0.0,B=0.0,k=0.0,w=0.0,M=0.0,R=0.0,q=0.0,F=0.0,P=0.0,T=0.0,L=0.0,I=0.0,W=0.0,E=0,O=0,V=0,U=0.0,H=0.0,Q=0.0,K=0.0,$=0.0,Z=0.0,Y=0.0;i=b;n=e+160|0;a=_[n>>2]|0;l=t+24|0;O=_[l>>2]|0;g=O+(a*12|0)|0;t=g;D=+s[t>>2];J=+s[t+4>>2];v=+s[O+(a*12|0)+8>>2];t=e+164|0;a=_[t>>2]|0;m=O+(a*12|0)|0;o=+s[m>>2];c=+s[m+4>>2];p=+s[O+(a*12|0)+8>>2];a=e+168|0;m=_[a>>2]|0;E=O+(m*12|0)|0;u=+s[E>>2];f=+s[E+4>>2];d=+s[O+(m*12|0)+8>>2];m=e+172|0;E=_[m>>2]|0;V=O+(E*12|0)|0;y=+s[V>>2];r=+s[V+4>>2];h=+s[O+(E*12|0)+8>>2];x=+z(+v);G=+N(+v);M=+z(+p);R=+N(+p);w=+z(+d);q=+N(+d);k=+z(+h);B=+N(+h);if((_[e+76>>2]|0)==1){W=+s[e+224>>2];q=+s[e+232>>2];S=0.0;C=0.0;j=W;x=q;A=1.0;G=1.0;w=v-d-+s[e+140>>2];q=W+q}else{K=+s[e+124>>2];H=+s[e+128>>2];S=q*K-w*H;C=w*K+q*H;Q=+s[e+108>>2]-+s[e+192>>2];P=+s[e+112>>2]-+s[e+196>>2];T=+s[e+92>>2]-+s[e+176>>2];U=+s[e+96>>2]-+s[e+180>>2];F=G*T-x*U;U=x*T+G*U;T=C*(q*Q-w*P)-S*(w*Q+q*P);W=C*F-S*U;L=+s[e+232>>2];I=+s[e+224>>2];F=D-u+F;U=J-f+U;j=I;x=L;A=W;G=T;w=K*(q*F+w*U-Q)+H*(q*U-w*F-P);q=+s[e+216>>2]+ +s[e+208>>2]+T*T*L+W*I*W}if((_[e+80>>2]|0)==1){M=+s[e+152>>2];L=+s[e+228>>2];R=+s[e+236>>2];W=M*M*(L+R);I=M;F=0.0;P=0.0;T=M;B=p-h-+s[e+144>>2]}else{Z=+s[e+132>>2];U=+s[e+136>>2];F=B*Z-k*U;Y=k*Z+B*U;$=+s[e+116>>2]-+s[e+200>>2];K=+s[e+120>>2]-+s[e+204>>2];P=+s[e+100>>2]-+s[e+184>>2];H=+s[e+104>>2]-+s[e+188>>2];Q=R*P-M*H;H=M*P+R*H;P=+s[e+152>>2];M=P*(Y*(B*$-k*K)-F*(k*$+B*K));T=P*(Y*Q-F*H);R=+s[e+236>>2];L=+s[e+228>>2];Q=o-y+Q;H=c-r+H;W=P*P*(+s[e+220>>2]+ +s[e+212>>2])+M*M*R+T*L*T;I=P;F=F*P;P=Y*P;B=Z*(B*Q+k*H-$)+U*(B*H-k*Q-K)}k=q+0.0+W;if(k>0.0)B=-(w+B*I-+s[e+148>>2])/k;else B=0.0;K=B*+s[e+208>>2];$=B*+s[e+212>>2];Z=B*+s[e+216>>2];Y=B*+s[e+220>>2];Q=+(D+S*K);K=+(J+C*K);V=g;s[V>>2]=Q;s[V+4>>2]=K;V=_[l>>2]|0;s[V+((_[n>>2]|0)*12|0)+8>>2]=v+A*B*j;K=+(o+F*$);$=+(c+P*$);V=V+((_[t>>2]|0)*12|0)|0;s[V>>2]=K;s[V+4>>2]=$;V=_[l>>2]|0;s[V+((_[t>>2]|0)*12|0)+8>>2]=p+T*B*L;$=+(u-S*Z);Z=+(f-C*Z);V=V+((_[a>>2]|0)*12|0)|0;s[V>>2]=$;s[V+4>>2]=Z;V=_[l>>2]|0;s[V+((_[a>>2]|0)*12|0)+8>>2]=d-G*B*x;Z=+(y-F*Y);Y=+(r-P*Y);V=V+((_[m>>2]|0)*12|0)|0;s[V>>2]=Z;s[V+4>>2]=Y;s[(_[l>>2]|0)+((_[m>>2]|0)*12|0)+8>>2]=h-M*B*R;b=i;return 1}function Qv(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+48>>2]|0;c=+s[p+24>>2];o=+s[t+92>>2];r=+s[p+20>>2];i=+s[t+96>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function Kv(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+52>>2]|0;c=+s[p+24>>2];o=+s[t+100>>2];r=+s[p+20>>2];i=+s[t+104>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function $v(e,t,n){e=e|0;t=t|0;n=+n;var i=0.0,r=0.0;r=+s[t+156>>2];i=r*+s[t+244>>2]*n;s[e>>2]=r*+s[t+240>>2]*n;s[e+4>>2]=i;return}function Zv(e,t){e=e|0;t=+t;return+(+s[e+156>>2]*+s[e+256>>2]*t)}function Yv(e){e=e|0;var t=0,n=0,i=0,r=0,c=0,p=0;t=b;b=b+16|0;n=t;p=_[(_[e+48>>2]|0)+8>>2]|0;c=_[(_[e+52>>2]|0)+8>>2]|0;r=_[(_[e+68>>2]|0)+56>>2]|0;i=_[(_[e+72>>2]|0)+56>>2]|0;Bj(15568,n);_[n>>2]=p;Bj(17784,n);_[n>>2]=c;Bj(17816,n);_[n>>2]=o[e+61>>0];Bj(17848,n);_[n>>2]=r;Bj(15592,n);_[n>>2]=i;Bj(15624,n);u[a>>3]=+s[e+152>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(17048,n);_[n>>2]=_[e+56>>2];Bj(18184,n);b=t;return}function Xv(e){e=e|0;return}function eg(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function tg(e){e=e|0;e=b;b=b+16|0;Bj(15856,e);b=e;return}function ng(e){e=e|0;return}function ig(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function rg(e,t){e=e|0;t=t|0;var n=0.0,r=0,o=0,c=0,p=0,u=0.0,f=0.0,d=0.0,y=0.0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0,A=0,S=0,C=0,B=0;p=b;S=_[e+52>>2]|0;o=_[S+8>>2]|0;c=e+116|0;_[c>>2]=o;j=S+28|0;A=_[j>>2]|0;j=_[j+4>>2]|0;r=e+128|0;_[r>>2]=A;_[r+4>>2]=j;u=+s[S+120>>2];s[e+136>>2]=u;n=+s[S+128>>2];s[e+140>>2]=n;r=_[t+24>>2]|0;C=r+(o*12|0)|0;m=+s[C>>2];y=+s[C+4>>2];g=+s[r+(o*12|0)+8>>2];r=t+28|0;C=_[r>>2]|0;B=C+(o*12|0)|0;d=+s[B>>2];f=+s[B+4>>2];l=+s[C+(o*12|0)+8>>2];D=+z(+g);g=+N(+g);G=+s[S+116>>2];x=+s[e+84>>2]*6.2831854820251465;J=+s[t>>2];h=J*G*x*x;G=x*G*2.0*+s[e+88>>2]+h;x=(_[a>>2]=A,+s[a>>2]);v=(_[a>>2]=j,+s[a>>2]);if(!(G>1.1920928955078125e-7))Be(16232,15984,125,16272);J=J*G;if(J!=0.0)J=1.0/J;s[e+108>>2]=J;h=h*J;s[e+92>>2]=h;x=+s[e+68>>2]-x;G=+s[e+72>>2]-v;v=g*x-D*G;g=D*x+g*G;G=+v;x=+g;B=e+120|0;s[B>>2]=G;s[B+4>>2]=x;x=J+(u+g*n*g);G=n*v;D=g*G;J=J+(u+v*G);G=x*J-D*D;if(G!=0.0)G=1.0/G;D=D*G;s[e+144>>2]=J*G;s[e+148>>2]=D;s[e+152>>2]=D;s[e+156>>2]=x*G;j=e+160|0;G=m+v-+s[e+76>>2];y=y+g-+s[e+80>>2];D=+G;x=+y;B=j;s[B>>2]=D;s[B+4>>2]=x;s[j>>2]=h*G;s[e+164>>2]=h*y;y=l*.9800000190734863;j=e+96|0;if(!(i[t+20>>0]|0)){s[j>>2]=0.0;s[e+100>>2]=0.0;D=d;x=f;G=y;B=_[r>>2]|0;B=B+(o*12|0)|0;D=+D;x=+x;C=B;s[C>>2]=D;B=B+4|0;s[B>>2]=x;B=_[c>>2]|0;C=_[r>>2]|0;B=C+(B*12|0)+8|0;s[B>>2]=G;b=p;return}else{J=+s[t+8>>2];G=J*+s[j>>2];s[j>>2]=G;B=e+100|0;J=J*+s[B>>2];s[B>>2]=J;D=d+u*G;x=f+J*u;G=y+n*(J*v-G*g);B=_[r>>2]|0;B=B+(o*12|0)|0;D=+D;x=+x;C=B;s[C>>2]=D;B=B+4|0;s[B>>2]=x;B=_[c>>2]|0;C=_[r>>2]|0;B=C+(B*12|0)+8|0;s[B>>2]=G;b=p;return}}function _g(e,t){e=e|0;t=t|0;var n=0.0,i=0,r=0,o=0,c=0.0,p=0.0,u=0.0,f=0.0,a=0.0,d=0,y=0.0,l=0.0,m=0,h=0,v=0.0,g=0.0,J=0.0,D=0.0,x=0;d=b;i=e+116|0;h=_[i>>2]|0;r=t+28|0;m=_[r>>2]|0;o=m+(h*12|0)|0;x=o;p=+s[x>>2];c=+s[x+4>>2];a=+s[m+(h*12|0)+8>>2];u=+s[e+124>>2];f=+s[e+120>>2];v=+s[e+108>>2];h=e+96|0;D=+s[h>>2];m=e+100|0;l=+s[m>>2];g=-(p-a*u+ +s[e+160>>2]+v*D);v=-(c+a*f+ +s[e+164>>2]+v*l);J=+s[e+148>>2]*g+ +s[e+156>>2]*v;x=h;y=+s[x>>2];n=+s[x+4>>2];v=D+(+s[e+144>>2]*g+ +s[e+152>>2]*v);s[h>>2]=v;l=J+l;s[m>>2]=l;J=+s[t>>2]*+s[e+104>>2];g=l*l+v*v;if(g>J*J){D=J/+V(+g);v=v*D;s[h>>2]=v;l=D*l;s[m>>2]=l}g=v-y;v=l-n;J=+s[e+136>>2];D=a+ +s[e+140>>2]*(v*f-g*u);g=+(p+g*J);J=+(c+v*J);x=o;s[x>>2]=g;s[x+4>>2]=J;s[(_[r>>2]|0)+((_[i>>2]|0)*12|0)+8>>2]=D;b=d;return}function og(e,t){e=e|0;t=t|0;return 1}function cg(e,t){e=e|0;t=t|0;var n=0,i=0;i=t+76|0;n=_[i+4>>2]|0;t=e;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function pg(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+52>>2]|0;c=+s[p+24>>2];o=+s[t+68>>2];r=+s[p+20>>2];i=+s[t+72>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function sg(e,t,n){e=e|0;t=t|0;n=+n;var i=0.0;i=+s[t+100>>2]*n;s[e>>2]=+s[t+96>>2]*n;s[e+4>>2]=i;return}function ug(e,t){e=e|0;t=+t;return+(t*0.0)}function bg(e,t){e=e|0;t=t|0;var n=0;n=e+76|0;s[n>>2]=+s[n>>2]-+s[t>>2];e=e+80|0;s[e>>2]=+s[e>>2]-+s[t+4>>2];return}function fg(e){e=e|0;e=b;b=b+16|0;Bj(16328,e);b=e;return}function ag(e){e=e|0;return}function dg(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function yg(e,t){e=e|0;t=t|0;var n=0.0,r=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,d=0.0,y=0,l=0,m=0,h=0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0.0,A=0.0,S=0.0,C=0.0,B=0.0,k=0.0,w=0.0,M=0.0,R=0.0,q=0.0,F=0.0,P=0.0,T=0.0,L=0,I=0,W=0,E=0,O=0,V=0,U=0,H=0,Q=0,K=0,$=0.0,Z=0.0,Y=0.0;h=b;l=_[e+48>>2]|0;Q=_[l+8>>2]|0;y=e+144|0;_[y>>2]=Q;H=_[e+52>>2]|0;V=_[H+8>>2]|0;m=e+148|0;_[m>>2]=V;E=l+28|0;O=_[E>>2]|0;E=_[E+4>>2]|0;I=e+152|0;_[I>>2]=O;_[I+4>>2]=E;I=H+28|0;W=_[I>>2]|0;I=_[I+4>>2]|0;L=e+160|0;_[L>>2]=W;_[L+4>>2]=I;L=e+168|0;s[L>>2]=+s[l+120>>2];g=+s[H+120>>2];s[e+172>>2]=g;J=+s[l+128>>2];s[e+176>>2]=J;x=+s[H+128>>2];s[e+180>>2]=x;H=_[t+24>>2]|0;l=H+(Q*12|0)|0;B=+s[l>>2];M=+s[l+4>>2];T=+s[H+(Q*12|0)+8>>2];l=t+28|0;U=_[l>>2]|0;K=U+(Q*12|0)|0;o=+s[K>>2];c=+s[K+4>>2];f=+s[U+(Q*12|0)+8>>2];Q=H+(V*12|0)|0;G=+s[Q>>2];v=+s[Q+4>>2];r=+s[H+(V*12|0)+8>>2];H=U+(V*12|0)|0;p=+s[H>>2];u=+s[H+4>>2];d=+s[U+(V*12|0)+8>>2];A=+z(+T);T=+N(+T);n=+z(+r);r=+N(+r);D=+s[e+68>>2]-(_[a>>2]=O,+s[a>>2]);P=+s[e+72>>2]-(_[a>>2]=E,+s[a>>2]);S=T*D-A*P;P=A*D+T*P;D=+s[e+76>>2]-(_[a>>2]=W,+s[a>>2]);C=+s[e+80>>2]-(_[a>>2]=I,+s[a>>2]);F=r*D-n*C;C=n*D+r*C;B=G-B+F-S;M=v-M+C-P;v=+s[L>>2];G=+s[e+84>>2];r=+s[e+88>>2];D=T*G-A*r;r=A*G+T*r;G=+D;n=+r;L=e+184|0;s[L>>2]=G;s[L+4>>2]=n;S=S+B;P=P+M;n=S*r-P*D;s[e+208>>2]=n;G=F*r-C*D;s[e+212>>2]=G;q=v+g;k=J*n;w=x*G;R=q+n*k+G*w;if(R>0.0)j=1.0/R;else j=R;s[e+252>>2]=j;Y=+s[e+92>>2];Z=+s[e+96>>2];j=T*Y-A*Z;A=A*Y+T*Z;Z=+j;Y=+A;K=e+192|0;s[K>>2]=Z;s[K+4>>2]=Y;S=S*A-P*j;s[e+200>>2]=S;C=F*A-C*j;s[e+204>>2]=C;Y=J*S;Z=x*C;$=Y+Z;P=Y*n+Z*G;F=x+J;T=k+w;s[e+216>>2]=q+S*Y+C*Z;s[e+220>>2]=$;s[e+224>>2]=P;s[e+228>>2]=$;s[e+232>>2]=F==0.0?1.0:F;s[e+236>>2]=T;s[e+240>>2]=P;s[e+244>>2]=T;s[e+248>>2]=R;do{if(i[e+136>>0]|0){B=B*D+M*r;k=+s[e+124>>2];w=+s[e+120>>2];M=k-w;if(!(M>0.0))M=-M;if(M<.009999999776482582){_[e+140>>2]=3;break}if(B<=w){L=e+140|0;if((_[L>>2]|0)==1)break;_[L>>2]=1;s[e+112>>2]=0.0;break}L=e+140|0;if(!(B>=k)){_[L>>2]=0;s[e+112>>2]=0.0;break}if((_[L>>2]|0)!=2){_[L>>2]=2;s[e+112>>2]=0.0}}else{_[e+140>>2]=0;s[e+112>>2]=0.0}}while(0);if(!(i[e+137>>0]|0))s[e+116>>2]=0.0;L=e+104|0;if(!(i[t+20>>0]|0)){_[L+0>>2]=0;_[L+4>>2]=0;_[L+8>>2]=0;_[L+12>>2]=0;F=o;P=c;$=p;Z=u;T=f;Y=d;K=_[y>>2]|0;Q=_[l>>2]|0;K=Q+(K*12|0)|0;F=+F;P=+P;Q=K;s[Q>>2]=F;K=K+4|0;s[K>>2]=P;K=_[y>>2]|0;Q=_[l>>2]|0;K=Q+(K*12|0)+8|0;s[K>>2]=T;K=_[m>>2]|0;K=Q+(K*12|0)|0;$=+$;Z=+Z;Q=K;s[Q>>2]=$;K=K+4|0;s[K>>2]=Z;K=_[m>>2]|0;Q=_[l>>2]|0;K=Q+(K*12|0)+8|0;s[K>>2]=Y;b=h;return}else{Q=t+8|0;Y=+s[Q>>2];q=Y*+s[L>>2];s[L>>2]=q;K=e+108|0;R=Y*+s[K>>2];s[K>>2]=R;K=e+112|0;Y=Y*+s[K>>2];s[K>>2]=Y;K=e+116|0;$=+s[Q>>2]*+s[K>>2];s[K>>2]=$;Y=$+Y;$=q*j+D*Y;Z=q*A+Y*r;F=o-v*$;P=c-v*Z;$=p+g*$;Z=u+g*Z;T=f-J*(q*S+R+Y*n);Y=d+x*(R+q*C+Y*G);K=_[y>>2]|0;Q=_[l>>2]|0;K=Q+(K*12|0)|0;F=+F;P=+P;Q=K;s[Q>>2]=F;K=K+4|0;s[K>>2]=P;K=_[y>>2]|0;Q=_[l>>2]|0;K=Q+(K*12|0)+8|0;s[K>>2]=T;K=_[m>>2]|0;K=Q+(K*12|0)|0;$=+$;Z=+Z;Q=K;s[Q>>2]=$;K=K+4|0;s[K>>2]=Z;K=_[m>>2]|0;Q=_[l>>2]|0;K=Q+(K*12|0)+8|0;s[K>>2]=Y;b=h;return}}function lg(e,t){e=e|0;t=t|0;var n=0,r=0.0,o=0.0,c=0.0,p=0.0,u=0,f=0,a=0,d=0,y=0,l=0.0,m=0,h=0.0,v=0.0,g=0,J=0.0,D=0.0,x=0,G=0,j=0.0,A=0,S=0,C=0.0,B=0.0,k=0,w=0,M=0.0,R=0,q=0,F=0,P=0,T=0,L=0.0,I=0.0,W=0.0,E=0.0,O=0,V=0.0;n=b;b=b+48|0;d=n+28|0;g=n+16|0;y=n+8|0;S=n;u=e+144|0;a=_[u>>2]|0;f=t+28|0;T=_[f>>2]|0;O=T+(a*12|0)|0;J=+s[O>>2];h=+s[O+4>>2];D=+s[T+(a*12|0)+8>>2];a=e+148|0;O=_[a>>2]|0;P=T+(O*12|0)|0;v=+s[P>>2];l=+s[P+4>>2];j=+s[T+(O*12|0)+8>>2];r=+s[e+168>>2];o=+s[e+172>>2];c=+s[e+176>>2];p=+s[e+180>>2];if((i[e+137>>0]|0)!=0?(_[e+140>>2]|0)!=3:0){L=+s[e+184>>2];M=+s[e+188>>2];W=+s[e+212>>2];I=+s[e+208>>2];O=e+116|0;E=+s[O>>2];B=+s[t>>2]*+s[e+128>>2];V=E+ +s[e+252>>2]*(+s[e+132>>2]-((v-J)*L+(l-h)*M+j*W-D*I));C=-B;B=V<B?V:B;B=B<C?C:B;s[O>>2]=B;E=B-E;L=L*E;M=M*E;l=l+o*M;h=h-r*M;v=v+o*L;J=J-r*L;D=D-c*I*E;j=j+p*W*E}W=v-J;E=l-h;x=e+192|0;A=e+196|0;G=e+204|0;t=e+200|0;L=W*+s[x>>2]+E*+s[A>>2]+j*+s[G>>2]-D*+s[t>>2];I=j-D;if((i[e+136>>0]|0)!=0?(m=e+140|0,(_[m>>2]|0)!=0):0){F=e+184|0;T=e+188|0;S=e+212|0;P=e+208|0;R=e+104|0;C=+s[R>>2];q=e+108|0;B=+s[q>>2];w=e+112|0;M=+s[w>>2];k=e+216|0;L=-L;I=-I;W=-(W*+s[F>>2]+E*+s[T>>2]+j*+s[S>>2]-D*+s[P>>2]);s[g>>2]=L;s[g+4>>2]=I;s[g+8>>2]=W;jj(d,k,g);s[R>>2]=+s[d>>2]+ +s[R>>2];O=d+4|0;s[q>>2]=+s[O>>2]+ +s[q>>2];g=d+8|0;W=+s[g>>2]+ +s[w>>2];s[w>>2]=W;m=_[m>>2]|0;if((m|0)==1){W=W>0.0?W:0.0;s[w>>2]=W}else if((m|0)==2){W=W<0.0?W:0.0;s[w>>2]=W}E=W-M;Aj(y,k,L-+s[e+240>>2]*E,I-E*+s[e+244>>2]);L=C+ +s[y>>2];I=B+ +s[y+4>>2];s[R>>2]=L;s[q>>2]=I;L=L-C;I=I-B;E=+s[w>>2]-M;s[d>>2]=L;s[O>>2]=I;s[g>>2]=E;V=I+L*+s[G>>2]+E*+s[S>>2];W=L*+s[x>>2]+E*+s[F>>2];I=L*+s[t>>2]+I+E*+s[P>>2];E=L*+s[A>>2]+E*+s[T>>2];L=r*E;M=r*W;M=J-M;L=h-L;W=o*W;E=o*E;W=v+W;E=l+E;I=c*I;V=p*V;I=D-I;V=j+V;O=_[u>>2]|0;T=_[f>>2]|0;O=T+(O*12|0)|0;M=+M;L=+L;T=O;s[T>>2]=M;O=O+4|0;s[O>>2]=L;O=_[u>>2]|0;T=_[f>>2]|0;O=T+(O*12|0)+8|0;s[O>>2]=I;O=_[a>>2]|0;O=T+(O*12|0)|0;W=+W;E=+E;T=O;s[T>>2]=W;O=O+4|0;s[O>>2]=E;O=_[a>>2]|0;T=_[f>>2]|0;O=T+(O*12|0)+8|0;s[O>>2]=V;b=n;return}Aj(S,e+216|0,-L,-I);E=+s[S>>2];O=e+104|0;s[O>>2]=E+ +s[O>>2];I=+s[S+4>>2];O=e+108|0;s[O>>2]=I+ +s[O>>2];V=I+E*+s[G>>2];W=E*+s[x>>2];I=E*+s[t>>2]+I;E=E*+s[A>>2];L=r*E;M=r*W;M=J-M;L=h-L;W=o*W;E=o*E;W=v+W;E=l+E;I=c*I;V=p*V;I=D-I;V=j+V;O=_[u>>2]|0;T=_[f>>2]|0;O=T+(O*12|0)|0;M=+M;L=+L;T=O;s[T>>2]=M;O=O+4|0;s[O>>2]=L;O=_[u>>2]|0;T=_[f>>2]|0;O=T+(O*12|0)+8|0;s[O>>2]=I;O=_[a>>2]|0;O=T+(O*12|0)|0;W=+W;E=+E;T=O;s[T>>2]=W;O=O+4|0;s[O>>2]=E;O=_[a>>2]|0;T=_[f>>2]|0;O=T+(O*12|0)+8|0;s[O>>2]=V;b=n;return}function mg(e,t){e=e|0;t=t|0;var n=0,r=0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0.0,d=0.0,y=0.0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0,G=0.0,j=0.0,A=0.0,S=0.0,C=0,B=0.0,k=0,w=0.0,M=0,R=0.0,q=0.0,F=0.0,P=0.0,T=0.0,L=0.0,I=0.0,W=0,E=0,O=0,V=0.0,U=0.0,H=0.0;r=b;b=b+64|0;M=r+24|0;C=r+12|0;k=r;n=e+144|0;W=_[n>>2]|0;x=t+24|0;E=_[x>>2]|0;t=E+(W*12|0)|0;J=+s[t>>2];D=+s[t+4>>2];j=+s[E+(W*12|0)+8>>2];t=e+148|0;W=_[t>>2]|0;O=E+(W*12|0)|0;A=+s[O>>2];S=+s[O+4>>2];u=+s[E+(W*12|0)+8>>2];T=+z(+j);I=+N(+j);f=+z(+u);q=+N(+u);a=+s[e+168>>2];d=+s[e+172>>2];G=+s[e+176>>2];o=+s[e+180>>2];F=+s[e+68>>2]-+s[e+152>>2];y=+s[e+72>>2]-+s[e+156>>2];B=I*F-T*y;y=T*F+I*y;F=+s[e+76>>2]-+s[e+160>>2];l=+s[e+80>>2]-+s[e+164>>2];w=q*F-f*l;l=f*F+q*l;q=A+w-J-B;F=S+l-D-y;f=+s[e+84>>2];v=+s[e+88>>2];m=I*f-T*v;v=T*f+I*v;B=B+q;y=y+F;f=v*B-m*y;p=w*v-l*m;L=+s[e+92>>2];g=+s[e+96>>2];h=I*L-T*g;g=T*L+I*g;y=g*B-h*y;l=w*g-l*h;w=h*q+g*F;B=u-j-+s[e+100>>2];if(w>0.0)R=w;else R=-w;if(B>0.0)c=B;else c=-B;do{if(i[e+136>>0]|0){q=m*q+v*F;F=+s[e+124>>2];P=+s[e+120>>2];T=F-P;if(!(T>0.0))T=-T;if(T<.009999999776482582){F=q<.20000000298023224?q:.20000000298023224;if(!(q>0.0))q=-q;P=F<-.20000000298023224?-.20000000298023224:F;e=1;R=R>q?R:q;break}if(q<=P){L=q-P+.004999999888241291;L=L<0.0?L:0.0;I=P-q;P=L<-.20000000298023224?-.20000000298023224:L;e=1;R=R>I?R:I;break}if(q>=F){I=q-F;P=I+-.004999999888241291;P=P<.20000000298023224?P:.20000000298023224;P=P<0.0?0.0:P;e=1;R=R>I?R:I}else{P=0.0;e=0}}else{P=0.0;e=0}}while(0);T=a+d;L=G*y;I=o*l;q=l*I+(T+y*L);F=I+L;if(e){U=p*I+f*L;H=G+o;I=G*f;L=o*p;V=L+I;s[M>>2]=q;s[M+4>>2]=F;s[M+8>>2]=U;s[M+12>>2]=F;s[M+16>>2]=H==0.0?1.0:H;s[M+20>>2]=V;s[M+24>>2]=U;s[M+28>>2]=V;s[M+32>>2]=p*L+(T+f*I);s[k>>2]=-w;s[k+4>>2]=-B;s[k+8>>2]=-P;jj(C,M,k);B=+s[C>>2];P=+s[C+8>>2];w=+s[C+4>>2]}else{P=G+o;P=P==0.0?1.0:P;w=-w;T=-B;L=P*q-F*F;if(L!=0.0)L=1.0/L;B=(P*w-F*T)*L;P=0.0;w=(q*T-F*w)*L}U=m*P+h*B;H=v*P+g*B;I=+(J-a*U);V=+(D-a*H);O=(_[x>>2]|0)+((_[n>>2]|0)*12|0)|0;s[O>>2]=I;s[O+4>>2]=V;O=_[x>>2]|0;s[O+((_[n>>2]|0)*12|0)+8>>2]=j-G*(f*P+(w+y*B));U=+(A+d*U);H=+(S+d*H);O=O+((_[t>>2]|0)*12|0)|0;s[O>>2]=U;s[O+4>>2]=H;s[(_[x>>2]|0)+((_[t>>2]|0)*12|0)+8>>2]=u+o*(p*P+(w+l*B));if(!(R<=.004999999888241291)){O=0;b=r;return O|0}O=c<=.03490658849477768;b=r;return O|0}function hg(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+48>>2]|0;c=+s[p+24>>2];o=+s[t+68>>2];r=+s[p+20>>2];i=+s[t+72>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function vg(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+52>>2]|0;c=+s[p+24>>2];o=+s[t+76>>2];r=+s[p+20>>2];i=+s[t+80>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function gg(e,t,n){e=e|0;t=t|0;n=+n;var i=0.0,r=0.0,_=0.0;_=+s[t+104>>2];r=+s[t+116>>2]+ +s[t+112>>2];i=(_*+s[t+196>>2]+r*+s[t+188>>2])*n;s[e>>2]=(_*+s[t+192>>2]+ +s[t+184>>2]*r)*n;s[e+4>>2]=i;return}function Jg(e,t){e=e|0;t=+t;return+(+s[e+108>>2]*t)}function Dg(e){e=e|0;var t=0,n=0,i=0,r=0.0,c=0;t=b;b=b+16|0;n=t;c=_[(_[e+48>>2]|0)+8>>2]|0;i=_[(_[e+52>>2]|0)+8>>2]|0;Bj(16480,n);_[n>>2]=c;Bj(17784,n);_[n>>2]=i;Bj(17816,n);_[n>>2]=o[e+61>>0];Bj(17848,n);r=+s[e+72>>2];u[a>>3]=+s[e+68>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17888,n);r=+s[e+80>>2];u[a>>3]=+s[e+76>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17936,n);r=+s[e+88>>2];u[a>>3]=+s[e+84>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17984,n);u[a>>3]=+s[e+100>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(17640,n);_[n>>2]=o[e+136>>0];Bj(17280,n);u[a>>3]=+s[e+120>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(16512,n);u[a>>3]=+s[e+124>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(16552,n);_[n>>2]=o[e+137>>0];Bj(18024,n);u[a>>3]=+s[e+132>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(18056,n);u[a>>3]=+s[e+128>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(16592,n);_[n>>2]=_[e+56>>2];Bj(18184,n);b=t;return}function xg(e){e=e|0;return}function Gg(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function jg(e,t){e=e|0;t=t|0;var n=0.0,r=0.0,o=0.0,c=0.0,p=0.0,u=0,f=0,d=0,y=0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0,J=0,D=0.0,x=0.0,G=0,j=0,A=0,S=0.0,C=0.0,B=0,k=0.0,w=0.0,M=0,R=0.0,q=0.0,F=0.0,P=0.0,T=0,L=0,I=0,W=0,E=0,O=0,U=0.0;y=b;J=_[e+48>>2]|0;E=_[J+8>>2]|0;u=e+120|0;_[u>>2]=E;W=_[e+52>>2]|0;L=_[W+8>>2]|0;d=e+124|0;_[d>>2]=L;B=J+28|0;T=_[B>>2]|0;B=_[B+4>>2]|0;G=e+160|0;_[G>>2]=T;_[G+4>>2]=B;G=W+28|0;M=_[G>>2]|0;G=_[G+4>>2]|0;A=e+168|0;_[A>>2]=M;_[A+4>>2]=G;A=e+176|0;s[A>>2]=+s[J+120>>2];G=e+180|0;s[G>>2]=+s[W+120>>2];j=e+184|0;s[j>>2]=+s[J+128>>2];J=e+188|0;s[J>>2]=+s[W+128>>2];W=_[t+24>>2]|0;f=W+(E*12|0)|0;x=+s[f>>2];w=+s[f+4>>2];v=+s[W+(E*12|0)+8>>2];f=t+28|0;I=_[f>>2]|0;O=I+(E*12|0)|0;g=+s[O>>2];h=+s[O+4>>2];c=+s[I+(E*12|0)+8>>2];E=W+(L*12|0)|0;C=+s[E>>2];k=+s[E+4>>2];S=+s[W+(L*12|0)+8>>2];W=I+(L*12|0)|0;r=+s[W>>2];o=+s[W+4>>2];p=+s[I+(L*12|0)+8>>2];n=+z(+v);v=+N(+v);P=+z(+S);S=+N(+S);D=+s[e+92>>2]-(_[a>>2]=T,+s[a>>2]);m=+s[e+96>>2]-(_[a>>2]=B,+s[a>>2]);l=v*D-n*m;m=n*D+v*m;v=+l;D=+m;B=e+144|0;s[B>>2]=v;s[B+4>>2]=D;D=+s[e+100>>2]-(_[a>>2]=M,+s[a>>2]);v=+s[e+104>>2]-+s[e+172>>2];n=S*D-P*v;v=P*D+S*v;S=+n;D=+v;M=e+152|0;s[M>>2]=S;s[M+4>>2]=D;M=e+128|0;x=x+l-+s[e+68>>2];w=w+m-+s[e+72>>2];D=+x;S=+w;B=M;s[B>>2]=D;s[B+4>>2]=S;B=e+136|0;C=C+n-+s[e+76>>2];k=k+v-+s[e+80>>2];S=+C;D=+k;T=B;s[T>>2]=S;s[T+4>>2]=D;D=+V(+(x*x+w*w));S=+V(+(C*C+k*k));if(D>.04999999701976776){D=1.0/D;x=x*D;s[M>>2]=x;D=D*w}else{s[M>>2]=0.0;D=0.0;x=0.0}s[e+132>>2]=D;if(S>.04999999701976776){S=1.0/S;C=S*C;s[B>>2]=C;S=S*k}else{s[B>>2]=0.0;S=0.0;C=0.0}s[e+140>>2]=S;U=l*D-m*x;P=n*S-v*C;k=+s[A>>2];w=+s[j>>2];R=+s[G>>2];F=+s[J>>2];q=+s[e+112>>2];P=k+U*U*w+q*q*(R+P*P*F);if(P>0.0)P=1.0/P;s[e+192>>2]=P;if(!(i[t+20>>0]|0)){s[e+116>>2]=0.0;w=g;R=h;F=r;P=o;q=c;U=p;O=_[u>>2]|0;E=_[f>>2]|0;O=E+(O*12|0)|0;w=+w;R=+R;E=O;s[E>>2]=w;O=O+4|0;s[O>>2]=R;O=_[u>>2]|0;E=_[f>>2]|0;O=E+(O*12|0)+8|0;s[O>>2]=q;O=_[d>>2]|0;O=E+(O*12|0)|0;F=+F;P=+P;E=O;s[E>>2]=F;O=O+4|0;s[O>>2]=P;O=_[d>>2]|0;E=_[f>>2]|0;O=E+(O*12|0)+8|0;s[O>>2]=U;b=y;return}else{O=e+116|0;U=+s[t+8>>2]*+s[O>>2];s[O>>2]=U;P=-U;x=x*P;D=D*P;q=-(U*q);U=C*q;S=S*q;C=g+x*k;k=h+D*k;q=r+U*R;P=o+S*R;R=c+w*(D*l-x*m);U=p+F*(S*n-U*v);O=_[u>>2]|0;E=_[f>>2]|0;O=E+(O*12|0)|0;w=+C;F=+k;E=O;s[E>>2]=w;O=O+4|0;s[O>>2]=F;O=_[u>>2]|0;E=_[f>>2]|0;O=E+(O*12|0)+8|0;s[O>>2]=R;O=_[d>>2]|0;O=E+(O*12|0)|0;F=+q;P=+P;E=O;s[E>>2]=F;O=O+4|0;s[O>>2]=P;O=_[d>>2]|0;E=_[f>>2]|0;O=E+(O*12|0)+8|0;s[O>>2]=U;b=y;return}}function Ag(e,t){e=e|0;t=t|0;var n=0,i=0,r=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0,d=0.0,y=0.0,l=0.0,m=0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0,A=0,S=0;n=b;a=e+120|0;j=_[a>>2]|0;i=t+28|0;A=_[i>>2]|0;m=A+(j*12|0)|0;t=m;g=+s[t>>2];v=+s[t+4>>2];x=+s[A+(j*12|0)+8>>2];t=e+124|0;j=_[t>>2]|0;S=A+(j*12|0)|0;f=+s[S>>2];u=+s[S+4>>2];D=+s[A+(j*12|0)+8>>2];d=+s[e+148>>2];o=+s[e+144>>2];r=+s[e+156>>2];J=+s[e+152>>2];l=+s[e+128>>2];h=+s[e+132>>2];G=+s[e+112>>2];c=+s[e+136>>2];p=+s[e+140>>2];y=+s[e+192>>2]*(-((g-x*d)*l+(v+x*o)*h)-G*((f-D*r)*c+(u+D*J)*p));j=e+116|0;s[j>>2]=+s[j>>2]-y;l=l*y;h=h*y;y=G*y;c=c*y;p=y*p;y=+s[e+176>>2];d=x+ +s[e+184>>2]*(h*o-l*d);o=+s[e+180>>2];r=D+ +s[e+188>>2]*(p*J-c*r);l=+(g+l*y);y=+(v+h*y);e=m;s[e>>2]=l;s[e+4>>2]=y;e=_[i>>2]|0;s[e+((_[a>>2]|0)*12|0)+8>>2]=d;c=+(f+c*o);o=+(u+p*o);e=e+((_[t>>2]|0)*12|0)|0;s[e>>2]=c;s[e+4>>2]=o;s[(_[i>>2]|0)+((_[t>>2]|0)*12|0)+8>>2]=r;b=n;return}function Sg(e,t){e=e|0;t=t|0;var n=0,i=0,r=0.0,o=0.0,c=0.0,p=0.0,u=0,f=0.0,a=0,d=0.0,y=0.0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0.0,A=0.0,S=0.0,C=0.0,B=0.0,k=0.0,w=0,M=0,R=0,q=0.0;n=b;i=e+120|0;a=_[i>>2]|0;t=t+24|0;M=_[t>>2]|0;u=M+(a*12|0)|0;w=u;p=+s[w>>2];m=+s[w+4>>2];r=+s[M+(a*12|0)+8>>2];a=e+124|0;w=_[a>>2]|0;R=M+(w*12|0)|0;h=+s[R>>2];f=+s[R+4>>2];d=+s[M+(w*12|0)+8>>2];y=+z(+r);v=+N(+r);G=+z(+d);J=+N(+d);l=+s[e+92>>2]-+s[e+160>>2];c=+s[e+96>>2]-+s[e+164>>2];o=v*l-y*c;c=y*l+v*c;v=+s[e+100>>2]-+s[e+168>>2];l=+s[e+104>>2]-+s[e+172>>2];y=J*v-G*l;l=G*v+J*l;J=p+o-+s[e+68>>2];v=m+c-+s[e+72>>2];G=h+y-+s[e+76>>2];x=f+l-+s[e+80>>2];D=+V(+(J*J+v*v));g=+V(+(G*G+x*x));if(D>.04999999701976776){k=1.0/D;v=v*k;J=J*k}else{v=0.0;J=0.0}if(g>.04999999701976776){B=1.0/g;x=x*B;B=G*B}else{x=0.0;B=0.0}q=o*v-c*J;k=y*x-l*B;A=+s[e+176>>2];j=+s[e+184>>2];G=+s[e+180>>2];S=+s[e+188>>2];C=+s[e+112>>2];k=A+q*q*j+C*C*(G+k*k*S);if(k>0.0)k=1.0/k;g=+s[e+108>>2]-D-g*C;if(g>0.0)D=g;else D=-g;k=k*g;J=J*k;g=v*k;k=k*C;q=B*k;k=x*k;B=+(p+J*A);C=+(m+g*A);R=u;s[R>>2]=B;s[R+4>>2]=C;R=_[t>>2]|0;s[R+((_[i>>2]|0)*12|0)+8>>2]=r+(o*g-c*J)*j;C=+(h+q*G);B=+(f+k*G);R=R+((_[a>>2]|0)*12|0)|0;s[R>>2]=C;s[R+4>>2]=B;s[(_[t>>2]|0)+((_[a>>2]|0)*12|0)+8>>2]=d+S*(y*k-l*q);b=n;return D<.004999999888241291|0}function Cg(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+48>>2]|0;c=+s[p+24>>2];o=+s[t+92>>2];r=+s[p+20>>2];i=+s[t+96>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function Bg(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+52>>2]|0;c=+s[p+24>>2];o=+s[t+100>>2];r=+s[p+20>>2];i=+s[t+104>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function kg(e,t,n){e=e|0;t=t|0;n=+n;var i=0.0,r=0.0;r=+s[t+116>>2];i=r*+s[t+140>>2]*n;s[e>>2]=r*+s[t+136>>2]*n;s[e+4>>2]=i;return}function wg(e,t){e=e|0;t=+t;return 0.0}function Mg(e){e=e|0;var t=0,n=0,i=0,r=0.0,c=0;t=b;b=b+16|0;n=t;c=_[(_[e+48>>2]|0)+8>>2]|0;i=_[(_[e+52>>2]|0)+8>>2]|0;Bj(16864,n);_[n>>2]=c;Bj(17784,n);_[n>>2]=i;Bj(17816,n);_[n>>2]=o[e+61>>0];Bj(17848,n);r=+s[e+72>>2];u[a>>3]=+s[e+68>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(16888,n);r=+s[e+80>>2];u[a>>3]=+s[e+76>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(16936,n);r=+s[e+96>>2];u[a>>3]=+s[e+92>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17888,n);r=+s[e+104>>2];u[a>>3]=+s[e+100>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17936,n);u[a>>3]=+s[e+84>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(16984,n);u[a>>3]=+s[e+88>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(17016,n);u[a>>3]=+s[e+112>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(17048,n);_[n>>2]=_[e+56>>2];Bj(18184,n);b=t;return}function Rg(e,t){e=e|0;t=t|0;var n=0,i=0;n=e+68|0;s[n>>2]=+s[n>>2]-+s[t>>2];n=t+4|0;i=e+72|0;s[i>>2]=+s[i>>2]-+s[n>>2];i=e+76|0;s[i>>2]=+s[i>>2]-+s[t>>2];t=e+80|0;s[t>>2]=+s[t>>2]-+s[n>>2];return}function qg(e){e=e|0;return}function Fg(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function Pg(e,t){e=e|0;t=t|0;var n=0.0,r=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0,d=0,y=0,l=0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0.0,A=0.0,S=0.0,C=0,B=0.0,k=0.0,w=0.0,M=0,R=0,q=0,F=0,P=0,T=0,L=0,I=0,W=0.0,E=0.0,O=0.0;l=b;d=_[e+48>>2]|0;L=_[d+8>>2]|0;f=e+128|0;_[f>>2]=L;T=_[e+52>>2]|0;F=_[T+8>>2]|0;y=e+132|0;_[y>>2]=F;R=d+28|0;q=_[R>>2]|0;R=_[R+4>>2]|0;C=e+152|0;_[C>>2]=q;_[C+4>>2]=R;C=T+28|0;M=_[C>>2]|0;C=_[C+4>>2]|0;P=e+160|0;_[P>>2]=M;_[P+4>>2]=C;m=+s[d+120>>2];s[e+168>>2]=m;h=+s[T+120>>2];s[e+172>>2]=h;v=+s[d+128>>2];s[e+176>>2]=v;n=+s[T+128>>2];s[e+180>>2]=n;T=_[t+24>>2]|0;A=+s[T+(L*12|0)+8>>2];d=t+28|0;P=_[d>>2]|0;I=P+(L*12|0)|0;D=+s[I>>2];r=+s[I+4>>2];p=+s[P+(L*12|0)+8>>2];j=+s[T+(F*12|0)+8>>2];T=P+(F*12|0)|0;o=+s[T>>2];c=+s[T+4>>2];u=+s[P+(F*12|0)+8>>2];x=+z(+A);G=+N(+A);w=+z(+j);B=+N(+j);S=+s[e+68>>2]-(_[a>>2]=q,+s[a>>2]);J=+s[e+72>>2]-(_[a>>2]=R,+s[a>>2]);g=G*S-x*J;J=x*S+G*J;G=+g;S=+J;R=e+136|0;s[R>>2]=G;s[R+4>>2]=S;S=+s[e+76>>2]-(_[a>>2]=M,+s[a>>2]);G=+s[e+80>>2]-(_[a>>2]=C,+s[a>>2]);x=B*S-w*G;G=w*S+B*G;B=+x;S=+G;C=e+144|0;s[C>>2]=B;s[C+4>>2]=S;S=v+n;C=S==0.0;B=m+h;s[e+184>>2]=B+v*J*J+n*G*G;w=-(v*J*g)-n*G*x;s[e+196>>2]=w;k=-(v*J)-n*G;s[e+208>>2]=k;s[e+188>>2]=w;s[e+200>>2]=B+v*g*g+n*x*x;B=v*g+n*x;s[e+212>>2]=B;s[e+192>>2]=k;s[e+204>>2]=B;s[e+216>>2]=S;if(S>0.0)S=1.0/S;s[e+220>>2]=S;if((i[e+100>>0]|0)==0|C)s[e+96>>2]=0.0;do{if((i[e+112>>0]|0)==0|C)_[e+224>>2]=0;else{j=j-A-+s[e+116>>2];A=+s[e+124>>2];S=+s[e+120>>2];B=A-S;if(!(B>0.0))B=-B;if(B<.06981317698955536){_[e+224>>2]=3;break}if(j<=S){C=e+224|0;if((_[C>>2]|0)!=1)s[e+92>>2]=0.0;_[C>>2]=1;break}C=e+224|0;if(!(j>=A)){_[C>>2]=0;s[e+92>>2]=0.0;break}if((_[C>>2]|0)!=2)s[e+92>>2]=0.0;_[C>>2]=2}}while(0);C=e+84|0;if(!(i[t+20>>0]|0)){_[C+0>>2]=0;_[C+4>>2]=0;_[C+8>>2]=0;_[C+12>>2]=0;j=D;A=r;B=o;k=c;S=p;w=u;I=_[f>>2]|0;L=_[d>>2]|0;I=L+(I*12|0)|0;j=+j;A=+A;L=I;s[L>>2]=j;I=I+4|0;s[I>>2]=A;I=_[f>>2]|0;L=_[d>>2]|0;I=L+(I*12|0)+8|0;s[I>>2]=S;I=_[y>>2]|0;I=L+(I*12|0)|0;B=+B;k=+k;L=I;s[L>>2]=B;I=I+4|0;s[I>>2]=k;I=_[y>>2]|0;L=_[d>>2]|0;I=L+(I*12|0)+8|0;s[I>>2]=w;b=l;return}else{L=t+8|0;O=+s[L>>2];w=O*+s[C>>2];s[C>>2]=w;I=e+88|0;W=O*+s[I>>2];s[I>>2]=W;I=e+92|0;O=O*+s[I>>2];s[I>>2]=O;I=e+96|0;E=+s[L>>2]*+s[I>>2];s[I>>2]=E;j=D-m*w;A=r-m*W;B=o+h*w;k=c+h*W;S=p-v*(O+(E+(W*g-w*J)));w=u+n*(O+(E+(W*x-w*G)));I=_[f>>2]|0;L=_[d>>2]|0;I=L+(I*12|0)|0;j=+j;A=+A;L=I;s[L>>2]=j;I=I+4|0;s[I>>2]=A;I=_[f>>2]|0;L=_[d>>2]|0;I=L+(I*12|0)+8|0;s[I>>2]=S;I=_[y>>2]|0;I=L+(I*12|0)|0;B=+B;k=+k;L=I;s[L>>2]=B;I=I+4|0;s[I>>2]=k;I=_[y>>2]|0;L=_[d>>2]|0;I=L+(I*12|0)+8|0;s[I>>2]=w;b=l;return}}function Tg(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,c=0,p=0;n=b;i=e+88|0;o=_[i>>2]|0;if(_[o+102868>>2]&2)Be(9352,9088,456,9576);c=e+4|0;p=r[c>>1]|0;if(!((p&32)!=0^t)){b=n;return}p=p&65535;if(t){r[c>>1]=p|32;i=o+102872|0;o=_[e+100>>2]|0;if(!o){b=n;return}e=e+12|0;do{nA(o,i,e);o=_[o+4>>2]|0}while((o|0)!=0);b=n;return}r[c>>1]=p&65503;o=o+102872|0;t=_[e+100>>2]|0;if(t)do{iA(t,o);t=_[t+4>>2]|0}while((t|0)!=0);e=e+112|0;o=_[e>>2]|0;if(o)do{p=o;o=_[o+12>>2]|0;Ij((_[i>>2]|0)+102872|0,_[p+4>>2]|0)}while((o|0)!=0);_[e>>2]=0;b=n;return}function Lg(e){e=e|0;return(r[e+4>>1]&32)!=0|0}function Ig(e,t){e=e|0;t=t|0;var n=0,i=0,_=0;n=b;_=e+4|0;i=c[_>>1]|0;if(!((i&16|0)!=0^t)){b=n;return}r[_>>1]=t?i|16:i&65519;s[e+72>>2]=0.0;Mj(e);b=n;return}function Wg(e){e=e|0;return(r[e+4>>1]&16)!=0|0}function Eg(e){e=e|0;return _[e+100>>2]|0}function Og(e){e=e|0;return _[e+108>>2]|0}function Vg(e){e=e|0;return _[e+112>>2]|0}function Ug(e){e=e|0;return _[e+96>>2]|0}function Ng(e){e=e|0;return _[e+148>>2]|0}function zg(e,t){e=e|0;t=t|0;_[e+148>>2]=t;return}function Hg(e){e=e|0;return _[e+88>>2]|0}function Qg(e){e=e|0;var t=0;t=b;Pj(e);b=t;return}function Kg(e){e=e|0;return e+68|0}function $g(e){e=e|0;return e+76|0}function Zg(e,t){e=e|0;t=+t;var n=0;n=b;if(((s[a>>2]=t,_[a>>2]|0)&2139095040|0)!=2139095040&t>=0.0){s[e+96>>2]=t;b=n;return}else Be(14968,15008,217,15064)}function Yg(e){e=e|0;return+ +s[e+96>>2]}function Xg(e,t){e=e|0;t=+t;var n=0;n=b;if(((s[a>>2]=t,_[a>>2]|0)&2139095040|0)!=2139095040&t>=0.0){s[e+100>>2]=t;b=n;return}else Be(15080,15008,228,15120)}function eJ(e){e=e|0;return+ +s[e+100>>2]}function tJ(e){e=e|0;return _[e+4>>2]|0}function nJ(e){e=e|0;return _[e+48>>2]|0}function iJ(e){e=e|0;return _[e+52>>2]|0}function rJ(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[816]|0)==0?(je(816)|0)!=0:0)Me(816);lq[_[_[e>>2]>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=808;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 808}function _J(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[832]|0)==0?(je(832)|0)!=0:0)Me(832);lq[_[(_[e>>2]|0)+4>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=824;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 824}function oJ(e,t){e=e|0;t=+t;var n=0,r=0,o=0;r=b;b=b+16|0;n=r;if((i[848]|0)==0?(je(848)|0)!=0:0)Me(848);Dq[_[(_[e>>2]|0)+8>>2]&63](n,e,t);o=n;e=_[o+4>>2]|0;n=840;_[n>>2]=_[o>>2];_[n+4>>2]=e;b=r;return 840}function cJ(e,t){e=e|0;t=+t;var n=0;n=b;t=+aq[_[(_[e>>2]|0)+12>>2]&63](e,t);b=n;return+t}function pJ(e){e=e|0;return _[e+12>>2]|0}function sJ(e){e=e|0;return _[e+64>>2]|0}function uJ(e,t){e=e|0;t=t|0;_[e+64>>2]=t;return}function bJ(e){e=e|0;var t=0;t=b;if(!(r[(_[e+48>>2]|0)+4>>1]&32)){e=0;b=t;return e|0}e=(r[(_[e+52>>2]|0)+4>>1]&32)!=0;b=t;return e|0}function fJ(e){e=e|0;return(i[e+61>>0]|0)!=0|0}function aJ(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+28>>2]&127](e);b=t;return}function dJ(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function yJ(){var e=0,t=0;e=b;t=kS(32)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(32)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;i[t+16>>0]=0;_[t>>2]=6;_[t+20>>2]=0;_[t+24>>2]=0;s[t+28>>2]=1.0;b=e;return t|0}function lJ(e){e=e|0;return _[e+20>>2]|0}function mJ(e,t){e=e|0;t=t|0;_[e+20>>2]=t;return}function hJ(e){e=e|0;return _[e+24>>2]|0}function vJ(e,t){e=e|0;t=t|0;_[e+24>>2]=t;return}function gJ(e){e=e|0;return+ +s[e+28>>2]}function JJ(e,t){e=e|0;t=+t;s[e+28>>2]=t;return}function DJ(e){e=e|0;return _[e>>2]|0}function xJ(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function GJ(e){e=e|0;return _[e+4>>2]|0}function jJ(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function AJ(e){e=e|0;return _[e+8>>2]|0}function SJ(e,t){e=e|0;t=t|0;_[e+8>>2]=t;return}function CJ(e){e=e|0;return _[e+12>>2]|0}function BJ(e,t){e=e|0;t=t|0;_[e+12>>2]=t;return}function kJ(e){e=e|0;return(i[e+16>>0]|0)!=0|0}function wJ(e,t){e=e|0;t=t|0;i[e+16>>0]=t&1;return}function MJ(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function RJ(e){e=e|0;return e+68|0}function qJ(e){e=e|0;return e+76|0}function FJ(e){e=e|0;return+ +s[e+116>>2]}function PJ(e){e=e|0;return+(+s[(_[e+52>>2]|0)+56>>2]-+s[(_[e+48>>2]|0)+56>>2]-+s[e+116>>2])}function TJ(e){e=e|0;return+(+s[(_[e+52>>2]|0)+72>>2]-+s[(_[e+48>>2]|0)+72>>2])}function LJ(e){e=e|0;return(i[e+112>>0]|0)!=0|0}function IJ(e,t){e=e|0;t=t|0;var n=0,p=0,u=0,f=0,a=0;n=b;p=e+112|0;if((t&1|0)==(o[p>>0]|0|0)){b=n;return}u=_[e+48>>2]|0;f=u+4|0;a=c[f>>1]|0;if(!(a&2)){r[f>>1]=a|2;s[u+144>>2]=0.0}u=_[e+52>>2]|0;f=u+4|0;a=c[f>>1]|0;if(!(a&2)){r[f>>1]=a|2;s[u+144>>2]=0.0}i[p>>0]=t&1;s[e+92>>2]=0.0;b=n;return}function WJ(e){e=e|0;return+ +s[e+120>>2]}function EJ(e){e=e|0;return+ +s[e+124>>2]}function OJ(e,t,n){e=e|0;t=+t;n=+n;var i=0,o=0,p=0,u=0,f=0;o=b;if(!(t<=n))Be(17160,17176,471,17232);i=e+120|0;if(!(+s[i>>2]!=t)?!(+s[e+124>>2]!=n):0){b=o;return}f=_[e+48>>2]|0;p=f+4|0;u=c[p>>1]|0;if(!(u&2)){r[p>>1]=u|2;s[f+144>>2]=0.0}u=_[e+52>>2]|0;f=u+4|0;p=c[f>>1]|0;if(!(p&2)){r[f>>1]=p|2;s[u+144>>2]=0.0}s[e+92>>2]=0.0;s[i>>2]=t;s[e+124>>2]=n;b=o;return}function VJ(e){e=e|0;return(i[e+100>>0]|0)!=0|0}function UJ(e,t){e=e|0;t=t|0;var n=0,o=0,p=0,u=0;n=b;o=_[e+48>>2]|0;p=o+4|0;u=c[p>>1]|0;if(!(u&2)){r[p>>1]=u|2;s[o+144>>2]=0.0}u=_[e+52>>2]|0;p=u+4|0;o=c[p>>1]|0;if(o&2){u=e+100|0;p=t&1;i[u>>0]=p;b=n;return}r[p>>1]=o|2;s[u+144>>2]=0.0;u=e+100|0;p=t&1;i[u>>0]=p;b=n;return}function NJ(e,t){e=e|0;t=+t;var n=0,i=0,o=0,p=0;n=b;i=_[e+48>>2]|0;o=i+4|0;p=c[o>>1]|0;if(!(p&2)){r[o>>1]=p|2;s[i+144>>2]=0.0}p=_[e+52>>2]|0;o=p+4|0;i=c[o>>1]|0;if(i&2){p=e+108|0;s[p>>2]=t;b=n;return}r[o>>1]=i|2;s[p+144>>2]=0.0;p=e+108|0;s[p>>2]=t;b=n;return}function zJ(e){e=e|0;return+ +s[e+108>>2]}function HJ(e,t){e=e|0;t=+t;var n=0,i=0,o=0,p=0;n=b;i=_[e+48>>2]|0;o=i+4|0;p=c[o>>1]|0;if(!(p&2)){r[o>>1]=p|2;s[i+144>>2]=0.0}p=_[e+52>>2]|0;o=p+4|0;i=c[o>>1]|0;if(i&2){p=e+104|0;s[p>>2]=t;b=n;return}r[o>>1]=i|2;s[p+144>>2]=0.0;p=e+104|0;s[p>>2]=t;b=n;return}function QJ(e){e=e|0;return+ +s[e+104>>2]}function KJ(e,t){e=e|0;t=+t;return+(+s[e+96>>2]*t)}function $J(e){e=e|0;return _[e+4>>2]|0}function ZJ(e){e=e|0;return _[e+48>>2]|0}function YJ(e){e=e|0;return _[e+52>>2]|0}function XJ(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[864]|0)==0?(je(864)|0)!=0:0)Me(864);lq[_[_[e>>2]>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=856;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 856}function eD(e){e=e|0;var t=0,n=0,r=0;n=b;b=b+16|0;t=n;if((i[880]|0)==0?(je(880)|0)!=0:0)Me(880);lq[_[(_[e>>2]|0)+4>>2]&127](t,e);r=t;e=_[r+4>>2]|0;t=872;_[t>>2]=_[r>>2];_[t+4>>2]=e;b=n;return 872}function tD(e,t){e=e|0;t=+t;var n=0,r=0,o=0;r=b;b=b+16|0;n=r;if((i[896]|0)==0?(je(896)|0)!=0:0)Me(896);Dq[_[(_[e>>2]|0)+8>>2]&63](n,e,t);o=n;e=_[o+4>>2]|0;n=888;_[n>>2]=_[o>>2];_[n+4>>2]=e;b=r;return 888}function nD(e,t){e=e|0;t=+t;var n=0;n=b;t=+aq[_[(_[e>>2]|0)+12>>2]&63](e,t);b=n;return+t}function iD(e){e=e|0;return _[e+12>>2]|0}function rD(e){e=e|0;return _[e+64>>2]|0}function _D(e,t){e=e|0;t=t|0;_[e+64>>2]=t;return}function oD(e){e=e|0;var t=0;t=b;if(!(r[(_[e+48>>2]|0)+4>>1]&32)){e=0;b=t;return e|0}e=(r[(_[e+52>>2]|0)+4>>1]&32)!=0;b=t;return e|0}function cD(e){e=e|0;return(i[e+61>>0]|0)!=0|0}function pD(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+28>>2]&127](e);b=t;return}function sD(e){e=e|0;var t=0;t=b;if(!e){b=t;return}dq[_[(_[e>>2]|0)+4>>2]&127](e);b=t;return}function uD(){var e=0,t=0;e=b;t=kS(16)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(16)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;b=e;return t|0}function bD(e){e=e|0;return _[e>>2]|0}function fD(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function aD(e){e=e|0;return _[e+4>>2]|0}function dD(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function yD(e){e=e|0;return _[e+8>>2]|0}function lD(e,t){e=e|0;t=t|0;_[e+8>>2]=t;return}function mD(e){e=e|0;return _[e+12>>2]|0}function hD(e,t){e=e|0;t=t|0;_[e+12>>2]=t;return}function vD(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function gD(){var e=0,t=0;e=b;t=kS(40)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(40)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;i[t+16>>0]=0;_[t>>2]=10;s[t+20>>2]=-1.0;s[t+24>>2]=0.0;s[t+28>>2]=1.0;s[t+32>>2]=0.0;s[t+36>>2]=0.0;b=e;return t|0}function JD(e){e=e|0;return e+20|0}function DD(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+20|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function xD(e){e=e|0;return e+28|0}function GD(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+28|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function jD(e){e=e|0;return+ +s[e+36>>2]}function AD(e,t){e=e|0;t=+t;s[e+36>>2]=t;return}function SD(e){e=e|0;return _[e>>2]|0}function CD(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function BD(e){e=e|0;return _[e+4>>2]|0}function kD(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function wD(e){e=e|0;return _[e+8>>2]|0}function MD(e,t){e=e|0;t=t|0;_[e+8>>2]=t;return}function RD(e){e=e|0;return _[e+12>>2]|0}function qD(e,t){e=e|0;t=t|0;_[e+12>>2]=t;return}function FD(e){e=e|0;return(i[e+16>>0]|0)!=0|0}function PD(e,t){e=e|0;t=t|0;i[e+16>>0]=t&1;return}function TD(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function LD(){var e=0,t=0;e=b;t=kS(44)|0;e:do{if(!t){while(1){t=_[4698]|0;_[4698]=t+0;if(!t)break;Jq[t&63]();t=kS(44)|0;if(t)break e}t=_t(4)|0;_[t>>2]=18632;tt(t|0,18680,116)}}while(0);_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;i[t+16>>0]=0;_[t>>2]=11;s[t+20>>2]=0.0;s[t+24>>2]=0.0;s[t+28>>2]=0.0;s[t+32>>2]=1.0;s[t+36>>2]=1.0;s[t+40>>2]=.30000001192092896;b=e;return t|0}function ID(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0;i=b;_[e+8>>2]=t;_[e+12>>2]=n;r=n+12|0;p=+s[r>>2];p=p-+s[t+12>>2];u=+s[r+4>>2]-+s[t+16>>2];f=+s[t+24>>2];o=+s[t+20>>2];c=+(p*f+u*o);o=+(f*u-p*o);r=e+20|0;s[r>>2]=c;s[r+4>>2]=o;s[e+28>>2]=+s[n+56>>2]-+s[t+56>>2];b=i;return}function WD(e){e=e|0;return e+20|0}function ED(e,t){e=e|0;t=t|0;var n=0,i=0;i=t;n=_[i+4>>2]|0;t=e+20|0;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function OD(e){e=e|0;return+ +s[e+28>>2]}function VD(e,t){e=e|0;t=+t;s[e+28>>2]=t;return}function UD(e){e=e|0;return+ +s[e+32>>2]}function ND(e,t){e=e|0;t=+t;s[e+32>>2]=t;return}function zD(e){e=e|0;return+ +s[e+36>>2]}function HD(e,t){e=e|0;t=+t;s[e+36>>2]=t;return}function QD(e){e=e|0;return+ +s[e+40>>2]}function KD(e,t){e=e|0;t=+t;s[e+40>>2]=t;return}function $D(e){e=e|0;return _[e>>2]|0}function ZD(e,t){e=e|0;t=t|0;_[e>>2]=t;return}function YD(e){e=e|0;return _[e+4>>2]|0}function XD(e,t){e=e|0;t=t|0;_[e+4>>2]=t;return}function ex(e){e=e|0;return _[e+8>>2]|0}function tx(e,t){e=e|0;t=t|0;_[e+8>>2]=t;return}function nx(e){e=e|0;return _[e+12>>2]|0}function ix(e,t){e=e|0;t=t|0;_[e+12>>2]=t;return}function rx(e){e=e|0;return(i[e+16>>0]|0)!=0|0}function _x(e,t){e=e|0;t=t|0;i[e+16>>0]=t&1;return}function ox(e){e=e|0;var t=0;t=b;if(e)wS(e);b=t;return}function cx(){return 0}function px(){return 1}function sx(){return 2}function ux(){return 3}function bx(){return 4}function fx(){return 0}function ax(){return 1}function dx(){return 2}function yx(){return 3}function lx(){return 4}function mx(){return 5}function hx(){return 6}function vx(){return 7}function gx(){return 8}function Jx(){return 9}function Dx(){return 10}function xx(){return 11}function Gx(){return 0}function jx(){return 1}function Ax(){return 2}function Sx(){return 3}function Cx(){return 0}function Bx(){return 1}function kx(){return 2}function wx(){return 0}function Mx(){return 1}function Rx(){return 2}function qx(){return 1}function Fx(){return 2}function Px(){return 4}function Tx(){return 8}function Lx(){return 16}function Ix(){return 0}function Wx(){return 1}function Ex(e){e=e|0;return}function Ox(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function Vx(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=b;Ce(2096,e|0,t|0,n|0,i|0)|0;b=r;return}function Ux(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=b;Ce(1864,e|0,t|0,n|0,i|0)|0;b=r;return}function Nx(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;var r=0;r=b;Ce(1648,e|0,t|0,+n,i|0)|0;b=r;return}function zx(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;var _=0;_=b;Ce(1416,e|0,t|0,+n,i|0,r|0)|0;b=_;return}function Hx(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=b;Ce(1200,e|0,t|0,n|0,i|0)|0;b=r;return}function Qx(e,t){e=e|0;t=t|0;var n=0;n=b;Ce(984,e|0,t|0)|0;b=n;return}function Kx(e){e=e|0;return}function $x(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function Zx(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=b;e=(Ce(2376,e|0,t|0,n|0)|0)!=0;b=i;return e|0}function Yx(e){e=e|0;return}function Xx(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function eG(e){e=e|0;return}function tG(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function nG(e){e=e|0;return}function iG(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function rG(e){e=e|0;return}function _G(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function oG(e,t){e=e|0;t=t|0;var n=0;n=b;Ce(3480,e|0,t|0)|0;b=n;return}function cG(e,t){e=e|0;t=t|0;var n=0;n=b;Ce(3248,e|0,t|0)|0;b=n;return}function pG(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=b;Ce(3016,e|0,t|0,n|0)|0;b=i;return}function sG(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=b;Ce(2784,e|0,t|0,n|0)|0;b=i;return}function uG(e){e=e|0;return}function bG(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function fG(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;var _=0;_=b;r=+qe(3816,e|0,t|0,n|0,i|0,+r);b=_;return+r}function aG(e){e=e|0;return}function dG(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function yG(e,t){e=e|0;t=t|0;var n=0;n=b;e=(Ce(4168,e|0,t|0)|0)!=0;b=n;return e|0}function lG(e){e=e|0;return}function mG(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function hG(e,t){e=e|0;t=t|0;var n=0;n=b;lq[_[(_[e>>2]|0)+16>>2]&127](e,t);b=n;return}function vG(e,t){e=e|0;t=t|0;var n=0;n=b;lq[_[(_[e>>2]|0)+20>>2]&127](e,t);b=n;return}function gG(e,t){e=e|0;t=t|0;var n=0;n=b;Ce(4992,e|0,t|0)|0;b=n;return}function JG(e,t){e=e|0;t=t|0;var n=0;n=b;Ce(4728,e|0,t|0)|0;b=n;return}function DG(e,t){e=e|0;t=t|0;var n=0.0,r=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0,d=0,y=0,l=0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0.0,A=0.0,S=0.0,C=0.0,B=0.0,k=0.0,w=0.0,M=0.0,R=0.0,q=0.0,F=0.0,P=0.0,T=0,L=0.0,I=0,W=0,E=0,O=0,V=0,U=0,H=0,Q=0,K=0,$=0;l=b;d=_[e+48>>2]|0;K=_[d+8>>2]|0;f=e+104|0;_[f>>2]=K;Q=_[e+52>>2]|0;U=_[Q+8>>2]|0;y=e+108|0;_[y>>2]=U;O=d+28|0;V=_[O>>2]|0;O=_[O+4>>2]|0;W=e+128|0;_[W>>2]=V;_[W+4>>2]=O;W=Q+28|0;E=_[W>>2]|0;W=_[W+4>>2]|0;I=e+136|0;_[I>>2]=E;_[I+4>>2]=W;I=e+156|0;s[I>>2]=+s[d+120>>2];T=e+160|0;s[T>>2]=+s[Q+120>>2];v=+s[d+128>>2];s[e+164>>2]=v;D=+s[Q+128>>2];s[e+168>>2]=D;Q=_[t+24>>2]|0;d=Q+(K*12|0)|0;j=+s[d>>2];C=+s[d+4>>2];k=+s[Q+(K*12|0)+8>>2];d=t+28|0;H=_[d>>2]|0;$=H+(K*12|0)|0;G=+s[$>>2];r=+s[$+4>>2];p=+s[H+(K*12|0)+8>>2];K=Q+(U*12|0)|0;M=+s[K>>2];S=+s[K+4>>2];B=+s[Q+(U*12|0)+8>>2];Q=H+(U*12|0)|0;o=+s[Q>>2];c=+s[Q+4>>2];u=+s[H+(U*12|0)+8>>2];A=+z(+k);w=+N(+k);L=+z(+B);h=+N(+B);n=-(_[a>>2]=V,+s[a>>2]);J=-(_[a>>2]=O,+s[a>>2]);g=w*n-A*J;J=A*n+w*J;n=+g;m=+J;O=e+112|0;s[O>>2]=n;s[O+4>>2]=m;m=-(_[a>>2]=E,+s[a>>2]);n=-(_[a>>2]=W,+s[a>>2]);x=h*m-L*n;n=L*m+h*n;h=+x;m=+n;W=e+120|0;s[W>>2]=h;s[W+4>>2]=m;m=+s[I>>2];h=+s[T>>2];L=m+h;q=L+J*v*J+n*D*n;P=v*g;R=D*x;F=-(J*P)-n*R;R=L+g*P+x*R;P=q*R-F*F;if(P!=0.0)P=1.0/P;L=-(F*P);s[e+172>>2]=R*P;s[e+176>>2]=L;s[e+180>>2]=L;s[e+184>>2]=q*P;R=v+D;if(R>0.0)R=1.0/R;s[e+188>>2]=R;F=+s[e+68>>2];L=+s[e+72>>2];P=+(M+x-j-g-(w*F-A*L));L=+(S+n-C-J-(A*F+w*L));T=e+144|0;s[T>>2]=P;s[T+4>>2]=L;s[e+152>>2]=B-k-+s[e+76>>2];T=e+80|0;if(!(i[t+20>>0]|0)){s[T>>2]=0.0;s[e+84>>2]=0.0;s[e+88>>2]=0.0;M=G;R=r;F=o;P=c;q=p;L=u;$=_[f>>2]|0;K=_[d>>2]|0;$=K+($*12|0)|0;M=+M;R=+R;K=$;s[K>>2]=M;$=$+4|0;s[$>>2]=R;$=_[f>>2]|0;K=_[d>>2]|0;$=K+($*12|0)+8|0;s[$>>2]=q;$=_[y>>2]|0;$=K+($*12|0)|0;F=+F;P=+P;K=$;s[K>>2]=F;$=$+4|0;s[$>>2]=P;$=_[y>>2]|0;K=_[d>>2]|0;$=K+($*12|0)+8|0;s[$>>2]=L;b=l;return}else{K=t+8|0;w=+s[K>>2];L=w*+s[T>>2];s[T>>2]=L;$=e+84|0;w=w*+s[$>>2];s[$>>2]=w;$=e+88|0;k=+s[K>>2]*+s[$>>2];s[$>>2]=k;M=G-m*L;R=r-m*w;F=o+h*L;P=c+h*w;q=p-v*(k+(w*g-L*J));L=u+D*(k+(w*x-L*n));$=_[f>>2]|0;K=_[d>>2]|0;$=K+($*12|0)|0;M=+M;R=+R;K=$;s[K>>2]=M;$=$+4|0;s[$>>2]=R;$=_[f>>2]|0;K=_[d>>2]|0;$=K+($*12|0)+8|0;s[$>>2]=q;$=_[y>>2]|0;$=K+($*12|0)|0;F=+F;P=+P;K=$;s[K>>2]=F;$=$+4|0;s[$>>2]=P;$=_[y>>2]|0;K=_[d>>2]|0;$=K+($*12|0)+8|0;s[$>>2]=L;b=l;return}}function xG(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0,p=0,u=0.0,f=0.0,a=0.0,d=0,y=0.0,l=0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0,A=0.0,S=0.0,C=0.0,B=0.0,k=0,w=0;l=b;p=e+104|0;d=_[p>>2]|0;c=t+28|0;k=_[c>>2]|0;j=k+(d*12|0)|0;u=+s[j>>2];o=+s[j+4>>2];G=+s[k+(d*12|0)+8>>2];d=e+108|0;j=_[d>>2]|0;w=k+(j*12|0)|0;f=+s[w>>2];a=+s[w+4>>2];x=+s[k+(j*12|0)+8>>2];r=+s[e+156>>2];i=+s[e+160>>2];n=+s[e+164>>2];y=+s[e+168>>2];S=+s[t>>2];C=+s[t+4>>2]*+s[e+100>>2];t=e+88|0;h=+s[t>>2];D=S*+s[e+96>>2];v=h-+s[e+188>>2]*(x-G+C*+s[e+152>>2]);J=-D;D=v<D?v:D;D=D<J?J:D;s[t>>2]=D;h=D-h;G=G-n*h;h=x+y*h;x=+s[e+124>>2];D=+s[e+120>>2];J=+s[e+116>>2];v=+s[e+112>>2];B=+s[e+144>>2]*C+(J*G+(f-x*h-u));C=C*+s[e+148>>2]+(a+D*h-o-v*G);A=+s[e+176>>2]*B+ +s[e+184>>2]*C;t=e+80|0;j=t;g=+s[j>>2];m=+s[j+4>>2];C=g-(+s[e+172>>2]*B+ +s[e+180>>2]*C);s[t>>2]=C;j=e+84|0;A=+s[j>>2]-A;s[j>>2]=A;S=S*+s[e+92>>2];B=C*C+A*A;if(B>S*S){B=+V(+B);if(!(B<1.1920928955078125e-7)){B=1.0/B;C=C*B;s[t>>2]=C;A=A*B;s[j>>2]=A}C=S*C;s[t>>2]=C;A=S*A;s[j>>2]=A}B=C-g;C=A-m;S=+(u-r*B);A=+(o-r*C);w=(_[c>>2]|0)+((_[p>>2]|0)*12|0)|0;s[w>>2]=S;s[w+4>>2]=A;w=_[c>>2]|0;s[w+((_[p>>2]|0)*12|0)+8>>2]=G-n*(v*C-B*J);A=+(f+i*B);S=+(a+i*C);w=w+((_[d>>2]|0)*12|0)|0;s[w>>2]=A;s[w+4>>2]=S;s[(_[c>>2]|0)+((_[d>>2]|0)*12|0)+8>>2]=h+y*(C*D-B*x);b=l;return}function GG(e,t){e=e|0;t=t|0;return 1}function jG(e,t){e=e|0;t=t|0;var n=0,i=0;i=(_[t+48>>2]|0)+12|0;n=_[i+4>>2]|0;t=e;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function AG(e,t){e=e|0;t=t|0;var n=0,i=0;i=(_[t+52>>2]|0)+12|0;n=_[i+4>>2]|0;t=e;_[t>>2]=_[i>>2];_[t+4>>2]=n;return}function SG(e,t,n){e=e|0;t=t|0;n=+n;var i=0.0;i=+s[t+84>>2]*n;s[e>>2]=+s[t+80>>2]*n;s[e+4>>2]=i;return}function CG(e,t){e=e|0;t=+t;return+(+s[e+88>>2]*t)}function BG(e){e=e|0;var t=0,n=0,i=0,r=0.0,c=0;t=b;b=b+16|0;n=t;c=_[(_[e+48>>2]|0)+8>>2]|0;i=_[(_[e+52>>2]|0)+8>>2]|0;Bj(5440,n);_[n>>2]=c;Bj(17784,n);_[n>>2]=i;Bj(17816,n);_[n>>2]=o[e+61>>0];Bj(17848,n);r=+s[e+72>>2];u[a>>3]=+s[e+68>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(5464,n);u[a>>3]=+s[e+76>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(5512,n);u[a>>3]=+s[e+92>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(15168,n);u[a>>3]=+s[e+96>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(15200,n);u[a>>3]=+s[e+100>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(5544,n);_[n>>2]=_[e+56>>2];Bj(18184,n);b=t;return}function kG(e,t){e=e|0;t=t|0;return}function wG(e){e=e|0;return}function MG(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function RG(e){e=e|0;Le(e|0)|0;_S()}function qG(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,c=0;n=b;i=e+40|0;r=_[i>>2]|0;o=e+36|0;e=e+32|0;if((r|0)==(_[o>>2]|0)){c=_[e>>2]|0;_[o>>2]=r<<1;r=kS(r<<3)|0;_[e>>2]=r;FS(r|0,c|0,_[i>>2]<<2|0)|0;wS(c);r=_[i>>2]|0}_[(_[e>>2]|0)+(r<<2)>>2]=t;_[i>>2]=(_[i>>2]|0)+1;b=n;return}function FG(e,t,n,r,o){e=e|0;t=t|0;n=n|0;r=r|0;o=o|0;var c=0,p=0,u=0,f=0.0,d=0.0,y=0.0,l=0.0,m=0.0,h=0.0,v=0,g=0,J=0.0,D=0.0,x=0.0,G=0.0,j=0.0,A=0.0,S=0.0,C=0.0;u=b;c=e+60|0;_[c>>2]=0;p=r+12|0;d=+s[o+12>>2];S=+s[p>>2];D=+s[o+8>>2];x=+s[r+16>>2];A=+s[o>>2]+(d*S-D*x)-+s[n>>2];x=S*D+d*x+ +s[o+4>>2]-+s[n+4>>2];d=+s[n+12>>2];D=+s[n+8>>2];S=A*d+x*D;D=d*x-A*D;n=t+12|0;o=_[n>>2]|0;n=_[n+4>>2]|0;A=(_[a>>2]=o,+s[a>>2]);x=(_[a>>2]=n,+s[a>>2]);g=t+20|0;v=_[g>>2]|0;g=_[g+4>>2]|0;d=(_[a>>2]=v,+s[a>>2]);y=(_[a>>2]=g,+s[a>>2]);f=d-A;J=y-x;G=f*(d-S)+J*(y-D);h=S-A;m=D-x;j=h*f+m*J;l=+s[t+8>>2]+ +s[r+8>>2];if(j<=0.0){if(h*h+m*m>l*l){b=u;return}if((i[t+44>>0]|0)!=0?(r=t+28|0,C=+s[r>>2],(A-S)*(A-C)+(x-D)*(x-+s[r+4>>2])>0.0):0){b=u;return}_[c>>2]=1;_[e+56>>2]=0;s[e+40>>2]=0.0;s[e+44>>2]=0.0;v=e+48|0;_[v>>2]=o;_[v+4>>2]=n;v=e+16|0;_[v>>2]=0;i[v>>0]=0;i[v+1>>0]=0;i[v+2>>0]=0;i[v+3>>0]=0;v=p;g=_[v+4>>2]|0;r=e;_[r>>2]=_[v>>2];_[r+4>>2]=g;b=u;return}if(G<=0.0){f=S-d;m=D-y;if(f*f+m*m>l*l){b=u;return}if((i[t+45>>0]|0)!=0?(r=t+36|0,C=+s[r>>2],f*(C-d)+m*(+s[r+4>>2]-y)>0.0):0){b=u;return}_[c>>2]=1;_[e+56>>2]=0;s[e+40>>2]=0.0;s[e+44>>2]=0.0;r=e+48|0;_[r>>2]=v;_[r+4>>2]=g;v=e+16|0;_[v>>2]=0;i[v>>0]=1;i[v+1>>0]=0;i[v+2>>0]=0;i[v+3>>0]=0;v=p;g=_[v+4>>2]|0;r=e;_[r>>2]=_[v>>2];_[r+4>>2]=g;b=u;return}C=f*f+J*J;if(!(C>0.0))Be(5640,5656,127,5704);C=1.0/C;S=S-(A*G+d*j)*C;C=D-(x*G+y*j)*C;if(S*S+C*C>l*l){b=u;return}d=-J;if(f*m+h*d<0.0)f=-f;else J=d;d=+V(+(f*f+J*J));if(!(d<1.1920928955078125e-7)){C=1.0/d;J=J*C;f=f*C}_[c>>2]=1;_[e+56>>2]=1;S=+J;C=+f;v=e+40|0;s[v>>2]=S;s[v+4>>2]=C;v=e+48|0;_[v>>2]=o;_[v+4>>2]=n;v=e+16|0;_[v>>2]=0;i[v>>0]=0;i[v+1>>0]=0;i[v+2>>0]=1;i[v+3>>0]=0;v=p;g=_[v+4>>2]|0;r=e;_[r>>2]=_[v>>2];_[r+4>>2]=g;b=u;return}function PG(e,t,n,r,o){e=e|0;t=t|0;n=n|0;r=r|0;o=o|0;var c=0,p=0,u=0,f=0,d=0,y=0,l=0,m=0,h=0,v=0,g=0,J=0,D=0,x=0,G=0,j=0.0,A=0.0,S=0.0,C=0.0,B=0.0,k=0.0,w=0.0,M=0,R=0.0,q=0.0,F=0.0,P=0.0,T=0.0,L=0,I=0.0,W=0,E=0.0,O=0.0,U=0.0,N=0.0,z=0,H=0,Q=0.0,K=0.0;c=b;b=b+336|0;l=c;d=c+304|0;p=c+280|0;m=c+24|0;u=m+132|0;w=+s[n+12>>2];I=+s[o+8>>2];A=+s[n+8>>2];k=+s[o+12>>2];j=w*I-A*k;k=I*A+w*k;I=+j;B=+k;C=+s[o>>2]-+s[n>>2];T=+s[o+4>>2]-+s[n+4>>2];S=w*C+A*T;C=w*T-A*C;A=+S;T=+C;n=u;s[n>>2]=A;s[n+4>>2]=T;n=m+140|0;s[n>>2]=I;s[n+4>>2]=B;n=m+144|0;B=+s[r+12>>2];o=m+140|0;I=+s[r+16>>2];S=S+(k*B-j*I);f=m+136|0;C=B*j+k*I+C;I=+S;k=+C;L=m+148|0;s[L>>2]=I;s[L+4>>2]=k;L=t+28|0;M=_[L>>2]|0;L=_[L+4>>2]|0;h=m+156|0;_[h>>2]=M;_[h+4>>2]=L;h=m+164|0;G=t+12|0;g=_[G>>2]|0;G=_[G+4>>2]|0;v=h;_[v>>2]=g;_[v+4>>2]=G;v=m+172|0;D=t+20|0;H=_[D>>2]|0;D=_[D+4>>2]|0;z=v;_[z>>2]=H;_[z+4>>2]=D;z=t+36|0;W=_[z>>2]|0;z=_[z+4>>2]|0;J=m+180|0;_[J>>2]=W;_[J+4>>2]=z;J=(i[t+44>>0]|0)!=0;x=(i[t+45>>0]|0)==0;k=(_[a>>2]=H,+s[a>>2]);I=(_[a>>2]=g,+s[a>>2]);j=k-I;B=(_[a>>2]=D,+s[a>>2]);T=(_[a>>2]=G,+s[a>>2]);A=B-T;w=+V(+(j*j+A*A));F=(_[a>>2]=M,+s[a>>2]);P=(_[a>>2]=L,+s[a>>2]);q=(_[a>>2]=W,+s[a>>2]);R=(_[a>>2]=z,+s[a>>2]);if(!(w<1.1920928955078125e-7)){N=1.0/w;j=j*N;A=A*N}g=m+196|0;w=-j;s[g>>2]=A;t=m+200|0;s[t>>2]=w;w=(S-I)*A+(C-T)*w;if(J){I=I-F;T=T-P;E=+V(+(I*I+T*T));if(!(E<1.1920928955078125e-7)){N=1.0/E;I=I*N;T=T*N}N=-I;s[m+188>>2]=T;s[m+192>>2]=N;D=A*I-j*T>=0.0;F=(S-F)*T+(C-P)*N}else{D=0;F=0.0}e:do{if(x){if(!J){H=w>=0.0;i[m+248>>0]=H&1;J=m+212|0;if(H){W=g;H=_[W>>2]|0;W=_[W+4>>2]|0;z=J;_[z>>2]=H;_[z+4>>2]=W;U=+-(_[a>>2]=H,+s[a>>2]);N=+j;H=m+228|0;s[H>>2]=U;s[H+4>>2]=N;H=m+236|0;s[H>>2]=U;s[H+4>>2]=N;break}else{U=+-A;N=+j;z=J;s[z>>2]=U;s[z+4>>2]=N;z=g;W=_[z>>2]|0;z=_[z+4>>2]|0;H=m+228|0;_[H>>2]=W;_[H+4>>2]=z;H=m+236|0;_[H>>2]=W;_[H+4>>2]=z;break}}J=F>=0.0;if(D){if(!J){H=w>=0.0;i[m+248>>0]=H&1;J=m+212|0;if(!H){U=+-A;N=+j;W=J;s[W>>2]=U;s[W+4>>2]=N;W=g;z=_[W>>2]|0;W=_[W+4>>2]|0;H=m+228|0;_[H>>2]=z;_[H+4>>2]=W;H=m+236|0;s[H>>2]=-(_[a>>2]=z,+s[a>>2]);s[H+4>>2]=N;break}}else{i[m+248>>0]=1;J=m+212|0}H=g;z=_[H+4>>2]|0;W=J;_[W>>2]=_[H>>2];_[W+4>>2]=z;W=m+188|0;z=_[W+4>>2]|0;H=m+228|0;_[H>>2]=_[W>>2];_[H+4>>2]=z;U=+-+s[g>>2];N=+-+s[t>>2];H=m+236|0;s[H>>2]=U;s[H+4>>2]=N;break}else{if(J){H=w>=0.0;i[m+248>>0]=H&1;J=m+212|0;if(H){W=g;H=_[W>>2]|0;W=_[W+4>>2]|0;z=J;_[z>>2]=H;_[z+4>>2]=W;z=m+228|0;_[z>>2]=H;_[z+4>>2]=W;U=+-(_[a>>2]=H,+s[a>>2]);N=+j;H=m+236|0;s[H>>2]=U;s[H+4>>2]=N;break}}else{i[m+248>>0]=0;J=m+212|0}N=+-A;U=+j;W=J;s[W>>2]=N;s[W+4>>2]=U;W=g;z=_[W+4>>2]|0;H=m+228|0;_[H>>2]=_[W>>2];_[H+4>>2]=z;U=+-+s[m+188>>2];N=+-+s[m+192>>2];H=m+236|0;s[H>>2]=U;s[H+4>>2]=N;break}}else{q=q-k;R=R-B;P=+V(+(q*q+R*R));if(!(P<1.1920928955078125e-7)){N=1.0/P;q=q*N;R=R*N}N=-q;x=m+204|0;s[x>>2]=R;G=m+208|0;s[G>>2]=N;M=j*R-A*q>0.0;S=(S-k)*R+(C-B)*N;if(!J){J=w>=0.0;if(M){if(!J){H=S>=0.0;i[m+248>>0]=H&1;J=m+212|0;if(!H){U=+-A;N=+j;W=J;s[W>>2]=U;s[W+4>>2]=N;W=m+228|0;s[W>>2]=U;s[W+4>>2]=N;W=g;z=_[W+4>>2]|0;H=m+236|0;_[H>>2]=_[W>>2];_[H+4>>2]=z;break}}else{i[m+248>>0]=1;J=m+212|0}H=g;z=_[H+4>>2]|0;W=J;_[W>>2]=_[H>>2];_[W+4>>2]=z;U=+-+s[g>>2];N=+-+s[t>>2];W=m+228|0;s[W>>2]=U;s[W+4>>2]=N;W=m+204|0;z=_[W+4>>2]|0;H=m+236|0;_[H>>2]=_[W>>2];_[H+4>>2]=z;break}else{if(J){H=S>=0.0;i[m+248>>0]=H&1;J=m+212|0;if(H){z=g;W=_[z>>2]|0;z=_[z+4>>2]|0;H=J;_[H>>2]=W;_[H+4>>2]=z;U=+-(_[a>>2]=W,+s[a>>2]);N=+j;H=m+228|0;s[H>>2]=U;s[H+4>>2]=N;H=m+236|0;_[H>>2]=W;_[H+4>>2]=z;break}}else{i[m+248>>0]=0;J=m+212|0}N=+-A;U=+j;W=J;s[W>>2]=N;s[W+4>>2]=U;U=+-+s[x>>2];N=+-+s[G>>2];W=m+228|0;s[W>>2]=U;s[W+4>>2]=N;W=g;z=_[W+4>>2]|0;H=m+236|0;_[H>>2]=_[W>>2];_[H+4>>2]=z;break}}if(D&M){if(!(F>=0.0)&!(w>=0.0)){H=S>=0.0;i[m+248>>0]=H&1;J=m+212|0;if(!H){U=+-A;N=+j;H=J;s[H>>2]=U;s[H+4>>2]=N;H=m+228|0;s[H>>2]=U;s[H+4>>2]=N;H=m+236|0;s[H>>2]=U;s[H+4>>2]=N;break}}else{i[m+248>>0]=1;J=m+212|0}W=g;z=_[W+4>>2]|0;H=J;_[H>>2]=_[W>>2];_[H+4>>2]=z;H=m+188|0;z=_[H+4>>2]|0;W=m+228|0;_[W>>2]=_[H>>2];_[W+4>>2]=z;W=m+204|0;z=_[W+4>>2]|0;H=m+236|0;_[H>>2]=_[W>>2];_[H+4>>2]=z;break}if(D){do{if(!(F>=0.0)){if(w>=0.0){H=S>=0.0;i[m+248>>0]=H&1;J=m+212|0;if(H)break}else{i[m+248>>0]=0;J=m+212|0}U=+-A;N=+j;H=J;s[H>>2]=U;s[H+4>>2]=N;N=+-+s[x>>2];U=+-+s[G>>2];H=m+228|0;s[H>>2]=N;s[H+4>>2]=U;U=+-+s[g>>2];N=+-+s[t>>2];H=m+236|0;s[H>>2]=U;s[H+4>>2]=N;break e}else{i[m+248>>0]=1;J=m+212|0}}while(0);W=g;z=_[W+4>>2]|0;H=J;_[H>>2]=_[W>>2];_[H+4>>2]=z;H=m+188|0;z=_[H+4>>2]|0;W=m+228|0;_[W>>2]=_[H>>2];_[W+4>>2]=z;W=g;z=_[W+4>>2]|0;H=m+236|0;_[H>>2]=_[W>>2];_[H+4>>2]=z;break}if(!M){if(!(!(F>=0.0)|!(w>=0.0))){H=S>=0.0;i[m+248>>0]=H&1;J=m+212|0;if(H){z=g;W=_[z>>2]|0;z=_[z+4>>2]|0;H=J;_[H>>2]=W;_[H+4>>2]=z;H=m+228|0;_[H>>2]=W;_[H+4>>2]=z;H=m+236|0;_[H>>2]=W;_[H+4>>2]=z;break}}else{i[m+248>>0]=0;J=m+212|0}U=+-A;N=+j;H=J;s[H>>2]=U;s[H+4>>2]=N;N=+-+s[x>>2];U=+-+s[G>>2];H=m+228|0;s[H>>2]=N;s[H+4>>2]=U;U=+-+s[m+188>>2];N=+-+s[m+192>>2];H=m+236|0;s[H>>2]=U;s[H+4>>2]=N;break}do{if(!(S>=0.0)){if(F>=0.0){H=w>=0.0;i[m+248>>0]=H&1;J=m+212|0;if(H)break}else{i[m+248>>0]=0;J=m+212|0}U=+-A;N=+j;H=J;s[H>>2]=U;s[H+4>>2]=N;N=+-+s[g>>2];U=+-+s[t>>2];H=m+228|0;s[H>>2]=N;s[H+4>>2]=U;U=+-+s[m+188>>2];N=+-+s[m+192>>2];H=m+236|0;s[H>>2]=U;s[H+4>>2]=N;break e}else{i[m+248>>0]=1;J=m+212|0}}while(0);W=g;z=_[W+4>>2]|0;H=J;_[H>>2]=_[W>>2];_[H+4>>2]=z;H=g;z=_[H+4>>2]|0;W=m+228|0;_[W>>2]=_[H>>2];_[W+4>>2]=z;W=m+204|0;z=_[W+4>>2]|0;H=m+236|0;_[H>>2]=_[W>>2];_[H+4>>2]=z}}while(0);G=_[r+148>>2]|0;J=m+128|0;_[J>>2]=G;if((G|0)>0){D=0;do{E=+s[n>>2];U=+s[r+(D<<3)+20>>2];N=+s[o>>2];O=+s[r+(D<<3)+24>>2];I=+(+s[u>>2]+(E*U-N*O));O=+(U*N+E*O+ +s[f>>2]);H=m+(D<<3)|0;s[H>>2]=I;s[H+4>>2]=O;O=+s[n>>2];I=+s[r+(D<<3)+84>>2];E=+s[o>>2];N=+s[r+(D<<3)+88>>2];U=+(O*I-E*N);N=+(I*E+O*N);H=m+(D<<3)+64|0;s[H>>2]=U;s[H+4>>2]=N;D=D+1|0}while((D|0)<(G|0));G=_[J>>2]|0}D=m+244|0;s[D>>2]=.019999999552965164;J=e+60|0;_[J>>2]=0;x=i[m+248>>0]|0;M=(G|0)>0;if(!M){b=c;return}j=+s[m+164>>2];B=+s[m+168>>2];C=+s[m+212>>2];k=+s[m+216>>2];w=3.4028234663852886e+38;S=3.4028234663852886e+38;W=0;while(1){A=(+s[m+(W<<3)>>2]-j)*C+(+s[m+(W<<3)+4>>2]-B)*k;L=A<w;S=L?A:S;W=W+1|0;if((W|0)>=(G|0))break;else w=L?A:w}if(S>.019999999552965164){b=c;return}j=+s[m+216>>2];A=+s[m+212>>2];do{if(M){R=+s[m+164>>2];F=+s[m+168>>2];P=+s[m+172>>2];T=+s[m+176>>2];q=+s[m+228>>2];w=+s[m+232>>2];k=+s[m+236>>2];B=+s[m+240>>2];I=-3.4028234663852886e+38;M=0;W=0;L=-1;E=-3.4028234663852886e+38;while(1){O=+s[m+(M<<3)+64>>2];N=-O;U=-+s[m+(M<<3)+68>>2];K=+s[m+(M<<3)>>2];C=+s[m+(M<<3)+4>>2];Q=(K-R)*N+(C-F)*U;C=(K-P)*N+(C-T)*U;C=Q<C?Q:C;if(C>.019999999552965164){W=2;break}if(!(j*O+A*U>=0.0))if(C>I?!((N-q)*A+(U-w)*j<-.03490658849477768):0)y=77;else C=E;else if(C>I?!((N-k)*A+(U-B)*j<-.03490658849477768):0)y=77;else C=E;if((y|0)==77){y=0;I=C;W=2;L=M}M=M+1|0;if((M|0)>=(G|0)){M=L;y=79;break}else E=C}if((y|0)==79)if(!W){y=82;break}if(C>.019999999552965164){b=c;return}if(C>S*.9800000190734863+.0010000000474974513){L=(W|0)==1;W=e+56|0;if(L){M=L;L=l;y=84}else{_[W>>2]=2;x=h;t=_[x+4>>2]|0;h=l;_[h>>2]=_[x>>2];_[h+4>>2]=t;h=l+8|0;i[h>>0]=0;t=M&255;i[h+1>>0]=t;i[h+2>>0]=0;i[h+3>>0]=1;h=v;v=_[h+4>>2]|0;x=l+12|0;_[x>>2]=_[h>>2];_[x+4>>2]=v;x=l+20|0;i[x>>0]=0;i[x+1>>0]=t;i[x+2>>0]=0;i[x+3>>0]=1;x=M+1|0;x=(x|0)<(G|0)?x:0;G=m+(M<<3)|0;v=m+(x<<3)|0;t=m+(M<<3)+64|0;h=_[v+4>>2]|0;v=_[v>>2]|0;m=L;L=x;x=_[G>>2]|0;G=_[G+4>>2]|0;g=_[t>>2]|0;t=_[t+4>>2]|0}}else y=82}else y=82}while(0);if((y|0)==82){M=1;L=l;W=e+56|0;y=84}do{if((y|0)==84){_[W>>2]=1;if((G|0)>1){z=0;S=A*+s[m+64>>2]+j*+s[m+68>>2];y=1;while(1){C=A*+s[m+(y<<3)+64>>2]+j*+s[m+(y<<3)+68>>2];W=C<S;z=W?y:z;y=y+1|0;if((y|0)>=(G|0))break;else S=W?C:S}}else z=0;W=z+1|0;W=(W|0)<(G|0)?W:0;y=m+(z<<3)|0;H=_[y+4>>2]|0;G=l;_[G>>2]=_[y>>2];_[G+4>>2]=H;G=l+8|0;i[G>>0]=0;i[G+1>>0]=z;i[G+2>>0]=1;i[G+3>>0]=0;G=m+(W<<3)|0;z=_[G+4>>2]|0;H=l+12|0;_[H>>2]=_[G>>2];_[H+4>>2]=z;H=l+20|0;i[H>>0]=0;i[H+1>>0]=W;i[H+2>>0]=1;i[H+3>>0]=0;if(!(x<<24>>24)){G=v;v=h;g=(s[a>>2]=-+s[g>>2],_[a>>2]|0);h=_[v+4>>2]|0;v=_[v>>2]|0;l=L;m=M;M=1;L=0;x=_[G>>2]|0;G=_[G+4>>2]|0;t=(s[a>>2]=-+s[t>>2],_[a>>2]|0);break}else{G=h;t=g;h=_[v+4>>2]|0;v=_[v>>2]|0;l=L;m=M;M=0;L=1;x=_[G>>2]|0;G=_[G+4>>2]|0;g=_[t>>2]|0;t=_[t+4>>2]|0;break}}}while(0);A=(_[a>>2]=G,+s[a>>2]);j=(_[a>>2]=t,+s[a>>2]);N=(_[a>>2]=t,+s[a>>2]);C=(_[a>>2]=g,+s[a>>2]);Q=(_[a>>2]=x,+s[a>>2]);K=-C;S=-N;if((LG(d,l,N,K,N*Q+(_[a>>2]=G,+s[a>>2])*K,M)|0)<2){b=c;return}K=(_[a>>2]=h,+s[a>>2]);K=(_[a>>2]=v,+s[a>>2])*S+C*K;if((LG(p,d,S,(_[a>>2]=g,+s[a>>2]),K,L)|0)<2){b=c;return}d=e+40|0;if(m){H=d;_[H>>2]=g;_[H+4>>2]=t;H=e+48|0;_[H>>2]=x;_[H+4>>2]=G}else{H=r+(M<<3)+84|0;z=_[H+4>>2]|0;W=d;_[W>>2]=_[H>>2];_[W+4>>2]=z;W=r+(M<<3)+20|0;z=_[W+4>>2]|0;H=e+48|0;_[H>>2]=_[W>>2];_[H+4>>2]=z}S=(_[a>>2]=x,+s[a>>2]);C=(_[a>>2]=g,+s[a>>2]);B=+s[D>>2];k=+s[u>>2];w=+s[f>>2];R=+s[n>>2];q=+s[o>>2];o=0;n=0;do{f=p+(o*12|0)|0;F=+s[f>>2];P=+s[p+(o*12|0)+4>>2];if((F-S)*C+(P-A)*j<=B){u=e+(n*20|0)|0;if(m){K=F-k;N=P-w;Q=+(K*R+N*q);K=+(R*N-K*q);H=u;s[H>>2]=Q;s[H+4>>2]=K;_[e+(n*20|0)+16>>2]=_[p+(o*12|0)+8>>2]}else{W=f;H=_[W+4>>2]|0;z=u;_[z>>2]=_[W>>2];_[z+4>>2]=H;z=p+(o*12|0)+8|0;H=e+(n*20|0)+16|0;i[H+2>>0]=i[z+3>>0]|0;i[H+3>>0]=i[z+2>>0]|0;i[H>>0]=i[z+1>>0]|0;i[H+1>>0]=i[z>>0]|0}n=n+1|0}o=o+1|0}while((o|0)!=2);_[J>>2]=n;b=c;return}function TG(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,c=0,p=0,u=0.0,f=0.0,a=0.0,d=0.0,y=0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0,J=0,D=0.0,x=0.0;o=b;c=_[t+148>>2]|0;p=_[i+148>>2]|0;v=+s[r+12>>2];d=+s[n+8>>2];D=+s[r+8>>2];u=+s[n+12>>2];f=v*d-D*u;u=d*D+v*u;d=+s[n>>2]-+s[r>>2];g=+s[n+4>>2]-+s[r+4>>2];a=v*d+D*g;d=v*g-D*d;if((c|0)<=0){J=0;D=-3.4028234663852886e+38;_[e>>2]=J;b=o;return+D}n=(p|0)>0;y=0;r=0;l=-3.4028234663852886e+38;do{D=+s[t+(r<<3)+84>>2];v=+s[t+(r<<3)+88>>2];m=u*D-f*v;v=f*D+u*v;D=+s[t+(r<<3)+20>>2];g=+s[t+(r<<3)+24>>2];h=a+(u*D-f*g);g=d+(f*D+u*g);if(n){J=0;D=3.4028234663852886e+38;do{x=m*(+s[i+(J<<3)+20>>2]-h)+v*(+s[i+(J<<3)+24>>2]-g);D=x<D?x:D;J=J+1|0}while((J|0)!=(p|0))}else D=3.4028234663852886e+38;J=D>l;l=J?D:l;y=J?r:y;r=r+1|0}while((r|0)!=(c|0));_[e>>2]=y;b=o;return+l}function LG(e,t,n,r,o,c){e=e|0;t=t|0;n=+n;r=+r;o=+o;c=c|0;var p=0.0,u=0,f=0,a=0,d=0,y=0,l=0;d=b;u=t+4|0;p=+s[t>>2]*n+ +s[u>>2]*r-o;f=t+12|0;a=t+16|0;o=+s[f>>2]*n+ +s[a>>2]*r-o;if(!(p<=0.0))y=0;else{_[e+0>>2]=_[t+0>>2];_[e+4>>2]=_[t+4>>2];_[e+8>>2]=_[t+8>>2];y=1}if(o<=0.0){l=y+1|0;y=e+(y*12|0)|0;_[y+0>>2]=_[f+0>>2];_[y+4>>2]=_[f+4>>2];_[y+8>>2]=_[f+8>>2];y=l}if(!(p*o<0.0)){l=y;b=d;return l|0}o=p/(p-o);r=+s[t>>2];n=+s[u>>2];r=+(r+o*(+s[f>>2]-r));n=+(n+o*(+s[a>>2]-n));l=e+(y*12|0)|0;s[l>>2]=r;s[l+4>>2]=n;l=e+(y*12|0)+8|0;i[l>>0]=c;i[l+1>>0]=i[t+9>>0]|0;i[l+2>>0]=0;i[l+3>>0]=1;l=y+1|0;b=d;return l|0}function IG(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,c=0,p=0,u=0;i=b;r=_[t+4>>2]|0;if((r|0)==3){if((n|0)<=-1)Be(5872,5912,53,7624);r=t+16|0;if((_[r>>2]|0)<=(n|0))Be(5872,5912,53,7624);c=t+12|0;u=(_[c>>2]|0)+(n<<3)|0;p=_[u+4>>2]|0;o=e;_[o>>2]=_[u>>2];_[o+4>>2]=p;o=n+1|0;n=e+8|0;c=_[c>>2]|0;if((o|0)<(_[r>>2]|0)){c=c+(o<<3)|0;p=_[c+4>>2]|0;u=n;_[u>>2]=_[c>>2];_[u+4>>2]=p}else{p=_[c+4>>2]|0;u=n;_[u>>2]=_[c>>2];_[u+4>>2]=p}_[e+16>>2]=e;_[e+20>>2]=2;s[e+24>>2]=+s[t+8>>2];b=i;return}else if((r|0)==2){_[e+16>>2]=t+20;_[e+20>>2]=_[t+148>>2];s[e+24>>2]=+s[t+8>>2];b=i;return}else if(!r){_[e+16>>2]=t+12;_[e+20>>2]=1;s[e+24>>2]=+s[t+8>>2];b=i;return}else if((r|0)==1){_[e+16>>2]=t+12;_[e+20>>2]=2;s[e+24>>2]=+s[t+8>>2];b=i;return}else Be(15688,5912,81,7624)}function WG(e,t,n){e=e|0;t=t|0;n=n|0;var c=0,p=0,u=0,f=0,d=0,y=0.0,l=0.0,m=0,h=0,v=0.0,g=0.0,J=0,D=0.0,x=0.0,G=0.0,j=0.0,A=0.0,S=0,C=0,B=0.0,k=0,w=0.0,M=0,R=0,q=0,F=0.0,P=0,T=0,L=0,I=0,W=0,E=0,O=0,U=0,N=0,z=0,H=0,Q=0,K=0,$=0,Z=0.0,Y=0,X=0.0,ee=0.0,te=0,ne=0,ie=0,re=0,_e=0.0,oe=0.0,ce=0.0,pe=0,se=0.0,ue=0.0,be=0.0,fe=0.0,ae=0.0,de=0.0,ye=0.0,le=0.0,me=0.0,he=0.0,ve=0.0;c=b;b=b+144|0;u=c;S=c+124|0;k=c+112|0;_[1462]=(_[1462]|0)+1;j=+s[n+56>>2];G=+s[n+60>>2];A=+s[n+64>>2];B=+s[n+68>>2];x=+s[n+72>>2];w=+s[n+76>>2];F=+s[n+80>>2];D=+s[n+84>>2];f=t+4|0;L=r[f>>1]|0;if((L&65535)>=4)Be(6016,5912,102,6040);T=L&65535;d=u+108|0;_[d>>2]=T;e:do{if(L<<16>>16){L=n+16|0;I=n+48|0;T=n+44|0;W=_[n+20>>2]|0;E=0;while(1){U=o[t+E+6>>0]|0;_[u+(E*36|0)+28>>2]=U;O=o[t+E+9>>0]|0;_[u+(E*36|0)+32>>2]=O;if((W|0)<=(U|0)){$=6;break}pe=(_[L>>2]|0)+(U<<3)|0;X=+s[pe>>2];Z=+s[pe+4>>2];if((_[I>>2]|0)<=(O|0)){$=8;break}O=(_[T>>2]|0)+(O<<3)|0;se=+s[O>>2];oe=+s[O+4>>2];ue=j+(X*B-Z*A);ce=+ue;be=+(Z*B+X*A+G);O=u+(E*36|0)|0;s[O>>2]=ce;s[O+4>>2]=be;be=x+(se*D-oe*F);ce=+be;se=+(oe*D+se*F+w);O=u+(E*36|0)+8|0;s[O>>2]=ce;s[O+4>>2]=se;ue=+(be-ue);be=+(+s[u+(E*36|0)+12>>2]-+s[u+(E*36|0)+4>>2]);O=u+(E*36|0)+16|0;s[O>>2]=ue;s[O+4>>2]=be;s[u+(E*36|0)+24>>2]=0.0;E=E+1|0;O=_[d>>2]|0;if((E|0)>=(O|0)){P=O;break e}}if(($|0)==6)Be(6800,6832,103,6880);else if(($|0)==8)Be(6800,6832,103,6880)}else P=T}while(0);do{if((P|0)>1){ue=+s[t>>2];be=+EG(u);if(!(be<ue*.5)?!(ue*2.0<be|be<1.1920928955078125e-7):0){P=_[d>>2]|0;$=15;break}_[d>>2]=0;$=17}else $=15}while(0);if(($|0)==15)if(!P)$=17;else{H=P;J=n+20|0;M=n+44|0;R=n+48|0;C=u+16|0;h=u+24|0;q=n+16|0}do{if(($|0)==17){_[u+28>>2]=0;_[u+32>>2]=0;P=n+20|0;if((_[P>>2]|0)<=0)Be(6800,6832,103,6880);T=n+16|0;L=_[T>>2]|0;Z=+s[L>>2];X=+s[L+4>>2];L=n+48|0;if((_[L>>2]|0)>0){M=n+44|0;C=_[M>>2]|0;se=+s[C>>2];_e=+s[C+4>>2];ue=j+(Z*B-X*A);be=X*B+Z*A+G;oe=+ue;ce=+be;C=u;s[C>>2]=oe;s[C+4>>2]=ce;ce=x+(se*D-_e*F);se=_e*D+se*F+w;_e=+ce;oe=+se;C=u+8|0;s[C>>2]=_e;s[C+4>>2]=oe;C=u+16|0;ue=+(ce-ue);be=+(se-be);h=C;s[h>>2]=ue;s[h+4>>2]=be;h=u+24|0;s[h>>2]=1.0;_[d>>2]=1;H=1;J=P;R=L;q=T;break}else Be(6800,6832,103,6880)}}while(0);U=u+16|0;O=u+20|0;E=u+52|0;W=u+56|0;L=u+36|0;I=u+52|0;P=u+60|0;z=u+72|0;N=u+88|0;T=u+96|0;Q=0;e:while(1){K=(H|0)>0;if(K){$=0;do{_[S+($<<2)>>2]=_[u+($*36|0)+28>>2];_[k+($<<2)>>2]=_[u+($*36|0)+32>>2];$=$+1|0}while(($|0)!=(H|0))}do{if((H|0)==2){pe=C;be=+s[pe>>2];Z=+s[pe+4>>2];pe=I;ee=+s[pe>>2];oe=+s[pe+4>>2];X=ee-be;_e=oe-Z;Z=be*X+Z*_e;if(Z>=-0.0){s[h>>2]=1.0;_[d>>2]=1;$=45;break}X=ee*X+oe*_e;if(!(X<=0.0)){be=1.0/(X-Z);s[h>>2]=X*be;s[P>>2]=-(Z*be);_[d>>2]=2;$=46;break}else{s[P>>2]=1.0;_[d>>2]=1;$=u+0|0;Y=L+0|0;te=$+36|0;do{_[$>>2]=_[Y>>2];$=$+4|0;Y=Y+4|0}while(($|0)<(te|0));$=45;break}}else if((H|0)==3){pe=C;ye=+s[pe>>2];ae=+s[pe+4>>2];pe=I;fe=+s[pe>>2];de=+s[pe+4>>2];pe=N;le=+s[pe>>2];Z=+s[pe+4>>2];he=fe-ye;ee=de-ae;oe=ye*he+ae*ee;ce=fe*he+de*ee;X=le-ye;me=Z-ae;_e=ye*X+ae*me;be=le*X+Z*me;ve=le-fe;se=Z-de;ue=fe*ve+de*se;se=le*ve+Z*se;X=he*me-ee*X;ee=(fe*Z-de*le)*X;Z=(ae*le-ye*Z)*X;X=(ye*de-ae*fe)*X;if(!(!(oe>=-0.0)|!(_e>=-0.0))){s[h>>2]=1.0;_[d>>2]=1;$=45;break}if(!(!(oe<-0.0)|!(ce>0.0)|!(X<=0.0))){ve=1.0/(ce-oe);s[h>>2]=ce*ve;s[P>>2]=-(oe*ve);_[d>>2]=2;$=46;break}if(!(!(_e<-0.0)|!(be>0.0)|!(Z<=0.0))){ve=1.0/(be-_e);s[h>>2]=be*ve;s[T>>2]=-(_e*ve);_[d>>2]=2;$=L+0|0;Y=z+0|0;te=$+36|0;do{_[$>>2]=_[Y>>2];$=$+4|0;Y=Y+4|0}while(($|0)<(te|0));$=46;break}if(!(!(ce<=0.0)|!(ue>=-0.0))){s[P>>2]=1.0;_[d>>2]=1;$=u+0|0;Y=L+0|0;te=$+36|0;do{_[$>>2]=_[Y>>2];$=$+4|0;Y=Y+4|0}while(($|0)<(te|0));$=45;break}if(!(!(be<=0.0)|!(se<=0.0))){s[T>>2]=1.0;_[d>>2]=1;$=u+0|0;Y=z+0|0;te=$+36|0;do{_[$>>2]=_[Y>>2];$=$+4|0;Y=Y+4|0}while(($|0)<(te|0));$=45;break}if(!(ue<-0.0)|!(se>0.0)|!(ee<=0.0)){$=43;break e}ve=1.0/(se-ue);s[P>>2]=se*ve;s[T>>2]=-(ue*ve);_[d>>2]=2;$=u+0|0;Y=z+0|0;te=$+36|0;do{_[$>>2]=_[Y>>2];$=$+4|0;Y=Y+4|0}while(($|0)<(te|0));$=46}else if((H|0)==1)$=45;else{$=44;break e}}while(0);do{if(($|0)==45){Y=1;Z=-+s[U>>2];X=-+s[O>>2]}else if(($|0)==46){he=+s[U>>2];X=+s[E>>2]-he;ve=+s[O>>2];Z=+s[W>>2]-ve;if(he*Z-X*ve>0.0){Y=2;Z=-Z;break}else{Y=2;X=-X;break}}}while(0);if(Z*Z+X*X<1.4210854715202004e-14){H=Y;$=71;break}te=u+(Y*36|0)|0;ce=-Z;ve=-X;oe=B*ce+A*ve;ce=B*ve-A*ce;ne=_[q>>2]|0;ie=_[J>>2]|0;if((ie|0)>1){re=0;ee=ce*+s[ne+4>>2]+oe*+s[ne>>2];pe=1;while(1){_e=oe*+s[ne+(pe<<3)>>2]+ce*+s[ne+(pe<<3)+4>>2];$=_e>ee;re=$?pe:re;pe=pe+1|0;if((pe|0)==(ie|0))break;else ee=$?_e:ee}$=u+(Y*36|0)+28|0;_[$>>2]=re;if((re|0)<=-1){$=56;break}}else{$=u+(Y*36|0)+28|0;_[$>>2]=0;re=0}if((ie|0)<=(re|0)){$=56;break}he=+s[ne+(re<<3)>>2];_e=+s[ne+(re<<3)+4>>2];ee=j+(B*he-A*_e);ve=+ee;_e=+(he*A+B*_e+G);ne=te;s[ne>>2]=ve;s[ne+4>>2]=_e;_e=D*Z+F*X;Z=D*X-Z*F;ne=_[M>>2]|0;te=_[R>>2]|0;if((te|0)>1){ie=0;oe=Z*+s[ne+4>>2]+_e*+s[ne>>2];re=1;while(1){X=_e*+s[ne+(re<<3)>>2]+Z*+s[ne+(re<<3)+4>>2];pe=X>oe;ie=pe?re:ie;re=re+1|0;if((re|0)==(te|0))break;else oe=pe?X:oe}re=u+(Y*36|0)+32|0;_[re>>2]=ie;if((ie|0)<=-1){$=63;break}}else{re=u+(Y*36|0)+32|0;_[re>>2]=0;ie=0}if((te|0)<=(ie|0)){$=63;break}le=+s[ne+(ie<<3)>>2];ve=+s[ne+(ie<<3)+4>>2];he=x+(D*le-F*ve);me=+he;ve=+(le*F+D*ve+w);pe=u+(Y*36|0)+8|0;s[pe>>2]=me;s[pe+4>>2]=ve;he=+(he-ee);ve=+(+s[u+(Y*36|0)+12>>2]-+s[u+(Y*36|0)+4>>2]);pe=u+(Y*36|0)+16|0;s[pe>>2]=he;s[pe+4>>2]=ve;Q=Q+1|0;_[1464]=(_[1464]|0)+1;if(K){$=_[$>>2]|0;K=0;do{if(($|0)==(_[S+(K<<2)>>2]|0)?(_[re>>2]|0)==(_[k+(K<<2)>>2]|0):0){$=70;break e}K=K+1|0}while((K|0)<(H|0))}H=(_[d>>2]|0)+1|0;_[d>>2]=H;if((Q|0)>=20){$=71;break}}if(($|0)==43){ve=1.0/(X+(ee+Z));s[h>>2]=ee*ve;s[P>>2]=Z*ve;s[T>>2]=X*ve;_[d>>2]=3;p=_[1466]|0;_[1466]=(p|0)>(Q|0)?p:Q;p=e+8|0;m=Q;$=75}else if(($|0)==44)Be(15688,5912,498,5960);else if(($|0)==56)Be(6800,6832,103,6880);else if(($|0)==63)Be(6800,6832,103,6880);else if(($|0)==70){H=_[d>>2]|0;$=71}do{if(($|0)==71){J=_[1466]|0;_[1466]=(J|0)>(Q|0)?J:Q;J=e+8|0;if(!H)Be(15688,5912,218,5992);else if((H|0)==1){m=u;re=_[m>>2]|0;m=_[m+4>>2]|0;p=e;_[p>>2]=re;_[p+4>>2]=m;p=u+8|0;pe=_[p>>2]|0;p=_[p+4>>2]|0;ie=J;_[ie>>2]=pe;_[ie+4>>2]=p;v=(_[a>>2]=re,+s[a>>2]);g=(_[a>>2]=pe,+s[a>>2]);l=(_[a>>2]=m,+s[a>>2]);y=(_[a>>2]=p,+s[a>>2]);p=J;m=Q;break}else if((H|0)==2){he=+s[h>>2];y=+s[P>>2];v=he*+s[u>>2]+y*+s[u+36>>2];l=he*+s[u+4>>2]+y*+s[u+40>>2];ve=+v;g=+l;p=e;s[p>>2]=ve;s[p+4>>2]=g;g=he*+s[u+8>>2]+y*+s[u+44>>2];y=he*+s[u+12>>2]+y*+s[u+48>>2];he=+g;ve=+y;p=J;s[p>>2]=he;s[p+4>>2]=ve;p=J;m=Q;break}else if((H|0)==3){p=J;m=Q;$=75;break}else Be(15688,5912,237,5992)}}while(0);if(($|0)==75){v=+s[h>>2];l=+s[P>>2];y=+s[T>>2];g=v*+s[u>>2]+l*+s[u+36>>2]+y*+s[u+72>>2];y=v*+s[u+4>>2]+l*+s[u+40>>2]+y*+s[u+76>>2];l=+g;v=+y;pe=e;s[pe>>2]=l;s[pe+4>>2]=v;pe=p;s[pe>>2]=l;s[pe+4>>2]=v;v=g;l=y}he=v-g;h=e+4|0;J=e+12|0;ve=l-y;S=e+16|0;s[S>>2]=+V(+(he*he+ve*ve));_[e+20>>2]=m;s[t>>2]=+EG(u);d=_[d>>2]|0;r[f>>1]=d;if((d|0)>0){f=0;do{i[t+f+6>>0]=_[u+(f*36|0)+28>>2];i[t+f+9>>0]=_[u+(f*36|0)+32>>2];f=f+1|0}while((f|0)<(d|0))}if(!(i[n+88>>0]|0)){b=c;return}y=+s[n+24>>2];l=+s[n+52>>2];v=+s[S>>2];g=y+l;if(!(v>g&v>1.1920928955078125e-7)){he=+((+s[e>>2]+ +s[p>>2])*.5);ve=+((+s[h>>2]+ +s[J>>2])*.5);pe=e;s[pe>>2]=he;s[pe+4>>2]=ve;pe=p;s[pe>>2]=he;s[pe+4>>2]=ve;s[S>>2]=0.0;b=c;return}s[S>>2]=v-g;D=+s[p>>2];v=+s[e>>2];j=D-v;g=+s[J>>2];x=+s[h>>2];G=g-x;A=+V(+(j*j+G*G));if(!(A<1.1920928955078125e-7)){ve=1.0/A;j=j*ve;G=G*ve}s[e>>2]=y*j+v;s[h>>2]=y*G+x;s[p>>2]=D-l*j;s[J>>2]=g-l*G;b=c;return}function EG(e){e=e|0;var t=0,n=0,i=0.0,r=0.0;t=b;n=_[e+108>>2]|0;if((n|0)==3){i=+s[e+16>>2];r=+s[e+20>>2];i=(+s[e+52>>2]-i)*(+s[e+92>>2]-r)-(+s[e+56>>2]-r)*(+s[e+88>>2]-i);b=t;return+i}else if(!n)Be(15688,5912,247,5976);else if((n|0)==2){i=+s[e+16>>2]-+s[e+52>>2];r=+s[e+20>>2]-+s[e+56>>2];r=+V(+(i*i+r*r));b=t;return+r}else if((n|0)==1){r=0.0;b=t;return+r}else Be(15688,5912,260,5976);return 0.0}function OG(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,c=0;t=b;n=e+16|0;i=_[n>>2]|0;if((i|0)==-1){r=e+8|0;o=_[r>>2]|0;i=e+12|0;if((o|0)!=(_[i>>2]|0))Be(6056,6088,58,6136);e=e+4|0;c=_[e>>2]|0;_[i>>2]=o<<1;o=kS(o*72|0)|0;_[e>>2]=o;FS(o|0,c|0,(_[r>>2]|0)*36|0)|0;wS(c);o=_[r>>2]|0;c=(_[i>>2]|0)+-1|0;e=_[e>>2]|0;if((o|0)<(c|0))do{c=o;o=o+1|0;_[e+(c*36|0)+20>>2]=o;_[e+(c*36|0)+32>>2]=-1;c=(_[i>>2]|0)+-1|0}while((o|0)<(c|0));_[e+(c*36|0)+20>>2]=-1;_[e+(((_[i>>2]|0)+-1|0)*36|0)+32>>2]=-1;i=_[r>>2]|0;_[n>>2]=i}else{r=e+8|0;e=_[e+4>>2]|0}c=e+(i*36|0)+20|0;_[n>>2]=_[c>>2];_[c>>2]=-1;_[e+(i*36|0)+24>>2]=-1;_[e+(i*36|0)+28>>2]=-1;_[e+(i*36|0)+32>>2]=0;_[e+(i*36|0)+16>>2]=0;_[r>>2]=(_[r>>2]|0)+1;b=t;return i|0}function VG(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;n=b;if((t|0)<=-1)Be(6152,6088,94,6192);if((_[e+12>>2]|0)<=(t|0))Be(6152,6088,94,6192);i=e+8|0;if((_[i>>2]|0)>0){r=e+16|0;e=_[e+4>>2]|0;_[e+(t*36|0)+20>>2]=_[r>>2];_[e+(t*36|0)+32>>2]=-1;_[r>>2]=t;_[i>>2]=(_[i>>2]|0)+-1;b=n;return}else Be(6208,6088,95,6192)}function UG(e,t){e=e|0;t=t|0;var n=0,i=0,r=0.0,o=0.0,c=0.0,p=0.0,u=0,f=0,a=0,d=0,y=0.0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0.0,A=0;n=b;a=e+24|0;_[a>>2]=(_[a>>2]|0)+1;a=_[e>>2]|0;if((a|0)==-1){_[e>>2]=t;_[(_[e+4>>2]|0)+(t*36|0)+20>>2]=-1;b=n;return}i=e+4|0;u=_[i>>2]|0;r=+s[u+(t*36|0)>>2];o=+s[u+(t*36|0)+4>>2];c=+s[u+(t*36|0)+8>>2];p=+s[u+(t*36|0)+12>>2];f=_[u+(a*36|0)+24>>2]|0;e:do{if((f|0)!=-1)do{d=_[u+(a*36|0)+28>>2]|0;h=+s[u+(a*36|0)+8>>2];G=+s[u+(a*36|0)>>2];g=+s[u+(a*36|0)+12>>2];l=+s[u+(a*36|0)+4>>2];D=((h>c?h:c)-(G<r?G:r)+((g>p?g:p)-(l<o?l:o)))*2.0;y=D*2.0;l=(D-(h-G+(g-l))*2.0)*2.0;g=+s[u+(f*36|0)>>2];G=r<g?r:g;h=+s[u+(f*36|0)+4>>2];D=o<h?o:h;J=+s[u+(f*36|0)+8>>2];m=c>J?c:J;v=+s[u+(f*36|0)+12>>2];x=p>v?p:v;if((_[u+(f*36|0)+24>>2]|0)==-1)m=(m-G+(x-D))*2.0;else m=(m-G+(x-D))*2.0-(J-g+(v-h))*2.0;m=l+m;h=+s[u+(d*36|0)>>2];D=r<h?r:h;j=+s[u+(d*36|0)+4>>2];G=o<j?o:j;g=+s[u+(d*36|0)+8>>2];J=c>g?c:g;v=+s[u+(d*36|0)+12>>2];x=p>v?p:v;if((_[u+(d*36|0)+24>>2]|0)==-1)h=(J-D+(x-G))*2.0;else h=(J-D+(x-G))*2.0-(g-h+(v-j))*2.0;l=l+h;if(y<m&y<l)break e;a=m<l?f:d;f=_[u+(a*36|0)+24>>2]|0}while((f|0)!=-1)}while(0);u=_[u+(a*36|0)+20>>2]|0;f=OG(e)|0;d=_[i>>2]|0;_[d+(f*36|0)+20>>2]=u;_[d+(f*36|0)+16>>2]=0;d=_[i>>2]|0;j=+s[d+(a*36|0)>>2];G=+s[d+(a*36|0)+4>>2];j=+(r<j?r:j);G=+(o<G?o:G);A=d+(f*36|0)|0;s[A>>2]=j;s[A+4>>2]=G;G=+s[d+(a*36|0)+8>>2];j=+s[d+(a*36|0)+12>>2];G=+(c>G?c:G);j=+(p>j?p:j);d=d+(f*36|0)+8|0;s[d>>2]=G;s[d+4>>2]=j;d=_[i>>2]|0;_[d+(f*36|0)+32>>2]=(_[d+(a*36|0)+32>>2]|0)+1;if((u|0)==-1){_[d+(f*36|0)+24>>2]=a;_[d+(f*36|0)+28>>2]=t;_[d+(a*36|0)+20>>2]=f;A=d+(t*36|0)+20|0;_[A>>2]=f;_[e>>2]=f;f=_[A>>2]|0}else{A=d+(u*36|0)+24|0;if((_[A>>2]|0)==(a|0))_[A>>2]=f;else _[d+(u*36|0)+28>>2]=f;_[d+(f*36|0)+24>>2]=a;_[d+(f*36|0)+28>>2]=t;_[d+(a*36|0)+20>>2]=f;_[d+(t*36|0)+20>>2]=f}if((f|0)==-1){b=n;return}while(1){a=HG(e,f)|0;t=_[i>>2]|0;u=_[t+(a*36|0)+24>>2]|0;f=_[t+(a*36|0)+28>>2]|0;if((u|0)==-1){i=20;break}if((f|0)==-1){i=22;break}d=_[t+(u*36|0)+32>>2]|0;A=_[t+(f*36|0)+32>>2]|0;_[t+(a*36|0)+32>>2]=((d|0)>(A|0)?d:A)+1;zG(t+(a*36|0)|0,t+(u*36|0)|0,t+(f*36|0)|0);f=_[(_[i>>2]|0)+(a*36|0)+20>>2]|0;if((f|0)==-1){i=24;break}}if((i|0)==20)Be(6288,6088,304,6304);else if((i|0)==22)Be(6320,6088,305,6304);else if((i|0)==24){b=n;return}}function NG(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,c=0,p=0;i=b;if((_[e>>2]|0)==(t|0)){_[e>>2]=-1;b=i;return}n=e+4|0;r=_[n>>2]|0;o=_[r+(t*36|0)+20>>2]|0;c=_[r+(o*36|0)+20>>2]|0;p=_[r+(o*36|0)+24>>2]|0;if((p|0)==(t|0))p=_[r+(o*36|0)+28>>2]|0;if((c|0)==-1){_[e>>2]=p;_[r+(p*36|0)+20>>2]=-1;VG(e,o);b=i;return}t=r+(c*36|0)+24|0;if((_[t>>2]|0)==(o|0))_[t>>2]=p;else _[r+(c*36|0)+28>>2]=p;_[r+(p*36|0)+20>>2]=c;VG(e,o);do{p=HG(e,c)|0;t=_[n>>2]|0;r=_[t+(p*36|0)+24>>2]|0;o=_[t+(p*36|0)+28>>2]|0;zG(t+(p*36|0)|0,t+(r*36|0)|0,t+(o*36|0)|0);t=_[n>>2]|0;r=_[t+(r*36|0)+32>>2]|0;o=_[t+(o*36|0)+32>>2]|0;_[t+(p*36|0)+32>>2]=((r|0)>(o|0)?r:o)+1;c=_[t+(p*36|0)+20>>2]|0}while((c|0)!=-1);b=i;return}function zG(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0.0,_=0.0,o=0.0,c=0.0,p=0;i=b;r=+s[t>>2];_=+s[n>>2];o=+s[t+4>>2];c=+s[n+4>>2];_=+(r<_?r:_);c=+(o<c?o:c);p=e;s[p>>2]=_;s[p+4>>2]=c;c=+s[t+8>>2];_=+s[n+8>>2];o=+s[t+12>>2];r=+s[n+12>>2];_=+(c>_?c:_);r=+(o>r?o:r);t=e+8|0;s[t>>2]=_;s[t+4>>2]=r;b=i;return}function HG(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,c=0,p=0,s=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0,h=0,v=0,g=0;n=b;if((t|0)==-1)Be(6336,6088,379,6352);c=_[e+4>>2]|0;o=c+(t*36|0)|0;y=c+(t*36|0)+24|0;d=_[y>>2]|0;if((d|0)==-1){g=t;b=n;return g|0}p=c+(t*36|0)+32|0;if((_[p>>2]|0)<2){g=t;b=n;return g|0}l=c+(t*36|0)+28|0;a=_[l>>2]|0;if((d|0)<=-1)Be(6360,6088,389,6352);f=_[e+12>>2]|0;if((d|0)>=(f|0))Be(6360,6088,389,6352);if(!((a|0)>-1&(a|0)<(f|0)))Be(6392,6088,390,6352);u=c+(d*36|0)|0;s=c+(a*36|0)|0;i=c+(a*36|0)+32|0;r=c+(d*36|0)+32|0;m=(_[i>>2]|0)-(_[r>>2]|0)|0;if((m|0)>1){g=c+(a*36|0)+24|0;d=_[g>>2]|0;y=c+(a*36|0)+28|0;m=_[y>>2]|0;v=c+(d*36|0)|0;h=c+(m*36|0)|0;if(!((d|0)>-1&(d|0)<(f|0)))Be(6424,6088,404,6352);if(!((m|0)>-1&(m|0)<(f|0)))Be(6456,6088,405,6352);_[g>>2]=t;g=c+(t*36|0)+20|0;f=c+(a*36|0)+20|0;_[f>>2]=_[g>>2];_[g>>2]=a;f=_[f>>2]|0;do{if((f|0)!=-1){e=c+(f*36|0)+24|0;if((_[e>>2]|0)==(t|0)){_[e>>2]=a;break}e=c+(f*36|0)+28|0;if((_[e>>2]|0)==(t|0)){_[e>>2]=a;break}else Be(6488,6088,421,6352)}else _[e>>2]=a}while(0);f=c+(d*36|0)+32|0;e=c+(m*36|0)+32|0;if((_[f>>2]|0)>(_[e>>2]|0)){_[y>>2]=d;_[l>>2]=m;_[c+(m*36|0)+20>>2]=t;zG(o,u,h);zG(s,o,v);r=_[r>>2]|0;g=_[e>>2]|0;g=((r|0)>(g|0)?r:g)+1|0;_[p>>2]=g;r=_[f>>2]|0;r=(g|0)>(r|0)?g:r}else{_[y>>2]=m;_[l>>2]=d;_[c+(d*36|0)+20>>2]=t;zG(o,u,v);zG(s,o,h);r=_[r>>2]|0;g=_[f>>2]|0;g=((r|0)>(g|0)?r:g)+1|0;_[p>>2]=g;r=_[e>>2]|0;r=(g|0)>(r|0)?g:r}_[i>>2]=r+1;g=a;b=n;return g|0}if((m|0)>=-1){g=t;b=n;return g|0}g=c+(d*36|0)+24|0;v=_[g>>2]|0;h=c+(d*36|0)+28|0;m=_[h>>2]|0;a=c+(v*36|0)|0;l=c+(m*36|0)|0;if(!((v|0)>-1&(v|0)<(f|0)))Be(6520,6088,464,6352);if(!((m|0)>-1&(m|0)<(f|0)))Be(6552,6088,465,6352);_[g>>2]=t;g=c+(t*36|0)+20|0;f=c+(d*36|0)+20|0;_[f>>2]=_[g>>2];_[g>>2]=d;f=_[f>>2]|0;do{if((f|0)!=-1){e=c+(f*36|0)+24|0;if((_[e>>2]|0)==(t|0)){_[e>>2]=d;break}e=c+(f*36|0)+28|0;if((_[e>>2]|0)==(t|0)){_[e>>2]=d;break}else Be(6584,6088,481,6352)}else _[e>>2]=d}while(0);f=c+(v*36|0)+32|0;e=c+(m*36|0)+32|0;if((_[f>>2]|0)>(_[e>>2]|0)){_[h>>2]=v;_[y>>2]=m;_[c+(m*36|0)+20>>2]=t;zG(o,s,l);zG(u,o,a);i=_[i>>2]|0;g=_[e>>2]|0;g=((i|0)>(g|0)?i:g)+1|0;_[p>>2]=g;i=_[f>>2]|0;i=(g|0)>(i|0)?g:i}else{_[h>>2]=m;_[y>>2]=v;_[c+(v*36|0)+20>>2]=t;zG(o,s,a);zG(u,o,l);i=_[i>>2]|0;g=_[f>>2]|0;g=((i|0)>(g|0)?i:g)+1|0;_[p>>2]=g;i=_[e>>2]|0;i=(g|0)>(i|0)?g:i}_[r>>2]=i+1;g=d;b=n;return g|0}function QG(e,t,n,i){e=e|0;t=t|0;n=n|0;i=+i;var r=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0,a=0.0,d=0.0,y=0.0,l=0.0,m=0.0,h=0.0,v=0,g=0.0,J=0.0;f=b;l=1.0-i;a=l*+s[e+32>>2]+ +s[e+36>>2]*i;d=+z(+a);a=+N(+a);o=+s[e+8>>2];u=+s[e+12>>2];p=l*+s[e+16>>2]+ +s[e+24>>2]*i-(a*o-d*u);u=l*+s[e+20>>2]+ +s[e+28>>2]*i-(d*o+a*u);o=l*+s[e+68>>2]+ +s[e+72>>2]*i;c=+z(+o);o=+N(+o);m=+s[e+44>>2];h=+s[e+48>>2];r=l*+s[e+52>>2]+ +s[e+60>>2]*i-(o*m-c*h);i=l*+s[e+56>>2]+ +s[e+64>>2]*i-(c*m+o*h);v=_[e+80>>2]|0;if((v|0)==1){y=+s[e+92>>2];l=+s[e+96>>2];m=+s[e+84>>2];h=+s[e+88>>2];e=_[e+4>>2]|0;if((n|0)<=-1)Be(6800,6832,103,6880);if((_[e+20>>2]|0)<=(n|0))Be(6800,6832,103,6880);v=(_[e+16>>2]|0)+(n<<3)|0;J=+s[v>>2];g=+s[v+4>>2];h=(a*y-d*l)*(r+(o*J-c*g)-(p+(a*m-d*h)))+(d*y+a*l)*(i+(c*J+o*g)-(u+(d*m+a*h)));b=f;return+h}else if((v|0)==2){m=+s[e+92>>2];h=+s[e+96>>2];y=+s[e+84>>2];l=+s[e+88>>2];e=_[e>>2]|0;if((t|0)<=-1)Be(6800,6832,103,6880);if((_[e+20>>2]|0)<=(t|0))Be(6800,6832,103,6880);v=(_[e+16>>2]|0)+(t<<3)|0;g=+s[v>>2];J=+s[v+4>>2];J=(o*m-c*h)*(p+(a*g-d*J)-(r+(o*y-c*l)))+(c*m+o*h)*(u+(d*g+a*J)-(i+(c*y+o*l)));b=f;return+J}else if(!v){v=_[e>>2]|0;if((t|0)<=-1)Be(6800,6832,103,6880);if((_[v+20>>2]|0)<=(t|0))Be(6800,6832,103,6880);t=(_[v+16>>2]|0)+(t<<3)|0;y=+s[t>>2];l=+s[t+4>>2];t=_[e+4>>2]|0;if((n|0)<=-1)Be(6800,6832,103,6880);if((_[t+20>>2]|0)<=(n|0))Be(6800,6832,103,6880);v=(_[t+16>>2]|0)+(n<<3)|0;g=+s[v>>2];J=+s[v+4>>2];J=+s[e+92>>2]*(r+(o*g-c*J)-(p+(a*y-d*l)))+ +s[e+96>>2]*(i+(c*g+o*J)-(u+(d*y+a*l)));b=f;return+J}else Be(15688,6720,239,6784);return 0.0}function KG(e){e=e|0;var t=0;t=b;_[e>>2]=6952;wS(_[e+12>>2]|0);wS(e);b=t;return}function $G(e){e=e|0;var t=0,n=0;t=b;_[e>>2]=6952;n=e+12|0;wS(_[n>>2]|0);_[n>>2]=0;_[e+16>>2]=0;b=t;return}function ZG(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,c=0,p=0,u=0.0,f=0.0,a=0.0,d=0.0;o=b;i=e+12|0;if(_[i>>2]|0)Be(6984,7024,60,7144);c=e+16|0;if(_[c>>2]|0)Be(6984,7024,60,7144);if((n|0)<=1)Be(7160,7024,61,7144);f=+s[t>>2];u=+s[t+4>>2];p=1;while(1){d=f;f=+s[t+(p<<3)>>2];d=d-f;a=u;u=+s[t+(p<<3)+4>>2];a=a-u;p=p+1|0;if(!(d*d+a*a>2499999936844688.0e-20)){p=9;break}if((p|0)>=(n|0)){p=10;break}}if((p|0)==9)Be(7176,7024,66,7144);else if((p|0)==10){_[c>>2]=n;p=kS(n<<3)|0;_[i>>2]=p;FS(p|0,t|0,_[c>>2]<<3|0)|0;p=e+20|0;_[p+0>>2]=0;_[p+4>>2]=0;_[p+8>>2]=0;_[p+12>>2]=0;r[p+16>>1]=0;b=o;return}}function YG(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,c=0;n=b;t=xj(t,40)|0;if(!t)t=0;else{_[t>>2]=6952;_[t+4>>2]=3;s[t+8>>2]=.009999999776482582;_[t+12>>2]=0;_[t+16>>2]=0;i[t+36>>0]=0;i[t+37>>0]=0}ZG(t,_[e+12>>2]|0,_[e+16>>2]|0);r=e+20|0;o=_[r+4>>2]|0;c=t+20|0;_[c>>2]=_[r>>2];_[c+4>>2]=o;c=e+28|0;o=_[c+4>>2]|0;r=t+28|0;_[r>>2]=_[c>>2];_[r+4>>2]=o;i[t+36>>0]=i[e+36>>0]|0;i[t+37>>0]=i[e+37>>0]|0;b=n;return t|0}function XG(e){e=e|0;return(_[e+16>>2]|0)+-1|0}function ej(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,c=0,p=0,u=0,f=0,a=0;r=b;if((n|0)<=-1)Be(7240,7024,112,7280);o=e+16|0;if(((_[o>>2]|0)+-1|0)<=(n|0))Be(7240,7024,112,7280);_[t+4>>2]=1;s[t+8>>2]=+s[e+8>>2];c=e+12|0;p=(_[c>>2]|0)+(n<<3)|0;u=_[p+4>>2]|0;f=t+12|0;_[f>>2]=_[p>>2];_[f+4>>2]=u;f=(_[c>>2]|0)+(n+1<<3)|0;u=_[f+4>>2]|0;p=t+20|0;_[p>>2]=_[f>>2];_[p+4>>2]=u;p=t+28|0;if((n|0)>0){a=(_[c>>2]|0)+(n+-1<<3)|0;u=_[a+4>>2]|0;f=p;_[f>>2]=_[a>>2];_[f+4>>2]=u;i[t+44>>0]=1}else{u=e+20|0;f=_[u+4>>2]|0;a=p;_[a>>2]=_[u>>2];_[a+4>>2]=f;i[t+44>>0]=i[e+36>>0]|0}p=t+36|0;if(((_[o>>2]|0)+-2|0)>(n|0)){u=(_[c>>2]|0)+(n+2<<3)|0;f=_[u+4>>2]|0;a=p;_[a>>2]=_[u>>2];_[a+4>>2]=f;i[t+45>>0]=1;b=r;return}else{u=e+28|0;f=_[u+4>>2]|0;a=p;_[a>>2]=_[u>>2];_[a+4>>2]=f;i[t+45>>0]=i[e+37>>0]|0;b=r;return}}function tj(e,t,n){e=e|0;t=t|0;n=n|0;return 0}function nj(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var c=0,p=0,u=0,f=0,a=0,d=0;c=b;b=b+48|0;p=c;u=_[e+16>>2]|0;if((u|0)>(o|0)){_[p>>2]=7472;_[p+4>>2]=1;s[p+8>>2]=.009999999776482582;f=p+28|0;_[f+0>>2]=0;_[f+4>>2]=0;_[f+8>>2]=0;_[f+12>>2]=0;r[f+16>>1]=0;f=o+1|0;e=_[e+12>>2]|0;d=e+(o<<3)|0;a=_[d+4>>2]|0;o=p+12|0;_[o>>2]=_[d>>2];_[o+4>>2]=a;u=e+(((f|0)==(u|0)?0:f)<<3)|0;o=_[u+4>>2]|0;e=p+20|0;_[e>>2]=_[u>>2];_[e+4>>2]=o;e=dj(p,t,n,i,0)|0;b=c;return e|0}else Be(7296,7024,152,12248);return 0}function ij(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,c=0.0,p=0.0,u=0.0,f=0.0,a=0.0,d=0.0,y=0.0,l=0.0,m=0;r=b;o=_[e+16>>2]|0;if((o|0)>(i|0)){m=i+1|0;o=(m|0)==(o|0)?0:m;e=_[e+12>>2]|0;d=+s[n+12>>2];a=+s[e+(i<<3)>>2];y=+s[n+8>>2];u=+s[e+(i<<3)+4>>2];p=+s[n>>2];f=p+(d*a-y*u);l=+s[n+4>>2];u=a*y+d*u+l;a=+s[e+(o<<3)>>2];c=+s[e+(o<<3)+4>>2];p=p+(d*a-y*c);c=l+(y*a+d*c);d=+(f<p?f:p);a=+(u<c?u:c);e=t;s[e>>2]=d;s[e+4>>2]=a;p=+(f>p?f:p);c=+(u>c?u:c);e=t+8|0;s[e>>2]=p;s[e+4>>2]=c;b=r;return}else Be(7296,7024,171,7320)}function rj(e,t,n){e=e|0;t=t|0;n=+n;e=b;_[t+0>>2]=0;_[t+4>>2]=0;_[t+8>>2]=0;_[t+12>>2]=0;b=e;return}function _j(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0;n=b;t=xj(t,20)|0;if(!t)t=0;else{_[t>>2]=7400;i=t+4|0;_[i+0>>2]=0;_[i+4>>2]=0;_[i+8>>2]=0;_[i+12>>2]=0}o=e+4|0;i=_[o+4>>2]|0;r=t+4|0;_[r>>2]=_[o>>2];_[r+4>>2]=i;r=e+12|0;e=_[r+4>>2]|0;i=t+12|0;_[i>>2]=_[r>>2];_[i+4>>2]=e;b=n;return t|0}function oj(e){e=e|0;return 1}function cj(e,t,n){e=e|0;t=t|0;n=n|0;var i=0.0,r=0.0,_=0.0,o=0.0,c=0.0;i=+s[t+12>>2];c=+s[e+12>>2];o=+s[t+8>>2];r=+s[e+16>>2];_=+s[n>>2]-(+s[t>>2]+(i*c-o*r));r=+s[n+4>>2]-(+s[t+4>>2]+(c*o+i*r));i=+s[e+8>>2];return _*_+r*r<=i*i|0}function pj(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var _=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0.0;r=b;f=+s[i+12>>2];p=+s[e+12>>2];a=+s[i+8>>2];o=+s[e+16>>2];u=+s[n>>2];_=u-(+s[i>>2]+(f*p-a*o));c=+s[n+4>>2];o=c-(+s[i+4>>2]+(p*a+f*o));f=+s[e+8>>2];u=+s[n+8>>2]-u;c=+s[n+12>>2]-c;a=_*u+o*c;p=u*u+c*c;f=a*a-(_*_+o*o-f*f)*p;if(f<0.0|p<1.1920928955078125e-7){i=0;b=r;return i|0}a=a+ +V(+f);f=-a;if(!(a<=-0.0)){i=0;b=r;return i|0}if(!(p*+s[n+16>>2]>=f)){i=0;b=r;return i|0}a=f/p;s[t+8>>2]=a;_=_+u*a;c=o+c*a;a=+_;o=+c;i=t;s[i>>2]=a;s[i+4>>2]=o;o=+V(+(_*_+c*c));if(o<1.1920928955078125e-7){i=1;b=r;return i|0}a=1.0/o;s[t>>2]=_*a;s[t+4>>2]=c*a;i=1;b=r;return i|0}function sj(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0.0,_=0.0,o=0.0,c=0.0,p=0.0;r=+s[n+12>>2];p=+s[e+12>>2];c=+s[n+8>>2];_=+s[e+16>>2];o=+s[n>>2]+(r*p-c*_);_=+s[n+4>>2]+(p*c+r*_);i=e+8|0;r=+s[i>>2];s[t>>2]=o-r;s[t+4>>2]=_-r;r=+s[i>>2];s[t+8>>2]=o+r;s[t+12>>2]=_+r;return}function uj(e,t,n){e=e|0;t=t|0;n=+n;var i=0.0,r=0.0,o=0.0,c=0,p=0,u=0,b=0,f=0;p=e+8|0;o=+s[p>>2];o=o*n*3.1415927410125732*o;s[t>>2]=o;c=e+12|0;f=c;b=_[f+4>>2]|0;u=t+4|0;_[u>>2]=_[f>>2];_[u+4>>2]=b;r=+s[p>>2];i=+s[c>>2];n=+s[e+16>>2];s[t+12>>2]=o*(r*r*.5+(i*i+n*n));return}function bj(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,c=0;n=b;t=xj(t,48)|0;if(!t)t=0;else{_[t>>2]=7472;_[t+4>>2]=1;s[t+8>>2]=.009999999776482582;i=t+28|0;_[i+0>>2]=0;_[i+4>>2]=0;_[i+8>>2]=0;_[i+12>>2]=0;r[i+16>>1]=0}c=e+4|0;o=_[c+4>>2]|0;i=t+4|0;_[i>>2]=_[c>>2];_[i+4>>2]=o;i=t+12|0;e=e+12|0;_[i+0>>2]=_[e+0>>2];_[i+4>>2]=_[e+4>>2];_[i+8>>2]=_[e+8>>2];_[i+12>>2]=_[e+12>>2];_[i+16>>2]=_[e+16>>2];_[i+20>>2]=_[e+20>>2];_[i+24>>2]=_[e+24>>2];_[i+28>>2]=_[e+28>>2];r[i+32>>1]=r[e+32>>1]|0;b=n;return t|0}function fj(e){e=e|0;return 1}function aj(e,t,n){e=e|0;t=t|0;n=n|0;return 0}function dj(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var _=0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0.0,d=0.0,y=0.0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0,J=0;r=b;f=+s[i>>2];u=+s[n>>2]-f;a=+s[i+4>>2];c=+s[n+4>>2]-a;_=i+12|0;l=+s[_>>2];i=i+8|0;p=+s[i>>2];o=u*l+c*p;u=l*c-u*p;f=+s[n+8>>2]-f;a=+s[n+12>>2]-a;c=l*f+p*a-o;f=l*a-p*f-u;J=e+12|0;p=+s[J>>2];a=+s[J+4>>2];e=e+20|0;l=+s[e>>2];l=l-p;y=+s[e+4>>2]-a;v=-l;d=l*l+y*y;m=+V(+d);if(m<1.1920928955078125e-7)h=y;else{g=1.0/m;h=y*g;v=g*v}m=(a-u)*v+(p-o)*h;g=f*v+c*h;if(g==0.0){J=0;b=r;return J|0}g=m/g;if(g<0.0){J=0;b=r;return J|0}if(d==0.0?1:+s[n+16>>2]<g){J=0;b=r;return J|0}l=(l*(o+c*g-p)+y*(u+f*g-a))/d;if(l<0.0|l>1.0){J=0;b=r;return J|0}s[t+8>>2]=g;g=+s[_>>2];c=+s[i>>2];o=h*g-v*c;c=v*g+h*c;if(m>0.0){v=+-o;g=+-c;J=t;s[J>>2]=v;s[J+4>>2]=g;J=1;b=r;return J|0}else{v=+o;g=+c;J=t;s[J>>2]=v;s[J+4>>2]=g;J=1;b=r;return J|0}return 0}function yj(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0.0,_=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0.0;i=b;c=+s[n+12>>2];f=+s[e+12>>2];u=+s[n+8>>2];o=+s[e+16>>2];_=+s[n>>2];p=_+(c*f-u*o);a=+s[n+4>>2];o=f*u+c*o+a;f=+s[e+20>>2];r=+s[e+24>>2];_=_+(c*f-u*r);r=a+(u*f+c*r);c=+s[e+8>>2];f=+((p<_?p:_)-c);u=+((o<r?o:r)-c);n=t;s[n>>2]=f;s[n+4>>2]=u;_=+(c+(p>_?p:_));r=+(c+(o>r?o:r));n=t+8|0;s[n>>2]=_;s[n+4>>2]=r;b=i;return}function lj(e,t,n){e=e|0;t=t|0;n=+n;var i=0,r=0.0;i=b;s[t>>2]=0.0;r=+((+s[e+12>>2]+ +s[e+20>>2])*.5);n=+((+s[e+16>>2]+ +s[e+24>>2])*.5);e=t+4|0;s[e>>2]=r;s[e+4>>2]=n;s[t+12>>2]=0.0;b=i;return}function mj(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0;n=b;t=xj(t,152)|0;if(!t)t=0;else{_[t>>2]=7832;_[t+4>>2]=2;s[t+8>>2]=.009999999776482582;_[t+148>>2]=0;s[t+12>>2]=0.0;s[t+16>>2]=0.0}o=e+4|0;r=_[o+4>>2]|0;i=t+4|0;_[i>>2]=_[o>>2];_[i+4>>2]=r;FS(t+12|0,e+12|0,140)|0;b=n;return t|0}function hj(e){e=e|0;return 1}function vj(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0.0,o=0.0,c=0.0,p=0.0,u=0.0;i=b;c=+s[n>>2]-+s[t>>2];p=+s[n+4>>2]-+s[t+4>>2];u=+s[t+12>>2];o=+s[t+8>>2];r=c*u+p*o;o=u*p-c*o;t=_[e+148>>2]|0;if((t|0)>0)n=0;else{n=1;b=i;return n|0}while(1){if((r-+s[e+(n<<3)+20>>2])*+s[e+(n<<3)+84>>2]+(o-+s[e+(n<<3)+24>>2])*+s[e+(n<<3)+88>>2]>0.0){t=0;e=4;break}n=n+1|0;if((n|0)>=(t|0)){t=1;e=4;break}}if((e|0)==4){b=i;return t|0}return 0}function gj(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,c=0.0,p=0.0,u=0,f=0.0,a=0.0,d=0.0,y=0,l=0.0,m=0.0,h=0.0,v=0,g=0.0,J=0.0,D=0.0,x=0.0;r=b;a=+s[i>>2];f=+s[n>>2]-a;D=+s[i+4>>2];m=+s[n+4>>2]-D;u=i+12|0;J=+s[u>>2];i=i+8|0;l=+s[i>>2];d=f*J+m*l;f=J*m-f*l;a=+s[n+8>>2]-a;D=+s[n+12>>2]-D;m=J*a+l*D-d;a=J*D-l*a-f;y=_[e+148>>2]|0;l=+s[n+16>>2];do{if((y|0)>0){v=0;n=-1;h=0.0;g=l;e:while(1){x=+s[e+(v<<3)+84>>2];D=+s[e+(v<<3)+88>>2];J=(+s[e+(v<<3)+20>>2]-d)*x+(+s[e+(v<<3)+24>>2]-f)*D;D=m*x+a*D;do{if(D==0.0){if(J<0.0){o=0;y=17;break e}}else{if(D<0.0?J<h*D:0){n=v;h=J/D;break}if(D>0.0?J<g*D:0)g=J/D}}while(0);v=v+1|0;if(g<h){o=0;y=17;break}if((v|0)>=(y|0)){y=12;break}}if((y|0)==12){if(h>=0.0){c=l;o=n;p=h;break}Be(7712,7568,328,12248)}else if((y|0)==17){b=r;return o|0}}else{c=l;o=-1;p=0.0}}while(0);if(!(p<=c))Be(7712,7568,328,12248);if((o|0)<=-1){v=0;b=r;return v|0}s[t+8>>2]=p;J=+s[u>>2];h=+s[e+(o<<3)+84>>2];g=+s[i>>2];x=+s[e+(o<<3)+88>>2];D=+(J*h-g*x);x=+(h*g+J*x);v=t;s[v>>2]=D;s[v+4>>2]=x;v=1;b=r;return v|0}function Jj(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0.0,d=0.0,y=0,l=0.0,m=0.0,h=0.0;i=b;r=+s[n+12>>2];a=+s[e+20>>2];o=+s[n+8>>2];d=+s[e+24>>2];c=+s[n>>2];u=c+(r*a-o*d);p=+s[n+4>>2];d=a*o+r*d+p;n=_[e+148>>2]|0;if((n|0)>1){f=u;a=d;y=1;do{h=+s[e+(y<<3)+20>>2];l=+s[e+(y<<3)+24>>2];m=c+(r*h-o*l);l=h*o+r*l+p;f=f<m?f:m;a=a<l?a:l;u=u>m?u:m;d=d>l?d:l;y=y+1|0}while((y|0)<(n|0))}else{a=d;f=u}h=+s[e+8>>2];l=+(f-h);m=+(a-h);y=t;s[y>>2]=l;s[y+4>>2]=m;m=+(u+h);h=+(d+h);y=t+8|0;s[y>>2]=m;s[y+4>>2]=h;b=i;return}function Dj(e,t,n){e=e|0;t=t|0;n=+n;var i=0,r=0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0.0,d=0,y=0.0,l=0,m=0,h=0,v=0,g=0.0,J=0,D=0.0,x=0.0,G=0.0,j=0.0;i=b;r=_[e+148>>2]|0;if((r|0)>2){c=0.0;o=0.0;d=0}else Be(7760,7568,385,7776);do{o=o+ +s[e+(d<<3)+20>>2];c=c+ +s[e+(d<<3)+24>>2];d=d+1|0}while((d|0)<(r|0));a=1.0/+(r|0);o=o*a;a=c*a;h=e+20|0;J=e+24|0;u=0.0;f=0.0;c=0.0;p=0.0;v=0;do{g=+s[e+(v<<3)+20>>2]-o;y=+s[e+(v<<3)+24>>2]-a;v=v+1|0;d=(v|0)<(r|0);if(d){l=e+(v<<3)+20|0;m=e+(v<<3)+24|0}else{l=h;m=J}x=+s[l>>2]-o;D=+s[m>>2]-a;G=g*D-y*x;j=G*.5;p=p+j;j=j*.3333333432674408;u=u+(g+x)*j;f=f+(y+D)*j;c=c+G*.0833333358168602*(x*x+(g*g+g*x)+(D*D+(y*y+y*D)))}while(d);y=p*n;s[t>>2]=y;if(p>1.1920928955078125e-7){j=1.0/p;G=u*j;j=f*j;D=o+G;x=a+j;a=+D;g=+x;J=t+4|0;s[J>>2]=a;s[J+4>>2]=g;s[t+12>>2]=c*n+y*(D*D+x*x-(G*G+j*j));b=i;return}else Be(7792,7568,431,7776)}function xj(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,c=0,p=0,s=0,u=0;n=b;if(!t){s=0;b=n;return s|0}if((t|0)<=0)Be(8744,8672,102,8992);if((t|0)>640){s=kS(t)|0;b=n;return s|0}s=i[7992+t>>0]|0;o=s&255;if((s&255)>=14)Be(8760,8672,110,8992);t=e+(o<<2)+12|0;r=_[t>>2]|0;if(r){_[t>>2]=_[r>>2];s=r;b=n;return s|0}r=e+4|0;c=_[r>>2]|0;p=e+8|0;if((c|0)==(_[p>>2]|0)){s=_[e>>2]|0;c=c+128|0;_[p>>2]=c;c=kS(c<<3)|0;_[e>>2]=c;FS(c|0,s|0,_[r>>2]<<3|0)|0;RS((_[e>>2]|0)+(_[r>>2]<<3)|0,0,1024)|0;wS(s);c=_[r>>2]|0}s=_[e>>2]|0;p=kS(16384)|0;e=s+(c<<3)+4|0;_[e>>2]=p;o=_[7936+(o<<2)>>2]|0;_[s+(c<<3)>>2]=o;c=16384/(o|0)|0;if((te(c,o)|0)>=16385)Be(8800,8672,138,8992);c=c+-1|0;if((c|0)>0){s=0;do{u=s;s=s+1|0;_[p+(te(u,o)|0)>>2]=p+(te(s,o)|0);p=_[e>>2]|0}while((s|0)!=(c|0))}_[p+(te(c,o)|0)>>2]=0;_[t>>2]=_[_[e>>2]>>2];_[r>>2]=(_[r>>2]|0)+1;u=_[e>>2]|0;b=n;return u|0}function Gj(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=b;if(!n){b=r;return}if((n|0)<=0)Be(8744,8672,162,9032);if((n|0)>640){wS(t);b=r;return}n=i[7992+n>>0]|0;if((n&255)>=14)Be(8760,8672,171,9032);n=e+((n&255)<<2)+12|0;_[t>>2]=_[n>>2];_[n>>2]=t;b=r;return}function jj(e,t,n){e=e|0;t=t|0;n=n|0;var i=0.0,r=0.0,_=0.0,o=0.0,c=0.0,p=0.0,u=0.0,b=0.0,f=0.0,a=0.0,d=0.0,y=0.0,l=0.0,m=0.0,h=0.0,v=0.0;r=+s[t+16>>2];b=+s[t+32>>2];o=+s[t+20>>2];i=+s[t+28>>2];d=r*b-o*i;u=+s[t+24>>2];_=+s[t+12>>2];a=o*u-b*_;f=i*_-r*u;p=+s[t>>2];c=+s[t+4>>2];y=+s[t+8>>2];l=d*p+c*a+f*y;if(l!=0.0)l=1.0/l;m=+s[n>>2];h=+s[n+4>>2];v=+s[n+8>>2];s[e>>2]=l*(d*m+h*a+f*v);s[e+4>>2]=l*((h*b-v*i)*p+c*(v*u-b*m)+(i*m-h*u)*y);s[e+8>>2]=l*((r*v-o*h)*p+c*(o*m-v*_)+(h*_-r*m)*y);return}function Aj(e,t,n,i){e=e|0;t=t|0;n=+n;i=+i;var r=0.0,_=0.0,o=0.0,c=0.0,p=0.0;_=+s[t>>2];o=+s[t+12>>2];r=+s[t+4>>2];c=+s[t+16>>2];p=_*c-o*r;if(p!=0.0)p=1.0/p;s[e>>2]=p*(c*n-o*i);s[e+4>>2]=p*(_*i-r*n);return}function Sj(e,t){e=e|0;t=t|0;var n=0,i=0.0,r=0.0,o=0.0,c=0.0,p=0.0;n=b;i=+s[e>>2];o=+s[e+12>>2];r=+s[e+4>>2];c=+s[e+16>>2];p=i*c-o*r;if(p!=0.0)p=1.0/p;s[t>>2]=c*p;c=-p;s[t+12>>2]=o*c;s[t+8>>2]=0.0;s[t+4>>2]=r*c;s[t+16>>2]=i*p;e=t+20|0;_[e+0>>2]=0;_[e+4>>2]=0;_[e+8>>2]=0;_[e+12>>2]=0;b=n;return}function Cj(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,_=0.0,o=0.0,c=0.0,p=0.0,u=0.0,b=0.0,f=0.0;i=+s[e+16>>2];n=+s[e+32>>2];b=i*n;f=+s[e+20>>2];_=+s[e+28>>2];o=+s[e+24>>2];c=+s[e+12>>2];u=n*c;p=_*c-i*o;r=+s[e>>2];f=(b-f*_)*r+ +s[e+4>>2]*(f*o-u)+p*+s[e+8>>2];if(f!=0.0)f=1.0/f;s[t>>2]=f*(b-_*_);b=f*(o*_-u);s[t+4>>2]=b;u=f*p;s[t+8>>2]=u;s[t+12>>2]=b;s[t+16>>2]=f*(r*n-o*o);b=f*(c*o-r*_);s[t+20>>2]=b;s[t+24>>2]=u;s[t+28>>2]=b;s[t+32>>2]=f*(r*i-c*c);return}function Bj(e,t){e=e|0;t=t|0;var n=0,i=0;n=b;b=b+16|0;i=n;_[i>>2]=t;Ne(e|0,i|0)|0;b=n;return}function kj(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,c=0,p=0,s=0;r=b;n=e+102796|0;o=_[n>>2]|0;if((o|0)>=32)Be(8952,8856,38,8992);c=e+(o*12|0)+102412|0;_[e+(o*12|0)+102416>>2]=t;p=e+102400|0;s=_[p>>2]|0;if((s+t|0)>102400){_[c>>2]=kS(t)|0;i[e+(o*12|0)+102420>>0]=1}else{_[c>>2]=e+s;i[e+(o*12|0)+102420>>0]=0;_[p>>2]=(_[p>>2]|0)+t}s=e+102404|0;p=(_[s>>2]|0)+t|0;_[s>>2]=p;s=e+102408|0;t=_[s>>2]|0;_[s>>2]=(t|0)>(p|0)?t:p;_[n>>2]=(_[n>>2]|0)+1;b=r;return _[c>>2]|0}function wj(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,c=0;r=b;n=e+102796|0;o=_[n>>2]|0;if((o|0)<=0)Be(9008,8856,63,9032);c=o+-1|0;if((_[e+(c*12|0)+102412>>2]|0)!=(t|0))Be(9040,8856,65,9032);if(!(i[e+(c*12|0)+102420>>0]|0)){t=e+(c*12|0)+102416|0;c=e+102400|0;_[c>>2]=(_[c>>2]|0)-(_[t>>2]|0)}else{wS(t);t=e+(c*12|0)+102416|0;o=_[n>>2]|0}c=e+102404|0;_[c>>2]=(_[c>>2]|0)-(_[t>>2]|0);_[n>>2]=o+-1;b=r;return}function Mj(e){e=e|0;var t=0,n=0,i=0,o=0,c=0.0,p=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0.0,h=0.0,v=0,g=0.0,J=0.0,D=0.0,x=0,G=0.0;o=b;b=b+16|0;a=o;u=e+116|0;f=e+120|0;i=e+124|0;p=e+128|0;n=e+28|0;s[n>>2]=0.0;s[e+32>>2]=0.0;_[u+0>>2]=0;_[u+4>>2]=0;_[u+8>>2]=0;_[u+12>>2]=0;d=_[e>>2]|0;if((d|0)==1|(d|0)==0){l=e+12|0;y=_[l>>2]|0;l=_[l+4>>2]|0;v=e+36|0;_[v>>2]=y;_[v+4>>2]=l;v=e+44|0;_[v>>2]=y;_[v+4>>2]=l;s[e+52>>2]=+s[e+56>>2];b=o;return}else if((d|0)==2){v=_[e+100>>2]|0;if(v){d=a+4|0;y=a+8|0;l=a+12|0;g=0.0;m=0.0;h=0.0;J=0.0;do{D=+s[v>>2];if(!(D==0.0)){x=_[v+12>>2]|0;Dq[_[(_[x>>2]|0)+28>>2]&63](x,a,D);g=+s[a>>2];m=g+ +s[u>>2];s[u>>2]=m;h=h+g*+s[d>>2];J=J+g*+s[y>>2];g=+s[l>>2]+ +s[i>>2];s[i>>2]=g}v=_[v+4>>2]|0}while((v|0)!=0);if(m>0.0){D=1.0/m;s[f>>2]=D;h=h*D;J=J*D}else t=11}else{J=0.0;h=0.0;g=0.0;t=11}if((t|0)==11){s[u>>2]=1.0;s[f>>2]=1.0;m=1.0}do{if(g>0.0?(r[e+4>>1]&16)==0:0){m=g-(J*J+h*h)*m;s[i>>2]=m;if(m>0.0){c=1.0/m;break}else Be(9528,9088,334,9512)}else t=17}while(0);if((t|0)==17){s[i>>2]=0.0;c=0.0}s[p>>2]=c;x=e+44|0;v=x;D=+s[v>>2];m=+s[v+4>>2];G=+h;c=+J;v=n;s[v>>2]=G;s[v+4>>2]=c;c=+s[e+24>>2];G=+s[e+20>>2];g=+s[e+12>>2]+(c*h-G*J);h=h*G+c*J+ +s[e+16>>2];c=+g;J=+h;s[x>>2]=c;s[x+4>>2]=J;x=e+36|0;s[x>>2]=c;s[x+4>>2]=J;J=+s[e+72>>2];x=e+64|0;s[x>>2]=+s[x>>2]-J*(h-m);x=e+68|0;s[x>>2]=J*(g-D)+ +s[x>>2];b=o;return}else Be(9480,9088,299,9512)}function Rj(e){e=e|0;var t=0,n=0,i=0,r=0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0;t=b;b=b+16|0;i=t;p=+s[e+52>>2];u=+z(+p);s[i+8>>2]=u;p=+N(+p);s[i+12>>2]=p;f=+s[e+28>>2];o=+s[e+32>>2];c=+(+s[e+36>>2]-(p*f-u*o));o=+(+s[e+40>>2]-(f*u+p*o));n=i;s[n>>2]=c;s[n+4>>2]=o;n=(_[e+88>>2]|0)+102872|0;r=_[e+100>>2]|0;if(!r){b=t;return}e=e+12|0;do{rA(r,n,i,e);r=_[r+4>>2]|0}while((r|0)!=0);b=t;return}function qj(e,t){e=e|0;t=t|0;var n=0,o=0,c=0,p=0,u=0,f=0,a=0,d=0,y=0,l=0.0;n=b;o=e+88|0;a=_[o>>2]|0;if(_[a+102868>>2]&2)Be(9352,9088,168,9392);u=xj(a,44)|0;if(!u)u=0;else{r[u+32>>1]=1;r[u+34>>1]=-1;r[u+36>>1]=0;_[u+40>>2]=0;_[u+24>>2]=0;_[u+28>>2]=0;_[u+0>>2]=0;_[u+4>>2]=0;_[u+8>>2]=0;_[u+12>>2]=0}_[u+40>>2]=_[t+4>>2];s[u+16>>2]=+s[t+8>>2];s[u+20>>2]=+s[t+12>>2];c=u+8|0;_[c>>2]=e;p=u+4|0;_[p>>2]=0;f=u+32|0;y=t+22|0;r[f+0>>1]=r[y+0>>1]|0;r[f+2>>1]=r[y+2>>1]|0;r[f+4>>1]=r[y+4>>1]|0;i[u+38>>0]=i[t+20>>0]|0;f=_[t>>2]|0;f=Gq[_[(_[f>>2]|0)+8>>2]&63](f,a)|0;_[u+12>>2]=f;f=hq[_[(_[f>>2]|0)+12>>2]&63](f)|0;y=xj(a,f*28|0)|0;a=u+24|0;_[a>>2]=y;if((f|0)>0){d=0;do{_[y+(d*28|0)+16>>2]=0;y=_[a>>2]|0;_[y+(d*28|0)+24>>2]=-1;d=d+1|0}while((d|0)!=(f|0))}_[u+28>>2]=0;l=+s[t+16>>2];s[u>>2]=l;if(r[e+4>>1]&32){nA(u,(_[o>>2]|0)+102872|0,e+12|0);l=+s[u>>2]}y=e+100|0;_[p>>2]=_[y>>2];_[y>>2]=u;y=e+104|0;_[y>>2]=(_[y>>2]|0)+1;_[c>>2]=e;if(!(l>0.0)){y=_[o>>2]|0;y=y+102868|0;d=_[y>>2]|0;d=d|1;_[y>>2]=d;b=n;return u|0}Mj(e);y=_[o>>2]|0;y=y+102868|0;d=_[y>>2]|0;d=d|1;_[y>>2]=d;b=n;return u|0}function Fj(e,t){e=e|0;t=t|0;var n=0,r=0;n=b;if((_[e>>2]|0)!=2?(_[t>>2]|0)!=2:0)t=0;else r=3;e:do{if((r|0)==3){r=_[e+108>>2]|0;if(!r)t=1;else while(1){if((_[r>>2]|0)==(t|0)?(i[(_[r+4>>2]|0)+61>>0]|0)==0:0){t=0;break e}r=_[r+12>>2]|0;if(!r){t=1;break}}}}while(0);b=n;return t|0}function Pj(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,p=0.0;t=b;b=b+16|0;n=t;r=e+8|0;i=_[r>>2]|0;Bj(12072,n);Bj(9592,n);_[n>>2]=_[e>>2];Bj(9616,n);p=+s[e+16>>2];u[a>>3]=+s[e+12>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];o=n+8|0;u[a>>3]=p;_[o>>2]=_[a>>2];_[o+4>>2]=_[a+4>>2];Bj(9648,n);u[a>>3]=+s[e+56>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(9688,n);p=+s[e+68>>2];u[a>>3]=+s[e+64>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];o=n+8|0;u[a>>3]=p;_[o>>2]=_[a>>2];_[o+4>>2]=_[a+4>>2];Bj(9712,n);u[a>>3]=+s[e+72>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(9760,n);u[a>>3]=+s[e+132>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(9800,n);u[a>>3]=+s[e+136>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(9832,n);o=e+4|0;_[n>>2]=(c[o>>1]|0)&4;Bj(9864,n);_[n>>2]=(c[o>>1]|0)&2;Bj(9896,n);_[n>>2]=(c[o>>1]|0)&16;Bj(9920,n);_[n>>2]=(c[o>>1]|0)&8;Bj(9952,n);_[n>>2]=(c[o>>1]|0)&32;Bj(9984,n);u[a>>3]=+s[e+140>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(10016,n);_[n>>2]=_[r>>2];Bj(10048,n);Bj(11360,n);e=_[e+100>>2]|0;if(!e){Bj(12080,n);b=t;return}do{Bj(10096,n);_A(e,i);Bj(10104,n);e=_[e+4>>2]|0}while((e|0)!=0);Bj(12080,n);b=t;return}function Tj(e){e=e|0;return}function Lj(e){e=e|0;return}function Ij(e,t){e=e|0;t=t|0;var n=0,o=0,p=0,u=0,f=0,a=0,d=0,y=0;n=b;p=t+48|0;o=t+52|0;f=_[(_[p>>2]|0)+8>>2]|0;u=_[(_[o>>2]|0)+8>>2]|0;a=_[e+72>>2]|0;if((a|0)!=0?(_[t+4>>2]&2|0)!=0:0)lq[_[(_[a>>2]|0)+12>>2]&127](a,t);d=t+8|0;y=_[d>>2]|0;a=t+12|0;if(y)_[y+12>>2]=_[a>>2];y=_[a>>2]|0;if(y)_[y+8>>2]=_[d>>2];d=e+60|0;if((_[d>>2]|0)==(t|0))_[d>>2]=_[a>>2];d=t+24|0;y=_[d>>2]|0;a=t+28|0;if(y)_[y+12>>2]=_[a>>2];y=_[a>>2]|0;if(y)_[y+8>>2]=_[d>>2];f=f+112|0;if((t+16|0)==(_[f>>2]|0))_[f>>2]=_[a>>2];a=t+40|0;d=_[a>>2]|0;f=t+44|0;if(d)_[d+12>>2]=_[f>>2];d=_[f>>2]|0;if(d)_[d+8>>2]=_[a>>2];u=u+112|0;if((t+32|0)==(_[u>>2]|0))_[u>>2]=_[f>>2];u=_[e+76>>2]|0;if(!(i[13392]|0))Be(13552,13448,103,15752);p=_[p>>2]|0;o=_[o>>2]|0;if(((_[t+124>>2]|0)>0?(i[p+38>>0]|0)==0:0)?(i[o+38>>0]|0)==0:0){f=_[p+8>>2]|0;a=f+4|0;d=c[a>>1]|0;if(!(d&2)){r[a>>1]=d|2;s[f+144>>2]=0.0}f=_[o+8>>2]|0;d=f+4|0;a=c[d>>1]|0;if(!(a&2)){r[d>>1]=a|2;s[f+144>>2]=0.0}}p=_[(_[p+12>>2]|0)+4>>2]|0;o=_[(_[o+12>>2]|0)+4>>2]|0;if((p|0)>-1&(o|0)<4){lq[_[13200+(p*48|0)+(o*12|0)+4>>2]&127](t,u);y=e+64|0;_[y>>2]=(_[y>>2]|0)+-1;b=n;return}else Be(13576,13448,119,15752)}function Wj(e){e=e|0;var t=0,n=0,o=0,p=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0,h=0,v=0,g=0,J=0,D=0,x=0,G=0,j=0,A=0,S=0,C=0,B=0,k=0,w=0;t=b;b=b+1040|0;p=t;o=e+52|0;_[o>>2]=0;u=e+40|0;G=_[u>>2]|0;do{if((G|0)>0){D=e+32|0;m=e+56|0;J=e+12|0;v=e+4|0;h=p+4|0;d=p+1028|0;g=p+1032|0;l=e+48|0;f=e+44|0;x=0;while(1){S=_[(_[D>>2]|0)+(x<<2)>>2]|0;_[m>>2]=S;if((S|0)!=-1){if((S|0)<=-1){d=7;break}if((_[J>>2]|0)<=(S|0)){d=7;break}C=_[v>>2]|0;_[p>>2]=h;_[d>>2]=0;_[g>>2]=256;Hj(p,e);if((_[d>>2]|0)>0){A=C+(S*36|0)|0;G=C+(S*36|0)+4|0;j=C+(S*36|0)+8|0;S=C+(S*36|0)+12|0;do{C=Qj(p)|0;do{if((C|0)!=-1?(y=_[v>>2]|0,!((+s[A>>2]-+s[y+(C*36|0)+8>>2]>0.0?1:+s[G>>2]-+s[y+(C*36|0)+12>>2]>0.0)|+s[y+(C*36|0)>>2]-+s[j>>2]>0.0|+s[y+(C*36|0)+4>>2]-+s[S>>2]>0.0)):0){B=y+(C*36|0)+24|0;if((_[B>>2]|0)!=-1){Hj(p,B);Hj(p,y+(C*36|0)+28|0);break}B=_[m>>2]|0;if((B|0)!=(C|0)){k=_[o>>2]|0;if((k|0)==(_[l>>2]|0)){B=_[f>>2]|0;_[l>>2]=k<<1;k=kS(k<<4)|0;_[f>>2]=k;FS(k|0,B|0,_[o>>2]<<3|0)|0;wS(B);B=_[m>>2]|0;k=_[o>>2]|0}w=_[f>>2]|0;_[w+(k<<3)>>2]=(B|0)>(C|0)?C:B;k=_[m>>2]|0;_[w+(_[o>>2]<<3)+4>>2]=(k|0)<(C|0)?C:k;_[o>>2]=(_[o>>2]|0)+1}}}while(0)}while((_[d>>2]|0)>0)}G=_[p>>2]|0;if((G|0)!=(h|0)){wS(G);_[p>>2]=0}G=_[u>>2]|0}x=x+1|0;if((x|0)>=(G|0)){d=23;break}}if((d|0)==7)Be(12256,12200,164,12320);else if((d|0)==23){n=f;a=_[o>>2]|0;break}}else{n=e+44|0;a=0}}while(0);_[u>>2]=0;w=_[n>>2]|0;_[p>>2]=58;Oj(w,w+(a<<3)|0,p);if((_[o>>2]|0)<=0){b=t;return}d=e+12|0;a=e+4|0;f=e+68|0;u=e+76|0;p=e+60|0;e=e+64|0;h=_[n>>2]|0;l=h;h=_[h>>2]|0;m=0;e:while(1){y=l+(m<<3)|0;if((h|0)<=-1){d=28;break}g=_[d>>2]|0;if((g|0)<=(h|0)){d=28;break}v=_[a>>2]|0;l=l+(m<<3)+4|0;J=_[l>>2]|0;if(!((J|0)>-1&(g|0)>(J|0))){d=30;break}x=_[v+(h*36|0)+16>>2]|0;J=_[v+(J*36|0)+16>>2]|0;g=_[x+16>>2]|0;h=_[J+16>>2]|0;v=_[x+20>>2]|0;J=_[J+20>>2]|0;x=_[g+8>>2]|0;D=_[h+8>>2]|0;t:do{if((x|0)!=(D|0)){C=_[D+112>>2]|0;if(C)do{if((_[C>>2]|0)==(x|0)){S=_[C+4>>2]|0;G=_[S+48>>2]|0;j=_[S+52>>2]|0;A=_[S+56>>2]|0;S=_[S+60>>2]|0;if((G|0)==(g|0)&(j|0)==(h|0)&(A|0)==(v|0)&(S|0)==(J|0))break t;if((G|0)==(h|0)&(j|0)==(g|0)&(A|0)==(J|0)&(S|0)==(v|0))break t}C=_[C+12>>2]|0}while((C|0)!=0);if(Fj(D,x)|0){D=_[f>>2]|0;if((D|0)!=0?!(bq[_[(_[D>>2]|0)+8>>2]&63](D,g,h)|0):0)break;D=_[u>>2]|0;if(!(i[13392]|0)){_[3300]=46;_[3301]=98;i[13208]=1;_[3324]=47;_[3325]=99;i[13304]=1;_[3306]=47;_[3307]=99;i[13232]=0;_[3330]=48;_[3331]=100;i[13328]=1;_[3312]=49;_[3313]=101;i[13256]=1;_[3303]=49;_[3304]=101;i[13220]=0;_[3318]=50;_[3319]=102;i[13280]=1;_[3327]=50;_[3328]=102;i[13316]=0;_[3336]=51;_[3337]=103;i[13352]=1;_[3309]=51;_[3310]=103;i[13244]=0;_[3342]=52;_[3343]=104;i[13376]=1;_[3333]=52;_[3334]=104;i[13340]=0;i[13392]=1}x=_[(_[g+12>>2]|0)+4>>2]|0;G=_[(_[h+12>>2]|0)+4>>2]|0;if(x>>>0>=4){d=43;break e}if(G>>>0>=4){d=45;break e}j=_[13200+(x*48|0)+(G*12|0)>>2]|0;if(j){if(!(i[13200+(x*48|0)+(G*12|0)+8>>0]|0))D=jq[j&63](h,J,g,v,D)|0;else D=jq[j&63](g,v,h,J,D)|0;if(D){J=_[D+48>>2]|0;g=_[D+52>>2]|0;v=_[J+8>>2]|0;h=_[g+8>>2]|0;_[D+8>>2]=0;_[D+12>>2]=_[p>>2];x=_[p>>2]|0;if(x)_[x+8>>2]=D;_[p>>2]=D;j=D+16|0;_[D+20>>2]=D;_[j>>2]=h;_[D+24>>2]=0;x=v+112|0;_[D+28>>2]=_[x>>2];G=_[x>>2]|0;if(G)_[G+8>>2]=j;_[x>>2]=j;x=D+32|0;_[D+36>>2]=D;_[x>>2]=v;_[D+40>>2]=0;G=h+112|0;_[D+44>>2]=_[G>>2];D=_[G>>2]|0;if(D)_[D+8>>2]=x;_[G>>2]=x;do{if(!(i[J+38>>0]|0)){if(i[g+38>>0]|0)break;g=v+4|0;J=c[g>>1]|0;if(!(J&2)){r[g>>1]=J|2;s[v+144>>2]=0.0}g=h+4|0;v=c[g>>1]|0;if(v&2)break;r[g>>1]=v|2;s[h+144>>2]=0.0}}while(0);_[e>>2]=(_[e>>2]|0)+1}}}}}while(0);v=_[o>>2]|0;while(1){m=m+1|0;if((m|0)>=(v|0)){d=68;break e}g=_[n>>2]|0;h=_[g+(m<<3)>>2]|0;if((h|0)!=(_[y>>2]|0)){l=g;continue e}if((_[g+(m<<3)+4>>2]|0)!=(_[l>>2]|0)){l=g;continue e}}}if((d|0)==28)Be(12256,12200,158,12304);else if((d|0)==30)Be(12256,12200,158,12304);else if((d|0)==43)Be(13400,13448,80,15744);else if((d|0)==45)Be(13504,13448,81,15744);else if((d|0)==68){b=t;return}}function Ej(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;n=b;r=_[e>>2]|0;i=_[t>>2]|0;if((r|0)>=(i|0))if((r|0)==(i|0))e=(_[e+4>>2]|0)<(_[t+4>>2]|0);else e=0;else e=1;b=n;return e|0}function Oj(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,c=0,p=0,s=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0,h=0,v=0,g=0;i=b;b=b+16|0;r=i;e:while(1){p=t;c=t+-8|0;t:while(1){s=e;a=p-s|0;d=a>>3;switch(d|0){case 5:{o=8;break e};case 1:case 0:{o=51;break e};case 3:{o=6;break e};case 2:{o=4;break e};case 4:{o=7;break e};default:{}}if((a|0)<248){o=10;break e}f=(d|0)/2|0;u=e+(f<<3)|0;if((a|0)>7992){a=(d|0)/4|0;a=Nj(e,e+(a<<3)|0,u,e+(a+f<<3)|0,c,n)|0}else a=Vj(e,u,c,n)|0;do{if(Gq[_[n>>2]&63](e,u)|0)d=c;else{d=c;while(1){d=d+-8|0;if((e|0)==(d|0))break;if(Gq[_[n>>2]&63](d,u)|0){o=34;break}}if((o|0)==34){o=0;y=e;f=_[y>>2]|0;y=_[y+4>>2]|0;h=d;m=_[h+4>>2]|0;l=e;_[l>>2]=_[h>>2];_[l+4>>2]=m;l=d;_[l>>2]=f;_[l+4>>2]=y;a=a+1|0;break}s=e+8|0;if(!(Gq[_[n>>2]&63](e,c)|0)){if((s|0)==(c|0)){o=51;break e}while(1){u=s+8|0;if(Gq[_[n>>2]&63](e,s)|0)break;if((u|0)==(c|0)){o=51;break e}else s=u}h=s;m=_[h>>2]|0;h=_[h+4>>2]|0;y=c;l=_[y+4>>2]|0;_[s>>2]=_[y>>2];_[s+4>>2]=l;s=c;_[s>>2]=m;_[s+4>>2]=h;s=u}if((s|0)==(c|0)){o=51;break e}else f=c;while(1){while(1){u=s+8|0;if(Gq[_[n>>2]&63](e,s)|0)break;else s=u}do{f=f+-8|0}while(Gq[_[n>>2]&63](e,f)|0);if(s>>>0>=f>>>0){e=s;continue t}h=s;m=_[h>>2]|0;h=_[h+4>>2]|0;y=f;l=_[y+4>>2]|0;_[s>>2]=_[y>>2];_[s+4>>2]=l;s=f;_[s>>2]=m;_[s+4>>2]=h;s=u}}}while(0);f=e+8|0;n:do{if(f>>>0<d>>>0)while(1){l=f;while(1){f=l+8|0;if(Gq[_[n>>2]&63](l,u)|0)l=f;else{y=d;break}}do{y=y+-8|0}while(!(Gq[_[n>>2]&63](y,u)|0));if(l>>>0>y>>>0){f=l;break n}h=l;m=_[h>>2]|0;h=_[h+4>>2]|0;g=y;v=_[g+4>>2]|0;d=l;_[d>>2]=_[g>>2];_[d+4>>2]=v;d=y;_[d>>2]=m;_[d+4>>2]=h;d=y;u=(u|0)==(l|0)?y:u;a=a+1|0}}while(0);if((f|0)!=(u|0)?Gq[_[n>>2]&63](u,f)|0:0){v=f;h=_[v>>2]|0;v=_[v+4>>2]|0;l=u;m=_[l+4>>2]|0;g=f;_[g>>2]=_[l>>2];_[g+4>>2]=m;g=u;_[g>>2]=h;_[g+4>>2]=v;a=a+1|0}if(!a){a=zj(e,f,n)|0;u=f+8|0;if(zj(u,t,n)|0){o=46;break}if(a){e=u;continue}}g=f;if((g-s|0)>=(p-g|0)){o=50;break}Oj(e,f,n);e=f+8|0}if((o|0)==46){o=0;if(a){o=51;break}else{t=f;continue}}else if((o|0)==50){o=0;Oj(f+8|0,t,n);t=f;continue}}if((o|0)==4){if(!(Gq[_[n>>2]&63](c,e)|0)){b=i;return}v=e;h=_[v>>2]|0;v=_[v+4>>2]|0;l=c;m=_[l+4>>2]|0;g=e;_[g>>2]=_[l>>2];_[g+4>>2]=m;g=c;_[g>>2]=h;_[g+4>>2]=v;b=i;return}else if((o|0)==6){Vj(e,e+8|0,c,n)|0;b=i;return}else if((o|0)==7){Uj(e,e+8|0,e+16|0,c,n)|0;b=i;return}else if((o|0)==8){Nj(e,e+8|0,e+16|0,e+24|0,c,n)|0;b=i;return}else if((o|0)==10){p=e+16|0;Vj(e,e+8|0,p,n)|0;o=e+24|0;if((o|0)==(t|0)){b=i;return}while(1){if(Gq[_[n>>2]&63](o,p)|0){v=o;g=_[v+4>>2]|0;c=r;_[c>>2]=_[v>>2];_[c+4>>2]=g;c=o;while(1){h=p;v=_[h+4>>2]|0;g=c;_[g>>2]=_[h>>2];_[g+4>>2]=v;if((p|0)==(e|0))break;c=p+-8|0;if(Gq[_[n>>2]&63](r,c)|0){g=p;p=c;c=g}else break}h=r;v=_[h+4>>2]|0;g=p;_[g>>2]=_[h>>2];_[g+4>>2]=v}c=o+8|0;if((c|0)==(t|0))break;else{p=o;o=c}}b=i;return}else if((o|0)==51){b=i;return}}function Vj(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,c=0,p=0,s=0,u=0;r=b;p=Gq[_[i>>2]&63](t,e)|0;o=Gq[_[i>>2]&63](n,t)|0;if(!p){if(!o){p=0;b=r;return p|0}c=t;o=_[c>>2]|0;c=_[c+4>>2]|0;u=n;s=_[u+4>>2]|0;p=t;_[p>>2]=_[u>>2];_[p+4>>2]=s;p=n;_[p>>2]=o;_[p+4>>2]=c;if(!(Gq[_[i>>2]&63](t,e)|0)){u=1;b=r;return u|0}s=e;p=_[s>>2]|0;s=_[s+4>>2]|0;i=t;c=_[i+4>>2]|0;u=e;_[u>>2]=_[i>>2];_[u+4>>2]=c;u=t;_[u>>2]=p;_[u+4>>2]=s;u=2;b=r;return u|0}c=e;p=_[c>>2]|0;c=_[c+4>>2]|0;if(o){i=n;s=_[i+4>>2]|0;u=e;_[u>>2]=_[i>>2];_[u+4>>2]=s;u=n;_[u>>2]=p;_[u+4>>2]=c;u=1;b=r;return u|0}o=t;s=_[o+4>>2]|0;u=e;_[u>>2]=_[o>>2];_[u+4>>2]=s;u=t;_[u>>2]=p;_[u+4>>2]=c;if(!(Gq[_[i>>2]&63](n,t)|0)){u=1;b=r;return u|0}s=t;p=_[s>>2]|0;s=_[s+4>>2]|0;e=n;c=_[e+4>>2]|0;u=t;_[u>>2]=_[e>>2];_[u+4>>2]=c;u=n;_[u>>2]=p;_[u+4>>2]=s;u=2;b=r;return u|0}function Uj(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,c=0,p=0,s=0,u=0,f=0,a=0;o=b;c=Vj(e,t,n,r)|0;if(!(Gq[_[r>>2]&63](i,n)|0)){i=c;b=o;return i|0}p=n;s=_[p>>2]|0;p=_[p+4>>2]|0;a=i;f=_[a+4>>2]|0;u=n;_[u>>2]=_[a>>2];_[u+4>>2]=f;_[i>>2]=s;_[i+4>>2]=p;if(!(Gq[_[r>>2]&63](n,t)|0)){a=c+1|0;b=o;return a|0}f=t;u=_[f>>2]|0;f=_[f+4>>2]|0;p=n;s=_[p+4>>2]|0;a=t;_[a>>2]=_[p>>2];_[a+4>>2]=s;a=n;_[a>>2]=u;_[a+4>>2]=f;if(!(Gq[_[r>>2]&63](t,e)|0)){a=c+2|0;b=o;return a|0}f=e;u=_[f>>2]|0;f=_[f+4>>2]|0;p=t;s=_[p+4>>2]|0;a=e;_[a>>2]=_[p>>2];_[a+4>>2]=s;a=t;_[a>>2]=u;_[a+4>>2]=f;a=c+3|0;b=o;return a|0}function Nj(e,t,n,i,r,o){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;var c=0,p=0,s=0,u=0,f=0,a=0,d=0;c=b;p=Uj(e,t,n,i,o)|0;if(!(Gq[_[o>>2]&63](r,i)|0)){r=p;b=c;return r|0}s=i;u=_[s>>2]|0;s=_[s+4>>2]|0;d=r;a=_[d+4>>2]|0;f=i;_[f>>2]=_[d>>2];_[f+4>>2]=a;_[r>>2]=u;_[r+4>>2]=s;if(!(Gq[_[o>>2]&63](i,n)|0)){d=p+1|0;b=c;return d|0}a=n;f=_[a>>2]|0;a=_[a+4>>2]|0;s=i;u=_[s+4>>2]|0;d=n;_[d>>2]=_[s>>2];_[d+4>>2]=u;d=i;_[d>>2]=f;_[d+4>>2]=a;if(!(Gq[_[o>>2]&63](n,t)|0)){d=p+2|0;b=c;return d|0}a=t;f=_[a>>2]|0;a=_[a+4>>2]|0;s=n;u=_[s+4>>2]|0;d=t;_[d>>2]=_[s>>2];_[d+4>>2]=u;d=n;_[d>>2]=f;_[d+4>>2]=a;if(!(Gq[_[o>>2]&63](t,e)|0)){d=p+3|0;b=c;return d|0}a=e;f=_[a>>2]|0;a=_[a+4>>2]|0;s=t;u=_[s+4>>2]|0;d=e;_[d>>2]=_[s>>2];_[d+4>>2]=u;d=t;_[d>>2]=f;_[d+4>>2]=a;d=p+4|0;b=c;return d|0}function zj(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,c=0,p=0,s=0,u=0,f=0,a=0,d=0;i=b;b=b+16|0;o=i;switch(t-e>>3|0){case 2:{r=t+-8|0;if(!(Gq[_[n>>2]&63](r,e)|0)){u=1;b=i;return u|0}s=e;p=_[s>>2]|0;s=_[s+4>>2]|0;t=r;c=_[t+4>>2]|0;u=e;_[u>>2]=_[t>>2];_[u+4>>2]=c;u=r;_[u>>2]=p;_[u+4>>2]=s;u=1;b=i;return u|0};case 4:{Uj(e,e+8|0,e+16|0,t+-8|0,n)|0;u=1;b=i;return u|0};case 5:{Nj(e,e+8|0,e+16|0,e+24|0,t+-8|0,n)|0;u=1;b=i;return u|0};case 3:{Vj(e,e+8|0,t+-8|0,n)|0;u=1;b=i;return u|0};case 1:case 0:{u=1;b=i;return u|0};default:{u=e+16|0;Vj(e,e+8|0,u,n)|0;c=e+24|0;if((c|0)==(t|0)){u=1;b=i;return u|0}else p=0;while(1){if(Gq[_[n>>2]&63](c,u)|0){a=c;f=_[a+4>>2]|0;s=o;_[s>>2]=_[a>>2];_[s+4>>2]=f;s=c;while(1){d=u;f=_[d+4>>2]|0;a=s;_[a>>2]=_[d>>2];_[a+4>>2]=f;if((u|0)==(e|0))break;s=u+-8|0;if(Gq[_[n>>2]&63](o,s)|0){d=u;u=s;s=d}else break}f=o;a=_[f+4>>2]|0;d=u;_[d>>2]=_[f>>2];_[d+4>>2]=a;p=p+1|0;if((p|0)==8)break}s=c+8|0;if((s|0)==(t|0)){e=1;r=15;break}else{u=c;c=s}}if((r|0)==15){b=i;return e|0}d=(c+8|0)==(t|0);b=i;return d|0}}return 0}function Hj(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,c=0;i=b;n=e+1028|0;r=_[n>>2]|0;o=e+1032|0;if((r|0)==(_[o>>2]|0)?(c=_[e>>2]|0,_[o>>2]=r<<1,o=kS(r<<3)|0,_[e>>2]=o,FS(o|0,c|0,_[n>>2]<<2|0)|0,(c|0)!=(e+4|0)):0)wS(c);_[(_[e>>2]|0)+(_[n>>2]<<2)>>2]=_[t>>2];_[n>>2]=(_[n>>2]|0)+1;b=i;return}function Qj(e){e=e|0;var t=0,n=0;t=e+1028|0;n=_[t>>2]|0;if((n|0)>0){n=n+-1|0;_[t>>2]=n;return _[(_[e>>2]|0)+(n<<2)>>2]|0}else Be(10128,10144,67,10192);return 0}function Kj(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function $j(e,t){e=e|0;t=t|0;return}function Zj(e,t){e=e|0;t=t|0;return}function Yj(e,t,n){e=e|0;t=t|0;n=n|0;return}function Xj(e,t,n){e=e|0;t=t|0;n=n|0;return}function eA(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function tA(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;n=b;if(_[e+28>>2]|0)Be(10232,10256,72,15752);i=e+12|0;r=_[i>>2]|0;r=hq[_[(_[r>>2]|0)+12>>2]&63](r)|0;e=e+24|0;Gj(t,_[e>>2]|0,r*28|0);_[e>>2]=0;e=_[i>>2]|0;r=_[e+4>>2]|0;if((r|0)==2){dq[_[_[e>>2]>>2]&127](e);Gj(t,e,152);_[i>>2]=0;b=n;return}else if(!r){dq[_[_[e>>2]>>2]&127](e);Gj(t,e,20);_[i>>2]=0;b=n;return}else if((r|0)==3){dq[_[_[e>>2]>>2]&127](e);Gj(t,e,40);_[i>>2]=0;b=n;return}else if((r|0)==1){dq[_[_[e>>2]>>2]&127](e);Gj(t,e,48);_[i>>2]=0;b=n;return}else Be(15688,10256,115,15752)}function nA(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,c=0,p=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0.0,h=0.0;i=b;r=e+28|0;if(_[r>>2]|0)Be(10232,10256,124,10304);o=e+12|0;f=_[o>>2]|0;f=hq[_[(_[f>>2]|0)+12>>2]&63](f)|0;_[r>>2]=f;if((f|0)<=0){b=i;return}c=e+24|0;p=t+4|0;u=t+28|0;f=0;do{a=_[c>>2]|0;y=a+(f*28|0)|0;d=_[o>>2]|0;Aq[_[(_[d>>2]|0)+24>>2]&63](d,y,n,f);d=OG(t)|0;m=+(+s[y>>2]+-.10000000149011612);h=+(+s[a+(f*28|0)+4>>2]+-.10000000149011612);l=(_[p>>2]|0)+(d*36|0)|0;s[l>>2]=m;s[l+4>>2]=h;h=+(+s[a+(f*28|0)+8>>2]+.10000000149011612);m=+(+s[a+(f*28|0)+12>>2]+.10000000149011612);l=(_[p>>2]|0)+(d*36|0)+8|0;s[l>>2]=h;s[l+4>>2]=m;_[(_[p>>2]|0)+(d*36|0)+16>>2]=y;_[(_[p>>2]|0)+(d*36|0)+32>>2]=0;UG(t,d);_[u>>2]=(_[u>>2]|0)+1;qG(t,d);_[a+(f*28|0)+24>>2]=d;_[a+(f*28|0)+16>>2]=e;_[a+(f*28|0)+20>>2]=f;f=f+1|0}while((f|0)<(_[r>>2]|0));b=i;return}function iA(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,c=0,p=0,s=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0;i=b;n=e+28|0;if((_[n>>2]|0)<=0){_[n>>2]=0;b=i;return}e=e+24|0;c=t+40|0;p=t+32|0;o=t+28|0;r=t+12|0;u=t+4|0;s=0;while(1){a=(_[e>>2]|0)+(s*28|0)+24|0;f=_[a>>2]|0;l=_[c>>2]|0;if((l|0)>0){d=_[p>>2]|0;y=0;do{m=d+(y<<2)|0;if((_[m>>2]|0)==(f|0)){_[m>>2]=-1;l=_[c>>2]|0}y=y+1|0}while((y|0)<(l|0))}_[o>>2]=(_[o>>2]|0)+-1;if((f|0)<=-1){t=10;break}if((_[r>>2]|0)<=(f|0)){t=10;break}if((_[(_[u>>2]|0)+(f*36|0)+24>>2]|0)!=-1){t=12;break}NG(t,f);VG(t,f);_[a>>2]=-1;s=s+1|0;if((s|0)>=(_[n>>2]|0)){t=14;break}}if((t|0)==10)Be(12256,6088,123,6224);else if((t|0)==12)Be(6240,6088,124,6224);else if((t|0)==14){_[n>>2]=0;b=i;return}}function rA(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,c=0,p=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0,h=0,v=0,g=0,J=0,D=0,x=0,G=0.0,j=0.0,A=0.0,S=0.0,C=0.0,B=0,k=0,w=0,M=0.0,R=0.0,q=0;r=b;b=b+32|0;c=r+16|0;p=r;o=e+28|0;if((_[o>>2]|0)<=0){b=r;return}u=e+24|0;d=e+12|0;y=c+4|0;l=p+4|0;m=c+8|0;h=p+8|0;v=c+12|0;g=p+12|0;J=i+4|0;D=n+4|0;f=t+12|0;e=t+4|0;a=0;while(1){w=_[u>>2]|0;B=_[d>>2]|0;k=w+(a*28|0)+20|0;Aq[_[(_[B>>2]|0)+24>>2]&63](B,c,n,_[k>>2]|0);B=_[d>>2]|0;Aq[_[(_[B>>2]|0)+24>>2]&63](B,p,i,_[k>>2]|0);k=w+(a*28|0)|0;j=+s[c>>2];S=+s[p>>2];S=j<S?j:S;j=+s[y>>2];R=+s[l>>2];A=+S;R=+(j<R?j:R);B=k;s[B>>2]=A;s[B+4>>2]=R;B=w+(a*28|0)+8|0;R=+s[m>>2];A=+s[h>>2];A=R>A?R:A;R=+s[v>>2];j=+s[g>>2];G=+A;j=+(R>j?R:j);x=B;s[x>>2]=G;s[x+4>>2]=j;j=+s[i>>2]-+s[n>>2];G=+s[J>>2]-+s[D>>2];x=_[w+(a*28|0)+24>>2]|0;if((x|0)<=-1){t=5;break}if((_[f>>2]|0)<=(x|0)){t=5;break}q=_[e>>2]|0;if((_[q+(x*36|0)+24>>2]|0)!=-1){t=7;break}if(!(((+s[q+(x*36|0)>>2]<=S?+s[q+(x*36|0)+4>>2]<=+s[w+(a*28|0)+4>>2]:0)?A<=+s[q+(x*36|0)+8>>2]:0)?+s[w+(a*28|0)+12>>2]<=+s[q+(x*36|0)+12>>2]:0)){NG(t,x);q=k;R=+s[q>>2];S=+s[q+4>>2];q=B;C=+s[q>>2];R=R+-.10000000149011612;S=S+-.10000000149011612;C=C+.10000000149011612;A=+s[q+4>>2]+.10000000149011612;M=j*2.0;j=G*2.0;if(M<0.0)G=R+M;else{G=R;C=M+C}if(j<0.0)S=S+j;else A=j+A;q=_[e>>2]|0;R=+G;M=+S;w=q+(x*36|0)|0;s[w>>2]=R;s[w+4>>2]=M;M=+C;R=+A;q=q+(x*36|0)+8|0;s[q>>2]=M;s[q+4>>2]=R;UG(t,x);qG(t,x)}a=a+1|0;if((a|0)>=(_[o>>2]|0)){t=20;break}}if((t|0)==5)Be(12256,6088,132,6272);else if((t|0)==7)Be(6240,6088,134,6272);else if((t|0)==20){b=r;return}}function _A(e,t){e=e|0;t=t|0;var n=0,i=0,p=0,f=0,d=0,y=0,l=0.0,m=0.0;i=b;b=b+32|0;n=i;Bj(10320,n);u[a>>3]=+s[e+16>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(10344,n);u[a>>3]=+s[e+20>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(10376,n);u[a>>3]=+s[e>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(10408,n);_[n>>2]=o[e+38>>0];Bj(10440,n);_[n>>2]=c[e+32>>1];Bj(10472,n);_[n>>2]=c[e+34>>1];Bj(10520,n);_[n>>2]=r[e+36>>1];Bj(10560,n);e=_[e+12>>2]|0;p=_[e+4>>2]|0;if((p|0)==1){Bj(10704,n);u[a>>3]=+s[e+8>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(10632,n);y=e+28|0;l=+s[y+4>>2];u[a>>3]=+s[y>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];y=n+8|0;u[a>>3]=l;_[y>>2]=_[a>>2];_[y+4>>2]=_[a+4>>2];Bj(10728,n);l=+s[e+16>>2];u[a>>3]=+s[e+12>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];y=n+8|0;u[a>>3]=l;_[y>>2]=_[a>>2];_[y+4>>2]=_[a+4>>2];Bj(10776,n);y=e+20|0;l=+s[y+4>>2];u[a>>3]=+s[y>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];y=n+8|0;u[a>>3]=l;_[y>>2]=_[a>>2];_[y+4>>2]=_[a+4>>2];Bj(10824,n);l=+s[e+40>>2];u[a>>3]=+s[e+36>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];y=n+8|0;u[a>>3]=l;_[y>>2]=_[a>>2];_[y+4>>2]=_[a+4>>2];Bj(10872,n);_[n>>2]=o[e+44>>0];Bj(10920,n);_[n>>2]=o[e+45>>0];Bj(10960,n)}else if((p|0)==2){Bj(11e3,n);_[n>>2]=8;Bj(11032,n);p=e+148|0;f=_[p>>2]|0;if((f|0)>0){e=e+20|0;d=0;do{m=+s[e+(d<<3)>>2];l=+s[e+(d<<3)+4>>2];_[n>>2]=d;f=n+4|0;u[a>>3]=m;_[f>>2]=_[a>>2];_[f+4>>2]=_[a+4>>2];f=n+12|0;u[a>>3]=l;_[f>>2]=_[a>>2];_[f+4>>2]=_[a+4>>2];Bj(11056,n);d=d+1|0;f=_[p>>2]|0}while((d|0)<(f|0))}_[n>>2]=f;Bj(11096,n)}else if(!p){Bj(10600,n);u[a>>3]=+s[e+8>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(10632,n);m=+s[e+16>>2];u[a>>3]=+s[e+12>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];y=n+8|0;u[a>>3]=m;_[y>>2]=_[a>>2];_[y+4>>2]=_[a+4>>2];Bj(10664,n)}else if((p|0)==3){Bj(11120,n);p=e+16|0;_[n>>2]=_[p>>2];Bj(11032,n);f=_[p>>2]|0;if((f|0)>0){y=e+12|0;d=0;do{f=_[y>>2]|0;l=+s[f+(d<<3)>>2];m=+s[f+(d<<3)+4>>2];_[n>>2]=d;f=n+4|0;u[a>>3]=l;_[f>>2]=_[a>>2];_[f+4>>2]=_[a+4>>2];f=n+12|0;u[a>>3]=m;_[f>>2]=_[a>>2];_[f+4>>2]=_[a+4>>2];Bj(11056,n);d=d+1|0;f=_[p>>2]|0}while((d|0)<(f|0))}_[n>>2]=f;Bj(11152,n);y=e+20|0;m=+s[y+4>>2];u[a>>3]=+s[y>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];y=n+8|0;u[a>>3]=m;_[y>>2]=_[a>>2];_[y+4>>2]=_[a+4>>2];Bj(11184,n);y=e+28|0;m=+s[y+4>>2];u[a>>3]=+s[y>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];y=n+8|0;u[a>>3]=m;_[y>>2]=_[a>>2];_[y+4>>2]=_[a+4>>2];Bj(11232,n);_[n>>2]=o[e+36>>0];Bj(11280,n);_[n>>2]=o[e+37>>0];Bj(11320,n)}else{b=i;return}Bj(11360,n);Bj(11368,n);Bj(11360,n);_[n>>2]=t;Bj(11392,n);b=i;return}function oA(e,t,n,i,r,o){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;var c=0,p=0;c=b;p=e+40|0;_[p>>2]=t;_[e+44>>2]=n;_[e+48>>2]=i;_[e+28>>2]=0;_[e+36>>2]=0;_[e+32>>2]=0;_[e>>2]=r;_[e+4>>2]=o;_[e+8>>2]=kj(r,t<<2)|0;_[e+12>>2]=kj(_[e>>2]|0,n<<2)|0;_[e+16>>2]=kj(_[e>>2]|0,i<<2)|0;_[e+24>>2]=kj(_[e>>2]|0,(_[p>>2]|0)*12|0)|0;_[e+20>>2]=kj(_[e>>2]|0,(_[p>>2]|0)*12|0)|0;b=c;return}function cA(e){e=e|0;var t=0;t=b;wj(_[e>>2]|0,_[e+20>>2]|0);wj(_[e>>2]|0,_[e+24>>2]|0);wj(_[e>>2]|0,_[e+16>>2]|0);wj(_[e>>2]|0,_[e+12>>2]|0);wj(_[e>>2]|0,_[e+8>>2]|0);b=t;return}function pA(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,c=0,p=0,u=0,f=0,a=0;o=b;b=b+32|0;i=o;n=e+4|0;if(!(_[n>>2]|0)){b=o;return}r=e+36|0;if((_[r>>2]|0)<=0){b=o;return}a=e+12|0;p=i+16|0;u=0;do{f=_[(_[a>>2]|0)+(u<<2)>>2]|0;c=_[t+(u*156|0)+148>>2]|0;_[p>>2]=c;if((c|0)>0){e=0;do{s[i+(e<<2)>>2]=+s[t+(u*156|0)+(e*36|0)+16>>2];s[i+(e<<2)+8>>2]=+s[t+(u*156|0)+(e*36|0)+20>>2];e=e+1|0}while((e|0)<(c|0))}c=_[n>>2]|0;gq[_[(_[c>>2]|0)+20>>2]&63](c,f,i);u=u+1|0}while((u|0)<(_[r>>2]|0));b=o;return}function sA(e,t){e=e|0;t=t|0;var n=0,o=0,p=0,u=0,f=0,a=0,d=0;n=b;if(_[e+102868>>2]&2)Be(11528,11552,274,11656);o=i[t+61>>0]|0;u=t+8|0;f=_[u>>2]|0;p=t+12|0;if(f)_[f+12>>2]=_[p>>2];f=_[p>>2]|0;if(f)_[f+8>>2]=_[u>>2];u=e+102956|0;if((_[u>>2]|0)==(t|0))_[u>>2]=_[p>>2];p=_[t+48>>2]|0;u=_[t+52>>2]|0;a=p+4|0;f=c[a>>1]|0;if(!(f&2)){r[a>>1]=f|2;s[p+144>>2]=0.0}f=u+4|0;a=c[f>>1]|0;if(!(a&2)){r[f>>1]=a|2;s[u+144>>2]=0.0}a=t+24|0;d=_[a>>2]|0;f=t+28|0;if(d)_[d+12>>2]=_[f>>2];d=_[f>>2]|0;if(d)_[d+8>>2]=_[a>>2];d=p+108|0;if((t+16|0)==(_[d>>2]|0))_[d>>2]=_[f>>2];_[a>>2]=0;_[f>>2]=0;a=t+40|0;d=_[a>>2]|0;f=t+44|0;if(d)_[d+12>>2]=_[f>>2];d=_[f>>2]|0;if(d)_[d+8>>2]=_[a>>2];d=u+108|0;if((t+32|0)==(_[d>>2]|0))_[d>>2]=_[f>>2];_[a>>2]=0;_[f>>2]=0;dq[_[(_[t>>2]|0)+24>>2]&127](t);do{switch(_[t+4>>2]|0){case 7:{Gj(e,t,224);break};case 8:{Gj(e,t,208);break};case 9:{Gj(e,t,180);break};case 10:{Gj(e,t,168);break};case 11:{Gj(e,t,192);break};case 3:{Gj(e,t,176);break};case 5:{Gj(e,t,168);break};case 2:{Gj(e,t,256);break};case 1:{Gj(e,t,228);break};case 4:{Gj(e,t,196);break};case 6:{Gj(e,t,276);break};default:Be(15688,15696,178,15752)}}while(0);t=e+102964|0;e=_[t>>2]|0;if((e|0)<=0)Be(11672,11552,346,11656);_[t>>2]=e+-1;if(o<<24>>24){b=n;return}o=_[u+112>>2]|0;if(!o){b=n;return}do{if((_[o>>2]|0)==(p|0)){d=(_[o+4>>2]|0)+4|0;_[d>>2]=_[d>>2]|8}o=_[o+12>>2]|0}while((o|0)!=0);b=n;return}function uA(e,t){e=e|0;t=t|0;var n=0,i=0;n=e+28|0;i=_[n>>2]|0;if((i|0)<(_[e+40>>2]|0)){_[t+8>>2]=i;i=_[n>>2]|0;_[(_[e+8>>2]|0)+(i<<2)>>2]=t;_[n>>2]=i+1;return}else Be(12504,12416,54,12456)}function bA(e,t){e=e|0;t=t|0;var n=0,i=0;i=e+36|0;n=_[i>>2]|0;if((n|0)<(_[e+44>>2]|0)){_[i>>2]=n+1;_[(_[e+12>>2]|0)+(n<<2)>>2]=t;return}else Be(12464,12416,62,12456)}function fA(e,t){e=e|0;t=t|0;var n=0.0,r=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0,d=0,y=0,l=0,m=0.0,h=0.0,v=0.0,g=0,J=0,D=0,x=0,G=0,j=0.0,A=0.0,S=0.0,C=0.0,B=0,k=0.0,w=0.0,M=0.0,R=0,q=0.0,F=0,P=0.0,T=0;l=b;b=b+48|0;T=l+36|0;F=l+24|0;x=l+16|0;G=l+8|0;g=l;a=e+128|0;y=_[a>>2]|0;d=t+28|0;B=_[d>>2]|0;J=B+(y*12|0)|0;c=+s[J>>2];p=+s[J+4>>2];h=+s[B+(y*12|0)+8>>2];y=e+132|0;J=_[y>>2]|0;D=B+(J*12|0)|0;f=+s[D>>2];o=+s[D+4>>2];v=+s[B+(J*12|0)+8>>2];n=+s[e+168>>2];m=+s[e+172>>2];u=+s[e+176>>2];r=+s[e+180>>2];J=u+r==0.0;if((i[e+100>>0]|0)!=0?!((_[e+224>>2]|0)==3|J):0){B=e+96|0;P=+s[B>>2];q=+s[t>>2]*+s[e+104>>2];w=P-+s[e+220>>2]*(v-h-+s[e+108>>2]);M=-q;q=w<q?w:q;q=q<M?M:q;s[B>>2]=q;P=q-P;h=h-u*P;v=v+r*P}if((i[e+112>>0]|0)!=0?(R=e+224|0,!((_[R>>2]|0)==0|J)):0){D=e+148|0;t=e+144|0;J=e+140|0;g=e+136|0;j=f-v*+s[D>>2]-c+h*+s[J>>2];C=o+v*+s[t>>2]-p-h*+s[g>>2];s[T>>2]=j;s[T+4>>2]=C;s[T+8>>2]=v-h;B=e+184|0;jj(F,B,T);w=+s[F>>2];A=-w;M=+s[F+4>>2];k=-M;q=+s[F+8>>2];S=-q;R=_[R>>2]|0;do{if((R|0)==2){x=e+84|0;R=e+92|0;P=+s[R>>2];q=P-q;if(q>0.0){Aj(G,B,P*+s[e+208>>2]-j,P*+s[e+212>>2]-C);A=+s[G>>2];k=+s[G+4>>2];S=-+s[R>>2];s[x>>2]=A+ +s[x>>2];T=e+88|0;s[T>>2]=k+ +s[T>>2];s[R>>2]=0.0;break}else{s[x>>2]=+s[x>>2]-w;T=e+88|0;s[T>>2]=+s[T>>2]-M;s[R>>2]=q;break}}else if((R|0)==3){T=e+84|0;s[T>>2]=+s[T>>2]-w;T=e+88|0;s[T>>2]=+s[T>>2]-M;T=e+92|0;s[T>>2]=+s[T>>2]-q}else if((R|0)==1){R=e+84|0;G=e+92|0;P=+s[G>>2];q=P-q;if(q<0.0){Aj(x,B,P*+s[e+208>>2]-j,P*+s[e+212>>2]-C);A=+s[x>>2];k=+s[x+4>>2];S=-+s[G>>2];s[R>>2]=A+ +s[R>>2];T=e+88|0;s[T>>2]=k+ +s[T>>2];s[G>>2]=0.0;break}else{s[R>>2]=+s[R>>2]-w;T=e+88|0;s[T>>2]=+s[T>>2]-M;s[G>>2]=q;break}}}while(0);P=S+(k*+s[t>>2]-A*+s[D>>2]);w=S+(k*+s[g>>2]-A*+s[J>>2]);C=A;M=m*C;q=m*k;C=n*C;k=n*k;M=f+M;q=o+q;C=c-C;k=p-k;w=u*w;P=r*P;w=h-w;P=v+P;T=_[a>>2]|0;F=_[d>>2]|0;T=F+(T*12|0)|0;C=+C;k=+k;F=T;s[F>>2]=C;T=T+4|0;s[T>>2]=k;T=_[a>>2]|0;F=_[d>>2]|0;T=F+(T*12|0)+8|0;s[T>>2]=w;T=_[y>>2]|0;T=F+(T*12|0)|0;M=+M;q=+q;F=T;s[F>>2]=M;T=T+4|0;s[T>>2]=q;T=_[y>>2]|0;F=_[d>>2]|0;T=F+(T*12|0)+8|0;s[T>>2]=P;b=l;return}R=e+148|0;B=e+144|0;T=e+140|0;F=e+136|0;Aj(g,e+184|0,-(f-v*+s[R>>2]-c+h*+s[T>>2]),-(o+v*+s[B>>2]-p-h*+s[F>>2]));C=+s[g>>2];G=e+84|0;s[G>>2]=C+ +s[G>>2];k=+s[g+4>>2];G=e+88|0;s[G>>2]=k+ +s[G>>2];P=k*+s[B>>2]-C*+s[R>>2];w=k*+s[F>>2]-C*+s[T>>2];M=m*C;q=m*k;C=n*C;k=n*k;M=f+M;q=o+q;C=c-C;k=p-k;w=u*w;P=r*P;w=h-w;P=v+P;T=_[a>>2]|0;F=_[d>>2]|0;T=F+(T*12|0)|0;C=+C;k=+k;F=T;s[F>>2]=C;T=T+4|0;s[T>>2]=k;T=_[a>>2]|0;F=_[d>>2]|0;T=F+(T*12|0)+8|0;s[T>>2]=w;T=_[y>>2]|0;T=F+(T*12|0)|0;M=+M;q=+q;F=T;s[F>>2]=M;T=T+4|0;s[T>>2]=q;T=_[y>>2]|0;F=_[d>>2]|0;T=F+(T*12|0)+8|0;s[T>>2]=P;b=l;return}function aA(e,t){e=e|0;t=t|0;var n=0,r=0,o=0.0,c=0.0,p=0,u=0.0,f=0.0,a=0,d=0.0,y=0.0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0.0,A=0.0,S=0.0,C=0.0,B=0.0,k=0.0,w=0.0,M=0,R=0,q=0,F=0.0;r=b;n=e+128|0;a=_[n>>2]|0;p=t+24|0;M=_[p>>2]|0;t=M+(a*12|0)|0;R=t;u=+s[R>>2];c=+s[R+4>>2];l=+s[M+(a*12|0)+8>>2];a=e+132|0;R=_[a>>2]|0;q=M+(R*12|0)|0;o=+s[q>>2];f=+s[q+4>>2];m=+s[M+(R*12|0)+8>>2];R=e+176|0;M=e+180|0;if(i[e+112>>0]|0){h=+s[M>>2];v=+s[R>>2];M=_[e+224>>2]|0;if((M|0)==0|h+v==0.0){d=v;y=h;g=0.0}else{d=m-l-+s[e+116>>2];if((M|0)==2){g=d-+s[e+124>>2];J=g+-.03490658849477768;J=J<.13962635397911072?J:.13962635397911072;J=-(+s[e+220>>2]*(J<0.0?0.0:J))}else if((M|0)==1){g=d-+s[e+120>>2];J=g+.03490658849477768;J=J<0.0?J:0.0;g=-g;J=-(+s[e+220>>2]*(J<-.13962635397911072?-.13962635397911072:J))}else if((M|0)==3){g=d-+s[e+120>>2];g=g<.13962635397911072?g:.13962635397911072;g=g<-.13962635397911072?-.13962635397911072:g;J=-(+s[e+220>>2]*g);if(!(g>0.0))g=-g}else{g=0.0;J=0.0}d=v;y=h;l=l-J*v;m=m+J*h}}else{d=+s[R>>2];y=+s[M>>2];g=0.0}D=+z(+l);x=+N(+l);G=+z(+m);j=+N(+m);J=+s[e+68>>2]-+s[e+152>>2];h=+s[e+72>>2]-+s[e+156>>2];A=x*J-D*h;h=D*J+x*h;x=+s[e+76>>2]-+s[e+160>>2];J=+s[e+80>>2]-+s[e+164>>2];D=j*x-G*J;J=G*x+j*J;j=o+D-u-A;x=f+J-c-h;G=+V(+(j*j+x*x));v=+s[e+168>>2];C=+s[e+172>>2];F=v+C;k=F+h*h*d+J*J*y;w=A*d;S=D*y;B=-(h*w)-J*S;S=F+A*w+D*S;w=k*S-B*B;if(w!=0.0)w=1.0/w;F=-((j*S-x*B)*w);w=-((x*k-j*B)*w);k=+(u-v*F);B=+(c-v*w);q=t;s[q>>2]=k;s[q+4>>2]=B;q=_[p>>2]|0;s[q+((_[n>>2]|0)*12|0)+8>>2]=l-d*(A*w-h*F);B=+(o+C*F);k=+(f+C*w);q=q+((_[a>>2]|0)*12|0)|0;s[q>>2]=B;s[q+4>>2]=k;s[(_[p>>2]|0)+((_[a>>2]|0)*12|0)+8>>2]=m+y*(D*w-J*F);if(!(G<=.004999999888241291)){q=0;b=r;return q|0}q=g<=.03490658849477768;b=r;return q|0}function dA(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+48>>2]|0;c=+s[p+24>>2];o=+s[t+68>>2];r=+s[p+20>>2];i=+s[t+72>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function yA(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+52>>2]|0;c=+s[p+24>>2];o=+s[t+76>>2];r=+s[p+20>>2];i=+s[t+80>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function lA(e,t,n){e=e|0;t=t|0;n=+n;var i=0.0;i=+s[t+88>>2]*n;s[e>>2]=+s[t+84>>2]*n;s[e+4>>2]=i;return}function mA(e,t){e=e|0;t=+t;return+(+s[e+92>>2]*t)}function hA(e){e=e|0;var t=0,n=0,i=0,r=0.0,c=0;t=b;b=b+16|0;n=t;c=_[(_[e+48>>2]|0)+8>>2]|0;i=_[(_[e+52>>2]|0)+8>>2]|0;Bj(17248,n);_[n>>2]=c;Bj(17784,n);_[n>>2]=i;Bj(17816,n);_[n>>2]=o[e+61>>0];Bj(17848,n);r=+s[e+72>>2];u[a>>3]=+s[e+68>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17888,n);r=+s[e+80>>2];u[a>>3]=+s[e+76>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17936,n);u[a>>3]=+s[e+116>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(17640,n);_[n>>2]=o[e+112>>0];Bj(17280,n);u[a>>3]=+s[e+120>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(17312,n);u[a>>3]=+s[e+124>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(17344,n);_[n>>2]=o[e+100>>0];Bj(18024,n);u[a>>3]=+s[e+108>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(18056,n);u[a>>3]=+s[e+104>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(18088,n);_[n>>2]=_[e+56>>2];Bj(18184,n);b=t;return}function vA(e){e=e|0;return}function gA(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function JA(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,c=0,p=0.0,u=0.0,f=0.0,d=0.0,y=0.0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0,x=0.0,G=0,j=0.0,A=0.0,S=0,C=0.0,B=0.0,k=0,w=0,M=0,R=0.0,q=0,F=0,P=0,T=0,L=0,I=0,W=0.0;n=b;D=_[e+48>>2]|0;L=_[D+8>>2]|0;r=e+96|0;_[r>>2]=L;T=_[e+52>>2]|0;F=_[T+8>>2]|0;o=e+100|0;_[o>>2]=F;k=D+28|0;q=_[k>>2]|0;k=_[k+4>>2]|0;G=e+128|0;_[G>>2]=q;_[G+4>>2]=k;G=T+28|0;M=_[G>>2]|0;G=_[G+4>>2]|0;w=e+136|0;_[w>>2]=M;_[w+4>>2]=G;w=e+144|0;s[w>>2]=+s[D+120>>2];G=e+148|0;s[G>>2]=+s[T+120>>2];S=e+152|0;s[S>>2]=+s[D+128>>2];D=e+156|0;s[D>>2]=+s[T+128>>2];T=_[t+24>>2]|0;c=T+(L*12|0)|0;J=+s[c>>2];x=+s[c+4>>2];p=+s[T+(L*12|0)+8>>2];c=t+28|0;P=_[c>>2]|0;I=P+(L*12|0)|0;g=+s[I>>2];v=+s[I+4>>2];d=+s[P+(L*12|0)+8>>2];L=T+(F*12|0)|0;j=+s[L>>2];R=+s[L+4>>2];C=+s[T+(F*12|0)+8>>2];T=P+(F*12|0)|0;h=+s[T>>2];m=+s[T+4>>2];u=+s[P+(F*12|0)+8>>2];f=+z(+p);p=+N(+p);A=+z(+C);C=+N(+C);B=+s[e+68>>2]-(_[a>>2]=q,+s[a>>2]);l=+s[e+72>>2]-(_[a>>2]=k,+s[a>>2]);y=p*B-f*l;l=f*B+p*l;p=+y;B=+l;k=e+112|0;s[k>>2]=p;s[k+4>>2]=B;B=+s[e+76>>2]-(_[a>>2]=M,+s[a>>2]);p=+s[e+80>>2]-+s[e+140>>2];f=C*B-A*p;p=A*B+C*p;C=+f;B=+p;M=e+120|0;s[M>>2]=C;s[M+4>>2]=B;M=e+104|0;J=j+f-J-y;x=R+p-x-l;R=+J;j=+x;k=M;s[k>>2]=R;s[k+4>>2]=j;k=e+108|0;j=+V(+(J*J+x*x));s[e+88>>2]=j;_[e+164>>2]=j-+s[e+84>>2]>0.0?2:0;if(!(j>.004999999888241291)){s[M>>2]=0.0;s[k>>2]=0.0;s[e+160>>2]=0.0;s[e+92>>2]=0.0;b=n;return}A=1.0/j;J=A*J;s[M>>2]=J;A=A*x;s[k>>2]=A;W=y*A-l*J;R=A*f-J*p;C=+s[w>>2];x=+s[S>>2];B=+s[G>>2];j=+s[D>>2];R=B+(C+W*W*x)+R*R*j;if(R!=0.0)R=1.0/R;else R=0.0;s[e+160>>2]=R;if(!(i[t+20>>0]|0))s[e+92>>2]=0.0;else{I=e+92|0;R=+s[t+8>>2]*+s[I>>2];s[I>>2]=R;W=J*R;R=R*A;g=g-W*C;v=v-R*C;h=h+W*B;m=m+R*B;d=d-x*(R*y-W*l);u=u+j*(R*f-W*p)}W=+g;R=+v;I=(_[c>>2]|0)+((_[r>>2]|0)*12|0)|0;s[I>>2]=W;s[I+4>>2]=R;I=_[c>>2]|0;s[I+((_[r>>2]|0)*12|0)+8>>2]=d;R=+h;W=+m;I=I+((_[o>>2]|0)*12|0)|0;s[I>>2]=R;s[I+4>>2]=W;s[(_[c>>2]|0)+((_[o>>2]|0)*12|0)+8>>2]=u;b=n;return}function DA(e,t){e=e|0;t=t|0;var n=0.0,i=0,r=0,o=0.0,c=0.0,p=0,u=0,f=0.0,a=0.0,d=0.0,y=0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0,j=0,A=0,S=0.0;y=b;p=e+96|0;i=_[p>>2]|0;r=t+28|0;j=_[r>>2]|0;u=j+(i*12|0)|0;G=u;a=+s[G>>2];f=+s[G+4>>2];v=+s[j+(i*12|0)+8>>2];i=e+100|0;G=_[i>>2]|0;A=j+(G*12|0)|0;c=+s[A>>2];o=+s[A+4>>2];l=+s[j+(G*12|0)+8>>2];m=+s[e+116>>2];h=+s[e+112>>2];d=+s[e+124>>2];n=+s[e+120>>2];D=+s[e+88>>2]-+s[e+84>>2];J=+s[e+104>>2];g=+s[e+108>>2];x=(c-l*d-(a-v*m))*J+(o+l*n-(f+v*h))*g;if(D<0.0)x=x+D*+s[t+4>>2];A=e+92|0;S=+s[A>>2];D=S-x*+s[e+160>>2];D=D>0.0?0.0:D;s[A>>2]=D;S=D-S;J=J*S;g=g*S;S=+s[e+144>>2];v=v-+s[e+152>>2]*(h*g-J*m);D=+s[e+148>>2];x=l+ +s[e+156>>2]*(g*n-J*d);m=+(a-S*J);h=+(f-S*g);A=u;s[A>>2]=m;s[A+4>>2]=h;A=_[r>>2]|0;s[A+((_[p>>2]|0)*12|0)+8>>2]=v;J=+(c+J*D);D=+(o+g*D);A=A+((_[i>>2]|0)*12|0)|0;s[A>>2]=J;s[A+4>>2]=D;s[(_[r>>2]|0)+((_[i>>2]|0)*12|0)+8>>2]=x;b=y;return}function xA(e,t){e=e|0;t=t|0;var n=0,i=0,r=0.0,o=0.0,c=0.0,p=0,u=0.0,f=0.0,a=0.0,d=0,y=0.0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0,x=0,G=0,j=0.0,A=0.0,S=0.0;i=b;n=e+96|0;d=_[n>>2]|0;t=t+24|0;x=_[t>>2]|0;p=x+(d*12|0)|0;D=p;f=+s[D>>2];u=+s[D+4>>2];h=+s[x+(d*12|0)+8>>2];d=e+100|0;D=_[d>>2]|0;G=x+(D*12|0)|0;o=+s[G>>2];r=+s[G+4>>2];y=+s[x+(D*12|0)+8>>2];c=+z(+h);v=+N(+h);g=+z(+y);J=+N(+y);a=+s[e+68>>2]-+s[e+128>>2];l=+s[e+72>>2]-+s[e+132>>2];m=v*a-c*l;l=c*a+v*l;v=+s[e+76>>2]-+s[e+136>>2];a=+s[e+80>>2]-+s[e+140>>2];c=J*v-g*a;a=g*v+J*a;J=o+c-f-m;v=r+a-u-l;g=+V(+(J*J+v*v));if(g<1.1920928955078125e-7)g=0.0;else{j=1.0/g;J=J*j;v=v*j}G=e+84|0;S=g-+s[G>>2];S=S<.20000000298023224?S:.20000000298023224;S=-(+s[e+160>>2]*(S<0.0?0.0:S));A=J*S;J=v*S;S=+s[e+144>>2];v=h-+s[e+152>>2]*(m*J-l*A);h=+s[e+148>>2];j=y+ +s[e+156>>2]*(c*J-a*A);l=+(f-S*A);m=+(u-S*J);x=p;s[x>>2]=l;s[x+4>>2]=m;x=_[t>>2]|0;s[x+((_[n>>2]|0)*12|0)+8>>2]=v;v=+(o+h*A);J=+(r+h*J);x=x+((_[d>>2]|0)*12|0)|0;s[x>>2]=v;s[x+4>>2]=J;s[(_[t>>2]|0)+((_[d>>2]|0)*12|0)+8>>2]=j;b=i;return g-+s[G>>2]<.004999999888241291|0}function GA(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+48>>2]|0;c=+s[p+24>>2];o=+s[t+68>>2];r=+s[p+20>>2];i=+s[t+72>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function jA(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+52>>2]|0;c=+s[p+24>>2];o=+s[t+76>>2];r=+s[p+20>>2];i=+s[t+80>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function AA(e,t,n){e=e|0;t=t|0;n=+n;var i=0.0;i=+s[t+92>>2]*n;n=i*+s[t+108>>2];s[e>>2]=+s[t+104>>2]*i;s[e+4>>2]=n;return}function SA(e,t){e=e|0;t=+t;return 0.0}function CA(e){e=e|0;var t=0,n=0,i=0,r=0.0,c=0;t=b;b=b+16|0;n=t;c=_[(_[e+48>>2]|0)+8>>2]|0;i=_[(_[e+52>>2]|0)+8>>2]|0;Bj(17472,n);_[n>>2]=c;Bj(17784,n);_[n>>2]=i;Bj(17816,n);_[n>>2]=o[e+61>>0];Bj(17848,n);r=+s[e+72>>2];u[a>>3]=+s[e+68>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17888,n);r=+s[e+80>>2];u[a>>3]=+s[e+76>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17936,n);u[a>>3]=+s[e+84>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(17496,n);_[n>>2]=_[e+56>>2];Bj(18184,n);b=t;return}function BA(e){e=e|0;return}function kA(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function wA(e,t){e=e|0;t=t|0;var n=0,r=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0,d=0,y=0,l=0,m=0.0,h=0.0,v=0.0,g=0,J=0,D=0.0,x=0,G=0.0,j=0.0,A=0.0,S=0.0,C=0.0,B=0.0,k=0,w=0,M=0.0,R=0.0,q=0.0,F=0.0,P=0,T=0,L=0,I=0;l=b;b=b+48|0;w=l;d=_[e+48>>2]|0;L=_[d+8>>2]|0;f=e+116|0;_[f>>2]=L;T=_[e+52>>2]|0;g=_[T+8>>2]|0;y=e+120|0;_[y>>2]=g;x=d+28|0;k=_[x>>2]|0;x=_[x+4>>2]|0;J=e+140|0;_[J>>2]=k;_[J+4>>2]=x;J=T+28|0;n=_[J>>2]|0;J=_[J+4>>2]|0;P=e+148|0;_[P>>2]=n;_[P+4>>2]=J;m=+s[d+120>>2];s[e+156>>2]=m;h=+s[T+120>>2];s[e+160>>2]=h;v=+s[d+128>>2];s[e+164>>2]=v;D=+s[T+128>>2];s[e+168>>2]=D;T=_[t+24>>2]|0;S=+s[T+(L*12|0)+8>>2];d=t+28|0;P=_[d>>2]|0;I=P+(L*12|0)|0;G=+s[I>>2];r=+s[I+4>>2];p=+s[P+(L*12|0)+8>>2];A=+s[T+(g*12|0)+8>>2];T=P+(g*12|0)|0;o=+s[T>>2];c=+s[T+4>>2];u=+s[P+(g*12|0)+8>>2];j=+z(+S);B=+N(+S);F=+z(+A);R=+N(+A);g=e+124|0;M=+s[e+80>>2]-(_[a>>2]=k,+s[a>>2]);q=+s[e+84>>2]-(_[a>>2]=x,+s[a>>2]);C=B*M-j*q;q=j*M+B*q;B=+C;M=+q;x=g;s[x>>2]=B;s[x+4>>2]=M;x=e+132|0;M=+s[e+88>>2]-(_[a>>2]=n,+s[a>>2]);B=+s[e+92>>2]-(_[a>>2]=J,+s[a>>2]);j=R*M-F*B;B=F*M+R*B;R=+j;M=+B;J=x;s[J>>2]=R;s[J+4>>2]=M;M=m+h;J=e+128|0;n=e+136|0;s[w>>2]=M+v*q*q+D*B*B;R=-(v*q*C)-D*B*j;s[w+12>>2]=R;B=-(v*q)-D*B;s[w+24>>2]=B;s[w+4>>2]=R;s[w+16>>2]=M+v*C*C+D*j*j;j=v*C+D*j;s[w+28>>2]=j;s[w+8>>2]=B;s[w+20>>2]=j;j=v+D;s[w+32>>2]=j;k=e+68|0;do{if(!(+s[k>>2]>0.0)){k=e+172|0;if(j==0.0){Sj(w,k);s[e+100>>2]=0.0;s[e+76>>2]=0.0;break}else{Cj(w,k);s[e+100>>2]=0.0;s[e+76>>2]=0.0;break}}else{Sj(w,e+172|0);if(j>0.0)B=1.0/j;else B=0.0;A=A-S-+s[e+96>>2];F=+s[k>>2]*6.2831854820251465;S=F*B*F;C=+s[t>>2];B=C*(F*B*2.0*+s[e+72>>2]+C*S);k=e+100|0;s[k>>2]=B;if(B!=0.0)B=1.0/B;else B=0.0;s[k>>2]=B;s[e+76>>2]=A*C*S*B;j=j+B;if(j!=0.0)j=1.0/j;else j=0.0;s[e+204>>2]=j}}while(0);k=e+104|0;if(!(i[t+20>>0]|0)){s[k>>2]=0.0;s[e+108>>2]=0.0;s[e+112>>2]=0.0;C=G;B=r;R=o;q=c;M=p;F=u;I=_[f>>2]|0;L=_[d>>2]|0;I=L+(I*12|0)|0;C=+C;B=+B;L=I;s[L>>2]=C;I=I+4|0;s[I>>2]=B;I=_[f>>2]|0;L=_[d>>2]|0;I=L+(I*12|0)+8|0;s[I>>2]=M;I=_[y>>2]|0;I=L+(I*12|0)|0;R=+R;q=+q;L=I;s[L>>2]=R;I=I+4|0;s[I>>2]=q;I=_[y>>2]|0;L=_[d>>2]|0;I=L+(I*12|0)+8|0;s[I>>2]=F;b=l;return}else{A=+s[t+8>>2];F=A*+s[k>>2];s[k>>2]=F;I=e+108|0;S=A*+s[I>>2];s[I>>2]=S;I=e+112|0;A=A*+s[I>>2];s[I>>2]=A;C=G-m*F;B=r-m*S;R=o+h*F;q=c+h*S;M=p-v*(A+(S*+s[g>>2]-F*+s[J>>2]));F=u+D*(A+(S*+s[x>>2]-F*+s[n>>2]));I=_[f>>2]|0;L=_[d>>2]|0;I=L+(I*12|0)|0;C=+C;B=+B;L=I;s[L>>2]=C;I=I+4|0;s[I>>2]=B;I=_[f>>2]|0;L=_[d>>2]|0;I=L+(I*12|0)+8|0;s[I>>2]=M;I=_[y>>2]|0;I=L+(I*12|0)|0;R=+R;q=+q;L=I;s[L>>2]=R;I=I+4|0;s[I>>2]=q;I=_[y>>2]|0;L=_[d>>2]|0;I=L+(I*12|0)+8|0;s[I>>2]=F;b=l;return}}function MA(e,t){e=e|0;t=t|0;var n=0,i=0,r=0.0,o=0,c=0.0,p=0.0,u=0,f=0.0,a=0.0,d=0.0,y=0.0,l=0.0,m=0.0,h=0.0,v=0,g=0,J=0,D=0.0,x=0.0,G=0.0,j=0.0,A=0.0,S=0.0,C=0.0,B=0.0,k=0.0;i=b;n=e+116|0;v=_[n>>2]|0;u=t+28|0;g=_[u>>2]|0;o=g+(v*12|0)|0;t=o;p=+s[t>>2];c=+s[t+4>>2];h=+s[g+(v*12|0)+8>>2];t=e+120|0;v=_[t>>2]|0;J=g+(v*12|0)|0;f=+s[J>>2];r=+s[J+4>>2];m=+s[g+(v*12|0)+8>>2];a=+s[e+156>>2];d=+s[e+160>>2];l=+s[e+164>>2];y=+s[e+168>>2];if(+s[e+68>>2]>0.0){J=e+112|0;A=+s[J>>2];B=+s[e+204>>2]*(m-h+ +s[e+76>>2]+ +s[e+100>>2]*A);S=-B;s[J>>2]=A-B;B=h-l*S;S=m+y*S;m=+s[e+136>>2];A=+s[e+132>>2];D=+s[e+128>>2];C=+s[e+124>>2];h=D*B+(f-m*S-p);x=r+A*S-c-C*B;G=+s[e+172>>2]*h+ +s[e+184>>2]*x;x=+s[e+176>>2]*h+ +s[e+188>>2]*x;h=-G;j=-x;J=e+104|0;s[J>>2]=+s[J>>2]-G;J=e+108|0;s[J>>2]=+s[J>>2]-x;x=j;G=h;D=B-l*(C*j-D*h);h=S+y*(A*j-m*h);l=d*G;m=d*x;d=a*G;y=a*x;l=f+l;m=r+m;d=p-d;y=c-y;d=+d;y=+y;J=o;g=J;s[g>>2]=d;J=J+4|0;s[J>>2]=y;J=_[n>>2]|0;g=_[u>>2]|0;J=g+(J*12|0)+8|0;s[J>>2]=D;J=_[t>>2]|0;J=g+(J*12|0)|0;l=+l;m=+m;g=J;s[g>>2]=l;J=J+4|0;s[J>>2]=m;J=_[t>>2]|0;g=_[u>>2]|0;J=g+(J*12|0)+8|0;s[J>>2]=h;b=i;return}else{C=+s[e+136>>2];D=+s[e+132>>2];A=+s[e+128>>2];k=+s[e+124>>2];x=f-m*C-p+h*A;S=r+m*D-c-h*k;B=m-h;G=x*+s[e+172>>2]+S*+s[e+184>>2]+B*+s[e+196>>2];j=x*+s[e+176>>2]+S*+s[e+188>>2]+B*+s[e+200>>2];B=x*+s[e+180>>2]+S*+s[e+192>>2]+B*+s[e+204>>2];S=-G;x=-j;J=e+104|0;s[J>>2]=+s[J>>2]-G;J=e+108|0;s[J>>2]=+s[J>>2]-j;J=e+112|0;s[J>>2]=+s[J>>2]-B;j=x;G=S;A=h-l*(k*x-A*S-B);B=m+y*(D*x-C*S-B);S=d*G;C=d*j;G=a*G;j=a*j;S=f+S;C=r+C;G=p-G;j=c-j;G=+G;j=+j;J=o;g=J;s[g>>2]=G;J=J+4|0;s[J>>2]=j;J=_[n>>2]|0;g=_[u>>2]|0;J=g+(J*12|0)+8|0;s[J>>2]=A;J=_[t>>2]|0;J=g+(J*12|0)|0;S=+S;C=+C;g=J;s[g>>2]=S;J=J+4|0;s[J>>2]=C;J=_[t>>2]|0;g=_[u>>2]|0;J=g+(J*12|0)+8|0;s[J>>2]=B;b=i;return}}function RA(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0.0,d=0.0,y=0.0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0.0,A=0.0,S=0.0,C=0.0,B=0,k=0,w=0,M=0.0,R=0.0,q=0,F=0,P=0;n=b;b=b+64|0;k=n+24|0;w=n+12|0;B=n;i=e+116|0;r=_[i>>2]|0;t=t+24|0;F=_[t>>2]|0;q=F+(r*12|0)|0;l=+s[q>>2];u=+s[q+4>>2];o=+s[F+(r*12|0)+8>>2];r=e+120|0;q=_[r>>2]|0;P=F+(q*12|0)|0;p=+s[P>>2];f=+s[P+4>>2];d=+s[F+(q*12|0)+8>>2];J=+z(+o);C=+N(+o);S=+z(+d);j=+N(+d);a=+s[e+156>>2];m=+s[e+160>>2];c=+s[e+164>>2];y=+s[e+168>>2];D=+s[e+80>>2]-+s[e+140>>2];v=+s[e+84>>2]-+s[e+144>>2];h=C*D-J*v;v=J*D+C*v;C=+s[e+88>>2]-+s[e+148>>2];D=+s[e+92>>2]-+s[e+152>>2];J=j*C-S*D;D=S*C+j*D;j=a+m;C=j+c*v*v+y*D*D;s[k>>2]=C;S=-(c*v*h)-y*D*J;s[k+12>>2]=S;A=-(c*v)-y*D;s[k+24>>2]=A;s[k+4>>2]=S;j=j+c*h*h+y*J*J;s[k+16>>2]=j;M=c*h+y*J;s[k+28>>2]=M;s[k+8>>2]=A;s[k+20>>2]=M;M=c+y;s[k+32>>2]=M;A=p+J-l-h;G=f+D-u-v;if(+s[e+68>>2]>0.0){g=+V(+(G*G+A*A));x=C*j-S*S;if(x!=0.0)x=1.0/x;R=-(x*(j*A-S*G));x=-(x*(C*G-S*A));J=J*x-D*R;D=x;G=R;h=h*x-v*R;x=0.0}else{R=d-o-+s[e+96>>2];g=+V(+(G*G+A*A));if(R>0.0)x=R;else x=-R;s[w>>2]=A;s[w+4>>2]=G;s[w+8>>2]=R;if(M>0.0){jj(B,k,w);C=+s[B+4>>2];G=+s[B>>2];j=-+s[B+8>>2]}else{M=C*j-S*S;if(M!=0.0)M=1.0/M;C=M*(C*G-S*A);G=M*(j*A-S*G);j=0.0}R=-G;M=-C;J=j+(J*M-D*R);D=M;G=R;h=j+(h*M-v*R)}R=+(l-a*G);M=+(u-a*D);P=(_[t>>2]|0)+((_[i>>2]|0)*12|0)|0;s[P>>2]=R;s[P+4>>2]=M;P=_[t>>2]|0;s[P+((_[i>>2]|0)*12|0)+8>>2]=o-c*h;M=+(p+m*G);R=+(f+m*D);P=P+((_[r>>2]|0)*12|0)|0;s[P>>2]=M;s[P+4>>2]=R;s[(_[t>>2]|0)+((_[r>>2]|0)*12|0)+8>>2]=d+y*J;if(!(g<=.004999999888241291)){P=0;b=n;return P|0}P=x<=.03490658849477768;b=n;return P|0}function qA(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+48>>2]|0;c=+s[p+24>>2];o=+s[t+80>>2];r=+s[p+20>>2];i=+s[t+84>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function FA(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+52>>2]|0;c=+s[p+24>>2];o=+s[t+88>>2];r=+s[p+20>>2];i=+s[t+92>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function PA(e,t,n){e=e|0;t=t|0;n=+n;var i=0.0;i=+s[t+108>>2]*n;s[e>>2]=+s[t+104>>2]*n;s[e+4>>2]=i;return}function TA(e,t){e=e|0;t=+t;return+(+s[e+112>>2]*t)}function LA(e){e=e|0;var t=0,n=0,i=0,r=0.0,c=0;t=b;b=b+16|0;n=t;c=_[(_[e+48>>2]|0)+8>>2]|0;i=_[(_[e+52>>2]|0)+8>>2]|0;Bj(17616,n);_[n>>2]=c;Bj(17784,n);_[n>>2]=i;Bj(17816,n);_[n>>2]=o[e+61>>0];Bj(17848,n);r=+s[e+84>>2];u[a>>3]=+s[e+80>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17888,n);r=+s[e+92>>2];u[a>>3]=+s[e+88>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17936,n);u[a>>3]=+s[e+96>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(17640,n);u[a>>3]=+s[e+68>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(18120,n);u[a>>3]=+s[e+72>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(18152,n);_[n>>2]=_[e+56>>2];Bj(18184,n);b=t;return}function IA(e){e=e|0;return}function WA(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function EA(e,t){e=e|0;t=t|0;var n=0.0,r=0,o=0.0,c=0,p=0.0,u=0,f=0,d=0.0,y=0,l=0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0,G=0,j=0.0,A=0.0,S=0.0,C=0.0,B=0,k=0.0,w=0,M=0,R=0.0,q=0.0,F=0.0,P=0.0,T=0.0,L=0.0,I=0.0,W=0.0,E=0,O=0,V=0,U=0,H=0,Q=0,K=0.0,$=0.0;y=b;c=_[e+48>>2]|0;H=_[c+8>>2]|0;x=e+132|0;_[x>>2]=H;r=_[e+52>>2]|0;O=_[r+8>>2]|0;l=e+136|0;_[l>>2]=O;B=c+28|0;E=_[B>>2]|0;B=_[B+4>>2]|0;M=e+140|0;_[M>>2]=E;_[M+4>>2]=B;M=r+28|0;w=_[M>>2]|0;M=_[M+4>>2]|0;f=e+148|0;_[f>>2]=w;_[f+4>>2]=M;k=+s[c+120>>2];f=e+156|0;s[f>>2]=k;P=+s[r+120>>2];u=e+160|0;s[u>>2]=P;A=+s[c+128>>2];c=e+164|0;s[c>>2]=A;j=+s[r+128>>2];r=e+168|0;s[r>>2]=j;U=_[t+24>>2]|0;G=U+(H*12|0)|0;C=+s[G>>2];S=+s[G+4>>2];R=+s[U+(H*12|0)+8>>2];G=t+28|0;V=_[G>>2]|0;Q=V+(H*12|0)|0;m=+s[Q>>2];h=+s[Q+4>>2];J=+s[V+(H*12|0)+8>>2];H=U+(O*12|0)|0;n=+s[H>>2];o=+s[H+4>>2];d=+s[U+(O*12|0)+8>>2];U=V+(O*12|0)|0;v=+s[U>>2];g=+s[U+4>>2];D=+s[V+(O*12|0)+8>>2];W=+z(+R);R=+N(+R);I=+z(+d);d=+N(+d);p=+s[e+76>>2]-(_[a>>2]=E,+s[a>>2]);T=+s[e+80>>2]-(_[a>>2]=B,+s[a>>2]);q=R*p-W*T;T=W*p+R*T;p=+s[e+84>>2]-(_[a>>2]=w,+s[a>>2]);L=+s[e+88>>2]-(_[a>>2]=M,+s[a>>2]);F=d*p-I*L;L=I*p+d*L;C=n+F-C-q;S=o+L-S-T;o=+s[e+100>>2];n=+s[e+104>>2];d=R*o-W*n;n=W*o+R*n;o=+d;p=+n;M=e+180|0;s[M>>2]=o;s[M+4>>2]=p;q=q+C;T=T+S;p=n*q-d*T;s[e+196>>2]=p;o=F*n-L*d;s[e+200>>2]=o;P=k+P;k=P+p*A*p+o*j*o;if(k>0.0)k=1.0/k;s[e+204>>2]=k;B=e+212|0;s[B>>2]=0.0;w=e+216|0;s[w>>2]=0.0;M=e+220|0;s[M>>2]=0.0;I=+s[e+68>>2];if(I>0.0){$=+s[e+92>>2];K=+s[e+96>>2];k=R*$-W*K;R=W*$+R*K;K=+k;W=+R;Q=e+172|0;s[Q>>2]=K;s[Q+4>>2]=W;W=q*R-T*k;s[e+188>>2]=W;q=F*R-L*k;s[e+192>>2]=q;q=P+W*A*W+q*j*q;if(q>0.0){T=1.0/q;s[B>>2]=T;$=I*6.2831854820251465;P=$*T*$;F=+s[t>>2];T=F*($*T*2.0*+s[e+72>>2]+F*P);if(T>0.0)T=1.0/T;s[M>>2]=T;s[w>>2]=(C*k+S*R)*F*P*T;S=q+T;s[B>>2]=S;if(S>0.0)s[B>>2]=1.0/S}}else s[e+116>>2]=0.0;if(i[e+128>>0]|0){j=j+A;B=e+208|0;s[B>>2]=j;if(j>0.0)s[B>>2]=1.0/j}else{s[e+208>>2]=0.0;s[e+112>>2]=0.0}if(!(i[t+20>>0]|0)){s[e+108>>2]=0.0;s[e+116>>2]=0.0;s[e+112>>2]=0.0;T=m;L=h;W=v;K=g;I=J;$=D;Q=_[x>>2]|0;H=_[G>>2]|0;Q=H+(Q*12|0)|0;T=+T;L=+L;H=Q;s[H>>2]=T;Q=Q+4|0;s[Q>>2]=L;Q=_[x>>2]|0;H=_[G>>2]|0;Q=H+(Q*12|0)+8|0;s[Q>>2]=I;Q=_[l>>2]|0;Q=H+(Q*12|0)|0;W=+W;K=+K;H=Q;s[H>>2]=W;Q=Q+4|0;s[Q>>2]=K;Q=_[l>>2]|0;H=_[G>>2]|0;Q=H+(Q*12|0)+8|0;s[Q>>2]=$;b=y;return}else{H=t+8|0;Q=e+108|0;P=+s[H>>2]*+s[Q>>2];s[Q>>2]=P;Q=e+116|0;$=+s[H>>2]*+s[Q>>2];s[Q>>2]=$;Q=e+112|0;F=+s[H>>2]*+s[Q>>2];s[Q>>2]=F;W=P*d+$*+s[e+172>>2];I=P*n+$*+s[e+176>>2];L=+s[f>>2];K=+s[u>>2];T=m-W*L;L=h-I*L;W=v+W*K;K=g+I*K;I=J-(F+(P*p+$*+s[e+188>>2]))*+s[c>>2];$=D+(F+(P*o+$*+s[e+192>>2]))*+s[r>>2];Q=_[x>>2]|0;H=_[G>>2]|0;Q=H+(Q*12|0)|0;T=+T;L=+L;H=Q;s[H>>2]=T;Q=Q+4|0;s[Q>>2]=L;Q=_[x>>2]|0;H=_[G>>2]|0;Q=H+(Q*12|0)+8|0;s[Q>>2]=I;Q=_[l>>2]|0;Q=H+(Q*12|0)|0;W=+W;K=+K;H=Q;s[H>>2]=W;Q=Q+4|0;s[Q>>2]=K;Q=_[l>>2]|0;H=_[G>>2]|0;Q=H+(Q*12|0)+8|0;s[Q>>2]=$;b=y;return}}function OA(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0.0,d=0.0,y=0.0,l=0.0,m=0,h=0.0,v=0.0,g=0.0,J=0.0,D=0.0,x=0.0,G=0.0,j=0,A=0.0,S=0,C=0;n=b;J=+s[e+156>>2];d=+s[e+160>>2];v=+s[e+164>>2];p=+s[e+168>>2];m=e+132|0;i=_[m>>2]|0;r=t+28|0;S=_[r>>2]|0;j=S+(i*12|0)|0;D=+s[j>>2];x=+s[j+4>>2];G=+s[S+(i*12|0)+8>>2];i=e+136|0;j=_[i>>2]|0;C=S+(j*12|0)|0;c=+s[C>>2];h=+s[C+4>>2];f=+s[S+(j*12|0)+8>>2];l=+s[e+172>>2];y=+s[e+176>>2];u=+s[e+192>>2];g=+s[e+188>>2];j=e+116|0;A=+s[j>>2];o=+s[e+212>>2]*(+s[e+216>>2]+(f*u+(l*(c-D)+y*(h-x))-G*g)+ +s[e+220>>2]*A);a=-o;s[j>>2]=A-o;l=l*a;y=y*a;D=D-J*l;x=x-J*y;g=G-v*g*a;l=c+d*l;y=h+d*y;a=f+p*u*a;j=e+112|0;u=+s[j>>2];f=+s[t>>2]*+s[e+120>>2];h=u-+s[e+208>>2]*(a-g-+s[e+124>>2]);c=-f;f=h<f?h:f;f=f<c?c:f;s[j>>2]=f;u=f-u;g=g-v*u;u=a+p*u;a=+s[e+180>>2];f=+s[e+184>>2];c=+s[e+200>>2];h=+s[e+196>>2];G=+s[e+204>>2]*((l-D)*a+(y-x)*f+c*u-h*g);o=-G;t=e+108|0;s[t>>2]=+s[t>>2]-G;a=a*o;f=f*o;D=+(D-J*a);J=+(x-J*f);t=(_[r>>2]|0)+((_[m>>2]|0)*12|0)|0;s[t>>2]=D;s[t+4>>2]=J;t=_[r>>2]|0;s[t+((_[m>>2]|0)*12|0)+8>>2]=g-v*h*o;a=+(l+d*a);f=+(y+d*f);t=t+((_[i>>2]|0)*12|0)|0;s[t>>2]=a;s[t+4>>2]=f;s[(_[r>>2]|0)+((_[i>>2]|0)*12|0)+8>>2]=u+p*c*o;b=n;return}function VA(e,t){e=e|0;t=t|0;var n=0,i=0,r=0.0,o=0.0,c=0.0,p=0.0,u=0.0,f=0.0,a=0.0,d=0.0,y=0.0,l=0.0,m=0.0,h=0.0,v=0.0,g=0.0,J=0.0,D=0,x=0.0,G=0.0,j=0.0,A=0.0,S=0.0,C=0.0,B=0,k=0,w=0,M=0.0;i=b;n=e+132|0;D=_[n>>2]|0;t=t+24|0;k=_[t>>2]|0;B=k+(D*12|0)|0;c=+s[B>>2];u=+s[B+4>>2];a=+s[k+(D*12|0)+8>>2];D=e+136|0;B=_[D>>2]|0;w=k+(B*12|0)|0;v=+s[w>>2];J=+s[w+4>>2];x=+s[k+(B*12|0)+8>>2];g=+z(+a);l=+N(+a);p=+z(+x);r=+N(+x);m=+s[e+76>>2]-+s[e+140>>2];f=+s[e+80>>2]-+s[e+144>>2];d=l*m-g*f;f=g*m+l*f;m=+s[e+84>>2]-+s[e+148>>2];j=+s[e+88>>2]-+s[e+152>>2];G=r*m-p*j;j=p*m+r*j;r=v-c+G-d;m=J-u+j-f;p=+s[e+100>>2];o=+s[e+104>>2];y=l*p-g*o;o=g*p+l*o;l=y*r+o*m;p=+s[e+156>>2];g=+s[e+160>>2];h=+s[e+164>>2];C=+s[e+196>>2];A=+s[e+168>>2];S=+s[e+200>>2];S=p+g+C*h*C+S*A*S;if(S!=0.0)S=-l/S;else S=0.0;M=y*S;C=o*S;c=+(c-M*p);u=+(u-C*p);w=(_[t>>2]|0)+((_[n>>2]|0)*12|0)|0;s[w>>2]=c;s[w+4>>2]=u;w=_[t>>2]|0;s[w+((_[n>>2]|0)*12|0)+8>>2]=a-(o*(d+r)-y*(f+m))*S*h;v=+(v+M*g);C=+(J+C*g);w=w+((_[D>>2]|0)*12|0)|0;s[w>>2]=v;s[w+4>>2]=C;s[(_[t>>2]|0)+((_[D>>2]|0)*12|0)+8>>2]=x+(G*o-j*y)*S*A;if(l>0.0){M=l;w=M<=.004999999888241291;b=i;return w|0}M=-l;w=M<=.004999999888241291;b=i;return w|0}function UA(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+48>>2]|0;c=+s[p+24>>2];o=+s[t+76>>2];r=+s[p+20>>2];i=+s[t+80>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function NA(e,t){e=e|0;t=t|0;var n=0.0,i=0.0,r=0.0,o=0.0,c=0.0,p=0;p=_[t+52>>2]|0;c=+s[p+24>>2];o=+s[t+84>>2];r=+s[p+20>>2];i=+s[t+88>>2];n=o*r+c*i+ +s[p+16>>2];s[e>>2]=+s[p+12>>2]+(c*o-r*i);s[e+4>>2]=n;return}function zA(e,t,n){e=e|0;t=t|0;n=+n;var i=0.0,r=0.0,_=0.0;_=+s[t+108>>2];r=+s[t+116>>2];i=(_*+s[t+184>>2]+r*+s[t+176>>2])*n;s[e>>2]=(_*+s[t+180>>2]+r*+s[t+172>>2])*n;s[e+4>>2]=i;return}function HA(e,t){e=e|0;t=+t;return+(+s[e+112>>2]*t)}function QA(e){e=e|0;var t=0,n=0,i=0,r=0.0,c=0;t=b;b=b+16|0;n=t;c=_[(_[e+48>>2]|0)+8>>2]|0;i=_[(_[e+52>>2]|0)+8>>2]|0;Bj(17760,n);_[n>>2]=c;Bj(17784,n);_[n>>2]=i;Bj(17816,n);_[n>>2]=o[e+61>>0];Bj(17848,n);r=+s[e+80>>2];u[a>>3]=+s[e+76>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17888,n);r=+s[e+88>>2];u[a>>3]=+s[e+84>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17936,n);r=+s[e+96>>2];u[a>>3]=+s[e+92>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];i=n+8|0;u[a>>3]=r;_[i>>2]=_[a>>2];_[i+4>>2]=_[a+4>>2];Bj(17984,n);_[n>>2]=o[e+128>>0];Bj(18024,n);u[a>>3]=+s[e+124>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(18056,n);u[a>>3]=+s[e+120>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(18088,n);u[a>>3]=+s[e+68>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(18120,n);u[a>>3]=+s[e+72>>2];_[n>>2]=_[a>>2];_[n+4>>2]=_[a+4>>2];Bj(18152,n);_[n>>2]=_[e+56>>2];Bj(18184,n);b=t;return}function KA(e){e=e|0;return}function $A(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function ZA(e,t){e=e|0;t=t|0;var n=0;n=b;b=b+16|0;_[n>>2]=t;t=_[y>>2]|0;Se(t|0,e|0,n|0)|0;et(10,t|0)|0;nt()}function YA(){var e=0,t=0,n=0,i=0,r=0;e=b;b=b+16|0;t=e;e=e+12|0;if(He(18448,44)|0)ZA(18456,t);n=Ue(_[4610]|0)|0;if(!n)ZA(18424,t);n=_[n>>2]|0;if(!n)ZA(18424,t);r=n+48|0;i=_[r>>2]|0;r=_[r+4>>2]|0;if(!((i&-256|0)==1126902528&(r|0)==1129074247)){_[t>>2]=18272;ZA(18384,t)}if((i|0)==1126902529&(r|0)==1129074247)i=_[n+44>>2]|0;else i=n+80|0;_[e>>2]=i;r=_[n>>2]|0;n=_[r+4>>2]|0;if(fS(18816,r,e)|0){r=_[e>>2]|0;r=hq[_[(_[r>>2]|0)+8>>2]&63](r)|0;_[t>>2]=18272;_[t+4>>2]=n;_[t+8>>2]=r;ZA(18288,t)}else{_[t>>2]=18272;_[t+4>>2]=n;ZA(18336,t)}}function XA(){var e=0;e=b;b=b+16|0;if(!(Ge(18440,124)|0)){b=e;return}else ZA(18512,e)}function eS(e){e=e|0;var t=0;t=b;b=b+16|0;wS(e);if(!(Xe(_[4610]|0,0)|0)){b=t;return}else ZA(18568,t)}function tS(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function nS(e){e=e|0;return}function iS(e){e=e|0;return 18648}function rS(e){e=e|0;var t=0;t=b;b=b+16|0;Jq[e&63]();ZA(18696,t)}function _S(){var e=0,t=0;t=b;b=b+16|0;if(He(18448,44)|0)ZA(18456,t);t=Ue(_[4610]|0)|0;if(((t|0)!=0?(e=_[t>>2]|0,(e|0)!=0):0)?(t=e+48|0,(_[t>>2]&-256|0)==1126902528?(_[t+4>>2]|0)==1129074247:0):0)rS(_[e+12>>2]|0);t=_[4566]|0;_[4566]=t+0;rS(t)}function oS(e){e=e|0;return}function cS(e){e=e|0;return}function pS(e){e=e|0;return}function sS(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function uS(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function bS(e){e=e|0;var t=0;t=b;wS(e);b=t;return}function fS(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,c=0;i=b;b=b+64|0;r=i;if((e|0)==(t|0)){c=1;b=i;return c|0}if(!t){c=0;b=i;return c|0}t=hS(t,18944)|0;if(!t){c=0;b=i;return c|0}c=r+0|0;o=c+56|0;do{_[c>>2]=0;c=c+4|0}while((c|0)<(o|0));_[r>>2]=t;_[r+8>>2]=e;_[r+12>>2]=-1;_[r+48>>2]=1;Aq[_[(_[t>>2]|0)+28>>2]&63](t,r,_[n>>2]|0,1);if((_[r+24>>2]|0)!=1){c=0;b=i;return c|0}_[n>>2]=_[r+16>>2];c=1;b=i;return c|0}function aS(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,c=0;r=b;o=e+16|0;c=_[o>>2]|0;if(!c){_[o>>2]=t;_[e+24>>2]=n;_[e+36>>2]=1;b=r;return}if((c|0)!=(t|0)){c=e+36|0;_[c>>2]=(_[c>>2]|0)+1;_[e+24>>2]=2;i[e+54>>0]=1;b=r;return}t=e+24|0;if((_[t>>2]|0)!=2){b=r;return}_[t>>2]=n;b=r;return}function dS(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=b;if((_[t+8>>2]|0)!=(e|0)){b=r;return}aS(t,n,i);b=r;return}function yS(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=b;if((e|0)==(_[t+8>>2]|0)){aS(t,n,i);b=r;return}else{e=_[e+8>>2]|0;Aq[_[(_[e>>2]|0)+28>>2]&63](e,t,n,i);b=r;return}}function lS(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,c=0;r=b;o=_[e+4>>2]|0;c=o>>8;if(o&1)c=_[(_[n>>2]|0)+c>>2]|0;e=_[e>>2]|0;Aq[_[(_[e>>2]|0)+28>>2]&63](e,t,n+c|0,(o&2|0)!=0?i:2);b=r;return}function mS(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var o=0,c=0,p=0;o=b;if((e|0)==(_[t+8>>2]|0)){aS(t,n,r);b=o;return}p=_[e+12>>2]|0;c=e+(p<<3)+16|0;lS(e+16|0,t,n,r);if((p|0)<=1){b=o;return}p=t+54|0;e=e+24|0;while(1){lS(e,t,n,r);if(i[p>>0]|0){r=7;break}e=e+8|0;if(e>>>0>=c>>>0){r=7;break}}if((r|0)==7){b=o;return}}function hS(e,t){e=e|0;t=t|0;var n=0,o=0,c=0,p=0,s=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0;n=b;b=b+64|0;f=n;o=_[e>>2]|0;c=e+(_[o+-8>>2]|0)|0;o=_[o+-4>>2]|0;_[f>>2]=t;_[f+4>>2]=e;_[f+8>>2]=18888;y=f+12|0;a=f+16|0;d=f+20|0;p=f+24|0;e=f+28|0;s=f+32|0;u=f+40|0;m=(o|0)==(t|0);t=y+0|0;l=t+40|0;do{_[t>>2]=0;t=t+4|0}while((t|0)<(l|0));r[y+40>>1]=0;i[y+42>>0]=0;do{if(m){_[f+48>>2]=1;xq[_[(_[o>>2]|0)+20>>2]&63](o,f,c,c,1,0);e=(_[p>>2]|0)==1?c:0}else{fq[_[(_[o>>2]|0)+24>>2]&63](o,f,c,1,0);o=_[f+36>>2]|0;if(!o){if((_[u>>2]|0)!=1){e=0;break}if((_[e>>2]|0)!=1){e=0;break}e=(_[s>>2]|0)==1?_[d>>2]|0:0;break}else if((o|0)!=1){e=0;break}if((_[p>>2]|0)!=1){if(_[u>>2]|0){e=0;break}if((_[e>>2]|0)!=1){e=0;break}if((_[s>>2]|0)!=1){e=0;break}}e=_[a>>2]|0}}while(0);b=n;return e|0}function vS(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var o=0,c=0;o=b;i[e+53>>0]=1;if((_[e+4>>2]|0)!=(n|0)){b=o;return}i[e+52>>0]=1;n=e+16|0;c=_[n>>2]|0;if(!c){_[n>>2]=t;_[e+24>>2]=r;_[e+36>>2]=1;if(!((r|0)==1?(_[e+48>>2]|0)==1:0)){b=o;return}i[e+54>>0]=1;b=o;return}if((c|0)!=(t|0)){c=e+36|0;_[c>>2]=(_[c>>2]|0)+1;i[e+54>>0]=1;b=o;return}t=e+24|0;n=_[t>>2]|0;if((n|0)==2)_[t>>2]=r;else r=n;if(!((r|0)==1?(_[e+48>>2]|0)==1:0)){b=o;return}i[e+54>>0]=1;b=o;return}function gS(e,t,n,r,o){e=e|0;t=t|0;n=n|0;r=r|0;o=o|0;var c=0,p=0,s=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0,h=0,v=0,g=0;c=b;if((e|0)==(_[t+8>>2]|0)){if((_[t+4>>2]|0)!=(n|0)){b=c;return}n=t+28|0;if((_[n>>2]|0)==1){b=c;return}_[n>>2]=r;b=c;return}if((e|0)!=(_[t>>2]|0)){g=_[e+12>>2]|0;f=e+(g<<3)+16|0;DS(e+16|0,t,n,r,o);a=e+24|0;if((g|0)<=1){b=c;return}y=_[e+8>>2]|0;if((y&2|0)==0?(d=t+36|0,(_[d>>2]|0)!=1):0){if(!(y&1)){l=t+54|0;y=a;while(1){if(i[l>>0]|0){y=43;break}if((_[d>>2]|0)==1){y=43;break}DS(y,t,n,r,o);y=y+8|0;if(y>>>0>=f>>>0){y=43;break}}if((y|0)==43){b=c;return}}y=t+24|0;l=t+54|0;m=a;while(1){if(i[l>>0]|0){y=43;break}if((_[d>>2]|0)==1?(_[y>>2]|0)==1:0){y=43;break}DS(m,t,n,r,o);m=m+8|0;if(m>>>0>=f>>>0){y=43;break}}if((y|0)==43){b=c;return}}d=t+54|0;while(1){if(i[d>>0]|0){y=43;break}DS(a,t,n,r,o);a=a+8|0;if(a>>>0>=f>>>0){y=43;break}}if((y|0)==43){b=c;return}}if((_[t+16>>2]|0)!=(n|0)?(p=t+20|0,(_[p>>2]|0)!=(n|0)):0){_[t+32>>2]=r;f=t+44|0;if((_[f>>2]|0)==4){b=c;return}g=_[e+12>>2]|0;v=e+(g<<3)+16|0;e:do{if((g|0)>0){d=t+52|0;a=t+53|0;m=t+54|0;l=e+8|0;y=t+24|0;g=0;h=0;e=e+16|0;t:do{i[d>>0]=0;i[a>>0]=0;JS(e,t,n,n,1,o);if(i[m>>0]|0)break;do{if(i[a>>0]|0){if(!(i[d>>0]|0))if(!(_[l>>2]&1)){h=1;break t}else{h=1;break}if((_[y>>2]|0)==1){y=25;break e}if(!(_[l>>2]&2)){y=25;break e}else{g=1;h=1}}}while(0);e=e+8|0}while(e>>>0<v>>>0);if(g){u=h;y=24}else{s=h;y=21}}else{s=0;y=21}}while(0);if((y|0)==21){_[p>>2]=n;g=t+40|0;_[g>>2]=(_[g>>2]|0)+1;if((_[t+36>>2]|0)==1?(_[t+24>>2]|0)==2:0){i[t+54>>0]=1;if(s)y=25;else y=26}else{u=s;y=24}}if((y|0)==24)if(u)y=25;else y=26;if((y|0)==25){_[f>>2]=3;b=c;return}else if((y|0)==26){_[f>>2]=4;b=c;return}}if((r|0)!=1){b=c;return}_[t+32>>2]=1;b=c;return}function JS(e,t,n,i,r,o){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;var c=0,p=0,s=0;c=b;p=_[e+4>>2]|0;s=p>>8;if(p&1)s=_[(_[i>>2]|0)+s>>2]|0;e=_[e>>2]|0;xq[_[(_[e>>2]|0)+20>>2]&63](e,t,n,i+s|0,(p&2|0)!=0?r:2,o);b=c;return}function DS(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,c=0,p=0;o=b;c=_[e+4>>2]|0;p=c>>8;if(c&1)p=_[(_[n>>2]|0)+p>>2]|0;e=_[e>>2]|0;fq[_[(_[e>>2]|0)+24>>2]&63](e,t,n+p|0,(c&2|0)!=0?i:2,r);b=o;return}function xS(e,t,n,r,o){e=e|0;t=t|0;n=n|0;r=r|0;o=o|0;var c=0,p=0,s=0,u=0,f=0;c=b;if((e|0)==(_[t+8>>2]|0)){if((_[t+4>>2]|0)!=(n|0)){b=c;return}p=t+28|0;if((_[p>>2]|0)==1){b=c;return}_[p>>2]=r;b=c;return}if((e|0)!=(_[t>>2]|0)){u=_[e+8>>2]|0;fq[_[(_[u>>2]|0)+24>>2]&63](u,t,n,r,o);b=c;return}if((_[t+16>>2]|0)!=(n|0)?(s=t+20|0,(_[s>>2]|0)!=(n|0)):0){_[t+32>>2]=r;r=t+44|0;if((_[r>>2]|0)==4){b=c;return}u=t+52|0;i[u>>0]=0;f=t+53|0;i[f>>0]=0;e=_[e+8>>2]|0;xq[_[(_[e>>2]|0)+20>>2]&63](e,t,n,n,1,o);if(i[f>>0]|0){if(!(i[u>>0]|0)){e=1;p=13}}else{e=0;p=13}do{if((p|0)==13){_[s>>2]=n;f=t+40|0;_[f>>2]=(_[f>>2]|0)+1;if((_[t+36>>2]|0)==1?(_[t+24>>2]|0)==2:0){i[t+54>>0]=1;if(e)break}else p=16;if((p|0)==16?e:0)break;_[r>>2]=4;b=c;return}}while(0);_[r>>2]=3;b=c;return}if((r|0)!=1){b=c;return}_[t+32>>2]=1;b=c;return}function GS(e,t,n,r,o){e=e|0;t=t|0;n=n|0;r=r|0;o=o|0;var c=0;o=b;if((_[t+8>>2]|0)==(e|0)){if((_[t+4>>2]|0)!=(n|0)){b=o;return}t=t+28|0;if((_[t>>2]|0)==1){b=o;return}_[t>>2]=r;b=o;return}if((_[t>>2]|0)!=(e|0)){b=o;return}if((_[t+16>>2]|0)!=(n|0)?(c=t+20|0,(_[c>>2]|0)!=(n|0)):0){_[t+32>>2]=r;_[c>>2]=n;e=t+40|0;_[e>>2]=(_[e>>2]|0)+1;if((_[t+36>>2]|0)==1?(_[t+24>>2]|0)==2:0)i[t+54>>0]=1;_[t+44>>2]=4;b=o;return}if((r|0)!=1){b=o;return}_[t+32>>2]=1;b=o;return}function jS(e,t,n,r,o,c){e=e|0;t=t|0;n=n|0;r=r|0;o=o|0;c=c|0;var p=0,s=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0;f=b;if((e|0)==(_[t+8>>2]|0)){vS(t,n,r,o);b=f;return}p=t+52|0;u=i[p>>0]|0;d=t+53|0;a=i[d>>0]|0;m=_[e+12>>2]|0;y=e+(m<<3)+16|0;i[p>>0]=0;i[d>>0]=0;JS(e+16|0,t,n,r,o,c);e:do{if((m|0)>1){s=t+24|0;l=e+8|0;m=t+54|0;e=e+24|0;do{if(i[m>>0]|0)break e;if(!(i[p>>0]|0)){if((i[d>>0]|0)!=0?(_[l>>2]&1|0)==0:0)break e}else{if((_[s>>2]|0)==1)break e;if(!(_[l>>2]&2))break e}i[p>>0]=0;i[d>>0]=0;JS(e,t,n,r,o,c);e=e+8|0}while(e>>>0<y>>>0)}}while(0);i[p>>0]=u;i[d>>0]=a;b=f;return}function AS(e,t,n,i,r,o){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;var c=0;c=b;if((e|0)==(_[t+8>>2]|0)){vS(t,n,i,r);b=c;return}else{e=_[e+8>>2]|0;xq[_[(_[e>>2]|0)+20>>2]&63](e,t,n,i,r,o);b=c;return}}function SS(e,t,n,i,r,o){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;o=b;if((_[t+8>>2]|0)!=(e|0)){b=o;return}vS(t,n,i,r);b=o;return}function CS(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0;i=b;b=b+16|0;r=i;_[r>>2]=_[n>>2];e=bq[_[(_[e>>2]|0)+16>>2]&63](e,t,r)|0;t=e&1;if(!e){b=i;return t|0}_[n>>2]=_[r>>2];b=i;return t|0}function BS(e){e=e|0;var t=0;t=b;if(!e)e=0;else e=(hS(e,19056)|0)!=0;b=t;return e&1|0}function kS(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,c=0,p=0,s=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0,h=0,v=0,g=0,J=0,D=0,x=0,G=0,j=0,A=0,S=0,C=0,B=0,k=0,w=0,M=0,R=0;t=b;do{if(e>>>0<245){if(e>>>0<11)e=16;else e=e+11&-8;J=e>>>3;y=_[4826]|0;D=y>>>J;if(D&3){c=(D&1^1)+J|0;o=c<<1;i=19344+(o<<2)|0;o=19344+(o+2<<2)|0;p=_[o>>2]|0;n=p+8|0;r=_[n>>2]|0;do{if((i|0)!=(r|0)){if(r>>>0<(_[4830]|0)>>>0)nt();s=r+12|0;if((_[s>>2]|0)==(p|0)){_[s>>2]=i;_[o>>2]=r;break}else nt()}else _[4826]=y&~(1<<c)}while(0);R=c<<3;_[p+4>>2]=R|3;R=p+(R|4)|0;_[R>>2]=_[R>>2]|1;R=n;b=t;return R|0}if(e>>>0>(_[4828]|0)>>>0){if(D){c=2<<J;c=D<<J&(c|0-c);c=(c&0-c)+-1|0;n=c>>>12&16;c=c>>>n;r=c>>>5&8;c=c>>>r;o=c>>>2&4;c=c>>>o;i=c>>>1&2;c=c>>>i;p=c>>>1&1;p=(r|n|o|i|p)+(c>>>p)|0;c=p<<1;i=19344+(c<<2)|0;c=19344+(c+2<<2)|0;o=_[c>>2]|0;n=o+8|0;r=_[n>>2]|0;do{if((i|0)!=(r|0)){if(r>>>0<(_[4830]|0)>>>0)nt();s=r+12|0;if((_[s>>2]|0)==(o|0)){_[s>>2]=i;_[c>>2]=r;break}else nt()}else _[4826]=y&~(1<<p)}while(0);c=p<<3;r=c-e|0;_[o+4>>2]=e|3;i=o+e|0;_[o+(e|4)>>2]=r|1;_[o+c>>2]=r;c=_[4828]|0;if(c){o=_[4831]|0;s=c>>>3;p=s<<1;c=19344+(p<<2)|0;u=_[4826]|0;s=1<<s;if(u&s){p=19344+(p+2<<2)|0;s=_[p>>2]|0;if(s>>>0<(_[4830]|0)>>>0)nt();else{B=p;C=s}}else{_[4826]=u|s;B=19344+(p+2<<2)|0;C=c}_[B>>2]=o;_[C+12>>2]=o;_[o+8>>2]=C;_[o+12>>2]=c}_[4828]=r;_[4831]=i;R=n;b=t;return R|0}y=_[4827]|0;if(y){i=(y&0-y)+-1|0;M=i>>>12&16;i=i>>>M;w=i>>>5&8;i=i>>>w;R=i>>>2&4;i=i>>>R;r=i>>>1&2;i=i>>>r;n=i>>>1&1;n=_[19608+((w|M|R|r|n)+(i>>>n)<<2)>>2]|0;i=(_[n+4>>2]&-8)-e|0;r=n;while(1){o=_[r+16>>2]|0;if(!o){o=_[r+20>>2]|0;if(!o)break}r=(_[o+4>>2]&-8)-e|0;R=r>>>0<i>>>0;i=R?r:i;r=o;n=R?o:n}c=_[4830]|0;if(n>>>0<c>>>0)nt();r=n+e|0;if(n>>>0>=r>>>0)nt();o=_[n+24>>2]|0;s=_[n+12>>2]|0;do{if((s|0)==(n|0)){s=n+20|0;p=_[s>>2]|0;if(!p){s=n+16|0;p=_[s>>2]|0;if(!p){S=0;break}}while(1){u=p+20|0;f=_[u>>2]|0;if(f){p=f;s=u;continue}f=p+16|0;u=_[f>>2]|0;if(!u)break;else{p=u;s=f}}if(s>>>0<c>>>0)nt();else{_[s>>2]=0;S=p;break}}else{p=_[n+8>>2]|0;if(p>>>0<c>>>0)nt();c=p+12|0;if((_[c>>2]|0)!=(n|0))nt();u=s+8|0;if((_[u>>2]|0)==(n|0)){_[c>>2]=s;_[u>>2]=p;S=s;break}else nt()}}while(0);do{if(o){c=_[n+28>>2]|0;p=19608+(c<<2)|0;if((n|0)==(_[p>>2]|0)){_[p>>2]=S;if(!S){_[4827]=_[4827]&~(1<<c);break}}else{if(o>>>0<(_[4830]|0)>>>0)nt();c=o+16|0;if((_[c>>2]|0)==(n|0))_[c>>2]=S;else _[o+20>>2]=S;if(!S)break}if(S>>>0<(_[4830]|0)>>>0)nt();_[S+24>>2]=o;o=_[n+16>>2]|0;do{if(o)if(o>>>0<(_[4830]|0)>>>0)nt();else{_[S+16>>2]=o;_[o+24>>2]=S;break}}while(0);o=_[n+20>>2]|0;if(o)if(o>>>0<(_[4830]|0)>>>0)nt();else{_[S+20>>2]=o;_[o+24>>2]=S;break}}}while(0);if(i>>>0<16){R=i+e|0;_[n+4>>2]=R|3;R=n+(R+4)|0;_[R>>2]=_[R>>2]|1}else{_[n+4>>2]=e|3;_[n+(e|4)>>2]=i|1;_[n+(i+e)>>2]=i;c=_[4828]|0;if(c){o=_[4831]|0;u=c>>>3;p=u<<1;c=19344+(p<<2)|0;s=_[4826]|0;u=1<<u;if(s&u){p=19344+(p+2<<2)|0;s=_[p>>2]|0;if(s>>>0<(_[4830]|0)>>>0)nt();else{A=p;j=s}}else{_[4826]=s|u;A=19344+(p+2<<2)|0;j=c}_[A>>2]=o;_[j+12>>2]=o;_[o+8>>2]=j;_[o+12>>2]=c}_[4828]=i;_[4831]=r}R=n+8|0;b=t;return R|0}}}else if(e>>>0<=4294967231){j=e+11|0;e=j&-8;S=_[4827]|0;if(S){A=0-e|0;j=j>>>8;if(j)if(e>>>0>16777215)C=31;else{M=(j+1048320|0)>>>16&8;R=j<<M;w=(R+520192|0)>>>16&4;R=R<<w;C=(R+245760|0)>>>16&2;C=14-(w|M|C)+(R<<C>>>15)|0;C=e>>>(C+7|0)&1|C<<1}else C=0;B=_[19608+(C<<2)>>2]|0;e:do{if(!B){w=0;j=0}else{if((C|0)==31)j=0;else j=25-(C>>>1)|0;w=0;k=e<<j;j=0;while(1){R=_[B+4>>2]&-8;M=R-e|0;if(M>>>0<A>>>0)if((R|0)==(e|0)){A=M;w=B;j=B;break e}else{A=M;j=B}R=_[B+20>>2]|0;B=_[B+(k>>>31<<2)+16>>2]|0;w=(R|0)==0|(R|0)==(B|0)?w:R;if(!B)break;else k=k<<1}}}while(0);if((w|0)==0&(j|0)==0){R=2<<C;S=S&(R|0-R);if(!S)break;R=(S&0-S)+-1|0;B=R>>>12&16;R=R>>>B;C=R>>>5&8;R=R>>>C;k=R>>>2&4;R=R>>>k;M=R>>>1&2;R=R>>>M;w=R>>>1&1;w=_[19608+((C|B|k|M|w)+(R>>>w)<<2)>>2]|0}if(w)while(1){R=(_[w+4>>2]&-8)-e|0;S=R>>>0<A>>>0;A=S?R:A;j=S?w:j;S=_[w+16>>2]|0;if(S){w=S;continue}w=_[w+20>>2]|0;if(!w)break}if((j|0)!=0?A>>>0<((_[4828]|0)-e|0)>>>0:0){r=_[4830]|0;if(j>>>0<r>>>0)nt();n=j+e|0;if(j>>>0>=n>>>0)nt();i=_[j+24>>2]|0;c=_[j+12>>2]|0;do{if((c|0)==(j|0)){c=j+20|0;o=_[c>>2]|0;if(!o){c=j+16|0;o=_[c>>2]|0;if(!o){x=0;break}}while(1){p=o+20|0;s=_[p>>2]|0;if(s){o=s;c=p;continue}p=o+16|0;s=_[p>>2]|0;if(!s)break;else{o=s;c=p}}if(c>>>0<r>>>0)nt();else{_[c>>2]=0;x=o;break}}else{o=_[j+8>>2]|0;if(o>>>0<r>>>0)nt();r=o+12|0;if((_[r>>2]|0)!=(j|0))nt();p=c+8|0;if((_[p>>2]|0)==(j|0)){_[r>>2]=c;_[p>>2]=o;x=c;break}else nt()}}while(0);do{if(i){o=_[j+28>>2]|0;r=19608+(o<<2)|0;if((j|0)==(_[r>>2]|0)){_[r>>2]=x;if(!x){_[4827]=_[4827]&~(1<<o);break}}else{if(i>>>0<(_[4830]|0)>>>0)nt();r=i+16|0;if((_[r>>2]|0)==(j|0))_[r>>2]=x;else _[i+20>>2]=x;if(!x)break}if(x>>>0<(_[4830]|0)>>>0)nt();_[x+24>>2]=i;i=_[j+16>>2]|0;do{if(i)if(i>>>0<(_[4830]|0)>>>0)nt();else{_[x+16>>2]=i;_[i+24>>2]=x;break}}while(0);i=_[j+20>>2]|0;if(i)if(i>>>0<(_[4830]|0)>>>0)nt();else{_[x+20>>2]=i;_[i+24>>2]=x;break}}}while(0);e:do{if(A>>>0>=16){_[j+4>>2]=e|3;_[j+(e|4)>>2]=A|1;_[j+(A+e)>>2]=A;r=A>>>3;if(A>>>0<256){c=r<<1;i=19344+(c<<2)|0;o=_[4826]|0;r=1<<r;do{if(!(o&r)){_[4826]=o|r;D=19344+(c+2<<2)|0;J=i}else{r=19344+(c+2<<2)|0;o=_[r>>2]|0;if(o>>>0>=(_[4830]|0)>>>0){D=r;J=o;break}nt()}}while(0);_[D>>2]=n;_[J+12>>2]=n;_[j+(e+8)>>2]=J;_[j+(e+12)>>2]=i;break}i=A>>>8;if(i)if(A>>>0>16777215)i=31;else{M=(i+1048320|0)>>>16&8;R=i<<M;w=(R+520192|0)>>>16&4;R=R<<w;i=(R+245760|0)>>>16&2;i=14-(w|M|i)+(R<<i>>>15)|0;i=A>>>(i+7|0)&1|i<<1}else i=0;r=19608+(i<<2)|0;_[j+(e+28)>>2]=i;_[j+(e+20)>>2]=0;_[j+(e+16)>>2]=0;c=_[4827]|0;o=1<<i;if(!(c&o)){_[4827]=c|o;_[r>>2]=n;_[j+(e+24)>>2]=r;_[j+(e+12)>>2]=n;_[j+(e+8)>>2]=n;break}r=_[r>>2]|0;if((i|0)==31)i=0;else i=25-(i>>>1)|0;t:do{if((_[r+4>>2]&-8|0)!=(A|0)){i=A<<i;while(1){o=r+(i>>>31<<2)+16|0;c=_[o>>2]|0;if(!c)break;if((_[c+4>>2]&-8|0)==(A|0)){y=c;break t}else{i=i<<1;r=c}}if(o>>>0<(_[4830]|0)>>>0)nt();else{_[o>>2]=n;_[j+(e+24)>>2]=r;_[j+(e+12)>>2]=n;_[j+(e+8)>>2]=n;break e}}else y=r}while(0);r=y+8|0;i=_[r>>2]|0;o=_[4830]|0;if(y>>>0<o>>>0)nt();if(i>>>0<o>>>0)nt();else{_[i+12>>2]=n;_[r>>2]=n;_[j+(e+8)>>2]=i;_[j+(e+12)>>2]=y;_[j+(e+24)>>2]=0;break}}else{R=A+e|0;_[j+4>>2]=R|3;R=j+(R+4)|0;_[R>>2]=_[R>>2]|1}}while(0);R=j+8|0;b=t;return R|0}}}else e=-1}while(0);y=_[4828]|0;if(e>>>0<=y>>>0){i=y-e|0;n=_[4831]|0;if(i>>>0>15){_[4831]=n+e;_[4828]=i;_[n+(e+4)>>2]=i|1;_[n+y>>2]=i;_[n+4>>2]=e|3}else{_[4828]=0;_[4831]=0;_[n+4>>2]=y|3;R=n+(y+4)|0;_[R>>2]=_[R>>2]|1}R=n+8|0;b=t;return R|0}y=_[4829]|0;if(e>>>0<y>>>0){M=y-e|0;_[4829]=M;R=_[4832]|0;_[4832]=R+e;_[R+(e+4)>>2]=M|1;_[R+4>>2]=e|3;R=R+8|0;b=t;return R|0}do{if(!(_[4944]|0)){y=Ve(30)|0;if(!(y+-1&y)){_[4946]=y;_[4945]=y;_[4947]=-1;_[4948]=-1;_[4949]=0;_[4937]=0;_[4944]=(rt(0)|0)&-16^1431655768;break}else nt()}}while(0);D=e+48|0;y=_[4946]|0;x=e+47|0;j=y+x|0;y=0-y|0;J=j&y;if(J>>>0<=e>>>0){R=0;b=t;return R|0}A=_[4936]|0;if((A|0)!=0?(M=_[4934]|0,R=M+J|0,R>>>0<=M>>>0|R>>>0>A>>>0):0){R=0;b=t;return R|0}e:do{if(!(_[4937]&4)){S=_[4832]|0;t:do{if(S){A=19752|0;while(1){C=_[A>>2]|0;if(C>>>0<=S>>>0?(G=A+4|0,(C+(_[G>>2]|0)|0)>>>0>S>>>0):0)break;A=_[A+8>>2]|0;if(!A){d=182;break t}}if(A){S=j-(_[4829]|0)&y;if(S>>>0<2147483647){y=Te(S|0)|0;A=(y|0)==((_[A>>2]|0)+(_[G>>2]|0)|0);G=y;j=S;y=A?y:-1;A=A?S:0;d=191}else A=0}else d=182}else d=182}while(0);do{if((d|0)==182){y=Te(0)|0;if((y|0)!=(-1|0)){j=y;A=_[4945]|0;G=A+-1|0;if(!(G&j))A=J;else A=J-j+(G+j&0-A)|0;G=_[4934]|0;j=G+A|0;if(A>>>0>e>>>0&A>>>0<2147483647){R=_[4936]|0;if((R|0)!=0?j>>>0<=G>>>0|j>>>0>R>>>0:0){A=0;break}G=Te(A|0)|0;d=(G|0)==(y|0);j=A;y=d?y:-1;A=d?A:0;d=191}else A=0}else A=0}}while(0);t:do{if((d|0)==191){d=0-j|0;if((y|0)!=(-1|0)){l=A;d=202;break e}do{if((G|0)!=(-1|0)&j>>>0<2147483647&j>>>0<D>>>0?(g=_[4946]|0,g=x-j+g&0-g,g>>>0<2147483647):0)if((Te(g|0)|0)==(-1|0)){Te(d|0)|0;break t}else{j=g+j|0;break}}while(0);if((G|0)!=(-1|0)){y=G;l=j;d=202;break e}}}while(0);_[4937]=_[4937]|4;d=199}else{A=0;d=199}}while(0);if((((d|0)==199?J>>>0<2147483647:0)?(v=Te(J|0)|0,h=Te(0)|0,(h|0)!=(-1|0)&(v|0)!=(-1|0)&v>>>0<h>>>0):0)?(m=h-v|0,l=m>>>0>(e+40|0)>>>0,l):0){y=v;l=l?m:A;d=202}if((d|0)==202){m=(_[4934]|0)+l|0;_[4934]=m;if(m>>>0>(_[4935]|0)>>>0)_[4935]=m;m=_[4832]|0;e:do{if(m){J=19752|0;while(1){v=_[J>>2]|0;g=J+4|0;h=_[g>>2]|0;if((y|0)==(v+h|0)){d=214;break}D=_[J+8>>2]|0;if(!D)break;else J=D}if(((d|0)==214?(_[J+12>>2]&8|0)==0:0)?m>>>0>=v>>>0&m>>>0<y>>>0:0){_[g>>2]=h+l;n=(_[4829]|0)+l|0;i=m+8|0;if(!(i&7))i=0;else i=0-i&7;R=n-i|0;_[4832]=m+i;_[4829]=R;_[m+(i+4)>>2]=R|1;_[m+(n+4)>>2]=40;_[4833]=_[4948];break}if(y>>>0<(_[4830]|0)>>>0)_[4830]=y;v=y+l|0;h=19752|0;while(1){if((_[h>>2]|0)==(v|0)){d=224;break}g=_[h+8>>2]|0;if(!g)break;else h=g}if((d|0)==224?(_[h+12>>2]&8|0)==0:0){_[h>>2]=y;c=h+4|0;_[c>>2]=(_[c>>2]|0)+l;c=y+8|0;if(!(c&7))c=0;else c=0-c&7;p=y+(l+8)|0;if(!(p&7))a=0;else a=0-p&7;d=y+(a+l)|0;p=c+e|0;s=y+p|0;f=d-(y+c)-e|0;_[y+(c+4)>>2]=e|3;t:do{if((d|0)!=(_[4832]|0)){if((d|0)==(_[4831]|0)){R=(_[4828]|0)+f|0;_[4828]=R;_[4831]=s;_[y+(p+4)>>2]=R|1;_[y+(R+p)>>2]=R;break}m=l+4|0;v=_[y+(m+a)>>2]|0;if((v&3|0)==1){e=v&-8;h=v>>>3;n:do{if(v>>>0>=256){u=_[y+((a|24)+l)>>2]|0;g=_[y+(l+12+a)>>2]|0;do{if((g|0)==(d|0)){g=a|16;v=y+(m+g)|0;h=_[v>>2]|0;if(!h){v=y+(g+l)|0;h=_[v>>2]|0;if(!h){o=0;break}}while(1){g=h+20|0;J=_[g>>2]|0;if(J){h=J;v=g;continue}g=h+16|0;J=_[g>>2]|0;if(!J)break;else{h=J;v=g}}if(v>>>0<(_[4830]|0)>>>0)nt();else{_[v>>2]=0;o=h;break}}else{v=_[y+((a|8)+l)>>2]|0;if(v>>>0<(_[4830]|0)>>>0)nt();J=v+12|0;if((_[J>>2]|0)!=(d|0))nt();h=g+8|0;if((_[h>>2]|0)==(d|0)){_[J>>2]=g;_[h>>2]=v;o=g;break}else nt()}}while(0);if(!u)break;v=_[y+(l+28+a)>>2]|0;h=19608+(v<<2)|0;do{if((d|0)!=(_[h>>2]|0)){if(u>>>0<(_[4830]|0)>>>0)nt();h=u+16|0;if((_[h>>2]|0)==(d|0))_[h>>2]=o;else _[u+20>>2]=o;if(!o)break n}else{_[h>>2]=o;if(o)break;_[4827]=_[4827]&~(1<<v);break n}}while(0);if(o>>>0<(_[4830]|0)>>>0)nt();_[o+24>>2]=u;u=a|16;d=_[y+(u+l)>>2]|0;do{if(d)if(d>>>0<(_[4830]|0)>>>0)nt();else{_[o+16>>2]=d;_[d+24>>2]=o;break}}while(0);u=_[y+(m+u)>>2]|0;if(!u)break;if(u>>>0<(_[4830]|0)>>>0)nt();else{_[o+20>>2]=u;_[u+24>>2]=o;break}}else{m=_[y+((a|8)+l)>>2]|0;o=_[y+(l+12+a)>>2]|0;v=19344+(h<<1<<2)|0;do{if((m|0)!=(v|0)){if(m>>>0<(_[4830]|0)>>>0)nt();if((_[m+12>>2]|0)==(d|0))break;nt()}}while(0);if((o|0)==(m|0)){_[4826]=_[4826]&~(1<<h);break}do{if((o|0)==(v|0))u=o+8|0;else{if(o>>>0<(_[4830]|0)>>>0)nt();h=o+8|0;if((_[h>>2]|0)==(d|0)){u=h;break}nt()}}while(0);_[m+12>>2]=o;_[u>>2]=m}}while(0);d=y+((e|a)+l)|0;f=e+f|0}o=d+4|0;_[o>>2]=_[o>>2]&-2;_[y+(p+4)>>2]=f|1;_[y+(f+p)>>2]=f;o=f>>>3;if(f>>>0<256){f=o<<1;n=19344+(f<<2)|0;u=_[4826]|0;o=1<<o;do{if(!(u&o)){_[4826]=u|o;r=19344+(f+2<<2)|0;i=n}else{u=19344+(f+2<<2)|0;o=_[u>>2]|0;if(o>>>0>=(_[4830]|0)>>>0){r=u;i=o;break}nt()}}while(0);_[r>>2]=s;_[i+12>>2]=s;_[y+(p+8)>>2]=i;_[y+(p+12)>>2]=n;break}i=f>>>8;do{if(!i)i=0;else{if(f>>>0>16777215){i=31;break}M=(i+1048320|0)>>>16&8;R=i<<M;w=(R+520192|0)>>>16&4;R=R<<w;i=(R+245760|0)>>>16&2;i=14-(w|M|i)+(R<<i>>>15)|0;i=f>>>(i+7|0)&1|i<<1}}while(0);u=19608+(i<<2)|0;_[y+(p+28)>>2]=i;_[y+(p+20)>>2]=0;_[y+(p+16)>>2]=0;r=_[4827]|0;o=1<<i;if(!(r&o)){_[4827]=r|o;_[u>>2]=s;_[y+(p+24)>>2]=u;_[y+(p+12)>>2]=s;_[y+(p+8)>>2]=s;break}u=_[u>>2]|0;if((i|0)==31)i=0;else i=25-(i>>>1)|0;n:do{if((_[u+4>>2]&-8|0)!=(f|0)){i=f<<i;while(1){o=u+(i>>>31<<2)+16|0;r=_[o>>2]|0;if(!r)break;if((_[r+4>>2]&-8|0)==(f|0)){n=r;break n}else{i=i<<1;u=r}}if(o>>>0<(_[4830]|0)>>>0)nt();else{_[o>>2]=s;_[y+(p+24)>>2]=u;_[y+(p+12)>>2]=s;_[y+(p+8)>>2]=s;break t}}else n=u}while(0);r=n+8|0;i=_[r>>2]|0;o=_[4830]|0;if(n>>>0<o>>>0)nt();if(i>>>0<o>>>0)nt();else{_[i+12>>2]=s;_[r>>2]=s;_[y+(p+8)>>2]=i;_[y+(p+12)>>2]=n;_[y+(p+24)>>2]=0;break}}else{R=(_[4829]|0)+f|0;_[4829]=R;_[4832]=s;_[y+(p+4)>>2]=R|1}}while(0);R=y+(c|8)|0;b=t;return R|0}i=19752|0;while(1){n=_[i>>2]|0;if(n>>>0<=m>>>0?(a=_[i+4>>2]|0,f=n+a|0,f>>>0>m>>>0):0)break;i=_[i+8>>2]|0}i=n+(a+-39)|0;if(!(i&7))i=0;else i=0-i&7;n=n+(a+-47+i)|0;n=n>>>0<(m+16|0)>>>0?m:n;i=n+8|0;r=y+8|0;if(!(r&7))r=0;else r=0-r&7;R=l+-40-r|0;_[4832]=y+r;_[4829]=R;_[y+(r+4)>>2]=R|1;_[y+(l+-36)>>2]=40;_[4833]=_[4948];_[n+4>>2]=27;_[i+0>>2]=_[4938];_[i+4>>2]=_[4939];_[i+8>>2]=_[4940];_[i+12>>2]=_[4941];_[4938]=y;_[4939]=l;_[4941]=0;_[4940]=i;i=n+28|0;_[i>>2]=7;if((n+32|0)>>>0<f>>>0)do{R=i;i=i+4|0;_[i>>2]=7}while((R+8|0)>>>0<f>>>0);if((n|0)!=(m|0)){n=n-m|0;i=m+(n+4)|0;_[i>>2]=_[i>>2]&-2;_[m+4>>2]=n|1;_[m+n>>2]=n;i=n>>>3;if(n>>>0<256){o=i<<1;n=19344+(o<<2)|0;r=_[4826]|0;i=1<<i;do{if(!(r&i)){_[4826]=r|i;s=19344+(o+2<<2)|0;p=n}else{r=19344+(o+2<<2)|0;i=_[r>>2]|0;if(i>>>0>=(_[4830]|0)>>>0){s=r;p=i;break}nt()}}while(0);_[s>>2]=m;_[p+12>>2]=m;_[m+8>>2]=p;_[m+12>>2]=n;break}i=n>>>8;if(i)if(n>>>0>16777215)i=31;else{M=(i+1048320|0)>>>16&8;R=i<<M;w=(R+520192|0)>>>16&4;R=R<<w;i=(R+245760|0)>>>16&2;i=14-(w|M|i)+(R<<i>>>15)|0;i=n>>>(i+7|0)&1|i<<1}else i=0;p=19608+(i<<2)|0;_[m+28>>2]=i;_[m+20>>2]=0;_[m+16>>2]=0;r=_[4827]|0;o=1<<i;if(!(r&o)){_[4827]=r|o;_[p>>2]=m;_[m+24>>2]=p;_[m+12>>2]=m;_[m+8>>2]=m;break}r=_[p>>2]|0;if((i|0)==31)i=0;else i=25-(i>>>1)|0;t:do{if((_[r+4>>2]&-8|0)!=(n|0)){i=n<<i;while(1){p=r+(i>>>31<<2)+16|0;o=_[p>>2]|0;if(!o)break;if((_[o+4>>2]&-8|0)==(n|0)){c=o;break t}else{i=i<<1;r=o}}if(p>>>0<(_[4830]|0)>>>0)nt();else{_[p>>2]=m;_[m+24>>2]=r;_[m+12>>2]=m;_[m+8>>2]=m;break e}}else c=r}while(0);r=c+8|0;i=_[r>>2]|0;n=_[4830]|0;if(c>>>0<n>>>0)nt();if(i>>>0<n>>>0)nt();else{_[i+12>>2]=m;_[r>>2]=m;_[m+8>>2]=i;_[m+12>>2]=c;_[m+24>>2]=0;break}}}else{R=_[4830]|0;if((R|0)==0|y>>>0<R>>>0)_[4830]=y;_[4938]=y;_[4939]=l;_[4941]=0;_[4835]=_[4944];_[4834]=-1;n=0;do{R=n<<1;M=19344+(R<<2)|0;_[19344+(R+3<<2)>>2]=M;_[19344+(R+2<<2)>>2]=M;n=n+1|0}while((n|0)!=32);n=y+8|0;if(!(n&7))n=0;else n=0-n&7;R=l+-40-n|0;_[4832]=y+n;_[4829]=R;_[y+(n+4)>>2]=R|1;_[y+(l+-36)>>2]=40;_[4833]=_[4948]}}while(0);n=_[4829]|0;if(n>>>0>e>>>0){M=n-e|0;_[4829]=M;R=_[4832]|0;_[4832]=R+e;_[R+(e+4)>>2]=M|1;_[R+4>>2]=e|3;R=R+8|0;b=t;return R|0}}_[(Ye()|0)>>2]=12;R=0;b=t;return R|0}function wS(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,c=0,p=0,s=0,u=0,f=0,a=0,d=0,y=0,l=0,m=0,h=0,v=0,g=0,J=0,D=0;t=b;if(!e){b=t;return}l=e+-8|0;m=_[4830]|0;if(l>>>0<m>>>0)nt();d=_[e+-4>>2]|0;a=d&3;if((a|0)==1)nt();p=d&-8;c=e+(p+-8)|0;do{if(!(d&1)){g=_[l>>2]|0;if(!a){b=t;return}l=-8-g|0;d=e+l|0;a=g+p|0;if(d>>>0<m>>>0)nt();if((d|0)==(_[4831]|0)){n=e+(p+-4)|0;if((_[n>>2]&3|0)!=3){n=d;f=a;break}_[4828]=a;_[n>>2]=_[n>>2]&-2;_[e+(l+4)>>2]=a|1;_[c>>2]=a;b=t;return}v=g>>>3;if(g>>>0<256){n=_[e+(l+8)>>2]|0;f=_[e+(l+12)>>2]|0;y=19344+(v<<1<<2)|0;if((n|0)!=(y|0)){if(n>>>0<m>>>0)nt();if((_[n+12>>2]|0)!=(d|0))nt()}if((f|0)==(n|0)){_[4826]=_[4826]&~(1<<v);n=d;f=a;break}if((f|0)!=(y|0)){if(f>>>0<m>>>0)nt();y=f+8|0;if((_[y>>2]|0)==(d|0))h=y;else nt()}else h=f+8|0;_[n+12>>2]=f;_[h>>2]=n;n=d;f=a;break}h=_[e+(l+24)>>2]|0;v=_[e+(l+12)>>2]|0;do{if((v|0)==(d|0)){g=e+(l+20)|0;v=_[g>>2]|0;if(!v){g=e+(l+16)|0;v=_[g>>2]|0;if(!v){y=0;break}}while(1){D=v+20|0;J=_[D>>2]|0;if(J){v=J;g=D;continue}J=v+16|0;D=_[J>>2]|0;if(!D)break;else{v=D;g=J}}if(g>>>0<m>>>0)nt();else{_[g>>2]=0;y=v;break}}else{g=_[e+(l+8)>>2]|0;if(g>>>0<m>>>0)nt();m=g+12|0;if((_[m>>2]|0)!=(d|0))nt();J=v+8|0;if((_[J>>2]|0)==(d|0)){_[m>>2]=v;_[J>>2]=g;y=v;break}else nt()}}while(0);if(h){v=_[e+(l+28)>>2]|0;m=19608+(v<<2)|0;if((d|0)==(_[m>>2]|0)){_[m>>2]=y;if(!y){_[4827]=_[4827]&~(1<<v);n=d;f=a;break}}else{if(h>>>0<(_[4830]|0)>>>0)nt();m=h+16|0;if((_[m>>2]|0)==(d|0))_[m>>2]=y;else _[h+20>>2]=y;if(!y){n=d;f=a;break}}if(y>>>0<(_[4830]|0)>>>0)nt();_[y+24>>2]=h;m=_[e+(l+16)>>2]|0;do{if(m)if(m>>>0<(_[4830]|0)>>>0)nt();else{_[y+16>>2]=m;_[m+24>>2]=y;break}}while(0);l=_[e+(l+20)>>2]|0;if(l)if(l>>>0<(_[4830]|0)>>>0)nt();else{_[y+20>>2]=l;_[l+24>>2]=y;n=d;f=a;break}else{n=d;f=a}}else{n=d;f=a}}else{n=l;f=p}}while(0);if(n>>>0>=c>>>0)nt();a=e+(p+-4)|0;d=_[a>>2]|0;if(!(d&1))nt();if(!(d&2)){if((c|0)==(_[4832]|0)){D=(_[4829]|0)+f|0;_[4829]=D;_[4832]=n;_[n+4>>2]=D|1;if((n|0)!=(_[4831]|0)){b=t;return}_[4831]=0;_[4828]=0;b=t;return}if((c|0)==(_[4831]|0)){D=(_[4828]|0)+f|0;_[4828]=D;_[4831]=n;_[n+4>>2]=D|1;_[n+D>>2]=D;b=t;return}f=(d&-8)+f|0;a=d>>>3;do{if(d>>>0>=256){u=_[e+(p+16)>>2]|0;l=_[e+(p|4)>>2]|0;do{if((l|0)==(c|0)){d=e+(p+12)|0;a=_[d>>2]|0;if(!a){d=e+(p+8)|0;a=_[d>>2]|0;if(!a){s=0;break}}while(1){y=a+20|0;l=_[y>>2]|0;if(l){a=l;d=y;continue}y=a+16|0;l=_[y>>2]|0;if(!l)break;else{a=l;d=y}}if(d>>>0<(_[4830]|0)>>>0)nt();else{_[d>>2]=0;s=a;break}}else{d=_[e+p>>2]|0;if(d>>>0<(_[4830]|0)>>>0)nt();y=d+12|0;if((_[y>>2]|0)!=(c|0))nt();a=l+8|0;if((_[a>>2]|0)==(c|0)){_[y>>2]=l;_[a>>2]=d;s=l;break}else nt()}}while(0);if(u){a=_[e+(p+20)>>2]|0;d=19608+(a<<2)|0;if((c|0)==(_[d>>2]|0)){_[d>>2]=s;if(!s){_[4827]=_[4827]&~(1<<a);break}}else{if(u>>>0<(_[4830]|0)>>>0)nt();a=u+16|0;if((_[a>>2]|0)==(c|0))_[a>>2]=s;else _[u+20>>2]=s;if(!s)break}if(s>>>0<(_[4830]|0)>>>0)nt();_[s+24>>2]=u;c=_[e+(p+8)>>2]|0;do{if(c)if(c>>>0<(_[4830]|0)>>>0)nt();else{_[s+16>>2]=c;_[c+24>>2]=s;break}}while(0);c=_[e+(p+12)>>2]|0;if(c)if(c>>>0<(_[4830]|0)>>>0)nt();else{_[s+20>>2]=c;_[c+24>>2]=s;break}}}else{s=_[e+p>>2]|0;e=_[e+(p|4)>>2]|0;p=19344+(a<<1<<2)|0;if((s|0)!=(p|0)){if(s>>>0<(_[4830]|0)>>>0)nt();if((_[s+12>>2]|0)!=(c|0))nt()}if((e|0)==(s|0)){_[4826]=_[4826]&~(1<<a);break}if((e|0)!=(p|0)){if(e>>>0<(_[4830]|0)>>>0)nt();p=e+8|0;if((_[p>>2]|0)==(c|0))u=p;else nt()}else u=e+8|0;_[s+12>>2]=e;_[u>>2]=s}}while(0);_[n+4>>2]=f|1;_[n+f>>2]=f;if((n|0)==(_[4831]|0)){_[4828]=f;b=t;return}}else{_[a>>2]=d&-2;_[n+4>>2]=f|1;_[n+f>>2]=f}c=f>>>3;if(f>>>0<256){e=c<<1;i=19344+(e<<2)|0;p=_[4826]|0;c=1<<c;if(p&c){c=19344+(e+2<<2)|0;e=_[c>>2]|0;if(e>>>0<(_[4830]|0)>>>0)nt();else{r=c;o=e}}else{_[4826]=p|c;r=19344+(e+2<<2)|0;o=i}_[r>>2]=n;_[o+12>>2]=n;_[n+8>>2]=o;_[n+12>>2]=i;b=t;return}r=f>>>8;if(r)if(f>>>0>16777215)r=31;else{J=(r+1048320|0)>>>16&8;D=r<<J;g=(D+520192|0)>>>16&4;D=D<<g;r=(D+245760|0)>>>16&2;r=14-(g|J|r)+(D<<r>>>15)|0;r=f>>>(r+7|0)&1|r<<1}else r=0;o=19608+(r<<2)|0;_[n+28>>2]=r;_[n+20>>2]=0;_[n+16>>2]=0;e=_[4827]|0;c=1<<r;e:do{if(e&c){o=_[o>>2]|0;if((r|0)==31)r=0;else r=25-(r>>>1)|0;t:do{if((_[o+4>>2]&-8|0)!=(f|0)){r=f<<r;e=o;while(1){c=e+(r>>>31<<2)+16|0;o=_[c>>2]|0;if(!o)break;if((_[o+4>>2]&-8|0)==(f|0)){i=o;break t}else{r=r<<1;e=o}}if(c>>>0<(_[4830]|0)>>>0)nt();else{_[c>>2]=n;_[n+24>>2]=e;_[n+12>>2]=n;_[n+8>>2]=n;break e}}else i=o}while(0);o=i+8|0;r=_[o>>2]|0;c=_[4830]|0;if(i>>>0<c>>>0)nt();if(r>>>0<c>>>0)nt();else{_[r+12>>2]=n;_[o>>2]=n;_[n+8>>2]=r;_[n+12>>2]=i;_[n+24>>2]=0;break}}else{_[4827]=e|c;_[o>>2]=n;_[n+24>>2]=o;_[n+12>>2]=n;_[n+8>>2]=n}}while(0);D=(_[4834]|0)+-1|0;_[4834]=D;if(!D)n=19760|0;else{b=t;return}while(1){n=_[n>>2]|0;if(!n)break;else n=n+8|0}_[4834]=-1;b=t;return}function MS(){}function RS(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,c=0,p=0;r=e+n|0;if((n|0)>=20){t=t&255;p=e&3;c=t|t<<8|t<<16|t<<24;o=r&~3;if(p){p=e+4-p|0;while((e|0)<(p|0)){i[e>>0]=t;e=e+1|0}}while((e|0)<(o|0)){_[e>>2]=c;e=e+4|0}}while((e|0)<(r|0)){i[e>>0]=t;e=e+1|0}return e-n|0}function qS(e){e=e|0;var t=0;t=e;while(i[t>>0]|0)t=t+1|0;return t-e|0}function FS(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;if((n|0)>=4096)return ze(e|0,t|0,n|0)|0;r=e|0;if((e&3)==(t&3)){while(e&3){if(!n)return r|0;i[e>>0]=i[t>>0]|0;e=e+1|0;t=t+1|0;n=n-1|0}while((n|0)>=4){_[e>>2]=_[t>>2];e=e+4|0;t=t+4|0;n=n-4|0}}while((n|0)>0){i[e>>0]=i[t>>0]|0;e=e+1|0;t=t+1|0;n=n-1|0}return r|0}function PS(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;return bq[e&63](t|0,n|0,i|0)|0}function TS(e,t,n){e=e|0;t=t|0;n=n|0;return _e(0,e|0,t|0,n|0)|0}function LS(e,t,n){e=e|0;t=t|0;n=n|0;return _e(1,e|0,t|0,n|0)|0}function IS(e,t,n){e=e|0;t=t|0;n=n|0;return _e(2,e|0,t|0,n|0)|0}function WS(e,t,n){e=e|0;t=t|0;n=n|0;return _e(3,e|0,t|0,n|0)|0}function ES(e,t,n){e=e|0;t=t|0;n=n|0;return _e(4,e|0,t|0,n|0)|0}function OS(e,t,n){e=e|0;t=t|0;n=n|0;return _e(5,e|0,t|0,n|0)|0}function VS(e,t,n){e=e|0;t=t|0;n=n|0;return _e(6,e|0,t|0,n|0)|0}function US(e,t,n){e=e|0;t=t|0;n=n|0;return _e(7,e|0,t|0,n|0)|0}function NS(e,t,n){e=e|0;t=t|0;n=n|0;return _e(8,e|0,t|0,n|0)|0}function zS(e,t,n){e=e|0;t=t|0;n=n|0;return _e(9,e|0,t|0,n|0)|0}function HS(e,t,n){e=e|0;t=t|0;n=n|0;return _e(10,e|0,t|0,n|0)|0}function QS(e,t,n){e=e|0;t=t|0;n=n|0;return _e(11,e|0,t|0,n|0)|0}function KS(e,t,n){e=e|0;t=t|0;n=n|0;return _e(12,e|0,t|0,n|0)|0}function $S(e,t,n){e=e|0;t=t|0;n=n|0;return _e(13,e|0,t|0,n|0)|0}function ZS(e,t,n){e=e|0;t=t|0;n=n|0;return _e(14,e|0,t|0,n|0)|0}function YS(e,t,n){e=e|0;t=t|0;n=n|0;return _e(15,e|0,t|0,n|0)|0}function XS(e,t,n){e=e|0;t=t|0;n=n|0;return _e(16,e|0,t|0,n|0)|0}function eC(e,t,n){e=e|0;t=t|0;n=n|0;return _e(17,e|0,t|0,n|0)|0}function tC(e,t,n){e=e|0;t=t|0;n=n|0;return _e(18,e|0,t|0,n|0)|0}function nC(e,t,n){e=e|0;t=t|0;n=n|0;return _e(19,e|0,t|0,n|0)|0}function iC(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;fq[e&63](t|0,n|0,i|0,r|0,_|0)}function rC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(0,e|0,t|0,n|0,i|0,r|0)}function _C(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(1,e|0,t|0,n|0,i|0,r|0)}function oC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(2,e|0,t|0,n|0,i|0,r|0)}function cC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(3,e|0,t|0,n|0,i|0,r|0)}function pC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(4,e|0,t|0,n|0,i|0,r|0)}function sC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(5,e|0,t|0,n|0,i|0,r|0)}function uC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(6,e|0,t|0,n|0,i|0,r|0)}function bC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(7,e|0,t|0,n|0,i|0,r|0)}function fC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(8,e|0,t|0,n|0,i|0,r|0)}function aC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(9,e|0,t|0,n|0,i|0,r|0)}function dC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(10,e|0,t|0,n|0,i|0,r|0)}function yC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(11,e|0,t|0,n|0,i|0,r|0)}function lC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(12,e|0,t|0,n|0,i|0,r|0)}function mC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(13,e|0,t|0,n|0,i|0,r|0)}function hC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(14,e|0,t|0,n|0,i|0,r|0)}function vC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(15,e|0,t|0,n|0,i|0,r|0)}function gC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(16,e|0,t|0,n|0,i|0,r|0)}function JC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(17,e|0,t|0,n|0,i|0,r|0)}function DC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(18,e|0,t|0,n|0,i|0,r|0)}function xC(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_e(19,e|0,t|0,n|0,i|0,r|0)}function GC(e,t,n){e=e|0;t=t|0;n=+n;return+aq[e&63](t|0,+n)}function jC(e,t){e=e|0;t=+t;return+_e(0,e|0,+t)}function AC(e,t){e=e|0;t=+t;return+_e(1,e|0,+t)}function SC(e,t){e=e|0;t=+t;return+_e(2,e|0,+t)}function CC(e,t){e=e|0;t=+t;return+_e(3,e|0,+t)}function BC(e,t){e=e|0;t=+t;return+_e(4,e|0,+t)}function kC(e,t){e=e|0;t=+t;return+_e(5,e|0,+t)}function wC(e,t){e=e|0;t=+t;return+_e(6,e|0,+t)}function MC(e,t){e=e|0;t=+t;return+_e(7,e|0,+t)}function RC(e,t){e=e|0;t=+t;return+_e(8,e|0,+t)}function qC(e,t){e=e|0;t=+t;return+_e(9,e|0,+t)}function FC(e,t){e=e|0;t=+t;return+_e(10,e|0,+t)}function PC(e,t){e=e|0;t=+t;return+_e(11,e|0,+t)}function TC(e,t){e=e|0;t=+t;return+_e(12,e|0,+t)}function LC(e,t){e=e|0;t=+t;return+_e(13,e|0,+t)}function IC(e,t){e=e|0;t=+t;return+_e(14,e|0,+t)}function WC(e,t){e=e|0;t=+t;return+_e(15,e|0,+t)}function EC(e,t){e=e|0;t=+t;return+_e(16,e|0,+t)}function OC(e,t){e=e|0;t=+t;return+_e(17,e|0,+t)}function VC(e,t){e=e|0;t=+t;return+_e(18,e|0,+t)}function UC(e,t){e=e|0;t=+t;return+_e(19,e|0,+t)}function NC(e,t){e=e|0;t=t|0;dq[e&127](t|0)}function zC(e){e=e|0;_e(0,e|0)}function HC(e){e=e|0;_e(1,e|0)}function QC(e){e=e|0;_e(2,e|0)}function KC(e){e=e|0;_e(3,e|0)}function $C(e){e=e|0;_e(4,e|0)}function ZC(e){e=e|0;_e(5,e|0)}function YC(e){e=e|0;_e(6,e|0)}function XC(e){e=e|0;_e(7,e|0)}function eB(e){e=e|0;_e(8,e|0)}function tB(e){e=e|0;_e(9,e|0)}function nB(e){e=e|0;_e(10,e|0)}function iB(e){e=e|0;_e(11,e|0)}function rB(e){e=e|0;_e(12,e|0)}function _B(e){e=e|0;_e(13,e|0)}function oB(e){e=e|0;_e(14,e|0)}function cB(e){e=e|0;_e(15,e|0)}function pB(e){e=e|0;_e(16,e|0)}function sB(e){e=e|0;_e(17,e|0)}function uB(e){e=e|0;_e(18,e|0)}function bB(e){e=e|0;_e(19,e|0)}function fB(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=+_;return+yq[e&63](t|0,n|0,i|0,r|0,+_)}function aB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(0,e|0,t|0,n|0,i|0,+r)}function dB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(1,e|0,t|0,n|0,i|0,+r)}function yB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(2,e|0,t|0,n|0,i|0,+r)}function lB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(3,e|0,t|0,n|0,i|0,+r)}function mB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(4,e|0,t|0,n|0,i|0,+r)}function hB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(5,e|0,t|0,n|0,i|0,+r)}function vB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(6,e|0,t|0,n|0,i|0,+r)}function gB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(7,e|0,t|0,n|0,i|0,+r)}function JB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(8,e|0,t|0,n|0,i|0,+r)}function DB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(9,e|0,t|0,n|0,i|0,+r)}function xB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(10,e|0,t|0,n|0,i|0,+r)}function GB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(11,e|0,t|0,n|0,i|0,+r)}function jB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(12,e|0,t|0,n|0,i|0,+r)}function AB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(13,e|0,t|0,n|0,i|0,+r)}function SB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(14,e|0,t|0,n|0,i|0,+r)}function CB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(15,e|0,t|0,n|0,i|0,+r)}function BB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(16,e|0,t|0,n|0,i|0,+r)}function kB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(17,e|0,t|0,n|0,i|0,+r)}function wB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(18,e|0,t|0,n|0,i|0,+r)}function MB(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;return+_e(19,e|0,t|0,n|0,i|0,+r)}function RB(e,t,n){e=e|0;t=t|0;n=n|0;lq[e&127](t|0,n|0)}function qB(e,t){e=e|0;t=t|0;_e(0,e|0,t|0)}function FB(e,t){e=e|0;t=t|0;_e(1,e|0,t|0)}function PB(e,t){e=e|0;t=t|0;_e(2,e|0,t|0)}function TB(e,t){e=e|0;t=t|0;_e(3,e|0,t|0)}function LB(e,t){e=e|0;t=t|0;_e(4,e|0,t|0)}function IB(e,t){e=e|0;t=t|0;_e(5,e|0,t|0)}function WB(e,t){e=e|0;t=t|0;_e(6,e|0,t|0)}function EB(e,t){e=e|0;t=t|0;_e(7,e|0,t|0)}function OB(e,t){e=e|0;t=t|0;_e(8,e|0,t|0)}function VB(e,t){e=e|0;t=t|0;_e(9,e|0,t|0)}function UB(e,t){e=e|0;t=t|0;_e(10,e|0,t|0)}function NB(e,t){e=e|0;t=t|0;_e(11,e|0,t|0)}function zB(e,t){e=e|0;t=t|0;_e(12,e|0,t|0)}function HB(e,t){e=e|0;t=t|0;_e(13,e|0,t|0)}function QB(e,t){e=e|0;t=t|0;_e(14,e|0,t|0)}function KB(e,t){e=e|0;t=t|0;_e(15,e|0,t|0)}function $B(e,t){e=e|0;t=t|0;_e(16,e|0,t|0)}function ZB(e,t){e=e|0;t=t|0;_e(17,e|0,t|0)}function YB(e,t){e=e|0;t=t|0;_e(18,e|0,t|0)}function XB(e,t){e=e|0;t=t|0;_e(19,e|0,t|0)}function ek(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=+i;r=r|0;_=_|0;mq[e&63](t|0,n|0,+i,r|0,_|0)}function tk(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(0,e|0,t|0,+n,i|0,r|0)}function nk(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(1,e|0,t|0,+n,i|0,r|0)}function ik(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(2,e|0,t|0,+n,i|0,r|0)}function rk(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(3,e|0,t|0,+n,i|0,r|0)}function _k(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(4,e|0,t|0,+n,i|0,r|0)}function ok(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(5,e|0,t|0,+n,i|0,r|0)}function ck(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(6,e|0,t|0,+n,i|0,r|0)}function pk(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(7,e|0,t|0,+n,i|0,r|0)}function sk(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(8,e|0,t|0,+n,i|0,r|0)}function uk(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(9,e|0,t|0,+n,i|0,r|0)}function bk(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(10,e|0,t|0,+n,i|0,r|0)}function fk(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(11,e|0,t|0,+n,i|0,r|0)}function ak(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(12,e|0,t|0,+n,i|0,r|0)}function dk(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(13,e|0,t|0,+n,i|0,r|0)}function yk(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(14,e|0,t|0,+n,i|0,r|0)}function lk(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(15,e|0,t|0,+n,i|0,r|0)}function mk(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(16,e|0,t|0,+n,i|0,r|0)}function hk(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(17,e|0,t|0,+n,i|0,r|0)}function vk(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(18,e|0,t|0,+n,i|0,r|0)}function gk(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;_e(19,e|0,t|0,+n,i|0,r|0)}function Jk(e,t){e=e|0;t=t|0;return hq[e&63](t|0)|0}function Dk(e){e=e|0;return _e(0,e|0)|0}function xk(e){e=e|0;return _e(1,e|0)|0}function Gk(e){e=e|0;return _e(2,e|0)|0}function jk(e){e=e|0;return _e(3,e|0)|0}function Ak(e){e=e|0;return _e(4,e|0)|0}function Sk(e){e=e|0;return _e(5,e|0)|0}function Ck(e){e=e|0;return _e(6,e|0)|0}function Bk(e){e=e|0;return _e(7,e|0)|0}function kk(e){e=e|0;return _e(8,e|0)|0}function wk(e){e=e|0;return _e(9,e|0)|0}function Mk(e){e=e|0;return _e(10,e|0)|0}function Rk(e){e=e|0;return _e(11,e|0)|0}function qk(e){e=e|0;return _e(12,e|0)|0}function Fk(e){e=e|0;return _e(13,e|0)|0}function Pk(e){e=e|0;return _e(14,e|0)|0}function Tk(e){e=e|0;return _e(15,e|0)|0}function Lk(e){e=e|0;return _e(16,e|0)|0}function Ik(e){e=e|0;return _e(17,e|0)|0}function Wk(e){e=e|0;return _e(18,e|0)|0}function Ek(e){e=e|0;return _e(19,e|0)|0}function Ok(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=+i;r=r|0;vq[e&63](t|0,n|0,+i,r|0)}function Vk(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(0,e|0,t|0,+n,i|0)}function Uk(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(1,e|0,t|0,+n,i|0)}function Nk(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(2,e|0,t|0,+n,i|0)}function zk(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(3,e|0,t|0,+n,i|0)}function Hk(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(4,e|0,t|0,+n,i|0)}function Qk(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(5,e|0,t|0,+n,i|0)}function Kk(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(6,e|0,t|0,+n,i|0)}function $k(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(7,e|0,t|0,+n,i|0)}function Zk(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(8,e|0,t|0,+n,i|0)}function Yk(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(9,e|0,t|0,+n,i|0)}function Xk(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(10,e|0,t|0,+n,i|0)}function ew(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(11,e|0,t|0,+n,i|0)}function tw(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(12,e|0,t|0,+n,i|0)}function nw(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(13,e|0,t|0,+n,i|0)}function iw(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(14,e|0,t|0,+n,i|0)}function rw(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(15,e|0,t|0,+n,i|0)}function _w(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(16,e|0,t|0,+n,i|0)}function ow(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(17,e|0,t|0,+n,i|0)}function cw(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(18,e|0,t|0,+n,i|0)}function pw(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;_e(19,e|0,t|0,+n,i|0)}function sw(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;gq[e&63](t|0,n|0,i|0)}function uw(e,t,n){e=e|0;t=t|0;n=n|0;_e(0,e|0,t|0,n|0)}function bw(e,t,n){e=e|0;t=t|0;n=n|0;_e(1,e|0,t|0,n|0)}function fw(e,t,n){e=e|0;t=t|0;n=n|0;_e(2,e|0,t|0,n|0)}function aw(e,t,n){e=e|0;t=t|0;n=n|0;_e(3,e|0,t|0,n|0)}function dw(e,t,n){e=e|0;t=t|0;n=n|0;_e(4,e|0,t|0,n|0)}function yw(e,t,n){e=e|0;t=t|0;n=n|0;_e(5,e|0,t|0,n|0)}function lw(e,t,n){e=e|0;t=t|0;n=n|0;_e(6,e|0,t|0,n|0)}function mw(e,t,n){e=e|0;t=t|0;n=n|0;_e(7,e|0,t|0,n|0)}function hw(e,t,n){e=e|0;t=t|0;n=n|0;_e(8,e|0,t|0,n|0)}function vw(e,t,n){e=e|0;t=t|0;n=n|0;_e(9,e|0,t|0,n|0)}function gw(e,t,n){e=e|0;t=t|0;n=n|0;_e(10,e|0,t|0,n|0)}function Jw(e,t,n){e=e|0;t=t|0;n=n|0;_e(11,e|0,t|0,n|0)}function Dw(e,t,n){e=e|0;t=t|0;n=n|0;_e(12,e|0,t|0,n|0)}function xw(e,t,n){e=e|0;t=t|0;n=n|0;_e(13,e|0,t|0,n|0)}function Gw(e,t,n){e=e|0;t=t|0;n=n|0;_e(14,e|0,t|0,n|0)}function jw(e,t,n){e=e|0;t=t|0;n=n|0;_e(15,e|0,t|0,n|0)}function Aw(e,t,n){e=e|0;t=t|0;n=n|0;_e(16,e|0,t|0,n|0)}function Sw(e,t,n){e=e|0;t=t|0;n=n|0;_e(17,e|0,t|0,n|0)}function Cw(e,t,n){e=e|0;t=t|0;n=n|0;_e(18,e|0,t|0,n|0)}function Bw(e,t,n){e=e|0;t=t|0;n=n|0;_e(19,e|0,t|0,n|0)}function kw(e){e=e|0;Jq[e&63]()}function ww(){_e(0)}function Mw(){_e(1)}function Rw(){_e(2)}function qw(){_e(3)}function Fw(){_e(4)}function Pw(){_e(5)}function Tw(){_e(6)}function Lw(){_e(7)}function Iw(){_e(8)}function Ww(){_e(9)}function Ew(){_e(10)}function Ow(){_e(11)}function Vw(){_e(12)}function Uw(){_e(13)}function Nw(){_e(14)}function zw(){_e(15)}function Hw(){_e(16)}function Qw(){_e(17)}function Kw(){_e(18)}function $w(){_e(19)}function Zw(e,t,n,i){e=e|0;t=t|0;n=n|0;i=+i;Dq[e&63](t|0,n|0,+i)}function Yw(e,t,n){e=e|0;t=t|0;n=+n;_e(0,e|0,t|0,+n)}function Xw(e,t,n){e=e|0;t=t|0;n=+n;_e(1,e|0,t|0,+n)}function eM(e,t,n){e=e|0;t=t|0;n=+n;_e(2,e|0,t|0,+n)}function tM(e,t,n){e=e|0;t=t|0;n=+n;_e(3,e|0,t|0,+n)}function nM(e,t,n){e=e|0;t=t|0;n=+n;_e(4,e|0,t|0,+n)}function iM(e,t,n){e=e|0;t=t|0;n=+n;_e(5,e|0,t|0,+n)}function rM(e,t,n){e=e|0;t=t|0;n=+n;_e(6,e|0,t|0,+n)}function _M(e,t,n){e=e|0;t=t|0;n=+n;_e(7,e|0,t|0,+n)}function oM(e,t,n){e=e|0;t=t|0;n=+n;_e(8,e|0,t|0,+n)}function cM(e,t,n){e=e|0;t=t|0;n=+n;_e(9,e|0,t|0,+n)}function pM(e,t,n){e=e|0;t=t|0;n=+n;_e(10,e|0,t|0,+n)}function sM(e,t,n){e=e|0;t=t|0;n=+n;_e(11,e|0,t|0,+n)}function uM(e,t,n){e=e|0;t=t|0;n=+n;_e(12,e|0,t|0,+n)}function bM(e,t,n){e=e|0;t=t|0;n=+n;_e(13,e|0,t|0,+n)}function fM(e,t,n){e=e|0;t=t|0;n=+n;_e(14,e|0,t|0,+n)}function aM(e,t,n){e=e|0;t=t|0;n=+n;_e(15,e|0,t|0,+n)}function dM(e,t,n){e=e|0;t=t|0;n=+n;_e(16,e|0,t|0,+n)}function yM(e,t,n){e=e|0;t=t|0;n=+n;_e(17,e|0,t|0,+n)}function lM(e,t,n){e=e|0;t=t|0;n=+n;_e(18,e|0,t|0,+n)}function mM(e,t,n){e=e|0;t=t|0;n=+n;_e(19,e|0,t|0,+n)}function hM(e,t,n,i,r,_,o){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;o=o|0;xq[e&63](t|0,n|0,i|0,r|0,_|0,o|0)}function vM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(0,e|0,t|0,n|0,i|0,r|0,_|0)}function gM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(1,e|0,t|0,n|0,i|0,r|0,_|0)}function JM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(2,e|0,t|0,n|0,i|0,r|0,_|0)}function DM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(3,e|0,t|0,n|0,i|0,r|0,_|0)}function xM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(4,e|0,t|0,n|0,i|0,r|0,_|0)}function GM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(5,e|0,t|0,n|0,i|0,r|0,_|0)}function jM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(6,e|0,t|0,n|0,i|0,r|0,_|0)}function AM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(7,e|0,t|0,n|0,i|0,r|0,_|0)}function SM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(8,e|0,t|0,n|0,i|0,r|0,_|0)}function CM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(9,e|0,t|0,n|0,i|0,r|0,_|0)}function BM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(10,e|0,t|0,n|0,i|0,r|0,_|0)}function kM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(11,e|0,t|0,n|0,i|0,r|0,_|0)}function wM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(12,e|0,t|0,n|0,i|0,r|0,_|0)}function MM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(13,e|0,t|0,n|0,i|0,r|0,_|0)}function RM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(14,e|0,t|0,n|0,i|0,r|0,_|0)}function qM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(15,e|0,t|0,n|0,i|0,r|0,_|0)}function FM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(16,e|0,t|0,n|0,i|0,r|0,_|0)}function PM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(17,e|0,t|0,n|0,i|0,r|0,_|0)}function TM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(18,e|0,t|0,n|0,i|0,r|0,_|0)}function LM(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;_e(19,e|0,t|0,n|0,i|0,r|0,_|0)}function IM(e,t,n){e=e|0;t=t|0;n=n|0;return Gq[e&63](t|0,n|0)|0}function WM(e,t){e=e|0;t=t|0;return _e(0,e|0,t|0)|0}function EM(e,t){e=e|0;t=t|0;return _e(1,e|0,t|0)|0}function OM(e,t){e=e|0;t=t|0;return _e(2,e|0,t|0)|0}function VM(e,t){e=e|0;t=t|0;return _e(3,e|0,t|0)|0}function UM(e,t){e=e|0;t=t|0;return _e(4,e|0,t|0)|0}function NM(e,t){e=e|0;t=t|0;return _e(5,e|0,t|0)|0}function zM(e,t){e=e|0;t=t|0;return _e(6,e|0,t|0)|0}function HM(e,t){e=e|0;t=t|0;return _e(7,e|0,t|0)|0}function QM(e,t){e=e|0;t=t|0;return _e(8,e|0,t|0)|0}function KM(e,t){e=e|0;t=t|0;return _e(9,e|0,t|0)|0}function $M(e,t){e=e|0;t=t|0;return _e(10,e|0,t|0)|0}function ZM(e,t){e=e|0;t=t|0;return _e(11,e|0,t|0)|0}function YM(e,t){e=e|0;t=t|0;return _e(12,e|0,t|0)|0}function XM(e,t){e=e|0;t=t|0;return _e(13,e|0,t|0)|0}function eR(e,t){e=e|0;t=t|0;return _e(14,e|0,t|0)|0}function tR(e,t){e=e|0;t=t|0;return _e(15,e|0,t|0)|0}function nR(e,t){e=e|0;t=t|0;return _e(16,e|0,t|0)|0}function iR(e,t){e=e|0;t=t|0;return _e(17,e|0,t|0)|0}function rR(e,t){e=e|0;t=t|0;return _e(18,e|0,t|0)|0}function _R(e,t){e=e|0;t=t|0;return _e(19,e|0,t|0)|0}function oR(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;return jq[e&63](t|0,n|0,i|0,r|0,_|0)|0}function cR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(0,e|0,t|0,n|0,i|0,r|0)|0}function pR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(1,e|0,t|0,n|0,i|0,r|0)|0}function sR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(2,e|0,t|0,n|0,i|0,r|0)|0}function uR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(3,e|0,t|0,n|0,i|0,r|0)|0}function bR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(4,e|0,t|0,n|0,i|0,r|0)|0}function fR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(5,e|0,t|0,n|0,i|0,r|0)|0}function aR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(6,e|0,t|0,n|0,i|0,r|0)|0}function dR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(7,e|0,t|0,n|0,i|0,r|0)|0}function yR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(8,e|0,t|0,n|0,i|0,r|0)|0}function lR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(9,e|0,t|0,n|0,i|0,r|0)|0}function mR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(10,e|0,t|0,n|0,i|0,r|0)|0}function hR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(11,e|0,t|0,n|0,i|0,r|0)|0}function vR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(12,e|0,t|0,n|0,i|0,r|0)|0}function gR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(13,e|0,t|0,n|0,i|0,r|0)|0}function JR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(14,e|0,t|0,n|0,i|0,r|0)|0}function DR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(15,e|0,t|0,n|0,i|0,r|0)|0}function xR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(16,e|0,t|0,n|0,i|0,r|0)|0}function GR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(17,e|0,t|0,n|0,i|0,r|0)|0}function jR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(18,e|0,t|0,n|0,i|0,r|0)|0}function AR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;return _e(19,e|0,t|0,n|0,i|0,r|0)|0}function SR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;Aq[e&63](t|0,n|0,i|0,r|0)}function CR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(0,e|0,t|0,n|0,i|0)}function BR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(1,e|0,t|0,n|0,i|0)}function kR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(2,e|0,t|0,n|0,i|0)}function wR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(3,e|0,t|0,n|0,i|0)}function MR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(4,e|0,t|0,n|0,i|0)}function RR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(5,e|0,t|0,n|0,i|0)}function qR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(6,e|0,t|0,n|0,i|0)}function FR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(7,e|0,t|0,n|0,i|0)}function PR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(8,e|0,t|0,n|0,i|0)}function TR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(9,e|0,t|0,n|0,i|0)}function LR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(10,e|0,t|0,n|0,i|0)}function IR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(11,e|0,t|0,n|0,i|0)}function WR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(12,e|0,t|0,n|0,i|0)}function ER(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(13,e|0,t|0,n|0,i|0)}function OR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(14,e|0,t|0,n|0,i|0)}function VR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(15,e|0,t|0,n|0,i|0)}function UR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(16,e|0,t|0,n|0,i|0)}function NR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(17,e|0,t|0,n|0,i|0)}function zR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(18,e|0,t|0,n|0,i|0)}function HR(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;_e(19,e|0,t|0,n|0,i|0)}function QR(e,t,n){e=e|0;t=t|0;n=n|0;ne(0);return 0}function KR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;ne(1)}function $R(e,t){e=e|0;t=+t;ne(2);return 0.0}function ZR(e){e=e|0;ne(3)}function YR(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=+r;ne(4);return 0.0}function XR(e,t){e=e|0;t=t|0;ne(5)}function eq(e,t,n,i,r){e=e|0;t=t|0;n=+n;i=i|0;r=r|0;ne(6)}function tq(e){e=e|0;ne(7);return 0}function nq(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;ne(8)}function iq(e,t,n){e=e|0;t=t|0;n=n|0;ne(9)}function rq(){ne(10)}function _q(){ct()}function oq(e,t,n){e=e|0;t=t|0;n=+n;ne(11)}function cq(e,t,n,i,r,_){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;_=_|0;ne(12)}function pq(e,t){e=e|0;t=t|0;ne(13);return 0}function sq(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;ne(14);return 0}function uq(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;ne(15)}var bq=[QR,QR,TS,QR,LS,QR,IS,QR,WS,QR,ES,QR,OS,QR,VS,QR,US,QR,NS,QR,zS,QR,HS,QR,QS,QR,KS,QR,$S,QR,ZS,QR,YS,QR,XS,QR,eC,QR,tC,QR,nC,QR,Zx,tj,cj,aj,vj,Lh,fS,QR,QR,QR,QR,QR,QR,QR,QR,QR,QR,QR,QR,QR,QR,QR];var fq=[KR,KR,rC,KR,_C,KR,oC,KR,cC,KR,pC,KR,sC,KR,uC,KR,bC,KR,fC,KR,aC,KR,dC,KR,yC,KR,lC,KR,mC,KR,hC,KR,vC,KR,gC,KR,JC,KR,DC,KR,xC,KR,GS,xS,gS,KR,KR,KR,KR,KR,KR,KR,KR,KR,KR,KR,KR,KR,KR,KR,KR,KR,KR,KR];var aq=[$R,$R,jC,$R,AC,$R,SC,$R,CC,$R,BC,$R,kC,$R,wC,$R,MC,$R,RC,$R,qC,$R,FC,$R,PC,$R,TC,$R,LC,$R,IC,$R,WC,$R,EC,$R,OC,$R,VC,$R,UC,$R,CG,wv,Ev,Zv,ug,Jg,wg,mA,SA,TA,HA,$R,$R,$R,$R,$R,$R,$R,$R,$R,$R,$R];var dq=[ZR,ZR,zC,ZR,HC,ZR,QC,ZR,KC,ZR,$C,ZR,ZC,ZR,YC,ZR,XC,ZR,eB,ZR,tB,ZR,nB,ZR,iB,ZR,rB,ZR,_B,ZR,oB,ZR,cB,ZR,pB,ZR,sB,ZR,uB,ZR,bB,ZR,Ex,Ox,Kx,$x,rG,_G,uG,bG,aG,dG,lG,mG,BG,wG,MG,$G,KG,nG,iG,Yx,Xx,eG,tG,Lj,Kj,Tj,eA,Oh,Vh,Hh,Qh,Yh,Xh,pv,sv,av,dv,hv,vv,xv,Gv,Mv,Rv,qv,Ov,Vv,Uv,Yv,Xv,eg,tg,ng,ig,fg,ag,dg,Dg,xg,Gg,Mg,qg,Fg,hA,vA,gA,CA,BA,kA,LA,IA,WA,QA,KA,$A,nS,tS,oS,sS,cS,pS,uS,bS,eS,ZR,ZR,ZR];var yq=[YR,YR,aB,YR,dB,YR,yB,YR,lB,YR,mB,YR,hB,YR,vB,YR,gB,YR,JB,YR,DB,YR,xB,YR,GB,YR,jB,YR,AB,YR,SB,YR,CB,YR,BB,YR,kB,YR,wB,YR,MB,YR,fG,YR,YR,YR,YR,YR,YR,YR,YR,YR,YR,YR,YR,YR,YR,YR,YR,YR,YR,YR,YR,YR];var lq=[XR,XR,qB,XR,FB,XR,PB,XR,TB,XR,LB,XR,IB,XR,WB,XR,EB,XR,OB,XR,VB,XR,UB,XR,NB,XR,zB,XR,HB,XR,QB,XR,KB,XR,$B,XR,ZB,XR,YB,XR,XB,XR,Qx,oG,cG,hG,vG,gG,JG,jG,AG,kG,DG,xG,$j,Zj,Cv,Bv,jv,Av,Lv,Iv,Fv,Pv,Qv,Kv,Nv,zv,cg,pg,bg,rg,_g,hg,vg,yg,lg,Cg,Bg,Rg,jg,Ag,dA,yA,Pg,fA,GA,jA,JA,DA,qA,FA,wA,MA,UA,NA,EA,OA,$h,lv,Jv,ov,bv,Wh,Nh,XR,XR,XR,XR,XR,XR,XR,XR,XR,XR,XR,XR,XR,XR,XR,XR,XR,XR,XR,XR,XR,XR,XR];var mq=[eq,eq,tk,eq,nk,eq,ik,eq,rk,eq,_k,eq,ok,eq,ck,eq,pk,eq,sk,eq,uk,eq,bk,eq,fk,eq,ak,eq,dk,eq,yk,eq,lk,eq,mk,eq,hk,eq,vk,eq,gk,eq,zx,eq,eq,eq,eq,eq,eq,eq,eq,eq,eq,eq,eq,eq,eq,eq,eq,eq,eq,eq,eq,eq];var hq=[tq,tq,Dk,tq,xk,tq,Gk,tq,jk,tq,Ak,tq,Sk,tq,Ck,tq,Bk,tq,kk,tq,wk,tq,Mk,tq,Rk,tq,qk,tq,Fk,tq,Pk,tq,Tk,tq,Lk,tq,Ik,tq,Wk,tq,Ek,tq,XG,oj,fj,hj,iS,tq,tq,tq,tq,tq,tq,tq,tq,tq,tq,tq,tq,tq,tq,tq,tq,tq];var vq=[nq,nq,Vk,nq,Uk,nq,Nk,nq,zk,nq,Hk,nq,Qk,nq,Kk,nq,$k,nq,Zk,nq,Yk,nq,Xk,nq,ew,nq,tw,nq,nw,nq,iw,nq,rw,nq,_w,nq,ow,nq,cw,nq,pw,nq,Nx,nq,nq,nq,nq,nq,nq,nq,nq,nq,nq,nq,nq,nq,nq,nq,nq,nq,nq,nq,nq,nq];var gq=[iq,iq,uw,iq,bw,iq,fw,iq,aw,iq,dw,iq,yw,iq,lw,iq,mw,iq,hw,iq,vw,iq,gw,iq,Jw,iq,Dw,iq,xw,iq,Gw,iq,jw,iq,Aw,iq,Sw,iq,Cw,iq,Bw,iq,pG,sG,Yj,Xj,iq,iq,iq,iq,iq,iq,iq,iq,iq,iq,iq,iq,iq,iq,iq,iq,iq,iq];var Jq=[rq,rq,ww,rq,Mw,rq,Rw,rq,qw,rq,Fw,rq,Pw,rq,Tw,rq,Lw,rq,Iw,rq,Ww,rq,Ew,rq,Ow,rq,Vw,rq,Uw,rq,Nw,rq,zw,rq,Hw,rq,Qw,rq,Kw,rq,$w,rq,_q,YA,XA,rq,rq,rq,rq,rq,rq,rq,rq,rq,rq,rq,rq,rq,rq,rq,rq,rq,rq,rq];var Dq=[oq,oq,Yw,oq,Xw,oq,eM,oq,tM,oq,nM,oq,iM,oq,rM,oq,_M,oq,oM,oq,cM,oq,pM,oq,sM,oq,uM,oq,bM,oq,fM,oq,aM,oq,dM,oq,yM,oq,lM,oq,mM,oq,SG,rj,uj,lj,Dj,kv,Wv,$v,sg,gg,kg,lA,AA,PA,zA,oq,oq,oq,oq,oq,oq,oq];var xq=[cq,cq,vM,cq,gM,cq,JM,cq,DM,cq,xM,cq,GM,cq,jM,cq,AM,cq,SM,cq,CM,cq,BM,cq,kM,cq,wM,cq,MM,cq,RM,cq,qM,cq,FM,cq,PM,cq,TM,cq,LM,cq,SS,AS,jS,cq,cq,cq,cq,cq,cq,cq,cq,cq,cq,cq,cq,cq,cq,cq,cq,cq,cq,cq];var Gq=[pq,pq,WM,pq,EM,pq,OM,pq,VM,pq,UM,pq,NM,pq,zM,pq,HM,pq,QM,pq,KM,pq,$M,pq,ZM,pq,YM,pq,XM,pq,eR,pq,tR,pq,nR,pq,iR,pq,rR,pq,_R,pq,yG,GG,YG,_j,bj,mj,Sv,Tv,Hv,og,mg,Sg,aA,xA,RA,VA,Ej,pq,pq,pq,pq,pq];var jq=[sq,sq,cR,sq,pR,sq,sR,sq,uR,sq,bR,sq,fR,sq,aR,sq,dR,sq,yR,sq,lR,sq,mR,sq,hR,sq,vR,sq,gR,sq,JR,sq,DR,sq,xR,sq,GR,sq,jR,sq,AR,sq,nj,pj,dj,gj,Kh,yv,gv,_v,uv,Ih,Uh,sq,sq,sq,sq,sq,sq,sq,sq,sq,sq,sq];var Aq=[uq,uq,CR,uq,BR,uq,kR,uq,wR,uq,MR,uq,RR,uq,qR,uq,FR,uq,PR,uq,TR,uq,LR,uq,IR,uq,WR,uq,ER,uq,OR,uq,VR,uq,UR,uq,NR,uq,zR,uq,HR,uq,Vx,Ux,Hx,ij,sj,yj,Jj,Eh,zh,Zh,cv,fv,mv,Dv,dS,yS,mS,uq,uq,uq,uq,uq];return{_emscripten_bind_b2WheelJoint_GetSpringDampingRatio_0:$y,_emscripten_bind_b2ContactEdge_set_next_1:hD,_emscripten_bind_b2ChainShape_get_m_count_0:_a,_emscripten_bind_b2Fixture_SetFriction_1:xn,_emscripten_bind_b2Shape_ComputeAABB_3:mm,_emscripten_bind_b2FrictionJointDef_set_userData_1:yo,_emscripten_bind_b2Vec3_get_z_0:D_,_emscripten_bind_b2World_IsLocked_0:zc,_emscripten_bind_b2Draw_GetFlags_0:hu,_emscripten_bind_b2FrictionJoint_IsActive_0:bJ,_emscripten_bind_b2Color_set_g_1:Aa,_emscripten_bind_b2WheelJointDef_get_frequencyHz_0:vs,_emscripten_bind_b2RopeJointDef_set_localAnchorA_1:DD,_emscripten_bind_b2PolygonShape_RayCast_4:ud,_emscripten_bind_b2World_GetTreeBalance_0:Oc,_emscripten_bind_b2PrismaticJointDef_get_upperTranslation_0:Ho,_emscripten_bind_JSDraw_DrawSolidCircle_4:wy,_emscripten_bind_b2RevoluteJoint_GetLocalAnchorA_0:RJ,_emscripten_bind_b2FixtureDef_get_filter_0:Y_,_emscripten_bind_b2FrictionJointDef_get_type_0:bo,_emscripten_bind_b2RevoluteJoint_GetMotorTorque_1:KJ,_emscripten_bind_b2MotorJointDef_set_type_1:ZD,_emscripten_bind_b2RayCastInput_get_p1_0:Qa,_emscripten_bind_b2EdgeShape_set_m_hasVertex3_1:Ed,_emscripten_bind_b2JointEdge_set_joint_1:wb,_emscripten_enum_b2ShapeType_e_polygon:sx,_emscripten_bind_b2Fixture___destroy___0:Cn,_emscripten_bind_b2PulleyJoint_SetUserData_1:Al,_emscripten_bind_b2World_SetWarmStarting_1:wc,_emscripten_bind_JSDraw_DrawCircle_3:ky,_emscripten_bind_b2WeldJoint_IsActive_0:Gb,_emscripten_bind_b2DestructionListener___destroy___0:dJ,_emscripten_bind_b2BodyDef_set_type_1:pr,_emscripten_bind_b2ChainShape_ComputeAABB_3:ta,_emscripten_bind_b2MouseJointDef_set_type_1:Wl,_emscripten_bind_b2JointEdge_get_prev_0:Mb,_emscripten_bind_b2WeldJoint_GetReactionTorque_1:gb,_emscripten_bind_b2MotorJointDef_get_maxForce_0:UD,_emscripten_bind_b2DistanceJointDef_get_userData_0:Lm,_emscripten_bind_b2BodyDef_get_position_0:sr,_emscripten_bind_b2RopeJointDef_get_localAnchorB_0:xD,_emscripten_bind_b2RevoluteJointDef_set_userData_1:vy,_emscripten_bind_b2RevoluteJointDef_get_localAnchorA_0:Yd,_emscripten_bind_b2World_SetContactFilter_1:dc,_emscripten_bind_b2WheelJointDef_get_collideConnected_0:ws,_emscripten_bind_b2MouseJointDef_set_userData_1:Ol,_emscripten_bind_JSDraw_DrawSegment_3:My,_emscripten_bind_b2FixtureDef_set_restitution_1:H_,_emscripten_bind_b2MotorJointDef_Initialize_2:ID,_emscripten_bind_b2EdgeShape_GetChildCount_0:jd,_emscripten_bind_b2Mat33_get_ey_0:en,_emscripten_bind_b2MouseJoint_IsActive_0:ri,_emscripten_bind_b2World_GetGravity_0:Nc,_emscripten_bind_b2World_DrawDebugData_0:xc,_emscripten_bind_b2Profile_get_broadphase_0:er,_emscripten_bind_b2PulleyJointDef_get_bodyA_0:rf,_emscripten_bind_b2PrismaticJoint_SetLimits_2:pp,_emscripten_bind_b2PulleyJointDef_get_localAnchorA_0:Vb,_emscripten_bind_b2DistanceJoint_GetAnchorA_0:Ft,_emscripten_bind_b2ManifoldPoint_set_tangentImpulse_1:hf,_emscripten_bind_b2PolygonShape_get_m_count_0:yd,_emscripten_bind_b2RopeJointDef_set_collideConnected_1:PD,_emscripten_bind_b2CircleShape_set_m_p_1:Os,_emscripten_bind_JSContactListener_EndContact_1:Op,_emscripten_bind_b2MassData_set_mass_1:Gu,_emscripten_bind_b2Vec3_get_x_0:h_,_emscripten_bind_b2ChainShape_CreateChain_2:Hf,_emscripten_bind_b2Color_get_r_0:xa,_emscripten_bind_b2World_DestroyBody_1:hc,_emscripten_bind_b2Profile_get_solvePosition_0:Yi,_emscripten_bind_b2Shape_RayCast_4:lm,_emscripten_bind_b2PulleyJoint_GetGroundAnchorA_0:ul,_emscripten_bind_b2Mat33___destroy___0:_n,_emscripten_bind_b2GearJoint_GetReactionTorque_1:Xu,_emscripten_bind_b2WeldJointDef_set_collideConnected_1:yu,_emscripten_bind_b2Manifold_get_type_0:Co,_emscripten_bind_b2RevoluteJoint___destroy___0:pD,_emscripten_bind_b2PulleyJointDef_b2PulleyJointDef_0:Tb,_emscripten_bind_b2World_SetAutoClearForces_1:Hc,_emscripten_bind_b2PrismaticJointDef_set_lowerTranslation_1:zo,_emscripten_bind_b2BodyDef_set_position_1:ur,_emscripten_bind_b2Transform_get_q_0:Ef,_emscripten_bind_b2FrictionJoint_GetMaxForce_0:Yg,_emscripten_bind_b2PolygonShape_set_m_count_1:ld,_emscripten_bind_b2Contact_GetNext_0:em,_emscripten_bind_b2MotorJointDef_set_userData_1:XD,_emscripten_bind_b2EdgeShape_get_m_type_0:Od,_emscripten_bind_b2GearJoint_GetJoint1_0:Vu,_emscripten_bind_b2WheelJoint_GetMaxMotorTorque_0:Ny,_emscripten_bind_b2MotorJoint_SetMaxTorque_1:ji,_emscripten_bind_b2GearJoint_GetAnchorA_0:$u,_emscripten_enum_b2JointType_e_mouseJoint:mx,_emscripten_bind_b2MouseJointDef_set_bodyA_1:Ul,_emscripten_enum_b2JointType_e_revoluteJoint:ax,_emscripten_bind_b2World_SetContactListener_1:yc,_emscripten_bind_b2Body_IsAwake_0:Fh,_emscripten_bind_b2JointEdge_set_other_1:Bb,_emscripten_bind_b2RevoluteJoint_IsMotorEnabled_0:VJ,_emscripten_bind_b2MouseJointDef_set_target_1:Ml,_emscripten_bind_b2MotorJoint_SetCorrectionFactor_1:Si,_emscripten_bind_b2FixtureDef_get_density_0:Q_,_emscripten_bind_b2ChainShape_set_m_vertices_1:ra,_emscripten_bind_b2ChainShape_get_m_vertices_0:ia,_emscripten_bind_b2Rot_set_s_1:yi,_emscripten_bind_b2MotorJointDef_get_collideConnected_0:rx,_emscripten_bind_b2RevoluteJoint_GetUpperLimit_0:EJ,_emscripten_bind_b2WheelJointDef_set_bodyB_1:ks,_emscripten_bind_b2WheelJointDef_set_enableMotor_1:ds,_emscripten_bind_b2FixtureDef_get_userData_0:O_,_emscripten_bind_b2FrictionJointDef_set_collideConnected_1:Jo,_emscripten_bind_b2PrismaticJointDef_get_lowerTranslation_0:No,_emscripten_bind_b2GearJoint_GetCollideConnected_0:rb,_emscripten_bind_b2RevoluteJointDef_get_upperAngle_0:py,_emscripten_bind_b2Body_ApplyAngularImpulse_2:uh,_emscripten_enum_b2JointType_e_frictionJoint:Jx,_emscripten_bind_b2RayCastOutput_set_fraction_1:Mp,_emscripten_bind_b2Color_set_r_1:Ga,_emscripten_bind_b2DistanceJointDef_get_length_0:km,_emscripten_bind_b2PulleyJoint_GetBodyB_0:vl,_emscripten_bind_b2WheelJointDef_set_type_1:Gs,_emscripten_bind_b2World_GetTreeQuality_0:Vc,_emscripten_bind_b2BodyDef_set_gravityScale_1:qr,_emscripten_bind_b2RopeJointDef_set_bodyB_1:qD,_emscripten_bind_b2PrismaticJoint_GetLowerLimit_0:op,_emscripten_bind_b2AABB_get_lowerBound_0:q_,_emscripten_bind_b2WheelJoint_SetMotorSpeed_1:Oy,_emscripten_bind_b2PrismaticJointDef_get_referenceAngle_0:Eo,_emscripten_bind_b2Body_SetMassData_1:dh,_emscripten_bind_b2BodyDef_get_angularVelocity_0:yr,_emscripten_bind_b2WeldJoint_SetDampingRatio_1:bb,_emscripten_bind_b2PrismaticJointDef___destroy___0:bc,_emscripten_bind_b2Contact_IsTouching_0:Zl,_emscripten_bind_b2Draw_SetFlags_1:mu,_emscripten_bind_b2AABB_Contains_1:M_,_emscripten_bind_b2DistanceJoint_GetNext_0:It,_emscripten_bind_b2GearJoint_GetReactionForce_1:Yu,_emscripten_bind_b2PrismaticJoint_GetNext_0:xp,_emscripten_bind_b2Filter_get_groupIndex_0:qn,_emscripten_bind_b2PrismaticJoint_GetType_0:lp,_emscripten_bind_b2Fixture_GetRestitution_0:Gn,_emscripten_bind_b2Transform_set_q_1:Of,_emscripten_bind_b2PolygonShape___destroy___0:Jd,_emscripten_bind_b2AABB_get_upperBound_0:P_,_emscripten_bind_b2Transform___destroy___0:Vf,_emscripten_bind_b2WeldJointDef_set_localAnchorB_1:Xs,_emscripten_bind_b2CircleShape_set_m_radius_1:zs,_emscripten_bind_b2EdgeShape_set_m_hasVertex0_1:Id,_emscripten_bind_b2RopeJoint_GetMaxLength_0:Ra,_emscripten_bind_b2GearJoint_GetUserData_0:tb,_emscripten_bind_b2MotorJoint_GetCollideConnected_0:Wi,_emscripten_bind_b2GearJointDef_set_type_1:xJ,_emscripten_bind_b2DistanceJoint_SetDampingRatio_1:kt,_emscripten_bind_b2Contact_GetFixtureA_0:tm,_emscripten_bind_b2QueryCallback___destroy___0:Df,_emscripten_bind_b2PulleyJointDef_get_ratio_0:Zb,_emscripten_bind_b2PrismaticJointDef_get_localAnchorB_0:To,_emscripten_bind_b2CircleShape_set_m_type_1:Us,_emscripten_enum_b2ShapeType_e_typeCount:bx,_emscripten_bind_b2Body_SetTransform_2:$m,_emscripten_bind_b2RopeJoint_GetAnchorB_0:Ia,_emscripten_bind_b2AABB_set_upperBound_1:T_,_emscripten_bind_b2MouseJointDef_get_collideConnected_0:Hl,_emscripten_bind_b2ContactImpulse___destroy___0:xt,_emscripten_bind_b2PrismaticJointDef_b2PrismaticJointDef_0:Ro,_emscripten_bind_b2Vec2_set_x_1:c_,_emscripten_bind_b2RayCastInput___destroy___0:ed,_emscripten_bind_b2Body_ApplyForceToCenter_2:ch,_emscripten_bind_JSDestructionListener_JSDestructionListener_0:mt,_emscripten_bind_b2WheelJointDef_set_localAnchorA_1:ps,_emscripten_bind_b2FrictionJoint_GetBodyB_0:iJ,_emscripten_bind_b2DistanceJointDef_get_bodyA_0:Wm,_emscripten_bind_b2WeldJointDef_set_bodyA_1:bu,_emscripten_bind_b2World_SetDestructionListener_1:ac,_emscripten_bind_b2RevoluteJoint_GetJointSpeed_0:TJ,_emscripten_bind_b2WheelJoint_GetLocalAnchorB_0:Py,_emscripten_bind_b2JointDef___destroy___0:qf,_emscripten_bind_b2PrismaticJointDef_Initialize_4:qo,_emscripten_bind_b2FrictionJointDef_get_localAnchorA_0:io,_emscripten_bind_b2CircleShape_GetChildCount_0:Ps,_emscripten_bind_b2BodyDef_get_bullet_0:Sr,_emscripten_bind_b2ManifoldPoint_get_localPoint_0:af,_emscripten_bind_b2PrismaticJointDef_get_type_0:tc,_emscripten_bind_b2MassData_get_center_0:ju,_emscripten_bind_b2World_b2World_1:fc,_emscripten_bind_b2WheelJoint_GetReactionForce_1:nl,_emscripten_bind_b2World_SetSubStepping_1:Fc,_emscripten_bind_b2Vec2_op_add_1:Yr,_emscripten_bind_b2Joint_GetBodyA_0:wu,_emscripten_bind_b2Joint_GetCollideConnected_0:Eu,_emscripten_bind_b2MotorJoint_GetReactionTorque_1:Fi,_emscripten_bind_b2WheelJoint_IsMotorEnabled_0:Wy,_emscripten_bind_b2WheelJointDef___destroy___0:Rs,_emscripten_bind_b2Vec3_SetZero_0:a_,_emscripten_enum_b2JointType_e_pulleyJoint:lx,_emscripten_bind_b2ChainShape_get_m_nextVertex_0:sa,_emscripten_bind_b2Contact_SetEnabled_1:Yl,_emscripten_bind_b2Shape_set_m_radius_1:Dm,_emscripten_bind_b2GearJointDef_get_joint2_0:hJ,_emscripten_bind_b2World_SetDebugDraw_1:lc,_emscripten_bind_b2ContactID_set_key_1:Tp,_emscripten_bind_b2RevoluteJointDef_set_collideConnected_1:jy,_malloc:kS,_emscripten_bind_b2World_GetProxyCount_0:Tc,_emscripten_bind_b2Vec2_Normalize_0:i_,_emscripten_bind_b2WheelJoint_GetJointSpeed_0:Iy,_emscripten_bind_b2FrictionJointDef_set_localAnchorA_1:ro,_emscripten_bind_b2GearJoint_GetRatio_0:zu,_emscripten_bind_JSRayCastCallback_JSRayCastCallback_0:Pr,_emscripten_bind_b2RayCastInput_set_p2_1:Za,_emscripten_bind_b2RevoluteJointDef_get_motorSpeed_0:fy,_emscripten_bind_b2RayCastOutput_get_normal_0:Bp,_emscripten_bind_b2WeldJoint_GetBodyA_0:yb,_emscripten_bind_b2MotorJointDef_set_maxForce_1:ND,_emscripten_enum_b2DrawFlag_e_jointBit:Fx,_emscripten_bind_b2FixtureDef_get_isSensor_0:$_,_emscripten_bind_b2PulleyJointDef_set_bodyB_1:cf,_emscripten_bind_b2WheelJoint_EnableMotor_1:Ey,_emscripten_bind_b2WheelJoint_GetLocalAnchorA_0:Fy,_emscripten_bind_JSDraw_DrawSolidPolygon_3:By,_emscripten_bind_b2Rot_Set_1:si,_emscripten_bind_b2ContactFeature_set_typeB_1:zr,_emscripten_bind_JSDraw___destroy___0:qy,_emscripten_bind_b2MouseJointDef___destroy___0:Kl,_emscripten_bind_b2Mat33_Solve22_1:Kt,_emscripten_bind_b2Profile_set_solvePosition_1:Xi,_emscripten_bind_b2ContactFilter___destroy___0:sD,_emscripten_bind_b2PulleyJointDef_get_localAnchorB_0:Nb,_emscripten_bind_b2ChainShape_set_m_hasPrevVertex_1:fa,_emscripten_bind_b2PrismaticJoint___destroy___0:Cp,_emscripten_bind_b2World_CreateJoint_1:vc,_emscripten_bind_b2Profile_get_solveTOI_0:nr,_emscripten_bind_b2ManifoldPoint_get_id_0:vf,_emscripten_bind_b2Manifold_set_pointCount_1:wo,_emscripten_bind_b2PrismaticJoint_GetMotorSpeed_0:fp,_emscripten_bind_b2Body_SetSleepingAllowed_1:Mh,_emscripten_bind_b2Rot_SetIdentity_0:ui,_emscripten_bind_b2PulleyJoint_GetGroundAnchorB_0:bl,_emscripten_bind_b2Vec3_op_add_1:y_,_emscripten_bind_b2FrictionJoint_GetType_0:tJ,_emscripten_bind_b2DistanceJointDef_set_dampingRatio_1:Fm,_emscripten_bind_b2MotorJoint_GetBodyA_0:ki,_emscripten_bind_b2MouseJointDef_get_dampingRatio_0:Tl,_emscripten_bind_b2RevoluteJoint_GetMotorSpeed_0:zJ,_emscripten_bind_b2ChainShape_set_m_type_1:la,_emscripten_bind_b2RevoluteJointDef_set_bodyB_1:xy,_emscripten_bind_b2Body_GetGravityScale_0:Ah,_emscripten_bind_b2GearJointDef_get_bodyB_0:CJ,_emscripten_bind_b2Mat33_b2Mat33_0:Nt,_emscripten_bind_b2MouseJointDef_get_bodyB_0:Nl,_emscripten_bind_b2Shape_TestPoint_2:ym,_emscripten_bind_b2Body_GetWorldVector_1:mh,_emscripten_bind_b2WeldJointDef_get_frequencyHz_0:nu,_emscripten_bind_b2PolygonShape_Set_2:nd,_emscripten_bind_b2Manifold___destroy___0:Mo,_emscripten_bind_b2PulleyJointDef_set_lengthA_1:Qb,_emscripten_bind_b2RevoluteJointDef_set_localAnchorA_1:Xd,_emscripten_bind_b2GearJoint___destroy___0:_b,_emscripten_bind_b2RevoluteJoint_GetJointAngle_0:PJ,_emscripten_bind_b2PulleyJointDef_set_ratio_1:Yb,_emscripten_bind_b2JointEdge_set_prev_1:Rb,_emscripten_bind_b2PrismaticJoint_GetReactionTorque_1:Dp,_emscripten_bind_b2Body_GetLocalPoint_1:hh,_emscripten_bind_b2PrismaticJoint_GetCollideConnected_0:Sp,_emscripten_bind_b2RopeJointDef_get_userData_0:BD,_emscripten_bind_b2DistanceJoint_IsActive_0:Ot,_emscripten_bind_b2MotorJointDef_set_angularOffset_1:VD,_emscripten_bind_b2Vec2_b2Vec2_2:Kr,_emscripten_bind_b2PrismaticJoint_GetJointTranslation_0:np,_emscripten_bind_b2Vec2_b2Vec2_0:Qr,_emscripten_bind_b2DistanceJoint_GetAnchorB_0:Pt,_emscripten_bind_b2WheelJointDef_get_maxMotorTorque_0:ys,_emscripten_bind_b2Vec2_op_sub_1:Xr,_emscripten_bind_b2CircleShape_get_m_p_0:Es,_emscripten_bind_b2ContactFeature_get_indexA_0:Ir,_emscripten_bind_b2MotorJointDef_b2MotorJointDef_0:LD,_emscripten_bind_b2ChainShape_set_m_nextVertex_1:ua,_emscripten_bind_b2PulleyJoint_GetCollideConnected_0:Cl,_emscripten_bind_b2PulleyJoint_GetAnchorB_0:Jl,_emscripten_bind_b2Mat33_get_ex_0:Yt,_emscripten_bind_b2Body_GetPosition_0:Ym,_emscripten_bind_b2Profile___destroy___0:rr,_emscripten_bind_b2ContactEdge_get_prev_0:yD,_emscripten_bind_b2DistanceJoint_SetFrequency_1:Ct,_emscripten_enum_b2ShapeType_e_chain:ux,_emscripten_enum_b2ContactFeatureType_e_vertex:Ix,_emscripten_bind_b2Fixture_GetBody_0:an,_emscripten_bind_b2ContactImpulse_set_count_1:Dt,_emscripten_bind_b2PulleyJointDef_get_bodyB_0:of,_emscripten_bind_b2Rot_set_c_1:mi,_emscripten_bind_b2RevoluteJoint_GetReactionTorque_1:nD,_emscripten_bind_b2Fixture_SetDensity_1:gn,_emscripten_bind_b2ChainShape_get_m_prevVertex_0:ca,_emscripten_bind_b2World_ClearForces_0:Dc,_emscripten_bind_b2Vec3___destroy___0:G_,_emscripten_bind_b2WheelJointDef_set_userData_1:As,_emscripten_bind_b2WeldJoint_SetFrequency_1:sb,_emscripten_bind_JSContactListener_PreSolve_2:Vp,_emscripten_bind_b2Body_SetFixedRotation_1:Ig,_emscripten_bind_b2RayCastOutput_set_normal_1:kp,_emscripten_bind_b2DistanceJoint_GetDampingRatio_0:wt,_emscripten_bind_b2WeldJointDef_set_userData_1:su,_emscripten_bind_b2Body_GetMassData_1:ah,_emscripten_bind_b2MouseJointDef_set_bodyB_1:zl,_emscripten_bind_b2CircleShape_GetType_0:Fs,_emscripten_bind_b2PolygonShape_GetType_0:cd,_emscripten_bind_b2PrismaticJointDef_set_referenceAngle_1:Oo,_emscripten_bind_b2RopeJointDef_get_collideConnected_0:FD,_emscripten_bind_b2FixtureDef_set_filter_1:X_,_emscripten_bind_b2PulleyJointDef_get_groundAnchorA_0:Ib,_emscripten_bind_b2Fixture_SetFilterData_1:un,_emscripten_bind_b2FrictionJointDef_get_userData_0:ao,_emscripten_bind_b2RayCastCallback___destroy___0:ob,_emscripten_bind_b2PulleyJointDef_set_localAnchorA_1:Ub,_emscripten_bind_b2MotorJoint_SetUserData_1:Li,_emscripten_bind_b2PrismaticJoint_GetLocalAxisA_0:ep,_emscripten_bind_b2MotorJoint_GetBodyB_0:wi,_emscripten_bind_b2Transform_Set_2:Lf,_emscripten_bind_b2MouseJoint_SetTarget_1:Wn,_emscripten_bind_b2RopeJointDef_get_localAnchorA_0:JD,_emscripten_bind_b2ContactEdge_set_contact_1:dD,_emscripten_bind_b2RevoluteJointDef_get_enableLimit_0:ry,_emscripten_bind_b2CircleShape_get_m_radius_0:Ns,_emscripten_bind_b2RevoluteJoint_GetUserData_0:rD,_emscripten_bind_b2Profile_set_solveTOI_1:ir,_emscripten_bind_b2PrismaticJointDef_set_type_1:nc,_emscripten_bind_b2GearJointDef_get_userData_0:GJ,_emscripten_bind_b2WheelJoint_SetSpringFrequencyHz_1:Hy,_emscripten_bind_b2FrictionJointDef___destroy___0:Do,_emscripten_bind_b2PrismaticJoint_GetReactionForce_1:Jp,_emscripten_bind_b2Transform_b2Transform_0:Ff,_emscripten_bind_b2MouseJoint_GetCollideConnected_0:_i,_emscripten_enum_b2LimitState_e_equalLimits:Sx,_emscripten_bind_b2ManifoldPoint_set_normalImpulse_1:lf,_emscripten_bind_b2Body_GetContactList_0:Vg,_emscripten_bind_b2Body_IsFixedRotation_0:Wg,_emscripten_enum_b2DrawFlag_e_shapeBit:qx,_emscripten_bind_b2Contact_GetFriction_0:om,_emscripten_bind_b2WheelJoint_GetAnchorB_0:tl,_emscripten_bind_b2DistanceJointDef_set_length_1:wm,_emscripten_bind_b2DistanceJoint_GetLocalAnchorB_0:jt,_emscripten_bind_b2FrictionJoint_GetLocalAnchorB_0:$g,_emscripten_bind_b2Mat33_set_ey_1:tn,_emscripten_bind_b2DistanceJointDef_get_type_0:Pm,_emscripten_bind_b2Draw_ClearFlags_1:gu,_emscripten_bind_b2Body_IsActive_0:Lg,_emscripten_bind_b2Contact_ResetRestitution_0:um,_emscripten_bind_b2World_GetAllowSleeping_0:kc,_emscripten_bind_b2ManifoldPoint_b2ManifoldPoint_0:ff,_emscripten_bind_b2PrismaticJointDef_set_maxMotorForce_1:Yo,_emscripten_bind_b2GearJointDef_set_bodyA_1:SJ,_emscripten_bind_b2RevoluteJointDef_set_enableMotor_1:by,_emscripten_bind_b2PulleyJoint_IsActive_0:Sl,_emscripten_bind_b2MouseJoint_GetNext_0:ti,_emscripten_bind_b2Transform_set_p_1:Wf,_emscripten_bind_b2EdgeShape_set_m_vertex0_1:Fd,_emscripten_bind_b2PulleyJointDef_get_lengthB_0:Kb,_emscripten_bind_b2WeldJoint_SetUserData_1:xb,_emscripten_bind_b2Fixture_SetSensor_1:pn,_emscripten_bind_b2GearJointDef_get_joint1_0:lJ,_emscripten_bind_b2PrismaticJoint_GetMotorForce_1:yp,_emscripten_bind_b2DistanceJoint_GetBodyA_0:Rt,_emscripten_bind_b2GearJoint_IsActive_0:ib,_emscripten_bind_b2EdgeShape_get_m_vertex0_0:qd,_emscripten_bind_b2World_GetBodyCount_0:Lc,_emscripten_bind_b2Fixture_GetMassData_1:vn,_emscripten_bind_b2WeldJointDef_get_collideConnected_0:du,_emscripten_bind_b2FrictionJoint_GetMaxTorque_0:eJ,_emscripten_bind_b2EdgeShape_RayCast_4:Sd,_emscripten_bind_b2BodyDef_set_allowSleep_1:Dr,_emscripten_bind_b2PulleyJoint_GetType_0:ml,_emscripten_bind_b2WeldJointDef_set_localAnchorA_1:Zs,_emscripten_bind_b2Profile_set_step_1:Vi,_emscripten_bind_b2ContactEdge_set_other_1:fD,_emscripten_bind_b2PulleyJoint_GetCurrentLengthB_0:ll,_emscripten_bind_b2Vec2_op_mul_1:e_,_emscripten_bind_b2PrismaticJointDef_get_localAnchorA_0:Fo,_emscripten_bind_b2EdgeShape___destroy___0:zd,_emscripten_bind_b2RopeJoint_GetAnchorA_0:La,_emscripten_bind_b2World_GetContactCount_0:Wc,_emscripten_bind_b2MotorJointDef_set_correctionFactor_1:KD,_emscripten_bind_b2DistanceJointDef_set_userData_1:Im,_emscripten_bind_b2ContactEdge_get_other_0:bD,_emscripten_bind_b2RopeJoint_GetLocalAnchorB_0:wa,_emscripten_bind_b2PulleyJointDef___destroy___0:uf,_emscripten_bind_b2MouseJoint_GetBodyB_0:$n,_emscripten_bind_b2PolygonShape_TestPoint_2:sd,_emscripten_bind_b2EdgeShape_set_m_vertex3_1:Td,_emscripten_bind_b2PolygonShape_b2PolygonShape_0:td,_emscripten_bind_b2GearJointDef_set_ratio_1:JJ,_emscripten_bind_b2WheelJoint_SetMaxMotorTorque_1:Uy,_emscripten_bind_b2WheelJointDef_get_localAxisA_0:bs,_emscripten_bind_b2DistanceJointDef_get_localAnchorA_0:Am,_emscripten_bind_b2MassData_set_center_1:Au,_emscripten_bind_b2Contact_SetTangentSpeed_1:bm,_emscripten_bind_b2FrictionJointDef_get_localAnchorB_0:_o,_emscripten_bind_b2BodyDef_get_active_0:Br,_emscripten_bind_b2Body_GetAngularVelocity_0:_h,_emscripten_bind_b2WeldJoint_GetBodyB_0:lb,_emscripten_bind_b2Draw___destroy___0:Ju,_emscripten_bind_b2WheelJointDef_Initialize_4:os,_emscripten_bind_b2WeldJointDef_set_dampingRatio_1:_u,_emscripten_bind_b2Contact_IsEnabled_0:Xl,_emscripten_bind_b2Joint_GetAnchorB_0:qu,_emscripten_bind_b2PrismaticJointDef_get_userData_0:ic,_emscripten_bind_b2MotorJoint_GetMaxForce_0:Gi,_emscripten_bind_b2RevoluteJoint_GetBodyA_0:ZJ,_emscripten_bind_b2ContactID_set_cf_1:Fp,_emscripten_bind_b2Rot_GetXAxis_0:fi,_emscripten_bind_b2ContactEdge_set_prev_1:lD,_emscripten_bind_b2Vec3_Set_3:d_,_emscripten_bind_b2Fixture_GetNext_0:dn,_emscripten_bind_b2FrictionJointDef_set_localAnchorB_1:oo,_emscripten_bind_b2PulleyJoint_GetNext_0:Gl,_emscripten_bind_b2ChainShape_get_m_type_0:ya,_emscripten_bind_b2GearJointDef_get_bodyA_0:AJ,_emscripten_bind_b2DistanceJointDef_set_frequencyHz_1:Rm,_emscripten_bind_b2RevoluteJointDef_get_localAnchorB_0:ey,_emscripten_bind_b2RevoluteJointDef_get_referenceAngle_0:ny,_emscripten_bind_JSContactFilter___destroy___0:Kd,_memset:RS,_emscripten_bind_b2PolygonShape_get_m_radius_0:vd,_emscripten_bind_b2RopeJoint_GetUserData_0:Va,_emscripten_bind_b2RopeJointDef_get_bodyA_0:wD,_emscripten_bind_b2DistanceJointDef_get_dampingRatio_0:qm,_emscripten_enum_b2ManifoldType_e_faceA:Bx,_emscripten_enum_b2ManifoldType_e_faceB:kx,_emscripten_bind_b2RevoluteJointDef_get_bodyB_0:Dy,_emscripten_bind_b2FixtureDef_b2FixtureDef_0:I_,_emscripten_bind_b2PrismaticJoint_SetUserData_1:jp,_emscripten_bind_b2EdgeShape_get_m_hasVertex3_0:Wd,_emscripten_enum_b2ShapeType_e_edge:px,_emscripten_bind_b2RevoluteJoint_GetMaxMotorTorque_0:QJ,_emscripten_bind_b2BodyDef_set_active_1:kr,_emscripten_bind_b2DistanceJointDef_set_localAnchorB_1:Bm,_emscripten_bind_b2Body_GetWorldPoint_1:lh,_emscripten_bind_b2ManifoldPoint_get_normalImpulse_0:yf,_emscripten_bind_JSContactFilter_ShouldCollide_2:Qd,_emscripten_bind_b2Joint_GetReactionTorque_1:Pu,_emscripten_bind_b2RevoluteJointDef_set_type_1:my,_emscripten_bind_b2RopeJointDef_b2RopeJointDef_0:gD,_emscripten_bind_b2BodyDef_get_linearDamping_0:mr,_emscripten_bind_b2MotorJointDef_get_bodyB_0:nx,_emscripten_bind_b2World_Step_3:Jc,_emscripten_bind_b2CircleShape_RayCast_4:Ls,_emscripten_bind_b2Profile_get_step_0:Oi,_emscripten_bind_b2Vec3_b2Vec3_0:b_,_emscripten_bind_b2Vec3_b2Vec3_3:f_,_emscripten_bind_b2PulleyJoint_GetLengthB_0:al,_emscripten_bind_b2Filter_set_categoryBits_1:wn,_emscripten_bind_b2MotorJoint_GetUserData_0:Ti,_emscripten_bind_b2PrismaticJoint_GetLocalAnchorA_0:Yc,_emscripten_bind_b2Shape_get_m_type_0:vm,_emscripten_bind_b2MouseJoint_SetDampingRatio_1:zn,_emscripten_bind_b2World_GetAutoClearForces_0:Qc,_emscripten_enum_b2ShapeType_e_circle:cx,_emscripten_bind_b2BodyDef_set_fixedRotation_1:Ar,_emscripten_bind_b2RopeJoint_GetLimitState_0:qa,_emscripten_bind_b2JointDef_get_collideConnected_0:Mf,_emscripten_bind_b2Body_Dump_0:Qg,_emscripten_bind_b2RevoluteJoint_GetLowerLimit_0:WJ,_emscripten_bind_b2Body_GetWorldCenter_0:eh,_emscripten_bind_JSContactListener___destroy___0:Np,_emscripten_bind_b2BodyDef_set_linearVelocity_1:dr,_emscripten_bind_b2JointDef_set_collideConnected_1:Rf,_emscripten_bind_b2MotorJoint___destroy___0:Ei,_emscripten_bind_b2Body_GetUserData_0:Ng,_emscripten_bind_b2World_GetContinuousPhysics_0:qc,_emscripten_bind_b2Fixture_RayCast_3:hn,_emscripten_bind_b2JointDef_set_bodyA_1:Bf,_emscripten_bind_b2GearJointDef_get_collideConnected_0:kJ,_emscripten_bind_b2RopeJointDef_get_maxLength_0:jD,_emscripten_bind_b2MouseJointDef_get_bodyA_0:Vl,_emscripten_bind_b2Body_SetBullet_1:kh,_emscripten_bind_b2DistanceJoint_GetType_0:Mt,_emscripten_bind_b2FixtureDef_get_restitution_0:z_,_emscripten_bind_b2Fixture_GetType_0:on,_emscripten_bind_b2PulleyJointDef_set_localAnchorB_1:zb,_emscripten_bind_b2RevoluteJoint_GetBodyB_0:YJ,_emscripten_bind_b2Profile_set_solveInit_1:Ki,_emscripten_bind_b2RopeJointDef_set_type_1:CD,_emscripten_bind_b2PrismaticJointDef_get_bodyB_0:cc,_emscripten_bind_b2Body_SetLinearVelocity_1:nh,_emscripten_bind_b2RevoluteJoint_GetReferenceAngle_0:FJ,_emscripten_bind_b2PulleyJointDef_get_userData_0:tf,_emscripten_bind_b2PrismaticJointDef_set_bodyB_1:pc,_emscripten_bind_b2FrictionJointDef_b2FrictionJointDef_0:to,_free:wS,_emscripten_bind_b2PulleyJoint_GetCurrentLengthA_0:yl,_emscripten_bind_b2Manifold_get_localNormal_0:Go,_emscripten_bind_b2AABB_RayCast_2:R_,_emscripten_bind_b2FixtureDef_set_isSensor_1:Z_,_emscripten_bind_b2RopeJoint_GetBodyB_0:Ta,_emscripten_bind_b2PrismaticJoint_GetAnchorA_0:vp,_emscripten_bind_b2ChainShape_set_m_count_1:oa,_emscripten_bind_b2PrismaticJoint_IsMotorEnabled_0:sp,_emscripten_bind_b2WeldJoint_GetFrequency_0:ub,_emscripten_bind_b2Joint_GetUserData_0:Lu,_emscripten_bind_b2RevoluteJointDef_get_lowerAngle_0:oy,_emscripten_bind_b2Manifold_set_type_1:Bo,_emscripten_bind_b2DistanceJoint_GetLength_0:St,_emscripten_bind_b2RopeJointDef_set_maxLength_1:AD,_emscripten_bind_b2ChainShape_TestPoint_2:Xf,_emscripten_bind_b2PrismaticJoint_GetReferenceAngle_0:tp,_emscripten_bind_b2RayCastInput_get_p2_0:$a,_emscripten_bind_b2RevoluteJoint_EnableLimit_1:IJ,_emscripten_bind_b2BodyDef_set_angle_1:fr,_emscripten_bind_b2WeldJoint_GetUserData_0:Db,_emscripten_bind_b2WheelJointDef_get_localAnchorA_0:cs,_emscripten_bind_b2PulleyJointDef_set_type_1:ef,_emscripten_bind_b2Body_IsBullet_0:wh,_emscripten_bind_b2MotorJointDef_set_bodyA_1:tx,_emscripten_bind_b2Mat33_GetSymInverse33_1:Zt,_emscripten_bind_b2Body_ApplyLinearImpulse_3:sh,_emscripten_bind_b2PolygonShape_ComputeMass_2:fd,_emscripten_bind_b2WeldJoint_GetLocalAnchorA_0:cb,_emscripten_bind_b2MouseJoint_SetFrequency_1:Un,_emscripten_bind_b2EdgeShape_get_m_vertex1_0:kd,_emscripten_bind_b2BodyDef_set_awake_1:Gr,_emscripten_bind_b2Vec2_get_y_0:p_,_emscripten_bind_b2Body_CreateFixture_1:Hm,_emscripten_bind_b2Body_CreateFixture_2:Qm,_emscripten_bind_b2PulleyJoint_GetUserData_0:jl,_emscripten_bind_b2Body_SetActive_1:Tg,_emscripten_bind_b2Fixture_GetUserData_0:yn,_emscripten_bind_b2PolygonShape_ComputeAABB_3:bd,_emscripten_bind_b2ContactFeature_get_typeA_0:Vr,_emscripten_bind_b2MouseJoint_GetReactionForce_1:Xn,_emscripten_bind_b2FrictionJoint_GetReactionTorque_1:cJ,_emscripten_bind_b2EdgeShape_TestPoint_2:Ad,_memcpy:FS,_emscripten_bind_b2PolygonShape_get_m_centroid_0:ad,_emscripten_bind_b2ChainShape___destroy___0:va,_emscripten_bind_b2GearJoint_SetUserData_1:nb,_emscripten_bind_b2Vec3_set_z_1:x_,_emscripten_bind_b2PrismaticJointDef_set_enableLimit_1:Uo,_emscripten_bind_b2DistanceJoint_GetFrequency_0:Bt,_emscripten_bind_b2Body_SetGravityScale_1:Sh,_emscripten_enum_b2ContactFeatureType_e_face:Wx,_emscripten_bind_b2AABB_GetPerimeter_0:B_,_emscripten_bind_b2PulleyJointDef_get_lengthA_0:Hb,_emscripten_bind_b2Vec3_set_x_1:v_,_emscripten_bind_b2PulleyJointDef_get_type_0:Xb,_emscripten_bind_JSDestructionListener_SayGoodbyeJoint_1:ht,_emscripten_bind_b2Shape___destroy___0:xm,_strlen:qS,_emscripten_bind_b2Color_set_b_1:Ca,_emscripten_bind_b2Joint_GetReactionForce_1:Fu,_emscripten_bind_b2FixtureDef_set_friction_1:N_,_emscripten_bind_b2ContactID___destroy___0:Lp,_emscripten_bind_b2EdgeShape_get_m_hasVertex0_0:Ld,_emscripten_bind_JSRayCastCallback_ReportFixture_4:Tr,_emscripten_bind_b2MotorJointDef_get_linearOffset_0:WD,_emscripten_bind_b2Profile_set_solveVelocity_1:Zi,_emscripten_bind_b2PrismaticJoint_GetAnchorB_0:gp,_emscripten_bind_b2WeldJointDef_b2WeldJointDef_0:Qs,_emscripten_enum_b2BodyType_b2_staticBody:wx,_emscripten_bind_b2RevoluteJointDef_set_upperAngle_1:sy,_emscripten_bind_b2RevoluteJointDef_get_type_0:ly,_emscripten_bind_b2GearJointDef_get_type_0:DJ,_emscripten_bind_b2ChainShape_GetType_0:Zf,_emscripten_bind_b2RayCastInput_get_maxFraction_0:Ya,_emscripten_bind_b2GearJoint_GetBodyA_0:Qu,_emscripten_bind_b2Body_GetLocalVector_1:vh,_emscripten_bind_b2PrismaticJoint_EnableLimit_1:_p,_emscripten_bind_b2FrictionJointDef_get_maxForce_0:co,_emscripten_bind_b2BodyDef_set_angularVelocity_1:lr,_emscripten_bind_b2Body_SetLinearDamping_1:xh,_emscripten_bind_b2WheelJoint_GetBodyB_0:Xy,_emscripten_bind_b2Color___destroy___0:Ba,_emscripten_bind_b2PrismaticJoint_IsActive_0:Ap,_emscripten_bind_b2Filter_get_categoryBits_0:kn,_emscripten_enum_b2JointType_e_weldJoint:gx,_emscripten_bind_b2World_SetContinuousPhysics_1:Rc,_emscripten_bind_b2MouseJointDef_get_target_0:wl,_emscripten_bind_b2Manifold_b2Manifold_0:xo,_emscripten_bind_b2PulleyJointDef_set_userData_1:nf,_emscripten_bind_b2FrictionJointDef_set_maxForce_1:po,_emscripten_bind_b2DistanceJointDef_b2DistanceJointDef_0:Gm,_emscripten_bind_b2PolygonShape_set_m_centroid_1:dd,_emscripten_bind_b2Mat33_GetInverse22_1:$t,_emscripten_bind_b2PolygonShape_SetAsBox_4:rd,_emscripten_bind_b2EdgeShape_get_m_vertex2_0:Md,_emscripten_bind_b2WheelJoint_GetReactionTorque_1:il,_emscripten_bind_b2RevoluteJointDef_b2RevoluteJointDef_0:$d,_emscripten_bind_b2ContactFeature_set_typeA_1:Ur,_emscripten_bind_b2Fixture_Dump_1:Sn,_emscripten_bind_b2World_GetJointList_0:Sc,_emscripten_bind_b2Manifold_set_localPoint_1:So,_emscripten_bind_b2DistanceJoint_SetUserData_1:Et,_emscripten_bind_b2BodyDef_set_bullet_1:Cr,_emscripten_bind_b2RayCastOutput___destroy___0:Rp,___cxa_can_catch:CS,_emscripten_bind_b2WheelJoint_GetNext_0:rl,_emscripten_bind_b2AABB_GetCenter_0:S_,_emscripten_bind_b2Filter_set_groupIndex_1:Fn,_emscripten_bind_b2JointDef_b2JointDef_0:xf,_emscripten_bind_b2CircleShape_b2CircleShape_0:qs,_emscripten_bind_b2GearJointDef_b2GearJointDef_0:yJ,_emscripten_bind_b2JointDef_get_bodyB_0:kf,_emscripten_bind_b2DistanceJoint_GetReactionForce_1:Tt,_emscripten_bind_b2PrismaticJoint_GetJointSpeed_0:ip,_emscripten_bind_b2PulleyJointDef_get_groundAnchorB_0:Eb,_emscripten_bind_b2Joint_GetAnchorA_0:Ru,_emscripten_bind_b2Contact_GetRestitution_0:sm,_emscripten_bind_b2ContactEdge_get_contact_0:aD,_emscripten_bind_b2RevoluteJointDef_get_userData_0:hy,_emscripten_bind_b2Body_ApplyTorque_2:ph,_emscripten_bind_b2Fixture_GetAABB_1:An,_emscripten_bind_b2DistanceJointDef_Initialize_4:jm,_emscripten_bind_b2PrismaticJointDef_set_collideConnected_1:uc,_emscripten_bind_b2PrismaticJointDef_set_localAxisA_1:Wo,_emscripten_bind_b2Contact_GetTangentSpeed_0:fm,_emscripten_enum_b2LimitState_e_atLowerLimit:jx,_emscripten_bind_b2ManifoldPoint_set_id_1:gf,_emscripten_bind_b2WheelJointDef_get_bodyB_0:Bs,_emscripten_bind_b2WeldJoint_GetLocalAnchorB_0:pb,_emscripten_bind_b2RevoluteJointDef_set_localAnchorB_1:ty,_emscripten_bind_b2RevoluteJoint_GetType_0:$J,_emscripten_bind_b2Body_DestroyFixture_1:Km,_emscripten_bind_b2Profile_set_broadphase_1:tr,_emscripten_bind_b2WheelJointDef_get_localAnchorB_0:ss,_emscripten_bind_b2ContactImpulse_get_count_0:Jt,_emscripten_bind_b2World_GetJointCount_0:Ic,_emscripten_bind_b2WheelJoint_GetMotorSpeed_0:Vy,_emscripten_bind_b2Body_GetAngularDamping_0:Gh,_emscripten_bind_b2WheelJointDef_get_dampingRatio_0:Js,_emscripten_bind_b2RayCastOutput_get_fraction_0:wp,_emscripten_enum_b2ManifoldType_e_circles:Cx,_emscripten_bind_b2GearJoint_SetRatio_1:Nu,_emscripten_bind_JSDraw_DrawPolygon_3:Cy,_emscripten_bind_b2Filter___destroy___0:Pn,_emscripten_bind_b2JointEdge_set_next_1:Fb,___cxa_is_pointer_type:BS,_emscripten_bind_b2BodyDef_get_fixedRotation_0:jr,_emscripten_bind_b2PrismaticJointDef_set_motorSpeed_1:ec,_emscripten_bind_b2ChainShape_SetPrevVertex_1:Qf,_emscripten_bind_b2MotorJoint_IsActive_0:Ii,_emscripten_bind_b2MouseJoint_GetReactionTorque_1:ei,_emscripten_bind_b2MouseJoint_GetUserData_0:ni,_emscripten_bind_b2WheelJoint_GetUserData_0:_l,_emscripten_bind_b2Vec3_op_sub_1:l_,_emscripten_bind_b2BodyDef_get_gravityScale_0:Rr,_emscripten_bind_b2Shape_GetType_0:am,_emscripten_bind_b2AABB_IsValid_0:A_,_emscripten_bind_b2WheelJoint_GetBodyA_0:Yy,_emscripten_bind_JSDraw_DrawTransform_1:Ry,_emscripten_bind_b2PulleyJoint_GetLengthA_0:fl,_emscripten_bind_b2DistanceJointDef_get_frequencyHz_0:Mm,_emscripten_bind_b2RevoluteJoint_SetMotorSpeed_1:NJ,_emscripten_bind_b2World___destroy___0:Zc,_emscripten_bind_b2ChainShape_get_m_hasNextVertex_0:aa,_emscripten_bind_b2ChainShape_SetNextVertex_1:Kf,_emscripten_bind_b2Body_SetType_1:Ch,_emscripten_bind_b2Body_GetMass_0:bh,_emscripten_bind_b2Rot_b2Rot_0:ci,_emscripten_bind_b2Rot_b2Rot_1:pi,_emscripten_enum_b2JointType_e_distanceJoint:yx,_emscripten_bind_b2PulleyJoint___destroy___0:Bl,_emscripten_bind_b2PrismaticJoint_GetLocalAnchorB_0:Xc,_emscripten_bind_b2MouseJoint_GetType_0:Qn,_emscripten_bind_JSQueryCallback___destroy___0:In,_emscripten_bind_b2RevoluteJointDef_set_lowerAngle_1:cy,_emscripten_bind_b2JointEdge___destroy___0:Pb,_emscripten_bind_b2PulleyJoint_GetRatio_0:dl,_emscripten_bind_JSContactListener_BeginContact_1:Ep,_emscripten_bind_b2MotorJointDef_set_linearOffset_1:ED,_emscripten_enum_b2JointType_e_motorJoint:xx,_emscripten_bind_b2JointEdge_get_next_0:qb,_emscripten_bind_b2RayCastInput_set_maxFraction_1:Xa,_emscripten_bind_b2MouseJoint_GetBodyA_0:Kn,_emscripten_bind_b2Profile_set_collide_1:Ni,_emscripten_bind_b2AABB_b2AABB_0:j_,_emscripten_bind_b2Fixture_Refilter_0:fn,_emscripten_bind_b2World_CreateBody_1:mc,_emscripten_bind_b2RopeJointDef_set_userData_1:kD,_emscripten_bind_b2Fixture_IsSensor_0:sn,_emscripten_bind_b2WeldJoint_GetType_0:db,_emscripten_bind_b2PrismaticJointDef_get_motorSpeed_0:Xo,_emscripten_bind_b2Rot___destroy___0:hi,_emscripten_bind_b2Filter_get_maskBits_0:Mn,_emscripten_bind_b2Mat22_get_ex_0:es,_emscripten_bind_b2Body_GetFixtureList_0:Eg,_emscripten_bind_b2RevoluteJointDef_get_enableMotor_0:uy,_emscripten_bind_b2MouseJointDef_set_dampingRatio_1:Ll,_emscripten_bind_JSRayCastCallback___destroy___0:Lr,_emscripten_bind_b2ContactListener___destroy___0:bf,_emscripten_bind_b2PrismaticJointDef_set_localAnchorB_1:Lo,_emscripten_enum_b2DrawFlag_e_pairBit:Tx,_emscripten_bind_b2FrictionJoint___destroy___0:aJ,_emscripten_bind_b2WeldJoint_Dump_0:ab,_emscripten_bind_b2MotorJoint_SetMaxForce_1:xi,_emscripten_bind_b2FrictionJointDef_get_maxTorque_0:so,_emscripten_bind_b2FrictionJoint_GetLocalAnchorA_0:Kg,_emscripten_bind_b2WeldJointDef_get_localAnchorB_0:Ys,_emscripten_bind_b2PrismaticJointDef_get_bodyA_0:_c,_emscripten_bind_b2Vec2_IsValid_0:r_,_emscripten_bind_b2PrismaticJointDef_set_bodyA_1:oc,_emscripten_bind_b2World_GetWarmStarting_0:Mc,_emscripten_bind_b2RevoluteJointDef_set_enableLimit_1:_y,_emscripten_bind_b2WeldJointDef___destroy___0:lu,_emscripten_bind_b2Mat22_Solve_1:Xp,_emscripten_bind_b2Color_get_g_0:ja,_emscripten_bind_VoidPtr___destroy___0:_r,_emscripten_bind_b2RopeJoint_GetNext_0:Oa,_emscripten_bind_b2Filter_b2Filter_0:Bn,_emscripten_bind_b2PolygonShape_GetChildCount_0:pd,_emscripten_bind_b2GearJointDef_get_ratio_0:gJ,_emscripten_bind_b2Mat33_Solve33_1:Qt,_emscripten_bind_b2PulleyJoint_GetReactionForce_1:Dl,_emscripten_bind_b2WheelJoint_GetCollideConnected_0:pl,_emscripten_bind_b2WheelJoint_SetSpringDampingRatio_1:Ky,_emscripten_bind_b2RevoluteJointDef___destroy___0:Ay,_emscripten_bind_b2MouseJointDef_get_maxForce_0:Rl,_emscripten_bind_b2RevoluteJoint_EnableMotor_1:UJ,_emscripten_bind_b2ContactFeature_get_typeB_0:Nr,_emscripten_bind_b2MotorJoint_SetLinearOffset_1:vi,_emscripten_bind_b2MotorJoint_GetReactionForce_1:qi,_emscripten_bind_b2Rot_GetAngle_0:bi,_emscripten_bind_b2World_SetAllowSleeping_1:Bc,_emscripten_bind_b2MotorJoint_SetAngularOffset_1:Ji,_emscripten_bind_b2MotorJoint_GetLinearOffset_0:gi,_emscripten_bind_b2FrictionJoint_GetCollideConnected_0:fJ,_emscripten_bind_b2WheelJointDef_set_motorSpeed_1:hs,_emscripten_bind_b2MotorJoint_GetAnchorA_0:Mi,_emscripten_bind_b2Fixture_GetDensity_0:Jn,_emscripten_bind_b2PolygonShape_get_m_type_0:md,_emscripten_bind_b2Vec2_Set_2:Zr,_emscripten_bind_b2WeldJointDef_get_type_0:ou,_emscripten_bind_b2MouseJointDef_b2MouseJointDef_0:kl,_emscripten_bind_b2Rot_get_s_0:di,_emscripten_bind_b2FrictionJoint_SetMaxTorque_1:Xg,_emscripten_bind_b2MouseJointDef_get_frequencyHz_0:Fl,_emscripten_bind_b2FrictionJoint_SetUserData_1:uJ,_emscripten_bind_b2FixtureDef_set_userData_1:V_,_emscripten_bind_b2JointDef_get_userData_0:Af,_emscripten_bind_b2DistanceJointDef_get_collideConnected_0:Um,_emscripten_bind_b2RevoluteJointDef_set_referenceAngle_1:iy,_emscripten_bind_b2ContactFeature___destroy___0:Hr,_emscripten_bind_b2DistanceJointDef_set_bodyB_1:Vm,_emscripten_bind_JSQueryCallback_JSQueryCallback_0:Tn,_emscripten_bind_b2ChainShape_GetChildCount_0:Yf,_emscripten_bind_b2MassData_b2MassData_0:Du,_emscripten_bind_b2Vec3_set_y_1:J_,_emscripten_bind_b2AABB_Combine_1:k_,_emscripten_bind_b2AABB_Combine_2:w_,_emscripten_bind_b2PrismaticJoint_GetBodyA_0:mp,_emscripten_bind_b2PrismaticJoint_GetMaxMotorForce_0:dp,_emscripten_bind_b2AABB___destroy___0:L_,_emscripten_bind_b2Body_IsSleepingAllowed_0:Rh,_emscripten_bind_b2MouseJointDef_set_maxForce_1:ql,_emscripten_bind_b2MotorJoint_GetCorrectionFactor_0:Ci,_emscripten_bind_b2Profile_get_solve_0:zi,_emscripten_bind_JSDestructionListener_SayGoodbyeFixture_1:vt,_emscripten_bind_b2PolygonShape_GetVertexCount_0:_d,_emscripten_bind_b2Rot_get_c_0:li,_emscripten_bind_b2AABB_set_lowerBound_1:F_,_emscripten_bind_b2ChainShape_get_m_hasPrevVertex_0:ba,_emscripten_bind_b2MouseJoint_SetMaxForce_1:On,_emscripten_bind_b2FrictionJointDef_get_bodyB_0:ho,_emscripten_bind_b2JointDef_set_userData_1:Sf,_emscripten_bind_b2ManifoldPoint_get_tangentImpulse_0:mf,_emscripten_bind_b2RevoluteJointDef_get_maxMotorTorque_0:dy,_emscripten_bind_b2WeldJointDef_get_dampingRatio_0:ru,_emscripten_bind_b2MouseJoint___destroy___0:oi,_emscripten_bind_b2EdgeShape_b2EdgeShape_0:Dd,_emscripten_bind_b2FrictionJoint_GetReactionForce_1:oJ,_emscripten_bind_b2DistanceJointDef_set_type_1:Tm,_emscripten_bind_b2WeldJoint___destroy___0:Ab,_emscripten_bind_JSContactListener_PostSolve_2:Up,_emscripten_bind_b2PulleyJoint_GetBodyA_0:hl,_emscripten_bind_b2RopeJointDef_get_type_0:SD,_emscripten_bind_b2CircleShape_ComputeMass_2:Ws,_emscripten_bind_b2DistanceJointDef_get_localAnchorB_0:Cm,_emscripten_bind_b2GearJointDef___destroy___0:MJ,_emscripten_bind_b2RevoluteJointDef_set_bodyA_1:Jy,_emscripten_enum_b2BodyType_b2_dynamicBody:Rx,_emscripten_bind_b2CircleShape_TestPoint_2:Ts,_emscripten_bind_b2MotorJointDef_get_maxTorque_0:zD,_emscripten_bind_b2Body_GetLinearVelocityFromLocalPoint_1:Jh,_emscripten_bind_b2Mat22_b2Mat22_0:zp,_emscripten_bind_b2MouseJoint_GetAnchorB_0:Yn,_emscripten_enum_b2BodyType_b2_kinematicBody:Mx,_emscripten_bind_b2Manifold_get_localPoint_0:Ao,_emscripten_bind_b2GearJoint_GetBodyB_0:Ku,_emscripten_bind_b2ChainShape_Clear_0:Nf,_emscripten_bind_b2CircleShape___destroy___0:Hs,_emscripten_bind_b2MotorJoint_GetType_0:Bi,_emscripten_bind_b2BodyDef_get_awake_0:xr,_emscripten_bind_b2Contact_SetRestitution_1:pm,_emscripten_bind_b2BodyDef_get_angularDamping_0:vr,_emscripten_bind_b2EdgeShape_get_m_vertex3_0:Pd,_emscripten_bind_b2Fixture_SetUserData_1:ln,_emscripten_bind_b2Transform_SetIdentity_0:Tf,_emscripten_bind_b2GearJointDef_set_joint1_1:mJ,_emscripten_bind_b2EdgeShape_set_m_vertex2_1:Rd,_emscripten_bind_b2ContactEdge_get_next_0:mD,_emscripten_bind_b2ContactFeature_set_indexB_1:Or,_emscripten_bind_b2Body_GetLinearVelocityFromWorldPoint_1:gh,_emscripten_bind_b2WeldJoint_GetCollideConnected_0:jb,_emscripten_bind_b2Mat22_set_ey_1:is,_emscripten_bind_b2WheelJointDef_set_frequencyHz_1:gs,_emscripten_bind_b2World_GetSubStepping_0:Pc,_emscripten_bind_b2Rot_GetYAxis_0:ai,_emscripten_bind_b2Contact_GetChildIndexB_0:rm,_emscripten_bind_b2DistanceJoint___destroy___0:Ut,_emscripten_bind_b2EdgeShape_GetType_0:Gd,_emscripten_bind_b2WheelJointDef_set_dampingRatio_1:Ds,_emscripten_bind_b2ManifoldPoint___destroy___0:Jf,_emscripten_enum_b2JointType_e_prismaticJoint:dx,_emscripten_bind_b2MotorJoint_GetNext_0:Pi,_emscripten_bind_b2Vec2_Length_0:t_,_emscripten_bind_b2Vec2_SetZero_0:$r,_emscripten_bind_b2RopeJoint___destroy___0:Ha,_emscripten_bind_b2World_DestroyJoint_1:gc,_emscripten_bind_b2JointDef_set_bodyB_1:wf,_emscripten_bind_b2Mat22_Set_2:Kp,_emscripten_bind_b2Body_GetType_0:Bh,_emscripten_bind_b2WeldJoint_GetAnchorB_0:hb,_emscripten_bind_b2WeldJoint_GetNext_0:Jb,_emscripten_bind_b2Shape_get_m_radius_0:Jm,_emscripten_bind_b2EdgeShape_ComputeAABB_3:Cd,_emscripten_bind_b2BodyDef_get_type_0:cr,_emscripten_bind_b2WheelJointDef_set_collideConnected_1:Ms,_emscripten_bind_JSDestructionListener___destroy___0:gt,_emscripten_bind_b2MotorJointDef_get_type_0:$D,_emscripten_bind_b2RopeJoint_GetLocalAnchorA_0:ka,_emscripten_bind_b2BodyDef_set_linearDamping_1:hr,_emscripten_bind_b2FrictionJoint_GetUserData_0:sJ,_emscripten_bind_b2Contact_SetFriction_1:_m,_emscripten_bind_b2Manifold_set_localNormal_1:jo,_emscripten_bind_b2JointDef_get_bodyA_0:Cf,_emscripten_bind_b2Body_GetLinearDamping_0:Dh,_emscripten_bind_b2WeldJointDef_set_frequencyHz_1:iu,_emscripten_bind_b2Body_ResetMassData_0:yh,_emscripten_bind_b2PrismaticJointDef_set_enableMotor_1:$o,_emscripten_enum_b2JointType_e_wheelJoint:vx,_emscripten_bind_b2Vec2_Skew_0:__,_emscripten_bind_b2MouseJoint_GetDampingRatio_0:Hn,_emscripten_bind_b2RevoluteJoint_GetAnchorA_0:XJ,_emscripten_bind_b2ChainShape_set_m_prevVertex_1:pa,_emscripten_bind_b2WheelJoint_GetAnchorA_0:el,_emscripten_bind_b2MotorJoint_GetMaxTorque_0:Ai,_emscripten_bind_b2FrictionJoint_GetNext_0:pJ,_emscripten_bind_b2PrismaticJointDef_set_userData_1:rc,_emscripten_bind_b2FrictionJointDef_set_type_1:fo,_emscripten_bind_b2PrismaticJoint_GetUserData_0:Gp,_emscripten_bind_b2FrictionJointDef_get_collideConnected_0:go,_emscripten_bind_b2Body_GetInertia_0:fh,_emscripten_bind_b2WeldJointDef_set_referenceAngle_1:tu,_emscripten_bind_b2FrictionJoint_GetAnchorA_0:rJ,_emscripten_bind_b2RopeJoint_GetType_0:Fa,_emscripten_bind_b2MassData_get_I_0:Su,_emscripten_bind_b2WheelJointDef_get_motorSpeed_0:ms,_emscripten_bind_b2WeldJointDef_get_referenceAngle_0:eu,_emscripten_enum_b2JointType_e_ropeJoint:Dx,_emscripten_bind_b2Filter_set_maskBits_1:Rn,_emscripten_bind_b2EdgeShape_set_m_radius_1:Nd,_emscripten_bind_b2MotorJointDef_set_collideConnected_1:_x,_emscripten_bind_b2Mat22_b2Mat22_2:Hp,_emscripten_bind_b2WheelJointDef_set_maxMotorTorque_1:ls,_emscripten_bind_b2FrictionJointDef_set_bodyB_1:vo,_emscripten_bind_b2Mat22_b2Mat22_4:Qp,_emscripten_bind_b2ChainShape_set_m_hasNextVertex_1:da,_emscripten_bind_b2Mat22_GetInverse_0:Yp,_emscripten_bind_b2PrismaticJoint_EnableMotor_1:up,_emscripten_bind_b2CircleShape_get_m_type_0:Vs,_emscripten_bind_b2DistanceJoint_GetLocalAnchorA_0:Gt,_emscripten_bind_b2ContactEdge_b2ContactEdge_0:uD,_emscripten_bind_b2BodyDef___destroy___0:Fr,_emscripten_bind_b2FrictionJointDef_set_maxTorque_1:uo,_emscripten_bind_b2PolygonShape_GetVertex_1:od,_emscripten_bind_b2PulleyJointDef_set_groundAnchorB_1:Ob,_emscripten_bind_b2RevoluteJointDef_get_collideConnected_0:Gy,_emscripten_bind_b2DistanceJointDef_set_bodyA_1:Em,_emscripten_bind_b2RevoluteJoint_SetLimits_2:OJ,_emscripten_bind_b2WeldJointDef_set_type_1:cu,_emscripten_bind_b2MotorJointDef___destroy___0:ox,_emscripten_bind_b2FixtureDef_set_density_1:K_,_emscripten_bind_b2Shape_set_m_type_1:gm,_emscripten_bind_b2WheelJoint_GetJointTranslation_0:Ly,_emscripten_bind_b2WheelJoint_GetMotorTorque_1:zy,_emscripten_bind_b2RopeJoint_SetUserData_1:Ua,_emscripten_bind_b2RopeJointDef___destroy___0:TD,_emscripten_bind_b2WheelJoint_IsActive_0:cl,_emscripten_bind_b2PrismaticJointDef_get_enableMotor_0:Ko,_emscripten_bind_b2MotorJointDef_set_bodyB_1:ix,_emscripten_bind_b2Transform_b2Transform_2:Pf,_emscripten_bind_b2WeldJoint_GetReactionForce_1:vb,_emscripten_bind_b2ChainShape_RayCast_4:ea,_emscripten_bind_b2PrismaticJoint_GetUpperLimit_0:cp,_emscripten_bind_b2ContactID_get_cf_0:qp,_emscripten_bind_b2MouseJointDef_set_frequencyHz_1:Pl,_emscripten_bind_b2ChainShape_get_m_radius_0:ma,_emscripten_bind_b2Body_GetLinearVelocity_0:ih,_emscripten_bind_b2ChainShape_set_m_radius_1:ha,_emscripten_bind_b2DistanceJoint_GetReactionTorque_1:Lt,_emscripten_bind_b2World_Dump_0:$c,_emscripten_bind_b2RevoluteJoint_GetLocalAnchorB_0:qJ,_emscripten_bind_JSContactFilter_JSContactFilter_0:Hd,_emscripten_bind_b2Profile_set_solve_1:Hi,_emscripten_bind_b2WeldJoint_GetDampingRatio_0:fb,_emscripten_bind_b2Color_get_b_0:Sa,_emscripten_bind_b2MouseJointDef_get_userData_0:El,_emscripten_bind_b2CircleShape_ComputeAABB_3:Is,_emscripten_bind_b2RopeJoint_GetReactionForce_1:Wa,_emscripten_bind_b2PrismaticJointDef_get_enableLimit_0:Vo,_emscripten_bind_b2ManifoldPoint_set_localPoint_1:df,_emscripten_bind_b2Fixture_GetFilterData_0:bn,_emscripten_bind_b2World_GetBodyList_0:Ac,_emscripten_bind_b2Shape_ComputeMass_2:hm,_emscripten_bind_b2Joint_GetNext_0:Tu,_emscripten_bind_b2PrismaticJointDef_get_collideConnected_0:sc,_emscripten_bind_b2World_RayCast_3:jc,_emscripten_bind_b2MassData_set_I_1:Cu,_emscripten_bind_b2MassData___destroy___0:Bu,_emscripten_bind_b2Profile_get_collide_0:Ui,_emscripten_bind_b2Color_b2Color_3:Ja,_emscripten_bind_b2Color_b2Color_0:ga,_emscripten_bind_b2MouseJoint_GetFrequency_0:Nn,_emscripten_bind_b2WeldJointDef_Initialize_3:Ks,_emscripten_bind_b2Shape_GetChildCount_0:dm,_emscripten_enum_b2JointType_e_gearJoint:hx,_emscripten_bind_b2FixtureDef_get_friction_0:U_,_emscripten_bind_b2PrismaticJointDef_set_localAnchorA_1:Po,_emscripten_bind_b2Contact_GetManifold_0:$l,_emscripten_bind_b2MouseJoint_GetTarget_0:En,_emscripten_bind_b2WeldJointDef_get_localAnchorA_0:$s,_emscripten_bind_b2MouseJoint_SetUserData_1:ii,_emscripten_bind_b2JointEdge_get_other_0:Cb,_emscripten_bind_b2ChainShape_GetChildEdge_2:$f,_emscripten_bind_b2GearJointDef_set_collideConnected_1:wJ,_emscripten_bind_b2MotorJointDef_get_angularOffset_0:OD,_emscripten_bind_b2WheelJoint_SetUserData_1:ol,_emscripten_bind_b2Body_ApplyForce_3:oh,_emscripten_bind_b2PrismaticJoint_SetMotorSpeed_1:bp,_emscripten_bind_b2DistanceJoint_GetCollideConnected_0:Vt,_emscripten_bind_b2MouseJoint_GetMaxForce_0:Vn,_emscripten_bind_b2World_SetGravity_1:Uc,_emscripten_bind_b2Mat22_SetZero_0:Zp,_emscripten_bind_b2Contact_GetChildIndexA_0:nm,_emscripten_bind_b2Fixture_SetRestitution_1:jn,_emscripten_bind_b2Body_GetTransform_0:Zm,_emscripten_bind_b2ContactEdge___destroy___0:vD,_emscripten_bind_b2Mat33_set_ex_1:Xt,_emscripten_bind_b2AABB_GetExtents_0:C_,_emscripten_bind_b2RevoluteJointDef_get_bodyA_0:gy,_emscripten_bind_b2PrismaticJoint_GetBodyB_0:hp,_emscripten_bind_b2WheelJointDef_set_bodyA_1:Cs,_emscripten_bind_b2DistanceJointDef_set_collideConnected_1:Nm,_emscripten_bind_b2BodyDef_get_angle_0:br,_emscripten_bind_b2PulleyJoint_GetReactionTorque_1:xl,_emscripten_bind_b2FixtureDef_get_shape_0:W_,_emscripten_bind_b2WeldJointDef_get_userData_0:pu,_emscripten_bind_b2FrictionJoint_SetMaxForce_1:Zg,_emscripten_bind_b2Mat33_b2Mat33_3:zt,_emscripten_bind_b2Vec3_get_y_0:g_,_emscripten_bind_b2JointDef_get_type_0:Gf,_emscripten_bind_JSQueryCallback_ReportFixture_1:Ln,_emscripten_bind_b2Fixture_TestPoint_1:mn,_emscripten_bind_b2RevoluteJoint_GetCollideConnected_0:cD,_emscripten_bind_JSDraw_JSDraw_0:Sy,_emscripten_bind_b2MouseJoint_GetAnchorA_0:Zn,_emscripten_bind_b2Transform_get_p_0:If,_emscripten_bind_b2EdgeShape_ComputeMass_2:Bd,_emscripten_bind_b2World_GetProfile_0:Kc,_emscripten_bind_b2DistanceJointDef___destroy___0:zm,_emscripten_bind_b2RopeJointDef_set_bodyA_1:MD,_emscripten_bind_b2JointDef_set_type_1:jf,_emscripten_bind_b2Draw_AppendFlags_1:vu,_emscripten_bind_b2MotorJointDef_get_userData_0:YD,_emscripten_bind_b2World_GetContactList_0:Cc,_emscripten_bind_b2Mat33_set_ez_1:rn,_emscripten_bind_b2JointEdge_b2JointEdge_0:Sb,_emscripten_bind_b2FrictionJointDef_get_bodyA_0:lo,_emscripten_bind_b2WheelJointDef_get_type_0:xs,_emscripten_bind_b2RevoluteJoint_GetReactionForce_1:tD,_emscripten_bind_b2PulleyJointDef_set_collideConnected_1:sf,_emscripten_bind_b2RopeJoint_GetCollideConnected_0:za,_emscripten_bind_b2GearJointDef_set_joint2_1:vJ,_emscripten_bind_b2BodyDef_set_userData_1:Mr,_emscripten_bind_b2GearJoint_GetAnchorB_0:Zu,_emscripten_bind_b2RopeJoint_IsActive_0:Na,_emscripten_bind_b2Fixture_GetFriction_0:Dn,_emscripten_enum_b2DrawFlag_e_aabbBit:Px,_emscripten_bind_b2RevoluteJointDef_Initialize_3:Zd,_emscripten_bind_b2Body_GetAngle_0:Xm,_emscripten_bind_b2EdgeShape_Set_2:xd,_emscripten_bind_b2Mat33_SetZero_0:Ht,_emscripten_bind_b2MotorJointDef_set_maxTorque_1:HD,_emscripten_bind_b2PrismaticJointDef_get_localAxisA_0:Io,_emscripten_bind_b2Mat22_get_ey_0:ns,_emscripten_bind_b2Mat22_SetIdentity_0:$p,_emscripten_bind_b2Joint_IsActive_0:Wu,_emscripten_bind_b2BodyDef_get_allowSleep_0:Jr,_emscripten_bind_b2World_GetTreeHeight_0:Ec,_emscripten_bind_b2GearJoint_GetJoint2_0:Uu,_emscripten_bind_b2EdgeShape_set_m_vertex1_1:wd,_emscripten_bind_b2Body_GetWorld_0:Hg,_emscripten_enum_b2LimitState_e_inactiveLimit:Gx,_emscripten_bind_b2PulleyJointDef_set_lengthB_1:$b,_emscripten_bind_b2Body_SetAwake_1:qh,_emscripten_bind_b2PrismaticJointDef_set_upperTranslation_1:Qo,_emscripten_bind_b2Vec2___destroy___0:u_,_emscripten_bind_b2RayCastInput_set_p1_1:Ka,_emscripten_bind_b2Contact_ResetFriction_0:cm,_emscripten_bind_b2PulleyJoint_GetAnchorA_0:gl,_emscripten_bind_b2BodyDef_get_linearVelocity_0:ar,_emscripten_bind_b2DistanceJointDef_get_bodyB_0:Om,_emscripten_bind_b2Mat22___destroy___0:rs,_emscripten_bind_b2RevoluteJoint_GetAnchorB_0:eD,_emscripten_bind_b2RevoluteJoint_GetNext_0:iD,_emscripten_bind_b2WeldJointDef_get_bodyA_0:uu,_emscripten_bind_b2MotorJoint_GetAnchorB_0:Ri,_emscripten_bind_b2Fixture_GetShape_0:cn,_emscripten_bind_b2PolygonShape_SetAsBox_2:id,_emscripten_bind_b2Vec3_op_mul_1:m_,_emscripten_bind_b2PolygonShape_set_m_type_1:hd,_emscripten_bind_b2WheelJoint_GetType_0:Zy,_emscripten_bind_b2MotorJoint_GetAngularOffset_0:Di,_emscripten_bind_b2RevoluteJoint_IsActive_0:oD,_emscripten_bind_b2GearJoint_GetNext_0:eb,_emscripten_bind_b2MotorJointDef_get_correctionFactor_0:QD,_emscripten_bind_b2Color_Set_3:Da,_emscripten_bind_b2EdgeShape_set_m_type_1:Vd,_emscripten_bind_b2WheelJoint_GetLocalAxisA_0:Ty,_emscripten_bind_b2Body_GetNext_0:Ug,_emscripten_bind_b2RopeJoint_GetBodyA_0:Pa,_emscripten_enum_b2JointType_e_unknownJoint:fx,_emscripten_bind_b2ContactFeature_set_indexA_1:Wr,_emscripten_bind_b2Profile_get_solveInit_0:Qi,_emscripten_bind_b2BodyDef_set_angularDamping_1:gr,_emscripten_bind_b2FrictionJoint_GetAnchorB_0:_J,_emscripten_bind_b2World_QueryAABB_2:Gc,_emscripten_bind_b2BodyDef_get_userData_0:wr,_emscripten_bind_b2ContactID_get_key_0:Pp,_emscripten_bind_b2Body_SetAngularVelocity_1:rh,_emscripten_bind_b2WheelJointDef_get_userData_0:js,_emscripten_bind_b2RevoluteJoint_IsLimitEnabled_0:LJ,_emscripten_bind_b2DistanceJoint_GetBodyB_0:qt,_emscripten_bind_b2RevoluteJointDef_set_maxMotorTorque_1:yy,_emscripten_bind_b2WeldJointDef_set_bodyB_1:au,_emscripten_bind_b2RevoluteJoint_SetUserData_1:_D,_emscripten_bind_b2DistanceJoint_SetLength_1:At,_emscripten_bind_b2JointEdge_get_joint_0:kb,_emscripten_bind_b2Body_GetLocalCenter_0:th,_emscripten_bind_b2FixtureDef___destroy___0:eo,_emscripten_bind_b2FixtureDef_set_shape_1:E_,_emscripten_bind_b2WeldJoint_GetAnchorA_0:mb,_emscripten_bind_b2Profile_get_solveVelocity_0:$i,_emscripten_bind_b2WeldJointDef_get_bodyB_0:fu,_emscripten_bind_b2Body_SetAngularDamping_1:jh,_emscripten_bind_b2PulleyJointDef_Initialize_7:Lb,_emscripten_bind_b2GearJointDef_set_bodyB_1:BJ,_emscripten_bind_b2RopeJoint_GetReactionTorque_1:Ea,_emscripten_bind_b2Mat22_set_ex_1:ts,_emscripten_bind_b2GearJoint_GetType_0:Hu,_emscripten_enum_b2DrawFlag_e_centerOfMassBit:Lx,_emscripten_bind_b2ChainShape_b2ChainShape_0:Uf,_emscripten_bind_b2RevoluteJoint_SetMaxMotorTorque_1:HJ,_emscripten_bind_b2RopeJointDef_set_localAnchorB_1:GD,_emscripten_bind_b2FrictionJointDef_Initialize_3:no,_emscripten_bind_b2GearJointDef_set_userData_1:jJ,_emscripten_bind_b2ChainShape_CreateLoop_2:zf,_emscripten_bind_b2EdgeShape_get_m_radius_0:Ud,_emscripten_bind_b2Contact_GetFixtureB_0:im,_emscripten_bind_b2ChainShape_ComputeMass_2:na,_emscripten_bind_b2Vec2_set_y_1:s_,_emscripten_bind_b2PrismaticJoint_IsLimitEnabled_0:rp,_emscripten_bind_b2RopeJointDef_get_bodyB_0:RD,_emscripten_bind_b2BodyDef_b2BodyDef_0:or,_emscripten_bind_b2MassData_get_mass_0:xu,_emscripten_bind_b2WheelJoint___destroy___0:sl,_emscripten_bind_b2Joint_GetBodyB_0:Mu,_emscripten_bind_b2MouseJointDef_set_collideConnected_1:Ql,_emscripten_bind_b2WheelJointDef_set_localAxisA_1:fs,_emscripten_bind_b2Joint_Dump_0:Ou,_emscripten_bind_b2WheelJointDef_b2WheelJointDef_0:_s,_emscripten_bind_b2RevoluteJointDef_set_motorSpeed_1:ay,_emscripten_bind_b2MotorJointDef_get_bodyA_0:ex,_emscripten_bind_b2WheelJointDef_get_enableMotor_0:as,_emscripten_bind_b2Vec2_LengthSquared_0:n_,_emscripten_bind_b2FrictionJointDef_set_bodyA_1:mo,_emscripten_bind_b2WheelJoint_GetSpringFrequencyHz_0:Qy,_emscripten_bind_b2ContactFeature_get_indexB_0:Er,_emscripten_bind_b2Body_GetJointList_0:Og,_emscripten_bind_b2FrictionJoint_GetBodyA_0:nJ,_emscripten_bind_b2WheelJointDef_set_localAnchorB_1:us,_emscripten_bind_b2DistanceJointDef_set_localAnchorA_1:Sm,_emscripten_bind_b2PrismaticJointDef_get_maxMotorForce_0:Zo,_emscripten_bind_b2Body_SetUserData_1:zg,_emscripten_bind_b2DistanceJoint_GetUserData_0:Wt,_emscripten_bind_b2PulleyJointDef_set_bodyA_1:_f,_emscripten_bind_b2Joint_GetType_0:ku,_emscripten_bind_b2Manifold_get_pointCount_0:ko,_emscripten_bind_b2Mat33_get_ez_0:nn,_emscripten_bind_b2DestructionListenerWrapper___destroy___0:Ip,_emscripten_bind_b2WheelJointDef_get_bodyA_0:Ss,_emscripten_enum_b2LimitState_e_atUpperLimit:Ax,_emscripten_bind_b2PulleyJointDef_set_groundAnchorA_1:Wb,_emscripten_bind_b2MouseJointDef_get_type_0:Il,_emscripten_bind_b2PrismaticJoint_SetMaxMotorForce_1:ap,_emscripten_bind_b2PulleyJointDef_get_collideConnected_0:pf,_emscripten_bind_b2RopeJoint_SetMaxLength_1:Ma,_emscripten_bind_b2Joint_SetUserData_1:Iu,_emscripten_bind_b2PolygonShape_set_m_radius_1:gd,_emscripten_bind_b2Vec2_get_x_0:o_,_emscripten_bind_JSContactListener_JSContactListener_0:Wp,runPostSets:MS,stackAlloc:st,stackSave:ut,stackRestore:bt,setThrew:ft,setTempRet0:yt,getTempRet0:lt,dynCall_iiii:PS,dynCall_viiiii:iC,dynCall_did:GC,dynCall_vi:NC,dynCall_diiiid:fB,dynCall_vii:RB,dynCall_viidii:ek,dynCall_ii:Jk,dynCall_viidi:Ok,dynCall_viii:sw,dynCall_v:kw,dynCall_viid:Zw,dynCall_viiiiii:hM,dynCall_iii:IM,dynCall_iiiiii:oR,dynCall_viiii:SR}}(e.X,e.Y,pb),pc=e._emscripten_bind_b2WheelJoint_GetSpringDampingRatio_0=i._emscripten_bind_b2WheelJoint_GetSpringDampingRatio_0,qc=e._emscripten_bind_b2ContactEdge_set_next_1=i._emscripten_bind_b2ContactEdge_set_next_1,rc=e._emscripten_bind_b2ChainShape_get_m_count_0=i._emscripten_bind_b2ChainShape_get_m_count_0,sc=e._emscripten_bind_b2Fixture_SetFriction_1=i._emscripten_bind_b2Fixture_SetFriction_1,tc=e._emscripten_bind_b2Shape_ComputeAABB_3=i._emscripten_bind_b2Shape_ComputeAABB_3,uc=e._emscripten_bind_b2FrictionJointDef_set_userData_1=i._emscripten_bind_b2FrictionJointDef_set_userData_1,vc=e._emscripten_bind_b2Vec3_get_z_0=i._emscripten_bind_b2Vec3_get_z_0,wc=e._emscripten_bind_b2World_IsLocked_0=i._emscripten_bind_b2World_IsLocked_0,xc=e._emscripten_bind_b2Draw_GetFlags_0=i._emscripten_bind_b2Draw_GetFlags_0,yc=e._emscripten_bind_b2FrictionJoint_IsActive_0=i._emscripten_bind_b2FrictionJoint_IsActive_0,zc=e._emscripten_bind_b2Color_set_g_1=i._emscripten_bind_b2Color_set_g_1,Ac=e._emscripten_bind_b2WheelJointDef_get_frequencyHz_0=i._emscripten_bind_b2WheelJointDef_get_frequencyHz_0,Bc=e._emscripten_bind_b2RopeJointDef_set_localAnchorA_1=i._emscripten_bind_b2RopeJointDef_set_localAnchorA_1,Cc=e._emscripten_bind_b2PolygonShape_RayCast_4=i._emscripten_bind_b2PolygonShape_RayCast_4,Dc=e._emscripten_bind_b2World_GetTreeBalance_0=i._emscripten_bind_b2World_GetTreeBalance_0,Ec=e._emscripten_bind_b2PrismaticJointDef_get_upperTranslation_0=i._emscripten_bind_b2PrismaticJointDef_get_upperTranslation_0,Fc=e._emscripten_bind_JSDraw_DrawSolidCircle_4=i._emscripten_bind_JSDraw_DrawSolidCircle_4,Gc=e._emscripten_bind_b2RevoluteJoint_GetLocalAnchorA_0=i._emscripten_bind_b2RevoluteJoint_GetLocalAnchorA_0,Hc=e._emscripten_bind_b2FixtureDef_get_filter_0=i._emscripten_bind_b2FixtureDef_get_filter_0,Ic=e._emscripten_bind_b2FrictionJointDef_get_type_0=i._emscripten_bind_b2FrictionJointDef_get_type_0,Jc=e._emscripten_bind_b2RevoluteJoint_GetMotorTorque_1=i._emscripten_bind_b2RevoluteJoint_GetMotorTorque_1,Kc=e._emscripten_bind_b2MotorJointDef_set_type_1=i._emscripten_bind_b2MotorJointDef_set_type_1,Lc=e._emscripten_bind_b2RayCastInput_get_p1_0=i._emscripten_bind_b2RayCastInput_get_p1_0,Mc=e._emscripten_bind_b2EdgeShape_set_m_hasVertex3_1=i._emscripten_bind_b2EdgeShape_set_m_hasVertex3_1,Nc=e._emscripten_bind_b2JointEdge_set_joint_1=i._emscripten_bind_b2JointEdge_set_joint_1,Oc=e._emscripten_enum_b2ShapeType_e_polygon=i._emscripten_enum_b2ShapeType_e_polygon,Pc=e._emscripten_bind_b2Fixture___destroy___0=i._emscripten_bind_b2Fixture___destroy___0,Qc=e._emscripten_bind_b2PulleyJoint_SetUserData_1=i._emscripten_bind_b2PulleyJoint_SetUserData_1,Rc=e._emscripten_bind_b2World_SetWarmStarting_1=i._emscripten_bind_b2World_SetWarmStarting_1,Sc=e._emscripten_bind_JSDraw_DrawCircle_3=i._emscripten_bind_JSDraw_DrawCircle_3,Tc=e._emscripten_bind_b2WeldJoint_IsActive_0=i._emscripten_bind_b2WeldJoint_IsActive_0,Uc=e._emscripten_bind_b2DestructionListener___destroy___0=i._emscripten_bind_b2DestructionListener___destroy___0,Vc=e._emscripten_bind_b2BodyDef_set_type_1=i._emscripten_bind_b2BodyDef_set_type_1,Wc=e._emscripten_bind_b2ChainShape_ComputeAABB_3=i._emscripten_bind_b2ChainShape_ComputeAABB_3,Xc=e._emscripten_bind_b2MouseJointDef_set_type_1=i._emscripten_bind_b2MouseJointDef_set_type_1,Yc=e._emscripten_bind_b2JointEdge_get_prev_0=i._emscripten_bind_b2JointEdge_get_prev_0,Zc=e._emscripten_bind_b2WeldJoint_GetReactionTorque_1=i._emscripten_bind_b2WeldJoint_GetReactionTorque_1,$c=e._emscripten_bind_b2MotorJointDef_get_maxForce_0=i._emscripten_bind_b2MotorJointDef_get_maxForce_0,ad=e._emscripten_bind_b2DistanceJointDef_get_userData_0=i._emscripten_bind_b2DistanceJointDef_get_userData_0,bd=e._emscripten_bind_b2BodyDef_get_position_0=i._emscripten_bind_b2BodyDef_get_position_0,cd=e._emscripten_bind_b2RopeJointDef_get_localAnchorB_0=i._emscripten_bind_b2RopeJointDef_get_localAnchorB_0,dd=e._emscripten_bind_b2RevoluteJointDef_set_userData_1=i._emscripten_bind_b2RevoluteJointDef_set_userData_1,ed=e._emscripten_bind_b2RevoluteJointDef_get_localAnchorA_0=i._emscripten_bind_b2RevoluteJointDef_get_localAnchorA_0,fd=e._emscripten_bind_b2World_SetContactFilter_1=i._emscripten_bind_b2World_SetContactFilter_1,gd=e._emscripten_bind_b2WheelJointDef_get_collideConnected_0=i._emscripten_bind_b2WheelJointDef_get_collideConnected_0,hd=e._emscripten_bind_b2MouseJointDef_set_userData_1=i._emscripten_bind_b2MouseJointDef_set_userData_1,id=e._emscripten_bind_JSDraw_DrawSegment_3=i._emscripten_bind_JSDraw_DrawSegment_3,jd=e._emscripten_bind_b2FixtureDef_set_restitution_1=i._emscripten_bind_b2FixtureDef_set_restitution_1,kd=e._emscripten_bind_b2MotorJointDef_Initialize_2=i._emscripten_bind_b2MotorJointDef_Initialize_2,ld=e._emscripten_bind_b2EdgeShape_GetChildCount_0=i._emscripten_bind_b2EdgeShape_GetChildCount_0,md=e._emscripten_bind_b2Mat33_get_ey_0=i._emscripten_bind_b2Mat33_get_ey_0,nd=e._emscripten_bind_b2MouseJoint_IsActive_0=i._emscripten_bind_b2MouseJoint_IsActive_0,od=e._emscripten_bind_b2World_GetGravity_0=i._emscripten_bind_b2World_GetGravity_0,pd=e._emscripten_bind_b2World_DrawDebugData_0=i._emscripten_bind_b2World_DrawDebugData_0,qd=e._emscripten_bind_b2Profile_get_broadphase_0=i._emscripten_bind_b2Profile_get_broadphase_0,rd=e._emscripten_bind_b2PulleyJointDef_get_bodyA_0=i._emscripten_bind_b2PulleyJointDef_get_bodyA_0,sd=e._emscripten_bind_b2PrismaticJoint_SetLimits_2=i._emscripten_bind_b2PrismaticJoint_SetLimits_2,td=e._emscripten_bind_b2PulleyJointDef_get_localAnchorA_0=i._emscripten_bind_b2PulleyJointDef_get_localAnchorA_0,ud=e._emscripten_bind_b2DistanceJoint_GetAnchorA_0=i._emscripten_bind_b2DistanceJoint_GetAnchorA_0,vd=e._emscripten_bind_b2ManifoldPoint_set_tangentImpulse_1=i._emscripten_bind_b2ManifoldPoint_set_tangentImpulse_1,wd=e._emscripten_bind_b2PolygonShape_get_m_count_0=i._emscripten_bind_b2PolygonShape_get_m_count_0,xd=e._emscripten_bind_b2RopeJointDef_set_collideConnected_1=i._emscripten_bind_b2RopeJointDef_set_collideConnected_1,yd=e._emscripten_bind_b2CircleShape_set_m_p_1=i._emscripten_bind_b2CircleShape_set_m_p_1,zd=e._emscripten_bind_JSContactListener_EndContact_1=i._emscripten_bind_JSContactListener_EndContact_1,Ad=e._emscripten_bind_b2MassData_set_mass_1=i._emscripten_bind_b2MassData_set_mass_1,Bd=e._emscripten_bind_b2Vec3_get_x_0=i._emscripten_bind_b2Vec3_get_x_0,Cd=e._emscripten_bind_b2ChainShape_CreateChain_2=i._emscripten_bind_b2ChainShape_CreateChain_2,Dd=e._emscripten_bind_b2Color_get_r_0=i._emscripten_bind_b2Color_get_r_0,Ed=e._emscripten_bind_b2World_DestroyBody_1=i._emscripten_bind_b2World_DestroyBody_1,Fd=e._emscripten_bind_b2Profile_get_solvePosition_0=i._emscripten_bind_b2Profile_get_solvePosition_0,Gd=e._emscripten_bind_b2Shape_RayCast_4=i._emscripten_bind_b2Shape_RayCast_4,Hd=e._emscripten_bind_b2PulleyJoint_GetGroundAnchorA_0=i._emscripten_bind_b2PulleyJoint_GetGroundAnchorA_0,Id=e._emscripten_bind_b2Mat33___destroy___0=i._emscripten_bind_b2Mat33___destroy___0,Jd=e._emscripten_bind_b2GearJoint_GetReactionTorque_1=i._emscripten_bind_b2GearJoint_GetReactionTorque_1,Kd=e._emscripten_bind_b2WeldJointDef_set_collideConnected_1=i._emscripten_bind_b2WeldJointDef_set_collideConnected_1,Ld=e._emscripten_bind_b2Manifold_get_type_0=i._emscripten_bind_b2Manifold_get_type_0,Md=e._emscripten_bind_b2RevoluteJoint___destroy___0=i._emscripten_bind_b2RevoluteJoint___destroy___0,Nd=e._emscripten_bind_b2PulleyJointDef_b2PulleyJointDef_0=i._emscripten_bind_b2PulleyJointDef_b2PulleyJointDef_0,Od=e._emscripten_bind_b2World_SetAutoClearForces_1=i._emscripten_bind_b2World_SetAutoClearForces_1,Pd=e._emscripten_bind_b2PrismaticJointDef_set_lowerTranslation_1=i._emscripten_bind_b2PrismaticJointDef_set_lowerTranslation_1,Qd=e._emscripten_bind_b2BodyDef_set_position_1=i._emscripten_bind_b2BodyDef_set_position_1,Rd=e._emscripten_bind_b2Transform_get_q_0=i._emscripten_bind_b2Transform_get_q_0,Sd=e._emscripten_bind_b2FrictionJoint_GetMaxForce_0=i._emscripten_bind_b2FrictionJoint_GetMaxForce_0,Td=e._emscripten_bind_b2PolygonShape_set_m_count_1=i._emscripten_bind_b2PolygonShape_set_m_count_1,Ud=e._emscripten_bind_b2Contact_GetNext_0=i._emscripten_bind_b2Contact_GetNext_0,Vd=e._emscripten_bind_b2MotorJointDef_set_userData_1=i._emscripten_bind_b2MotorJointDef_set_userData_1,Wd=e._emscripten_bind_b2EdgeShape_get_m_type_0=i._emscripten_bind_b2EdgeShape_get_m_type_0,Xd=e._emscripten_bind_b2GearJoint_GetJoint1_0=i._emscripten_bind_b2GearJoint_GetJoint1_0,Yd=e._emscripten_bind_b2WheelJoint_GetMaxMotorTorque_0=i._emscripten_bind_b2WheelJoint_GetMaxMotorTorque_0,Zd=e._emscripten_bind_b2MotorJoint_SetMaxTorque_1=i._emscripten_bind_b2MotorJoint_SetMaxTorque_1,$d=e._emscripten_bind_b2GearJoint_GetAnchorA_0=i._emscripten_bind_b2GearJoint_GetAnchorA_0,ae=e._emscripten_enum_b2JointType_e_mouseJoint=i._emscripten_enum_b2JointType_e_mouseJoint,be=e._emscripten_bind_b2MouseJointDef_set_bodyA_1=i._emscripten_bind_b2MouseJointDef_set_bodyA_1,ce=e._emscripten_enum_b2JointType_e_revoluteJoint=i._emscripten_enum_b2JointType_e_revoluteJoint,de=e._emscripten_bind_b2World_SetContactListener_1=i._emscripten_bind_b2World_SetContactListener_1,ee=e._emscripten_bind_b2Body_IsAwake_0=i._emscripten_bind_b2Body_IsAwake_0,fe=e._emscripten_bind_b2JointEdge_set_other_1=i._emscripten_bind_b2JointEdge_set_other_1,ge=e._emscripten_bind_b2RevoluteJoint_IsMotorEnabled_0=i._emscripten_bind_b2RevoluteJoint_IsMotorEnabled_0,he=e._emscripten_bind_b2MouseJointDef_set_target_1=i._emscripten_bind_b2MouseJointDef_set_target_1,ie=e._emscripten_bind_b2MotorJoint_SetCorrectionFactor_1=i._emscripten_bind_b2MotorJoint_SetCorrectionFactor_1,je=e._emscripten_bind_b2FixtureDef_get_density_0=i._emscripten_bind_b2FixtureDef_get_density_0,ke=e._emscripten_bind_b2ChainShape_set_m_vertices_1=i._emscripten_bind_b2ChainShape_set_m_vertices_1,le=e._emscripten_bind_b2ChainShape_get_m_vertices_0=i._emscripten_bind_b2ChainShape_get_m_vertices_0,me=e._emscripten_bind_b2Rot_set_s_1=i._emscripten_bind_b2Rot_set_s_1,ne=e._emscripten_bind_b2MotorJointDef_get_collideConnected_0=i._emscripten_bind_b2MotorJointDef_get_collideConnected_0,oe=e._emscripten_bind_b2RevoluteJoint_GetUpperLimit_0=i._emscripten_bind_b2RevoluteJoint_GetUpperLimit_0,pe=e._emscripten_bind_b2WheelJointDef_set_bodyB_1=i._emscripten_bind_b2WheelJointDef_set_bodyB_1,qe=e._emscripten_bind_b2WheelJointDef_set_enableMotor_1=i._emscripten_bind_b2WheelJointDef_set_enableMotor_1,re=e._emscripten_bind_b2FixtureDef_get_userData_0=i._emscripten_bind_b2FixtureDef_get_userData_0,se=e._emscripten_bind_b2FrictionJointDef_set_collideConnected_1=i._emscripten_bind_b2FrictionJointDef_set_collideConnected_1,te=e._emscripten_bind_b2PrismaticJointDef_get_lowerTranslation_0=i._emscripten_bind_b2PrismaticJointDef_get_lowerTranslation_0,ue=e._emscripten_bind_b2GearJoint_GetCollideConnected_0=i._emscripten_bind_b2GearJoint_GetCollideConnected_0,ve=e._emscripten_bind_b2RevoluteJointDef_get_upperAngle_0=i._emscripten_bind_b2RevoluteJointDef_get_upperAngle_0,we=e._emscripten_bind_b2Body_ApplyAngularImpulse_2=i._emscripten_bind_b2Body_ApplyAngularImpulse_2,xe=e._emscripten_enum_b2JointType_e_frictionJoint=i._emscripten_enum_b2JointType_e_frictionJoint,ye=e._emscripten_bind_b2RayCastOutput_set_fraction_1=i._emscripten_bind_b2RayCastOutput_set_fraction_1,ze=e._emscripten_bind_b2Color_set_r_1=i._emscripten_bind_b2Color_set_r_1,Ae=e._emscripten_bind_b2DistanceJointDef_get_length_0=i._emscripten_bind_b2DistanceJointDef_get_length_0,Be=e._emscripten_bind_b2PulleyJoint_GetBodyB_0=i._emscripten_bind_b2PulleyJoint_GetBodyB_0,Ce=e._emscripten_bind_b2WheelJointDef_set_type_1=i._emscripten_bind_b2WheelJointDef_set_type_1,De=e._emscripten_bind_b2World_GetTreeQuality_0=i._emscripten_bind_b2World_GetTreeQuality_0,Ee=e._emscripten_bind_b2BodyDef_set_gravityScale_1=i._emscripten_bind_b2BodyDef_set_gravityScale_1,Fe=e._emscripten_bind_b2RopeJointDef_set_bodyB_1=i._emscripten_bind_b2RopeJointDef_set_bodyB_1,Ge=e._emscripten_bind_b2PrismaticJoint_GetLowerLimit_0=i._emscripten_bind_b2PrismaticJoint_GetLowerLimit_0,He=e._emscripten_bind_b2AABB_get_lowerBound_0=i._emscripten_bind_b2AABB_get_lowerBound_0,Ie=e._emscripten_bind_b2WheelJoint_SetMotorSpeed_1=i._emscripten_bind_b2WheelJoint_SetMotorSpeed_1,Je=e._emscripten_bind_b2PrismaticJointDef_get_referenceAngle_0=i._emscripten_bind_b2PrismaticJointDef_get_referenceAngle_0,Ke=e._emscripten_bind_b2Body_SetMassData_1=i._emscripten_bind_b2Body_SetMassData_1,Le=e._emscripten_bind_b2BodyDef_get_angularVelocity_0=i._emscripten_bind_b2BodyDef_get_angularVelocity_0,Me=e._emscripten_bind_b2WeldJoint_SetDampingRatio_1=i._emscripten_bind_b2WeldJoint_SetDampingRatio_1,Ne=e._emscripten_bind_b2PrismaticJointDef___destroy___0=i._emscripten_bind_b2PrismaticJointDef___destroy___0,Oe=e._emscripten_bind_b2Contact_IsTouching_0=i._emscripten_bind_b2Contact_IsTouching_0,Pe=e._emscripten_bind_b2Draw_SetFlags_1=i._emscripten_bind_b2Draw_SetFlags_1,Qe=e._emscripten_bind_b2AABB_Contains_1=i._emscripten_bind_b2AABB_Contains_1,Re=e._emscripten_bind_b2DistanceJoint_GetNext_0=i._emscripten_bind_b2DistanceJoint_GetNext_0,Se=e._emscripten_bind_b2GearJoint_GetReactionForce_1=i._emscripten_bind_b2GearJoint_GetReactionForce_1,Te=e._emscripten_bind_b2PrismaticJoint_GetNext_0=i._emscripten_bind_b2PrismaticJoint_GetNext_0,Ue=e._emscripten_bind_b2Filter_get_groupIndex_0=i._emscripten_bind_b2Filter_get_groupIndex_0,Ve=e._emscripten_bind_b2PrismaticJoint_GetType_0=i._emscripten_bind_b2PrismaticJoint_GetType_0,We=e._emscripten_bind_b2Fixture_GetRestitution_0=i._emscripten_bind_b2Fixture_GetRestitution_0,Xe=e._emscripten_bind_b2Transform_set_q_1=i._emscripten_bind_b2Transform_set_q_1,Ye=e._emscripten_bind_b2PolygonShape___destroy___0=i._emscripten_bind_b2PolygonShape___destroy___0,Ze=e._emscripten_bind_b2AABB_get_upperBound_0=i._emscripten_bind_b2AABB_get_upperBound_0,$e=e._emscripten_bind_b2Transform___destroy___0=i._emscripten_bind_b2Transform___destroy___0,af=e._emscripten_bind_b2WeldJointDef_set_localAnchorB_1=i._emscripten_bind_b2WeldJointDef_set_localAnchorB_1,bf=e._emscripten_bind_b2CircleShape_set_m_radius_1=i._emscripten_bind_b2CircleShape_set_m_radius_1,cf=e._emscripten_bind_b2EdgeShape_set_m_hasVertex0_1=i._emscripten_bind_b2EdgeShape_set_m_hasVertex0_1,df=e._emscripten_bind_b2RopeJoint_GetMaxLength_0=i._emscripten_bind_b2RopeJoint_GetMaxLength_0,ef=e._emscripten_bind_b2GearJoint_GetUserData_0=i._emscripten_bind_b2GearJoint_GetUserData_0,ff=e._emscripten_bind_b2MotorJoint_GetCollideConnected_0=i._emscripten_bind_b2MotorJoint_GetCollideConnected_0,gf=e._emscripten_bind_b2GearJointDef_set_type_1=i._emscripten_bind_b2GearJointDef_set_type_1,hf=e._emscripten_bind_b2DistanceJoint_SetDampingRatio_1=i._emscripten_bind_b2DistanceJoint_SetDampingRatio_1,jf=e._emscripten_bind_b2Contact_GetFixtureA_0=i._emscripten_bind_b2Contact_GetFixtureA_0,kf=e._emscripten_bind_b2QueryCallback___destroy___0=i._emscripten_bind_b2QueryCallback___destroy___0,lf=e._emscripten_bind_b2PulleyJointDef_get_ratio_0=i._emscripten_bind_b2PulleyJointDef_get_ratio_0,mf=e._emscripten_bind_b2PrismaticJointDef_get_localAnchorB_0=i._emscripten_bind_b2PrismaticJointDef_get_localAnchorB_0,nf=e._emscripten_bind_b2CircleShape_set_m_type_1=i._emscripten_bind_b2CircleShape_set_m_type_1,of=e._emscripten_enum_b2ShapeType_e_typeCount=i._emscripten_enum_b2ShapeType_e_typeCount,pf=e._emscripten_bind_b2Body_SetTransform_2=i._emscripten_bind_b2Body_SetTransform_2,qf=e._emscripten_bind_b2RopeJoint_GetAnchorB_0=i._emscripten_bind_b2RopeJoint_GetAnchorB_0,rf=e._emscripten_bind_b2AABB_set_upperBound_1=i._emscripten_bind_b2AABB_set_upperBound_1,sf=e._emscripten_bind_b2MouseJointDef_get_collideConnected_0=i._emscripten_bind_b2MouseJointDef_get_collideConnected_0,tf=e._emscripten_bind_b2ContactImpulse___destroy___0=i._emscripten_bind_b2ContactImpulse___destroy___0,uf=e._emscripten_bind_b2PrismaticJointDef_b2PrismaticJointDef_0=i._emscripten_bind_b2PrismaticJointDef_b2PrismaticJointDef_0,vf=e._emscripten_bind_b2Vec2_set_x_1=i._emscripten_bind_b2Vec2_set_x_1,wf=e._emscripten_bind_b2RayCastInput___destroy___0=i._emscripten_bind_b2RayCastInput___destroy___0,xf=e._emscripten_bind_b2Body_ApplyForceToCenter_2=i._emscripten_bind_b2Body_ApplyForceToCenter_2,yf=e._emscripten_bind_JSDestructionListener_JSDestructionListener_0=i._emscripten_bind_JSDestructionListener_JSDestructionListener_0,zf=e._emscripten_bind_b2WheelJointDef_set_localAnchorA_1=i._emscripten_bind_b2WheelJointDef_set_localAnchorA_1,Af=e._emscripten_bind_b2FrictionJoint_GetBodyB_0=i._emscripten_bind_b2FrictionJoint_GetBodyB_0,Bf=e._emscripten_bind_b2DistanceJointDef_get_bodyA_0=i._emscripten_bind_b2DistanceJointDef_get_bodyA_0,Cf=e._emscripten_bind_b2WeldJointDef_set_bodyA_1=i._emscripten_bind_b2WeldJointDef_set_bodyA_1,Df=e._emscripten_bind_b2World_SetDestructionListener_1=i._emscripten_bind_b2World_SetDestructionListener_1,Ef=e._emscripten_bind_b2RevoluteJoint_GetJointSpeed_0=i._emscripten_bind_b2RevoluteJoint_GetJointSpeed_0,Ff=e._emscripten_bind_b2WheelJoint_GetLocalAnchorB_0=i._emscripten_bind_b2WheelJoint_GetLocalAnchorB_0,Gf=e._emscripten_bind_b2JointDef___destroy___0=i._emscripten_bind_b2JointDef___destroy___0,Hf=e._emscripten_bind_b2PrismaticJointDef_Initialize_4=i._emscripten_bind_b2PrismaticJointDef_Initialize_4,If=e._emscripten_bind_b2FrictionJointDef_get_localAnchorA_0=i._emscripten_bind_b2FrictionJointDef_get_localAnchorA_0,Jf=e._emscripten_bind_b2CircleShape_GetChildCount_0=i._emscripten_bind_b2CircleShape_GetChildCount_0,Kf=e._emscripten_bind_b2BodyDef_get_bullet_0=i._emscripten_bind_b2BodyDef_get_bullet_0,Lf=e._emscripten_bind_b2ManifoldPoint_get_localPoint_0=i._emscripten_bind_b2ManifoldPoint_get_localPoint_0,Mf=e._emscripten_bind_b2PrismaticJointDef_get_type_0=i._emscripten_bind_b2PrismaticJointDef_get_type_0,Nf=e._emscripten_bind_b2MassData_get_center_0=i._emscripten_bind_b2MassData_get_center_0,Of=e._emscripten_bind_b2World_b2World_1=i._emscripten_bind_b2World_b2World_1,Pf=e._emscripten_bind_b2WheelJoint_GetReactionForce_1=i._emscripten_bind_b2WheelJoint_GetReactionForce_1,Qf=e._emscripten_bind_b2World_SetSubStepping_1=i._emscripten_bind_b2World_SetSubStepping_1,Rf=e._emscripten_bind_b2Vec2_op_add_1=i._emscripten_bind_b2Vec2_op_add_1,Sf=e._emscripten_bind_b2Joint_GetBodyA_0=i._emscripten_bind_b2Joint_GetBodyA_0,Tf=e._emscripten_bind_b2Joint_GetCollideConnected_0=i._emscripten_bind_b2Joint_GetCollideConnected_0,Uf=e._emscripten_bind_b2MotorJoint_GetReactionTorque_1=i._emscripten_bind_b2MotorJoint_GetReactionTorque_1,Vf=e._emscripten_bind_b2WheelJoint_IsMotorEnabled_0=i._emscripten_bind_b2WheelJoint_IsMotorEnabled_0,Wf=e._emscripten_bind_b2WheelJointDef___destroy___0=i._emscripten_bind_b2WheelJointDef___destroy___0,Xf=e._emscripten_bind_b2Vec3_SetZero_0=i._emscripten_bind_b2Vec3_SetZero_0,Yf=e._emscripten_enum_b2JointType_e_pulleyJoint=i._emscripten_enum_b2JointType_e_pulleyJoint,Zf=e._emscripten_bind_b2ChainShape_get_m_nextVertex_0=i._emscripten_bind_b2ChainShape_get_m_nextVertex_0,$f=e._emscripten_bind_b2Contact_SetEnabled_1=i._emscripten_bind_b2Contact_SetEnabled_1,ag=e._emscripten_bind_b2Shape_set_m_radius_1=i._emscripten_bind_b2Shape_set_m_radius_1,bg=e._emscripten_bind_b2GearJointDef_get_joint2_0=i._emscripten_bind_b2GearJointDef_get_joint2_0,cg=e._emscripten_bind_b2World_SetDebugDraw_1=i._emscripten_bind_b2World_SetDebugDraw_1,dg=e._emscripten_bind_b2ContactID_set_key_1=i._emscripten_bind_b2ContactID_set_key_1,eg=e._emscripten_bind_b2RevoluteJointDef_set_collideConnected_1=i._emscripten_bind_b2RevoluteJointDef_set_collideConnected_1,ab=e._malloc=i._malloc,fg=e._emscripten_bind_b2World_GetProxyCount_0=i._emscripten_bind_b2World_GetProxyCount_0,gg=e._emscripten_bind_b2Vec2_Normalize_0=i._emscripten_bind_b2Vec2_Normalize_0,hg=e._emscripten_bind_b2WheelJoint_GetJointSpeed_0=i._emscripten_bind_b2WheelJoint_GetJointSpeed_0,ig=e._emscripten_bind_b2FrictionJointDef_set_localAnchorA_1=i._emscripten_bind_b2FrictionJointDef_set_localAnchorA_1,jg=e._emscripten_bind_b2GearJoint_GetRatio_0=i._emscripten_bind_b2GearJoint_GetRatio_0,kg=e._emscripten_bind_JSRayCastCallback_JSRayCastCallback_0=i._emscripten_bind_JSRayCastCallback_JSRayCastCallback_0,lg=e._emscripten_bind_b2RayCastInput_set_p2_1=i._emscripten_bind_b2RayCastInput_set_p2_1,mg=e._emscripten_bind_b2RevoluteJointDef_get_motorSpeed_0=i._emscripten_bind_b2RevoluteJointDef_get_motorSpeed_0,ng=e._emscripten_bind_b2RayCastOutput_get_normal_0=i._emscripten_bind_b2RayCastOutput_get_normal_0,og=e._emscripten_bind_b2WeldJoint_GetBodyA_0=i._emscripten_bind_b2WeldJoint_GetBodyA_0,pg=e._emscripten_bind_b2MotorJointDef_set_maxForce_1=i._emscripten_bind_b2MotorJointDef_set_maxForce_1,qg=e._emscripten_enum_b2DrawFlag_e_jointBit=i._emscripten_enum_b2DrawFlag_e_jointBit,rg=e._emscripten_bind_b2FixtureDef_get_isSensor_0=i._emscripten_bind_b2FixtureDef_get_isSensor_0,sg=e._emscripten_bind_b2PulleyJointDef_set_bodyB_1=i._emscripten_bind_b2PulleyJointDef_set_bodyB_1,tg=e._emscripten_bind_b2WheelJoint_EnableMotor_1=i._emscripten_bind_b2WheelJoint_EnableMotor_1,ug=e._emscripten_bind_b2WheelJoint_GetLocalAnchorA_0=i._emscripten_bind_b2WheelJoint_GetLocalAnchorA_0,vg=e._emscripten_bind_JSDraw_DrawSolidPolygon_3=i._emscripten_bind_JSDraw_DrawSolidPolygon_3,wg=e._emscripten_bind_b2Rot_Set_1=i._emscripten_bind_b2Rot_Set_1,xg=e._emscripten_bind_b2ContactFeature_set_typeB_1=i._emscripten_bind_b2ContactFeature_set_typeB_1,yg=e._emscripten_bind_JSDraw___destroy___0=i._emscripten_bind_JSDraw___destroy___0,zg=e._emscripten_bind_b2MouseJointDef___destroy___0=i._emscripten_bind_b2MouseJointDef___destroy___0,Ag=e._emscripten_bind_b2Mat33_Solve22_1=i._emscripten_bind_b2Mat33_Solve22_1,Bg=e._emscripten_bind_b2Profile_set_solvePosition_1=i._emscripten_bind_b2Profile_set_solvePosition_1,Cg=e._emscripten_bind_b2ContactFilter___destroy___0=i._emscripten_bind_b2ContactFilter___destroy___0,Dg=e._emscripten_bind_b2PulleyJointDef_get_localAnchorB_0=i._emscripten_bind_b2PulleyJointDef_get_localAnchorB_0,Eg=e._emscripten_bind_b2ChainShape_set_m_hasPrevVertex_1=i._emscripten_bind_b2ChainShape_set_m_hasPrevVertex_1,Fg=e._emscripten_bind_b2PrismaticJoint___destroy___0=i._emscripten_bind_b2PrismaticJoint___destroy___0,Gg=e._emscripten_bind_b2World_CreateJoint_1=i._emscripten_bind_b2World_CreateJoint_1,Hg=e._emscripten_bind_b2Profile_get_solveTOI_0=i._emscripten_bind_b2Profile_get_solveTOI_0,Ig=e._emscripten_bind_b2ManifoldPoint_get_id_0=i._emscripten_bind_b2ManifoldPoint_get_id_0,Jg=e._emscripten_bind_b2Manifold_set_pointCount_1=i._emscripten_bind_b2Manifold_set_pointCount_1,Kg=e._emscripten_bind_b2PrismaticJoint_GetMotorSpeed_0=i._emscripten_bind_b2PrismaticJoint_GetMotorSpeed_0,Lg=e._emscripten_bind_b2Body_SetSleepingAllowed_1=i._emscripten_bind_b2Body_SetSleepingAllowed_1,Mg=e._emscripten_bind_b2Rot_SetIdentity_0=i._emscripten_bind_b2Rot_SetIdentity_0,Ng=e._emscripten_bind_b2PulleyJoint_GetGroundAnchorB_0=i._emscripten_bind_b2PulleyJoint_GetGroundAnchorB_0,Og=e._emscripten_bind_b2Vec3_op_add_1=i._emscripten_bind_b2Vec3_op_add_1,Pg=e._emscripten_bind_b2FrictionJoint_GetType_0=i._emscripten_bind_b2FrictionJoint_GetType_0,Qg=e._emscripten_bind_b2DistanceJointDef_set_dampingRatio_1=i._emscripten_bind_b2DistanceJointDef_set_dampingRatio_1,Rg=e._emscripten_bind_b2MotorJoint_GetBodyA_0=i._emscripten_bind_b2MotorJoint_GetBodyA_0,Sg=e._emscripten_bind_b2MouseJointDef_get_dampingRatio_0=i._emscripten_bind_b2MouseJointDef_get_dampingRatio_0,Tg=e._emscripten_bind_b2RevoluteJoint_GetMotorSpeed_0=i._emscripten_bind_b2RevoluteJoint_GetMotorSpeed_0,Ug=e._emscripten_bind_b2ChainShape_set_m_type_1=i._emscripten_bind_b2ChainShape_set_m_type_1,Vg=e._emscripten_bind_b2RevoluteJointDef_set_bodyB_1=i._emscripten_bind_b2RevoluteJointDef_set_bodyB_1,Wg=e._emscripten_bind_b2Body_GetGravityScale_0=i._emscripten_bind_b2Body_GetGravityScale_0,Xg=e._emscripten_bind_b2GearJointDef_get_bodyB_0=i._emscripten_bind_b2GearJointDef_get_bodyB_0,Yg=e._emscripten_bind_b2Mat33_b2Mat33_0=i._emscripten_bind_b2Mat33_b2Mat33_0,Zg=e._emscripten_bind_b2MouseJointDef_get_bodyB_0=i._emscripten_bind_b2MouseJointDef_get_bodyB_0,$g=e._emscripten_bind_b2Shape_TestPoint_2=i._emscripten_bind_b2Shape_TestPoint_2,ah=e._emscripten_bind_b2Body_GetWorldVector_1=i._emscripten_bind_b2Body_GetWorldVector_1,bh=e._emscripten_bind_b2WeldJointDef_get_frequencyHz_0=i._emscripten_bind_b2WeldJointDef_get_frequencyHz_0,ch=e._emscripten_bind_b2PolygonShape_Set_2=i._emscripten_bind_b2PolygonShape_Set_2,dh=e._emscripten_bind_b2Manifold___destroy___0=i._emscripten_bind_b2Manifold___destroy___0,eh=e._emscripten_bind_b2PulleyJointDef_set_lengthA_1=i._emscripten_bind_b2PulleyJointDef_set_lengthA_1,fh=e._emscripten_bind_b2RevoluteJointDef_set_localAnchorA_1=i._emscripten_bind_b2RevoluteJointDef_set_localAnchorA_1,gh=e._emscripten_bind_b2GearJoint___destroy___0=i._emscripten_bind_b2GearJoint___destroy___0,hh=e._emscripten_bind_b2RevoluteJoint_GetJointAngle_0=i._emscripten_bind_b2RevoluteJoint_GetJointAngle_0,ih=e._emscripten_bind_b2PulleyJointDef_set_ratio_1=i._emscripten_bind_b2PulleyJointDef_set_ratio_1,jh=e._emscripten_bind_b2JointEdge_set_prev_1=i._emscripten_bind_b2JointEdge_set_prev_1,kh=e._emscripten_bind_b2PrismaticJoint_GetReactionTorque_1=i._emscripten_bind_b2PrismaticJoint_GetReactionTorque_1,lh=e._emscripten_bind_b2Body_GetLocalPoint_1=i._emscripten_bind_b2Body_GetLocalPoint_1,mh=e._emscripten_bind_b2PrismaticJoint_GetCollideConnected_0=i._emscripten_bind_b2PrismaticJoint_GetCollideConnected_0,nh=e._emscripten_bind_b2RopeJointDef_get_userData_0=i._emscripten_bind_b2RopeJointDef_get_userData_0,oh=e._emscripten_bind_b2DistanceJoint_IsActive_0=i._emscripten_bind_b2DistanceJoint_IsActive_0,ph=e._emscripten_bind_b2MotorJointDef_set_angularOffset_1=i._emscripten_bind_b2MotorJointDef_set_angularOffset_1,qh=e._emscripten_bind_b2Vec2_b2Vec2_2=i._emscripten_bind_b2Vec2_b2Vec2_2,rh=e._emscripten_bind_b2PrismaticJoint_GetJointTranslation_0=i._emscripten_bind_b2PrismaticJoint_GetJointTranslation_0,sh=e._emscripten_bind_b2Vec2_b2Vec2_0=i._emscripten_bind_b2Vec2_b2Vec2_0,th=e._emscripten_bind_b2DistanceJoint_GetAnchorB_0=i._emscripten_bind_b2DistanceJoint_GetAnchorB_0,uh=e._emscripten_bind_b2WheelJointDef_get_maxMotorTorque_0=i._emscripten_bind_b2WheelJointDef_get_maxMotorTorque_0,vh=e._emscripten_bind_b2Vec2_op_sub_1=i._emscripten_bind_b2Vec2_op_sub_1,wh=e._emscripten_bind_b2CircleShape_get_m_p_0=i._emscripten_bind_b2CircleShape_get_m_p_0,xh=e._emscripten_bind_b2ContactFeature_get_indexA_0=i._emscripten_bind_b2ContactFeature_get_indexA_0,yh=e._emscripten_bind_b2MotorJointDef_b2MotorJointDef_0=i._emscripten_bind_b2MotorJointDef_b2MotorJointDef_0,zh=e._emscripten_bind_b2ChainShape_set_m_nextVertex_1=i._emscripten_bind_b2ChainShape_set_m_nextVertex_1,Ah=e._emscripten_bind_b2PulleyJoint_GetCollideConnected_0=i._emscripten_bind_b2PulleyJoint_GetCollideConnected_0,Bh=e._emscripten_bind_b2PulleyJoint_GetAnchorB_0=i._emscripten_bind_b2PulleyJoint_GetAnchorB_0,Ch=e._emscripten_bind_b2Mat33_get_ex_0=i._emscripten_bind_b2Mat33_get_ex_0,Dh=e._emscripten_bind_b2Body_GetPosition_0=i._emscripten_bind_b2Body_GetPosition_0,Eh=e._emscripten_bind_b2Profile___destroy___0=i._emscripten_bind_b2Profile___destroy___0,Fh=e._emscripten_bind_b2ContactEdge_get_prev_0=i._emscripten_bind_b2ContactEdge_get_prev_0,Gh=e._emscripten_bind_b2DistanceJoint_SetFrequency_1=i._emscripten_bind_b2DistanceJoint_SetFrequency_1,Hh=e._emscripten_enum_b2ShapeType_e_chain=i._emscripten_enum_b2ShapeType_e_chain,Ih=e._emscripten_enum_b2ContactFeatureType_e_vertex=i._emscripten_enum_b2ContactFeatureType_e_vertex,Jh=e._emscripten_bind_b2Fixture_GetBody_0=i._emscripten_bind_b2Fixture_GetBody_0,Kh=e._emscripten_bind_b2ContactImpulse_set_count_1=i._emscripten_bind_b2ContactImpulse_set_count_1,Lh=e._emscripten_bind_b2PulleyJointDef_get_bodyB_0=i._emscripten_bind_b2PulleyJointDef_get_bodyB_0,Mh=e._emscripten_bind_b2Rot_set_c_1=i._emscripten_bind_b2Rot_set_c_1,Nh=e._emscripten_bind_b2RevoluteJoint_GetReactionTorque_1=i._emscripten_bind_b2RevoluteJoint_GetReactionTorque_1,Oh=e._emscripten_bind_b2Fixture_SetDensity_1=i._emscripten_bind_b2Fixture_SetDensity_1,Ph=e._emscripten_bind_b2ChainShape_get_m_prevVertex_0=i._emscripten_bind_b2ChainShape_get_m_prevVertex_0,Qh=e._emscripten_bind_b2World_ClearForces_0=i._emscripten_bind_b2World_ClearForces_0,Rh=e._emscripten_bind_b2Vec3___destroy___0=i._emscripten_bind_b2Vec3___destroy___0,Sh=e._emscripten_bind_b2WheelJointDef_set_userData_1=i._emscripten_bind_b2WheelJointDef_set_userData_1,Th=e._emscripten_bind_b2WeldJoint_SetFrequency_1=i._emscripten_bind_b2WeldJoint_SetFrequency_1,Uh=e._emscripten_bind_JSContactListener_PreSolve_2=i._emscripten_bind_JSContactListener_PreSolve_2,Vh=e._emscripten_bind_b2Body_SetFixedRotation_1=i._emscripten_bind_b2Body_SetFixedRotation_1,Wh=e._emscripten_bind_b2RayCastOutput_set_normal_1=i._emscripten_bind_b2RayCastOutput_set_normal_1,Xh=e._emscripten_bind_b2DistanceJoint_GetDampingRatio_0=i._emscripten_bind_b2DistanceJoint_GetDampingRatio_0,Yh=e._emscripten_bind_b2WeldJointDef_set_userData_1=i._emscripten_bind_b2WeldJointDef_set_userData_1,Zh=e._emscripten_bind_b2Body_GetMassData_1=i._emscripten_bind_b2Body_GetMassData_1,$h=e._emscripten_bind_b2MouseJointDef_set_bodyB_1=i._emscripten_bind_b2MouseJointDef_set_bodyB_1,ai=e._emscripten_bind_b2CircleShape_GetType_0=i._emscripten_bind_b2CircleShape_GetType_0,bi=e._emscripten_bind_b2PolygonShape_GetType_0=i._emscripten_bind_b2PolygonShape_GetType_0,ci=e._emscripten_bind_b2PrismaticJointDef_set_referenceAngle_1=i._emscripten_bind_b2PrismaticJointDef_set_referenceAngle_1,di=e._emscripten_bind_b2RopeJointDef_get_collideConnected_0=i._emscripten_bind_b2RopeJointDef_get_collideConnected_0,ei=e._emscripten_bind_b2FixtureDef_set_filter_1=i._emscripten_bind_b2FixtureDef_set_filter_1,fi=e._emscripten_bind_b2PulleyJointDef_get_groundAnchorA_0=i._emscripten_bind_b2PulleyJointDef_get_groundAnchorA_0,gi=e._emscripten_bind_b2Fixture_SetFilterData_1=i._emscripten_bind_b2Fixture_SetFilterData_1,hi=e._emscripten_bind_b2FrictionJointDef_get_userData_0=i._emscripten_bind_b2FrictionJointDef_get_userData_0,ii=e._emscripten_bind_b2RayCastCallback___destroy___0=i._emscripten_bind_b2RayCastCallback___destroy___0,ji=e._emscripten_bind_b2PulleyJointDef_set_localAnchorA_1=i._emscripten_bind_b2PulleyJointDef_set_localAnchorA_1,ki=e._emscripten_bind_b2MotorJoint_SetUserData_1=i._emscripten_bind_b2MotorJoint_SetUserData_1,li=e._emscripten_bind_b2PrismaticJoint_GetLocalAxisA_0=i._emscripten_bind_b2PrismaticJoint_GetLocalAxisA_0,mi=e._emscripten_bind_b2MotorJoint_GetBodyB_0=i._emscripten_bind_b2MotorJoint_GetBodyB_0,ni=e._emscripten_bind_b2Transform_Set_2=i._emscripten_bind_b2Transform_Set_2,oi=e._emscripten_bind_b2MouseJoint_SetTarget_1=i._emscripten_bind_b2MouseJoint_SetTarget_1,pi=e._emscripten_bind_b2RopeJointDef_get_localAnchorA_0=i._emscripten_bind_b2RopeJointDef_get_localAnchorA_0,qi=e._emscripten_bind_b2ContactEdge_set_contact_1=i._emscripten_bind_b2ContactEdge_set_contact_1,ri=e._emscripten_bind_b2RevoluteJointDef_get_enableLimit_0=i._emscripten_bind_b2RevoluteJointDef_get_enableLimit_0,si=e._emscripten_bind_b2CircleShape_get_m_radius_0=i._emscripten_bind_b2CircleShape_get_m_radius_0,ti=e._emscripten_bind_b2RevoluteJoint_GetUserData_0=i._emscripten_bind_b2RevoluteJoint_GetUserData_0,ui=e._emscripten_bind_b2Profile_set_solveTOI_1=i._emscripten_bind_b2Profile_set_solveTOI_1,vi=e._emscripten_bind_b2PrismaticJointDef_set_type_1=i._emscripten_bind_b2PrismaticJointDef_set_type_1,wi=e._emscripten_bind_b2GearJointDef_get_userData_0=i._emscripten_bind_b2GearJointDef_get_userData_0,xi=e._emscripten_bind_b2WheelJoint_SetSpringFrequencyHz_1=i._emscripten_bind_b2WheelJoint_SetSpringFrequencyHz_1,yi=e._emscripten_bind_b2FrictionJointDef___destroy___0=i._emscripten_bind_b2FrictionJointDef___destroy___0,zi=e._emscripten_bind_b2PrismaticJoint_GetReactionForce_1=i._emscripten_bind_b2PrismaticJoint_GetReactionForce_1,Ai=e._emscripten_bind_b2Transform_b2Transform_0=i._emscripten_bind_b2Transform_b2Transform_0,Bi=e._emscripten_bind_b2MouseJoint_GetCollideConnected_0=i._emscripten_bind_b2MouseJoint_GetCollideConnected_0,Ci=e._emscripten_enum_b2LimitState_e_equalLimits=i._emscripten_enum_b2LimitState_e_equalLimits,Di=e._emscripten_bind_b2ManifoldPoint_set_normalImpulse_1=i._emscripten_bind_b2ManifoldPoint_set_normalImpulse_1,Ei=e._emscripten_bind_b2Body_GetContactList_0=i._emscripten_bind_b2Body_GetContactList_0,Fi=e._emscripten_bind_b2Body_IsFixedRotation_0=i._emscripten_bind_b2Body_IsFixedRotation_0,Gi=e._emscripten_enum_b2DrawFlag_e_shapeBit=i._emscripten_enum_b2DrawFlag_e_shapeBit,Hi=e._emscripten_bind_b2Contact_GetFriction_0=i._emscripten_bind_b2Contact_GetFriction_0,Ii=e._emscripten_bind_b2WheelJoint_GetAnchorB_0=i._emscripten_bind_b2WheelJoint_GetAnchorB_0,Ji=e._emscripten_bind_b2DistanceJointDef_set_length_1=i._emscripten_bind_b2DistanceJointDef_set_length_1,Ki=e._emscripten_bind_b2DistanceJoint_GetLocalAnchorB_0=i._emscripten_bind_b2DistanceJoint_GetLocalAnchorB_0,Li=e._emscripten_bind_b2FrictionJoint_GetLocalAnchorB_0=i._emscripten_bind_b2FrictionJoint_GetLocalAnchorB_0,Mi=e._emscripten_bind_b2Mat33_set_ey_1=i._emscripten_bind_b2Mat33_set_ey_1,Ni=e._emscripten_bind_b2DistanceJointDef_get_type_0=i._emscripten_bind_b2DistanceJointDef_get_type_0,Oi=e._emscripten_bind_b2Draw_ClearFlags_1=i._emscripten_bind_b2Draw_ClearFlags_1,Pi=e._emscripten_bind_b2Body_IsActive_0=i._emscripten_bind_b2Body_IsActive_0,Qi=e._emscripten_bind_b2Contact_ResetRestitution_0=i._emscripten_bind_b2Contact_ResetRestitution_0,Ri=e._emscripten_bind_b2World_GetAllowSleeping_0=i._emscripten_bind_b2World_GetAllowSleeping_0,Si=e._emscripten_bind_b2ManifoldPoint_b2ManifoldPoint_0=i._emscripten_bind_b2ManifoldPoint_b2ManifoldPoint_0,Ti=e._emscripten_bind_b2PrismaticJointDef_set_maxMotorForce_1=i._emscripten_bind_b2PrismaticJointDef_set_maxMotorForce_1,Ui=e._emscripten_bind_b2GearJointDef_set_bodyA_1=i._emscripten_bind_b2GearJointDef_set_bodyA_1,Vi=e._emscripten_bind_b2RevoluteJointDef_set_enableMotor_1=i._emscripten_bind_b2RevoluteJointDef_set_enableMotor_1,Wi=e._emscripten_bind_b2PulleyJoint_IsActive_0=i._emscripten_bind_b2PulleyJoint_IsActive_0,Xi=e._emscripten_bind_b2MouseJoint_GetNext_0=i._emscripten_bind_b2MouseJoint_GetNext_0,Yi=e._emscripten_bind_b2Transform_set_p_1=i._emscripten_bind_b2Transform_set_p_1,Zi=e._emscripten_bind_b2EdgeShape_set_m_vertex0_1=i._emscripten_bind_b2EdgeShape_set_m_vertex0_1,$i=e._emscripten_bind_b2PulleyJointDef_get_lengthB_0=i._emscripten_bind_b2PulleyJointDef_get_lengthB_0,aj=e._emscripten_bind_b2WeldJoint_SetUserData_1=i._emscripten_bind_b2WeldJoint_SetUserData_1,bj=e._emscripten_bind_b2Fixture_SetSensor_1=i._emscripten_bind_b2Fixture_SetSensor_1,cj=e._emscripten_bind_b2GearJointDef_get_joint1_0=i._emscripten_bind_b2GearJointDef_get_joint1_0,dj=e._emscripten_bind_b2PrismaticJoint_GetMotorForce_1=i._emscripten_bind_b2PrismaticJoint_GetMotorForce_1,ej=e._emscripten_bind_b2DistanceJoint_GetBodyA_0=i._emscripten_bind_b2DistanceJoint_GetBodyA_0,fj=e._emscripten_bind_b2GearJoint_IsActive_0=i._emscripten_bind_b2GearJoint_IsActive_0,gj=e._emscripten_bind_b2EdgeShape_get_m_vertex0_0=i._emscripten_bind_b2EdgeShape_get_m_vertex0_0,hj=e._emscripten_bind_b2World_GetBodyCount_0=i._emscripten_bind_b2World_GetBodyCount_0,ij=e._emscripten_bind_b2Fixture_GetMassData_1=i._emscripten_bind_b2Fixture_GetMassData_1,jj=e._emscripten_bind_b2WeldJointDef_get_collideConnected_0=i._emscripten_bind_b2WeldJointDef_get_collideConnected_0,kj=e._emscripten_bind_b2FrictionJoint_GetMaxTorque_0=i._emscripten_bind_b2FrictionJoint_GetMaxTorque_0,lj=e._emscripten_bind_b2EdgeShape_RayCast_4=i._emscripten_bind_b2EdgeShape_RayCast_4,mj=e._emscripten_bind_b2BodyDef_set_allowSleep_1=i._emscripten_bind_b2BodyDef_set_allowSleep_1,nj=e._emscripten_bind_b2PulleyJoint_GetType_0=i._emscripten_bind_b2PulleyJoint_GetType_0,oj=e._emscripten_bind_b2WeldJointDef_set_localAnchorA_1=i._emscripten_bind_b2WeldJointDef_set_localAnchorA_1,pj=e._emscripten_bind_b2Profile_set_step_1=i._emscripten_bind_b2Profile_set_step_1,qj=e._emscripten_bind_b2ContactEdge_set_other_1=i._emscripten_bind_b2ContactEdge_set_other_1,rj=e._emscripten_bind_b2PulleyJoint_GetCurrentLengthB_0=i._emscripten_bind_b2PulleyJoint_GetCurrentLengthB_0,sj=e._emscripten_bind_b2Vec2_op_mul_1=i._emscripten_bind_b2Vec2_op_mul_1,tj=e._emscripten_bind_b2PrismaticJointDef_get_localAnchorA_0=i._emscripten_bind_b2PrismaticJointDef_get_localAnchorA_0,uj=e._emscripten_bind_b2EdgeShape___destroy___0=i._emscripten_bind_b2EdgeShape___destroy___0,vj=e._emscripten_bind_b2RopeJoint_GetAnchorA_0=i._emscripten_bind_b2RopeJoint_GetAnchorA_0,wj=e._emscripten_bind_b2World_GetContactCount_0=i._emscripten_bind_b2World_GetContactCount_0,xj=e._emscripten_bind_b2MotorJointDef_set_correctionFactor_1=i._emscripten_bind_b2MotorJointDef_set_correctionFactor_1,yj=e._emscripten_bind_b2DistanceJointDef_set_userData_1=i._emscripten_bind_b2DistanceJointDef_set_userData_1,zj=e._emscripten_bind_b2ContactEdge_get_other_0=i._emscripten_bind_b2ContactEdge_get_other_0,Aj=e._emscripten_bind_b2RopeJoint_GetLocalAnchorB_0=i._emscripten_bind_b2RopeJoint_GetLocalAnchorB_0,Bj=e._emscripten_bind_b2PulleyJointDef___destroy___0=i._emscripten_bind_b2PulleyJointDef___destroy___0,Cj=e._emscripten_bind_b2MouseJoint_GetBodyB_0=i._emscripten_bind_b2MouseJoint_GetBodyB_0,Dj=e._emscripten_bind_b2PolygonShape_TestPoint_2=i._emscripten_bind_b2PolygonShape_TestPoint_2,Ej=e._emscripten_bind_b2EdgeShape_set_m_vertex3_1=i._emscripten_bind_b2EdgeShape_set_m_vertex3_1,Fj=e._emscripten_bind_b2PolygonShape_b2PolygonShape_0=i._emscripten_bind_b2PolygonShape_b2PolygonShape_0,Gj=e._emscripten_bind_b2GearJointDef_set_ratio_1=i._emscripten_bind_b2GearJointDef_set_ratio_1,Hj=e._emscripten_bind_b2WheelJoint_SetMaxMotorTorque_1=i._emscripten_bind_b2WheelJoint_SetMaxMotorTorque_1,Ij=e._emscripten_bind_b2WheelJointDef_get_localAxisA_0=i._emscripten_bind_b2WheelJointDef_get_localAxisA_0,Jj=e._emscripten_bind_b2DistanceJointDef_get_localAnchorA_0=i._emscripten_bind_b2DistanceJointDef_get_localAnchorA_0,Kj=e._emscripten_bind_b2MassData_set_center_1=i._emscripten_bind_b2MassData_set_center_1,Lj=e._emscripten_bind_b2Contact_SetTangentSpeed_1=i._emscripten_bind_b2Contact_SetTangentSpeed_1,Mj=e._emscripten_bind_b2FrictionJointDef_get_localAnchorB_0=i._emscripten_bind_b2FrictionJointDef_get_localAnchorB_0,Nj=e._emscripten_bind_b2BodyDef_get_active_0=i._emscripten_bind_b2BodyDef_get_active_0,Oj=e._emscripten_bind_b2Body_GetAngularVelocity_0=i._emscripten_bind_b2Body_GetAngularVelocity_0,Pj=e._emscripten_bind_b2WeldJoint_GetBodyB_0=i._emscripten_bind_b2WeldJoint_GetBodyB_0,Qj=e._emscripten_bind_b2Draw___destroy___0=i._emscripten_bind_b2Draw___destroy___0,Rj=e._emscripten_bind_b2WheelJointDef_Initialize_4=i._emscripten_bind_b2WheelJointDef_Initialize_4,Sj=e._emscripten_bind_b2WeldJointDef_set_dampingRatio_1=i._emscripten_bind_b2WeldJointDef_set_dampingRatio_1,Tj=e._emscripten_bind_b2Contact_IsEnabled_0=i._emscripten_bind_b2Contact_IsEnabled_0,Uj=e._emscripten_bind_b2Joint_GetAnchorB_0=i._emscripten_bind_b2Joint_GetAnchorB_0,Vj=e._emscripten_bind_b2PrismaticJointDef_get_userData_0=i._emscripten_bind_b2PrismaticJointDef_get_userData_0,Wj=e._emscripten_bind_b2MotorJoint_GetMaxForce_0=i._emscripten_bind_b2MotorJoint_GetMaxForce_0,Xj=e._emscripten_bind_b2RevoluteJoint_GetBodyA_0=i._emscripten_bind_b2RevoluteJoint_GetBodyA_0,Yj=e._emscripten_bind_b2ContactID_set_cf_1=i._emscripten_bind_b2ContactID_set_cf_1,Zj=e._emscripten_bind_b2Rot_GetXAxis_0=i._emscripten_bind_b2Rot_GetXAxis_0,$j=e._emscripten_bind_b2ContactEdge_set_prev_1=i._emscripten_bind_b2ContactEdge_set_prev_1,ak=e._emscripten_bind_b2Vec3_Set_3=i._emscripten_bind_b2Vec3_Set_3,bk=e._emscripten_bind_b2Fixture_GetNext_0=i._emscripten_bind_b2Fixture_GetNext_0,ck=e._emscripten_bind_b2FrictionJointDef_set_localAnchorB_1=i._emscripten_bind_b2FrictionJointDef_set_localAnchorB_1,dk=e._emscripten_bind_b2PulleyJoint_GetNext_0=i._emscripten_bind_b2PulleyJoint_GetNext_0,ek=e._emscripten_bind_b2ChainShape_get_m_type_0=i._emscripten_bind_b2ChainShape_get_m_type_0,fk=e._emscripten_bind_b2GearJointDef_get_bodyA_0=i._emscripten_bind_b2GearJointDef_get_bodyA_0,gk=e._emscripten_bind_b2DistanceJointDef_set_frequencyHz_1=i._emscripten_bind_b2DistanceJointDef_set_frequencyHz_1,hk=e._emscripten_bind_b2RevoluteJointDef_get_localAnchorB_0=i._emscripten_bind_b2RevoluteJointDef_get_localAnchorB_0,ik=e._emscripten_bind_b2RevoluteJointDef_get_referenceAngle_0=i._emscripten_bind_b2RevoluteJointDef_get_referenceAngle_0,jk=e._emscripten_bind_JSContactFilter___destroy___0=i._emscripten_bind_JSContactFilter___destroy___0,Wb=e._memset=i._memset,kk=e._emscripten_bind_b2PolygonShape_get_m_radius_0=i._emscripten_bind_b2PolygonShape_get_m_radius_0,lk=e._emscripten_bind_b2RopeJoint_GetUserData_0=i._emscripten_bind_b2RopeJoint_GetUserData_0,mk=e._emscripten_bind_b2RopeJointDef_get_bodyA_0=i._emscripten_bind_b2RopeJointDef_get_bodyA_0,nk=e._emscripten_bind_b2DistanceJointDef_get_dampingRatio_0=i._emscripten_bind_b2DistanceJointDef_get_dampingRatio_0,ok=e._emscripten_enum_b2ManifoldType_e_faceA=i._emscripten_enum_b2ManifoldType_e_faceA,pk=e._emscripten_enum_b2ManifoldType_e_faceB=i._emscripten_enum_b2ManifoldType_e_faceB,qk=e._emscripten_bind_b2RevoluteJointDef_get_bodyB_0=i._emscripten_bind_b2RevoluteJointDef_get_bodyB_0,rk=e._emscripten_bind_b2FixtureDef_b2FixtureDef_0=i._emscripten_bind_b2FixtureDef_b2FixtureDef_0,sk=e._emscripten_bind_b2PrismaticJoint_SetUserData_1=i._emscripten_bind_b2PrismaticJoint_SetUserData_1,tk=e._emscripten_bind_b2EdgeShape_get_m_hasVertex3_0=i._emscripten_bind_b2EdgeShape_get_m_hasVertex3_0,uk=e._emscripten_enum_b2ShapeType_e_edge=i._emscripten_enum_b2ShapeType_e_edge,vk=e._emscripten_bind_b2RevoluteJoint_GetMaxMotorTorque_0=i._emscripten_bind_b2RevoluteJoint_GetMaxMotorTorque_0,wk=e._emscripten_bind_b2BodyDef_set_active_1=i._emscripten_bind_b2BodyDef_set_active_1,xk=e._emscripten_bind_b2DistanceJointDef_set_localAnchorB_1=i._emscripten_bind_b2DistanceJointDef_set_localAnchorB_1,yk=e._emscripten_bind_b2Body_GetWorldPoint_1=i._emscripten_bind_b2Body_GetWorldPoint_1,zk=e._emscripten_bind_b2ManifoldPoint_get_normalImpulse_0=i._emscripten_bind_b2ManifoldPoint_get_normalImpulse_0,Ak=e._emscripten_bind_JSContactFilter_ShouldCollide_2=i._emscripten_bind_JSContactFilter_ShouldCollide_2,Bk=e._emscripten_bind_b2Joint_GetReactionTorque_1=i._emscripten_bind_b2Joint_GetReactionTorque_1,Ck=e._emscripten_bind_b2RevoluteJointDef_set_type_1=i._emscripten_bind_b2RevoluteJointDef_set_type_1,Dk=e._emscripten_bind_b2RopeJointDef_b2RopeJointDef_0=i._emscripten_bind_b2RopeJointDef_b2RopeJointDef_0,Ek=e._emscripten_bind_b2BodyDef_get_linearDamping_0=i._emscripten_bind_b2BodyDef_get_linearDamping_0,Fk=e._emscripten_bind_b2MotorJointDef_get_bodyB_0=i._emscripten_bind_b2MotorJointDef_get_bodyB_0,Gk=e._emscripten_bind_b2World_Step_3=i._emscripten_bind_b2World_Step_3,Hk=e._emscripten_bind_b2CircleShape_RayCast_4=i._emscripten_bind_b2CircleShape_RayCast_4,Ik=e._emscripten_bind_b2Profile_get_step_0=i._emscripten_bind_b2Profile_get_step_0,Jk=e._emscripten_bind_b2Vec3_b2Vec3_0=i._emscripten_bind_b2Vec3_b2Vec3_0,Kk=e._emscripten_bind_b2Vec3_b2Vec3_3=i._emscripten_bind_b2Vec3_b2Vec3_3,Lk=e._emscripten_bind_b2PulleyJoint_GetLengthB_0=i._emscripten_bind_b2PulleyJoint_GetLengthB_0,Mk=e._emscripten_bind_b2Filter_set_categoryBits_1=i._emscripten_bind_b2Filter_set_categoryBits_1,Nk=e._emscripten_bind_b2MotorJoint_GetUserData_0=i._emscripten_bind_b2MotorJoint_GetUserData_0,Ok=e._emscripten_bind_b2PrismaticJoint_GetLocalAnchorA_0=i._emscripten_bind_b2PrismaticJoint_GetLocalAnchorA_0,Pk=e._emscripten_bind_b2Shape_get_m_type_0=i._emscripten_bind_b2Shape_get_m_type_0,Qk=e._emscripten_bind_b2MouseJoint_SetDampingRatio_1=i._emscripten_bind_b2MouseJoint_SetDampingRatio_1,Rk=e._emscripten_bind_b2World_GetAutoClearForces_0=i._emscripten_bind_b2World_GetAutoClearForces_0,Sk=e._emscripten_enum_b2ShapeType_e_circle=i._emscripten_enum_b2ShapeType_e_circle,Tk=e._emscripten_bind_b2BodyDef_set_fixedRotation_1=i._emscripten_bind_b2BodyDef_set_fixedRotation_1,Uk=e._emscripten_bind_b2RopeJoint_GetLimitState_0=i._emscripten_bind_b2RopeJoint_GetLimitState_0,Vk=e._emscripten_bind_b2JointDef_get_collideConnected_0=i._emscripten_bind_b2JointDef_get_collideConnected_0,Wk=e._emscripten_bind_b2Body_Dump_0=i._emscripten_bind_b2Body_Dump_0,Xk=e._emscripten_bind_b2RevoluteJoint_GetLowerLimit_0=i._emscripten_bind_b2RevoluteJoint_GetLowerLimit_0,Yk=e._emscripten_bind_b2Body_GetWorldCenter_0=i._emscripten_bind_b2Body_GetWorldCenter_0,Zk=e._emscripten_bind_JSContactListener___destroy___0=i._emscripten_bind_JSContactListener___destroy___0,$k=e._emscripten_bind_b2BodyDef_set_linearVelocity_1=i._emscripten_bind_b2BodyDef_set_linearVelocity_1,al=e._emscripten_bind_b2JointDef_set_collideConnected_1=i._emscripten_bind_b2JointDef_set_collideConnected_1,bl=e._emscripten_bind_b2MotorJoint___destroy___0=i._emscripten_bind_b2MotorJoint___destroy___0,cl=e._emscripten_bind_b2Body_GetUserData_0=i._emscripten_bind_b2Body_GetUserData_0,dl=e._emscripten_bind_b2World_GetContinuousPhysics_0=i._emscripten_bind_b2World_GetContinuousPhysics_0,el=e._emscripten_bind_b2Fixture_RayCast_3=i._emscripten_bind_b2Fixture_RayCast_3,fl=e._emscripten_bind_b2JointDef_set_bodyA_1=i._emscripten_bind_b2JointDef_set_bodyA_1,gl=e._emscripten_bind_b2GearJointDef_get_collideConnected_0=i._emscripten_bind_b2GearJointDef_get_collideConnected_0,hl=e._emscripten_bind_b2RopeJointDef_get_maxLength_0=i._emscripten_bind_b2RopeJointDef_get_maxLength_0,il=e._emscripten_bind_b2MouseJointDef_get_bodyA_0=i._emscripten_bind_b2MouseJointDef_get_bodyA_0,jl=e._emscripten_bind_b2Body_SetBullet_1=i._emscripten_bind_b2Body_SetBullet_1,kl=e._emscripten_bind_b2DistanceJoint_GetType_0=i._emscripten_bind_b2DistanceJoint_GetType_0,ll=e._emscripten_bind_b2FixtureDef_get_restitution_0=i._emscripten_bind_b2FixtureDef_get_restitution_0,ml=e._emscripten_bind_b2Fixture_GetType_0=i._emscripten_bind_b2Fixture_GetType_0,nl=e._emscripten_bind_b2PulleyJointDef_set_localAnchorB_1=i._emscripten_bind_b2PulleyJointDef_set_localAnchorB_1,ol=e._emscripten_bind_b2RevoluteJoint_GetBodyB_0=i._emscripten_bind_b2RevoluteJoint_GetBodyB_0,pl=e._emscripten_bind_b2Profile_set_solveInit_1=i._emscripten_bind_b2Profile_set_solveInit_1,ql=e._emscripten_bind_b2RopeJointDef_set_type_1=i._emscripten_bind_b2RopeJointDef_set_type_1,rl=e._emscripten_bind_b2PrismaticJointDef_get_bodyB_0=i._emscripten_bind_b2PrismaticJointDef_get_bodyB_0,sl=e._emscripten_bind_b2Body_SetLinearVelocity_1=i._emscripten_bind_b2Body_SetLinearVelocity_1,tl=e._emscripten_bind_b2RevoluteJoint_GetReferenceAngle_0=i._emscripten_bind_b2RevoluteJoint_GetReferenceAngle_0,ul=e._emscripten_bind_b2PulleyJointDef_get_userData_0=i._emscripten_bind_b2PulleyJointDef_get_userData_0,vl=e._emscripten_bind_b2PrismaticJointDef_set_bodyB_1=i._emscripten_bind_b2PrismaticJointDef_set_bodyB_1,wl=e._emscripten_bind_b2FrictionJointDef_b2FrictionJointDef_0=i._emscripten_bind_b2FrictionJointDef_b2FrictionJointDef_0,eb=e._free=i._free,xl=e._emscripten_bind_b2PulleyJoint_GetCurrentLengthA_0=i._emscripten_bind_b2PulleyJoint_GetCurrentLengthA_0,yl=e._emscripten_bind_b2Manifold_get_localNormal_0=i._emscripten_bind_b2Manifold_get_localNormal_0,zl=e._emscripten_bind_b2AABB_RayCast_2=i._emscripten_bind_b2AABB_RayCast_2,Al=e._emscripten_bind_b2FixtureDef_set_isSensor_1=i._emscripten_bind_b2FixtureDef_set_isSensor_1,Bl=e._emscripten_bind_b2RopeJoint_GetBodyB_0=i._emscripten_bind_b2RopeJoint_GetBodyB_0,Cl=e._emscripten_bind_b2PrismaticJoint_GetAnchorA_0=i._emscripten_bind_b2PrismaticJoint_GetAnchorA_0,Dl=e._emscripten_bind_b2ChainShape_set_m_count_1=i._emscripten_bind_b2ChainShape_set_m_count_1,El=e._emscripten_bind_b2PrismaticJoint_IsMotorEnabled_0=i._emscripten_bind_b2PrismaticJoint_IsMotorEnabled_0,Fl=e._emscripten_bind_b2WeldJoint_GetFrequency_0=i._emscripten_bind_b2WeldJoint_GetFrequency_0,Gl=e._emscripten_bind_b2Joint_GetUserData_0=i._emscripten_bind_b2Joint_GetUserData_0,Hl=e._emscripten_bind_b2RevoluteJointDef_get_lowerAngle_0=i._emscripten_bind_b2RevoluteJointDef_get_lowerAngle_0,Il=e._emscripten_bind_b2Manifold_set_type_1=i._emscripten_bind_b2Manifold_set_type_1,Jl=e._emscripten_bind_b2DistanceJoint_GetLength_0=i._emscripten_bind_b2DistanceJoint_GetLength_0,Kl=e._emscripten_bind_b2RopeJointDef_set_maxLength_1=i._emscripten_bind_b2RopeJointDef_set_maxLength_1,Ll=e._emscripten_bind_b2ChainShape_TestPoint_2=i._emscripten_bind_b2ChainShape_TestPoint_2,Ml=e._emscripten_bind_b2PrismaticJoint_GetReferenceAngle_0=i._emscripten_bind_b2PrismaticJoint_GetReferenceAngle_0,Nl=e._emscripten_bind_b2RayCastInput_get_p2_0=i._emscripten_bind_b2RayCastInput_get_p2_0,Ol=e._emscripten_bind_b2RevoluteJoint_EnableLimit_1=i._emscripten_bind_b2RevoluteJoint_EnableLimit_1,Pl=e._emscripten_bind_b2BodyDef_set_angle_1=i._emscripten_bind_b2BodyDef_set_angle_1,Ql=e._emscripten_bind_b2WeldJoint_GetUserData_0=i._emscripten_bind_b2WeldJoint_GetUserData_0,Rl=e._emscripten_bind_b2WheelJointDef_get_localAnchorA_0=i._emscripten_bind_b2WheelJointDef_get_localAnchorA_0,Sl=e._emscripten_bind_b2PulleyJointDef_set_type_1=i._emscripten_bind_b2PulleyJointDef_set_type_1,Tl=e._emscripten_bind_b2Body_IsBullet_0=i._emscripten_bind_b2Body_IsBullet_0,Ul=e._emscripten_bind_b2MotorJointDef_set_bodyA_1=i._emscripten_bind_b2MotorJointDef_set_bodyA_1,Vl=e._emscripten_bind_b2Mat33_GetSymInverse33_1=i._emscripten_bind_b2Mat33_GetSymInverse33_1,Wl=e._emscripten_bind_b2Body_ApplyLinearImpulse_3=i._emscripten_bind_b2Body_ApplyLinearImpulse_3,Xl=e._emscripten_bind_b2PolygonShape_ComputeMass_2=i._emscripten_bind_b2PolygonShape_ComputeMass_2,Yl=e._emscripten_bind_b2WeldJoint_GetLocalAnchorA_0=i._emscripten_bind_b2WeldJoint_GetLocalAnchorA_0,Zl=e._emscripten_bind_b2MouseJoint_SetFrequency_1=i._emscripten_bind_b2MouseJoint_SetFrequency_1,$l=e._emscripten_bind_b2EdgeShape_get_m_vertex1_0=i._emscripten_bind_b2EdgeShape_get_m_vertex1_0,am=e._emscripten_bind_b2BodyDef_set_awake_1=i._emscripten_bind_b2BodyDef_set_awake_1,bm=e._emscripten_bind_b2Vec2_get_y_0=i._emscripten_bind_b2Vec2_get_y_0,cm=e._emscripten_bind_b2Body_CreateFixture_1=i._emscripten_bind_b2Body_CreateFixture_1,dm=e._emscripten_bind_b2Body_CreateFixture_2=i._emscripten_bind_b2Body_CreateFixture_2,em=e._emscripten_bind_b2PulleyJoint_GetUserData_0=i._emscripten_bind_b2PulleyJoint_GetUserData_0,fm=e._emscripten_bind_b2Body_SetActive_1=i._emscripten_bind_b2Body_SetActive_1,gm=e._emscripten_bind_b2Fixture_GetUserData_0=i._emscripten_bind_b2Fixture_GetUserData_0,hm=e._emscripten_bind_b2PolygonShape_ComputeAABB_3=i._emscripten_bind_b2PolygonShape_ComputeAABB_3,im=e._emscripten_bind_b2ContactFeature_get_typeA_0=i._emscripten_bind_b2ContactFeature_get_typeA_0,jm=e._emscripten_bind_b2MouseJoint_GetReactionForce_1=i._emscripten_bind_b2MouseJoint_GetReactionForce_1,km=e._emscripten_bind_b2FrictionJoint_GetReactionTorque_1=i._emscripten_bind_b2FrictionJoint_GetReactionTorque_1,lm=e._emscripten_bind_b2EdgeShape_TestPoint_2=i._emscripten_bind_b2EdgeShape_TestPoint_2,mc=e._memcpy=i._memcpy,mm=e._emscripten_bind_b2PolygonShape_get_m_centroid_0=i._emscripten_bind_b2PolygonShape_get_m_centroid_0,nm=e._emscripten_bind_b2ChainShape___destroy___0=i._emscripten_bind_b2ChainShape___destroy___0,om=e._emscripten_bind_b2GearJoint_SetUserData_1=i._emscripten_bind_b2GearJoint_SetUserData_1,pm=e._emscripten_bind_b2Vec3_set_z_1=i._emscripten_bind_b2Vec3_set_z_1,qm=e._emscripten_bind_b2PrismaticJointDef_set_enableLimit_1=i._emscripten_bind_b2PrismaticJointDef_set_enableLimit_1,rm=e._emscripten_bind_b2DistanceJoint_GetFrequency_0=i._emscripten_bind_b2DistanceJoint_GetFrequency_0,sm=e._emscripten_bind_b2Body_SetGravityScale_1=i._emscripten_bind_b2Body_SetGravityScale_1,tm=e._emscripten_enum_b2ContactFeatureType_e_face=i._emscripten_enum_b2ContactFeatureType_e_face,um=e._emscripten_bind_b2AABB_GetPerimeter_0=i._emscripten_bind_b2AABB_GetPerimeter_0,vm=e._emscripten_bind_b2PulleyJointDef_get_lengthA_0=i._emscripten_bind_b2PulleyJointDef_get_lengthA_0,wm=e._emscripten_bind_b2Vec3_set_x_1=i._emscripten_bind_b2Vec3_set_x_1,xm=e._emscripten_bind_b2PulleyJointDef_get_type_0=i._emscripten_bind_b2PulleyJointDef_get_type_0,ym=e._emscripten_bind_JSDestructionListener_SayGoodbyeJoint_1=i._emscripten_bind_JSDestructionListener_SayGoodbyeJoint_1,zm=e._emscripten_bind_b2Shape___destroy___0=i._emscripten_bind_b2Shape___destroy___0,Yb=e._strlen=i._strlen,Am=e._emscripten_bind_b2Color_set_b_1=i._emscripten_bind_b2Color_set_b_1,Bm=e._emscripten_bind_b2Joint_GetReactionForce_1=i._emscripten_bind_b2Joint_GetReactionForce_1,Cm=e._emscripten_bind_b2FixtureDef_set_friction_1=i._emscripten_bind_b2FixtureDef_set_friction_1,Dm=e._emscripten_bind_b2ContactID___destroy___0=i._emscripten_bind_b2ContactID___destroy___0,Em=e._emscripten_bind_b2EdgeShape_get_m_hasVertex0_0=i._emscripten_bind_b2EdgeShape_get_m_hasVertex0_0,Fm=e._emscripten_bind_JSRayCastCallback_ReportFixture_4=i._emscripten_bind_JSRayCastCallback_ReportFixture_4,Gm=e._emscripten_bind_b2MotorJointDef_get_linearOffset_0=i._emscripten_bind_b2MotorJointDef_get_linearOffset_0,Hm=e._emscripten_bind_b2Profile_set_solveVelocity_1=i._emscripten_bind_b2Profile_set_solveVelocity_1,Im=e._emscripten_bind_b2PrismaticJoint_GetAnchorB_0=i._emscripten_bind_b2PrismaticJoint_GetAnchorB_0,Jm=e._emscripten_bind_b2WeldJointDef_b2WeldJointDef_0=i._emscripten_bind_b2WeldJointDef_b2WeldJointDef_0,Km=e._emscripten_enum_b2BodyType_b2_staticBody=i._emscripten_enum_b2BodyType_b2_staticBody,Lm=e._emscripten_bind_b2RevoluteJointDef_set_upperAngle_1=i._emscripten_bind_b2RevoluteJointDef_set_upperAngle_1,Mm=e._emscripten_bind_b2RevoluteJointDef_get_type_0=i._emscripten_bind_b2RevoluteJointDef_get_type_0,Nm=e._emscripten_bind_b2GearJointDef_get_type_0=i._emscripten_bind_b2GearJointDef_get_type_0,Om=e._emscripten_bind_b2ChainShape_GetType_0=i._emscripten_bind_b2ChainShape_GetType_0,Pm=e._emscripten_bind_b2RayCastInput_get_maxFraction_0=i._emscripten_bind_b2RayCastInput_get_maxFraction_0,Qm=e._emscripten_bind_b2GearJoint_GetBodyA_0=i._emscripten_bind_b2GearJoint_GetBodyA_0,Rm=e._emscripten_bind_b2Body_GetLocalVector_1=i._emscripten_bind_b2Body_GetLocalVector_1,Sm=e._emscripten_bind_b2PrismaticJoint_EnableLimit_1=i._emscripten_bind_b2PrismaticJoint_EnableLimit_1,Tm=e._emscripten_bind_b2FrictionJointDef_get_maxForce_0=i._emscripten_bind_b2FrictionJointDef_get_maxForce_0,Um=e._emscripten_bind_b2BodyDef_set_angularVelocity_1=i._emscripten_bind_b2BodyDef_set_angularVelocity_1,Vm=e._emscripten_bind_b2Body_SetLinearDamping_1=i._emscripten_bind_b2Body_SetLinearDamping_1,Wm=e._emscripten_bind_b2WheelJoint_GetBodyB_0=i._emscripten_bind_b2WheelJoint_GetBodyB_0,Xm=e._emscripten_bind_b2Color___destroy___0=i._emscripten_bind_b2Color___destroy___0,Ym=e._emscripten_bind_b2PrismaticJoint_IsActive_0=i._emscripten_bind_b2PrismaticJoint_IsActive_0,Zm=e._emscripten_bind_b2Filter_get_categoryBits_0=i._emscripten_bind_b2Filter_get_categoryBits_0,$m=e._emscripten_enum_b2JointType_e_weldJoint=i._emscripten_enum_b2JointType_e_weldJoint,an=e._emscripten_bind_b2World_SetContinuousPhysics_1=i._emscripten_bind_b2World_SetContinuousPhysics_1,bn=e._emscripten_bind_b2MouseJointDef_get_target_0=i._emscripten_bind_b2MouseJointDef_get_target_0,cn=e._emscripten_bind_b2Manifold_b2Manifold_0=i._emscripten_bind_b2Manifold_b2Manifold_0,dn=e._emscripten_bind_b2PulleyJointDef_set_userData_1=i._emscripten_bind_b2PulleyJointDef_set_userData_1,en=e._emscripten_bind_b2FrictionJointDef_set_maxForce_1=i._emscripten_bind_b2FrictionJointDef_set_maxForce_1,fn=e._emscripten_bind_b2DistanceJointDef_b2DistanceJointDef_0=i._emscripten_bind_b2DistanceJointDef_b2DistanceJointDef_0,gn=e._emscripten_bind_b2PolygonShape_set_m_centroid_1=i._emscripten_bind_b2PolygonShape_set_m_centroid_1,hn=e._emscripten_bind_b2Mat33_GetInverse22_1=i._emscripten_bind_b2Mat33_GetInverse22_1,jn=e._emscripten_bind_b2PolygonShape_SetAsBox_4=i._emscripten_bind_b2PolygonShape_SetAsBox_4,kn=e._emscripten_bind_b2EdgeShape_get_m_vertex2_0=i._emscripten_bind_b2EdgeShape_get_m_vertex2_0,ln=e._emscripten_bind_b2WheelJoint_GetReactionTorque_1=i._emscripten_bind_b2WheelJoint_GetReactionTorque_1,mn=e._emscripten_bind_b2RevoluteJointDef_b2RevoluteJointDef_0=i._emscripten_bind_b2RevoluteJointDef_b2RevoluteJointDef_0,nn=e._emscripten_bind_b2ContactFeature_set_typeA_1=i._emscripten_bind_b2ContactFeature_set_typeA_1,on=e._emscripten_bind_b2Fixture_Dump_1=i._emscripten_bind_b2Fixture_Dump_1,pn=e._emscripten_bind_b2World_GetJointList_0=i._emscripten_bind_b2World_GetJointList_0,qn=e._emscripten_bind_b2Manifold_set_localPoint_1=i._emscripten_bind_b2Manifold_set_localPoint_1,rn=e._emscripten_bind_b2DistanceJoint_SetUserData_1=i._emscripten_bind_b2DistanceJoint_SetUserData_1,sn=e._emscripten_bind_b2BodyDef_set_bullet_1=i._emscripten_bind_b2BodyDef_set_bullet_1,tn=e._emscripten_bind_b2RayCastOutput___destroy___0=i._emscripten_bind_b2RayCastOutput___destroy___0;e.___cxa_can_catch=i.___cxa_can_catch;var un=e._emscripten_bind_b2WheelJoint_GetNext_0=i._emscripten_bind_b2WheelJoint_GetNext_0,vn=e._emscripten_bind_b2AABB_GetCenter_0=i._emscripten_bind_b2AABB_GetCenter_0,wn=e._emscripten_bind_b2Filter_set_groupIndex_1=i._emscripten_bind_b2Filter_set_groupIndex_1,xn=e._emscripten_bind_b2JointDef_b2JointDef_0=i._emscripten_bind_b2JointDef_b2JointDef_0,yn=e._emscripten_bind_b2CircleShape_b2CircleShape_0=i._emscripten_bind_b2CircleShape_b2CircleShape_0,zn=e._emscripten_bind_b2GearJointDef_b2GearJointDef_0=i._emscripten_bind_b2GearJointDef_b2GearJointDef_0,An=e._emscripten_bind_b2JointDef_get_bodyB_0=i._emscripten_bind_b2JointDef_get_bodyB_0,Bn=e._emscripten_bind_b2DistanceJoint_GetReactionForce_1=i._emscripten_bind_b2DistanceJoint_GetReactionForce_1,Cn=e._emscripten_bind_b2PrismaticJoint_GetJointSpeed_0=i._emscripten_bind_b2PrismaticJoint_GetJointSpeed_0,Dn=e._emscripten_bind_b2PulleyJointDef_get_groundAnchorB_0=i._emscripten_bind_b2PulleyJointDef_get_groundAnchorB_0,En=e._emscripten_bind_b2Joint_GetAnchorA_0=i._emscripten_bind_b2Joint_GetAnchorA_0,Fn=e._emscripten_bind_b2Contact_GetRestitution_0=i._emscripten_bind_b2Contact_GetRestitution_0,Gn=e._emscripten_bind_b2ContactEdge_get_contact_0=i._emscripten_bind_b2ContactEdge_get_contact_0,Hn=e._emscripten_bind_b2RevoluteJointDef_get_userData_0=i._emscripten_bind_b2RevoluteJointDef_get_userData_0,In=e._emscripten_bind_b2Body_ApplyTorque_2=i._emscripten_bind_b2Body_ApplyTorque_2,Jn=e._emscripten_bind_b2Fixture_GetAABB_1=i._emscripten_bind_b2Fixture_GetAABB_1,Kn=e._emscripten_bind_b2DistanceJointDef_Initialize_4=i._emscripten_bind_b2DistanceJointDef_Initialize_4,Ln=e._emscripten_bind_b2PrismaticJointDef_set_collideConnected_1=i._emscripten_bind_b2PrismaticJointDef_set_collideConnected_1,Mn=e._emscripten_bind_b2PrismaticJointDef_set_localAxisA_1=i._emscripten_bind_b2PrismaticJointDef_set_localAxisA_1,Nn=e._emscripten_bind_b2Contact_GetTangentSpeed_0=i._emscripten_bind_b2Contact_GetTangentSpeed_0,On=e._emscripten_enum_b2LimitState_e_atLowerLimit=i._emscripten_enum_b2LimitState_e_atLowerLimit,Pn=e._emscripten_bind_b2ManifoldPoint_set_id_1=i._emscripten_bind_b2ManifoldPoint_set_id_1,Qn=e._emscripten_bind_b2WheelJointDef_get_bodyB_0=i._emscripten_bind_b2WheelJointDef_get_bodyB_0,Rn=e._emscripten_bind_b2WeldJoint_GetLocalAnchorB_0=i._emscripten_bind_b2WeldJoint_GetLocalAnchorB_0,Sn=e._emscripten_bind_b2RevoluteJointDef_set_localAnchorB_1=i._emscripten_bind_b2RevoluteJointDef_set_localAnchorB_1,Tn=e._emscripten_bind_b2RevoluteJoint_GetType_0=i._emscripten_bind_b2RevoluteJoint_GetType_0,Un=e._emscripten_bind_b2Body_DestroyFixture_1=i._emscripten_bind_b2Body_DestroyFixture_1,Vn=e._emscripten_bind_b2Profile_set_broadphase_1=i._emscripten_bind_b2Profile_set_broadphase_1,Wn=e._emscripten_bind_b2WheelJointDef_get_localAnchorB_0=i._emscripten_bind_b2WheelJointDef_get_localAnchorB_0,Xn=e._emscripten_bind_b2ContactImpulse_get_count_0=i._emscripten_bind_b2ContactImpulse_get_count_0,Yn=e._emscripten_bind_b2World_GetJointCount_0=i._emscripten_bind_b2World_GetJointCount_0,Zn=e._emscripten_bind_b2WheelJoint_GetMotorSpeed_0=i._emscripten_bind_b2WheelJoint_GetMotorSpeed_0,$n=e._emscripten_bind_b2Body_GetAngularDamping_0=i._emscripten_bind_b2Body_GetAngularDamping_0,ao=e._emscripten_bind_b2WheelJointDef_get_dampingRatio_0=i._emscripten_bind_b2WheelJointDef_get_dampingRatio_0,bo=e._emscripten_bind_b2RayCastOutput_get_fraction_0=i._emscripten_bind_b2RayCastOutput_get_fraction_0,co=e._emscripten_enum_b2ManifoldType_e_circles=i._emscripten_enum_b2ManifoldType_e_circles,eo=e._emscripten_bind_b2GearJoint_SetRatio_1=i._emscripten_bind_b2GearJoint_SetRatio_1,fo=e._emscripten_bind_JSDraw_DrawPolygon_3=i._emscripten_bind_JSDraw_DrawPolygon_3,go=e._emscripten_bind_b2Filter___destroy___0=i._emscripten_bind_b2Filter___destroy___0,ho=e._emscripten_bind_b2JointEdge_set_next_1=i._emscripten_bind_b2JointEdge_set_next_1;e.___cxa_is_pointer_type=i.___cxa_is_pointer_type;var io=e._emscripten_bind_b2BodyDef_get_fixedRotation_0=i._emscripten_bind_b2BodyDef_get_fixedRotation_0,jo=e._emscripten_bind_b2PrismaticJointDef_set_motorSpeed_1=i._emscripten_bind_b2PrismaticJointDef_set_motorSpeed_1,ko=e._emscripten_bind_b2ChainShape_SetPrevVertex_1=i._emscripten_bind_b2ChainShape_SetPrevVertex_1,lo=e._emscripten_bind_b2MotorJoint_IsActive_0=i._emscripten_bind_b2MotorJoint_IsActive_0,mo=e._emscripten_bind_b2MouseJoint_GetReactionTorque_1=i._emscripten_bind_b2MouseJoint_GetReactionTorque_1,no=e._emscripten_bind_b2MouseJoint_GetUserData_0=i._emscripten_bind_b2MouseJoint_GetUserData_0,oo=e._emscripten_bind_b2WheelJoint_GetUserData_0=i._emscripten_bind_b2WheelJoint_GetUserData_0,po=e._emscripten_bind_b2Vec3_op_sub_1=i._emscripten_bind_b2Vec3_op_sub_1,qo=e._emscripten_bind_b2BodyDef_get_gravityScale_0=i._emscripten_bind_b2BodyDef_get_gravityScale_0,ro=e._emscripten_bind_b2Shape_GetType_0=i._emscripten_bind_b2Shape_GetType_0,so=e._emscripten_bind_b2AABB_IsValid_0=i._emscripten_bind_b2AABB_IsValid_0,to=e._emscripten_bind_b2WheelJoint_GetBodyA_0=i._emscripten_bind_b2WheelJoint_GetBodyA_0,uo=e._emscripten_bind_JSDraw_DrawTransform_1=i._emscripten_bind_JSDraw_DrawTransform_1,vo=e._emscripten_bind_b2PulleyJoint_GetLengthA_0=i._emscripten_bind_b2PulleyJoint_GetLengthA_0,wo=e._emscripten_bind_b2DistanceJointDef_get_frequencyHz_0=i._emscripten_bind_b2DistanceJointDef_get_frequencyHz_0,xo=e._emscripten_bind_b2RevoluteJoint_SetMotorSpeed_1=i._emscripten_bind_b2RevoluteJoint_SetMotorSpeed_1,yo=e._emscripten_bind_b2World___destroy___0=i._emscripten_bind_b2World___destroy___0,zo=e._emscripten_bind_b2ChainShape_get_m_hasNextVertex_0=i._emscripten_bind_b2ChainShape_get_m_hasNextVertex_0,Ao=e._emscripten_bind_b2ChainShape_SetNextVertex_1=i._emscripten_bind_b2ChainShape_SetNextVertex_1,Bo=e._emscripten_bind_b2Body_SetType_1=i._emscripten_bind_b2Body_SetType_1,Co=e._emscripten_bind_b2Body_GetMass_0=i._emscripten_bind_b2Body_GetMass_0,Do=e._emscripten_bind_b2Rot_b2Rot_0=i._emscripten_bind_b2Rot_b2Rot_0,Eo=e._emscripten_bind_b2Rot_b2Rot_1=i._emscripten_bind_b2Rot_b2Rot_1,Fo=e._emscripten_enum_b2JointType_e_distanceJoint=i._emscripten_enum_b2JointType_e_distanceJoint,Go=e._emscripten_bind_b2PulleyJoint___destroy___0=i._emscripten_bind_b2PulleyJoint___destroy___0,Ho=e._emscripten_bind_b2PrismaticJoint_GetLocalAnchorB_0=i._emscripten_bind_b2PrismaticJoint_GetLocalAnchorB_0,Io=e._emscripten_bind_b2MouseJoint_GetType_0=i._emscripten_bind_b2MouseJoint_GetType_0,Jo=e._emscripten_bind_JSQueryCallback___destroy___0=i._emscripten_bind_JSQueryCallback___destroy___0,Ko=e._emscripten_bind_b2RevoluteJointDef_set_lowerAngle_1=i._emscripten_bind_b2RevoluteJointDef_set_lowerAngle_1,Lo=e._emscripten_bind_b2JointEdge___destroy___0=i._emscripten_bind_b2JointEdge___destroy___0,Mo=e._emscripten_bind_b2PulleyJoint_GetRatio_0=i._emscripten_bind_b2PulleyJoint_GetRatio_0,No=e._emscripten_bind_JSContactListener_BeginContact_1=i._emscripten_bind_JSContactListener_BeginContact_1,Oo=e._emscripten_bind_b2MotorJointDef_set_linearOffset_1=i._emscripten_bind_b2MotorJointDef_set_linearOffset_1,Po=e._emscripten_enum_b2JointType_e_motorJoint=i._emscripten_enum_b2JointType_e_motorJoint,Qo=e._emscripten_bind_b2JointEdge_get_next_0=i._emscripten_bind_b2JointEdge_get_next_0,Ro=e._emscripten_bind_b2RayCastInput_set_maxFraction_1=i._emscripten_bind_b2RayCastInput_set_maxFraction_1,So=e._emscripten_bind_b2MouseJoint_GetBodyA_0=i._emscripten_bind_b2MouseJoint_GetBodyA_0,To=e._emscripten_bind_b2Profile_set_collide_1=i._emscripten_bind_b2Profile_set_collide_1,Uo=e._emscripten_bind_b2AABB_b2AABB_0=i._emscripten_bind_b2AABB_b2AABB_0,Vo=e._emscripten_bind_b2Fixture_Refilter_0=i._emscripten_bind_b2Fixture_Refilter_0,Wo=e._emscripten_bind_b2World_CreateBody_1=i._emscripten_bind_b2World_CreateBody_1,Xo=e._emscripten_bind_b2RopeJointDef_set_userData_1=i._emscripten_bind_b2RopeJointDef_set_userData_1,Yo=e._emscripten_bind_b2Fixture_IsSensor_0=i._emscripten_bind_b2Fixture_IsSensor_0,Zo=e._emscripten_bind_b2WeldJoint_GetType_0=i._emscripten_bind_b2WeldJoint_GetType_0,$o=e._emscripten_bind_b2PrismaticJointDef_get_motorSpeed_0=i._emscripten_bind_b2PrismaticJointDef_get_motorSpeed_0,ap=e._emscripten_bind_b2Rot___destroy___0=i._emscripten_bind_b2Rot___destroy___0,bp=e._emscripten_bind_b2Filter_get_maskBits_0=i._emscripten_bind_b2Filter_get_maskBits_0,cp=e._emscripten_bind_b2Mat22_get_ex_0=i._emscripten_bind_b2Mat22_get_ex_0,dp=e._emscripten_bind_b2Body_GetFixtureList_0=i._emscripten_bind_b2Body_GetFixtureList_0,ep=e._emscripten_bind_b2RevoluteJointDef_get_enableMotor_0=i._emscripten_bind_b2RevoluteJointDef_get_enableMotor_0,fp=e._emscripten_bind_b2MouseJointDef_set_dampingRatio_1=i._emscripten_bind_b2MouseJointDef_set_dampingRatio_1,gp=e._emscripten_bind_JSRayCastCallback___destroy___0=i._emscripten_bind_JSRayCastCallback___destroy___0,hp=e._emscripten_bind_b2ContactListener___destroy___0=i._emscripten_bind_b2ContactListener___destroy___0,ip=e._emscripten_bind_b2PrismaticJointDef_set_localAnchorB_1=i._emscripten_bind_b2PrismaticJointDef_set_localAnchorB_1,jp=e._emscripten_enum_b2DrawFlag_e_pairBit=i._emscripten_enum_b2DrawFlag_e_pairBit,kp=e._emscripten_bind_b2FrictionJoint___destroy___0=i._emscripten_bind_b2FrictionJoint___destroy___0,lp=e._emscripten_bind_b2WeldJoint_Dump_0=i._emscripten_bind_b2WeldJoint_Dump_0,mp=e._emscripten_bind_b2MotorJoint_SetMaxForce_1=i._emscripten_bind_b2MotorJoint_SetMaxForce_1,np=e._emscripten_bind_b2FrictionJointDef_get_maxTorque_0=i._emscripten_bind_b2FrictionJointDef_get_maxTorque_0,op=e._emscripten_bind_b2FrictionJoint_GetLocalAnchorA_0=i._emscripten_bind_b2FrictionJoint_GetLocalAnchorA_0,pp=e._emscripten_bind_b2WeldJointDef_get_localAnchorB_0=i._emscripten_bind_b2WeldJointDef_get_localAnchorB_0,qp=e._emscripten_bind_b2PrismaticJointDef_get_bodyA_0=i._emscripten_bind_b2PrismaticJointDef_get_bodyA_0,rp=e._emscripten_bind_b2Vec2_IsValid_0=i._emscripten_bind_b2Vec2_IsValid_0,sp=e._emscripten_bind_b2PrismaticJointDef_set_bodyA_1=i._emscripten_bind_b2PrismaticJointDef_set_bodyA_1,tp=e._emscripten_bind_b2World_GetWarmStarting_0=i._emscripten_bind_b2World_GetWarmStarting_0,up=e._emscripten_bind_b2RevoluteJointDef_set_enableLimit_1=i._emscripten_bind_b2RevoluteJointDef_set_enableLimit_1,vp=e._emscripten_bind_b2WeldJointDef___destroy___0=i._emscripten_bind_b2WeldJointDef___destroy___0,wp=e._emscripten_bind_b2Mat22_Solve_1=i._emscripten_bind_b2Mat22_Solve_1,xp=e._emscripten_bind_b2Color_get_g_0=i._emscripten_bind_b2Color_get_g_0,yp=e._emscripten_bind_VoidPtr___destroy___0=i._emscripten_bind_VoidPtr___destroy___0,zp=e._emscripten_bind_b2RopeJoint_GetNext_0=i._emscripten_bind_b2RopeJoint_GetNext_0,Ap=e._emscripten_bind_b2Filter_b2Filter_0=i._emscripten_bind_b2Filter_b2Filter_0,Bp=e._emscripten_bind_b2PolygonShape_GetChildCount_0=i._emscripten_bind_b2PolygonShape_GetChildCount_0,Cp=e._emscripten_bind_b2GearJointDef_get_ratio_0=i._emscripten_bind_b2GearJointDef_get_ratio_0,Dp=e._emscripten_bind_b2Mat33_Solve33_1=i._emscripten_bind_b2Mat33_Solve33_1,Ep=e._emscripten_bind_b2PulleyJoint_GetReactionForce_1=i._emscripten_bind_b2PulleyJoint_GetReactionForce_1,Fp=e._emscripten_bind_b2WheelJoint_GetCollideConnected_0=i._emscripten_bind_b2WheelJoint_GetCollideConnected_0,Gp=e._emscripten_bind_b2WheelJoint_SetSpringDampingRatio_1=i._emscripten_bind_b2WheelJoint_SetSpringDampingRatio_1,Hp=e._emscripten_bind_b2RevoluteJointDef___destroy___0=i._emscripten_bind_b2RevoluteJointDef___destroy___0,Ip=e._emscripten_bind_b2MouseJointDef_get_maxForce_0=i._emscripten_bind_b2MouseJointDef_get_maxForce_0,Jp=e._emscripten_bind_b2RevoluteJoint_EnableMotor_1=i._emscripten_bind_b2RevoluteJoint_EnableMotor_1,Kp=e._emscripten_bind_b2ContactFeature_get_typeB_0=i._emscripten_bind_b2ContactFeature_get_typeB_0,Lp=e._emscripten_bind_b2MotorJoint_SetLinearOffset_1=i._emscripten_bind_b2MotorJoint_SetLinearOffset_1,Mp=e._emscripten_bind_b2MotorJoint_GetReactionForce_1=i._emscripten_bind_b2MotorJoint_GetReactionForce_1,Np=e._emscripten_bind_b2Rot_GetAngle_0=i._emscripten_bind_b2Rot_GetAngle_0,Op=e._emscripten_bind_b2World_SetAllowSleeping_1=i._emscripten_bind_b2World_SetAllowSleeping_1,Pp=e._emscripten_bind_b2MotorJoint_SetAngularOffset_1=i._emscripten_bind_b2MotorJoint_SetAngularOffset_1,Qp=e._emscripten_bind_b2MotorJoint_GetLinearOffset_0=i._emscripten_bind_b2MotorJoint_GetLinearOffset_0,Rp=e._emscripten_bind_b2FrictionJoint_GetCollideConnected_0=i._emscripten_bind_b2FrictionJoint_GetCollideConnected_0,Sp=e._emscripten_bind_b2WheelJointDef_set_motorSpeed_1=i._emscripten_bind_b2WheelJointDef_set_motorSpeed_1,Tp=e._emscripten_bind_b2MotorJoint_GetAnchorA_0=i._emscripten_bind_b2MotorJoint_GetAnchorA_0,Up=e._emscripten_bind_b2Fixture_GetDensity_0=i._emscripten_bind_b2Fixture_GetDensity_0,Vp=e._emscripten_bind_b2PolygonShape_get_m_type_0=i._emscripten_bind_b2PolygonShape_get_m_type_0,Wp=e._emscripten_bind_b2Vec2_Set_2=i._emscripten_bind_b2Vec2_Set_2,Xp=e._emscripten_bind_b2WeldJointDef_get_type_0=i._emscripten_bind_b2WeldJointDef_get_type_0,Yp=e._emscripten_bind_b2MouseJointDef_b2MouseJointDef_0=i._emscripten_bind_b2MouseJointDef_b2MouseJointDef_0,Zp=e._emscripten_bind_b2Rot_get_s_0=i._emscripten_bind_b2Rot_get_s_0,$p=e._emscripten_bind_b2FrictionJoint_SetMaxTorque_1=i._emscripten_bind_b2FrictionJoint_SetMaxTorque_1,aq=e._emscripten_bind_b2MouseJointDef_get_frequencyHz_0=i._emscripten_bind_b2MouseJointDef_get_frequencyHz_0,bq=e._emscripten_bind_b2FrictionJoint_SetUserData_1=i._emscripten_bind_b2FrictionJoint_SetUserData_1,cq=e._emscripten_bind_b2FixtureDef_set_userData_1=i._emscripten_bind_b2FixtureDef_set_userData_1,dq=e._emscripten_bind_b2JointDef_get_userData_0=i._emscripten_bind_b2JointDef_get_userData_0,eq=e._emscripten_bind_b2DistanceJointDef_get_collideConnected_0=i._emscripten_bind_b2DistanceJointDef_get_collideConnected_0,fq=e._emscripten_bind_b2RevoluteJointDef_set_referenceAngle_1=i._emscripten_bind_b2RevoluteJointDef_set_referenceAngle_1,gq=e._emscripten_bind_b2ContactFeature___destroy___0=i._emscripten_bind_b2ContactFeature___destroy___0,hq=e._emscripten_bind_b2DistanceJointDef_set_bodyB_1=i._emscripten_bind_b2DistanceJointDef_set_bodyB_1,iq=e._emscripten_bind_JSQueryCallback_JSQueryCallback_0=i._emscripten_bind_JSQueryCallback_JSQueryCallback_0,jq=e._emscripten_bind_b2ChainShape_GetChildCount_0=i._emscripten_bind_b2ChainShape_GetChildCount_0,kq=e._emscripten_bind_b2MassData_b2MassData_0=i._emscripten_bind_b2MassData_b2MassData_0,lq=e._emscripten_bind_b2Vec3_set_y_1=i._emscripten_bind_b2Vec3_set_y_1,mq=e._emscripten_bind_b2AABB_Combine_1=i._emscripten_bind_b2AABB_Combine_1,nq=e._emscripten_bind_b2AABB_Combine_2=i._emscripten_bind_b2AABB_Combine_2,oq=e._emscripten_bind_b2PrismaticJoint_GetBodyA_0=i._emscripten_bind_b2PrismaticJoint_GetBodyA_0,pq=e._emscripten_bind_b2PrismaticJoint_GetMaxMotorForce_0=i._emscripten_bind_b2PrismaticJoint_GetMaxMotorForce_0,qq=e._emscripten_bind_b2AABB___destroy___0=i._emscripten_bind_b2AABB___destroy___0,rq=e._emscripten_bind_b2Body_IsSleepingAllowed_0=i._emscripten_bind_b2Body_IsSleepingAllowed_0,sq=e._emscripten_bind_b2MouseJointDef_set_maxForce_1=i._emscripten_bind_b2MouseJointDef_set_maxForce_1,tq=e._emscripten_bind_b2MotorJoint_GetCorrectionFactor_0=i._emscripten_bind_b2MotorJoint_GetCorrectionFactor_0,uq=e._emscripten_bind_b2Profile_get_solve_0=i._emscripten_bind_b2Profile_get_solve_0,vq=e._emscripten_bind_JSDestructionListener_SayGoodbyeFixture_1=i._emscripten_bind_JSDestructionListener_SayGoodbyeFixture_1,wq=e._emscripten_bind_b2PolygonShape_GetVertexCount_0=i._emscripten_bind_b2PolygonShape_GetVertexCount_0,xq=e._emscripten_bind_b2Rot_get_c_0=i._emscripten_bind_b2Rot_get_c_0,yq=e._emscripten_bind_b2AABB_set_lowerBound_1=i._emscripten_bind_b2AABB_set_lowerBound_1,zq=e._emscripten_bind_b2ChainShape_get_m_hasPrevVertex_0=i._emscripten_bind_b2ChainShape_get_m_hasPrevVertex_0,Aq=e._emscripten_bind_b2MouseJoint_SetMaxForce_1=i._emscripten_bind_b2MouseJoint_SetMaxForce_1,Bq=e._emscripten_bind_b2FrictionJointDef_get_bodyB_0=i._emscripten_bind_b2FrictionJointDef_get_bodyB_0,Cq=e._emscripten_bind_b2JointDef_set_userData_1=i._emscripten_bind_b2JointDef_set_userData_1,Dq=e._emscripten_bind_b2ManifoldPoint_get_tangentImpulse_0=i._emscripten_bind_b2ManifoldPoint_get_tangentImpulse_0,Eq=e._emscripten_bind_b2RevoluteJointDef_get_maxMotorTorque_0=i._emscripten_bind_b2RevoluteJointDef_get_maxMotorTorque_0,Fq=e._emscripten_bind_b2WeldJointDef_get_dampingRatio_0=i._emscripten_bind_b2WeldJointDef_get_dampingRatio_0,Gq=e._emscripten_bind_b2MouseJoint___destroy___0=i._emscripten_bind_b2MouseJoint___destroy___0,Hq=e._emscripten_bind_b2EdgeShape_b2EdgeShape_0=i._emscripten_bind_b2EdgeShape_b2EdgeShape_0,Iq=e._emscripten_bind_b2FrictionJoint_GetReactionForce_1=i._emscripten_bind_b2FrictionJoint_GetReactionForce_1,Jq=e._emscripten_bind_b2DistanceJointDef_set_type_1=i._emscripten_bind_b2DistanceJointDef_set_type_1,Kq=e._emscripten_bind_b2WeldJoint___destroy___0=i._emscripten_bind_b2WeldJoint___destroy___0,Lq=e._emscripten_bind_JSContactListener_PostSolve_2=i._emscripten_bind_JSContactListener_PostSolve_2,Mq=e._emscripten_bind_b2PulleyJoint_GetBodyA_0=i._emscripten_bind_b2PulleyJoint_GetBodyA_0,Nq=e._emscripten_bind_b2RopeJointDef_get_type_0=i._emscripten_bind_b2RopeJointDef_get_type_0,Oq=e._emscripten_bind_b2CircleShape_ComputeMass_2=i._emscripten_bind_b2CircleShape_ComputeMass_2,Pq=e._emscripten_bind_b2DistanceJointDef_get_localAnchorB_0=i._emscripten_bind_b2DistanceJointDef_get_localAnchorB_0,Qq=e._emscripten_bind_b2GearJointDef___destroy___0=i._emscripten_bind_b2GearJointDef___destroy___0,Rq=e._emscripten_bind_b2RevoluteJointDef_set_bodyA_1=i._emscripten_bind_b2RevoluteJointDef_set_bodyA_1,Sq=e._emscripten_enum_b2BodyType_b2_dynamicBody=i._emscripten_enum_b2BodyType_b2_dynamicBody,Tq=e._emscripten_bind_b2CircleShape_TestPoint_2=i._emscripten_bind_b2CircleShape_TestPoint_2,Uq=e._emscripten_bind_b2MotorJointDef_get_maxTorque_0=i._emscripten_bind_b2MotorJointDef_get_maxTorque_0,Vq=e._emscripten_bind_b2Body_GetLinearVelocityFromLocalPoint_1=i._emscripten_bind_b2Body_GetLinearVelocityFromLocalPoint_1,Wq=e._emscripten_bind_b2Mat22_b2Mat22_0=i._emscripten_bind_b2Mat22_b2Mat22_0,Xq=e._emscripten_bind_b2MouseJoint_GetAnchorB_0=i._emscripten_bind_b2MouseJoint_GetAnchorB_0,Yq=e._emscripten_enum_b2BodyType_b2_kinematicBody=i._emscripten_enum_b2BodyType_b2_kinematicBody,Zq=e._emscripten_bind_b2Manifold_get_localPoint_0=i._emscripten_bind_b2Manifold_get_localPoint_0,$q=e._emscripten_bind_b2GearJoint_GetBodyB_0=i._emscripten_bind_b2GearJoint_GetBodyB_0,ar=e._emscripten_bind_b2ChainShape_Clear_0=i._emscripten_bind_b2ChainShape_Clear_0,br=e._emscripten_bind_b2CircleShape___destroy___0=i._emscripten_bind_b2CircleShape___destroy___0,cr=e._emscripten_bind_b2MotorJoint_GetType_0=i._emscripten_bind_b2MotorJoint_GetType_0,dr=e._emscripten_bind_b2BodyDef_get_awake_0=i._emscripten_bind_b2BodyDef_get_awake_0,er=e._emscripten_bind_b2Contact_SetRestitution_1=i._emscripten_bind_b2Contact_SetRestitution_1,fr=e._emscripten_bind_b2BodyDef_get_angularDamping_0=i._emscripten_bind_b2BodyDef_get_angularDamping_0,gr=e._emscripten_bind_b2EdgeShape_get_m_vertex3_0=i._emscripten_bind_b2EdgeShape_get_m_vertex3_0,hr=e._emscripten_bind_b2Fixture_SetUserData_1=i._emscripten_bind_b2Fixture_SetUserData_1,ir=e._emscripten_bind_b2Transform_SetIdentity_0=i._emscripten_bind_b2Transform_SetIdentity_0,jr=e._emscripten_bind_b2GearJointDef_set_joint1_1=i._emscripten_bind_b2GearJointDef_set_joint1_1,kr=e._emscripten_bind_b2EdgeShape_set_m_vertex2_1=i._emscripten_bind_b2EdgeShape_set_m_vertex2_1,lr=e._emscripten_bind_b2ContactEdge_get_next_0=i._emscripten_bind_b2ContactEdge_get_next_0,mr=e._emscripten_bind_b2ContactFeature_set_indexB_1=i._emscripten_bind_b2ContactFeature_set_indexB_1,nr=e._emscripten_bind_b2Body_GetLinearVelocityFromWorldPoint_1=i._emscripten_bind_b2Body_GetLinearVelocityFromWorldPoint_1,or=e._emscripten_bind_b2WeldJoint_GetCollideConnected_0=i._emscripten_bind_b2WeldJoint_GetCollideConnected_0,pr=e._emscripten_bind_b2Mat22_set_ey_1=i._emscripten_bind_b2Mat22_set_ey_1,qr=e._emscripten_bind_b2WheelJointDef_set_frequencyHz_1=i._emscripten_bind_b2WheelJointDef_set_frequencyHz_1,rr=e._emscripten_bind_b2World_GetSubStepping_0=i._emscripten_bind_b2World_GetSubStepping_0,sr=e._emscripten_bind_b2Rot_GetYAxis_0=i._emscripten_bind_b2Rot_GetYAxis_0,tr=e._emscripten_bind_b2Contact_GetChildIndexB_0=i._emscripten_bind_b2Contact_GetChildIndexB_0,ur=e._emscripten_bind_b2DistanceJoint___destroy___0=i._emscripten_bind_b2DistanceJoint___destroy___0,vr=e._emscripten_bind_b2EdgeShape_GetType_0=i._emscripten_bind_b2EdgeShape_GetType_0,wr=e._emscripten_bind_b2WheelJointDef_set_dampingRatio_1=i._emscripten_bind_b2WheelJointDef_set_dampingRatio_1,xr=e._emscripten_bind_b2ManifoldPoint___destroy___0=i._emscripten_bind_b2ManifoldPoint___destroy___0,yr=e._emscripten_enum_b2JointType_e_prismaticJoint=i._emscripten_enum_b2JointType_e_prismaticJoint,zr=e._emscripten_bind_b2MotorJoint_GetNext_0=i._emscripten_bind_b2MotorJoint_GetNext_0,Ar=e._emscripten_bind_b2Vec2_Length_0=i._emscripten_bind_b2Vec2_Length_0,Br=e._emscripten_bind_b2Vec2_SetZero_0=i._emscripten_bind_b2Vec2_SetZero_0,Cr=e._emscripten_bind_b2RopeJoint___destroy___0=i._emscripten_bind_b2RopeJoint___destroy___0,Dr=e._emscripten_bind_b2World_DestroyJoint_1=i._emscripten_bind_b2World_DestroyJoint_1,Er=e._emscripten_bind_b2JointDef_set_bodyB_1=i._emscripten_bind_b2JointDef_set_bodyB_1,Fr=e._emscripten_bind_b2Mat22_Set_2=i._emscripten_bind_b2Mat22_Set_2,Gr=e._emscripten_bind_b2Body_GetType_0=i._emscripten_bind_b2Body_GetType_0,Hr=e._emscripten_bind_b2WeldJoint_GetAnchorB_0=i._emscripten_bind_b2WeldJoint_GetAnchorB_0,Ir=e._emscripten_bind_b2WeldJoint_GetNext_0=i._emscripten_bind_b2WeldJoint_GetNext_0,Jr=e._emscripten_bind_b2Shape_get_m_radius_0=i._emscripten_bind_b2Shape_get_m_radius_0,Kr=e._emscripten_bind_b2EdgeShape_ComputeAABB_3=i._emscripten_bind_b2EdgeShape_ComputeAABB_3,Lr=e._emscripten_bind_b2BodyDef_get_type_0=i._emscripten_bind_b2BodyDef_get_type_0,Mr=e._emscripten_bind_b2WheelJointDef_set_collideConnected_1=i._emscripten_bind_b2WheelJointDef_set_collideConnected_1,Nr=e._emscripten_bind_JSDestructionListener___destroy___0=i._emscripten_bind_JSDestructionListener___destroy___0,Or=e._emscripten_bind_b2MotorJointDef_get_type_0=i._emscripten_bind_b2MotorJointDef_get_type_0,Pr=e._emscripten_bind_b2RopeJoint_GetLocalAnchorA_0=i._emscripten_bind_b2RopeJoint_GetLocalAnchorA_0,Qr=e._emscripten_bind_b2BodyDef_set_linearDamping_1=i._emscripten_bind_b2BodyDef_set_linearDamping_1,Rr=e._emscripten_bind_b2FrictionJoint_GetUserData_0=i._emscripten_bind_b2FrictionJoint_GetUserData_0,Sr=e._emscripten_bind_b2Contact_SetFriction_1=i._emscripten_bind_b2Contact_SetFriction_1,Tr=e._emscripten_bind_b2Manifold_set_localNormal_1=i._emscripten_bind_b2Manifold_set_localNormal_1,Ur=e._emscripten_bind_b2JointDef_get_bodyA_0=i._emscripten_bind_b2JointDef_get_bodyA_0,Vr=e._emscripten_bind_b2Body_GetLinearDamping_0=i._emscripten_bind_b2Body_GetLinearDamping_0,Wr=e._emscripten_bind_b2WeldJointDef_set_frequencyHz_1=i._emscripten_bind_b2WeldJointDef_set_frequencyHz_1,Xr=e._emscripten_bind_b2Body_ResetMassData_0=i._emscripten_bind_b2Body_ResetMassData_0,Yr=e._emscripten_bind_b2PrismaticJointDef_set_enableMotor_1=i._emscripten_bind_b2PrismaticJointDef_set_enableMotor_1,Zr=e._emscripten_enum_b2JointType_e_wheelJoint=i._emscripten_enum_b2JointType_e_wheelJoint,$r=e._emscripten_bind_b2Vec2_Skew_0=i._emscripten_bind_b2Vec2_Skew_0,as=e._emscripten_bind_b2MouseJoint_GetDampingRatio_0=i._emscripten_bind_b2MouseJoint_GetDampingRatio_0,bs=e._emscripten_bind_b2RevoluteJoint_GetAnchorA_0=i._emscripten_bind_b2RevoluteJoint_GetAnchorA_0,cs=e._emscripten_bind_b2ChainShape_set_m_prevVertex_1=i._emscripten_bind_b2ChainShape_set_m_prevVertex_1,ds=e._emscripten_bind_b2WheelJoint_GetAnchorA_0=i._emscripten_bind_b2WheelJoint_GetAnchorA_0,es=e._emscripten_bind_b2MotorJoint_GetMaxTorque_0=i._emscripten_bind_b2MotorJoint_GetMaxTorque_0,fs=e._emscripten_bind_b2FrictionJoint_GetNext_0=i._emscripten_bind_b2FrictionJoint_GetNext_0,gs=e._emscripten_bind_b2PrismaticJointDef_set_userData_1=i._emscripten_bind_b2PrismaticJointDef_set_userData_1,hs=e._emscripten_bind_b2FrictionJointDef_set_type_1=i._emscripten_bind_b2FrictionJointDef_set_type_1,is=e._emscripten_bind_b2PrismaticJoint_GetUserData_0=i._emscripten_bind_b2PrismaticJoint_GetUserData_0,js=e._emscripten_bind_b2FrictionJointDef_get_collideConnected_0=i._emscripten_bind_b2FrictionJointDef_get_collideConnected_0,ks=e._emscripten_bind_b2Body_GetInertia_0=i._emscripten_bind_b2Body_GetInertia_0,ls=e._emscripten_bind_b2WeldJointDef_set_referenceAngle_1=i._emscripten_bind_b2WeldJointDef_set_referenceAngle_1,ms=e._emscripten_bind_b2FrictionJoint_GetAnchorA_0=i._emscripten_bind_b2FrictionJoint_GetAnchorA_0,ns=e._emscripten_bind_b2RopeJoint_GetType_0=i._emscripten_bind_b2RopeJoint_GetType_0,os=e._emscripten_bind_b2MassData_get_I_0=i._emscripten_bind_b2MassData_get_I_0,ps=e._emscripten_bind_b2WheelJointDef_get_motorSpeed_0=i._emscripten_bind_b2WheelJointDef_get_motorSpeed_0,qs=e._emscripten_bind_b2WeldJointDef_get_referenceAngle_0=i._emscripten_bind_b2WeldJointDef_get_referenceAngle_0,rs=e._emscripten_enum_b2JointType_e_ropeJoint=i._emscripten_enum_b2JointType_e_ropeJoint,ss=e._emscripten_bind_b2Filter_set_maskBits_1=i._emscripten_bind_b2Filter_set_maskBits_1,ts=e._emscripten_bind_b2EdgeShape_set_m_radius_1=i._emscripten_bind_b2EdgeShape_set_m_radius_1,us=e._emscripten_bind_b2MotorJointDef_set_collideConnected_1=i._emscripten_bind_b2MotorJointDef_set_collideConnected_1,vs=e._emscripten_bind_b2Mat22_b2Mat22_2=i._emscripten_bind_b2Mat22_b2Mat22_2,xs=e._emscripten_bind_b2WheelJointDef_set_maxMotorTorque_1=i._emscripten_bind_b2WheelJointDef_set_maxMotorTorque_1,ys=e._emscripten_bind_b2FrictionJointDef_set_bodyB_1=i._emscripten_bind_b2FrictionJointDef_set_bodyB_1,zs=e._emscripten_bind_b2Mat22_b2Mat22_4=i._emscripten_bind_b2Mat22_b2Mat22_4,As=e._emscripten_bind_b2ChainShape_set_m_hasNextVertex_1=i._emscripten_bind_b2ChainShape_set_m_hasNextVertex_1,Bs=e._emscripten_bind_b2Mat22_GetInverse_0=i._emscripten_bind_b2Mat22_GetInverse_0,Cs=e._emscripten_bind_b2PrismaticJoint_EnableMotor_1=i._emscripten_bind_b2PrismaticJoint_EnableMotor_1,Ds=e._emscripten_bind_b2CircleShape_get_m_type_0=i._emscripten_bind_b2CircleShape_get_m_type_0,Es=e._emscripten_bind_b2DistanceJoint_GetLocalAnchorA_0=i._emscripten_bind_b2DistanceJoint_GetLocalAnchorA_0,Fs=e._emscripten_bind_b2ContactEdge_b2ContactEdge_0=i._emscripten_bind_b2ContactEdge_b2ContactEdge_0,Gs=e._emscripten_bind_b2BodyDef___destroy___0=i._emscripten_bind_b2BodyDef___destroy___0,Hs=e._emscripten_bind_b2FrictionJointDef_set_maxTorque_1=i._emscripten_bind_b2FrictionJointDef_set_maxTorque_1,Is=e._emscripten_bind_b2PolygonShape_GetVertex_1=i._emscripten_bind_b2PolygonShape_GetVertex_1,Js=e._emscripten_bind_b2PulleyJointDef_set_groundAnchorB_1=i._emscripten_bind_b2PulleyJointDef_set_groundAnchorB_1,Ks=e._emscripten_bind_b2RevoluteJointDef_get_collideConnected_0=i._emscripten_bind_b2RevoluteJointDef_get_collideConnected_0,Ls=e._emscripten_bind_b2DistanceJointDef_set_bodyA_1=i._emscripten_bind_b2DistanceJointDef_set_bodyA_1,Ms=e._emscripten_bind_b2RevoluteJoint_SetLimits_2=i._emscripten_bind_b2RevoluteJoint_SetLimits_2,Ns=e._emscripten_bind_b2WeldJointDef_set_type_1=i._emscripten_bind_b2WeldJointDef_set_type_1,Os=e._emscripten_bind_b2MotorJointDef___destroy___0=i._emscripten_bind_b2MotorJointDef___destroy___0,Ps=e._emscripten_bind_b2FixtureDef_set_density_1=i._emscripten_bind_b2FixtureDef_set_density_1,Qs=e._emscripten_bind_b2Shape_set_m_type_1=i._emscripten_bind_b2Shape_set_m_type_1,Rs=e._emscripten_bind_b2WheelJoint_GetJointTranslation_0=i._emscripten_bind_b2WheelJoint_GetJointTranslation_0,Ss=e._emscripten_bind_b2WheelJoint_GetMotorTorque_1=i._emscripten_bind_b2WheelJoint_GetMotorTorque_1,Ts=e._emscripten_bind_b2RopeJoint_SetUserData_1=i._emscripten_bind_b2RopeJoint_SetUserData_1,Us=e._emscripten_bind_b2RopeJointDef___destroy___0=i._emscripten_bind_b2RopeJointDef___destroy___0,Vs=e._emscripten_bind_b2WheelJoint_IsActive_0=i._emscripten_bind_b2WheelJoint_IsActive_0,Ws=e._emscripten_bind_b2PrismaticJointDef_get_enableMotor_0=i._emscripten_bind_b2PrismaticJointDef_get_enableMotor_0,Xs=e._emscripten_bind_b2MotorJointDef_set_bodyB_1=i._emscripten_bind_b2MotorJointDef_set_bodyB_1,Ys=e._emscripten_bind_b2Transform_b2Transform_2=i._emscripten_bind_b2Transform_b2Transform_2,Zs=e._emscripten_bind_b2WeldJoint_GetReactionForce_1=i._emscripten_bind_b2WeldJoint_GetReactionForce_1,$s=e._emscripten_bind_b2ChainShape_RayCast_4=i._emscripten_bind_b2ChainShape_RayCast_4,at=e._emscripten_bind_b2PrismaticJoint_GetUpperLimit_0=i._emscripten_bind_b2PrismaticJoint_GetUpperLimit_0,bt=e._emscripten_bind_b2ContactID_get_cf_0=i._emscripten_bind_b2ContactID_get_cf_0,ct=e._emscripten_bind_b2MouseJointDef_set_frequencyHz_1=i._emscripten_bind_b2MouseJointDef_set_frequencyHz_1,dt=e._emscripten_bind_b2ChainShape_get_m_radius_0=i._emscripten_bind_b2ChainShape_get_m_radius_0,et=e._emscripten_bind_b2Body_GetLinearVelocity_0=i._emscripten_bind_b2Body_GetLinearVelocity_0,ft=e._emscripten_bind_b2ChainShape_set_m_radius_1=i._emscripten_bind_b2ChainShape_set_m_radius_1,gt=e._emscripten_bind_b2DistanceJoint_GetReactionTorque_1=i._emscripten_bind_b2DistanceJoint_GetReactionTorque_1,ht=e._emscripten_bind_b2World_Dump_0=i._emscripten_bind_b2World_Dump_0,it=e._emscripten_bind_b2RevoluteJoint_GetLocalAnchorB_0=i._emscripten_bind_b2RevoluteJoint_GetLocalAnchorB_0,jt=e._emscripten_bind_JSContactFilter_JSContactFilter_0=i._emscripten_bind_JSContactFilter_JSContactFilter_0,kt=e._emscripten_bind_b2Profile_set_solve_1=i._emscripten_bind_b2Profile_set_solve_1,lt=e._emscripten_bind_b2WeldJoint_GetDampingRatio_0=i._emscripten_bind_b2WeldJoint_GetDampingRatio_0,mt=e._emscripten_bind_b2Color_get_b_0=i._emscripten_bind_b2Color_get_b_0,nt=e._emscripten_bind_b2MouseJointDef_get_userData_0=i._emscripten_bind_b2MouseJointDef_get_userData_0,ot=e._emscripten_bind_b2CircleShape_ComputeAABB_3=i._emscripten_bind_b2CircleShape_ComputeAABB_3,pt=e._emscripten_bind_b2RopeJoint_GetReactionForce_1=i._emscripten_bind_b2RopeJoint_GetReactionForce_1,qt=e._emscripten_bind_b2PrismaticJointDef_get_enableLimit_0=i._emscripten_bind_b2PrismaticJointDef_get_enableLimit_0,rt=e._emscripten_bind_b2ManifoldPoint_set_localPoint_1=i._emscripten_bind_b2ManifoldPoint_set_localPoint_1,st=e._emscripten_bind_b2Fixture_GetFilterData_0=i._emscripten_bind_b2Fixture_GetFilterData_0,tt=e._emscripten_bind_b2World_GetBodyList_0=i._emscripten_bind_b2World_GetBodyList_0,ut=e._emscripten_bind_b2Shape_ComputeMass_2=i._emscripten_bind_b2Shape_ComputeMass_2,vt=e._emscripten_bind_b2Joint_GetNext_0=i._emscripten_bind_b2Joint_GetNext_0,wt=e._emscripten_bind_b2PrismaticJointDef_get_collideConnected_0=i._emscripten_bind_b2PrismaticJointDef_get_collideConnected_0,xt=e._emscripten_bind_b2World_RayCast_3=i._emscripten_bind_b2World_RayCast_3,yt=e._emscripten_bind_b2MassData_set_I_1=i._emscripten_bind_b2MassData_set_I_1,zt=e._emscripten_bind_b2MassData___destroy___0=i._emscripten_bind_b2MassData___destroy___0,At=e._emscripten_bind_b2Profile_get_collide_0=i._emscripten_bind_b2Profile_get_collide_0,Bt=e._emscripten_bind_b2Color_b2Color_3=i._emscripten_bind_b2Color_b2Color_3,Ct=e._emscripten_bind_b2Color_b2Color_0=i._emscripten_bind_b2Color_b2Color_0,Dt=e._emscripten_bind_b2MouseJoint_GetFrequency_0=i._emscripten_bind_b2MouseJoint_GetFrequency_0,Et=e._emscripten_bind_b2WeldJointDef_Initialize_3=i._emscripten_bind_b2WeldJointDef_Initialize_3,Ft=e._emscripten_bind_b2Shape_GetChildCount_0=i._emscripten_bind_b2Shape_GetChildCount_0,Gt=e._emscripten_enum_b2JointType_e_gearJoint=i._emscripten_enum_b2JointType_e_gearJoint,Ht=e._emscripten_bind_b2FixtureDef_get_friction_0=i._emscripten_bind_b2FixtureDef_get_friction_0,It=e._emscripten_bind_b2PrismaticJointDef_set_localAnchorA_1=i._emscripten_bind_b2PrismaticJointDef_set_localAnchorA_1,Jt=e._emscripten_bind_b2Contact_GetManifold_0=i._emscripten_bind_b2Contact_GetManifold_0,Kt=e._emscripten_bind_b2MouseJoint_GetTarget_0=i._emscripten_bind_b2MouseJoint_GetTarget_0,Lt=e._emscripten_bind_b2WeldJointDef_get_localAnchorA_0=i._emscripten_bind_b2WeldJointDef_get_localAnchorA_0,Mt=e._emscripten_bind_b2MouseJoint_SetUserData_1=i._emscripten_bind_b2MouseJoint_SetUserData_1,Nt=e._emscripten_bind_b2JointEdge_get_other_0=i._emscripten_bind_b2JointEdge_get_other_0,Ot=e._emscripten_bind_b2ChainShape_GetChildEdge_2=i._emscripten_bind_b2ChainShape_GetChildEdge_2,Pt=e._emscripten_bind_b2GearJointDef_set_collideConnected_1=i._emscripten_bind_b2GearJointDef_set_collideConnected_1,Qt=e._emscripten_bind_b2MotorJointDef_get_angularOffset_0=i._emscripten_bind_b2MotorJointDef_get_angularOffset_0,Rt=e._emscripten_bind_b2WheelJoint_SetUserData_1=i._emscripten_bind_b2WheelJoint_SetUserData_1,St=e._emscripten_bind_b2Body_ApplyForce_3=i._emscripten_bind_b2Body_ApplyForce_3,Tt=e._emscripten_bind_b2PrismaticJoint_SetMotorSpeed_1=i._emscripten_bind_b2PrismaticJoint_SetMotorSpeed_1,Ut=e._emscripten_bind_b2DistanceJoint_GetCollideConnected_0=i._emscripten_bind_b2DistanceJoint_GetCollideConnected_0,Vt=e._emscripten_bind_b2MouseJoint_GetMaxForce_0=i._emscripten_bind_b2MouseJoint_GetMaxForce_0,Wt=e._emscripten_bind_b2World_SetGravity_1=i._emscripten_bind_b2World_SetGravity_1,Xt=e._emscripten_bind_b2Mat22_SetZero_0=i._emscripten_bind_b2Mat22_SetZero_0,Yt=e._emscripten_bind_b2Contact_GetChildIndexA_0=i._emscripten_bind_b2Contact_GetChildIndexA_0,Zt=e._emscripten_bind_b2Fixture_SetRestitution_1=i._emscripten_bind_b2Fixture_SetRestitution_1,$t=e._emscripten_bind_b2Body_GetTransform_0=i._emscripten_bind_b2Body_GetTransform_0,au=e._emscripten_bind_b2ContactEdge___destroy___0=i._emscripten_bind_b2ContactEdge___destroy___0,bu=e._emscripten_bind_b2Mat33_set_ex_1=i._emscripten_bind_b2Mat33_set_ex_1,cu=e._emscripten_bind_b2AABB_GetExtents_0=i._emscripten_bind_b2AABB_GetExtents_0,du=e._emscripten_bind_b2RevoluteJointDef_get_bodyA_0=i._emscripten_bind_b2RevoluteJointDef_get_bodyA_0,eu=e._emscripten_bind_b2PrismaticJoint_GetBodyB_0=i._emscripten_bind_b2PrismaticJoint_GetBodyB_0,fu=e._emscripten_bind_b2WheelJointDef_set_bodyA_1=i._emscripten_bind_b2WheelJointDef_set_bodyA_1,gu=e._emscripten_bind_b2DistanceJointDef_set_collideConnected_1=i._emscripten_bind_b2DistanceJointDef_set_collideConnected_1,hu=e._emscripten_bind_b2BodyDef_get_angle_0=i._emscripten_bind_b2BodyDef_get_angle_0,iu=e._emscripten_bind_b2PulleyJoint_GetReactionTorque_1=i._emscripten_bind_b2PulleyJoint_GetReactionTorque_1,ju=e._emscripten_bind_b2FixtureDef_get_shape_0=i._emscripten_bind_b2FixtureDef_get_shape_0,ku=e._emscripten_bind_b2WeldJointDef_get_userData_0=i._emscripten_bind_b2WeldJointDef_get_userData_0,lu=e._emscripten_bind_b2FrictionJoint_SetMaxForce_1=i._emscripten_bind_b2FrictionJoint_SetMaxForce_1,mu=e._emscripten_bind_b2Mat33_b2Mat33_3=i._emscripten_bind_b2Mat33_b2Mat33_3,nu=e._emscripten_bind_b2Vec3_get_y_0=i._emscripten_bind_b2Vec3_get_y_0,ou=e._emscripten_bind_b2JointDef_get_type_0=i._emscripten_bind_b2JointDef_get_type_0,pu=e._emscripten_bind_JSQueryCallback_ReportFixture_1=i._emscripten_bind_JSQueryCallback_ReportFixture_1,qu=e._emscripten_bind_b2Fixture_TestPoint_1=i._emscripten_bind_b2Fixture_TestPoint_1,ru=e._emscripten_bind_b2RevoluteJoint_GetCollideConnected_0=i._emscripten_bind_b2RevoluteJoint_GetCollideConnected_0,su=e._emscripten_bind_JSDraw_JSDraw_0=i._emscripten_bind_JSDraw_JSDraw_0,tu=e._emscripten_bind_b2MouseJoint_GetAnchorA_0=i._emscripten_bind_b2MouseJoint_GetAnchorA_0,uu=e._emscripten_bind_b2Transform_get_p_0=i._emscripten_bind_b2Transform_get_p_0,vu=e._emscripten_bind_b2EdgeShape_ComputeMass_2=i._emscripten_bind_b2EdgeShape_ComputeMass_2,wu=e._emscripten_bind_b2World_GetProfile_0=i._emscripten_bind_b2World_GetProfile_0,xu=e._emscripten_bind_b2DistanceJointDef___destroy___0=i._emscripten_bind_b2DistanceJointDef___destroy___0,yu=e._emscripten_bind_b2RopeJointDef_set_bodyA_1=i._emscripten_bind_b2RopeJointDef_set_bodyA_1,zu=e._emscripten_bind_b2JointDef_set_type_1=i._emscripten_bind_b2JointDef_set_type_1,Au=e._emscripten_bind_b2Draw_AppendFlags_1=i._emscripten_bind_b2Draw_AppendFlags_1,Bu=e._emscripten_bind_b2MotorJointDef_get_userData_0=i._emscripten_bind_b2MotorJointDef_get_userData_0,Cu=e._emscripten_bind_b2World_GetContactList_0=i._emscripten_bind_b2World_GetContactList_0,Du=e._emscripten_bind_b2Mat33_set_ez_1=i._emscripten_bind_b2Mat33_set_ez_1,Eu=e._emscripten_bind_b2JointEdge_b2JointEdge_0=i._emscripten_bind_b2JointEdge_b2JointEdge_0,Fu=e._emscripten_bind_b2FrictionJointDef_get_bodyA_0=i._emscripten_bind_b2FrictionJointDef_get_bodyA_0,Gu=e._emscripten_bind_b2WheelJointDef_get_type_0=i._emscripten_bind_b2WheelJointDef_get_type_0,Hu=e._emscripten_bind_b2RevoluteJoint_GetReactionForce_1=i._emscripten_bind_b2RevoluteJoint_GetReactionForce_1,Iu=e._emscripten_bind_b2PulleyJointDef_set_collideConnected_1=i._emscripten_bind_b2PulleyJointDef_set_collideConnected_1,Ju=e._emscripten_bind_b2RopeJoint_GetCollideConnected_0=i._emscripten_bind_b2RopeJoint_GetCollideConnected_0,Ku=e._emscripten_bind_b2GearJointDef_set_joint2_1=i._emscripten_bind_b2GearJointDef_set_joint2_1,Lu=e._emscripten_bind_b2BodyDef_set_userData_1=i._emscripten_bind_b2BodyDef_set_userData_1,Mu=e._emscripten_bind_b2GearJoint_GetAnchorB_0=i._emscripten_bind_b2GearJoint_GetAnchorB_0,Nu=e._emscripten_bind_b2RopeJoint_IsActive_0=i._emscripten_bind_b2RopeJoint_IsActive_0,Ou=e._emscripten_bind_b2Fixture_GetFriction_0=i._emscripten_bind_b2Fixture_GetFriction_0,Pu=e._emscripten_enum_b2DrawFlag_e_aabbBit=i._emscripten_enum_b2DrawFlag_e_aabbBit,Qu=e._emscripten_bind_b2RevoluteJointDef_Initialize_3=i._emscripten_bind_b2RevoluteJointDef_Initialize_3,Ru=e._emscripten_bind_b2Body_GetAngle_0=i._emscripten_bind_b2Body_GetAngle_0,Su=e._emscripten_bind_b2EdgeShape_Set_2=i._emscripten_bind_b2EdgeShape_Set_2,Tu=e._emscripten_bind_b2Mat33_SetZero_0=i._emscripten_bind_b2Mat33_SetZero_0,Uu=e._emscripten_bind_b2MotorJointDef_set_maxTorque_1=i._emscripten_bind_b2MotorJointDef_set_maxTorque_1,Vu=e._emscripten_bind_b2PrismaticJointDef_get_localAxisA_0=i._emscripten_bind_b2PrismaticJointDef_get_localAxisA_0,Wu=e._emscripten_bind_b2Mat22_get_ey_0=i._emscripten_bind_b2Mat22_get_ey_0,Xu=e._emscripten_bind_b2Mat22_SetIdentity_0=i._emscripten_bind_b2Mat22_SetIdentity_0,Yu=e._emscripten_bind_b2Joint_IsActive_0=i._emscripten_bind_b2Joint_IsActive_0,Zu=e._emscripten_bind_b2BodyDef_get_allowSleep_0=i._emscripten_bind_b2BodyDef_get_allowSleep_0,$u=e._emscripten_bind_b2World_GetTreeHeight_0=i._emscripten_bind_b2World_GetTreeHeight_0,av=e._emscripten_bind_b2GearJoint_GetJoint2_0=i._emscripten_bind_b2GearJoint_GetJoint2_0,bv=e._emscripten_bind_b2EdgeShape_set_m_vertex1_1=i._emscripten_bind_b2EdgeShape_set_m_vertex1_1,cv=e._emscripten_bind_b2Body_GetWorld_0=i._emscripten_bind_b2Body_GetWorld_0,dv=e._emscripten_enum_b2LimitState_e_inactiveLimit=i._emscripten_enum_b2LimitState_e_inactiveLimit,ev=e._emscripten_bind_b2PulleyJointDef_set_lengthB_1=i._emscripten_bind_b2PulleyJointDef_set_lengthB_1,fv=e._emscripten_bind_b2Body_SetAwake_1=i._emscripten_bind_b2Body_SetAwake_1,gv=e._emscripten_bind_b2PrismaticJointDef_set_upperTranslation_1=i._emscripten_bind_b2PrismaticJointDef_set_upperTranslation_1,hv=e._emscripten_bind_b2Vec2___destroy___0=i._emscripten_bind_b2Vec2___destroy___0,iv=e._emscripten_bind_b2RayCastInput_set_p1_1=i._emscripten_bind_b2RayCastInput_set_p1_1,jv=e._emscripten_bind_b2Contact_ResetFriction_0=i._emscripten_bind_b2Contact_ResetFriction_0,kv=e._emscripten_bind_b2PulleyJoint_GetAnchorA_0=i._emscripten_bind_b2PulleyJoint_GetAnchorA_0,lv=e._emscripten_bind_b2BodyDef_get_linearVelocity_0=i._emscripten_bind_b2BodyDef_get_linearVelocity_0,mv=e._emscripten_bind_b2DistanceJointDef_get_bodyB_0=i._emscripten_bind_b2DistanceJointDef_get_bodyB_0,nv=e._emscripten_bind_b2Mat22___destroy___0=i._emscripten_bind_b2Mat22___destroy___0,ov=e._emscripten_bind_b2RevoluteJoint_GetAnchorB_0=i._emscripten_bind_b2RevoluteJoint_GetAnchorB_0,pv=e._emscripten_bind_b2RevoluteJoint_GetNext_0=i._emscripten_bind_b2RevoluteJoint_GetNext_0,qv=e._emscripten_bind_b2WeldJointDef_get_bodyA_0=i._emscripten_bind_b2WeldJointDef_get_bodyA_0,rv=e._emscripten_bind_b2MotorJoint_GetAnchorB_0=i._emscripten_bind_b2MotorJoint_GetAnchorB_0,sv=e._emscripten_bind_b2Fixture_GetShape_0=i._emscripten_bind_b2Fixture_GetShape_0,tv=e._emscripten_bind_b2PolygonShape_SetAsBox_2=i._emscripten_bind_b2PolygonShape_SetAsBox_2,uv=e._emscripten_bind_b2Vec3_op_mul_1=i._emscripten_bind_b2Vec3_op_mul_1,vv=e._emscripten_bind_b2PolygonShape_set_m_type_1=i._emscripten_bind_b2PolygonShape_set_m_type_1,wv=e._emscripten_bind_b2WheelJoint_GetType_0=i._emscripten_bind_b2WheelJoint_GetType_0,xv=e._emscripten_bind_b2MotorJoint_GetAngularOffset_0=i._emscripten_bind_b2MotorJoint_GetAngularOffset_0,yv=e._emscripten_bind_b2RevoluteJoint_IsActive_0=i._emscripten_bind_b2RevoluteJoint_IsActive_0,zv=e._emscripten_bind_b2GearJoint_GetNext_0=i._emscripten_bind_b2GearJoint_GetNext_0,Av=e._emscripten_bind_b2MotorJointDef_get_correctionFactor_0=i._emscripten_bind_b2MotorJointDef_get_correctionFactor_0,Bv=e._emscripten_bind_b2Color_Set_3=i._emscripten_bind_b2Color_Set_3,Cv=e._emscripten_bind_b2EdgeShape_set_m_type_1=i._emscripten_bind_b2EdgeShape_set_m_type_1,Dv=e._emscripten_bind_b2WheelJoint_GetLocalAxisA_0=i._emscripten_bind_b2WheelJoint_GetLocalAxisA_0,Ev=e._emscripten_bind_b2Body_GetNext_0=i._emscripten_bind_b2Body_GetNext_0,Fv=e._emscripten_bind_b2RopeJoint_GetBodyA_0=i._emscripten_bind_b2RopeJoint_GetBodyA_0,Gv=e._emscripten_enum_b2JointType_e_unknownJoint=i._emscripten_enum_b2JointType_e_unknownJoint,Hv=e._emscripten_bind_b2ContactFeature_set_indexA_1=i._emscripten_bind_b2ContactFeature_set_indexA_1,Iv=e._emscripten_bind_b2Profile_get_solveInit_0=i._emscripten_bind_b2Profile_get_solveInit_0,Jv=e._emscripten_bind_b2BodyDef_set_angularDamping_1=i._emscripten_bind_b2BodyDef_set_angularDamping_1,Kv=e._emscripten_bind_b2FrictionJoint_GetAnchorB_0=i._emscripten_bind_b2FrictionJoint_GetAnchorB_0,Lv=e._emscripten_bind_b2World_QueryAABB_2=i._emscripten_bind_b2World_QueryAABB_2,Mv=e._emscripten_bind_b2BodyDef_get_userData_0=i._emscripten_bind_b2BodyDef_get_userData_0,Nv=e._emscripten_bind_b2ContactID_get_key_0=i._emscripten_bind_b2ContactID_get_key_0,Ov=e._emscripten_bind_b2Body_SetAngularVelocity_1=i._emscripten_bind_b2Body_SetAngularVelocity_1,Pv=e._emscripten_bind_b2WheelJointDef_get_userData_0=i._emscripten_bind_b2WheelJointDef_get_userData_0,Qv=e._emscripten_bind_b2RevoluteJoint_IsLimitEnabled_0=i._emscripten_bind_b2RevoluteJoint_IsLimitEnabled_0,Rv=e._emscripten_bind_b2DistanceJoint_GetBodyB_0=i._emscripten_bind_b2DistanceJoint_GetBodyB_0,Sv=e._emscripten_bind_b2RevoluteJointDef_set_maxMotorTorque_1=i._emscripten_bind_b2RevoluteJointDef_set_maxMotorTorque_1,Tv=e._emscripten_bind_b2WeldJointDef_set_bodyB_1=i._emscripten_bind_b2WeldJointDef_set_bodyB_1,Uv=e._emscripten_bind_b2RevoluteJoint_SetUserData_1=i._emscripten_bind_b2RevoluteJoint_SetUserData_1,Vv=e._emscripten_bind_b2DistanceJoint_SetLength_1=i._emscripten_bind_b2DistanceJoint_SetLength_1,Wv=e._emscripten_bind_b2JointEdge_get_joint_0=i._emscripten_bind_b2JointEdge_get_joint_0,Xv=e._emscripten_bind_b2Body_GetLocalCenter_0=i._emscripten_bind_b2Body_GetLocalCenter_0,Yv=e._emscripten_bind_b2FixtureDef___destroy___0=i._emscripten_bind_b2FixtureDef___destroy___0,Zv=e._emscripten_bind_b2FixtureDef_set_shape_1=i._emscripten_bind_b2FixtureDef_set_shape_1,$v=e._emscripten_bind_b2WeldJoint_GetAnchorA_0=i._emscripten_bind_b2WeldJoint_GetAnchorA_0,aw=e._emscripten_bind_b2Profile_get_solveVelocity_0=i._emscripten_bind_b2Profile_get_solveVelocity_0,bw=e._emscripten_bind_b2WeldJointDef_get_bodyB_0=i._emscripten_bind_b2WeldJointDef_get_bodyB_0,cw=e._emscripten_bind_b2Body_SetAngularDamping_1=i._emscripten_bind_b2Body_SetAngularDamping_1,dw=e._emscripten_bind_b2PulleyJointDef_Initialize_7=i._emscripten_bind_b2PulleyJointDef_Initialize_7,ew=e._emscripten_bind_b2GearJointDef_set_bodyB_1=i._emscripten_bind_b2GearJointDef_set_bodyB_1,fw=e._emscripten_bind_b2RopeJoint_GetReactionTorque_1=i._emscripten_bind_b2RopeJoint_GetReactionTorque_1,gw=e._emscripten_bind_b2Mat22_set_ex_1=i._emscripten_bind_b2Mat22_set_ex_1,hw=e._emscripten_bind_b2GearJoint_GetType_0=i._emscripten_bind_b2GearJoint_GetType_0,iw=e._emscripten_enum_b2DrawFlag_e_centerOfMassBit=i._emscripten_enum_b2DrawFlag_e_centerOfMassBit,jw=e._emscripten_bind_b2ChainShape_b2ChainShape_0=i._emscripten_bind_b2ChainShape_b2ChainShape_0,kw=e._emscripten_bind_b2RevoluteJoint_SetMaxMotorTorque_1=i._emscripten_bind_b2RevoluteJoint_SetMaxMotorTorque_1,lw=e._emscripten_bind_b2RopeJointDef_set_localAnchorB_1=i._emscripten_bind_b2RopeJointDef_set_localAnchorB_1,mw=e._emscripten_bind_b2FrictionJointDef_Initialize_3=i._emscripten_bind_b2FrictionJointDef_Initialize_3,nw=e._emscripten_bind_b2GearJointDef_set_userData_1=i._emscripten_bind_b2GearJointDef_set_userData_1,ow=e._emscripten_bind_b2ChainShape_CreateLoop_2=i._emscripten_bind_b2ChainShape_CreateLoop_2,pw=e._emscripten_bind_b2EdgeShape_get_m_radius_0=i._emscripten_bind_b2EdgeShape_get_m_radius_0,qw=e._emscripten_bind_b2Contact_GetFixtureB_0=i._emscripten_bind_b2Contact_GetFixtureB_0,rw=e._emscripten_bind_b2ChainShape_ComputeMass_2=i._emscripten_bind_b2ChainShape_ComputeMass_2,sw=e._emscripten_bind_b2Vec2_set_y_1=i._emscripten_bind_b2Vec2_set_y_1,tw=e._emscripten_bind_b2PrismaticJoint_IsLimitEnabled_0=i._emscripten_bind_b2PrismaticJoint_IsLimitEnabled_0,uw=e._emscripten_bind_b2RopeJointDef_get_bodyB_0=i._emscripten_bind_b2RopeJointDef_get_bodyB_0,vw=e._emscripten_bind_b2BodyDef_b2BodyDef_0=i._emscripten_bind_b2BodyDef_b2BodyDef_0,ww=e._emscripten_bind_b2MassData_get_mass_0=i._emscripten_bind_b2MassData_get_mass_0,xw=e._emscripten_bind_b2WheelJoint___destroy___0=i._emscripten_bind_b2WheelJoint___destroy___0,yw=e._emscripten_bind_b2Joint_GetBodyB_0=i._emscripten_bind_b2Joint_GetBodyB_0,zw=e._emscripten_bind_b2MouseJointDef_set_collideConnected_1=i._emscripten_bind_b2MouseJointDef_set_collideConnected_1,Aw=e._emscripten_bind_b2WheelJointDef_set_localAxisA_1=i._emscripten_bind_b2WheelJointDef_set_localAxisA_1,Bw=e._emscripten_bind_b2Joint_Dump_0=i._emscripten_bind_b2Joint_Dump_0,Cw=e._emscripten_bind_b2WheelJointDef_b2WheelJointDef_0=i._emscripten_bind_b2WheelJointDef_b2WheelJointDef_0,Dw=e._emscripten_bind_b2RevoluteJointDef_set_motorSpeed_1=i._emscripten_bind_b2RevoluteJointDef_set_motorSpeed_1,Ew=e._emscripten_bind_b2MotorJointDef_get_bodyA_0=i._emscripten_bind_b2MotorJointDef_get_bodyA_0,Fw=e._emscripten_bind_b2WheelJointDef_get_enableMotor_0=i._emscripten_bind_b2WheelJointDef_get_enableMotor_0,Gw=e._emscripten_bind_b2Vec2_LengthSquared_0=i._emscripten_bind_b2Vec2_LengthSquared_0,Hw=e._emscripten_bind_b2FrictionJointDef_set_bodyA_1=i._emscripten_bind_b2FrictionJointDef_set_bodyA_1,Iw=e._emscripten_bind_b2WheelJoint_GetSpringFrequencyHz_0=i._emscripten_bind_b2WheelJoint_GetSpringFrequencyHz_0,Jw=e._emscripten_bind_b2ContactFeature_get_indexB_0=i._emscripten_bind_b2ContactFeature_get_indexB_0,Kw=e._emscripten_bind_b2Body_GetJointList_0=i._emscripten_bind_b2Body_GetJointList_0,Lw=e._emscripten_bind_b2FrictionJoint_GetBodyA_0=i._emscripten_bind_b2FrictionJoint_GetBodyA_0,Mw=e._emscripten_bind_b2WheelJointDef_set_localAnchorB_1=i._emscripten_bind_b2WheelJointDef_set_localAnchorB_1,Nw=e._emscripten_bind_b2DistanceJointDef_set_localAnchorA_1=i._emscripten_bind_b2DistanceJointDef_set_localAnchorA_1,Ow=e._emscripten_bind_b2PrismaticJointDef_get_maxMotorForce_0=i._emscripten_bind_b2PrismaticJointDef_get_maxMotorForce_0,Pw=e._emscripten_bind_b2Body_SetUserData_1=i._emscripten_bind_b2Body_SetUserData_1,Qw=e._emscripten_bind_b2DistanceJoint_GetUserData_0=i._emscripten_bind_b2DistanceJoint_GetUserData_0,Rw=e._emscripten_bind_b2PulleyJointDef_set_bodyA_1=i._emscripten_bind_b2PulleyJointDef_set_bodyA_1,Sw=e._emscripten_bind_b2Joint_GetType_0=i._emscripten_bind_b2Joint_GetType_0,Tw=e._emscripten_bind_b2Manifold_get_pointCount_0=i._emscripten_bind_b2Manifold_get_pointCount_0,Uw=e._emscripten_bind_b2Mat33_get_ez_0=i._emscripten_bind_b2Mat33_get_ez_0,Vw=e._emscripten_bind_b2DestructionListenerWrapper___destroy___0=i._emscripten_bind_b2DestructionListenerWrapper___destroy___0,Ww=e._emscripten_bind_b2WheelJointDef_get_bodyA_0=i._emscripten_bind_b2WheelJointDef_get_bodyA_0,Xw=e._emscripten_enum_b2LimitState_e_atUpperLimit=i._emscripten_enum_b2LimitState_e_atUpperLimit,Yw=e._emscripten_bind_b2PulleyJointDef_set_groundAnchorA_1=i._emscripten_bind_b2PulleyJointDef_set_groundAnchorA_1,Zw=e._emscripten_bind_b2MouseJointDef_get_type_0=i._emscripten_bind_b2MouseJointDef_get_type_0,$w=e._emscripten_bind_b2PrismaticJoint_SetMaxMotorForce_1=i._emscripten_bind_b2PrismaticJoint_SetMaxMotorForce_1,ax=e._emscripten_bind_b2PulleyJointDef_get_collideConnected_0=i._emscripten_bind_b2PulleyJointDef_get_collideConnected_0,bx=e._emscripten_bind_b2RopeJoint_SetMaxLength_1=i._emscripten_bind_b2RopeJoint_SetMaxLength_1,cx=e._emscripten_bind_b2Joint_SetUserData_1=i._emscripten_bind_b2Joint_SetUserData_1,dx=e._emscripten_bind_b2PolygonShape_set_m_radius_1=i._emscripten_bind_b2PolygonShape_set_m_radius_1,ex=e._emscripten_bind_b2Vec2_get_x_0=i._emscripten_bind_b2Vec2_get_x_0,fx=e._emscripten_bind_JSContactListener_JSContactListener_0=i._emscripten_bind_JSContactListener_JSContactListener_0;e.runPostSets=i.runPostSets,e.dynCall_iiii=i.dynCall_iiii,e.dynCall_viiiii=i.dynCall_viiiii,e.dynCall_did=i.dynCall_did,e.dynCall_vi=i.dynCall_vi,e.dynCall_diiiid=i.dynCall_diiiid,e.dynCall_vii=i.dynCall_vii,e.dynCall_viidii=i.dynCall_viidii,e.dynCall_ii=i.dynCall_ii,e.dynCall_viidi=i.dynCall_viidi,e.dynCall_viii=i.dynCall_viii,e.dynCall_v=i.dynCall_v,e.dynCall_viid=i.dynCall_viid,e.dynCall_viiiiii=i.dynCall_viiiiii,e.dynCall_iii=i.dynCall_iii,e.dynCall_iiiiii=i.dynCall_iiiiii,e.dynCall_viiii=i.dynCall_viiii,h.u=i.stackAlloc,h.A=i.stackSave,h.J=i.stackRestore,h.ga=i.setTempRet0,h.aa=i.getTempRet0;var jc=ba;if(Nb)if("function"==typeof e.locateFile?Nb=e.locateFile(Nb):e.memoryInitializerPrefixURL&&(Nb=e.memoryInitializerPrefixURL+Nb),fa||ja){var gx=e.readBinary(Nb);bb.set(gx,jb)}else Lb(),Browser.oa(Nb,function(e){bb.set(e,jb),Mb()},function(){c("could not load memory initializer "+Nb)});function na(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}na.prototype=Error();var hx,ix=ba,Kb=function t(){!e.calledRun&&kx&&lx(),e.calledRun||(Kb=t)};function lx(t){function n(){if(!e.calledRun&&(e.calledRun=aa,!za)){if(wb||(wb=aa,qb(sb)),qb(tb),ga&&ix!==ba&&e.n("pre-main prep time: "+(Date.now()-ix)+" ms"),e._main&&kx&&e.callMain(t),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)zb(e.postRun.shift());qb(vb)}}if(t=t||e.arguments,ix===ba&&(ix=Date.now()),!(0<Ib)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)yb(e.preRun.shift());qb(rb),!(0<Ib)&&!e.calledRun&&(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),n()},1)):n())}}function mx(t){e.noExitRuntime||(za=aa,ra=hx,qb(ub),fa?(process.stdout.once("drain",function(){process.exit(t)}),console.log(" "),setTimeout(function(){process.exit(t)},500)):ja&&"function"==typeof quit&&quit(t),c(new na(t)))}function ua(t){t&&(e.print(t),e.n(t)),za=aa,c("abort() at "+fb()+"\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.")}if(e.callMain=e.pa=function(t){function n(){for(var e=0;3>e;e++)r.push(0)}oa(0==Ib,"cannot call main when async dependencies remain! (listen on __ATMAIN__)"),oa(0==rb.length,"cannot call main when preRun functions remain to be called"),t=t||[],wb||(wb=aa,qb(sb));var i=t.length+1,r=[$a(Ab(e.thisProgram),"i8",0)];n();for(var _=0;_<i-1;_+=1)r.push($a(Ab(t[_]),"i8",0)),n();r.push(0),r=$a(r,"i32",0),hx=ra;try{mx(e._main(i,r,0))}catch(o){o instanceof na||("SimulateInfiniteLoop"==o?e.noExitRuntime=aa:(o&&"object"==typeof o&&o.stack&&e.n("exception thrown: "+[o,o.stack]),c(o)))}},e.run=e.Aa=lx,e.exit=e.ra=mx,e.abort=e.abort=ua,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();var kx=aa;function j(){}function p(e){return(e||j).k}function q(e,t){var n=p(t),i=n[e];return i||((i=Object.create((t||j).prototype)).e=e,n[e]=i)}function nx(e,t){return q(e.e,t)}function ox(e){e.__destroy__||c("Error: Cannot destroy object. (Did you create it yourself?)"),e.__destroy__(),delete p(e.g)[e.e]}function px(e,t){return e.e===t.e}function qx(e){return e.e}function rx(e){return e.g}function r(e){return"string"==typeof e?$a(Ab(e),"i8",Wa):e}function sx(){this.e=yf(),p(sx)[this.e]=this}function ux(){c("cannot construct a b2ContactImpulse, no constructor in IDL")}function s(){c("cannot construct a b2DistanceJoint, no constructor in IDL")}function vx(e,t,n){e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),this.e=e===d?Yg():t===d?_emscripten_bind_b2Mat33_b2Mat33_1(e):n===d?_emscripten_bind_b2Mat33_b2Mat33_2(e,t):mu(e,t,n),p(vx)[this.e]=this}function w(){c("cannot construct a b2Fixture, no constructor in IDL")}function yx(){this.e=Ap(),p(yx)[this.e]=this}function Ax(){this.e=iq(),p(Ax)[this.e]=this}function y(){c("cannot construct a b2MouseJoint, no constructor in IDL")}function Cx(e){e=e&&"object"==typeof e?e.e:r(e),this.e=e===d?Do():Eo(e),p(Cx)[this.e]=this}function z(){c("cannot construct a b2MotorJoint, no constructor in IDL")}function A(){c("cannot construct a b2Profile, no constructor in IDL")}function Dx(){c("cannot construct a VoidPtr, no constructor in IDL")}function B(){this.e=vw(),p(B)[this.e]=this}function Ex(){this.e=kg(),p(Ex)[this.e]=this}function Gx(){c("cannot construct a b2ContactFeature, no constructor in IDL")}function u(e,t){e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),this.e=e===d?sh():t===d?_emscripten_bind_b2Vec2_b2Vec2_1(e):qh(e,t),p(u)[this.e]=this}function wx(e,t,n){e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),this.e=e===d?Jk():t===d?_emscripten_bind_b2Vec3_b2Vec3_1(e):n===d?_emscripten_bind_b2Vec3_b2Vec3_2(e,t):Kk(e,t,n),p(wx)[this.e]=this}function zx(){this.e=Uo(),p(zx)[this.e]=this}function Hx(){this.e=rk(),p(Hx)[this.e]=this}function C(){this.e=wl(),p(C)[this.e]=this}function Ix(){this.e=cn(),p(Ix)[this.e]=this}function E(){this.e=uf(),p(E)[this.e]=this}function F(e){e=e&&"object"==typeof e?e.e:r(e),this.e=Of(e),p(F)[this.e]=this}function H(){c("cannot construct a b2PrismaticJoint, no constructor in IDL")}function Jx(){c("cannot construct a b2RayCastOutput, no constructor in IDL")}function Kx(){c("cannot construct a b2ContactID, no constructor in IDL")}function tx(){c("cannot construct a b2DestructionListenerWrapper, no constructor in IDL")}function Lx(){this.e=fx(),p(Lx)[this.e]=this}function Nx(e,t,n,i){e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i),this.e=e===d?Wq():t===d?_emscripten_bind_b2Mat22_b2Mat22_1(e):n===d?vs(e,t):i===d?_emscripten_bind_b2Mat22_b2Mat22_3(e,t,n):zs(e,t,n,i),p(Nx)[this.e]=this}function I(){this.e=Cw(),p(I)[this.e]=this}function Ox(){this.e=yn(),p(Ox)[this.e]=this}function J(){this.e=Jm(),p(J)[this.e]=this}function Px(){c("cannot construct a b2Draw, no constructor in IDL")}function Qx(){this.e=kq(),p(Qx)[this.e]=this}function t(){c("cannot construct a b2Joint, no constructor in IDL")}function Rx(){c("cannot construct a b2GearJoint, no constructor in IDL")}function Fx(){c("cannot construct a b2RayCastCallback, no constructor in IDL")}function K(){c("cannot construct a b2WeldJoint, no constructor in IDL")}function Sx(){this.e=Eu(),p(Sx)[this.e]=this}function L(){this.e=Nd(),p(L)[this.e]=this}function Mx(){c("cannot construct a b2ContactListener, no constructor in IDL")}function Tx(){this.e=Si(),p(Tx)[this.e]=this}function Bx(){c("cannot construct a b2QueryCallback, no constructor in IDL")}function D(){this.e=xn(),p(D)[this.e]=this}function Ux(e,t){e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),this.e=e===d?Ai():t===d?_emscripten_bind_b2Transform_b2Transform_1(e):Ys(e,t),p(Ux)[this.e]=this}function M(){this.e=jw(),p(M)[this.e]=this}function Vx(e,t,n){e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),this.e=e===d?Ct():t===d?_emscripten_bind_b2Color_b2Color_1(e):n===d?_emscripten_bind_b2Color_b2Color_2(e,t):Bt(e,t,n),p(Vx)[this.e]=this}function N(){c("cannot construct a b2RopeJoint, no constructor in IDL")}function Wx(){c("cannot construct a b2RayCastInput, no constructor in IDL")}function O(){this.e=Fj(),p(O)[this.e]=this}function P(){this.e=Hq(),p(P)[this.e]=this}function Xx(){this.e=jt(),p(Xx)[this.e]=this}function Q(){this.e=mn(),p(Q)[this.e]=this}function Zx(){this.e=su(),p(Zx)[this.e]=this}function R(){c("cannot construct a b2WheelJoint, no constructor in IDL")}function S(){c("cannot construct a b2PulleyJoint, no constructor in IDL")}function T(){this.e=Yp(),p(T)[this.e]=this}function G(){c("cannot construct a b2Contact, no constructor in IDL")}function xx(){c("cannot construct a b2Shape, no constructor in IDL")}function U(){this.e=fn(),p(U)[this.e]=this}function v(){c("cannot construct a b2Body, no constructor in IDL")}function W(){c("cannot construct a b2FrictionJoint, no constructor in IDL")}function ay(){c("cannot construct a b2DestructionListener, no constructor in IDL")}function X(){this.e=zn(),p(X)[this.e]=this}function Y(){c("cannot construct a b2RevoluteJoint, no constructor in IDL")}function Yx(){c("cannot construct a b2ContactFilter, no constructor in IDL")}function $x(){this.e=Fs(),p($x)[this.e]=this}function Z(){this.e=Dk(),p(Z)[this.e]=this}function $(){this.e=yh(),p($)[this.e]=this}function j(){}function p(e){return(e||j).k}function q(e,t){var n=p(t),i=n[e];return i||((i=Object.create((t||j).prototype)).e=e,n[e]=i)}function nx(e,t){return q(e.e,t)}function ox(e){e.__destroy__||c("Error: Cannot destroy object. (Did you create it yourself?)"),e.__destroy__(),delete p(e.g)[e.e]}function px(e,t){return e.e===t.e}function qx(e){return e.e}function rx(e){return e.g}function r(e){return"string"==typeof e?$a(Ab(e),"i8",Wa):e}function sx(){this.e=yf(),p(sx)[this.e]=this}function ux(){c("cannot construct a b2ContactImpulse, no constructor in IDL")}function s(){c("cannot construct a b2DistanceJoint, no constructor in IDL")}function vx(e,t,n){e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),this.e=e===d?Yg():t===d?_emscripten_bind_b2Mat33_b2Mat33_1(e):n===d?_emscripten_bind_b2Mat33_b2Mat33_2(e,t):mu(e,t,n),p(vx)[this.e]=this}function w(){c("cannot construct a b2Fixture, no constructor in IDL")}function yx(){this.e=Ap(),p(yx)[this.e]=this}function Ax(){this.e=iq(),p(Ax)[this.e]=this}function y(){c("cannot construct a b2MouseJoint, no constructor in IDL")}function Cx(e){e=e&&"object"==typeof e?e.e:r(e),this.e=e===d?Do():Eo(e),p(Cx)[this.e]=this}function z(){c("cannot construct a b2MotorJoint, no constructor in IDL")}function A(){c("cannot construct a b2Profile, no constructor in IDL")}function Dx(){c("cannot construct a VoidPtr, no constructor in IDL")}function B(){this.e=vw(),p(B)[this.e]=this}function Ex(){this.e=kg(),p(Ex)[this.e]=this}function Gx(){c("cannot construct a b2ContactFeature, no constructor in IDL")}function u(e,t){e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),this.e=e===d?sh():t===d?_emscripten_bind_b2Vec2_b2Vec2_1(e):qh(e,t),p(u)[this.e]=this}e.noInitialRun&&(kx=ca),e.noExitRuntime=aa,lx(),j.prototype=Object.create(j.prototype),j.prototype.g=j,j.k={},e.WrapperObject=j,e.getCache=p,e.wrapPointer=q,e.castObject=nx,e.NULL=q(0),e.destroy=ox,e.compare=px,e.getPointer=qx,e.getClass=rx,sx.prototype=Object.create(tx.prototype),sx.prototype.g=sx,sx.k={},e.JSDestructionListener=sx,sx.prototype.SayGoodbyeJoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ym(t,e)},sx.prototype.SayGoodbyeFixture=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);vq(t,e)},sx.prototype.__destroy__=function(){Nr(this.e)},ux.prototype=Object.create(j.prototype),ux.prototype.g=ux,ux.k={},e.b2ContactImpulse=ux,ux.prototype.get_count=function(){return Xn(this.e)},ux.prototype.set_count=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Kh(t,e)},ux.prototype.__destroy__=function(){tf(this.e)},s.prototype=Object.create(t.prototype),s.prototype.g=s,s.k={},e.b2DistanceJoint=s,s.prototype.GetLocalAnchorA=function(){return q(Es(this.e),u)},s.prototype.GetLocalAnchorB=function(){return q(Ki(this.e),u)},s.prototype.SetLength=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vv(t,e)},s.prototype.GetLength=function(){return Jl(this.e)},s.prototype.SetFrequency=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Gh(t,e)},s.prototype.GetFrequency=function(){return rm(this.e)},s.prototype.SetDampingRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);hf(t,e)},s.prototype.GetDampingRatio=function(){return Xh(this.e)},s.prototype.GetType=function(){return kl(this.e)},s.prototype.GetBodyA=function(){return q(ej(this.e),v)},s.prototype.GetBodyB=function(){return q(Rv(this.e),v)},s.prototype.GetAnchorA=function(){return q(ud(this.e),u)},s.prototype.GetAnchorB=function(){return q(th(this.e),u)},s.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Bn(t,e),u)},s.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return gt(t,e)},s.prototype.GetNext=function(){return q(Re(this.e),t)},s.prototype.GetUserData=function(){return Qw(this.e)},s.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);rn(t,e)},s.prototype.IsActive=function(){return oh(this.e)},s.prototype.GetCollideConnected=function(){return Ut(this.e)},s.prototype.__destroy__=function(){ur(this.e)},vx.prototype=Object.create(j.prototype),vx.prototype.g=vx,vx.k={},e.b2Mat33=vx,vx.prototype.SetZero=function(){Tu(this.e)},vx.prototype.Solve33=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Dp(t,e),wx)},vx.prototype.Solve22=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Ag(t,e),u)},vx.prototype.GetInverse22=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);hn(t,e)},vx.prototype.GetSymInverse33=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vl(t,e)},vx.prototype.get_ex=function(){return q(Ch(this.e),wx)},vx.prototype.set_ex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);bu(t,e)},vx.prototype.get_ey=function(){return q(md(this.e),wx)},vx.prototype.set_ey=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Mi(t,e)},vx.prototype.get_ez=function(){return q(Uw(this.e),wx)},vx.prototype.set_ez=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Du(t,e)},vx.prototype.__destroy__=function(){Id(this.e)},w.prototype=Object.create(j.prototype),w.prototype.g=w,w.k={},e.b2Fixture=w,w.prototype.GetType=function(){return ml(this.e)},w.prototype.GetShape=function(){return q(sv(this.e),xx)},w.prototype.SetSensor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);bj(t,e)},w.prototype.IsSensor=function(){return Yo(this.e)},w.prototype.SetFilterData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);gi(t,e)},w.prototype.GetFilterData=function(){return q(st(this.e),yx)},w.prototype.Refilter=function(){Vo(this.e)},w.prototype.GetBody=function(){return q(Jh(this.e),v)},w.prototype.GetNext=function(){return q(bk(this.e),w)},w.prototype.GetUserData=function(){return gm(this.e)},w.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);hr(t,e)},w.prototype.TestPoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return qu(t,e)},w.prototype.RayCast=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);return el(i,e,t,n)},w.prototype.GetMassData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ij(t,e)},w.prototype.SetDensity=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Oh(t,e)},w.prototype.GetDensity=function(){return Up(this.e)},w.prototype.GetFriction=function(){return Ou(this.e)},w.prototype.SetFriction=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sc(t,e)},w.prototype.GetRestitution=function(){return We(this.e)},w.prototype.SetRestitution=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Zt(t,e)},w.prototype.GetAABB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Jn(t,e),zx)},w.prototype.Dump=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);on(t,e)},w.prototype.__destroy__=function(){Pc(this.e)},yx.prototype=Object.create(j.prototype),yx.prototype.g=yx,yx.k={},e.b2Filter=yx,yx.prototype.get_categoryBits=function(){return Zm(this.e)},yx.prototype.set_categoryBits=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Mk(t,e)},yx.prototype.get_maskBits=function(){return bp(this.e)},yx.prototype.set_maskBits=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ss(t,e)},yx.prototype.get_groupIndex=function(){return Ue(this.e)},yx.prototype.set_groupIndex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);wn(t,e)},yx.prototype.__destroy__=function(){go(this.e)},Ax.prototype=Object.create(Bx.prototype),Ax.prototype.g=Ax,Ax.k={},e.JSQueryCallback=Ax,Ax.prototype.ReportFixture=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return pu(t,e)},Ax.prototype.__destroy__=function(){Jo(this.e)},y.prototype=Object.create(t.prototype),y.prototype.g=y,y.k={},e.b2MouseJoint=y,y.prototype.SetTarget=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);oi(t,e)},y.prototype.GetTarget=function(){return q(Kt(this.e),u)},y.prototype.SetMaxForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Aq(t,e)},y.prototype.GetMaxForce=function(){return Vt(this.e)},y.prototype.SetFrequency=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Zl(t,e)},y.prototype.GetFrequency=function(){return Dt(this.e)},y.prototype.SetDampingRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Qk(t,e)},y.prototype.GetDampingRatio=function(){return as(this.e)},y.prototype.GetType=function(){return Io(this.e)},y.prototype.GetBodyA=function(){return q(So(this.e),v)},y.prototype.GetBodyB=function(){return q(Cj(this.e),v)},y.prototype.GetAnchorA=function(){return q(tu(this.e),u)},y.prototype.GetAnchorB=function(){return q(Xq(this.e),u)},y.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(jm(t,e),u)},y.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return mo(t,e)},y.prototype.GetNext=function(){return q(Xi(this.e),t)},y.prototype.GetUserData=function(){return no(this.e)},y.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Mt(t,e)},y.prototype.IsActive=function(){return nd(this.e)},y.prototype.GetCollideConnected=function(){return Bi(this.e)},y.prototype.__destroy__=function(){Gq(this.e)},Cx.prototype=Object.create(j.prototype),Cx.prototype.g=Cx,Cx.k={},e.b2Rot=Cx,Cx.prototype.Set=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);wg(t,e)},Cx.prototype.SetIdentity=function(){Mg(this.e)},Cx.prototype.GetAngle=function(){return Np(this.e)},Cx.prototype.GetXAxis=function(){return q(Zj(this.e),u)},Cx.prototype.GetYAxis=function(){return q(sr(this.e),u)},Cx.prototype.get_s=function(){return Zp(this.e)},Cx.prototype.set_s=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);me(t,e)},Cx.prototype.get_c=function(){return xq(this.e)},Cx.prototype.set_c=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Mh(t,e)},Cx.prototype.__destroy__=function(){ap(this.e)},z.prototype=Object.create(t.prototype),z.prototype.g=z,z.k={},e.b2MotorJoint=z,z.prototype.SetLinearOffset=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Lp(t,e)},z.prototype.GetLinearOffset=function(){return q(Qp(this.e),u)},z.prototype.SetAngularOffset=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Pp(t,e)},z.prototype.GetAngularOffset=function(){return xv(this.e)},z.prototype.SetMaxForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);mp(t,e)},z.prototype.GetMaxForce=function(){return Wj(this.e)},z.prototype.SetMaxTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Zd(t,e)},z.prototype.GetMaxTorque=function(){return es(this.e)},z.prototype.SetCorrectionFactor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ie(t,e)},z.prototype.GetCorrectionFactor=function(){return tq(this.e)},z.prototype.GetType=function(){return cr(this.e)},z.prototype.GetBodyA=function(){return q(Rg(this.e),v)},z.prototype.GetBodyB=function(){return q(mi(this.e),v)},z.prototype.GetAnchorA=function(){return q(Tp(this.e),u)},z.prototype.GetAnchorB=function(){return q(rv(this.e),u)},z.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Mp(t,e),u)},z.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return Uf(t,e)},z.prototype.GetNext=function(){return q(zr(this.e),t)},z.prototype.GetUserData=function(){return Nk(this.e)},z.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ki(t,e)},z.prototype.IsActive=function(){return lo(this.e)},z.prototype.GetCollideConnected=function(){return ff(this.e)},z.prototype.__destroy__=function(){bl(this.e)},A.prototype=Object.create(j.prototype),A.prototype.g=A,A.k={},e.b2Profile=A,A.prototype.get_step=function(){return Ik(this.e)},A.prototype.set_step=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);pj(t,e)},A.prototype.get_collide=function(){return At(this.e)},A.prototype.set_collide=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);To(t,e)},A.prototype.get_solve=function(){return uq(this.e)},A.prototype.set_solve=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);kt(t,e)},A.prototype.get_solveInit=function(){return Iv(this.e)},A.prototype.set_solveInit=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);pl(t,e)},A.prototype.get_solveVelocity=function(){return aw(this.e)},A.prototype.set_solveVelocity=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Hm(t,e)},A.prototype.get_solvePosition=function(){return Fd(this.e)},A.prototype.set_solvePosition=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Bg(t,e)},A.prototype.get_broadphase=function(){return qd(this.e)},A.prototype.set_broadphase=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vn(t,e)},A.prototype.get_solveTOI=function(){return Hg(this.e)},A.prototype.set_solveTOI=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ui(t,e)},A.prototype.__destroy__=function(){Eh(this.e)},Dx.prototype=Object.create(j.prototype),Dx.prototype.g=Dx,Dx.k={},e.VoidPtr=Dx,Dx.prototype.__destroy__=function(){yp(this.e)},B.prototype=Object.create(j.prototype),B.prototype.g=B,B.k={},e.b2BodyDef=B,B.prototype.get_type=function(){return Lr(this.e)},B.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vc(t,e)},B.prototype.get_position=function(){return q(bd(this.e),u)},B.prototype.set_position=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Qd(t,e)},B.prototype.get_angle=function(){return hu(this.e)},B.prototype.set_angle=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Pl(t,e)},B.prototype.get_linearVelocity=function(){return q(lv(this.e),u)},B.prototype.set_linearVelocity=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);$k(t,e)},B.prototype.get_angularVelocity=function(){return Le(this.e)},B.prototype.set_angularVelocity=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Um(t,e)},B.prototype.get_linearDamping=function(){return Ek(this.e)},B.prototype.set_linearDamping=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Qr(t,e)},B.prototype.get_angularDamping=function(){return fr(this.e)},B.prototype.set_angularDamping=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Jv(t,e)},B.prototype.get_allowSleep=function(){return Zu(this.e)},B.prototype.set_allowSleep=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);mj(t,e)},B.prototype.get_awake=function(){return dr(this.e)},B.prototype.set_awake=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);am(t,e)},B.prototype.get_fixedRotation=function(){return io(this.e)},B.prototype.set_fixedRotation=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Tk(t,e)},B.prototype.get_bullet=function(){return Kf(this.e)},B.prototype.set_bullet=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sn(t,e)},B.prototype.get_active=function(){return Nj(this.e)},B.prototype.set_active=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);wk(t,e)},B.prototype.get_userData=function(){return Mv(this.e)},B.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Lu(t,e)},B.prototype.get_gravityScale=function(){return qo(this.e)},B.prototype.set_gravityScale=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ee(t,e)},B.prototype.__destroy__=function(){Gs(this.e)},Ex.prototype=Object.create(Fx.prototype),Ex.prototype.g=Ex,Ex.k={},e.JSRayCastCallback=Ex,Ex.prototype.ReportFixture=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);return Fm(_,e,t,n,i)},Ex.prototype.__destroy__=function(){gp(this.e)},Gx.prototype=Object.create(j.prototype),Gx.prototype.g=Gx,Gx.k={},e.b2ContactFeature=Gx,Gx.prototype.get_indexA=function(){return xh(this.e)},Gx.prototype.set_indexA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Hv(t,e)},Gx.prototype.get_indexB=function(){return Jw(this.e)},Gx.prototype.set_indexB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);mr(t,e)},Gx.prototype.get_typeA=function(){return im(this.e)},Gx.prototype.set_typeA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);nn(t,e)},Gx.prototype.get_typeB=function(){return Kp(this.e)},Gx.prototype.set_typeB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);xg(t,e)},Gx.prototype.__destroy__=function(){gq(this.e)},u.prototype=Object.create(j.prototype),u.prototype.g=u,u.k={},e.b2Vec2=u,u.prototype.SetZero=function(){Br(this.e)},u.prototype.Set=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Wp(n,e,t)},u.prototype.op_add=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Rf(t,e)},u.prototype.op_sub=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);vh(t,e)},u.prototype.op_mul=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sj(t,e)},u.prototype.Length=function(){return Ar(this.e)},u.prototype.LengthSquared=function(){return Gw(this.e)},u.prototype.Normalize=function(){return gg(this.e)},u.prototype.IsValid=function(){return rp(this.e)},u.prototype.Skew=function(){return q($r(this.e),u)},u.prototype.get_x=function(){return ex(this.e)},u.prototype.set_x=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);vf(t,e)},u.prototype.get_y=function(){return bm(this.e)},u.prototype.set_y=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sw(t,e)},u.prototype.__destroy__=function(){hv(this.e)},wx.prototype=Object.create(j.prototype),wx.prototype.g=wx,wx.k={},e.b2Vec3=wx,wx.prototype.SetZero=function(){Xf(this.e)},wx.prototype.Set=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);ak(i,e,t,n)},wx.prototype.op_add=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Og(t,e)},wx.prototype.op_sub=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);po(t,e)},wx.prototype.op_mul=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);uv(t,e)},wx.prototype.get_x=function(){return Bd(this.e)},wx.prototype.set_x=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);wm(t,e)},wx.prototype.get_y=function(){return nu(this.e)},wx.prototype.set_y=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);lq(t,e)},wx.prototype.get_z=function(){return vc(this.e)},wx.prototype.set_z=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);pm(t,e)},wx.prototype.__destroy__=function(){Rh(this.e)},zx.prototype=Object.create(j.prototype),zx.prototype.g=zx,zx.k={},e.b2AABB=zx,zx.prototype.IsValid=function(){return so(this.e)},zx.prototype.GetCenter=function(){return q(vn(this.e),u)},zx.prototype.GetExtents=function(){return q(cu(this.e),u)},zx.prototype.GetPerimeter=function(){return um(this.e)},zx.prototype.Combine=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e);(t=t&&"object"==typeof t?t.e:r(t))===d?mq(n,e):nq(n,e,t)},zx.prototype.Contains=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return Qe(t,e)},zx.prototype.RayCast=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);return zl(n,e,t)},zx.prototype.get_lowerBound=function(){return q(He(this.e),u)},zx.prototype.set_lowerBound=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);yq(t,e)},zx.prototype.get_upperBound=function(){return q(Ze(this.e),u)},zx.prototype.set_upperBound=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);rf(t,e)},zx.prototype.__destroy__=function(){qq(this.e)},Hx.prototype=Object.create(j.prototype),Hx.prototype.g=Hx,Hx.k={},e.b2FixtureDef=Hx,Hx.prototype.get_shape=function(){return q(ju(this.e),xx)},Hx.prototype.set_shape=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Zv(t,e)},Hx.prototype.get_userData=function(){return re(this.e)},Hx.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);cq(t,e)},Hx.prototype.get_friction=function(){return Ht(this.e)},Hx.prototype.set_friction=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Cm(t,e)},Hx.prototype.get_restitution=function(){return ll(this.e)},Hx.prototype.set_restitution=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);jd(t,e)},Hx.prototype.get_density=function(){return je(this.e)},Hx.prototype.set_density=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ps(t,e)},Hx.prototype.get_isSensor=function(){return rg(this.e)},Hx.prototype.set_isSensor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Al(t,e)},Hx.prototype.get_filter=function(){return q(Hc(this.e),yx)},Hx.prototype.set_filter=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ei(t,e)},Hx.prototype.__destroy__=function(){Yv(this.e)},C.prototype=Object.create(D.prototype),C.prototype.g=C,C.k={},e.b2FrictionJointDef=C,C.prototype.Initialize=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);mw(i,e,t,n)},C.prototype.get_localAnchorA=function(){return q(If(this.e),u)},C.prototype.set_localAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ig(t,e)},C.prototype.get_localAnchorB=function(){return q(Mj(this.e),u)},C.prototype.set_localAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ck(t,e)},C.prototype.get_maxForce=function(){return Tm(this.e)},C.prototype.set_maxForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);en(t,e)},C.prototype.get_maxTorque=function(){return np(this.e)},C.prototype.set_maxTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Hs(t,e)},C.prototype.get_type=function(){return Ic(this.e)},C.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);hs(t,e)},C.prototype.get_userData=function(){return hi(this.e)},C.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);uc(t,e)},C.prototype.get_bodyA=function(){return q(Fu(this.e),v)},C.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Hw(t,e)},C.prototype.get_bodyB=function(){return q(Bq(this.e),v)},C.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ys(t,e)},C.prototype.get_collideConnected=function(){return js(this.e)},C.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);se(t,e)},C.prototype.__destroy__=function(){yi(this.e)},Ix.prototype=Object.create(j.prototype),Ix.prototype.g=Ix,Ix.k={},e.b2Manifold=Ix,Ix.prototype.get_localNormal=function(){return q(yl(this.e),u)},Ix.prototype.set_localNormal=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Tr(t,e)},Ix.prototype.get_localPoint=function(){return q(Zq(this.e),u)},Ix.prototype.set_localPoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);qn(t,e)},Ix.prototype.get_type=function(){return Ld(this.e)},Ix.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Il(t,e)},Ix.prototype.get_pointCount=function(){return Tw(this.e)},Ix.prototype.set_pointCount=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Jg(t,e)},Ix.prototype.__destroy__=function(){dh(this.e)},E.prototype=Object.create(D.prototype),E.prototype.g=E,E.k={},e.b2PrismaticJointDef=E,E.prototype.Initialize=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);Hf(_,e,t,n,i)},E.prototype.get_localAnchorA=function(){return q(tj(this.e),u)},E.prototype.set_localAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);It(t,e)},E.prototype.get_localAnchorB=function(){return q(mf(this.e),u)},E.prototype.set_localAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ip(t,e)},E.prototype.get_localAxisA=function(){return q(Vu(this.e),u)},E.prototype.set_localAxisA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Mn(t,e)},E.prototype.get_referenceAngle=function(){return Je(this.e)},E.prototype.set_referenceAngle=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ci(t,e)},E.prototype.get_enableLimit=function(){return qt(this.e)},E.prototype.set_enableLimit=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);qm(t,e)},E.prototype.get_lowerTranslation=function(){return te(this.e)},E.prototype.set_lowerTranslation=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Pd(t,e)},E.prototype.get_upperTranslation=function(){return Ec(this.e)},E.prototype.set_upperTranslation=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);gv(t,e)},E.prototype.get_enableMotor=function(){return Ws(this.e)},E.prototype.set_enableMotor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Yr(t,e)},E.prototype.get_maxMotorForce=function(){return Ow(this.e)},E.prototype.set_maxMotorForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ti(t,e)},E.prototype.get_motorSpeed=function(){return $o(this.e)},E.prototype.set_motorSpeed=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);jo(t,e)},E.prototype.get_type=function(){return Mf(this.e)},E.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);vi(t,e)},E.prototype.get_userData=function(){return Vj(this.e)},E.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);gs(t,e)},E.prototype.get_bodyA=function(){return q(qp(this.e),v)},E.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sp(t,e)},E.prototype.get_bodyB=function(){return q(rl(this.e),v)},E.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);vl(t,e)},E.prototype.get_collideConnected=function(){return wt(this.e)},E.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ln(t,e)},E.prototype.__destroy__=function(){Ne(this.e)},F.prototype=Object.create(j.prototype),F.prototype.g=F,F.k={},e.b2World=F,F.prototype.SetDestructionListener=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Df(t,e)},F.prototype.SetContactFilter=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fd(t,e)},F.prototype.SetContactListener=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);de(t,e)},F.prototype.SetDebugDraw=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);cg(t,e)},F.prototype.CreateBody=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Wo(t,e),v)},F.prototype.DestroyBody=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ed(t,e)},F.prototype.CreateJoint=function(e){var n=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Gg(n,e),t)},F.prototype.DestroyJoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Dr(t,e)},F.prototype.Step=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);Gk(i,e,t,n)},F.prototype.ClearForces=function(){Qh(this.e)},F.prototype.DrawDebugData=function(){pd(this.e)},F.prototype.QueryAABB=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Lv(n,e,t)},F.prototype.RayCast=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);xt(i,e,t,n)},F.prototype.GetBodyList=function(){return q(tt(this.e),v)},F.prototype.GetJointList=function(){return q(pn(this.e),t)},F.prototype.GetContactList=function(){return q(Cu(this.e),G)},F.prototype.SetAllowSleeping=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Op(t,e)},F.prototype.GetAllowSleeping=function(){return Ri(this.e)},F.prototype.SetWarmStarting=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Rc(t,e)},F.prototype.GetWarmStarting=function(){return tp(this.e)},F.prototype.SetContinuousPhysics=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);an(t,e)},F.prototype.GetContinuousPhysics=function(){return dl(this.e)},F.prototype.SetSubStepping=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Qf(t,e)},F.prototype.GetSubStepping=function(){return rr(this.e)},F.prototype.GetProxyCount=function(){return fg(this.e)},F.prototype.GetBodyCount=function(){return hj(this.e)},F.prototype.GetJointCount=function(){return Yn(this.e)},F.prototype.GetContactCount=function(){return wj(this.e)},F.prototype.GetTreeHeight=function(){return $u(this.e)},F.prototype.GetTreeBalance=function(){return Dc(this.e)},F.prototype.GetTreeQuality=function(){return De(this.e)},F.prototype.SetGravity=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Wt(t,e)},F.prototype.GetGravity=function(){return q(od(this.e),u)},F.prototype.IsLocked=function(){return wc(this.e)},F.prototype.SetAutoClearForces=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Od(t,e)},F.prototype.GetAutoClearForces=function(){return Rk(this.e)},F.prototype.GetProfile=function(){return q(wu(this.e),A)},F.prototype.Dump=function(){ht(this.e)},F.prototype.__destroy__=function(){yo(this.e)},H.prototype=Object.create(t.prototype),H.prototype.g=H,H.k={},e.b2PrismaticJoint=H,H.prototype.GetLocalAnchorA=function(){return q(Ok(this.e),u)},H.prototype.GetLocalAnchorB=function(){return q(Ho(this.e),u)},H.prototype.GetLocalAxisA=function(){return q(li(this.e),u)},H.prototype.GetReferenceAngle=function(){return Ml(this.e)},H.prototype.GetJointTranslation=function(){return rh(this.e)},H.prototype.GetJointSpeed=function(){return Cn(this.e)},H.prototype.IsLimitEnabled=function(){return tw(this.e)},H.prototype.EnableLimit=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Sm(t,e)},H.prototype.GetLowerLimit=function(){return Ge(this.e)},H.prototype.GetUpperLimit=function(){return at(this.e)},H.prototype.SetLimits=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);sd(n,e,t)},H.prototype.IsMotorEnabled=function(){return El(this.e)},H.prototype.EnableMotor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Cs(t,e)},H.prototype.SetMotorSpeed=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Tt(t,e)},H.prototype.GetMotorSpeed=function(){return Kg(this.e)},H.prototype.SetMaxMotorForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);$w(t,e)},H.prototype.GetMaxMotorForce=function(){return pq(this.e)},H.prototype.GetMotorForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return dj(t,e)},H.prototype.GetType=function(){return Ve(this.e)},H.prototype.GetBodyA=function(){return q(oq(this.e),v)},H.prototype.GetBodyB=function(){return q(eu(this.e),v)},H.prototype.GetAnchorA=function(){return q(Cl(this.e),u)},H.prototype.GetAnchorB=function(){return q(Im(this.e),u)},H.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(zi(t,e),u)},H.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return kh(t,e)},H.prototype.GetNext=function(){return q(Te(this.e),t)},H.prototype.GetUserData=function(){return is(this.e)},H.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sk(t,e)},H.prototype.IsActive=function(){return Ym(this.e)},H.prototype.GetCollideConnected=function(){return mh(this.e)},H.prototype.__destroy__=function(){Fg(this.e)},Jx.prototype=Object.create(j.prototype),Jx.prototype.g=Jx,Jx.k={},e.b2RayCastOutput=Jx,Jx.prototype.get_normal=function(){return q(ng(this.e),u)},Jx.prototype.set_normal=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Wh(t,e)},Jx.prototype.get_fraction=function(){return bo(this.e)},Jx.prototype.set_fraction=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ye(t,e)},Jx.prototype.__destroy__=function(){tn(this.e)},Kx.prototype=Object.create(j.prototype),Kx.prototype.g=Kx,Kx.k={},e.b2ContactID=Kx,Kx.prototype.get_cf=function(){return q(bt(this.e),Gx)},Kx.prototype.set_cf=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Yj(t,e)},Kx.prototype.get_key=function(){return Nv(this.e)},Kx.prototype.set_key=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);dg(t,e)},Kx.prototype.__destroy__=function(){Dm(this.e)},tx.prototype=Object.create(j.prototype),tx.prototype.g=tx,tx.k={},e.b2DestructionListenerWrapper=tx,tx.prototype.__destroy__=function(){Vw(this.e)},Lx.prototype=Object.create(Mx.prototype),Lx.prototype.g=Lx,Lx.k={},e.JSContactListener=Lx,Lx.prototype.BeginContact=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);No(t,e)},Lx.prototype.EndContact=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);zd(t,e)},Lx.prototype.PreSolve=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Uh(n,e,t)},Lx.prototype.PostSolve=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Lq(n,e,t)},Lx.prototype.__destroy__=function(){Zk(this.e)},Nx.prototype=Object.create(j.prototype),Nx.prototype.g=Nx,Nx.k={},e.b2Mat22=Nx,Nx.prototype.Set=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Fr(n,e,t)},Nx.prototype.SetIdentity=function(){Xu(this.e)},Nx.prototype.SetZero=function(){Xt(this.e)},Nx.prototype.GetInverse=function(){return q(Bs(this.e),Nx)},Nx.prototype.Solve=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(wp(t,e),u)},Nx.prototype.get_ex=function(){return q(cp(this.e),u)},Nx.prototype.set_ex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);gw(t,e)},Nx.prototype.get_ey=function(){return q(Wu(this.e),u)},Nx.prototype.set_ey=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);pr(t,e)},Nx.prototype.__destroy__=function(){nv(this.e)},I.prototype=Object.create(D.prototype),I.prototype.g=I,I.k={},e.b2WheelJointDef=I,I.prototype.Initialize=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);Rj(_,e,t,n,i)},I.prototype.get_localAnchorA=function(){return q(Rl(this.e),u)},I.prototype.set_localAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);zf(t,e)},I.prototype.get_localAnchorB=function(){return q(Wn(this.e),u)},I.prototype.set_localAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Mw(t,e)},I.prototype.get_localAxisA=function(){return q(Ij(this.e),u)},I.prototype.set_localAxisA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Aw(t,e)},I.prototype.get_enableMotor=function(){return Fw(this.e)},I.prototype.set_enableMotor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);qe(t,e)},I.prototype.get_maxMotorTorque=function(){return uh(this.e)},I.prototype.set_maxMotorTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);xs(t,e)},I.prototype.get_motorSpeed=function(){return ps(this.e)},I.prototype.set_motorSpeed=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Sp(t,e)},I.prototype.get_frequencyHz=function(){return Ac(this.e)},I.prototype.set_frequencyHz=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);qr(t,e)},I.prototype.get_dampingRatio=function(){return ao(this.e)},I.prototype.set_dampingRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);wr(t,e)},I.prototype.get_type=function(){return Gu(this.e)},I.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ce(t,e)},I.prototype.get_userData=function(){return Pv(this.e)},I.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Sh(t,e)},I.prototype.get_bodyA=function(){return q(Ww(this.e),v)},I.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fu(t,e)},I.prototype.get_bodyB=function(){return q(Qn(this.e),v)},I.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);pe(t,e)},I.prototype.get_collideConnected=function(){return gd(this.e)},I.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Mr(t,e)},I.prototype.__destroy__=function(){Wf(this.e)},Ox.prototype=Object.create(xx.prototype),Ox.prototype.g=Ox,Ox.k={},e.b2CircleShape=Ox,Ox.prototype.GetType=function(){return ai(this.e)},Ox.prototype.GetChildCount=function(){return Jf(this.e)},Ox.prototype.TestPoint=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);return Tq(n,e,t)},Ox.prototype.RayCast=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);return Hk(_,e,t,n,i)},Ox.prototype.ComputeAABB=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);ot(i,e,t,n)},Ox.prototype.ComputeMass=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Oq(n,e,t)},Ox.prototype.get_m_p=function(){return q(wh(this.e),u)},Ox.prototype.set_m_p=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);yd(t,e)},Ox.prototype.get_m_type=function(){return Ds(this.e)},Ox.prototype.set_m_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);nf(t,e)},Ox.prototype.get_m_radius=function(){return si(this.e)},Ox.prototype.set_m_radius=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);bf(t,e)},Ox.prototype.__destroy__=function(){br(this.e)},J.prototype=Object.create(D.prototype),J.prototype.g=J,J.k={},e.b2WeldJointDef=J,J.prototype.Initialize=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);Et(i,e,t,n)},J.prototype.get_localAnchorA=function(){return q(Lt(this.e),u)},J.prototype.set_localAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);oj(t,e)},J.prototype.get_localAnchorB=function(){return q(pp(this.e),u)},J.prototype.set_localAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);af(t,e)},J.prototype.get_referenceAngle=function(){return qs(this.e)},J.prototype.set_referenceAngle=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ls(t,e)},J.prototype.get_frequencyHz=function(){return bh(this.e)},J.prototype.set_frequencyHz=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Wr(t,e)},J.prototype.get_dampingRatio=function(){return Fq(this.e)},J.prototype.set_dampingRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Sj(t,e)},J.prototype.get_type=function(){return Xp(this.e)},J.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ns(t,e)},J.prototype.get_userData=function(){return ku(this.e)},J.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Yh(t,e)},J.prototype.get_bodyA=function(){return q(qv(this.e),v)},J.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Cf(t,e)},J.prototype.get_bodyB=function(){return q(bw(this.e),v)},J.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Tv(t,e)},J.prototype.get_collideConnected=function(){return jj(this.e)},J.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Kd(t,e)},J.prototype.__destroy__=function(){vp(this.e)},Px.prototype=Object.create(j.prototype),Px.prototype.g=Px,Px.k={},e.b2Draw=Px,Px.prototype.SetFlags=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Pe(t,e)},Px.prototype.GetFlags=function(){return xc(this.e)},Px.prototype.AppendFlags=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Au(t,e)},Px.prototype.ClearFlags=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Oi(t,e)},Px.prototype.__destroy__=function(){Qj(this.e)},Qx.prototype=Object.create(j.prototype),Qx.prototype.g=Qx,Qx.k={},e.b2MassData=Qx,Qx.prototype.get_mass=function(){return ww(this.e)},Qx.prototype.set_mass=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ad(t,e)},Qx.prototype.get_center=function(){return q(Nf(this.e),u)},Qx.prototype.set_center=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Kj(t,e)},Qx.prototype.get_I=function(){return os(this.e)},Qx.prototype.set_I=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);yt(t,e)},Qx.prototype.__destroy__=function(){zt(this.e)},t.prototype=Object.create(j.prototype),t.prototype.g=t,t.k={},e.b2Joint=t,t.prototype.GetType=function(){return Sw(this.e)},t.prototype.GetBodyA=function(){return q(Sf(this.e),v)},t.prototype.GetBodyB=function(){return q(yw(this.e),v)},t.prototype.GetAnchorA=function(){return q(En(this.e),u)},t.prototype.GetAnchorB=function(){return q(Uj(this.e),u)},t.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Bm(t,e),u)},t.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return Bk(t,e)},t.prototype.GetNext=function(){return q(vt(this.e),t)},t.prototype.GetUserData=function(){return Gl(this.e)},t.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);cx(t,e)},t.prototype.IsActive=function(){return Yu(this.e)},t.prototype.GetCollideConnected=function(){return Tf(this.e)},t.prototype.Dump=function(){Bw(this.e)},Rx.prototype=Object.create(t.prototype),Rx.prototype.g=Rx,Rx.k={},e.b2GearJoint=Rx,Rx.prototype.GetJoint1=function(){return q(Xd(this.e),t)},Rx.prototype.GetJoint2=function(){return q(av(this.e),t)},Rx.prototype.SetRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);eo(t,e)},Rx.prototype.GetRatio=function(){return jg(this.e)},Rx.prototype.GetType=function(){return hw(this.e)},Rx.prototype.GetBodyA=function(){return q(Qm(this.e),v)},Rx.prototype.GetBodyB=function(){return q($q(this.e),v)},Rx.prototype.GetAnchorA=function(){return q($d(this.e),u)},Rx.prototype.GetAnchorB=function(){return q(Mu(this.e),u)},Rx.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Se(t,e),u)},Rx.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return Jd(t,e)},Rx.prototype.GetNext=function(){return q(zv(this.e),t)},Rx.prototype.GetUserData=function(){return ef(this.e)},Rx.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);om(t,e)},Rx.prototype.IsActive=function(){return fj(this.e)},Rx.prototype.GetCollideConnected=function(){return ue(this.e)},Rx.prototype.__destroy__=function(){gh(this.e)},Fx.prototype=Object.create(j.prototype),Fx.prototype.g=Fx,Fx.k={},e.b2RayCastCallback=Fx,Fx.prototype.__destroy__=function(){ii(this.e)},K.prototype=Object.create(t.prototype),K.prototype.g=K,K.k={},e.b2WeldJoint=K,K.prototype.GetLocalAnchorA=function(){return q(Yl(this.e),u)},K.prototype.GetLocalAnchorB=function(){return q(Rn(this.e),u)},K.prototype.SetFrequency=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Th(t,e)},K.prototype.GetFrequency=function(){return Fl(this.e)},K.prototype.SetDampingRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Me(t,e)},K.prototype.GetDampingRatio=function(){return lt(this.e)},K.prototype.Dump=function(){lp(this.e)},K.prototype.GetType=function(){return Zo(this.e)},K.prototype.GetBodyA=function(){return q(og(this.e),v)},K.prototype.GetBodyB=function(){return q(Pj(this.e),v)},K.prototype.GetAnchorA=function(){return q($v(this.e),u)},K.prototype.GetAnchorB=function(){return q(Hr(this.e),u)},K.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Zs(t,e),u)},K.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return Zc(t,e)},K.prototype.GetNext=function(){return q(Ir(this.e),t)},K.prototype.GetUserData=function(){return Ql(this.e)},K.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);aj(t,e)},K.prototype.IsActive=function(){return Tc(this.e)},K.prototype.GetCollideConnected=function(){return or(this.e)},K.prototype.__destroy__=function(){Kq(this.e)},Sx.prototype=Object.create(j.prototype),Sx.prototype.g=Sx,Sx.k={},e.b2JointEdge=Sx,Sx.prototype.get_other=function(){return q(Nt(this.e),v)},Sx.prototype.set_other=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fe(t,e)},Sx.prototype.get_joint=function(){return q(Wv(this.e),t)},Sx.prototype.set_joint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Nc(t,e)},Sx.prototype.get_prev=function(){return q(Yc(this.e),Sx)},Sx.prototype.set_prev=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);jh(t,e)},Sx.prototype.get_next=function(){return q(Qo(this.e),Sx)},Sx.prototype.set_next=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ho(t,e)},Sx.prototype.__destroy__=function(){Lo(this.e)},L.prototype=Object.create(D.prototype),L.prototype.g=L,L.k={},e.b2PulleyJointDef=L,L.prototype.Initialize=function(e,t,n,i,_,o,c){var p=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i),_=_&&"object"==typeof _?_.e:r(_),o=o&&"object"==typeof o?o.e:r(o),c=c&&"object"==typeof c?c.e:r(c);dw(p,e,t,n,i,_,o,c)},L.prototype.get_groundAnchorA=function(){return q(fi(this.e),u)},L.prototype.set_groundAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Yw(t,e)},L.prototype.get_groundAnchorB=function(){return q(Dn(this.e),u)},L.prototype.set_groundAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Js(t,e)},L.prototype.get_localAnchorA=function(){return q(td(this.e),u)},L.prototype.set_localAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ji(t,e)},L.prototype.get_localAnchorB=function(){return q(Dg(this.e),u)},L.prototype.set_localAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);nl(t,e)},L.prototype.get_lengthA=function(){return vm(this.e)},L.prototype.set_lengthA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);eh(t,e)},L.prototype.get_lengthB=function(){return $i(this.e)},L.prototype.set_lengthB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ev(t,e)},L.prototype.get_ratio=function(){return lf(this.e)},L.prototype.set_ratio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ih(t,e)},L.prototype.get_type=function(){return xm(this.e)},L.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Sl(t,e)},L.prototype.get_userData=function(){return ul(this.e)},L.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);dn(t,e)},L.prototype.get_bodyA=function(){return q(rd(this.e),v)},L.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Rw(t,e)},L.prototype.get_bodyB=function(){return q(Lh(this.e),v)},L.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sg(t,e)},L.prototype.get_collideConnected=function(){return ax(this.e)},L.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Iu(t,e)},L.prototype.__destroy__=function(){Bj(this.e)},Mx.prototype=Object.create(j.prototype),Mx.prototype.g=Mx,Mx.k={},e.b2ContactListener=Mx,Mx.prototype.__destroy__=function(){hp(this.e)},Tx.prototype=Object.create(j.prototype),Tx.prototype.g=Tx,Tx.k={},e.b2ManifoldPoint=Tx,Tx.prototype.get_localPoint=function(){return q(Lf(this.e),u)},Tx.prototype.set_localPoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);rt(t,e)},Tx.prototype.get_normalImpulse=function(){return zk(this.e)},Tx.prototype.set_normalImpulse=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Di(t,e)},Tx.prototype.get_tangentImpulse=function(){return Dq(this.e)},Tx.prototype.set_tangentImpulse=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);vd(t,e)},Tx.prototype.get_id=function(){return q(Ig(this.e),Kx)},Tx.prototype.set_id=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Pn(t,e)},Tx.prototype.__destroy__=function(){xr(this.e)},Bx.prototype=Object.create(j.prototype),Bx.prototype.g=Bx,Bx.k={},e.b2QueryCallback=Bx,Bx.prototype.__destroy__=function(){kf(this.e)},D.prototype=Object.create(j.prototype),D.prototype.g=D,D.k={},e.b2JointDef=D,D.prototype.get_type=function(){return ou(this.e)},D.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);zu(t,e)},D.prototype.get_userData=function(){return dq(this.e)},D.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Cq(t,e)},D.prototype.get_bodyA=function(){return q(Ur(this.e),v)},D.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fl(t,e)},D.prototype.get_bodyB=function(){return q(An(this.e),v)},D.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Er(t,e)},D.prototype.get_collideConnected=function(){return Vk(this.e)},D.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);al(t,e)},D.prototype.__destroy__=function(){Gf(this.e)},Ux.prototype=Object.create(j.prototype),Ux.prototype.g=Ux,Ux.k={},e.b2Transform=Ux,Ux.prototype.SetIdentity=function(){ir(this.e)},Ux.prototype.Set=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);ni(n,e,t)},Ux.prototype.get_p=function(){return q(uu(this.e),u)},Ux.prototype.set_p=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Yi(t,e)},Ux.prototype.get_q=function(){return q(Rd(this.e),Cx)},Ux.prototype.set_q=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Xe(t,e)},Ux.prototype.__destroy__=function(){$e(this.e)},M.prototype=Object.create(xx.prototype),M.prototype.g=M,M.k={},e.b2ChainShape=M,M.prototype.Clear=function(){ar(this.e)},M.prototype.CreateLoop=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);ow(n,e,t)},M.prototype.CreateChain=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Cd(n,e,t)},M.prototype.SetPrevVertex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ko(t,e)},M.prototype.SetNextVertex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ao(t,e)},M.prototype.GetChildEdge=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Ot(n,e,t)},M.prototype.GetType=function(){return Om(this.e)},M.prototype.GetChildCount=function(){return jq(this.e)},M.prototype.TestPoint=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);return Ll(n,e,t)},M.prototype.RayCast=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);return $s(_,e,t,n,i)},M.prototype.ComputeAABB=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);Wc(i,e,t,n)},M.prototype.ComputeMass=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);rw(n,e,t)},M.prototype.get_m_vertices=function(){return q(le(this.e),u)},M.prototype.set_m_vertices=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ke(t,e)},M.prototype.get_m_count=function(){return rc(this.e)},M.prototype.set_m_count=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Dl(t,e)},M.prototype.get_m_prevVertex=function(){return q(Ph(this.e),u)};function wx(e,t,n){e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),this.e=e===d?Jk():t===d?_emscripten_bind_b2Vec3_b2Vec3_1(e):n===d?_emscripten_bind_b2Vec3_b2Vec3_2(e,t):Kk(e,t,n),p(wx)[this.e]=this}function zx(){this.e=Uo(),p(zx)[this.e]=this}function Hx(){this.e=rk(),p(Hx)[this.e]=this}function C(){this.e=wl(),p(C)[this.e]=this}function Ix(){this.e=cn(),p(Ix)[this.e]=this}function E(){this.e=uf(),p(E)[this.e]=this}function F(e){e=e&&"object"==typeof e?e.e:r(e),this.e=Of(e),p(F)[this.e]=this}function H(){c("cannot construct a b2PrismaticJoint, no constructor in IDL")}function Jx(){c("cannot construct a b2RayCastOutput, no constructor in IDL")}function Kx(){c("cannot construct a b2ContactID, no constructor in IDL")}function tx(){c("cannot construct a b2DestructionListenerWrapper, no constructor in IDL")}function Lx(){this.e=fx(),p(Lx)[this.e]=this}function Nx(e,t,n,i){e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i),this.e=e===d?Wq():t===d?_emscripten_bind_b2Mat22_b2Mat22_1(e):n===d?vs(e,t):i===d?_emscripten_bind_b2Mat22_b2Mat22_3(e,t,n):zs(e,t,n,i),p(Nx)[this.e]=this}function I(){this.e=Cw(),p(I)[this.e]=this}function Ox(){this.e=yn(),p(Ox)[this.e]=this}function J(){this.e=Jm(),p(J)[this.e]=this}function Px(){c("cannot construct a b2Draw, no constructor in IDL")}function Qx(){this.e=kq(),p(Qx)[this.e]=this}function t(){c("cannot construct a b2Joint, no constructor in IDL")}function Rx(){c("cannot construct a b2GearJoint, no constructor in IDL")}function Fx(){c("cannot construct a b2RayCastCallback, no constructor in IDL")}function K(){c("cannot construct a b2WeldJoint, no constructor in IDL")}function Sx(){this.e=Eu(),p(Sx)[this.e]=this}function L(){this.e=Nd(),p(L)[this.e]=this}function Mx(){c("cannot construct a b2ContactListener, no constructor in IDL")}function Tx(){this.e=Si(),p(Tx)[this.e]=this}function Bx(){c("cannot construct a b2QueryCallback, no constructor in IDL")}function D(){this.e=xn(),p(D)[this.e]=this}function Ux(e,t){e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),this.e=e===d?Ai():t===d?_emscripten_bind_b2Transform_b2Transform_1(e):Ys(e,t),p(Ux)[this.e]=this}function M(){this.e=jw(),p(M)[this.e]=this}function Vx(e,t,n){e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),this.e=e===d?Ct():t===d?_emscripten_bind_b2Color_b2Color_1(e):n===d?_emscripten_bind_b2Color_b2Color_2(e,t):Bt(e,t,n),p(Vx)[this.e]=this}function N(){c("cannot construct a b2RopeJoint, no constructor in IDL")}function Wx(){c("cannot construct a b2RayCastInput, no constructor in IDL")}function O(){this.e=Fj(),p(O)[this.e]=this}function P(){this.e=Hq(),p(P)[this.e]=this}function Xx(){this.e=jt(),p(Xx)[this.e]=this}function Q(){this.e=mn(),p(Q)[this.e]=this}function Zx(){this.e=su(),p(Zx)[this.e]=this}function R(){c("cannot construct a b2WheelJoint, no constructor in IDL")}function S(){c("cannot construct a b2PulleyJoint, no constructor in IDL")}function T(){this.e=Yp(),p(T)[this.e]=this}function G(){c("cannot construct a b2Contact, no constructor in IDL")}function xx(){c("cannot construct a b2Shape, no constructor in IDL")}M.prototype.set_m_prevVertex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);cs(t,e)},M.prototype.get_m_nextVertex=function(){return q(Zf(this.e),u)},M.prototype.set_m_nextVertex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);zh(t,e)},M.prototype.get_m_hasPrevVertex=function(){return zq(this.e)},M.prototype.set_m_hasPrevVertex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Eg(t,e)},M.prototype.get_m_hasNextVertex=function(){return zo(this.e)},M.prototype.set_m_hasNextVertex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);As(t,e)},M.prototype.get_m_type=function(){return ek(this.e)},M.prototype.set_m_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ug(t,e)},M.prototype.get_m_radius=function(){return dt(this.e)},M.prototype.set_m_radius=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ft(t,e)},M.prototype.__destroy__=function(){nm(this.e)},Vx.prototype=Object.create(j.prototype),Vx.prototype.g=Vx,Vx.k={},e.b2Color=Vx,Vx.prototype.Set=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);Bv(i,e,t,n)},Vx.prototype.get_r=function(){return Dd(this.e)},Vx.prototype.set_r=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ze(t,e)},Vx.prototype.get_g=function(){return xp(this.e)},Vx.prototype.set_g=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);zc(t,e)},Vx.prototype.get_b=function(){return mt(this.e)},Vx.prototype.set_b=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Am(t,e)},Vx.prototype.__destroy__=function(){Xm(this.e)},N.prototype=Object.create(t.prototype),N.prototype.g=N,N.k={},e.b2RopeJoint=N,N.prototype.GetLocalAnchorA=function(){return q(Pr(this.e),u)},N.prototype.GetLocalAnchorB=function(){return q(Aj(this.e),u)},N.prototype.SetMaxLength=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);bx(t,e)},N.prototype.GetMaxLength=function(){return df(this.e)},N.prototype.GetLimitState=function(){return Uk(this.e)},N.prototype.GetType=function(){return ns(this.e)},N.prototype.GetBodyA=function(){return q(Fv(this.e),v)},N.prototype.GetBodyB=function(){return q(Bl(this.e),v)},N.prototype.GetAnchorA=function(){return q(vj(this.e),u)},N.prototype.GetAnchorB=function(){return q(qf(this.e),u)},N.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(pt(t,e),u)},N.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return fw(t,e)},N.prototype.GetNext=function(){return q(zp(this.e),t)},N.prototype.GetUserData=function(){return lk(this.e)},N.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ts(t,e)},N.prototype.IsActive=function(){return Nu(this.e)},N.prototype.GetCollideConnected=function(){return Ju(this.e)},N.prototype.__destroy__=function(){Cr(this.e)},Wx.prototype=Object.create(j.prototype),Wx.prototype.g=Wx,Wx.k={},e.b2RayCastInput=Wx,Wx.prototype.get_p1=function(){return q(Lc(this.e),u)},Wx.prototype.set_p1=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);iv(t,e)},Wx.prototype.get_p2=function(){return q(Nl(this.e),u)},Wx.prototype.set_p2=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);lg(t,e)},Wx.prototype.get_maxFraction=function(){return Pm(this.e)},Wx.prototype.set_maxFraction=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ro(t,e)},Wx.prototype.__destroy__=function(){wf(this.e)},O.prototype=Object.create(xx.prototype),O.prototype.g=O,O.k={},e.b2PolygonShape=O,O.prototype.Set=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);ch(n,e,t)},O.prototype.SetAsBox=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);n===d?tv(_,e,t):i===d?_emscripten_bind_b2PolygonShape_SetAsBox_3(_,e,t,n):jn(_,e,t,n,i)},O.prototype.GetVertexCount=function(){return wq(this.e)},O.prototype.GetVertex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Is(t,e),u)},O.prototype.GetType=function(){return bi(this.e)},O.prototype.GetChildCount=function(){return Bp(this.e)},O.prototype.TestPoint=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);return Dj(n,e,t)},O.prototype.RayCast=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);return Cc(_,e,t,n,i)},O.prototype.ComputeAABB=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);hm(i,e,t,n)},O.prototype.ComputeMass=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Xl(n,e,t)},O.prototype.get_m_centroid=function(){return q(mm(this.e),u)},O.prototype.set_m_centroid=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);gn(t,e)},O.prototype.get_m_count=function(){return wd(this.e)},O.prototype.set_m_count=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Td(t,e)},O.prototype.get_m_type=function(){return Vp(this.e)},O.prototype.set_m_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);vv(t,e)},O.prototype.get_m_radius=function(){return kk(this.e)},O.prototype.set_m_radius=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);dx(t,e)},O.prototype.__destroy__=function(){Ye(this.e)},P.prototype=Object.create(xx.prototype),P.prototype.g=P,P.k={},e.b2EdgeShape=P,P.prototype.Set=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Su(n,e,t)},P.prototype.GetType=function(){return vr(this.e)},P.prototype.GetChildCount=function(){return ld(this.e)},P.prototype.TestPoint=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);return lm(n,e,t)},P.prototype.RayCast=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);return lj(_,e,t,n,i)},P.prototype.ComputeAABB=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);Kr(i,e,t,n)},P.prototype.ComputeMass=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);vu(n,e,t)},P.prototype.get_m_vertex1=function(){return q($l(this.e),u)},P.prototype.set_m_vertex1=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);bv(t,e)},P.prototype.get_m_vertex2=function(){return q(kn(this.e),u)},P.prototype.set_m_vertex2=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);kr(t,e)},P.prototype.get_m_vertex0=function(){return q(gj(this.e),u)},P.prototype.set_m_vertex0=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Zi(t,e)},P.prototype.get_m_vertex3=function(){return q(gr(this.e),u)},P.prototype.set_m_vertex3=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ej(t,e)},P.prototype.get_m_hasVertex0=function(){return Em(this.e)},P.prototype.set_m_hasVertex0=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);cf(t,e)},P.prototype.get_m_hasVertex3=function(){return tk(this.e)},P.prototype.set_m_hasVertex3=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Mc(t,e)},P.prototype.get_m_type=function(){return Wd(this.e)},P.prototype.set_m_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Cv(t,e)},P.prototype.get_m_radius=function(){return pw(this.e)},P.prototype.set_m_radius=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ts(t,e)},P.prototype.__destroy__=function(){uj(this.e)},Xx.prototype=Object.create(Yx.prototype),Xx.prototype.g=Xx,Xx.k={},e.JSContactFilter=Xx,Xx.prototype.ShouldCollide=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);return Ak(n,e,t)},Xx.prototype.__destroy__=function(){jk(this.e)},Q.prototype=Object.create(D.prototype),Q.prototype.g=Q,Q.k={},e.b2RevoluteJointDef=Q,Q.prototype.Initialize=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);Qu(i,e,t,n)},Q.prototype.get_localAnchorA=function(){return q(ed(this.e),u)},Q.prototype.set_localAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fh(t,e)},Q.prototype.get_localAnchorB=function(){return q(hk(this.e),u)},Q.prototype.set_localAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Sn(t,e)},Q.prototype.get_referenceAngle=function(){return ik(this.e)},Q.prototype.set_referenceAngle=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fq(t,e)},Q.prototype.get_enableLimit=function(){return ri(this.e)},Q.prototype.set_enableLimit=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);up(t,e)},Q.prototype.get_lowerAngle=function(){return Hl(this.e)},Q.prototype.set_lowerAngle=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ko(t,e)},Q.prototype.get_upperAngle=function(){return ve(this.e)},Q.prototype.set_upperAngle=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Lm(t,e)},Q.prototype.get_enableMotor=function(){return ep(this.e)},Q.prototype.set_enableMotor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vi(t,e)},Q.prototype.get_motorSpeed=function(){return mg(this.e)},Q.prototype.set_motorSpeed=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Dw(t,e)},Q.prototype.get_maxMotorTorque=function(){return Eq(this.e)},Q.prototype.set_maxMotorTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Sv(t,e)},Q.prototype.get_type=function(){return Mm(this.e)},Q.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ck(t,e)},Q.prototype.get_userData=function(){return Hn(this.e)},Q.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);dd(t,e)},Q.prototype.get_bodyA=function(){return q(du(this.e),v)},Q.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Rq(t,e)},Q.prototype.get_bodyB=function(){return q(qk(this.e),v)},Q.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vg(t,e)},Q.prototype.get_collideConnected=function(){return Ks(this.e)},Q.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);eg(t,e)},Q.prototype.__destroy__=function(){Hp(this.e)},Zx.prototype=Object.create(Px.prototype),Zx.prototype.g=Zx,Zx.k={},e.JSDraw=Zx,Zx.prototype.DrawPolygon=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);fo(i,e,t,n)},Zx.prototype.DrawSolidPolygon=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);vg(i,e,t,n)},Zx.prototype.DrawCircle=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);Sc(i,e,t,n)},Zx.prototype.DrawSolidCircle=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);Fc(_,e,t,n,i)},Zx.prototype.DrawSegment=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);id(i,e,t,n)},Zx.prototype.DrawTransform=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);uo(t,e)},Zx.prototype.__destroy__=function(){yg(this.e)},R.prototype=Object.create(t.prototype),R.prototype.g=R,R.k={},e.b2WheelJoint=R,R.prototype.GetLocalAnchorA=function(){return q(ug(this.e),u)},R.prototype.GetLocalAnchorB=function(){return q(Ff(this.e),u)},R.prototype.GetLocalAxisA=function(){return q(Dv(this.e),u)},R.prototype.GetJointTranslation=function(){return Rs(this.e)},R.prototype.GetJointSpeed=function(){return hg(this.e)},R.prototype.IsMotorEnabled=function(){return Vf(this.e)},R.prototype.EnableMotor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);tg(t,e)},R.prototype.SetMotorSpeed=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ie(t,e)},R.prototype.GetMotorSpeed=function(){return Zn(this.e)},R.prototype.SetMaxMotorTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Hj(t,e)},R.prototype.GetMaxMotorTorque=function(){return Yd(this.e)},R.prototype.GetMotorTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return Ss(t,e)},R.prototype.SetSpringFrequencyHz=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);xi(t,e)},R.prototype.GetSpringFrequencyHz=function(){return Iw(this.e)},R.prototype.SetSpringDampingRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Gp(t,e)},R.prototype.GetSpringDampingRatio=function(){return pc(this.e)},R.prototype.GetType=function(){return wv(this.e)},R.prototype.GetBodyA=function(){return q(to(this.e),v)},R.prototype.GetBodyB=function(){return q(Wm(this.e),v)},R.prototype.GetAnchorA=function(){return q(ds(this.e),u)},R.prototype.GetAnchorB=function(){return q(Ii(this.e),u)},R.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Pf(t,e),u)},R.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return ln(t,e)},R.prototype.GetNext=function(){return q(un(this.e),t)},R.prototype.GetUserData=function(){return oo(this.e)},R.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Rt(t,e)},R.prototype.IsActive=function(){return Vs(this.e)},R.prototype.GetCollideConnected=function(){return Fp(this.e)},R.prototype.__destroy__=function(){xw(this.e)},S.prototype=Object.create(t.prototype),S.prototype.g=S,S.k={},e.b2PulleyJoint=S,S.prototype.GetGroundAnchorA=function(){return q(Hd(this.e),u)},S.prototype.GetGroundAnchorB=function(){return q(Ng(this.e),u)},S.prototype.GetLengthA=function(){return vo(this.e)},S.prototype.GetLengthB=function(){return Lk(this.e)},S.prototype.GetRatio=function(){return Mo(this.e)},S.prototype.GetCurrentLengthA=function(){return xl(this.e)},S.prototype.GetCurrentLengthB=function(){return rj(this.e)},S.prototype.GetType=function(){return nj(this.e)},S.prototype.GetBodyA=function(){return q(Mq(this.e),v)},S.prototype.GetBodyB=function(){return q(Be(this.e),v)},S.prototype.GetAnchorA=function(){return q(kv(this.e),u)},S.prototype.GetAnchorB=function(){return q(Bh(this.e),u)},S.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Ep(t,e),u)},S.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return iu(t,e)},S.prototype.GetNext=function(){return q(dk(this.e),t)},S.prototype.GetUserData=function(){return em(this.e)},S.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Qc(t,e)},S.prototype.IsActive=function(){return Wi(this.e)},S.prototype.GetCollideConnected=function(){return Ah(this.e)},S.prototype.__destroy__=function(){Go(this.e)},T.prototype=Object.create(D.prototype),T.prototype.g=T,T.k={},e.b2MouseJointDef=T,T.prototype.get_target=function(){return q(bn(this.e),u)},T.prototype.set_target=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);he(t,e)},T.prototype.get_maxForce=function(){return Ip(this.e)},T.prototype.set_maxForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sq(t,e)},T.prototype.get_frequencyHz=function(){return aq(this.e)},T.prototype.set_frequencyHz=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ct(t,e)},T.prototype.get_dampingRatio=function(){return Sg(this.e)},T.prototype.set_dampingRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fp(t,e)},T.prototype.get_type=function(){return Zw(this.e)},T.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Xc(t,e)},T.prototype.get_userData=function(){return nt(this.e)},T.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);hd(t,e)},T.prototype.get_bodyA=function(){return q(il(this.e),v)},T.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);be(t,e)},T.prototype.get_bodyB=function(){return q(Zg(this.e),v)},T.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);$h(t,e)},T.prototype.get_collideConnected=function(){return sf(this.e)},T.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);zw(t,e)},T.prototype.__destroy__=function(){zg(this.e)},G.prototype=Object.create(j.prototype),G.prototype.g=G,G.k={},e.b2Contact=G,G.prototype.GetManifold=function(){return q(Jt(this.e),Ix)},G.prototype.IsTouching=function(){return Oe(this.e)},G.prototype.SetEnabled=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);$f(t,e)},G.prototype.IsEnabled=function(){return Tj(this.e)},G.prototype.GetNext=function(){return q(Ud(this.e),G)},G.prototype.GetFixtureA=function(){return q(jf(this.e),w)},G.prototype.GetChildIndexA=function(){return Yt(this.e)},G.prototype.GetFixtureB=function(){return q(qw(this.e),w)},G.prototype.GetChildIndexB=function(){return tr(this.e)},G.prototype.SetFriction=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Sr(t,e)},G.prototype.GetFriction=function(){return Hi(this.e)},G.prototype.ResetFriction=function(){jv(this.e)},G.prototype.SetRestitution=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);er(t,e)},G.prototype.GetRestitution=function(){return Fn(this.e)},G.prototype.ResetRestitution=function(){Qi(this.e)},G.prototype.SetTangentSpeed=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Lj(t,e)},G.prototype.GetTangentSpeed=function(){return Nn(this.e)},xx.prototype=Object.create(j.prototype),xx.prototype.g=xx,xx.k={},e.b2Shape=xx,xx.prototype.GetType=function(){return ro(this.e)},xx.prototype.GetChildCount=function(){return Ft(this.e)},xx.prototype.TestPoint=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);return $g(n,e,t)},xx.prototype.RayCast=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);return Gd(_,e,t,n,i)},xx.prototype.ComputeAABB=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);tc(i,e,t,n)},xx.prototype.ComputeMass=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);ut(n,e,t)},xx.prototype.get_m_type=function(){return Pk(this.e)},xx.prototype.set_m_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Qs(t,e)},xx.prototype.get_m_radius=function(){return Jr(this.e)},xx.prototype.set_m_radius=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ag(t,e)},xx.prototype.__destroy__=function(){zm(this.e)},U.prototype=Object.create(D.prototype),U.prototype.g=U,U.k={},e.b2DistanceJointDef=U,U.prototype.Initialize=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);Kn(_,e,t,n,i)},U.prototype.get_localAnchorA=function(){return q(Jj(this.e),u)},U.prototype.set_localAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Nw(t,e)},U.prototype.get_localAnchorB=function(){return q(Pq(this.e),u)},U.prototype.set_localAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);xk(t,e)},U.prototype.get_length=function(){return Ae(this.e)},U.prototype.set_length=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ji(t,e)},U.prototype.get_frequencyHz=function(){return wo(this.e)},U.prototype.set_frequencyHz=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);gk(t,e)},U.prototype.get_dampingRatio=function(){return nk(this.e)},U.prototype.set_dampingRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Qg(t,e)},U.prototype.get_type=function(){return Ni(this.e)},U.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Jq(t,e)},U.prototype.get_userData=function(){return ad(this.e)},U.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);yj(t,e)},U.prototype.get_bodyA=function(){return q(Bf(this.e),v)},U.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ls(t,e)},U.prototype.get_bodyB=function(){return q(mv(this.e),v)},U.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);hq(t,e)},U.prototype.get_collideConnected=function(){return eq(this.e)},U.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);gu(t,e)},U.prototype.__destroy__=function(){xu(this.e)},v.prototype=Object.create(j.prototype),v.prototype.g=v,v.k={},e.b2Body=v,v.prototype.CreateFixture=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);return q(t===d?cm(n,e):dm(n,e,t),w)},v.prototype.DestroyFixture=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Un(t,e)},v.prototype.SetTransform=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);pf(n,e,t)},v.prototype.GetTransform=function(){return q($t(this.e),Ux)},v.prototype.GetPosition=function(){return q(Dh(this.e),u)},v.prototype.GetAngle=function(){return Ru(this.e)},v.prototype.GetWorldCenter=function(){return q(Yk(this.e),u)},v.prototype.GetLocalCenter=function(){return q(Xv(this.e),u)},v.prototype.SetLinearVelocity=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sl(t,e)},v.prototype.GetLinearVelocity=function(){return q(et(this.e),u)},v.prototype.SetAngularVelocity=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ov(t,e)},v.prototype.GetAngularVelocity=function(){return Oj(this.e)},v.prototype.ApplyForce=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);St(i,e,t,n)},v.prototype.ApplyForceToCenter=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);xf(n,e,t)},v.prototype.ApplyTorque=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);In(n,e,t)},v.prototype.ApplyLinearImpulse=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);Wl(i,e,t,n)},v.prototype.ApplyAngularImpulse=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);we(n,e,t)},v.prototype.GetMass=function(){return Co(this.e)},v.prototype.GetInertia=function(){return ks(this.e)},v.prototype.GetMassData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Zh(t,e)},v.prototype.SetMassData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ke(t,e)},v.prototype.ResetMassData=function(){Xr(this.e)},v.prototype.GetWorldPoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(yk(t,e),u)},v.prototype.GetWorldVector=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(ah(t,e),u)},v.prototype.GetLocalPoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(lh(t,e),u)},v.prototype.GetLocalVector=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Rm(t,e),u)},v.prototype.GetLinearVelocityFromWorldPoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(nr(t,e),u)},v.prototype.GetLinearVelocityFromLocalPoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Vq(t,e),u)},v.prototype.GetLinearDamping=function(){return Vr(this.e)},v.prototype.SetLinearDamping=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vm(t,e)},v.prototype.GetAngularDamping=function(){return $n(this.e)},v.prototype.SetAngularDamping=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);cw(t,e)},v.prototype.GetGravityScale=function(){return Wg(this.e)},v.prototype.SetGravityScale=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sm(t,e)},v.prototype.SetType=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Bo(t,e)},v.prototype.GetType=function(){return Gr(this.e)},v.prototype.SetBullet=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);jl(t,e)},v.prototype.IsBullet=function(){return Tl(this.e)},v.prototype.SetSleepingAllowed=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Lg(t,e)},v.prototype.IsSleepingAllowed=function(){return rq(this.e)},v.prototype.SetAwake=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fv(t,e)},v.prototype.IsAwake=function(){return ee(this.e)},v.prototype.SetActive=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fm(t,e)},v.prototype.IsActive=function(){return Pi(this.e)},v.prototype.SetFixedRotation=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vh(t,e)},v.prototype.IsFixedRotation=function(){return Fi(this.e)},v.prototype.GetFixtureList=function(){return q(dp(this.e),w)},v.prototype.GetJointList=function(){return q(Kw(this.e),Sx)},v.prototype.GetContactList=function(){return q(Ei(this.e),$x)},v.prototype.GetNext=function(){return q(Ev(this.e),v)},v.prototype.GetUserData=function(){return cl(this.e)},v.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Pw(t,e)},v.prototype.GetWorld=function(){return q(cv(this.e),F)},v.prototype.Dump=function(){Wk(this.e)},W.prototype=Object.create(t.prototype),W.prototype.g=W,W.k={},e.b2FrictionJoint=W,W.prototype.GetLocalAnchorA=function(){return q(op(this.e),u)},W.prototype.GetLocalAnchorB=function(){return q(Li(this.e),u)},W.prototype.SetMaxForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);lu(t,e)},W.prototype.GetMaxForce=function(){return Sd(this.e)},W.prototype.SetMaxTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);$p(t,e)},W.prototype.GetMaxTorque=function(){return kj(this.e)},W.prototype.GetType=function(){return Pg(this.e)},W.prototype.GetBodyA=function(){return q(Lw(this.e),v)},W.prototype.GetBodyB=function(){return q(Af(this.e),v)},W.prototype.GetAnchorA=function(){return q(ms(this.e),u)},W.prototype.GetAnchorB=function(){return q(Kv(this.e),u)},W.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Iq(t,e),u)},W.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return km(t,e)},W.prototype.GetNext=function(){return q(fs(this.e),t)},W.prototype.GetUserData=function(){return Rr(this.e)},W.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);bq(t,e)},W.prototype.IsActive=function(){return yc(this.e)},W.prototype.GetCollideConnected=function(){return Rp(this.e)},W.prototype.__destroy__=function(){kp(this.e)},ay.prototype=Object.create(j.prototype),ay.prototype.g=ay,ay.k={},e.b2DestructionListener=ay,ay.prototype.__destroy__=function(){Uc(this.e)},X.prototype=Object.create(D.prototype),X.prototype.g=X,X.k={},e.b2GearJointDef=X,X.prototype.get_joint1=function(){return q(cj(this.e),t)},X.prototype.set_joint1=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);jr(t,e)},X.prototype.get_joint2=function(){return q(bg(this.e),t)},X.prototype.set_joint2=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ku(t,e)},X.prototype.get_ratio=function(){return Cp(this.e)},X.prototype.set_ratio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Gj(t,e)},X.prototype.get_type=function(){return Nm(this.e)},X.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);gf(t,e)},X.prototype.get_userData=function(){return wi(this.e)},X.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);nw(t,e)},X.prototype.get_bodyA=function(){return q(fk(this.e),v)},X.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ui(t,e)},X.prototype.get_bodyB=function(){return q(Xg(this.e),v)},X.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ew(t,e)},X.prototype.get_collideConnected=function(){return gl(this.e)},X.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Pt(t,e)},X.prototype.__destroy__=function(){Qq(this.e)},Y.prototype=Object.create(t.prototype),Y.prototype.g=Y,Y.k={},e.b2RevoluteJoint=Y,Y.prototype.GetLocalAnchorA=function(){return q(Gc(this.e),u)},Y.prototype.GetLocalAnchorB=function(){return q(it(this.e),u)},Y.prototype.GetReferenceAngle=function(){return tl(this.e)},Y.prototype.GetJointAngle=function(){return hh(this.e)},Y.prototype.GetJointSpeed=function(){return Ef(this.e)},Y.prototype.IsLimitEnabled=function(){return Qv(this.e)},Y.prototype.EnableLimit=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ol(t,e)},Y.prototype.GetLowerLimit=function(){return Xk(this.e)},Y.prototype.GetUpperLimit=function(){return oe(this.e)},Y.prototype.SetLimits=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Ms(n,e,t)},Y.prototype.IsMotorEnabled=function(){return ge(this.e)},Y.prototype.EnableMotor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Jp(t,e)},Y.prototype.SetMotorSpeed=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);xo(t,e)},Y.prototype.GetMotorSpeed=function(){return Tg(this.e)},Y.prototype.SetMaxMotorTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);kw(t,e)},Y.prototype.GetMaxMotorTorque=function(){return vk(this.e)},Y.prototype.GetMotorTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return Jc(t,e)},Y.prototype.GetType=function(){return Tn(this.e)},Y.prototype.GetBodyA=function(){return q(Xj(this.e),v)},Y.prototype.GetBodyB=function(){return q(ol(this.e),v)},Y.prototype.GetAnchorA=function(){return q(bs(this.e),u)},Y.prototype.GetAnchorB=function(){return q(ov(this.e),u)},Y.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Hu(t,e),u)},Y.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return Nh(t,e)},Y.prototype.GetNext=function(){return q(pv(this.e),t)},Y.prototype.GetUserData=function(){return ti(this.e)},Y.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Uv(t,e)},Y.prototype.IsActive=function(){return yv(this.e)},Y.prototype.GetCollideConnected=function(){return ru(this.e)},Y.prototype.__destroy__=function(){Md(this.e)},Yx.prototype=Object.create(j.prototype),Yx.prototype.g=Yx,Yx.k={},e.b2ContactFilter=Yx,Yx.prototype.__destroy__=function(){Cg(this.e)},$x.prototype=Object.create(j.prototype),$x.prototype.g=$x,$x.k={},e.b2ContactEdge=$x,$x.prototype.get_other=function(){return q(zj(this.e),v)},$x.prototype.set_other=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);qj(t,e)},$x.prototype.get_contact=function(){return q(Gn(this.e),G)},$x.prototype.set_contact=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);qi(t,e)},$x.prototype.get_prev=function(){return q(Fh(this.e),$x)},$x.prototype.set_prev=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);$j(t,e)},$x.prototype.get_next=function(){return q(lr(this.e),$x)},$x.prototype.set_next=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);qc(t,e)},$x.prototype.__destroy__=function(){au(this.e)},Z.prototype=Object.create(D.prototype),Z.prototype.g=Z,Z.k={},e.b2RopeJointDef=Z,Z.prototype.get_localAnchorA=function(){return q(pi(this.e),u)},Z.prototype.set_localAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Bc(t,e)},Z.prototype.get_localAnchorB=function(){return q(cd(this.e),u)},Z.prototype.set_localAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);lw(t,e)},Z.prototype.get_maxLength=function(){return hl(this.e)},Z.prototype.set_maxLength=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Kl(t,e)},Z.prototype.get_type=function(){return Nq(this.e)},Z.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ql(t,e)},Z.prototype.get_userData=function(){return nh(this.e)},Z.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Xo(t,e)},Z.prototype.get_bodyA=function(){return q(mk(this.e),v)},Z.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);yu(t,e)},Z.prototype.get_bodyB=function(){return q(uw(this.e),v)},Z.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Fe(t,e)},Z.prototype.get_collideConnected=function(){return di(this.e)},Z.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);xd(t,e)},Z.prototype.__destroy__=function(){Us(this.e)},$.prototype=Object.create(D.prototype),$.prototype.g=$,$.k={},e.b2MotorJointDef=$,$.prototype.Initialize=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);kd(n,e,t)},$.prototype.get_linearOffset=function(){return q(Gm(this.e),u)},$.prototype.set_linearOffset=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Oo(t,e)},$.prototype.get_angularOffset=function(){return Qt(this.e)},$.prototype.set_angularOffset=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ph(t,e)},$.prototype.get_maxForce=function(){return $c(this.e)},$.prototype.set_maxForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);pg(t,e)},$.prototype.get_maxTorque=function(){return Uq(this.e)},$.prototype.set_maxTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Uu(t,e)},$.prototype.get_correctionFactor=function(){return Av(this.e)},$.prototype.set_correctionFactor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);xj(t,e)},$.prototype.get_type=function(){return Or(this.e)},$.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Kc(t,e)},$.prototype.get_userData=function(){return Bu(this.e)},$.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vd(t,e)},$.prototype.get_bodyA=function(){return q(Ew(this.e),v)},$.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ul(t,e)},$.prototype.get_bodyB=function(){return q(Fk(this.e),v)},$.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Xs(t,e)},$.prototype.get_collideConnected=function(){return ne(this.e)},$.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);us(t,e)},$.prototype.__destroy__=function(){Os(this.e)},e.b2Shape.e_circle=Sk(),e.b2Shape.e_edge=uk(),e.b2Shape.e_polygon=Oc(),e.b2Shape.e_chain=Hh(),e.b2Shape.e_typeCount=of(),e.e_unknownJoint=Gv(),e.e_revoluteJoint=ce(),e.e_prismaticJoint=yr(),e.e_distanceJoint=Fo(),e.e_pulleyJoint=Yf(),e.e_mouseJoint=ae(),e.e_gearJoint=Gt(),e.e_wheelJoint=Zr(),e.e_weldJoint=$m(),e.e_frictionJoint=xe(),e.e_ropeJoint=rs(),e.e_motorJoint=Po(),e.e_inactiveLimit=dv(),e.e_atLowerLimit=On(),e.e_atUpperLimit=Xw(),e.e_equalLimits=Ci(),e.b2Manifold.e_circles=co(),e.b2Manifold.e_faceA=ok(),e.b2Manifold.e_faceB=pk(),e.b2_staticBody=Km(),e.b2_kinematicBody=Yq(),e.b2_dynamicBody=Sq(),e.b2Draw.e_shapeBit=Gi(),e.b2Draw.e_jointBit=qg(),e.b2Draw.e_aabbBit=Pu(),e.b2Draw.e_pairBit=jp(),e.b2Draw.e_centerOfMassBit=iw(),e.b2ContactFeature.e_vertex=Ih(),e.b2ContactFeature.e_face=tm(),j.prototype=Object.create(j.prototype),j.prototype.g=j,j.k={},e.WrapperObject=j,e.getCache=p,e.wrapPointer=q,e.castObject=nx,e.NULL=q(0),e.destroy=ox,e.compare=px,e.getPointer=qx,e.getClass=rx,sx.prototype=Object.create(tx.prototype),sx.prototype.g=sx,sx.k={},e.JSDestructionListener=sx,sx.prototype.SayGoodbyeJoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ym(t,e)},sx.prototype.SayGoodbyeFixture=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);vq(t,e)},sx.prototype.__destroy__=function(){Nr(this.e)},ux.prototype=Object.create(j.prototype),ux.prototype.g=ux,ux.k={},e.b2ContactImpulse=ux,ux.prototype.get_count=function(){return Xn(this.e)},ux.prototype.set_count=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Kh(t,e)},ux.prototype.__destroy__=function(){tf(this.e)},s.prototype=Object.create(t.prototype),s.prototype.g=s,s.k={},e.b2DistanceJoint=s,s.prototype.GetLocalAnchorA=function(){return q(Es(this.e),u)},s.prototype.GetLocalAnchorB=function(){return q(Ki(this.e),u)},s.prototype.SetLength=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vv(t,e)},s.prototype.GetLength=function(){return Jl(this.e)},s.prototype.SetFrequency=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Gh(t,e)},s.prototype.GetFrequency=function(){return rm(this.e)},s.prototype.SetDampingRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);hf(t,e)},s.prototype.GetDampingRatio=function(){return Xh(this.e)},s.prototype.GetType=function(){return kl(this.e)},s.prototype.GetBodyA=function(){return q(ej(this.e),v)},s.prototype.GetBodyB=function(){return q(Rv(this.e),v)},s.prototype.GetAnchorA=function(){return q(ud(this.e),u)},s.prototype.GetAnchorB=function(){return q(th(this.e),u)},s.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Bn(t,e),u)},s.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return gt(t,e)},s.prototype.GetNext=function(){return q(Re(this.e),t)},s.prototype.GetUserData=function(){return Qw(this.e)},s.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);rn(t,e)},s.prototype.IsActive=function(){return oh(this.e)},s.prototype.GetCollideConnected=function(){return Ut(this.e)},s.prototype.__destroy__=function(){ur(this.e)},vx.prototype=Object.create(j.prototype),vx.prototype.g=vx,vx.k={},e.b2Mat33=vx,vx.prototype.SetZero=function(){Tu(this.e)},vx.prototype.Solve33=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Dp(t,e),wx)},vx.prototype.Solve22=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Ag(t,e),u)},vx.prototype.GetInverse22=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);hn(t,e)},vx.prototype.GetSymInverse33=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vl(t,e)},vx.prototype.get_ex=function(){return q(Ch(this.e),wx)},vx.prototype.set_ex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);bu(t,e)},vx.prototype.get_ey=function(){return q(md(this.e),wx)},vx.prototype.set_ey=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Mi(t,e)},vx.prototype.get_ez=function(){return q(Uw(this.e),wx)},vx.prototype.set_ez=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Du(t,e)},vx.prototype.__destroy__=function(){Id(this.e)},w.prototype=Object.create(j.prototype),w.prototype.g=w,w.k={},e.b2Fixture=w,w.prototype.GetType=function(){return ml(this.e)},w.prototype.GetShape=function(){return q(sv(this.e),xx)},w.prototype.SetSensor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);bj(t,e)},w.prototype.IsSensor=function(){return Yo(this.e)},w.prototype.SetFilterData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);gi(t,e)},w.prototype.GetFilterData=function(){return q(st(this.e),yx)},w.prototype.Refilter=function(){Vo(this.e)},w.prototype.GetBody=function(){return q(Jh(this.e),v)},w.prototype.GetNext=function(){return q(bk(this.e),w)},w.prototype.GetUserData=function(){return gm(this.e)},w.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);hr(t,e)},w.prototype.TestPoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return qu(t,e)},w.prototype.RayCast=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);return el(i,e,t,n)},w.prototype.GetMassData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ij(t,e)},w.prototype.SetDensity=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Oh(t,e)},w.prototype.GetDensity=function(){return Up(this.e)},w.prototype.GetFriction=function(){return Ou(this.e)},w.prototype.SetFriction=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sc(t,e)},w.prototype.GetRestitution=function(){return We(this.e)},w.prototype.SetRestitution=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Zt(t,e)},w.prototype.GetAABB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Jn(t,e),zx)},w.prototype.Dump=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);on(t,e)},w.prototype.__destroy__=function(){Pc(this.e)},yx.prototype=Object.create(j.prototype),yx.prototype.g=yx,yx.k={},e.b2Filter=yx,yx.prototype.get_categoryBits=function(){return Zm(this.e)},yx.prototype.set_categoryBits=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Mk(t,e)},yx.prototype.get_maskBits=function(){return bp(this.e)},yx.prototype.set_maskBits=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ss(t,e)},yx.prototype.get_groupIndex=function(){return Ue(this.e)},yx.prototype.set_groupIndex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);wn(t,e)},yx.prototype.__destroy__=function(){go(this.e)},Ax.prototype=Object.create(Bx.prototype),Ax.prototype.g=Ax,Ax.k={},e.JSQueryCallback=Ax,Ax.prototype.ReportFixture=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return pu(t,e)},Ax.prototype.__destroy__=function(){Jo(this.e)},y.prototype=Object.create(t.prototype),y.prototype.g=y,y.k={},e.b2MouseJoint=y,y.prototype.SetTarget=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);oi(t,e)},y.prototype.GetTarget=function(){return q(Kt(this.e),u)},y.prototype.SetMaxForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Aq(t,e)},y.prototype.GetMaxForce=function(){return Vt(this.e)},y.prototype.SetFrequency=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Zl(t,e)},y.prototype.GetFrequency=function(){return Dt(this.e)},y.prototype.SetDampingRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Qk(t,e)},y.prototype.GetDampingRatio=function(){return as(this.e)},y.prototype.GetType=function(){return Io(this.e)},y.prototype.GetBodyA=function(){return q(So(this.e),v)},y.prototype.GetBodyB=function(){return q(Cj(this.e),v)},y.prototype.GetAnchorA=function(){return q(tu(this.e),u)},y.prototype.GetAnchorB=function(){return q(Xq(this.e),u)},y.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(jm(t,e),u)},y.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return mo(t,e)},y.prototype.GetNext=function(){return q(Xi(this.e),t)},y.prototype.GetUserData=function(){return no(this.e)},y.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Mt(t,e)},y.prototype.IsActive=function(){return nd(this.e)},y.prototype.GetCollideConnected=function(){return Bi(this.e)},y.prototype.__destroy__=function(){Gq(this.e)},Cx.prototype=Object.create(j.prototype),Cx.prototype.g=Cx,Cx.k={},e.b2Rot=Cx,Cx.prototype.Set=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);wg(t,e)},Cx.prototype.SetIdentity=function(){Mg(this.e)},Cx.prototype.GetAngle=function(){return Np(this.e)},Cx.prototype.GetXAxis=function(){return q(Zj(this.e),u)},Cx.prototype.GetYAxis=function(){return q(sr(this.e),u)},Cx.prototype.get_s=function(){return Zp(this.e)},Cx.prototype.set_s=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);me(t,e)},Cx.prototype.get_c=function(){return xq(this.e)},Cx.prototype.set_c=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Mh(t,e)},Cx.prototype.__destroy__=function(){ap(this.e)},z.prototype=Object.create(t.prototype),z.prototype.g=z,z.k={},e.b2MotorJoint=z,z.prototype.SetLinearOffset=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Lp(t,e)},z.prototype.GetLinearOffset=function(){return q(Qp(this.e),u)},z.prototype.SetAngularOffset=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Pp(t,e)},z.prototype.GetAngularOffset=function(){return xv(this.e)},z.prototype.SetMaxForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);mp(t,e)},z.prototype.GetMaxForce=function(){return Wj(this.e)},z.prototype.SetMaxTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Zd(t,e)},z.prototype.GetMaxTorque=function(){return es(this.e)},z.prototype.SetCorrectionFactor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ie(t,e)},z.prototype.GetCorrectionFactor=function(){return tq(this.e)},z.prototype.GetType=function(){return cr(this.e)},z.prototype.GetBodyA=function(){return q(Rg(this.e),v)},z.prototype.GetBodyB=function(){return q(mi(this.e),v)},z.prototype.GetAnchorA=function(){return q(Tp(this.e),u)},z.prototype.GetAnchorB=function(){return q(rv(this.e),u)},z.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Mp(t,e),u)},z.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return Uf(t,e)},z.prototype.GetNext=function(){return q(zr(this.e),t)},z.prototype.GetUserData=function(){return Nk(this.e)},z.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ki(t,e)},z.prototype.IsActive=function(){return lo(this.e)},z.prototype.GetCollideConnected=function(){return ff(this.e)},z.prototype.__destroy__=function(){bl(this.e)},A.prototype=Object.create(j.prototype),A.prototype.g=A,A.k={},e.b2Profile=A,A.prototype.get_step=function(){return Ik(this.e)},A.prototype.set_step=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);pj(t,e)},A.prototype.get_collide=function(){return At(this.e)},A.prototype.set_collide=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);To(t,e)},A.prototype.get_solve=function(){return uq(this.e)},A.prototype.set_solve=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);kt(t,e)},A.prototype.get_solveInit=function(){return Iv(this.e)},A.prototype.set_solveInit=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);pl(t,e)},A.prototype.get_solveVelocity=function(){return aw(this.e)},A.prototype.set_solveVelocity=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Hm(t,e)},A.prototype.get_solvePosition=function(){return Fd(this.e)},A.prototype.set_solvePosition=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Bg(t,e)},A.prototype.get_broadphase=function(){return qd(this.e)},A.prototype.set_broadphase=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vn(t,e)},A.prototype.get_solveTOI=function(){return Hg(this.e)},A.prototype.set_solveTOI=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ui(t,e)},A.prototype.__destroy__=function(){Eh(this.e)},Dx.prototype=Object.create(j.prototype),Dx.prototype.g=Dx,Dx.k={},e.VoidPtr=Dx,Dx.prototype.__destroy__=function(){yp(this.e)},B.prototype=Object.create(j.prototype),B.prototype.g=B,B.k={},e.b2BodyDef=B,B.prototype.get_type=function(){return Lr(this.e)},B.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vc(t,e)},B.prototype.get_position=function(){return q(bd(this.e),u)},B.prototype.set_position=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Qd(t,e)},B.prototype.get_angle=function(){return hu(this.e)},B.prototype.set_angle=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Pl(t,e)},B.prototype.get_linearVelocity=function(){return q(lv(this.e),u)},B.prototype.set_linearVelocity=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);$k(t,e)},B.prototype.get_angularVelocity=function(){return Le(this.e)},B.prototype.set_angularVelocity=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Um(t,e)},B.prototype.get_linearDamping=function(){return Ek(this.e)},B.prototype.set_linearDamping=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Qr(t,e)},B.prototype.get_angularDamping=function(){return fr(this.e)},B.prototype.set_angularDamping=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Jv(t,e)},B.prototype.get_allowSleep=function(){return Zu(this.e)},B.prototype.set_allowSleep=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);mj(t,e)},B.prototype.get_awake=function(){return dr(this.e)},B.prototype.set_awake=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);am(t,e)},B.prototype.get_fixedRotation=function(){return io(this.e)},B.prototype.set_fixedRotation=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Tk(t,e)},B.prototype.get_bullet=function(){return Kf(this.e)},B.prototype.set_bullet=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sn(t,e)},B.prototype.get_active=function(){return Nj(this.e)},B.prototype.set_active=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);wk(t,e)},B.prototype.get_userData=function(){return Mv(this.e)},B.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Lu(t,e)},B.prototype.get_gravityScale=function(){return qo(this.e)},B.prototype.set_gravityScale=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ee(t,e)},B.prototype.__destroy__=function(){Gs(this.e)},Ex.prototype=Object.create(Fx.prototype),Ex.prototype.g=Ex,Ex.k={},e.JSRayCastCallback=Ex,Ex.prototype.ReportFixture=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);return Fm(_,e,t,n,i)},Ex.prototype.__destroy__=function(){gp(this.e)},Gx.prototype=Object.create(j.prototype),Gx.prototype.g=Gx,Gx.k={},e.b2ContactFeature=Gx,Gx.prototype.get_indexA=function(){return xh(this.e)},Gx.prototype.set_indexA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Hv(t,e)},Gx.prototype.get_indexB=function(){return Jw(this.e)},Gx.prototype.set_indexB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);mr(t,e)},Gx.prototype.get_typeA=function(){return im(this.e)},Gx.prototype.set_typeA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);nn(t,e)},Gx.prototype.get_typeB=function(){return Kp(this.e)},Gx.prototype.set_typeB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);xg(t,e)},Gx.prototype.__destroy__=function(){gq(this.e)},u.prototype=Object.create(j.prototype),u.prototype.g=u,u.k={},e.b2Vec2=u;function U(){this.e=fn(),p(U)[this.e]=this}function v(){c("cannot construct a b2Body, no constructor in IDL")}function W(){c("cannot construct a b2FrictionJoint, no constructor in IDL")}function ay(){c("cannot construct a b2DestructionListener, no constructor in IDL")}function X(){this.e=zn(),p(X)[this.e]=this}function Y(){c("cannot construct a b2RevoluteJoint, no constructor in IDL")}function Yx(){c("cannot construct a b2ContactFilter, no constructor in IDL")}function $x(){this.e=Fs(),p($x)[this.e]=this}function Z(){this.e=Dk(),p(Z)[this.e]=this}function $(){this.e=yh(),p($)[this.e]=this}u.prototype.SetZero=function(){Br(this.e)},u.prototype.Set=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Wp(n,e,t)},u.prototype.op_add=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Rf(t,e)},u.prototype.op_sub=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);vh(t,e)},u.prototype.op_mul=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sj(t,e)},u.prototype.Length=function(){return Ar(this.e)},u.prototype.LengthSquared=function(){return Gw(this.e)},u.prototype.Normalize=function(){return gg(this.e)},u.prototype.IsValid=function(){return rp(this.e)},u.prototype.Skew=function(){return q($r(this.e),u)},u.prototype.get_x=function(){return ex(this.e)},u.prototype.set_x=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);vf(t,e)},u.prototype.get_y=function(){return bm(this.e)},u.prototype.set_y=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sw(t,e)},u.prototype.__destroy__=function(){hv(this.e)},wx.prototype=Object.create(j.prototype),wx.prototype.g=wx,wx.k={},e.b2Vec3=wx,wx.prototype.SetZero=function(){Xf(this.e)},wx.prototype.Set=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);ak(i,e,t,n)},wx.prototype.op_add=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Og(t,e)},wx.prototype.op_sub=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);po(t,e)},wx.prototype.op_mul=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);uv(t,e)},wx.prototype.get_x=function(){return Bd(this.e)},wx.prototype.set_x=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);wm(t,e)},wx.prototype.get_y=function(){return nu(this.e)},wx.prototype.set_y=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);lq(t,e)},wx.prototype.get_z=function(){return vc(this.e)},wx.prototype.set_z=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);pm(t,e)},wx.prototype.__destroy__=function(){Rh(this.e)},zx.prototype=Object.create(j.prototype),zx.prototype.g=zx,zx.k={},e.b2AABB=zx,zx.prototype.IsValid=function(){return so(this.e)},zx.prototype.GetCenter=function(){return q(vn(this.e),u)},zx.prototype.GetExtents=function(){return q(cu(this.e),u)},zx.prototype.GetPerimeter=function(){return um(this.e)},zx.prototype.Combine=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e);(t=t&&"object"==typeof t?t.e:r(t))===d?mq(n,e):nq(n,e,t)},zx.prototype.Contains=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return Qe(t,e)},zx.prototype.RayCast=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);return zl(n,e,t)},zx.prototype.get_lowerBound=function(){return q(He(this.e),u)},zx.prototype.set_lowerBound=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);yq(t,e)},zx.prototype.get_upperBound=function(){return q(Ze(this.e),u)},zx.prototype.set_upperBound=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);rf(t,e)},zx.prototype.__destroy__=function(){qq(this.e)},Hx.prototype=Object.create(j.prototype),Hx.prototype.g=Hx,Hx.k={},e.b2FixtureDef=Hx,Hx.prototype.get_shape=function(){return q(ju(this.e),xx)},Hx.prototype.set_shape=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Zv(t,e)},Hx.prototype.get_userData=function(){return re(this.e)},Hx.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);cq(t,e)},Hx.prototype.get_friction=function(){return Ht(this.e)},Hx.prototype.set_friction=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Cm(t,e)},Hx.prototype.get_restitution=function(){return ll(this.e)},Hx.prototype.set_restitution=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);jd(t,e)},Hx.prototype.get_density=function(){return je(this.e)},Hx.prototype.set_density=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ps(t,e)},Hx.prototype.get_isSensor=function(){return rg(this.e)},Hx.prototype.set_isSensor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Al(t,e)},Hx.prototype.get_filter=function(){return q(Hc(this.e),yx)},Hx.prototype.set_filter=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ei(t,e)},Hx.prototype.__destroy__=function(){Yv(this.e)},C.prototype=Object.create(D.prototype),C.prototype.g=C,C.k={},e.b2FrictionJointDef=C,C.prototype.Initialize=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);mw(i,e,t,n)},C.prototype.get_localAnchorA=function(){return q(If(this.e),u)},C.prototype.set_localAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ig(t,e)},C.prototype.get_localAnchorB=function(){return q(Mj(this.e),u)},C.prototype.set_localAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ck(t,e)},C.prototype.get_maxForce=function(){return Tm(this.e)},C.prototype.set_maxForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);en(t,e)},C.prototype.get_maxTorque=function(){return np(this.e)},C.prototype.set_maxTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Hs(t,e)},C.prototype.get_type=function(){return Ic(this.e)},C.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);hs(t,e)},C.prototype.get_userData=function(){return hi(this.e)},C.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);uc(t,e)},C.prototype.get_bodyA=function(){return q(Fu(this.e),v)},C.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Hw(t,e)},C.prototype.get_bodyB=function(){return q(Bq(this.e),v)},C.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ys(t,e)},C.prototype.get_collideConnected=function(){return js(this.e)},C.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);se(t,e)},C.prototype.__destroy__=function(){yi(this.e)},Ix.prototype=Object.create(j.prototype),Ix.prototype.g=Ix,Ix.k={},e.b2Manifold=Ix,Ix.prototype.get_localNormal=function(){return q(yl(this.e),u)},Ix.prototype.set_localNormal=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Tr(t,e)},Ix.prototype.get_localPoint=function(){return q(Zq(this.e),u)},Ix.prototype.set_localPoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);qn(t,e)},Ix.prototype.get_type=function(){return Ld(this.e)},Ix.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Il(t,e)},Ix.prototype.get_pointCount=function(){return Tw(this.e)},Ix.prototype.set_pointCount=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Jg(t,e)},Ix.prototype.__destroy__=function(){dh(this.e)},E.prototype=Object.create(D.prototype),E.prototype.g=E,E.k={},e.b2PrismaticJointDef=E,E.prototype.Initialize=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);Hf(_,e,t,n,i)},E.prototype.get_localAnchorA=function(){return q(tj(this.e),u)},E.prototype.set_localAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);It(t,e)},E.prototype.get_localAnchorB=function(){return q(mf(this.e),u)},E.prototype.set_localAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ip(t,e)},E.prototype.get_localAxisA=function(){return q(Vu(this.e),u)},E.prototype.set_localAxisA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Mn(t,e)},E.prototype.get_referenceAngle=function(){return Je(this.e)},E.prototype.set_referenceAngle=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ci(t,e)},E.prototype.get_enableLimit=function(){return qt(this.e)},E.prototype.set_enableLimit=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);qm(t,e)},E.prototype.get_lowerTranslation=function(){return te(this.e)},E.prototype.set_lowerTranslation=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Pd(t,e)},E.prototype.get_upperTranslation=function(){return Ec(this.e)},E.prototype.set_upperTranslation=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);gv(t,e)},E.prototype.get_enableMotor=function(){return Ws(this.e)},E.prototype.set_enableMotor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Yr(t,e)},E.prototype.get_maxMotorForce=function(){return Ow(this.e)},E.prototype.set_maxMotorForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ti(t,e)},E.prototype.get_motorSpeed=function(){return $o(this.e)},E.prototype.set_motorSpeed=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);jo(t,e)},E.prototype.get_type=function(){return Mf(this.e)},E.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);vi(t,e)},E.prototype.get_userData=function(){return Vj(this.e)},E.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);gs(t,e)},E.prototype.get_bodyA=function(){return q(qp(this.e),v)},E.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sp(t,e)},E.prototype.get_bodyB=function(){return q(rl(this.e),v)},E.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);vl(t,e)},E.prototype.get_collideConnected=function(){return wt(this.e)},E.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ln(t,e)},E.prototype.__destroy__=function(){Ne(this.e)},F.prototype=Object.create(j.prototype),F.prototype.g=F,F.k={},e.b2World=F,F.prototype.SetDestructionListener=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Df(t,e)},F.prototype.SetContactFilter=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fd(t,e)},F.prototype.SetContactListener=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);de(t,e)},F.prototype.SetDebugDraw=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);cg(t,e)},F.prototype.CreateBody=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Wo(t,e),v)},F.prototype.DestroyBody=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ed(t,e)},F.prototype.CreateJoint=function(e){var n=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Gg(n,e),t)},F.prototype.DestroyJoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Dr(t,e)},F.prototype.Step=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);Gk(i,e,t,n)},F.prototype.ClearForces=function(){Qh(this.e)},F.prototype.DrawDebugData=function(){pd(this.e)},F.prototype.QueryAABB=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Lv(n,e,t)},F.prototype.RayCast=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);xt(i,e,t,n)},F.prototype.GetBodyList=function(){return q(tt(this.e),v)},F.prototype.GetJointList=function(){return q(pn(this.e),t)},F.prototype.GetContactList=function(){return q(Cu(this.e),G)},F.prototype.SetAllowSleeping=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Op(t,e)},F.prototype.GetAllowSleeping=function(){return Ri(this.e)},F.prototype.SetWarmStarting=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Rc(t,e)},F.prototype.GetWarmStarting=function(){return tp(this.e)},F.prototype.SetContinuousPhysics=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);an(t,e)},F.prototype.GetContinuousPhysics=function(){return dl(this.e)},F.prototype.SetSubStepping=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Qf(t,e)},F.prototype.GetSubStepping=function(){return rr(this.e)},F.prototype.GetProxyCount=function(){return fg(this.e)},F.prototype.GetBodyCount=function(){return hj(this.e)},F.prototype.GetJointCount=function(){return Yn(this.e)},F.prototype.GetContactCount=function(){return wj(this.e)},F.prototype.GetTreeHeight=function(){return $u(this.e)},F.prototype.GetTreeBalance=function(){return Dc(this.e)},F.prototype.GetTreeQuality=function(){return De(this.e)},F.prototype.SetGravity=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Wt(t,e)},F.prototype.GetGravity=function(){return q(od(this.e),u)},F.prototype.IsLocked=function(){return wc(this.e)},F.prototype.SetAutoClearForces=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Od(t,e)},F.prototype.GetAutoClearForces=function(){return Rk(this.e)},F.prototype.GetProfile=function(){return q(wu(this.e),A)},F.prototype.Dump=function(){ht(this.e)},F.prototype.__destroy__=function(){yo(this.e)},H.prototype=Object.create(t.prototype),H.prototype.g=H,H.k={},e.b2PrismaticJoint=H,H.prototype.GetLocalAnchorA=function(){return q(Ok(this.e),u)},H.prototype.GetLocalAnchorB=function(){return q(Ho(this.e),u)},H.prototype.GetLocalAxisA=function(){return q(li(this.e),u)},H.prototype.GetReferenceAngle=function(){return Ml(this.e)},H.prototype.GetJointTranslation=function(){return rh(this.e)},H.prototype.GetJointSpeed=function(){return Cn(this.e)},H.prototype.IsLimitEnabled=function(){return tw(this.e)},H.prototype.EnableLimit=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Sm(t,e)},H.prototype.GetLowerLimit=function(){return Ge(this.e)},H.prototype.GetUpperLimit=function(){return at(this.e)},H.prototype.SetLimits=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);sd(n,e,t)},H.prototype.IsMotorEnabled=function(){return El(this.e)},H.prototype.EnableMotor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Cs(t,e)},H.prototype.SetMotorSpeed=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Tt(t,e)},H.prototype.GetMotorSpeed=function(){return Kg(this.e)},H.prototype.SetMaxMotorForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);$w(t,e)},H.prototype.GetMaxMotorForce=function(){return pq(this.e)},H.prototype.GetMotorForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return dj(t,e)},H.prototype.GetType=function(){return Ve(this.e)},H.prototype.GetBodyA=function(){return q(oq(this.e),v)},H.prototype.GetBodyB=function(){return q(eu(this.e),v)},H.prototype.GetAnchorA=function(){return q(Cl(this.e),u)},H.prototype.GetAnchorB=function(){return q(Im(this.e),u)},H.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(zi(t,e),u)},H.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return kh(t,e)},H.prototype.GetNext=function(){return q(Te(this.e),t)},H.prototype.GetUserData=function(){return is(this.e)},H.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sk(t,e)},H.prototype.IsActive=function(){return Ym(this.e)},H.prototype.GetCollideConnected=function(){return mh(this.e)},H.prototype.__destroy__=function(){Fg(this.e)},Jx.prototype=Object.create(j.prototype),Jx.prototype.g=Jx,Jx.k={},e.b2RayCastOutput=Jx,Jx.prototype.get_normal=function(){return q(ng(this.e),u)},Jx.prototype.set_normal=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Wh(t,e)},Jx.prototype.get_fraction=function(){return bo(this.e)},Jx.prototype.set_fraction=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ye(t,e)},Jx.prototype.__destroy__=function(){tn(this.e)},Kx.prototype=Object.create(j.prototype),Kx.prototype.g=Kx,Kx.k={},e.b2ContactID=Kx,Kx.prototype.get_cf=function(){return q(bt(this.e),Gx)},Kx.prototype.set_cf=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Yj(t,e)},Kx.prototype.get_key=function(){return Nv(this.e)},Kx.prototype.set_key=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);dg(t,e)},Kx.prototype.__destroy__=function(){Dm(this.e)},tx.prototype=Object.create(j.prototype),tx.prototype.g=tx,tx.k={},e.b2DestructionListenerWrapper=tx,tx.prototype.__destroy__=function(){Vw(this.e)},Lx.prototype=Object.create(Mx.prototype),Lx.prototype.g=Lx,Lx.k={},e.JSContactListener=Lx,Lx.prototype.BeginContact=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);No(t,e)},Lx.prototype.EndContact=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);zd(t,e)},Lx.prototype.PreSolve=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Uh(n,e,t)},Lx.prototype.PostSolve=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Lq(n,e,t)},Lx.prototype.__destroy__=function(){Zk(this.e)},Nx.prototype=Object.create(j.prototype),Nx.prototype.g=Nx,Nx.k={},e.b2Mat22=Nx,Nx.prototype.Set=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Fr(n,e,t)},Nx.prototype.SetIdentity=function(){Xu(this.e)},Nx.prototype.SetZero=function(){Xt(this.e)},Nx.prototype.GetInverse=function(){return q(Bs(this.e),Nx)},Nx.prototype.Solve=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(wp(t,e),u)},Nx.prototype.get_ex=function(){return q(cp(this.e),u)},Nx.prototype.set_ex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);gw(t,e)},Nx.prototype.get_ey=function(){return q(Wu(this.e),u)},Nx.prototype.set_ey=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);pr(t,e)},Nx.prototype.__destroy__=function(){nv(this.e)},I.prototype=Object.create(D.prototype),I.prototype.g=I,I.k={},e.b2WheelJointDef=I,I.prototype.Initialize=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);Rj(_,e,t,n,i)},I.prototype.get_localAnchorA=function(){return q(Rl(this.e),u)},I.prototype.set_localAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);zf(t,e)},I.prototype.get_localAnchorB=function(){return q(Wn(this.e),u)},I.prototype.set_localAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Mw(t,e)},I.prototype.get_localAxisA=function(){return q(Ij(this.e),u)},I.prototype.set_localAxisA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Aw(t,e)},I.prototype.get_enableMotor=function(){return Fw(this.e)},I.prototype.set_enableMotor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);qe(t,e)},I.prototype.get_maxMotorTorque=function(){return uh(this.e)},I.prototype.set_maxMotorTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);xs(t,e)},I.prototype.get_motorSpeed=function(){return ps(this.e)},I.prototype.set_motorSpeed=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Sp(t,e)},I.prototype.get_frequencyHz=function(){return Ac(this.e)},I.prototype.set_frequencyHz=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);qr(t,e)},I.prototype.get_dampingRatio=function(){return ao(this.e)},I.prototype.set_dampingRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);wr(t,e)},I.prototype.get_type=function(){return Gu(this.e)},I.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ce(t,e)},I.prototype.get_userData=function(){return Pv(this.e)},I.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Sh(t,e)},I.prototype.get_bodyA=function(){return q(Ww(this.e),v)},I.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fu(t,e)},I.prototype.get_bodyB=function(){return q(Qn(this.e),v)},I.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);pe(t,e)},I.prototype.get_collideConnected=function(){return gd(this.e)},I.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Mr(t,e)},I.prototype.__destroy__=function(){Wf(this.e)},Ox.prototype=Object.create(xx.prototype),Ox.prototype.g=Ox,Ox.k={},e.b2CircleShape=Ox,Ox.prototype.GetType=function(){return ai(this.e)},Ox.prototype.GetChildCount=function(){return Jf(this.e)},Ox.prototype.TestPoint=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);return Tq(n,e,t)},Ox.prototype.RayCast=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);return Hk(_,e,t,n,i)},Ox.prototype.ComputeAABB=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);ot(i,e,t,n)},Ox.prototype.ComputeMass=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Oq(n,e,t)},Ox.prototype.get_m_p=function(){return q(wh(this.e),u)},Ox.prototype.set_m_p=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);yd(t,e)},Ox.prototype.get_m_type=function(){return Ds(this.e)},Ox.prototype.set_m_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);nf(t,e)},Ox.prototype.get_m_radius=function(){return si(this.e)},Ox.prototype.set_m_radius=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);bf(t,e)},Ox.prototype.__destroy__=function(){br(this.e)},J.prototype=Object.create(D.prototype),J.prototype.g=J,J.k={},e.b2WeldJointDef=J,J.prototype.Initialize=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);Et(i,e,t,n)},J.prototype.get_localAnchorA=function(){return q(Lt(this.e),u)},J.prototype.set_localAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);oj(t,e)},J.prototype.get_localAnchorB=function(){return q(pp(this.e),u)},J.prototype.set_localAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);af(t,e)},J.prototype.get_referenceAngle=function(){return qs(this.e)},J.prototype.set_referenceAngle=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ls(t,e)},J.prototype.get_frequencyHz=function(){return bh(this.e)},J.prototype.set_frequencyHz=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Wr(t,e)},J.prototype.get_dampingRatio=function(){return Fq(this.e)},J.prototype.set_dampingRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Sj(t,e)},J.prototype.get_type=function(){return Xp(this.e)},J.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ns(t,e)},J.prototype.get_userData=function(){return ku(this.e)},J.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Yh(t,e)},J.prototype.get_bodyA=function(){return q(qv(this.e),v)},J.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Cf(t,e)},J.prototype.get_bodyB=function(){return q(bw(this.e),v)},J.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Tv(t,e)},J.prototype.get_collideConnected=function(){return jj(this.e)},J.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Kd(t,e)},J.prototype.__destroy__=function(){vp(this.e)},Px.prototype=Object.create(j.prototype),Px.prototype.g=Px,Px.k={},e.b2Draw=Px,Px.prototype.SetFlags=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Pe(t,e)},Px.prototype.GetFlags=function(){return xc(this.e)},Px.prototype.AppendFlags=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Au(t,e)},Px.prototype.ClearFlags=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Oi(t,e)},Px.prototype.__destroy__=function(){Qj(this.e)},Qx.prototype=Object.create(j.prototype),Qx.prototype.g=Qx,Qx.k={},e.b2MassData=Qx,Qx.prototype.get_mass=function(){return ww(this.e)},Qx.prototype.set_mass=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ad(t,e)},Qx.prototype.get_center=function(){return q(Nf(this.e),u)},Qx.prototype.set_center=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Kj(t,e)},Qx.prototype.get_I=function(){return os(this.e)},Qx.prototype.set_I=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);yt(t,e)},Qx.prototype.__destroy__=function(){zt(this.e)},t.prototype=Object.create(j.prototype),t.prototype.g=t,t.k={},e.b2Joint=t,t.prototype.GetType=function(){return Sw(this.e)},t.prototype.GetBodyA=function(){return q(Sf(this.e),v)},t.prototype.GetBodyB=function(){return q(yw(this.e),v)},t.prototype.GetAnchorA=function(){return q(En(this.e),u)},t.prototype.GetAnchorB=function(){return q(Uj(this.e),u)},t.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Bm(t,e),u)},t.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return Bk(t,e)},t.prototype.GetNext=function(){return q(vt(this.e),t)},t.prototype.GetUserData=function(){return Gl(this.e)},t.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);cx(t,e)},t.prototype.IsActive=function(){return Yu(this.e)},t.prototype.GetCollideConnected=function(){return Tf(this.e)},t.prototype.Dump=function(){Bw(this.e)},Rx.prototype=Object.create(t.prototype),Rx.prototype.g=Rx,Rx.k={},e.b2GearJoint=Rx,Rx.prototype.GetJoint1=function(){return q(Xd(this.e),t)},Rx.prototype.GetJoint2=function(){return q(av(this.e),t)},Rx.prototype.SetRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);eo(t,e)},Rx.prototype.GetRatio=function(){return jg(this.e)},Rx.prototype.GetType=function(){return hw(this.e)},Rx.prototype.GetBodyA=function(){return q(Qm(this.e),v)},Rx.prototype.GetBodyB=function(){return q($q(this.e),v)},Rx.prototype.GetAnchorA=function(){return q($d(this.e),u)},Rx.prototype.GetAnchorB=function(){return q(Mu(this.e),u)},Rx.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Se(t,e),u)},Rx.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return Jd(t,e)},Rx.prototype.GetNext=function(){return q(zv(this.e),t)},Rx.prototype.GetUserData=function(){return ef(this.e)},Rx.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);om(t,e)},Rx.prototype.IsActive=function(){return fj(this.e)},Rx.prototype.GetCollideConnected=function(){return ue(this.e)},Rx.prototype.__destroy__=function(){gh(this.e)},Fx.prototype=Object.create(j.prototype),Fx.prototype.g=Fx,Fx.k={},e.b2RayCastCallback=Fx,Fx.prototype.__destroy__=function(){ii(this.e)},K.prototype=Object.create(t.prototype),K.prototype.g=K,K.k={},e.b2WeldJoint=K,K.prototype.GetLocalAnchorA=function(){return q(Yl(this.e),u)},K.prototype.GetLocalAnchorB=function(){return q(Rn(this.e),u)},K.prototype.SetFrequency=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Th(t,e)},K.prototype.GetFrequency=function(){return Fl(this.e)},K.prototype.SetDampingRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Me(t,e)},K.prototype.GetDampingRatio=function(){return lt(this.e)},K.prototype.Dump=function(){lp(this.e)},K.prototype.GetType=function(){return Zo(this.e)},K.prototype.GetBodyA=function(){return q(og(this.e),v)},K.prototype.GetBodyB=function(){return q(Pj(this.e),v)},K.prototype.GetAnchorA=function(){return q($v(this.e),u)},K.prototype.GetAnchorB=function(){return q(Hr(this.e),u)},K.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Zs(t,e),u)},K.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return Zc(t,e)},K.prototype.GetNext=function(){return q(Ir(this.e),t)},K.prototype.GetUserData=function(){return Ql(this.e)},K.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);aj(t,e)},K.prototype.IsActive=function(){return Tc(this.e)},K.prototype.GetCollideConnected=function(){return or(this.e)},K.prototype.__destroy__=function(){Kq(this.e)},Sx.prototype=Object.create(j.prototype),Sx.prototype.g=Sx,Sx.k={},e.b2JointEdge=Sx,Sx.prototype.get_other=function(){return q(Nt(this.e),v)},Sx.prototype.set_other=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fe(t,e)},Sx.prototype.get_joint=function(){return q(Wv(this.e),t)},Sx.prototype.set_joint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Nc(t,e)},Sx.prototype.get_prev=function(){return q(Yc(this.e),Sx)},Sx.prototype.set_prev=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);jh(t,e)},Sx.prototype.get_next=function(){return q(Qo(this.e),Sx)},Sx.prototype.set_next=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ho(t,e)},Sx.prototype.__destroy__=function(){Lo(this.e)},L.prototype=Object.create(D.prototype),L.prototype.g=L,L.k={},e.b2PulleyJointDef=L,L.prototype.Initialize=function(e,t,n,i,_,o,c){var p=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i),_=_&&"object"==typeof _?_.e:r(_),o=o&&"object"==typeof o?o.e:r(o),c=c&&"object"==typeof c?c.e:r(c);dw(p,e,t,n,i,_,o,c)},L.prototype.get_groundAnchorA=function(){return q(fi(this.e),u)},L.prototype.set_groundAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Yw(t,e)},L.prototype.get_groundAnchorB=function(){return q(Dn(this.e),u)},L.prototype.set_groundAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Js(t,e)},L.prototype.get_localAnchorA=function(){return q(td(this.e),u)},L.prototype.set_localAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ji(t,e)},L.prototype.get_localAnchorB=function(){return q(Dg(this.e),u)},L.prototype.set_localAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);nl(t,e)},L.prototype.get_lengthA=function(){return vm(this.e)},L.prototype.set_lengthA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);eh(t,e)},L.prototype.get_lengthB=function(){return $i(this.e)},L.prototype.set_lengthB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ev(t,e)},L.prototype.get_ratio=function(){return lf(this.e)},L.prototype.set_ratio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ih(t,e)},L.prototype.get_type=function(){return xm(this.e)},L.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Sl(t,e)},L.prototype.get_userData=function(){return ul(this.e)},L.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);dn(t,e)},L.prototype.get_bodyA=function(){return q(rd(this.e),v)},L.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Rw(t,e)},L.prototype.get_bodyB=function(){return q(Lh(this.e),v)},L.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sg(t,e)},L.prototype.get_collideConnected=function(){return ax(this.e)},L.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Iu(t,e)},L.prototype.__destroy__=function(){Bj(this.e)},Mx.prototype=Object.create(j.prototype),Mx.prototype.g=Mx,Mx.k={},e.b2ContactListener=Mx,Mx.prototype.__destroy__=function(){hp(this.e)},Tx.prototype=Object.create(j.prototype),Tx.prototype.g=Tx,Tx.k={},e.b2ManifoldPoint=Tx,Tx.prototype.get_localPoint=function(){return q(Lf(this.e),u)},Tx.prototype.set_localPoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);rt(t,e)},Tx.prototype.get_normalImpulse=function(){return zk(this.e)},Tx.prototype.set_normalImpulse=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Di(t,e)},Tx.prototype.get_tangentImpulse=function(){return Dq(this.e)},Tx.prototype.set_tangentImpulse=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);vd(t,e)},Tx.prototype.get_id=function(){return q(Ig(this.e),Kx)},Tx.prototype.set_id=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Pn(t,e)},Tx.prototype.__destroy__=function(){xr(this.e)},Bx.prototype=Object.create(j.prototype),Bx.prototype.g=Bx,Bx.k={},e.b2QueryCallback=Bx,Bx.prototype.__destroy__=function(){kf(this.e)},D.prototype=Object.create(j.prototype),D.prototype.g=D,D.k={},e.b2JointDef=D,D.prototype.get_type=function(){return ou(this.e)},D.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);zu(t,e)},D.prototype.get_userData=function(){return dq(this.e)},D.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Cq(t,e)},D.prototype.get_bodyA=function(){return q(Ur(this.e),v)},D.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fl(t,e)},D.prototype.get_bodyB=function(){return q(An(this.e),v)},D.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Er(t,e)},D.prototype.get_collideConnected=function(){return Vk(this.e)},D.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);al(t,e)},D.prototype.__destroy__=function(){Gf(this.e)},Ux.prototype=Object.create(j.prototype),Ux.prototype.g=Ux,Ux.k={},e.b2Transform=Ux,Ux.prototype.SetIdentity=function(){ir(this.e)},Ux.prototype.Set=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);ni(n,e,t)},Ux.prototype.get_p=function(){return q(uu(this.e),u)},Ux.prototype.set_p=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Yi(t,e)},Ux.prototype.get_q=function(){return q(Rd(this.e),Cx)},Ux.prototype.set_q=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Xe(t,e)},Ux.prototype.__destroy__=function(){$e(this.e)},M.prototype=Object.create(xx.prototype),M.prototype.g=M,M.k={},e.b2ChainShape=M,M.prototype.Clear=function(){ar(this.e)},M.prototype.CreateLoop=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);ow(n,e,t)},M.prototype.CreateChain=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Cd(n,e,t)},M.prototype.SetPrevVertex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ko(t,e)},M.prototype.SetNextVertex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ao(t,e)},M.prototype.GetChildEdge=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Ot(n,e,t)},M.prototype.GetType=function(){return Om(this.e)},M.prototype.GetChildCount=function(){return jq(this.e)},M.prototype.TestPoint=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);return Ll(n,e,t)},M.prototype.RayCast=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);return $s(_,e,t,n,i)},M.prototype.ComputeAABB=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);Wc(i,e,t,n)},M.prototype.ComputeMass=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);rw(n,e,t)},M.prototype.get_m_vertices=function(){return q(le(this.e),u)},M.prototype.set_m_vertices=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ke(t,e)},M.prototype.get_m_count=function(){return rc(this.e)},M.prototype.set_m_count=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Dl(t,e)},M.prototype.get_m_prevVertex=function(){return q(Ph(this.e),u)},M.prototype.set_m_prevVertex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);cs(t,e)},M.prototype.get_m_nextVertex=function(){return q(Zf(this.e),u)},M.prototype.set_m_nextVertex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);zh(t,e)},M.prototype.get_m_hasPrevVertex=function(){return zq(this.e)},M.prototype.set_m_hasPrevVertex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Eg(t,e)},M.prototype.get_m_hasNextVertex=function(){return zo(this.e)},M.prototype.set_m_hasNextVertex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);As(t,e)},M.prototype.get_m_type=function(){return ek(this.e)},M.prototype.set_m_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ug(t,e)},M.prototype.get_m_radius=function(){return dt(this.e)},M.prototype.set_m_radius=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ft(t,e)},M.prototype.__destroy__=function(){nm(this.e)},Vx.prototype=Object.create(j.prototype),Vx.prototype.g=Vx,Vx.k={},e.b2Color=Vx,Vx.prototype.Set=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);Bv(i,e,t,n)},Vx.prototype.get_r=function(){return Dd(this.e)},Vx.prototype.set_r=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ze(t,e)},Vx.prototype.get_g=function(){return xp(this.e)},Vx.prototype.set_g=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);zc(t,e)},Vx.prototype.get_b=function(){return mt(this.e)},Vx.prototype.set_b=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Am(t,e)},Vx.prototype.__destroy__=function(){Xm(this.e)},N.prototype=Object.create(t.prototype),N.prototype.g=N,N.k={},e.b2RopeJoint=N,N.prototype.GetLocalAnchorA=function(){return q(Pr(this.e),u)},N.prototype.GetLocalAnchorB=function(){return q(Aj(this.e),u)},N.prototype.SetMaxLength=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);bx(t,e)},N.prototype.GetMaxLength=function(){return df(this.e)},N.prototype.GetLimitState=function(){return Uk(this.e)},N.prototype.GetType=function(){return ns(this.e)},N.prototype.GetBodyA=function(){return q(Fv(this.e),v)},N.prototype.GetBodyB=function(){return q(Bl(this.e),v)},N.prototype.GetAnchorA=function(){return q(vj(this.e),u)},N.prototype.GetAnchorB=function(){return q(qf(this.e),u)},N.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(pt(t,e),u)},N.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return fw(t,e)},N.prototype.GetNext=function(){return q(zp(this.e),t)},N.prototype.GetUserData=function(){return lk(this.e)},N.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ts(t,e)},N.prototype.IsActive=function(){return Nu(this.e)},N.prototype.GetCollideConnected=function(){return Ju(this.e)},N.prototype.__destroy__=function(){Cr(this.e)},Wx.prototype=Object.create(j.prototype),Wx.prototype.g=Wx,Wx.k={},e.b2RayCastInput=Wx,Wx.prototype.get_p1=function(){return q(Lc(this.e),u)},Wx.prototype.set_p1=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);iv(t,e)},Wx.prototype.get_p2=function(){return q(Nl(this.e),u)},Wx.prototype.set_p2=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);lg(t,e)},Wx.prototype.get_maxFraction=function(){return Pm(this.e)},Wx.prototype.set_maxFraction=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ro(t,e)},Wx.prototype.__destroy__=function(){wf(this.e)},O.prototype=Object.create(xx.prototype),O.prototype.g=O,O.k={},e.b2PolygonShape=O,O.prototype.Set=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);ch(n,e,t)},O.prototype.SetAsBox=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);n===d?tv(_,e,t):i===d?_emscripten_bind_b2PolygonShape_SetAsBox_3(_,e,t,n):jn(_,e,t,n,i)},O.prototype.GetVertexCount=function(){return wq(this.e)},O.prototype.GetVertex=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Is(t,e),u)},O.prototype.GetType=function(){return bi(this.e)},O.prototype.GetChildCount=function(){return Bp(this.e)},O.prototype.TestPoint=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);return Dj(n,e,t)},O.prototype.RayCast=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);return Cc(_,e,t,n,i)},O.prototype.ComputeAABB=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);hm(i,e,t,n)},O.prototype.ComputeMass=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Xl(n,e,t)},O.prototype.get_m_centroid=function(){return q(mm(this.e),u)},O.prototype.set_m_centroid=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);gn(t,e)},O.prototype.get_m_count=function(){return wd(this.e)},O.prototype.set_m_count=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Td(t,e)},O.prototype.get_m_type=function(){return Vp(this.e)},O.prototype.set_m_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);vv(t,e)},O.prototype.get_m_radius=function(){return kk(this.e)},O.prototype.set_m_radius=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);dx(t,e)},O.prototype.__destroy__=function(){Ye(this.e)},P.prototype=Object.create(xx.prototype),P.prototype.g=P,P.k={},e.b2EdgeShape=P,P.prototype.Set=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Su(n,e,t)},P.prototype.GetType=function(){return vr(this.e)},P.prototype.GetChildCount=function(){return ld(this.e)},P.prototype.TestPoint=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);return lm(n,e,t)},P.prototype.RayCast=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);return lj(_,e,t,n,i)},P.prototype.ComputeAABB=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);Kr(i,e,t,n)},P.prototype.ComputeMass=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);vu(n,e,t)},P.prototype.get_m_vertex1=function(){return q($l(this.e),u)},P.prototype.set_m_vertex1=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);bv(t,e)},P.prototype.get_m_vertex2=function(){return q(kn(this.e),u)},P.prototype.set_m_vertex2=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);kr(t,e)},P.prototype.get_m_vertex0=function(){return q(gj(this.e),u)},P.prototype.set_m_vertex0=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Zi(t,e)},P.prototype.get_m_vertex3=function(){return q(gr(this.e),u)},P.prototype.set_m_vertex3=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ej(t,e)},P.prototype.get_m_hasVertex0=function(){return Em(this.e)},P.prototype.set_m_hasVertex0=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);cf(t,e)},P.prototype.get_m_hasVertex3=function(){return tk(this.e)},P.prototype.set_m_hasVertex3=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Mc(t,e)},P.prototype.get_m_type=function(){return Wd(this.e)},P.prototype.set_m_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Cv(t,e)},P.prototype.get_m_radius=function(){return pw(this.e)},P.prototype.set_m_radius=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ts(t,e)},P.prototype.__destroy__=function(){uj(this.e)},Xx.prototype=Object.create(Yx.prototype),Xx.prototype.g=Xx,Xx.k={},e.JSContactFilter=Xx,Xx.prototype.ShouldCollide=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);return Ak(n,e,t)},Xx.prototype.__destroy__=function(){jk(this.e)},Q.prototype=Object.create(D.prototype),Q.prototype.g=Q,Q.k={},e.b2RevoluteJointDef=Q,Q.prototype.Initialize=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);Qu(i,e,t,n)},Q.prototype.get_localAnchorA=function(){return q(ed(this.e),u)},Q.prototype.set_localAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fh(t,e)},Q.prototype.get_localAnchorB=function(){return q(hk(this.e),u)},Q.prototype.set_localAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Sn(t,e)},Q.prototype.get_referenceAngle=function(){return ik(this.e)},Q.prototype.set_referenceAngle=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fq(t,e)},Q.prototype.get_enableLimit=function(){return ri(this.e)},Q.prototype.set_enableLimit=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);up(t,e)},Q.prototype.get_lowerAngle=function(){return Hl(this.e)},Q.prototype.set_lowerAngle=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ko(t,e)},Q.prototype.get_upperAngle=function(){return ve(this.e)},Q.prototype.set_upperAngle=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Lm(t,e)},Q.prototype.get_enableMotor=function(){return ep(this.e)},Q.prototype.set_enableMotor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vi(t,e)},Q.prototype.get_motorSpeed=function(){return mg(this.e)},Q.prototype.set_motorSpeed=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Dw(t,e)},Q.prototype.get_maxMotorTorque=function(){return Eq(this.e)},Q.prototype.set_maxMotorTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Sv(t,e)},Q.prototype.get_type=function(){return Mm(this.e)},Q.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ck(t,e)},Q.prototype.get_userData=function(){return Hn(this.e)},Q.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);dd(t,e)},Q.prototype.get_bodyA=function(){return q(du(this.e),v)},Q.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Rq(t,e)},Q.prototype.get_bodyB=function(){return q(qk(this.e),v)},Q.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vg(t,e)},Q.prototype.get_collideConnected=function(){return Ks(this.e)},Q.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);eg(t,e)},Q.prototype.__destroy__=function(){Hp(this.e)},Zx.prototype=Object.create(Px.prototype),Zx.prototype.g=Zx,Zx.k={},e.JSDraw=Zx,Zx.prototype.DrawPolygon=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);fo(i,e,t,n)},Zx.prototype.DrawSolidPolygon=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);vg(i,e,t,n)},Zx.prototype.DrawCircle=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);Sc(i,e,t,n)},Zx.prototype.DrawSolidCircle=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);Fc(_,e,t,n,i)},Zx.prototype.DrawSegment=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);id(i,e,t,n)},Zx.prototype.DrawTransform=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);uo(t,e)},Zx.prototype.__destroy__=function(){yg(this.e)},R.prototype=Object.create(t.prototype),R.prototype.g=R,R.k={},e.b2WheelJoint=R,R.prototype.GetLocalAnchorA=function(){return q(ug(this.e),u)},R.prototype.GetLocalAnchorB=function(){return q(Ff(this.e),u)},R.prototype.GetLocalAxisA=function(){return q(Dv(this.e),u)},R.prototype.GetJointTranslation=function(){return Rs(this.e)},R.prototype.GetJointSpeed=function(){return hg(this.e)},R.prototype.IsMotorEnabled=function(){return Vf(this.e)},R.prototype.EnableMotor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);tg(t,e)},R.prototype.SetMotorSpeed=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ie(t,e)},R.prototype.GetMotorSpeed=function(){return Zn(this.e)},R.prototype.SetMaxMotorTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Hj(t,e)},R.prototype.GetMaxMotorTorque=function(){return Yd(this.e)},R.prototype.GetMotorTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return Ss(t,e)},R.prototype.SetSpringFrequencyHz=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);xi(t,e)},R.prototype.GetSpringFrequencyHz=function(){return Iw(this.e)},R.prototype.SetSpringDampingRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Gp(t,e)},R.prototype.GetSpringDampingRatio=function(){return pc(this.e)},R.prototype.GetType=function(){return wv(this.e)},R.prototype.GetBodyA=function(){return q(to(this.e),v)},R.prototype.GetBodyB=function(){return q(Wm(this.e),v)},R.prototype.GetAnchorA=function(){return q(ds(this.e),u)},R.prototype.GetAnchorB=function(){return q(Ii(this.e),u)},R.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Pf(t,e),u)},R.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return ln(t,e)},R.prototype.GetNext=function(){return q(un(this.e),t)},R.prototype.GetUserData=function(){return oo(this.e)},R.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Rt(t,e)},R.prototype.IsActive=function(){return Vs(this.e)},R.prototype.GetCollideConnected=function(){return Fp(this.e)},R.prototype.__destroy__=function(){xw(this.e)},S.prototype=Object.create(t.prototype),S.prototype.g=S,S.k={},e.b2PulleyJoint=S,S.prototype.GetGroundAnchorA=function(){return q(Hd(this.e),u)},S.prototype.GetGroundAnchorB=function(){return q(Ng(this.e),u)},S.prototype.GetLengthA=function(){return vo(this.e)},S.prototype.GetLengthB=function(){return Lk(this.e)},S.prototype.GetRatio=function(){return Mo(this.e)},S.prototype.GetCurrentLengthA=function(){return xl(this.e)},S.prototype.GetCurrentLengthB=function(){return rj(this.e)},S.prototype.GetType=function(){return nj(this.e)},S.prototype.GetBodyA=function(){return q(Mq(this.e),v)},S.prototype.GetBodyB=function(){return q(Be(this.e),v)},S.prototype.GetAnchorA=function(){return q(kv(this.e),u)},S.prototype.GetAnchorB=function(){return q(Bh(this.e),u)},S.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Ep(t,e),u)},S.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return iu(t,e)},S.prototype.GetNext=function(){return q(dk(this.e),t)},S.prototype.GetUserData=function(){return em(this.e)},S.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Qc(t,e)},S.prototype.IsActive=function(){return Wi(this.e)},S.prototype.GetCollideConnected=function(){return Ah(this.e)},S.prototype.__destroy__=function(){Go(this.e)},T.prototype=Object.create(D.prototype),T.prototype.g=T,T.k={},e.b2MouseJointDef=T,T.prototype.get_target=function(){return q(bn(this.e),u)},T.prototype.set_target=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);he(t,e)},T.prototype.get_maxForce=function(){return Ip(this.e)},T.prototype.set_maxForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sq(t,e)},T.prototype.get_frequencyHz=function(){return aq(this.e)},T.prototype.set_frequencyHz=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ct(t,e)},T.prototype.get_dampingRatio=function(){return Sg(this.e)},T.prototype.set_dampingRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fp(t,e)},T.prototype.get_type=function(){return Zw(this.e)},T.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Xc(t,e)},T.prototype.get_userData=function(){return nt(this.e)},T.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);hd(t,e)},T.prototype.get_bodyA=function(){return q(il(this.e),v)},T.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);be(t,e)},T.prototype.get_bodyB=function(){return q(Zg(this.e),v)},T.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);$h(t,e)},T.prototype.get_collideConnected=function(){return sf(this.e)},T.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);zw(t,e)},T.prototype.__destroy__=function(){zg(this.e)},G.prototype=Object.create(j.prototype),G.prototype.g=G,G.k={},e.b2Contact=G,G.prototype.GetManifold=function(){return q(Jt(this.e),Ix)},G.prototype.IsTouching=function(){return Oe(this.e)},G.prototype.SetEnabled=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);$f(t,e)},G.prototype.IsEnabled=function(){return Tj(this.e)},G.prototype.GetNext=function(){return q(Ud(this.e),G)},G.prototype.GetFixtureA=function(){return q(jf(this.e),w)},G.prototype.GetChildIndexA=function(){return Yt(this.e)},G.prototype.GetFixtureB=function(){return q(qw(this.e),w)},G.prototype.GetChildIndexB=function(){return tr(this.e)},G.prototype.SetFriction=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Sr(t,e)},G.prototype.GetFriction=function(){return Hi(this.e)},G.prototype.ResetFriction=function(){jv(this.e)},G.prototype.SetRestitution=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);er(t,e)},G.prototype.GetRestitution=function(){return Fn(this.e)},G.prototype.ResetRestitution=function(){Qi(this.e)},G.prototype.SetTangentSpeed=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Lj(t,e)},G.prototype.GetTangentSpeed=function(){return Nn(this.e)},xx.prototype=Object.create(j.prototype),xx.prototype.g=xx;xx.k={},e.b2Shape=xx,xx.prototype.GetType=function(){return ro(this.e)},xx.prototype.GetChildCount=function(){return Ft(this.e)},xx.prototype.TestPoint=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);return $g(n,e,t)},xx.prototype.RayCast=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);return Gd(_,e,t,n,i)},xx.prototype.ComputeAABB=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);tc(i,e,t,n)},xx.prototype.ComputeMass=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);ut(n,e,t)},xx.prototype.get_m_type=function(){return Pk(this.e)},xx.prototype.set_m_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Qs(t,e)},xx.prototype.get_m_radius=function(){return Jr(this.e)},xx.prototype.set_m_radius=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ag(t,e)},xx.prototype.__destroy__=function(){zm(this.e)},U.prototype=Object.create(D.prototype),U.prototype.g=U,U.k={},e.b2DistanceJointDef=U,U.prototype.Initialize=function(e,t,n,i){var _=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n),i=i&&"object"==typeof i?i.e:r(i);Kn(_,e,t,n,i)},U.prototype.get_localAnchorA=function(){return q(Jj(this.e),u)},U.prototype.set_localAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Nw(t,e)},U.prototype.get_localAnchorB=function(){return q(Pq(this.e),u)},U.prototype.set_localAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);xk(t,e)},U.prototype.get_length=function(){return Ae(this.e)},U.prototype.set_length=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ji(t,e)},U.prototype.get_frequencyHz=function(){return wo(this.e)},U.prototype.set_frequencyHz=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);gk(t,e)},U.prototype.get_dampingRatio=function(){return nk(this.e)},U.prototype.set_dampingRatio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Qg(t,e)},U.prototype.get_type=function(){return Ni(this.e)},U.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Jq(t,e)},U.prototype.get_userData=function(){return ad(this.e)},U.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);yj(t,e)},U.prototype.get_bodyA=function(){return q(Bf(this.e),v)},U.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ls(t,e)},U.prototype.get_bodyB=function(){return q(mv(this.e),v)},U.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);hq(t,e)},U.prototype.get_collideConnected=function(){return eq(this.e)},U.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);gu(t,e)},U.prototype.__destroy__=function(){xu(this.e)},v.prototype=Object.create(j.prototype),v.prototype.g=v,v.k={},e.b2Body=v,v.prototype.CreateFixture=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);return q(t===d?cm(n,e):dm(n,e,t),w)},v.prototype.DestroyFixture=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Un(t,e)},v.prototype.SetTransform=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);pf(n,e,t)},v.prototype.GetTransform=function(){return q($t(this.e),Ux)},v.prototype.GetPosition=function(){return q(Dh(this.e),u)},v.prototype.GetAngle=function(){return Ru(this.e)},v.prototype.GetWorldCenter=function(){return q(Yk(this.e),u)},v.prototype.GetLocalCenter=function(){return q(Xv(this.e),u)},v.prototype.SetLinearVelocity=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sl(t,e)},v.prototype.GetLinearVelocity=function(){return q(et(this.e),u)},v.prototype.SetAngularVelocity=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ov(t,e)},v.prototype.GetAngularVelocity=function(){return Oj(this.e)},v.prototype.ApplyForce=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);St(i,e,t,n)},v.prototype.ApplyForceToCenter=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);xf(n,e,t)},v.prototype.ApplyTorque=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);In(n,e,t)},v.prototype.ApplyLinearImpulse=function(e,t,n){var i=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t),n=n&&"object"==typeof n?n.e:r(n);Wl(i,e,t,n)},v.prototype.ApplyAngularImpulse=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);we(n,e,t)},v.prototype.GetMass=function(){return Co(this.e)},v.prototype.GetInertia=function(){return ks(this.e)},v.prototype.GetMassData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Zh(t,e)},v.prototype.SetMassData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ke(t,e)},v.prototype.ResetMassData=function(){Xr(this.e)},v.prototype.GetWorldPoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(yk(t,e),u)},v.prototype.GetWorldVector=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(ah(t,e),u)},v.prototype.GetLocalPoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(lh(t,e),u)},v.prototype.GetLocalVector=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Rm(t,e),u)},v.prototype.GetLinearVelocityFromWorldPoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(nr(t,e),u)},v.prototype.GetLinearVelocityFromLocalPoint=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Vq(t,e),u)},v.prototype.GetLinearDamping=function(){return Vr(this.e)},v.prototype.SetLinearDamping=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vm(t,e)},v.prototype.GetAngularDamping=function(){return $n(this.e)},v.prototype.SetAngularDamping=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);cw(t,e)},v.prototype.GetGravityScale=function(){return Wg(this.e)},v.prototype.SetGravityScale=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);sm(t,e)},v.prototype.SetType=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Bo(t,e)},v.prototype.GetType=function(){return Gr(this.e)},v.prototype.SetBullet=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);jl(t,e)},v.prototype.IsBullet=function(){return Tl(this.e)},v.prototype.SetSleepingAllowed=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Lg(t,e)},v.prototype.IsSleepingAllowed=function(){return rq(this.e)},v.prototype.SetAwake=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fv(t,e)},v.prototype.IsAwake=function(){return ee(this.e)},v.prototype.SetActive=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);fm(t,e)},v.prototype.IsActive=function(){return Pi(this.e)},v.prototype.SetFixedRotation=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vh(t,e)},v.prototype.IsFixedRotation=function(){return Fi(this.e)},v.prototype.GetFixtureList=function(){return q(dp(this.e),w)},v.prototype.GetJointList=function(){return q(Kw(this.e),Sx)},v.prototype.GetContactList=function(){return q(Ei(this.e),$x)},v.prototype.GetNext=function(){return q(Ev(this.e),v)},v.prototype.GetUserData=function(){return cl(this.e)},v.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Pw(t,e)},v.prototype.GetWorld=function(){return q(cv(this.e),F)},v.prototype.Dump=function(){Wk(this.e)},W.prototype=Object.create(t.prototype),W.prototype.g=W,W.k={},e.b2FrictionJoint=W,W.prototype.GetLocalAnchorA=function(){return q(op(this.e),u)},W.prototype.GetLocalAnchorB=function(){return q(Li(this.e),u)},W.prototype.SetMaxForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);lu(t,e)},W.prototype.GetMaxForce=function(){return Sd(this.e)},W.prototype.SetMaxTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);$p(t,e)},W.prototype.GetMaxTorque=function(){return kj(this.e)},W.prototype.GetType=function(){return Pg(this.e)},W.prototype.GetBodyA=function(){return q(Lw(this.e),v)},W.prototype.GetBodyB=function(){return q(Af(this.e),v)},W.prototype.GetAnchorA=function(){return q(ms(this.e),u)},W.prototype.GetAnchorB=function(){return q(Kv(this.e),u)},W.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Iq(t,e),u)},W.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return km(t,e)},W.prototype.GetNext=function(){return q(fs(this.e),t)},W.prototype.GetUserData=function(){return Rr(this.e)},W.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);bq(t,e)},W.prototype.IsActive=function(){return yc(this.e)},W.prototype.GetCollideConnected=function(){return Rp(this.e)},W.prototype.__destroy__=function(){kp(this.e)},ay.prototype=Object.create(j.prototype),ay.prototype.g=ay,ay.k={},e.b2DestructionListener=ay,ay.prototype.__destroy__=function(){Uc(this.e)},X.prototype=Object.create(D.prototype),X.prototype.g=X,X.k={},e.b2GearJointDef=X,X.prototype.get_joint1=function(){return q(cj(this.e),t)},X.prototype.set_joint1=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);jr(t,e)},X.prototype.get_joint2=function(){return q(bg(this.e),t)},X.prototype.set_joint2=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ku(t,e)},X.prototype.get_ratio=function(){return Cp(this.e)},X.prototype.set_ratio=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Gj(t,e)},X.prototype.get_type=function(){return Nm(this.e)},X.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);gf(t,e)},X.prototype.get_userData=function(){return wi(this.e)},X.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);nw(t,e)},X.prototype.get_bodyA=function(){return q(fk(this.e),v)},X.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ui(t,e)},X.prototype.get_bodyB=function(){return q(Xg(this.e),v)},X.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ew(t,e)},X.prototype.get_collideConnected=function(){return gl(this.e)},X.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Pt(t,e)},X.prototype.__destroy__=function(){Qq(this.e)},Y.prototype=Object.create(t.prototype),Y.prototype.g=Y,Y.k={},e.b2RevoluteJoint=Y,Y.prototype.GetLocalAnchorA=function(){return q(Gc(this.e),u)},Y.prototype.GetLocalAnchorB=function(){return q(it(this.e),u)},Y.prototype.GetReferenceAngle=function(){return tl(this.e)},Y.prototype.GetJointAngle=function(){return hh(this.e)},Y.prototype.GetJointSpeed=function(){return Ef(this.e)},Y.prototype.IsLimitEnabled=function(){return Qv(this.e)},Y.prototype.EnableLimit=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ol(t,e)},Y.prototype.GetLowerLimit=function(){return Xk(this.e)},Y.prototype.GetUpperLimit=function(){return oe(this.e)},Y.prototype.SetLimits=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);Ms(n,e,t)},Y.prototype.IsMotorEnabled=function(){return ge(this.e)},Y.prototype.EnableMotor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Jp(t,e)},Y.prototype.SetMotorSpeed=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);xo(t,e)},Y.prototype.GetMotorSpeed=function(){return Tg(this.e)},Y.prototype.SetMaxMotorTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);kw(t,e)},Y.prototype.GetMaxMotorTorque=function(){return vk(this.e)},Y.prototype.GetMotorTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return Jc(t,e)},Y.prototype.GetType=function(){return Tn(this.e)},Y.prototype.GetBodyA=function(){return q(Xj(this.e),v)},Y.prototype.GetBodyB=function(){return q(ol(this.e),v)},Y.prototype.GetAnchorA=function(){return q(bs(this.e),u)},Y.prototype.GetAnchorB=function(){return q(ov(this.e),u)},Y.prototype.GetReactionForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return q(Hu(t,e),u)},Y.prototype.GetReactionTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);return Nh(t,e)},Y.prototype.GetNext=function(){return q(pv(this.e),t)},Y.prototype.GetUserData=function(){return ti(this.e)},Y.prototype.SetUserData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Uv(t,e)},Y.prototype.IsActive=function(){return yv(this.e)},Y.prototype.GetCollideConnected=function(){return ru(this.e)},Y.prototype.__destroy__=function(){Md(this.e)},Yx.prototype=Object.create(j.prototype),Yx.prototype.g=Yx,Yx.k={},e.b2ContactFilter=Yx,Yx.prototype.__destroy__=function(){Cg(this.e)},$x.prototype=Object.create(j.prototype),$x.prototype.g=$x,$x.k={},e.b2ContactEdge=$x,$x.prototype.get_other=function(){return q(zj(this.e),v)},$x.prototype.set_other=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);qj(t,e)},$x.prototype.get_contact=function(){return q(Gn(this.e),G)},$x.prototype.set_contact=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);qi(t,e)},$x.prototype.get_prev=function(){return q(Fh(this.e),$x)},$x.prototype.set_prev=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);$j(t,e)},$x.prototype.get_next=function(){return q(lr(this.e),$x)},$x.prototype.set_next=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);qc(t,e)},$x.prototype.__destroy__=function(){au(this.e)},Z.prototype=Object.create(D.prototype),Z.prototype.g=Z,Z.k={},e.b2RopeJointDef=Z,Z.prototype.get_localAnchorA=function(){return q(pi(this.e),u)},Z.prototype.set_localAnchorA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Bc(t,e)},Z.prototype.get_localAnchorB=function(){return q(cd(this.e),u)},Z.prototype.set_localAnchorB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);lw(t,e)},Z.prototype.get_maxLength=function(){return hl(this.e)},Z.prototype.set_maxLength=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Kl(t,e)},Z.prototype.get_type=function(){return Nq(this.e)},Z.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ql(t,e)},Z.prototype.get_userData=function(){return nh(this.e)},Z.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Xo(t,e)},Z.prototype.get_bodyA=function(){return q(mk(this.e),v)},Z.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);yu(t,e)},Z.prototype.get_bodyB=function(){return q(uw(this.e),v)},Z.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Fe(t,e)},Z.prototype.get_collideConnected=function(){return di(this.e)},Z.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);xd(t,e)},Z.prototype.__destroy__=function(){Us(this.e)},$.prototype=Object.create(D.prototype),$.prototype.g=$,$.k={},e.b2MotorJointDef=$,$.prototype.Initialize=function(e,t){var n=this.e;e=e&&"object"==typeof e?e.e:r(e),t=t&&"object"==typeof t?t.e:r(t);kd(n,e,t)},$.prototype.get_linearOffset=function(){return q(Gm(this.e),u)},$.prototype.set_linearOffset=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Oo(t,e)},$.prototype.get_angularOffset=function(){return Qt(this.e)},$.prototype.set_angularOffset=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);ph(t,e)},$.prototype.get_maxForce=function(){return $c(this.e)},$.prototype.set_maxForce=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);pg(t,e)},$.prototype.get_maxTorque=function(){return Uq(this.e)},$.prototype.set_maxTorque=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Uu(t,e)},$.prototype.get_correctionFactor=function(){return Av(this.e)},$.prototype.set_correctionFactor=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);xj(t,e)},$.prototype.get_type=function(){return Or(this.e)},$.prototype.set_type=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Kc(t,e)},$.prototype.get_userData=function(){return Bu(this.e)},$.prototype.set_userData=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Vd(t,e)},$.prototype.get_bodyA=function(){return q(Ew(this.e),v)},$.prototype.set_bodyA=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Ul(t,e)},$.prototype.get_bodyB=function(){return q(Fk(this.e),v)},$.prototype.set_bodyB=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);Xs(t,e)},$.prototype.get_collideConnected=function(){return ne(this.e)},$.prototype.set_collideConnected=function(e){var t=this.e;e=e&&"object"==typeof e?e.e:r(e);us(t,e)},$.prototype.__destroy__=function(){Os(this.e)},e.b2Shape.e_circle=Sk(),e.b2Shape.e_edge=uk(),e.b2Shape.e_polygon=Oc(),e.b2Shape.e_chain=Hh(),e.b2Shape.e_typeCount=of(),e.e_unknownJoint=Gv(),e.e_revoluteJoint=ce(),e.e_prismaticJoint=yr(),e.e_distanceJoint=Fo(),e.e_pulleyJoint=Yf(),e.e_mouseJoint=ae(),e.e_gearJoint=Gt(),e.e_wheelJoint=Zr(),e.e_weldJoint=$m(),e.e_frictionJoint=xe(),e.e_ropeJoint=rs(),e.e_motorJoint=Po(),e.e_inactiveLimit=dv(),e.e_atLowerLimit=On(),e.e_atUpperLimit=Xw(),e.e_equalLimits=Ci(),e.b2Manifold.e_circles=co(),e.b2Manifold.e_faceA=ok(),e.b2Manifold.e_faceB=pk(),e.b2_staticBody=Km(),e.b2_kinematicBody=Yq(),e.b2_dynamicBody=Sq(),e.b2Draw.e_shapeBit=Gi(),e.b2Draw.e_jointBit=qg(),e.b2Draw.e_aabbBit=Pu(),e.b2Draw.e_pairBit=jp(),e.b2Draw.e_centerOfMassBit=iw(),e.b2ContactFeature.e_vertex=Ih(),e.b2ContactFeature.e_face=tm(),this.Box2D=e}).call(c),module.exports=c.Box2D;
},{"fs":"ITsK","path":"ITsK","process":"r7L2"}],"NLPN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.box2dJsFactory=void 0,require("../fixprocess");const e=require("box2d.js"),o=(o,t,r,s)=>{const n=new e.b2World(new e.b2Vec2(o.x,o.y)),c=n.CreateBody(new e.b2BodyDef),d=new e.b2EdgeShape;return d.Set(new e.b2Vec2(t.x,t.y),new e.b2Vec2(r.x,r.y)),c.CreateFixture(d,s),{name:"box2d.js",createBoxShape(o,t){const r=new e.b2PolygonShape;return r.SetAsBox(o,t),r},createBoxBody(o,t,r,s){const c=new e.b2BodyDef;c.set_type(e.b2_dynamicBody),c.set_position(new e.b2Vec2(t,r)),n.CreateBody(c).CreateFixture(o,s)},step(e,o,t){n.Step(e,o,t)}}};exports.box2dJsFactory=o;
},{"../fixprocess":"JEec","box2d.js":"NOXM"}],"I6oK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2_maxPolygonVertices=exports.b2_lengthUnitsPerMeter=void 0,exports.b2_lengthUnitsPerMeter=1,exports.b2_maxPolygonVertices=8;
},{}],"ReKW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2MakeArray=exports.b2MakeBooleanArray=exports.b2MakeNumberArray=exports.b2_version=exports.b2_angularSleepTolerance=exports.b2_linearSleepTolerance=exports.b2_timeToSleep=exports.b2_toiBaumgarte=exports.b2_baumgarte=exports.b2_maxRotationSquared=exports.b2_maxRotation=exports.b2_maxTranslationSquared=exports.b2_maxTranslation=exports.b2_maxAngularCorrection=exports.b2_maxLinearCorrection=exports.b2_maxTOIContacts=exports.b2_maxSubSteps=exports.b2_polygonRadius=exports.b2_angularSlop=exports.b2_linearSlop=exports.b2_aabbMultiplier=exports.b2_aabbExtension=exports.b2_maxManifoldPoints=exports.b2_epsilon_sq=exports.b2_epsilon=exports.b2_maxFloat=exports.b2Verify=exports.b2Assert=void 0;const e=require("./b2_settings");function r(e,r){if(!e)throw new Error(r)}function t(e){if(null===e)throw new Error;return e}function o(e,r=0){const t=new Array(e);for(let o=0;o<e;o++)t[o]=r;return t}function a(e,r=!1){const t=new Array(e);for(let o=0;o<e;o++)t[o]=r;return t}function s(e,r){const t=new Array(e);for(let o=0;o<e;o++)t[o]=new r;return t}exports.b2Assert=r,exports.b2Verify=t,exports.b2_maxFloat=1e37,exports.b2_epsilon=1e-5,exports.b2_epsilon_sq=exports.b2_epsilon*exports.b2_epsilon,exports.b2_maxManifoldPoints=2,exports.b2_aabbExtension=.1*e.b2_lengthUnitsPerMeter,exports.b2_aabbMultiplier=4,exports.b2_linearSlop=.005*e.b2_lengthUnitsPerMeter,exports.b2_angularSlop=2/180*Math.PI,exports.b2_polygonRadius=2*exports.b2_linearSlop,exports.b2_maxSubSteps=8,exports.b2_maxTOIContacts=32,exports.b2_maxLinearCorrection=.2*e.b2_lengthUnitsPerMeter,exports.b2_maxAngularCorrection=8/180*Math.PI,exports.b2_maxTranslation=2*e.b2_lengthUnitsPerMeter,exports.b2_maxTranslationSquared=exports.b2_maxTranslation*exports.b2_maxTranslation,exports.b2_maxRotation=.5*Math.PI,exports.b2_maxRotationSquared=exports.b2_maxRotation*exports.b2_maxRotation,exports.b2_baumgarte=.2,exports.b2_toiBaumgarte=.75,exports.b2_timeToSleep=.5,exports.b2_linearSleepTolerance=.01*e.b2_lengthUnitsPerMeter,exports.b2_angularSleepTolerance=2/180*Math.PI,exports.b2_version={major:2,minor:4,patch:0},exports.b2MakeNumberArray=o,exports.b2MakeBooleanArray=a,exports.b2MakeArray=s;
},{"./b2_settings":"I6oK"}],"cQbL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2Sweep=exports.b2Transform=exports.b2Rot=exports.b2Mat33=exports.b2Mat22=exports.b2Vec3=exports.b2Vec2=exports.b2RandomInt=exports.b2RandomFloat=exports.b2Random=exports.b2IsPowerOfTwo=exports.b2NextPowerOfTwo=exports.b2RadToDeg=exports.b2DegToRad=exports.b2Clamp=exports.b2_two_pi=exports.b2_180_over_pi=exports.b2_pi_over_180=void 0;const t=require("./b2_common");function e(t,e,s){return t<e?e:t>s?s:t}function s(t){return t*exports.b2_pi_over_180}function i(t){return t*exports.b2_180_over_pi}function r(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1}function h(t){return t>0&&0==(t&t-1)}function y(){return 2*Math.random()-1}function x(t,e){return(e-t)*Math.random()+t}function n(t,e){return Math.round((e-t)*Math.random()+t)}exports.b2_pi_over_180=Math.PI/180,exports.b2_180_over_pi=180/Math.PI,exports.b2_two_pi=2*Math.PI,exports.b2Clamp=e,exports.b2DegToRad=s,exports.b2RadToDeg=i,exports.b2NextPowerOfTwo=r,exports.b2IsPowerOfTwo=h,exports.b2Random=y,exports.b2RandomFloat=x,exports.b2RandomInt=n;class o{constructor(t=0,e=0){this.x=t,this.y=e}Clone(){return new o(this.x,this.y)}SetZero(){return this.x=0,this.y=0,this}Set(t,e){return this.x=t,this.y=e,this}Copy(t){return this.x=t.x,this.y=t.y,this}Add(t){return this.x+=t.x,this.y+=t.y,this}AddXY(t,e){return this.x+=t,this.y+=e,this}Subtract(t){return this.x-=t.x,this.y-=t.y,this}SubtractXY(t,e){return this.x-=t,this.y-=e,this}Scale(t){return this.x*=t,this.y*=t,this}AddScaled(t,e){return this.x+=t*e.x,this.y+=t*e.y,this}SubtractScaled(t,e){return this.x-=t*e.x,this.y-=t*e.y,this}Dot(t){return this.x*t.x+this.y*t.y}Cross(t){return this.x*t.y-this.y*t.x}Length(){const{x:t,y:e}=this;return Math.sqrt(t*t+e*e)}LengthSquared(){const{x:t,y:e}=this;return t*t+e*e}Normalize(){const e=this.Length();if(e<t.b2_epsilon)return 0;const s=1/e;return this.x*=s,this.y*=s,e}Rotate(t){const e=Math.cos(t),s=Math.sin(t),{x:i}=this;return this.x=e*i-s*this.y,this.y=s*i+e*this.y,this}RotateCosSin(t,e){const{x:s}=this;return this.x=t*s-e*this.y,this.y=e*s+t*this.y,this}IsValid(){return Number.isFinite(this.x)&&Number.isFinite(this.y)}Abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}GetAbs(t){return t.x=Math.abs(this.x),t.y=Math.abs(this.y),t}Negate(){return this.x=-this.x,this.y=-this.y,this}Skew(){const{x:t}=this;return this.x=-this.y,this.y=t,this}static Min(t,e,s){return s.x=Math.min(t.x,e.x),s.y=Math.min(t.y,e.y),s}static Max(t,e,s){return s.x=Math.max(t.x,e.x),s.y=Math.max(t.y,e.y),s}static Clamp(t,s,i,r){return r.x=e(t.x,s.x,i.x),r.y=e(t.y,s.y,i.y),r}static Rotate(t,e,s){const i=t.x,r=t.y,h=Math.cos(e),y=Math.sin(e);return s.x=h*i-y*r,s.y=y*i+h*r,s}static Dot(t,e){return t.x*e.x+t.y*e.y}static Cross(t,e){return t.x*e.y-t.y*e.x}static CrossVec2Scalar(t,e,s){const i=t.x;return s.x=e*t.y,s.y=-e*i,s}static CrossVec2One(t,e){const s=t.x;return e.x=t.y,e.y=-s,e}static CrossScalarVec2(t,e,s){const i=e.x;return s.x=-t*e.y,s.y=t*i,s}static CrossOneVec2(t,e){const s=t.x;return e.x=-t.y,e.y=s,e}static Add(t,e,s){return s.x=t.x+e.x,s.y=t.y+e.y,s}static Subtract(t,e,s){return s.x=t.x-e.x,s.y=t.y-e.y,s}static Scale(t,e,s){return s.x=e.x*t,s.y=e.y*t,s}static AddScaled(t,e,s,i){return i.x=t.x+e*s.x,i.y=t.y+e*s.y,i}static SubtractScaled(t,e,s,i){return i.x=t.x-e*s.x,i.y=t.y-e*s.y,i}static AddCrossScalarVec2(t,e,s,i){const r=s.x;return i.x=t.x-e*s.y,i.y=t.y+e*r,i}static Mid(t,e,s){return s.x=.5*(t.x+e.x),s.y=.5*(t.y+e.y),s}static Extents(t,e,s){return s.x=.5*(e.x-t.x),s.y=.5*(e.y-t.y),s}static Equals(t,e){return t.x===e.x&&t.y===e.y}static Distance(t,e){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}static DistanceSquared(t,e){return(t.x-e.x)**2+(t.y-e.y)**2}static Negate(t,e){return e.x=-t.x,e.y=-t.y,e}static Normalize(e,s){const i=e.x**2+e.y**2;if(i>=t.b2_epsilon_sq){const t=1/Math.sqrt(i);s.x=t*e.x,s.y=t*e.y}else s.x=0,s.y=0;return s}static Skew(t,e){const{x:s}=t;return e.x=-t.y,e.y=s,e}}exports.b2Vec2=o,o.ZERO=new o,o.UNITX=new o(1,0),o.UNITY=new o(0,1),o.s_t0=new o,o.s_t1=new o,o.s_t2=new o,o.s_t3=new o;class c{constructor(t=0,e=0,s=0){this.x=t,this.y=e,this.z=s}Clone(){return new c(this.x,this.y,this.z)}SetZero(){return this.x=0,this.y=0,this.z=0,this}Set(t,e,s){return this.x=t,this.y=e,this.z=s,this}Copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}Negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}Add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}AddXYZ(t,e,s){return this.x+=t,this.y+=e,this.z+=s,this}Subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}SubtractXYZ(t,e,s){return this.x-=t,this.y-=e,this.z-=s,this}Scale(t){return this.x*=t,this.y*=t,this.z*=t,this}static Dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static Cross(t,e,s){const i=t.x,r=t.y,h=t.z,y=e.x,x=e.y,n=e.z;return s.x=r*n-h*x,s.y=h*y-i*n,s.z=i*x-r*y,s}}exports.b2Vec3=c,c.ZERO=new c(0,0,0),c.s_t0=new c;class a{constructor(){this.ex=new o(1,0),this.ey=new o(0,1)}Clone(){return(new a).Copy(this)}static FromColumns(t,e){return(new a).SetColumns(t,e)}static FromScalars(t,e,s,i){return(new a).SetScalars(t,e,s,i)}static FromAngle(t){return(new a).SetAngle(t)}SetScalars(t,e,s,i){return this.ex.Set(t,s),this.ey.Set(e,i),this}SetColumns(t,e){return this.ex.Copy(t),this.ey.Copy(e),this}SetAngle(t){const e=Math.cos(t),s=Math.sin(t);return this.ex.Set(e,s),this.ey.Set(-s,e),this}Copy(t){return this.ex.Copy(t.ex),this.ey.Copy(t.ey),this}SetIdentity(){return this.ex.Set(1,0),this.ey.Set(0,1),this}SetZero(){return this.ex.SetZero(),this.ey.SetZero(),this}GetAngle(){return Math.atan2(this.ex.y,this.ex.x)}Solve(t,e,s){const i=this.ex.x,r=this.ey.x,h=this.ex.y,y=this.ey.y;let x=i*y-r*h;return 0!==x&&(x=1/x),s.x=x*(y*t-r*e),s.y=x*(i*e-h*t),s}Abs(){return this.ex.Abs(),this.ey.Abs(),this}Inverse(){return this.GetInverse(this),this}Add(t){return this.ex.Add(t.ex),this.ey.Add(t.ey),this}Subtract(t){return this.ex.Subtract(t.ex),this.ey.Subtract(t.ey),this}GetInverse(t){const e=this.ex.x,s=this.ey.x,i=this.ex.y,r=this.ey.y;let h=e*r-s*i;return 0!==h&&(h=1/h),t.ex.x=h*r,t.ey.x=-h*s,t.ex.y=-h*i,t.ey.y=h*e,t}GetAbs(t){return t.ex.x=Math.abs(this.ex.x),t.ex.y=Math.abs(this.ex.y),t.ey.x=Math.abs(this.ey.x),t.ey.y=Math.abs(this.ey.y),t}static MultiplyVec2(t,e,s){const i=e.x,r=e.y;return s.x=t.ex.x*i+t.ey.x*r,s.y=t.ex.y*i+t.ey.y*r,s}static TransposeMultiplyVec2(t,e,s){const i=e.x,r=e.y;return s.x=t.ex.x*i+t.ex.y*r,s.y=t.ey.x*i+t.ey.y*r,s}static Add(t,e,s){return s.ex.x=t.ex.x+e.ex.x,s.ex.y=t.ex.y+e.ex.y,s.ey.x=t.ey.x+e.ey.x,s.ey.y=t.ey.y+e.ey.y,s}static Multiply(t,e,s){const i=t.ex.x,r=t.ex.y,h=t.ey.x,y=t.ey.y,x=e.ex.x,n=e.ex.y,o=e.ey.x,c=e.ey.y;return s.ex.x=i*x+h*n,s.ex.y=r*x+y*n,s.ey.x=i*o+h*c,s.ey.y=r*o+y*c,s}static TransposeMultiply(t,e,s){const i=t.ex.x,r=t.ex.y,h=t.ey.x,y=t.ey.y,x=e.ex.x,n=e.ex.y,o=e.ey.x,c=e.ey.y;return s.ex.x=i*x+r*n,s.ex.y=h*x+y*n,s.ey.x=i*o+r*c,s.ey.y=h*o+y*c,s}}exports.b2Mat22=a,a.IDENTITY=new a;class u{constructor(){this.ex=new c(1,0,0),this.ey=new c(0,1,0),this.ez=new c(0,0,1)}Clone(){return(new u).Copy(this)}SetColumns(t,e,s){return this.ex.Copy(t),this.ey.Copy(e),this.ez.Copy(s),this}Copy(t){return this.ex.Copy(t.ex),this.ey.Copy(t.ey),this.ez.Copy(t.ez),this}SetIdentity(){return this.ex.Set(1,0,0),this.ey.Set(0,1,0),this.ez.Set(0,0,1),this}SetZero(){return this.ex.SetZero(),this.ey.SetZero(),this.ez.SetZero(),this}Add(t){return this.ex.Add(t.ex),this.ey.Add(t.ey),this.ez.Add(t.ez),this}Solve33(t,e,s,i){const r=this.ex.x,h=this.ex.y,y=this.ex.z,x=this.ey.x,n=this.ey.y,o=this.ey.z,c=this.ez.x,a=this.ez.y,u=this.ez.z;let p=r*(n*u-o*a)+h*(o*c-x*u)+y*(x*a-n*c);return 0!==p&&(p=1/p),i.x=p*(t*(n*u-o*a)+e*(o*c-x*u)+s*(x*a-n*c)),i.y=p*(r*(e*u-s*a)+h*(s*c-t*u)+y*(t*a-e*c)),i.z=p*(r*(n*s-o*e)+h*(o*t-x*s)+y*(x*e-n*t)),i}Solve22(t,e,s){const i=this.ex.x,r=this.ey.x,h=this.ex.y,y=this.ey.y;let x=i*y-r*h;return 0!==x&&(x=1/x),s.x=x*(y*t-r*e),s.y=x*(i*e-h*t),s}GetInverse22(t){const e=this.ex.x,s=this.ey.x,i=this.ex.y,r=this.ey.y;let h=e*r-s*i;0!==h&&(h=1/h),t.ex.x=h*r,t.ey.x=-h*s,t.ex.z=0,t.ex.y=-h*i,t.ey.y=h*e,t.ey.z=0,t.ez.x=0,t.ez.y=0,t.ez.z=0}GetSymInverse33(t){let e=c.Dot(this.ex,c.Cross(this.ey,this.ez,c.s_t0));0!==e&&(e=1/e);const s=this.ex.x,i=this.ey.x,r=this.ez.x,h=this.ey.y,y=this.ez.y,x=this.ez.z;t.ex.x=e*(h*x-y*y),t.ex.y=e*(r*y-i*x),t.ex.z=e*(i*y-r*h),t.ey.x=t.ex.y,t.ey.y=e*(s*x-r*r),t.ey.z=e*(r*i-s*y),t.ez.x=t.ex.z,t.ez.y=t.ey.z,t.ez.z=e*(s*h-i*i)}static MultiplyVec3(t,e,s){const{x:i,y:r,z:h}=e;return s.x=t.ex.x*i+t.ey.x*r+t.ez.x*h,s.y=t.ex.y*i+t.ey.y*r+t.ez.y*h,s.z=t.ex.z*i+t.ey.z*r+t.ez.z*h,s}static MultiplyVec2(t,e,s){const{x:i,y:r}=e;return s.x=t.ex.x*i+t.ey.x*r,s.y=t.ex.y*i+t.ey.y*r,s}}exports.b2Mat33=u,u.IDENTITY=new u;class p{constructor(t=0){this.s=0,this.c=1,t&&(this.s=Math.sin(t),this.c=Math.cos(t))}Clone(){return(new p).Copy(this)}Copy(t){return this.s=t.s,this.c=t.c,this}Set(t){return this.s=Math.sin(t),this.c=Math.cos(t),this}SetIdentity(){return this.s=0,this.c=1,this}GetAngle(){return Math.atan2(this.s,this.c)}GetXAxis(t){return t.x=this.c,t.y=this.s,t}GetYAxis(t){return t.x=-this.s,t.y=this.c,t}static Multiply(t,e,s){const i=t.s*e.c+t.c*e.s,r=t.c*e.c-t.s*e.s;return s.s=i,s.c=r,s}static TransposeMultiply(t,e,s){const i=t.c*e.s-t.s*e.c,r=t.c*e.c+t.s*e.s;return s.s=i,s.c=r,s}static MultiplyVec2(t,e,s){const i=e.x,r=e.y;return s.x=t.c*i-t.s*r,s.y=t.s*i+t.c*r,s}static TransposeMultiplyVec2(t,e,s){const i=e.x,r=e.y;return s.x=t.c*i+t.s*r,s.y=-t.s*i+t.c*r,s}}exports.b2Rot=p,p.IDENTITY=new p;class l{constructor(){this.p=new o,this.q=new p}Clone(){return(new l).Copy(this)}Copy(t){return this.p.Copy(t.p),this.q.Copy(t.q),this}SetIdentity(){return this.p.SetZero(),this.q.SetIdentity(),this}SetPositionRotation(t,e){return this.p.Copy(t),this.q.Copy(e),this}SetPositionAngle(t,e){return this.p.Copy(t),this.q.Set(e),this}SetPosition(t){return this.p.Copy(t),this}SetPositionXY(t,e){return this.p.Set(t,e),this}SetRotation(t){return this.q.Copy(t),this}SetRotationAngle(t){return this.q.Set(t),this}GetPosition(){return this.p}GetRotation(){return this.q}GetAngle(){return this.q.GetAngle()}static MultiplyVec2(t,e,s){const i=e.x,r=e.y;return s.x=t.q.c*i-t.q.s*r+t.p.x,s.y=t.q.s*i+t.q.c*r+t.p.y,s}static TransposeMultiplyVec2(t,e,s){const i=e.x-t.p.x,r=e.y-t.p.y;return s.x=t.q.c*i+t.q.s*r,s.y=-t.q.s*i+t.q.c*r,s}static Multiply(t,e,s){return p.Multiply(t.q,e.q,s.q),p.MultiplyVec2(t.q,e.p,s.p).Add(t.p),s}static TransposeMultiply(t,e,s){return p.TransposeMultiply(t.q,e.q,s.q),p.TransposeMultiplyVec2(t.q,o.Subtract(e.p,t.p,s.p),s.p),s}}exports.b2Transform=l,l.IDENTITY=new l;class S{constructor(){this.localCenter=new o,this.c0=new o,this.c=new o,this.a0=0,this.a=0,this.alpha0=0}Clone(){return(new S).Copy(this)}Copy(t){return this.localCenter.Copy(t.localCenter),this.c0.Copy(t.c0),this.c.Copy(t.c),this.a0=t.a0,this.a=t.a,this.alpha0=t.alpha0,this}GetTransform(t,e){const s=1-e;t.p.x=s*this.c0.x+e*this.c.x,t.p.y=s*this.c0.y+e*this.c.y;const i=s*this.a0+e*this.a;return t.q.Set(i),t.p.Subtract(p.MultiplyVec2(t.q,this.localCenter,o.s_t0)),t}Advance(t){const e=(t-this.alpha0)/(1-this.alpha0);this.c0.x+=e*(this.c.x-this.c0.x),this.c0.y+=e*(this.c.y-this.c0.y),this.a0+=e*(this.a-this.a0),this.alpha0=t}Normalize(){const t=exports.b2_two_pi*Math.floor(this.a0/exports.b2_two_pi);this.a0-=t,this.a-=t}}exports.b2Sweep=S;
},{"./b2_common":"ReKW"}],"lvls":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.debugColors=exports.b2Color=void 0;class t{constructor(t=.5,i=.5,s=.5,r=1){this.r=t,this.g=i,this.b=s,this.a=r}Clone(){return new t(this.r,this.g,this.b,this.a)}Copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}IsEqual(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}IsZero(){return 0===this.r&&0===this.g&&0===this.b&&0===this.a}SetByteRGB(t,i,s){return this.r=t/255,this.g=i/255,this.b=s/255,this}SetByteRGBA(t,i,s,r){return this.r=t/255,this.g=i/255,this.b=s/255,this.a=r/255,this}SetRGB(t,i,s){return this.r=t,this.g=i,this.b=s,this}SetRGBA(t,i,s,r){return this.r=t,this.g=i,this.b=s,this.a=r,this}Add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this}Subtract(t){return this.r-=t.r,this.g-=t.g,this.b-=t.b,this.a-=t.a,this}Scale(t){return this.r*=t,this.g*=t,this.b*=t,this.a*=t,this}Mix(i,s){t.MixColors(this,i,s)}static Add(t,i,s){return s.r=t.r+i.r,s.g=t.g+i.g,s.b=t.b+i.b,s.a=t.a+i.a,s}static Subtract(t,i,s){return s.r=t.r-i.r,s.g=t.g-i.g,s.b=t.b-i.b,s.a=t.a-i.a,s}static Scale(t,i,s){return s.r=t.r*i,s.g=t.g*i,s.b=t.b*i,s.a=t.a*i,s}static MixColors(t,i,s){const r=s*(i.r-t.r),e=s*(i.g-t.g),n=s*(i.b-t.b),h=s*(i.a-t.a);t.r+=r,t.g+=e,t.b+=n,t.a+=h,i.r-=r,i.g-=e,i.b-=n,i.a-=h}}exports.b2Color=t,t.ZERO=new t(0,0,0,0),t.RED=new t(1,0,0),t.GREEN=new t(0,1,0),t.BLUE=new t(0,0,1),t.WHITE=new t(1,1,1),t.BLACK=new t(0,0,0),exports.debugColors={badBody:new t(1,0,0),disabledBody:new t(.5,.5,.3),staticBody:new t(.5,.9,.5),kinematicBody:new t(.5,.5,.9),sleepingBody:new t(.6,.6,.6),body:new t(.9,.7,.7),pair:new t(.3,.9,.9),aabb:new t(.9,.3,.9),joint1:new t(.7,.7,.7),joint2:new t(.3,.9,.3),joint3:new t(.9,.3,.3),joint4:new t(.3,.3,.9),joint5:new t(.4,.4,.4),joint6:new t(.5,.8,.8),joint7:new t(0,1,0),joint8:new t(.8,.8,.8),rope:new t(.4,.5,.7),ropePointG:new t(.1,.8,.1),ropePointD:new t(.7,.2,.4)};
},{}],"stUN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2Shape=exports.b2ShapeType=exports.b2MassData=void 0;const e=require("../common/b2_math");class t{constructor(){this.mass=0,this.center=new e.b2Vec2,this.I=0}}var s;exports.b2MassData=t,function(e){e[e.e_unknown=-1]="e_unknown",e[e.e_circle=0]="e_circle",e[e.e_edge=1]="e_edge",e[e.e_polygon=2]="e_polygon",e[e.e_chain=3]="e_chain",e[e.e_typeCount=4]="e_typeCount"}(s=exports.b2ShapeType||(exports.b2ShapeType={}));class r{constructor(e,t){this.m_radius=0,this.m_type=e,this.m_radius=t}Copy(e){return this.m_radius=e.m_radius,this}GetType(){return this.m_type}}exports.b2Shape=r;
},{"../common/b2_math":"cQbL"}],"hp9S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2ShapeCast=exports.b2Distance=exports.b2Gjk=exports.b2ShapeCastOutput=exports.b2ShapeCastInput=exports.b2DistanceOutput=exports.b2DistanceInput=exports.b2SimplexCache=exports.b2DistanceProxy=void 0;const t=require("../common/b2_common"),e=require("../common/b2_math");class s{constructor(){this.m_buffer=(0,t.b2MakeArray)(2,e.b2Vec2),this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0}Copy(t){return t.m_vertices===t.m_buffer?(this.m_vertices=this.m_buffer,this.m_buffer[0].Copy(t.m_buffer[0]),this.m_buffer[1].Copy(t.m_buffer[1])):this.m_vertices=t.m_vertices,this.m_count=t.m_count,this.m_radius=t.m_radius,this}Reset(){return this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0,this}SetShape(t,e){t.SetupDistanceProxy(this,e)}SetVerticesRadius(t,e,s){this.m_vertices=t,this.m_count=e,this.m_radius=s}GetSupport(t){let s=0,i=e.b2Vec2.Dot(this.m_vertices[0],t);for(let r=1;r<this.m_count;++r){const o=e.b2Vec2.Dot(this.m_vertices[r],t);o>i&&(s=r,i=o)}return s}GetSupportVertex(t){let s=0,i=e.b2Vec2.Dot(this.m_vertices[0],t);for(let r=1;r<this.m_count;++r){const o=e.b2Vec2.Dot(this.m_vertices[r],t);o>i&&(s=r,i=o)}return this.m_vertices[s]}GetVertexCount(){return this.m_count}GetVertex(t){return this.m_vertices[t]}}exports.b2DistanceProxy=s;class i{constructor(){this.metric=0,this.count=0,this.indexA=[0,0,0],this.indexB=[0,0,0]}Reset(){return this.metric=0,this.count=0,this}}exports.b2SimplexCache=i;class r{constructor(){this.proxyA=new s,this.proxyB=new s,this.transformA=new e.b2Transform,this.transformB=new e.b2Transform,this.useRadii=!1}Reset(){return this.proxyA.Reset(),this.proxyB.Reset(),this.transformA.SetIdentity(),this.transformB.SetIdentity(),this.useRadii=!1,this}}exports.b2DistanceInput=r;class o{constructor(){this.pointA=new e.b2Vec2,this.pointB=new e.b2Vec2,this.distance=0,this.iterations=0}Reset(){return this.pointA.SetZero(),this.pointB.SetZero(),this.distance=0,this.iterations=0,this}}exports.b2DistanceOutput=o;class c{constructor(){this.proxyA=new s,this.proxyB=new s,this.transformA=new e.b2Transform,this.transformB=new e.b2Transform,this.translationB=new e.b2Vec2}}exports.b2ShapeCastInput=c;class n{constructor(){this.point=new e.b2Vec2,this.normal=new e.b2Vec2,this.lambda=0,this.iterations=0}}exports.b2ShapeCastOutput=n,exports.b2Gjk={calls:0,iters:0,maxIters:0,reset(){this.calls=0,this.iters=0,this.maxIters=0}};class a{constructor(){this.wA=new e.b2Vec2,this.wB=new e.b2Vec2,this.w=new e.b2Vec2,this.a=0,this.indexA=0,this.indexB=0}Copy(t){return this.wA.Copy(t.wA),this.wB.Copy(t.wB),this.w.Copy(t.w),this.a=t.a,this.indexA=t.indexA,this.indexB=t.indexB,this}}class h{constructor(){this.m_v1=new a,this.m_v2=new a,this.m_v3=new a,this.m_count=0,this.m_vertices=[this.m_v1,this.m_v2,this.m_v3]}ReadCache(s,i,r,o,c){this.m_count=s.count;const n=this.m_vertices;for(let t=0;t<this.m_count;++t){const a=n[t];a.indexA=s.indexA[t],a.indexB=s.indexB[t];const h=i.GetVertex(a.indexA),m=o.GetVertex(a.indexB);e.b2Transform.MultiplyVec2(r,h,a.wA),e.b2Transform.MultiplyVec2(c,m,a.wB),e.b2Vec2.Subtract(a.wB,a.wA,a.w),a.a=0}if(this.m_count>1){const e=s.metric,i=this.GetMetric();(i<.5*e||2*e<i||i<t.b2_epsilon)&&(this.m_count=0)}if(0===this.m_count){const t=n[0];t.indexA=0,t.indexB=0;const s=i.GetVertex(0),a=o.GetVertex(0);e.b2Transform.MultiplyVec2(r,s,t.wA),e.b2Transform.MultiplyVec2(c,a,t.wB),e.b2Vec2.Subtract(t.wB,t.wA,t.w),t.a=1,this.m_count=1}}WriteCache(t){t.metric=this.GetMetric(),t.count=this.m_count;const e=this.m_vertices;for(let s=0;s<this.m_count;++s)t.indexA[s]=e[s].indexA,t.indexB[s]=e[s].indexB}GetSearchDirection(t){switch(this.m_count){case 1:return e.b2Vec2.Negate(this.m_v1.w,t);case 2:{const s=e.b2Vec2.Subtract(this.m_v2.w,this.m_v1.w,t);return e.b2Vec2.Cross(s,e.b2Vec2.Negate(this.m_v1.w,e.b2Vec2.s_t0))>0?e.b2Vec2.CrossOneVec2(s,t):e.b2Vec2.CrossVec2One(s,t)}default:return t.SetZero()}}GetClosestPoint(t){switch(this.m_count){case 0:return t.SetZero();case 1:return t.Copy(this.m_v1.w);case 2:return t.Set(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);case 3:default:return t.SetZero()}}GetWitnessPoints(t,e){switch(this.m_count){case 0:break;case 1:t.Copy(this.m_v1.wA),e.Copy(this.m_v1.wB);break;case 2:t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,e.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,e.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:e.x=t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,e.y=t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y}}GetMetric(){switch(this.m_count){case 0:case 1:return 0;case 2:return e.b2Vec2.Distance(this.m_v1.w,this.m_v2.w);case 3:return e.b2Vec2.Cross(e.b2Vec2.Subtract(this.m_v2.w,this.m_v1.w,e.b2Vec2.s_t0),e.b2Vec2.Subtract(this.m_v3.w,this.m_v1.w,e.b2Vec2.s_t1));default:return 0}}Solve2(){const t=this.m_v1.w,s=this.m_v2.w,i=e.b2Vec2.Subtract(s,t,h.s_e12),r=-e.b2Vec2.Dot(t,i);if(r<=0)return this.m_v1.a=1,void(this.m_count=1);const o=e.b2Vec2.Dot(s,i);if(o<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);const c=1/(o+r);this.m_v1.a=o*c,this.m_v2.a=r*c,this.m_count=2}Solve3(){const t=this.m_v1.w,s=this.m_v2.w,i=this.m_v3.w,r=e.b2Vec2.Subtract(s,t,h.s_e12),o=e.b2Vec2.Dot(t,r),c=e.b2Vec2.Dot(s,r),n=-o,a=e.b2Vec2.Subtract(i,t,h.s_e13),m=e.b2Vec2.Dot(t,a),_=e.b2Vec2.Dot(i,a),u=-m,b=e.b2Vec2.Subtract(i,s,h.s_e23),p=e.b2Vec2.Dot(s,b),v=e.b2Vec2.Dot(i,b),V=-p,w=e.b2Vec2.Cross(r,a),x=w*e.b2Vec2.Cross(s,i),l=w*e.b2Vec2.Cross(i,t),d=w*e.b2Vec2.Cross(t,s);if(n<=0&&u<=0)return this.m_v1.a=1,void(this.m_count=1);if(c>0&&n>0&&d<=0){const t=1/(c+n);return this.m_v1.a=c*t,this.m_v2.a=n*t,void(this.m_count=2)}if(_>0&&u>0&&l<=0){const t=1/(_+u);return this.m_v1.a=_*t,this.m_v3.a=u*t,this.m_count=2,void this.m_v2.Copy(this.m_v3)}if(c<=0&&V<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);if(_<=0&&v<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v3);if(v>0&&V>0&&x<=0){const t=1/(v+V);return this.m_v2.a=v*t,this.m_v3.a=V*t,this.m_count=2,void this.m_v1.Copy(this.m_v3)}const f=1/(x+l+d);this.m_v1.a=x*f,this.m_v2.a=l*f,this.m_v3.a=d*f,this.m_count=3}}h.s_e12=new e.b2Vec2,h.s_e13=new e.b2Vec2,h.s_e23=new e.b2Vec2;const m=new h,_=[0,0,0],u=[0,0,0],b=new e.b2Vec2,p=new e.b2Vec2,v=new e.b2Vec2,V=new e.b2Vec2,w=new e.b2Vec2;function x(s,i,r){++exports.b2Gjk.calls;const{proxyA:o,proxyB:c,transformA:n,transformB:a}=r,h=m;h.ReadCache(i,o,n,c,a);const x=h.m_vertices,l=_,d=u;let f=0,y=0;for(;y<20;){f=h.m_count;for(let t=0;t<f;++t)l[t]=x[t].indexA,d[t]=x[t].indexB;switch(h.m_count){case 1:break;case 2:h.Solve2();break;case 3:h.Solve3()}if(3===h.m_count)break;const s=h.GetSearchDirection(p);if(s.LengthSquared()<t.b2_epsilon_sq)break;const i=x[h.m_count];i.indexA=o.GetSupport(e.b2Rot.TransposeMultiplyVec2(n.q,e.b2Vec2.Negate(s,e.b2Vec2.s_t0),V)),e.b2Transform.MultiplyVec2(n,o.GetVertex(i.indexA),i.wA),i.indexB=c.GetSupport(e.b2Rot.TransposeMultiplyVec2(a.q,s,w)),e.b2Transform.MultiplyVec2(a,c.GetVertex(i.indexB),i.wB),e.b2Vec2.Subtract(i.wB,i.wA,i.w),++y,++exports.b2Gjk.iters;let r=!1;for(let t=0;t<f;++t)if(i.indexA===l[t]&&i.indexB===d[t]){r=!0;break}if(r)break;++h.m_count}if(exports.b2Gjk.maxIters=Math.max(exports.b2Gjk.maxIters,y),h.GetWitnessPoints(s.pointA,s.pointB),s.distance=e.b2Vec2.Distance(s.pointA,s.pointB),s.iterations=y,h.WriteCache(i),r.useRadii){const i=o.m_radius,r=c.m_radius;if(s.distance>i+r&&s.distance>t.b2_epsilon){s.distance-=i+r;const t=e.b2Vec2.Subtract(s.pointB,s.pointA,v);t.Normalize(),s.pointA.AddScaled(i,t),s.pointB.SubtractScaled(r,t)}else{const t=e.b2Vec2.Mid(s.pointA,s.pointB,b);s.pointA.Copy(t),s.pointB.Copy(t),s.distance=0}}}exports.b2Distance=x;const l=new e.b2Vec2,d=new h,f=new e.b2Vec2,y=new e.b2Vec2,S=new e.b2Vec2,A=new e.b2Vec2,B=new e.b2Vec2,C=new e.b2Vec2;function G(s,i){s.iterations=0,s.lambda=1,s.normal.SetZero(),s.point.SetZero();const{proxyA:r,proxyB:o}=i,c=Math.max(r.m_radius,t.b2_polygonRadius),n=c+Math.max(o.m_radius,t.b2_polygonRadius),a=i.transformA,h=i.transformB,m=i.translationB,_=l.SetZero();let u=0;const b=d;b.m_count=0;const p=b.m_vertices;let v=r.GetSupport(e.b2Rot.TransposeMultiplyVec2(a.q,e.b2Vec2.Negate(m,e.b2Vec2.s_t1),e.b2Vec2.s_t0)),V=e.b2Transform.MultiplyVec2(a,r.GetVertex(v),f),w=o.GetSupport(e.b2Rot.TransposeMultiplyVec2(h.q,m,e.b2Vec2.s_t0)),x=e.b2Transform.MultiplyVec2(h,o.GetVertex(w),y);const G=e.b2Vec2.Subtract(V,x,S),D=Math.max(t.b2_polygonRadius,n-t.b2_polygonRadius),M=.5*t.b2_linearSlop;let R=0;for(;R<20&&G.Length()-D>M;){s.iterations+=1,v=r.GetSupport(e.b2Rot.TransposeMultiplyVec2(a.q,e.b2Vec2.Negate(G,e.b2Vec2.s_t1),e.b2Vec2.s_t0)),V=e.b2Transform.MultiplyVec2(a,r.GetVertex(v),f),w=o.GetSupport(e.b2Rot.TransposeMultiplyVec2(h.q,G,e.b2Vec2.s_t0)),x=e.b2Transform.MultiplyVec2(h,o.GetVertex(w),y);const t=e.b2Vec2.Subtract(V,x,A);G.Normalize();const i=e.b2Vec2.Dot(G,t),c=e.b2Vec2.Dot(G,m);if(i-D>u*c){if(c<=0)return!1;if((u=(i-D)/c)>1)return!1;e.b2Vec2.Negate(G,_),b.m_count=0}const n=p[b.m_count];switch(n.indexA=w,e.b2Vec2.AddScaled(x,u,m,n.wA),n.indexB=v,n.wB.Copy(V),e.b2Vec2.Subtract(n.wB,n.wA,n.w),n.a=1,b.m_count+=1,b.m_count){case 1:break;case 2:b.Solve2();break;case 3:b.Solve3()}if(3===b.m_count)return!1;b.GetClosestPoint(G),++R}if(0===R)return!1;const T=B,k=C;return b.GetWitnessPoints(T,k),G.LengthSquared()>0&&(e.b2Vec2.Negate(G,_),_.Normalize()),e.b2Vec2.AddScaled(T,c,_,s.point),s.normal.Copy(_),s.lambda=u,s.iterations=R,!0}exports.b2ShapeCast=G;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL"}],"PKgf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2TestOverlap=exports.b2ClipSegmentToLine=exports.b2AABB=exports.b2RayCastOutput=exports.b2RayCastInput=exports.b2ClipVertex=exports.b2GetPointStates=exports.b2PointState=exports.b2WorldManifold=exports.b2Manifold=exports.b2ManifoldType=exports.b2ManifoldPoint=exports.b2ContactID=exports.b2ContactFeature=exports.b2ContactFeatureType=void 0;const t=require("../common/b2_common"),e=require("../common/b2_math"),i=require("./b2_distance");var o,n,s;!function(t){t[t.e_vertex=0]="e_vertex",t[t.e_face=1]="e_face"}(o=exports.b2ContactFeatureType||(exports.b2ContactFeatureType={}));class r{constructor(){this.m_key=0,this.m_key_invalid=!1,this.m_indexA=0,this.m_indexB=0,this.m_typeA=o.e_vertex,this.m_typeB=o.e_vertex}get key(){return this.m_key_invalid&&(this.m_key_invalid=!1,this.m_key=this.m_indexA|this.m_indexB<<8|this.m_typeA<<16|this.m_typeB<<24),this.m_key}set key(t){this.m_key=t,this.m_key_invalid=!1,this.m_indexA=255&this.m_key,this.m_indexB=this.m_key>>8&255,this.m_typeA=this.m_key>>16&255,this.m_typeB=this.m_key>>24&255}get indexA(){return this.m_indexA}set indexA(t){this.m_indexA=t,this.m_key_invalid=!0}get indexB(){return this.m_indexB}set indexB(t){this.m_indexB=t,this.m_key_invalid=!0}get typeA(){return this.m_typeA}set typeA(t){this.m_typeA=t,this.m_key_invalid=!0}get typeB(){return this.m_typeB}set typeB(t){this.m_typeB=t,this.m_key_invalid=!0}}exports.b2ContactFeature=r;class a{constructor(){this.cf=new r}Copy(t){return this.key=t.key,this}Clone(){return(new a).Copy(this)}get key(){return this.cf.key}set key(t){this.cf.key=t}}exports.b2ContactID=a;class p{constructor(){this.localPoint=new e.b2Vec2,this.normalImpulse=0,this.tangentImpulse=0,this.id=new a}Reset(){this.localPoint.SetZero(),this.normalImpulse=0,this.tangentImpulse=0,this.id.key=0}Copy(t){return this.localPoint.Copy(t.localPoint),this.normalImpulse=t.normalImpulse,this.tangentImpulse=t.tangentImpulse,this.id.Copy(t.id),this}}exports.b2ManifoldPoint=p,function(t){t[t.e_circles=0]="e_circles",t[t.e_faceA=1]="e_faceA",t[t.e_faceB=2]="e_faceB"}(n=exports.b2ManifoldType||(exports.b2ManifoldType={}));class l{constructor(){this.points=(0,t.b2MakeArray)(t.b2_maxManifoldPoints,p),this.localNormal=new e.b2Vec2,this.localPoint=new e.b2Vec2,this.type=n.e_circles,this.pointCount=0}Reset(){for(let e=0;e<t.b2_maxManifoldPoints;++e)this.points[e].Reset();this.localNormal.SetZero(),this.localPoint.SetZero(),this.type=n.e_circles,this.pointCount=0}Copy(e){this.pointCount=e.pointCount;for(let i=0;i<t.b2_maxManifoldPoints;++i)this.points[i].Copy(e.points[i]);return this.localNormal.Copy(e.localNormal),this.localPoint.Copy(e.localPoint),this.type=e.type,this}Clone(){return(new l).Copy(this)}}exports.b2Manifold=l;class u{constructor(){this.normal=new e.b2Vec2,this.points=(0,t.b2MakeArray)(t.b2_maxManifoldPoints,e.b2Vec2),this.separations=(0,t.b2MakeNumberArray)(t.b2_maxManifoldPoints)}Initialize(i,o,s,r,a){if(0!==i.pointCount)switch(i.type){case n.e_circles:{this.normal.Set(1,0);const n=e.b2Transform.MultiplyVec2(o,i.localPoint,u.Initialize_s_pointA),p=e.b2Transform.MultiplyVec2(r,i.points[0].localPoint,u.Initialize_s_pointB);e.b2Vec2.DistanceSquared(n,p)>t.b2_epsilon_sq&&e.b2Vec2.Subtract(p,n,this.normal).Normalize();const l=e.b2Vec2.AddScaled(n,s,this.normal,u.Initialize_s_cA),c=e.b2Vec2.SubtractScaled(p,a,this.normal,u.Initialize_s_cB);e.b2Vec2.Mid(l,c,this.points[0]),this.separations[0]=e.b2Vec2.Dot(e.b2Vec2.Subtract(c,l,e.b2Vec2.s_t0),this.normal);break}case n.e_faceA:{e.b2Rot.MultiplyVec2(o.q,i.localNormal,this.normal);const t=e.b2Transform.MultiplyVec2(o,i.localPoint,u.Initialize_s_planePoint);for(let o=0;o<i.pointCount;++o){const n=e.b2Transform.MultiplyVec2(r,i.points[o].localPoint,u.Initialize_s_clipPoint),p=s-e.b2Vec2.Dot(e.b2Vec2.Subtract(n,t,e.b2Vec2.s_t0),this.normal),l=e.b2Vec2.AddScaled(n,p,this.normal,u.Initialize_s_cA),c=e.b2Vec2.SubtractScaled(n,a,this.normal,u.Initialize_s_cB);e.b2Vec2.Mid(l,c,this.points[o]),this.separations[o]=e.b2Vec2.Dot(e.b2Vec2.Subtract(c,l,e.b2Vec2.s_t0),this.normal)}break}case n.e_faceB:{e.b2Rot.MultiplyVec2(r.q,i.localNormal,this.normal);const t=e.b2Transform.MultiplyVec2(r,i.localPoint,u.Initialize_s_planePoint);for(let n=0;n<i.pointCount;++n){const r=e.b2Transform.MultiplyVec2(o,i.points[n].localPoint,u.Initialize_s_clipPoint),p=a-e.b2Vec2.Dot(e.b2Vec2.Subtract(r,t,e.b2Vec2.s_t0),this.normal),l=e.b2Vec2.AddScaled(r,p,this.normal,u.Initialize_s_cB),c=e.b2Vec2.SubtractScaled(r,s,this.normal,u.Initialize_s_cA);e.b2Vec2.Mid(c,l,this.points[n]),this.separations[n]=e.b2Vec2.Dot(e.b2Vec2.Subtract(c,l,e.b2Vec2.s_t0),this.normal)}this.normal.Negate();break}}}}function c(e,i,o,n){let r;for(r=0;r<o.pointCount;++r){const{key:t}=o.points[r].id;e[r]=s.b2_removeState;for(let i=0;i<n.pointCount;++i)if(n.points[i].id.key===t){e[r]=s.b2_persistState;break}}for(;r<t.b2_maxManifoldPoints;++r)e[r]=s.b2_nullState;for(r=0;r<n.pointCount;++r){const{key:t}=n.points[r].id;i[r]=s.b2_addState;for(let e=0;e<o.pointCount;++e)if(o.points[e].id.key===t){i[r]=s.b2_persistState;break}}for(;r<t.b2_maxManifoldPoints;++r)i[r]=s.b2_nullState}exports.b2WorldManifold=u,u.Initialize_s_pointA=new e.b2Vec2,u.Initialize_s_pointB=new e.b2Vec2,u.Initialize_s_cA=new e.b2Vec2,u.Initialize_s_cB=new e.b2Vec2,u.Initialize_s_planePoint=new e.b2Vec2,u.Initialize_s_clipPoint=new e.b2Vec2,function(t){t[t.b2_nullState=0]="b2_nullState",t[t.b2_addState=1]="b2_addState",t[t.b2_persistState=2]="b2_persistState",t[t.b2_removeState=3]="b2_removeState"}(s=exports.b2PointState||(exports.b2PointState={})),exports.b2GetPointStates=c;class h{constructor(){this.v=new e.b2Vec2,this.id=new a}Copy(t){return this.v.Copy(t.v),this.id.Copy(t.id),this}}exports.b2ClipVertex=h;class d{constructor(){this.p1=new e.b2Vec2,this.p2=new e.b2Vec2,this.maxFraction=1}Copy(t){return this.p1.Copy(t.p1),this.p2.Copy(t.p2),this.maxFraction=t.maxFraction,this}}exports.b2RayCastInput=d;class b{constructor(){this.normal=new e.b2Vec2,this.fraction=0}Copy(t){return this.normal.Copy(t.normal),this.fraction=t.fraction,this}}exports.b2RayCastOutput=b;class y{constructor(){this.lowerBound=new e.b2Vec2,this.upperBound=new e.b2Vec2}Copy(t){return this.lowerBound.Copy(t.lowerBound),this.upperBound.Copy(t.upperBound),this}IsValid(){return this.lowerBound.IsValid()&&this.upperBound.IsValid()&&this.upperBound.x>=this.lowerBound.x&&this.upperBound.y>=this.lowerBound.y}GetCenter(t){return e.b2Vec2.Mid(this.lowerBound,this.upperBound,t)}GetExtents(t){return e.b2Vec2.Extents(this.lowerBound,this.upperBound,t)}GetPerimeter(){return 2*(this.upperBound.x-this.lowerBound.x+(this.upperBound.y-this.lowerBound.y))}Combine1(t){return this.lowerBound.x=Math.min(this.lowerBound.x,t.lowerBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,t.lowerBound.y),this.upperBound.x=Math.max(this.upperBound.x,t.upperBound.x),this.upperBound.y=Math.max(this.upperBound.y,t.upperBound.y),this}Combine2(t,e){return this.lowerBound.x=Math.min(t.lowerBound.x,e.lowerBound.x),this.lowerBound.y=Math.min(t.lowerBound.y,e.lowerBound.y),this.upperBound.x=Math.max(t.upperBound.x,e.upperBound.x),this.upperBound.y=Math.max(t.upperBound.y,e.upperBound.y),this}static Combine(t,e,i){return i.Combine2(t,e),i}Contains(t){return this.lowerBound.x<=t.lowerBound.x&&this.lowerBound.y<=t.lowerBound.y&&t.upperBound.x<=this.upperBound.x&&t.upperBound.y<=this.upperBound.y}RayCast(e,i){let o=-t.b2_maxFloat,n=t.b2_maxFloat;const s=i.p1.x,r=i.p1.y,a=i.p2.x-i.p1.x,p=i.p2.y-i.p1.y,l=Math.abs(a),u=Math.abs(p),{normal:c}=e;if(l<t.b2_epsilon){if(s<this.lowerBound.x||this.upperBound.x<s)return!1}else{const t=1/a;let e=(this.lowerBound.x-s)*t,i=(this.upperBound.x-s)*t,r=-1;if(e>i){const t=e;e=i,i=t,r=1}if(e>o&&(c.x=r,c.y=0,o=e),o>(n=Math.min(n,i)))return!1}if(u<t.b2_epsilon){if(r<this.lowerBound.y||this.upperBound.y<r)return!1}else{const t=1/p;let e=(this.lowerBound.y-r)*t,i=(this.upperBound.y-r)*t,s=-1;if(e>i){const t=e;e=i,i=t,s=1}if(e>o&&(c.x=0,c.y=s,o=e),o>(n=Math.min(n,i)))return!1}return!(o<0||i.maxFraction<o)&&(e.fraction=o,!0)}TestContain(t){return!(t.x<this.lowerBound.x||this.upperBound.x<t.x)&&!(t.y<this.lowerBound.y||this.upperBound.y<t.y)}TestOverlap(t){return!(this.upperBound.x<t.lowerBound.x)&&(!(this.upperBound.y<t.lowerBound.y)&&(!(t.upperBound.x<this.lowerBound.x)&&!(t.upperBound.y<this.lowerBound.y)))}}function _(t,[i,n],s,r,a){let p=0;const l=e.b2Vec2.Dot(s,i.v)-r,u=e.b2Vec2.Dot(s,n.v)-r;if(l<=0&&t[p++].Copy(i),u<=0&&t[p++].Copy(n),l*u<0){const e=l/(l-u),{v:s,id:r}=t[p];s.x=i.v.x+e*(n.v.x-i.v.x),s.y=i.v.y+e*(n.v.y-i.v.y),r.cf.indexA=a,r.cf.indexB=i.id.cf.indexB,r.cf.typeA=o.e_vertex,r.cf.typeB=o.e_face,++p}return p}exports.b2AABB=y,exports.b2ClipSegmentToLine=_;const m=new i.b2DistanceInput,x=new i.b2SimplexCache,B=new i.b2DistanceOutput;function f(e,o,n,s,r,a){const p=m.Reset();p.proxyA.SetShape(e,o),p.proxyB.SetShape(n,s),p.transformA.Copy(r),p.transformB.Copy(a),p.useRadii=!0;const l=x.Reset();l.count=0;const u=B.Reset();return(0,i.b2Distance)(u,l,p),u.distance<10*t.b2_epsilon}exports.b2TestOverlap=f;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","./b2_distance":"hp9S"}],"IcdW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2Fixture=exports.b2FixtureProxy=exports.b2DefaultFilter=void 0;const t=require("../common/b2_math"),e=require("../collision/b2_collision"),s=require("../collision/b2_shape"),i=require("../common/b2_common"),r=require("../common/b2_settings"),o={c1:new t.b2Vec2,c2:new t.b2Vec2};exports.b2DefaultFilter={categoryBits:1,maskBits:65535,groupIndex:0};class n{constructor(t,s,i,r){this.aabb=new e.b2AABB,this.fixture=t,this.childIndex=r,t.m_shape.ComputeAABB(this.aabb,i,r),this.treeNode=s.CreateProxy(this.aabb,this)}}exports.b2FixtureProxy=n;const h=new e.b2AABB,a=new e.b2AABB,m=new t.b2Vec2;class u{constructor(t,e){var s,i,o,n,h;this.m_density=0,this.m_next=null,this.m_friction=0,this.m_restitution=0,this.m_restitutionThreshold=0,this.m_proxies=[],this.m_isSensor=!1,this.m_userData=null,this.m_body=t,this.m_shape=e.shape.Clone(),this.m_userData=e.userData,this.m_friction=null!==(s=e.friction)&&void 0!==s?s:.2,this.m_restitution=null!==(i=e.restitution)&&void 0!==i?i:0,this.m_restitutionThreshold=null!==(o=e.restitutionThreshold)&&void 0!==o?o:r.b2_lengthUnitsPerMeter,this.m_filter={...exports.b2DefaultFilter,...e.filter},this.m_isSensor=null!==(n=e.isSensor)&&void 0!==n&&n,this.m_density=null!==(h=e.density)&&void 0!==h?h:0}get m_proxyCount(){return this.m_proxies.length}GetType(){return this.m_shape.GetType()}GetShape(){return this.m_shape}SetSensor(t){t!==this.m_isSensor&&(this.m_body.SetAwake(!0),this.m_isSensor=t)}IsSensor(){return this.m_isSensor}SetFilterData(t){var e,s,i;this.m_filter.categoryBits=null!==(e=t.categoryBits)&&void 0!==e?e:exports.b2DefaultFilter.categoryBits,this.m_filter.groupIndex=null!==(s=t.groupIndex)&&void 0!==s?s:exports.b2DefaultFilter.groupIndex,this.m_filter.maskBits=null!==(i=t.maskBits)&&void 0!==i?i:exports.b2DefaultFilter.maskBits,this.Refilter()}GetFilterData(){return this.m_filter}Refilter(){let t=this.m_body.GetContactList();for(;t;){const{contact:e}=t,s=e.GetFixtureA(),i=e.GetFixtureB();s!==this&&i!==this||e.FlagForFiltering(),t=t.next}const e=this.m_body.GetWorld().m_contactManager.m_broadPhase;for(const s of this.m_proxies)e.TouchProxy(s.treeNode)}GetBody(){return this.m_body}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(t){this.m_userData=t}TestPoint(t){return this.m_shape.TestPoint(this.m_body.GetTransform(),t)}RayCast(t,e,s){return this.m_shape.RayCast(t,e,this.m_body.GetTransform(),s)}GetMassData(t=new s.b2MassData){return this.m_shape.ComputeMass(t,this.m_density),t}SetDensity(t){this.m_density=t}GetDensity(){return this.m_density}GetFriction(){return this.m_friction}SetFriction(t){this.m_friction=t}GetRestitution(){return this.m_restitution}SetRestitution(t){this.m_restitution=t}SetRestitutionThreshold(t){this.m_restitutionThreshold=t}GetAABB(t){return this.m_proxies[t].aabb}CreateProxies(t,e){(0,i.b2Assert)(0===this.m_proxies.length),this.m_proxies.length=this.m_shape.GetChildCount();for(let s=0;s<this.m_proxies.length;++s)this.m_proxies[s]=new n(this,t,e,s)}DestroyProxies(t){for(const e of this.m_proxies)t.DestroyProxy(e.treeNode);this.m_proxies.length=0}Synchronize(e,s,i){const{c1:r,c2:n}=o,u=m;for(const o of this.m_proxies){const m=h,l=a;this.m_shape.ComputeAABB(m,s,o.childIndex),this.m_shape.ComputeAABB(l,i,o.childIndex),o.aabb.Combine2(m,l),t.b2Vec2.Subtract(l.GetCenter(n),m.GetCenter(r),u),e.MoveProxy(o.treeNode,o.aabb,u)}}}exports.b2Fixture=u;
},{"../common/b2_math":"cQbL","../collision/b2_collision":"PKgf","../collision/b2_shape":"stUN","../common/b2_common":"ReKW","../common/b2_settings":"I6oK"}],"rONj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2Body=exports.b2BodyType=void 0;const t=require("../common/b2_math"),e=require("../collision/b2_shape"),s=require("./b2_fixture"),i=require("../common/b2_common");var a;!function(t){t[t.b2_staticBody=0]="b2_staticBody",t[t.b2_kinematicBody=1]="b2_kinematicBody",t[t.b2_dynamicBody=2]="b2_dynamicBody"}(a=exports.b2BodyType||(exports.b2BodyType={}));class m{constructor(e,s){var i,m,_,r,o,n,h,l,c,p,u,y,d,w;this.m_type=a.b2_staticBody,this.m_islandFlag=!1,this.m_awakeFlag=!1,this.m_autoSleepFlag=!1,this.m_bulletFlag=!1,this.m_fixedRotationFlag=!1,this.m_enabledFlag=!1,this.m_toiFlag=!1,this.m_islandIndex=0,this.m_xf=new t.b2Transform,this.m_sweep=new t.b2Sweep,this.m_linearVelocity=new t.b2Vec2,this.m_angularVelocity=0,this.m_force=new t.b2Vec2,this.m_torque=0,this.m_prev=null,this.m_next=null,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_jointList=null,this.m_contactList=null,this.m_mass=1,this.m_invMass=1,this.m_I=0,this.m_invI=0,this.m_linearDamping=0,this.m_angularDamping=0,this.m_gravityScale=1,this.m_sleepTime=0,this.m_userData=null,this.m_bulletFlag=null!==(i=e.bullet)&&void 0!==i&&i,this.m_fixedRotationFlag=null!==(m=e.fixedRotation)&&void 0!==m&&m,this.m_autoSleepFlag=null===(_=e.allowSleep)||void 0===_||_,null!==(r=e.awake)&&void 0!==r&&!r||(null!==(o=e.type)&&void 0!==o?o:a.b2_staticBody)===a.b2_staticBody||(this.m_awakeFlag=!0),this.m_enabledFlag=null===(n=e.enabled)||void 0===n||n,this.m_world=s,this.m_xf.p.Copy(null!==(h=e.position)&&void 0!==h?h:t.b2Vec2.ZERO),this.m_xf.q.Set(null!==(l=e.angle)&&void 0!==l?l:0),this.m_sweep.localCenter.SetZero(),this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=this.m_sweep.a=this.m_xf.q.GetAngle(),this.m_sweep.alpha0=0,this.m_linearVelocity.Copy(null!==(c=e.linearVelocity)&&void 0!==c?c:t.b2Vec2.ZERO),this.m_angularVelocity=null!==(p=e.angularVelocity)&&void 0!==p?p:0,this.m_linearDamping=null!==(u=e.linearDamping)&&void 0!==u?u:0,this.m_angularDamping=null!==(y=e.angularDamping)&&void 0!==y?y:0,this.m_gravityScale=null!==(d=e.gravityScale)&&void 0!==d?d:1,this.m_force.SetZero(),this.m_torque=0,this.m_sleepTime=0,this.m_type=null!==(w=e.type)&&void 0!==w?w:a.b2_staticBody,this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_userData=e.userData,this.m_fixtureList=null,this.m_fixtureCount=0}CreateFixture(t){(0,i.b2Assert)(!this.m_world.IsLocked());const e=new s.b2Fixture(this,t);if(this.m_enabledFlag){const t=this.m_world.m_contactManager.m_broadPhase;e.CreateProxies(t,this.m_xf)}return e.m_next=this.m_fixtureList,this.m_fixtureList=e,++this.m_fixtureCount,e.m_density>0&&this.ResetMassData(),this.m_world.m_newContacts=!0,e}DestroyFixture(t){(0,i.b2Assert)(!this.m_world.IsLocked());let e=this.m_fixtureList,s=null;for(;null!==e;){if(e===t){s?s.m_next=t.m_next:this.m_fixtureList=t.m_next;break}s=e,e=e.m_next}let a=this.m_contactList;for(;a;){const e=a.contact;a=a.next;const s=e.GetFixtureA(),i=e.GetFixtureB();t!==s&&t!==i||this.m_world.m_contactManager.Destroy(e)}if(this.m_enabledFlag){const e=this.m_world.m_contactManager.m_broadPhase;t.DestroyProxies(e)}t.m_next=null,--this.m_fixtureCount,this.ResetMassData()}SetTransformVec(t,e){this.SetTransformXY(t.x,t.y,e)}SetTransformXY(e,s,a){(0,i.b2Assert)(!this.m_world.IsLocked()),this.m_xf.q.Set(a),this.m_xf.p.Set(e,s),t.b2Transform.MultiplyVec2(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.a=a,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_sweep.a0=a;const m=this.m_world.m_contactManager.m_broadPhase;for(let t=this.m_fixtureList;t;t=t.m_next)t.Synchronize(m,this.m_xf,this.m_xf);this.m_world.m_newContacts=!0}SetTransform(t){this.SetTransformVec(t.p,t.GetAngle())}GetTransform(){return this.m_xf}GetPosition(){return this.m_xf.p}GetAngle(){return this.m_sweep.a}SetAngle(t){this.SetTransformVec(this.GetPosition(),t)}GetWorldCenter(){return this.m_sweep.c}GetLocalCenter(){return this.m_sweep.localCenter}SetLinearVelocity(e){this.m_type!==a.b2_staticBody&&(t.b2Vec2.Dot(e,e)>0&&this.SetAwake(!0),this.m_linearVelocity.Copy(e))}GetLinearVelocity(){return this.m_linearVelocity}SetAngularVelocity(t){this.m_type!==a.b2_staticBody&&(t*t>0&&this.SetAwake(!0),this.m_angularVelocity=t)}GetAngularVelocity(){return this.m_angularVelocity}ApplyForce(t,e,s=!0){this.m_type===a.b2_dynamicBody&&(s&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=t.x,this.m_force.y+=t.y,this.m_torque+=(e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x))}ApplyForceToCenter(t,e=!0){this.m_type===a.b2_dynamicBody&&(e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=t.x,this.m_force.y+=t.y))}ApplyTorque(t,e=!0){this.m_type===a.b2_dynamicBody&&(e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_torque+=t))}ApplyLinearImpulse(t,e,s=!0){this.m_type===a.b2_dynamicBody&&(s&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y,this.m_angularVelocity+=this.m_invI*((e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x)))}ApplyLinearImpulseToCenter(t,e=!0){this.m_type===a.b2_dynamicBody&&(e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y))}ApplyAngularImpulse(t,e=!0){this.m_type===a.b2_dynamicBody&&(e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*t))}GetMass(){return this.m_mass}GetInertia(){return this.m_I+this.m_mass*t.b2Vec2.Dot(this.m_sweep.localCenter,this.m_sweep.localCenter)}GetMassData(e){return e.mass=this.m_mass,e.I=this.m_I+this.m_mass*t.b2Vec2.Dot(this.m_sweep.localCenter,this.m_sweep.localCenter),e.center.Copy(this.m_sweep.localCenter),e}SetMassData(e){if((0,i.b2Assert)(!this.m_world.IsLocked()),this.m_type!==a.b2_dynamicBody)return;this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=e.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,e.I>0&&!this.m_fixedRotationFlag&&(this.m_I=e.I-this.m_mass*t.b2Vec2.Dot(e.center,e.center),this.m_invI=1/this.m_I);const s=m.SetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(e.center),t.b2Transform.MultiplyVec2(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),t.b2Vec2.AddCrossScalarVec2(this.m_linearVelocity,this.m_angularVelocity,t.b2Vec2.Subtract(this.m_sweep.c,s,t.b2Vec2.s_t0),this.m_linearVelocity)}ResetMassData(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type===a.b2_staticBody||this.m_type===a.b2_kinematicBody)return this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);const e=m.ResetMassData_s_localCenter.SetZero();for(let t=this.m_fixtureList;t;t=t.m_next){if(0===t.m_density)continue;const s=t.GetMassData(m.ResetMassData_s_massData);this.m_mass+=s.mass,e.AddScaled(s.mass,s.center),this.m_I+=s.I}this.m_mass>0&&(this.m_invMass=1/this.m_mass,e.Scale(this.m_invMass)),this.m_I>0&&!this.m_fixedRotationFlag?(this.m_I-=this.m_mass*t.b2Vec2.Dot(e,e),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);const s=m.ResetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(e),t.b2Transform.MultiplyVec2(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),t.b2Vec2.AddCrossScalarVec2(this.m_linearVelocity,this.m_angularVelocity,t.b2Vec2.Subtract(this.m_sweep.c,s,t.b2Vec2.s_t0),this.m_linearVelocity)}GetWorldPoint(e,s){return t.b2Transform.MultiplyVec2(this.m_xf,e,s)}GetWorldVector(e,s){return t.b2Rot.MultiplyVec2(this.m_xf.q,e,s)}GetLocalPoint(e,s){return t.b2Transform.TransposeMultiplyVec2(this.m_xf,e,s)}GetLocalVector(e,s){return t.b2Rot.TransposeMultiplyVec2(this.m_xf.q,e,s)}GetLinearVelocityFromWorldPoint(e,s){return t.b2Vec2.AddCrossScalarVec2(this.m_linearVelocity,this.m_angularVelocity,t.b2Vec2.Subtract(e,this.m_sweep.c,t.b2Vec2.s_t0),s)}GetLinearVelocityFromLocalPoint(t,e){return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(t,e),e)}GetLinearDamping(){return this.m_linearDamping}SetLinearDamping(t){this.m_linearDamping=t}GetAngularDamping(){return this.m_angularDamping}SetAngularDamping(t){this.m_angularDamping=t}GetGravityScale(){return this.m_gravityScale}SetGravityScale(t){this.m_gravityScale=t}SetType(t){if((0,i.b2Assert)(!this.m_world.IsLocked()),this.m_type===t)return;this.m_type=t,this.ResetMassData(),this.m_type===a.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_awakeFlag=!1,this.SynchronizeFixtures()),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;let e=this.m_contactList;for(;e;){const t=e;e=e.next,this.m_world.m_contactManager.Destroy(t.contact)}this.m_contactList=null;const s=this.m_world.m_contactManager.m_broadPhase;for(let i=this.m_fixtureList;i;i=i.m_next)for(const t of i.m_proxies)s.TouchProxy(t.treeNode)}GetType(){return this.m_type}SetBullet(t){this.m_bulletFlag=t}IsBullet(){return this.m_bulletFlag}SetSleepingAllowed(t){this.m_autoSleepFlag=t,t||this.SetAwake(!0)}IsSleepingAllowed(){return this.m_autoSleepFlag}SetAwake(t){this.m_type!==a.b2_staticBody&&(t?(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0))}IsAwake(){return this.m_awakeFlag}SetEnabled(t){if((0,i.b2Assert)(!this.m_world.IsLocked()),t===this.IsEnabled())return;this.m_enabledFlag=t;const e=this.m_world.m_contactManager.m_broadPhase;if(t){for(let t=this.m_fixtureList;t;t=t.m_next)t.CreateProxies(e,this.m_xf);this.m_world.m_newContacts=!0}else{for(let s=this.m_fixtureList;s;s=s.m_next)s.DestroyProxies(e);let t=this.m_contactList;for(;t;){const e=t;t=t.next,this.m_world.m_contactManager.Destroy(e.contact)}this.m_contactList=null}}IsEnabled(){return this.m_enabledFlag}SetFixedRotation(t){this.m_fixedRotationFlag!==t&&(this.m_fixedRotationFlag=t,this.m_angularVelocity=0,this.ResetMassData())}IsFixedRotation(){return this.m_fixedRotationFlag}GetFixtureList(){return this.m_fixtureList}GetJointList(){return this.m_jointList}GetContactList(){return this.m_contactList}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(t){this.m_userData=t}GetWorld(){return this.m_world}SynchronizeFixtures(){const e=this.m_world.m_contactManager.m_broadPhase;if(this.m_awakeFlag){const s=m.SynchronizeFixtures_s_xf1;s.q.Set(this.m_sweep.a0),t.b2Rot.MultiplyVec2(s.q,this.m_sweep.localCenter,s.p),t.b2Vec2.Subtract(this.m_sweep.c0,s.p,s.p);for(let t=this.m_fixtureList;t;t=t.m_next)t.Synchronize(e,s,this.m_xf)}else for(let t=this.m_fixtureList;t;t=t.m_next)t.Synchronize(e,this.m_xf,this.m_xf)}SynchronizeTransform(){this.m_xf.q.Set(this.m_sweep.a),t.b2Rot.MultiplyVec2(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),t.b2Vec2.Subtract(this.m_sweep.c,this.m_xf.p,this.m_xf.p)}ShouldCollide(t){return(this.m_type===a.b2_dynamicBody||t.m_type===a.b2_dynamicBody)&&this.ShouldCollideConnected(t)}ShouldCollideConnected(t){for(let e=this.m_jointList;e;e=e.next)if(e.other===t&&!e.joint.m_collideConnected)return!1;return!0}Advance(e){this.m_sweep.Advance(e),this.m_sweep.c.Copy(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_xf.q.Set(this.m_sweep.a),t.b2Rot.MultiplyVec2(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),t.b2Vec2.Subtract(this.m_sweep.c,this.m_xf.p,this.m_xf.p)}}exports.b2Body=m,m.SetMassData_s_oldCenter=new t.b2Vec2,m.ResetMassData_s_localCenter=new t.b2Vec2,m.ResetMassData_s_oldCenter=new t.b2Vec2,m.ResetMassData_s_massData=new e.b2MassData,m.SynchronizeFixtures_s_xf1=new t.b2Transform;
},{"../common/b2_math":"cQbL","../collision/b2_shape":"stUN","./b2_fixture":"IcdW","../common/b2_common":"ReKW"}],"mgAn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DrawCenterOfMasses=exports.DrawAABBs=exports.DrawPairs=exports.DrawJoints=exports.DrawShapes=exports.GetShapeColor=void 0;const e=require("./b2_math"),t=require("./b2_draw"),o=require("../dynamics/b2_body"),r=require("./b2_common"),s={cA:new e.b2Vec2,cB:new e.b2Vec2,vs:(0,r.b2MakeArray)(4,e.b2Vec2),xf:new e.b2Transform};function n(e){return e.GetType()===o.b2BodyType.b2_dynamicBody&&0===e.m_mass?t.debugColors.badBody:e.IsEnabled()?e.GetType()===o.b2BodyType.b2_staticBody?t.debugColors.staticBody:e.GetType()===o.b2BodyType.b2_kinematicBody?t.debugColors.kinematicBody:e.IsAwake()?t.debugColors.body:t.debugColors.sleepingBody:t.debugColors.disabledBody}function a(e,t){for(let o=0;o<e.m_proxyCount;o++)if(t.TestOverlap(e.GetAABB(o)))return!0;return!1}function d(e,t,o){for(let r=t.GetBodyList();r;r=r.m_next){const t=r.m_xf;e.PushTransform(t);for(let s=r.GetFixtureList();s;s=s.m_next)o&&!a(s,o)||s.GetShape().Draw(e,n(r));e.PopTransform(t)}}function i(e,t){for(let o=t.GetJointList();o;o=o.m_next)o.Draw(e)}function p(e,o){for(let r=o.GetContactList();r;r=r.m_next){const o=r.GetFixtureA(),n=r.GetFixtureB(),a=r.GetChildIndexA(),d=r.GetChildIndexB(),i=o.GetAABB(a).GetCenter(s.cA),p=n.GetAABB(d).GetCenter(s.cB);e.DrawSegment(i,p,t.debugColors.pair)}}function u(e,o,r){const{vs:n}=s;for(let s=o.GetBodyList();s;s=s.m_next)if(s.IsEnabled())for(let o=s.GetFixtureList();o;o=o.m_next)for(let s=0;s<o.m_proxyCount;++s){const{aabb:a}=o.m_proxies[s].treeNode;r&&!r.TestOverlap(a)||(n[0].Set(a.lowerBound.x,a.lowerBound.y),n[1].Set(a.upperBound.x,a.lowerBound.y),n[2].Set(a.upperBound.x,a.upperBound.y),n[3].Set(a.lowerBound.x,a.upperBound.y),e.DrawPolygon(n,4,t.debugColors.aabb))}}function x(e,t){const{xf:o}=s;for(let r=t.GetBodyList();r;r=r.m_next)o.q.Copy(r.m_xf.q),o.p.Copy(r.GetWorldCenter()),e.DrawTransform(o)}exports.GetShapeColor=n,exports.DrawShapes=d,exports.DrawJoints=i,exports.DrawPairs=p,exports.DrawAABBs=u,exports.DrawCenterOfMasses=x;
},{"./b2_math":"cQbL","./b2_draw":"lvls","../dynamics/b2_body":"rONj","./b2_common":"ReKW"}],"ixAk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2Timer=void 0;class e{constructor(){this.m_start=performance.now()}Reset(){return this.m_start=performance.now(),this}GetMilliseconds(){return performance.now()-this.m_start}}exports.b2Timer=e;
},{}],"KzIc":[function(require,module,exports) {
"use strict";function e(e,t){for(const n of Object.keys(t)){const o=t[n],r=e[n],s=function(...e){return o.call(this,r.bind(this),...e)};Object.defineProperty(s,"name",{value:n}),e[n]=s}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2_augment=void 0,exports.b2_augment=e;
},{}],"sfrf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2DynamicTree=exports.b2TreeNode=void 0;const e=require("../common/b2_common"),t=require("../common/b2_math"),i=require("./b2_collision"),a={stack:[],t:new t.b2Vec2,r:new t.b2Vec2,v:new t.b2Vec2,abs_v:new t.b2Vec2,segmentAABB:new i.b2AABB,subInput:new i.b2RayCastInput,combinedAABB:new i.b2AABB,aabb:new i.b2AABB,fatAABB:new i.b2AABB,hugeAABB:new i.b2AABB,c:new t.b2Vec2,h:new t.b2Vec2};let h=0;class r{constructor(){this.aabb=new i.b2AABB,this.userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=0,this.moved=!1,this.id=h++}Reset(){this.child1=null,this.child2=null,this.height=-1,this.userData=null}IsLeaf(){return null===this.child1}GetArea(){if(this.IsLeaf())return 0;let e=this.aabb.GetPerimeter();return this.child1&&(e+=this.child1.GetArea()),this.child2&&(e+=this.child2.GetArea()),e}ComputeHeight(){if(this.IsLeaf())return 0;(0,e.b2Assert)(null!==this.child1&&null!==this.child2);const t=(0,e.b2Verify)(this.child1).ComputeHeight(),i=(0,e.b2Verify)(this.child2).ComputeHeight();return 1+Math.max(t,i)}GetMaxBalance(){if(this.height<=1)return 0;const t=(0,e.b2Verify)(this.child1),i=(0,e.b2Verify)(this.child2);return Math.max(t.GetMaxBalance(),i.GetMaxBalance(),Math.abs(i.height-t.height))}ShiftOrigin(t){this.height<=1||((0,e.b2Verify)(this.child1).ShiftOrigin(t),(0,e.b2Verify)(this.child2).ShiftOrigin(t),this.aabb.lowerBound.Subtract(t),this.aabb.upperBound.Subtract(t))}}exports.b2TreeNode=r;class n{constructor(){this.m_root=null,this.m_freeList=null}Query(e,t){const i=a.stack;i.length=0;let h=this.m_root;for(;h;){if(h.aabb.TestOverlap(e))if(h.IsLeaf()){if(!t(h))return}else i.push(h.child1),i.push(h.child2);h=i.pop()}}QueryPoint(e,t){const i=a.stack;i.length=0;let h=this.m_root;for(;h;){if(h.aabb.TestContain(e))if(h.IsLeaf()){if(!t(h))return}else i.push(h.child1),i.push(h.child2);h=i.pop()}}RayCast(e,i){const{p1:h,p2:r}=e,n=t.b2Vec2.Subtract(r,h,a.r);n.Normalize();const b=t.b2Vec2.CrossOneVec2(n,a.v),o=b.GetAbs(a.abs_v);let{maxFraction:l}=e;const{segmentAABB:s,subInput:c,c:u,h:d,t:p}=a;t.b2Vec2.AddScaled(h,l,t.b2Vec2.Subtract(r,h,p),p),t.b2Vec2.Min(h,p,s.lowerBound),t.b2Vec2.Max(h,p,s.upperBound);const m=a.stack;m.length=0;let f=this.m_root;for(;f;){if(!f.aabb.TestOverlap(s)){f=m.pop();continue}if(f.aabb.GetCenter(u),f.aabb.GetExtents(d),Math.abs(t.b2Vec2.Dot(b,t.b2Vec2.Subtract(h,u,t.b2Vec2.s_t0)))-t.b2Vec2.Dot(o,d)>0)f=m.pop();else{if(f.IsLeaf()){c.p1.Copy(e.p1),c.p2.Copy(e.p2),c.maxFraction=l;const a=i(c,f);if(0===a)return;a>0&&(l=a,t.b2Vec2.AddScaled(h,l,t.b2Vec2.Subtract(r,h,p),p),t.b2Vec2.Min(h,p,s.lowerBound),t.b2Vec2.Max(h,p,s.upperBound))}else m.push(f.child1),m.push(f.child2);f=m.pop()}}}AllocateNode(){if(null===this.m_freeList)return new r;const e=this.m_freeList;return this.m_freeList=e.parent,e.parent=null,e.child1=null,e.child2=null,e.height=0,e.moved=!1,e}FreeNode(e){e.parent=this.m_freeList,e.Reset(),this.m_freeList=e}CreateProxy(t,i){const a=this.AllocateNode(),h=e.b2_aabbExtension;return a.aabb.lowerBound.Set(t.lowerBound.x-h,t.lowerBound.y-h),a.aabb.upperBound.Set(t.upperBound.x+h,t.upperBound.y+h),a.userData=i,a.height=0,a.moved=!0,this.InsertLeaf(a),a}DestroyProxy(e){this.RemoveLeaf(e),this.FreeNode(e)}MoveProxy(t,i,h){const{fatAABB:r,hugeAABB:n}=a,b=e.b2_aabbExtension;r.lowerBound.Set(i.lowerBound.x-b,i.lowerBound.y-b),r.upperBound.Set(i.upperBound.x+b,i.upperBound.y+b);const o=e.b2_aabbMultiplier*h.x,l=e.b2_aabbMultiplier*h.y;o<0?r.lowerBound.x+=o:r.upperBound.x+=o,l<0?r.lowerBound.y+=l:r.upperBound.y+=l;const s=t.aabb;if(s.Contains(i)){const t=4*e.b2_aabbExtension;if(n.lowerBound.Set(r.lowerBound.x-t,i.lowerBound.y-t),n.upperBound.Set(r.upperBound.x+t,i.upperBound.y+t),n.Contains(s))return!1}return this.RemoveLeaf(t),t.aabb.Copy(r),this.InsertLeaf(t),t.moved=!0,!0}InsertLeaf(t){if(null===this.m_root)return this.m_root=t,void(this.m_root.parent=null);const{combinedAABB:i,aabb:h}=a,r=t.aabb;let n=this.m_root;for(;!n.IsLeaf();){const t=(0,e.b2Verify)(n.child1),a=(0,e.b2Verify)(n.child2),b=n.aabb.GetPerimeter();i.Combine2(n.aabb,r);const o=i.GetPerimeter(),l=2*o,s=2*(o-b);let c,u,d,p;if(t.IsLeaf()?(h.Combine2(r,t.aabb),c=h.GetPerimeter()+s):(h.Combine2(r,t.aabb),u=t.aabb.GetPerimeter(),c=(d=h.GetPerimeter())-u+s),a.IsLeaf()?(h.Combine2(r,a.aabb),p=h.GetPerimeter()+s):(h.Combine2(r,a.aabb),u=a.aabb.GetPerimeter(),p=(d=h.GetPerimeter())-u+s),l<c&&l<p)break;n=c<p?t:a}const b=n.parent,o=this.AllocateNode();o.parent=b,o.userData=null,o.aabb.Combine2(r,n.aabb),o.height=n.height+1,null!==b?(b.child1===n?b.child1=o:b.child2=o,o.child1=n,o.child2=t,n.parent=o,t.parent=o):(o.child1=n,o.child2=t,n.parent=o,t.parent=o,this.m_root=o);let l=t.parent;for(;null!==l;){l=this.Balance(l);const t=(0,e.b2Verify)(l.child1),i=(0,e.b2Verify)(l.child2);l.height=1+Math.max(t.height,i.height),l.aabb.Combine2(t.aabb,i.aabb),l=l.parent}}RemoveLeaf(t){if(t===this.m_root)return void(this.m_root=null);const i=(0,e.b2Verify)(t.parent),a=i.parent,h=(0,e.b2Verify)(i.child1===t?i.child2:i.child1);if(null!==a){a.child1===i?a.child1=h:a.child2=h,h.parent=a,this.FreeNode(i);let t=a;for(;null!==t;){t=this.Balance(t);const i=(0,e.b2Verify)(t.child1),a=(0,e.b2Verify)(t.child2);t.aabb.Combine2(i.aabb,a.aabb),t.height=1+Math.max(i.height,a.height),t=t.parent}}else this.m_root=h,h.parent=null,this.FreeNode(i)}Balance(t){if(t.IsLeaf()||t.height<2)return t;const i=(0,e.b2Verify)(t.child1),a=(0,e.b2Verify)(t.child2),h=a.height-i.height;if(h>1){const h=(0,e.b2Verify)(a.child1),r=(0,e.b2Verify)(a.child2);return a.child1=t,a.parent=t.parent,t.parent=a,null!==a.parent?a.parent.child1===t?a.parent.child1=a:a.parent.child2=a:this.m_root=a,h.height>r.height?(a.child2=h,t.child2=r,r.parent=t,t.aabb.Combine2(i.aabb,r.aabb),a.aabb.Combine2(t.aabb,h.aabb),t.height=1+Math.max(i.height,r.height),a.height=1+Math.max(t.height,h.height)):(a.child2=r,t.child2=h,h.parent=t,t.aabb.Combine2(i.aabb,h.aabb),a.aabb.Combine2(t.aabb,r.aabb),t.height=1+Math.max(i.height,h.height),a.height=1+Math.max(t.height,r.height)),a}if(h<-1){const h=(0,e.b2Verify)(i.child1),r=(0,e.b2Verify)(i.child2);return i.child1=t,i.parent=t.parent,t.parent=i,null!==i.parent?i.parent.child1===t?i.parent.child1=i:i.parent.child2=i:this.m_root=i,h.height>r.height?(i.child2=h,t.child1=r,r.parent=t,t.aabb.Combine2(a.aabb,r.aabb),i.aabb.Combine2(t.aabb,h.aabb),t.height=1+Math.max(a.height,r.height),i.height=1+Math.max(t.height,h.height)):(i.child2=r,t.child1=h,h.parent=t,t.aabb.Combine2(a.aabb,h.aabb),i.aabb.Combine2(t.aabb,r.aabb),t.height=1+Math.max(a.height,h.height),i.height=1+Math.max(t.height,r.height)),i}return t}GetHeight(){return null===this.m_root?0:this.m_root.height}GetAreaRatio(){if(null===this.m_root)return 0;const e=this.m_root,t=e.aabb.GetPerimeter();return e.GetArea()/t}GetMaxBalance(){return null===this.m_root?0:this.m_root.GetMaxBalance()}ShiftOrigin(e){var t;null===(t=this.m_root)||void 0===t||t.ShiftOrigin(e)}}exports.b2DynamicTree=n;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","./b2_collision":"PKgf"}],"q2ad":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2BroadPhase=void 0;const e=require("../common/b2_common"),t=require("./b2_dynamic_tree");class r{constructor(){this.m_tree=new t.b2DynamicTree,this.m_proxyCount=0,this.m_moveCount=0,this.m_moveBuffer=[],this.m_pairCount=0,this.m_pairBuffer=[],this.m_queryProxy=new t.b2TreeNode,this.QueryCallback=(e=>e.id===this.m_queryProxy.id||(!!(e.moved&&e.id>this.m_queryProxy.id)||(this.m_pairBuffer[this.m_pairCount]=e.id<this.m_queryProxy.id?[e,this.m_queryProxy]:[this.m_queryProxy,e],++this.m_pairCount,!0)))}CreateProxy(e,t){const r=this.m_tree.CreateProxy(e,t);return++this.m_proxyCount,this.BufferMove(r),r}DestroyProxy(e){this.UnBufferMove(e),--this.m_proxyCount,this.m_tree.DestroyProxy(e)}MoveProxy(e,t,r){this.m_tree.MoveProxy(e,t,r)&&this.BufferMove(e)}TouchProxy(e){this.BufferMove(e)}GetProxyCount(){return this.m_proxyCount}UpdatePairs(t){this.m_pairCount=0;for(let e=0;e<this.m_moveCount;++e){const t=this.m_moveBuffer[e];if(null===t)continue;this.m_queryProxy=t;const r=t.aabb;this.m_tree.Query(r,this.QueryCallback)}for(let r=0;r<this.m_pairCount;++r){const o=this.m_pairBuffer[r];t((0,e.b2Verify)(o[0].userData),(0,e.b2Verify)(o[1].userData))}for(let e=0;e<this.m_moveCount;++e){const t=this.m_moveBuffer[e];t&&(t.moved=!1)}this.m_moveCount=0}Query(e,t){this.m_tree.Query(e,t)}QueryPoint(e,t){this.m_tree.QueryPoint(e,t)}RayCast(e,t){this.m_tree.RayCast(e,t)}GetTreeHeight(){return this.m_tree.GetHeight()}GetTreeBalance(){return this.m_tree.GetMaxBalance()}GetTreeQuality(){return this.m_tree.GetAreaRatio()}ShiftOrigin(e){this.m_tree.ShiftOrigin(e)}BufferMove(e){this.m_moveBuffer[this.m_moveCount]=e,++this.m_moveCount}UnBufferMove(e){const t=this.m_moveBuffer.indexOf(e);this.m_moveBuffer[t]=null}}exports.b2BroadPhase=r;
},{"../common/b2_common":"ReKW","./b2_dynamic_tree":"sfrf"}],"skt6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2TimeOfImpact=exports.b2TOIOutput=exports.b2TOIOutputState=exports.b2TOIInput=exports.b2Toi=void 0;const t=require("../common/b2_common"),e=require("../common/b2_settings"),s=require("../common/b2_math"),o=require("../common/b2_timer"),i=require("./b2_distance");exports.b2Toi={time:0,maxTime:0,calls:0,iters:0,maxIters:0,rootIters:0,maxRootIters:0,reset(){this.time=0,this.maxTime=0,this.calls=0,this.iters=0,this.maxIters=0,this.rootIters=0,this.maxRootIters=0}};const r=new s.b2Transform,a=new s.b2Transform,c=new s.b2Vec2,n=new s.b2Vec2,p=new s.b2Vec2,m=new s.b2Vec2,b=new s.b2Vec2;class _{constructor(){this.proxyA=new i.b2DistanceProxy,this.proxyB=new i.b2DistanceProxy,this.sweepA=new s.b2Sweep,this.sweepB=new s.b2Sweep,this.tMax=0}}var l,x;exports.b2TOIInput=_,function(t){t[t.e_unknown=0]="e_unknown",t[t.e_failed=1]="e_failed",t[t.e_overlapped=2]="e_overlapped",t[t.e_touching=3]="e_touching",t[t.e_separated=4]="e_separated"}(l=exports.b2TOIOutputState||(exports.b2TOIOutputState={}));class u{constructor(){this.state=l.e_unknown,this.t=0}}exports.b2TOIOutput=u,function(t){t[t.e_points=0]="e_points",t[t.e_faceA=1]="e_faceA",t[t.e_faceB=2]="e_faceB"}(x||(x={}));class V{constructor(){this.m_sweepA=new s.b2Sweep,this.m_sweepB=new s.b2Sweep,this.m_type=x.e_points,this.m_localPoint=new s.b2Vec2,this.m_axis=new s.b2Vec2}Initialize(t,e,o,i,m,b){this.m_proxyA=e,this.m_proxyB=i;const{count:_}=t;this.m_sweepA.Copy(o),this.m_sweepB.Copy(m);const l=this.m_sweepA.GetTransform(r,b),u=this.m_sweepB.GetTransform(a,b);if(1===_){this.m_type=x.e_points;const e=this.m_proxyA.GetVertex(t.indexA[0]),o=this.m_proxyB.GetVertex(t.indexB[0]),i=s.b2Transform.MultiplyVec2(l,e,c),r=s.b2Transform.MultiplyVec2(u,o,n);return s.b2Vec2.Subtract(r,i,this.m_axis),this.m_axis.Normalize()}if(t.indexA[0]===t.indexA[1]){this.m_type=x.e_faceB;const e=this.m_proxyB.GetVertex(t.indexB[0]),o=this.m_proxyB.GetVertex(t.indexB[1]);s.b2Vec2.CrossVec2One(s.b2Vec2.Subtract(o,e,s.b2Vec2.s_t0),this.m_axis).Normalize();const i=s.b2Rot.MultiplyVec2(u.q,this.m_axis,p);s.b2Vec2.Mid(e,o,this.m_localPoint);const r=s.b2Transform.MultiplyVec2(u,this.m_localPoint,n),a=this.m_proxyA.GetVertex(t.indexA[0]),m=s.b2Transform.MultiplyVec2(l,a,c);let b=s.b2Vec2.Dot(s.b2Vec2.Subtract(m,r,s.b2Vec2.s_t0),i);return b<0&&(this.m_axis.Negate(),b=-b),b}this.m_type=x.e_faceA;const V=this.m_proxyA.GetVertex(t.indexA[0]),h=this.m_proxyA.GetVertex(t.indexA[1]);s.b2Vec2.CrossVec2One(s.b2Vec2.Subtract(h,V,s.b2Vec2.s_t0),this.m_axis).Normalize();const y=s.b2Rot.MultiplyVec2(l.q,this.m_axis,p);s.b2Vec2.Mid(V,h,this.m_localPoint);const f=s.b2Transform.MultiplyVec2(l,this.m_localPoint,c),T=this.m_proxyB.GetVertex(t.indexB[0]),w=s.b2Transform.MultiplyVec2(u,T,n);let M=s.b2Vec2.Dot(s.b2Vec2.Subtract(w,f,s.b2Vec2.s_t0),y);return M<0&&(this.m_axis.Negate(),M=-M),M}FindMinSeparation(t,e,o){const i=this.m_sweepA.GetTransform(r,o),_=this.m_sweepB.GetTransform(a,o);switch(this.m_type){case x.e_points:{const o=s.b2Rot.TransposeMultiplyVec2(i.q,this.m_axis,m),r=s.b2Rot.TransposeMultiplyVec2(_.q,s.b2Vec2.Negate(this.m_axis,s.b2Vec2.s_t0),b);t[0]=this.m_proxyA.GetSupport(o),e[0]=this.m_proxyB.GetSupport(r);const a=this.m_proxyA.GetVertex(t[0]),p=this.m_proxyB.GetVertex(e[0]),l=s.b2Transform.MultiplyVec2(i,a,c),x=s.b2Transform.MultiplyVec2(_,p,n);return s.b2Vec2.Dot(s.b2Vec2.Subtract(x,l,s.b2Vec2.s_t0),this.m_axis)}case x.e_faceA:{const o=s.b2Rot.MultiplyVec2(i.q,this.m_axis,p),r=s.b2Transform.MultiplyVec2(i,this.m_localPoint,c),a=s.b2Rot.TransposeMultiplyVec2(_.q,s.b2Vec2.Negate(o,s.b2Vec2.s_t0),b);t[0]=-1,e[0]=this.m_proxyB.GetSupport(a);const m=this.m_proxyB.GetVertex(e[0]),l=s.b2Transform.MultiplyVec2(_,m,n);return s.b2Vec2.Dot(s.b2Vec2.Subtract(l,r,s.b2Vec2.s_t0),o)}case x.e_faceB:{const o=s.b2Rot.MultiplyVec2(_.q,this.m_axis,p),r=s.b2Transform.MultiplyVec2(_,this.m_localPoint,n),a=s.b2Rot.TransposeMultiplyVec2(i.q,s.b2Vec2.Negate(o,s.b2Vec2.s_t0),m);e[0]=-1,t[0]=this.m_proxyA.GetSupport(a);const b=this.m_proxyA.GetVertex(t[0]),l=s.b2Transform.MultiplyVec2(i,b,c);return s.b2Vec2.Dot(s.b2Vec2.Subtract(l,r,s.b2Vec2.s_t0),o)}default:return t[0]=-1,e[0]=-1,0}}Evaluate(e,o,i){const m=this.m_sweepA.GetTransform(r,i),b=this.m_sweepB.GetTransform(a,i);switch(this.m_type){case x.e_points:{const t=this.m_proxyA.GetVertex(e),i=this.m_proxyB.GetVertex(o),r=s.b2Transform.MultiplyVec2(m,t,c),a=s.b2Transform.MultiplyVec2(b,i,n);return s.b2Vec2.Dot(s.b2Vec2.Subtract(a,r,s.b2Vec2.s_t0),this.m_axis)}case x.e_faceA:{const t=s.b2Rot.MultiplyVec2(m.q,this.m_axis,p),e=s.b2Transform.MultiplyVec2(m,this.m_localPoint,c),i=this.m_proxyB.GetVertex(o),r=s.b2Transform.MultiplyVec2(b,i,n);return s.b2Vec2.Dot(s.b2Vec2.Subtract(r,e,s.b2Vec2.s_t0),t)}case x.e_faceB:{const t=s.b2Rot.MultiplyVec2(b.q,this.m_axis,p),o=s.b2Transform.MultiplyVec2(b,this.m_localPoint,n),i=this.m_proxyA.GetVertex(e),r=s.b2Transform.MultiplyVec2(m,i,c);return s.b2Vec2.Dot(s.b2Vec2.Subtract(r,o,s.b2Vec2.s_t0),t)}default:return(0,t.b2Assert)(!1),0}}}const h=new o.b2Timer,y=new i.b2SimplexCache,f=new i.b2DistanceInput,T=new i.b2DistanceOutput,w=new V,M=[0],d=[0],A=new s.b2Sweep,B=new s.b2Sweep;function S(s,o){const c=h.Reset();++exports.b2Toi.calls,s.state=l.e_unknown,s.t=o.tMax;const{proxyA:n,proxyB:p,tMax:m}=o,b=Math.max(e.b2_maxPolygonVertices,n.m_count,p.m_count),_=A.Copy(o.sweepA),x=B.Copy(o.sweepB);_.Normalize(),x.Normalize();const u=n.m_radius+p.m_radius,V=Math.max(t.b2_linearSlop,u-3*t.b2_linearSlop),S=.25*t.b2_linearSlop;let G=0;let I=0;const O=y;O.count=0;const R=f;for(R.proxyA.Copy(o.proxyA),R.proxyB.Copy(o.proxyB),R.useRadii=!1;;){const t=_.GetTransform(r,G),e=x.GetTransform(a,G);R.transformA.Copy(t),R.transformB.Copy(e);const o=T;if((0,i.b2Distance)(o,O,R),o.distance<=0){s.state=l.e_overlapped,s.t=0;break}if(o.distance<V+S){s.state=l.e_touching,s.t=G;break}const c=w;c.Initialize(O,n,_,p,x,G);let u=!1,h=m,y=0;for(;;){const t=M,e=d;let o=c.FindMinSeparation(t,e,h);if(o>V+S){s.state=l.e_separated,s.t=m,u=!0;break}if(o>V-S){G=h;break}let i=c.Evaluate(t[0],e[0],G);if(i<V-S){s.state=l.e_failed,s.t=G,u=!0;break}if(i<=V+S){s.state=l.e_touching,s.t=G,u=!0;break}let r=0,a=G,n=h;for(;;){let s;s=1&r?a+(V-i)*(n-a)/(o-i):.5*(a+n),++r,++exports.b2Toi.rootIters;const p=c.Evaluate(t[0],e[0],s);if(Math.abs(p-V)<S){h=s;break}if(p>V?(a=s,i=p):(n=s,o=p),50===r)break}if(exports.b2Toi.maxRootIters=Math.max(exports.b2Toi.maxRootIters,r),++y===b)break}if(++I,++exports.b2Toi.iters,u)break;if(20===I){s.state=l.e_failed,s.t=G;break}}exports.b2Toi.maxIters=Math.max(exports.b2Toi.maxIters,I);const k=c.GetMilliseconds();exports.b2Toi.maxTime=Math.max(exports.b2Toi.maxTime,k),exports.b2Toi.time+=k}exports.b2TimeOfImpact=S;
},{"../common/b2_common":"ReKW","../common/b2_settings":"I6oK","../common/b2_math":"cQbL","../common/b2_timer":"ixAk","./b2_distance":"hp9S"}],"DoJb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2CollidePolygonAndCircle=exports.b2CollideCircles=void 0;const o=require("../common/b2_common"),e=require("../common/b2_math"),t=require("./b2_collision"),c=new e.b2Vec2,n=new e.b2Vec2;function i(o,i,l,r,a){o.pointCount=0;const p=e.b2Transform.MultiplyVec2(l,i.m_p,c),b=e.b2Transform.MultiplyVec2(a,r.m_p,n),s=e.b2Vec2.DistanceSquared(p,b),u=i.m_radius+r.m_radius;s>u*u||(o.type=t.b2ManifoldType.e_circles,o.localPoint.Copy(i.m_p),o.localNormal.SetZero(),o.pointCount=1,o.points[0].localPoint.Copy(r.m_p),o.points[0].id.key=0)}exports.b2CollideCircles=i;const l=new e.b2Vec2,r=new e.b2Vec2,a=new e.b2Vec2;function p(c,n,i,p,b){c.pointCount=0;const s=e.b2Transform.MultiplyVec2(b,p.m_p,l),u=e.b2Transform.TransposeMultiplyVec2(i,s,r);let m=0,_=-o.b2_maxFloat;const y=n.m_radius+p.m_radius,V=n.m_count,d=n.m_vertices,C=n.m_normals;for(let o=0;o<V;++o){const t=e.b2Vec2.Dot(C[o],e.b2Vec2.Subtract(u,d[o],e.b2Vec2.s_t0));if(t>y)return;t>_&&(_=t,m=o)}const f=m,P=f+1<V?f+1:0,M=d[f],S=d[P];if(_<o.b2_epsilon)return c.pointCount=1,c.type=t.b2ManifoldType.e_faceA,c.localNormal.Copy(C[m]),e.b2Vec2.Mid(M,S,c.localPoint),c.points[0].localPoint.Copy(p.m_p),void(c.points[0].id.key=0);const T=e.b2Vec2.Dot(e.b2Vec2.Subtract(u,M,e.b2Vec2.s_t0),e.b2Vec2.Subtract(S,M,e.b2Vec2.s_t1)),D=e.b2Vec2.Dot(e.b2Vec2.Subtract(u,S,e.b2Vec2.s_t0),e.b2Vec2.Subtract(M,S,e.b2Vec2.s_t1));if(T<=0){if(e.b2Vec2.DistanceSquared(u,M)>y*y)return;c.pointCount=1,c.type=t.b2ManifoldType.e_faceA,e.b2Vec2.Subtract(u,M,c.localNormal).Normalize(),c.localPoint.Copy(M),c.points[0].localPoint.Copy(p.m_p),c.points[0].id.key=0}else if(D<=0){if(e.b2Vec2.DistanceSquared(u,S)>y*y)return;c.pointCount=1,c.type=t.b2ManifoldType.e_faceA,e.b2Vec2.Subtract(u,S,c.localNormal).Normalize(),c.localPoint.Copy(S),c.points[0].localPoint.Copy(p.m_p),c.points[0].id.key=0}else{const o=e.b2Vec2.Mid(M,S,a);if(e.b2Vec2.Dot(e.b2Vec2.Subtract(u,o,e.b2Vec2.s_t1),C[f])>y)return;c.pointCount=1,c.type=t.b2ManifoldType.e_faceA,c.localNormal.Copy(C[f]),c.localPoint.Copy(o),c.points[0].localPoint.Copy(p.m_p),c.points[0].id.key=0}}exports.b2CollidePolygonAndCircle=p;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","./b2_collision":"PKgf"}],"nWAU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2CollidePolygons=void 0;const e=require("../common/b2_common"),t=require("../common/b2_math"),o=require("./b2_collision"),n=new t.b2Transform,c=new t.b2Vec2,r=new t.b2Vec2;function i(o,i,l,b,s){const a=i.m_count,p=b.m_count,V=i.m_normals,m=i.m_vertices,u=b.m_vertices,y=t.b2Transform.TransposeMultiply(s,l,n);let f=0,_=-e.b2_maxFloat;for(let n=0;n<a;++n){const o=t.b2Rot.MultiplyVec2(y.q,V[n],c),i=t.b2Transform.MultiplyVec2(y,m[n],r);let l=e.b2_maxFloat;for(let e=0;e<p;++e){const n=t.b2Vec2.Dot(o,t.b2Vec2.Subtract(u[e],i,t.b2Vec2.s_t0));n<l&&(l=n)}l>_&&(_=l,f=n)}return o[0]=f,_}const l=new t.b2Vec2;function b(n,c,r,i,b,s){const a=c.m_normals,p=b.m_count,V=b.m_vertices,m=b.m_normals,u=t.b2Rot.TransposeMultiplyVec2(s.q,t.b2Rot.MultiplyVec2(r.q,a[i],t.b2Vec2.s_t0),l);let y=0,f=e.b2_maxFloat;for(let e=0;e<p;++e){const o=t.b2Vec2.Dot(u,m[e]);o<f&&(f=o,y=e)}const _=y,d=_+1<p?_+1:0,x=n[0];t.b2Transform.MultiplyVec2(s,V[_],x.v);const C=x.id.cf;C.indexA=i,C.indexB=_,C.typeA=o.b2ContactFeatureType.e_face,C.typeB=o.b2ContactFeatureType.e_vertex;const T=n[1];t.b2Transform.MultiplyVec2(s,V[d],T.v);const w=T.id.cf;w.indexA=i,w.indexB=d,w.typeA=o.b2ContactFeatureType.e_face,w.typeB=o.b2ContactFeatureType.e_vertex}const s=[new o.b2ClipVertex,new o.b2ClipVertex],a=[new o.b2ClipVertex,new o.b2ClipVertex],p=[new o.b2ClipVertex,new o.b2ClipVertex],V=[0],m=[0],u=new t.b2Vec2,y=new t.b2Vec2,f=new t.b2Vec2,_=new t.b2Vec2,d=new t.b2Vec2,x=new t.b2Vec2,C=new t.b2Vec2,T=new t.b2Vec2;function w(n,c,r,l,w){n.pointCount=0;const M=c.m_radius+l.m_radius,v=V,A=i(v,c,r,l,w);if(A>M)return;const B=m,q=i(B,l,w,c,r);if(q>M)return;let F,D,P,g,S,R;q>A+.1*e.b2_linearSlop?(F=l,D=c,P=w,g=r,S=B[0],n.type=o.b2ManifoldType.e_faceB,R=1):(F=c,D=l,P=r,g=w,S=v[0],n.type=o.b2ManifoldType.e_faceA,R=0);const N=s;b(N,F,P,S,D,g);const O=F.m_count,L=F.m_vertices,h=S,j=S+1<O?S+1:0;let z=L[h],k=L[j];const E=t.b2Vec2.Subtract(k,z,u);E.Normalize();const G=t.b2Vec2.CrossVec2One(E,y),H=t.b2Vec2.Mid(z,k,f),I=t.b2Rot.MultiplyVec2(P.q,E,d),J=t.b2Vec2.CrossVec2One(I,_);z=t.b2Transform.MultiplyVec2(P,z,C),k=t.b2Transform.MultiplyVec2(P,k,T);const K=t.b2Vec2.Dot(J,z),Q=-t.b2Vec2.Dot(I,z)+M,U=t.b2Vec2.Dot(I,k)+M,W=a,X=p,Y=t.b2Vec2.Negate(I,x);let Z=(0,o.b2ClipSegmentToLine)(W,N,Y,Q,h);if(Z<2)return;if((Z=(0,o.b2ClipSegmentToLine)(X,W,I,U,j))<2)return;n.localNormal.Copy(G),n.localPoint.Copy(H);let $=0;for(let o=0;o<e.b2_maxManifoldPoints;++o){const e=X[o];if(t.b2Vec2.Dot(J,e.v)-K<=M){const o=n.points[$];if(t.b2Transform.TransposeMultiplyVec2(g,e.v,o.localPoint),o.id.Copy(e.id),R){const{cf:e}=o.id;e.indexA=e.indexB,e.indexB=e.indexA,e.typeA=e.typeB,e.typeB=e.typeA}++$}}n.pointCount=$}exports.b2CollidePolygons=w;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","./b2_collision":"PKgf"}],"bTYS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2CollideEdgeAndPolygon=exports.b2CollideEdgeAndCircle=void 0;const e=require("../common/b2_common"),t=require("../common/b2_math"),o=require("./b2_collision"),n=require("../common/b2_settings"),c=new t.b2Vec2,i=new t.b2Vec2,r=new t.b2Vec2,a=new t.b2Vec2,s=new t.b2Vec2,b=new t.b2Vec2,l=new t.b2Vec2,p=new o.b2ContactID;function d(e,n,d,f,m){e.pointCount=0;const y=t.b2Transform.TransposeMultiplyVec2(d,t.b2Transform.MultiplyVec2(m,f.m_p,t.b2Vec2.s_t0),c),V=n.m_vertex1,u=n.m_vertex2,_=t.b2Vec2.Subtract(u,V,i),x=l.Set(_.y,-_.x),C=t.b2Vec2.Dot(x,t.b2Vec2.Subtract(y,V,t.b2Vec2.s_t0));if(n.m_oneSided&&C<0)return;const v=t.b2Vec2.Dot(_,t.b2Vec2.Subtract(u,y,t.b2Vec2.s_t0)),w=t.b2Vec2.Dot(_,t.b2Vec2.Subtract(y,V,t.b2Vec2.s_t0)),S=n.m_radius+f.m_radius,A=p;if(A.cf.indexB=0,A.cf.typeB=o.b2ContactFeatureType.e_vertex,w<=0){const c=V,i=t.b2Vec2.Subtract(y,c,r);if(t.b2Vec2.Dot(i,i)>S*S)return;if(n.m_oneSided){const e=n.m_vertex0,o=V,c=t.b2Vec2.Subtract(o,e,a);if(t.b2Vec2.Dot(c,t.b2Vec2.Subtract(o,y,t.b2Vec2.s_t0))>0)return}return A.cf.indexA=0,A.cf.typeA=o.b2ContactFeatureType.e_vertex,e.pointCount=1,e.type=o.b2ManifoldType.e_circles,e.localNormal.SetZero(),e.localPoint.Copy(c),e.points[0].id.Copy(A),void e.points[0].localPoint.Copy(f.m_p)}if(v<=0){const c=u,i=t.b2Vec2.Subtract(y,c,r);if(t.b2Vec2.Dot(i,i)>S*S)return;if(n.m_oneSided){const e=n.m_vertex3,o=u,c=t.b2Vec2.Subtract(e,o,s);if(t.b2Vec2.Dot(c,t.b2Vec2.Subtract(y,o,t.b2Vec2.s_t0))>0)return}return A.cf.indexA=1,A.cf.typeA=o.b2ContactFeatureType.e_vertex,e.pointCount=1,e.type=o.b2ManifoldType.e_circles,e.localNormal.SetZero(),e.localPoint.Copy(c),e.points[0].id.Copy(A),void e.points[0].localPoint.Copy(f.m_p)}const T=t.b2Vec2.Dot(_,_),g=b;g.x=1/T*(v*V.x+w*u.x),g.y=1/T*(v*V.y+w*u.y);const N=t.b2Vec2.Subtract(y,g,r);t.b2Vec2.Dot(N,N)>S*S||(C<0&&x.Set(-x.x,-x.y),x.Normalize(),A.cf.indexA=0,A.cf.typeA=o.b2ContactFeatureType.e_face,e.pointCount=1,e.type=o.b2ManifoldType.e_faceA,e.localNormal.Copy(x),e.localPoint.Copy(V),e.points[0].id.Copy(A),e.points[0].localPoint.Copy(f.m_p))}var f;exports.b2CollideEdgeAndCircle=d,function(e){e[e.e_unknown=0]="e_unknown",e[e.e_edgeA=1]="e_edgeA",e[e.e_edgeB=2]="e_edgeB"}(f||(f={}));class m{constructor(){this.normal=new t.b2Vec2,this.type=f.e_unknown,this.index=0,this.separation=0}}class y{constructor(){this.vertices=(0,e.b2MakeArray)(n.b2_maxPolygonVertices,t.b2Vec2),this.normals=(0,e.b2MakeArray)(n.b2_maxPolygonVertices,t.b2Vec2),this.count=0}}class V{constructor(){this.i1=0,this.i2=0,this.v1=new t.b2Vec2,this.v2=new t.b2Vec2,this.normal=new t.b2Vec2,this.sideNormal1=new t.b2Vec2,this.sideOffset1=0,this.sideNormal2=new t.b2Vec2,this.sideOffset2=0}}const u=new m,_=[new t.b2Vec2,new t.b2Vec2];function x(o,n,c){const i=u;i.type=f.e_edgeA,i.index=-1,i.separation=-e.b2_maxFloat,i.normal.SetZero();const r=_;r[0].Copy(c),t.b2Vec2.Negate(c,r[1]);for(let a=0;a<2;++a){let c=e.b2_maxFloat;for(let e=0;e<o.count;++e){const i=t.b2Vec2.Dot(r[a],t.b2Vec2.Subtract(o.vertices[e],n,t.b2Vec2.s_t0));i<c&&(c=i)}c>i.separation&&(i.index=a,i.separation=c,i.normal.Copy(r[a]))}return i}const C=new m,v=new t.b2Vec2;function w(o,n,c){const i=C;i.type=f.e_unknown,i.index=-1,i.separation=-e.b2_maxFloat,i.normal.SetZero();for(let e=0;e<o.count;++e){const r=t.b2Vec2.Negate(o.normals[e],v),a=t.b2Vec2.Dot(r,t.b2Vec2.Subtract(o.vertices[e],n,t.b2Vec2.s_t0)),s=t.b2Vec2.Dot(r,t.b2Vec2.Subtract(o.vertices[e],c,t.b2Vec2.s_t0)),b=Math.min(a,s);b>i.separation&&(i.type=f.e_edgeB,i.index=e,i.separation=b,i.normal.Copy(r))}return i}const S=new t.b2Transform,A=new t.b2Vec2,T=new t.b2Vec2,g=new t.b2Vec2,N=new t.b2Vec2,D=new t.b2Vec2,M=new t.b2Vec2,h=new t.b2Vec2,B=new y,P=new V,F=[new o.b2ClipVertex,new o.b2ClipVertex],O=[new o.b2ClipVertex,new o.b2ClipVertex],k=[new o.b2ClipVertex,new o.b2ClipVertex];function q(n,c,i,r,a){n.pointCount=0;const s=t.b2Transform.TransposeMultiply(i,a,S),b=t.b2Transform.MultiplyVec2(s,r.m_centroid,A),l=c.m_vertex1,p=c.m_vertex2,d=t.b2Vec2.Subtract(p,l,T);d.Normalize();const m=g.Set(d.y,-d.x),y=t.b2Vec2.Dot(m,t.b2Vec2.Subtract(b,l,t.b2Vec2.s_t0)),V=c.m_oneSided;if(V&&y<0)return;const u=B;u.count=r.m_count;for(let e=0;e<r.m_count;++e)t.b2Transform.MultiplyVec2(s,r.m_vertices[e],u.vertices[e]),t.b2Rot.MultiplyVec2(s.q,r.m_normals[e],u.normals[e]);const _=r.m_radius+c.m_radius,C=x(u,l,m);if(C.separation>_)return;const v=w(u,l,p);if(v.separation>_)return;let q;if(q=v.separation-_>.98*(C.separation-_)+.001?v:C,V){const e=t.b2Vec2.Subtract(l,c.m_vertex0,N);e.Normalize();const o=D.Set(e.y,-e.x),n=t.b2Vec2.Cross(e,d)>=0,i=t.b2Vec2.Subtract(c.m_vertex3,p,M);i.Normalize();const r=h.Set(i.y,-i.x),a=t.b2Vec2.Cross(d,i)>=0,s=.1;if(t.b2Vec2.Dot(q.normal,d)<=0)if(n){if(t.b2Vec2.Cross(q.normal,o)>s)return}else q=C;else if(a){if(t.b2Vec2.Cross(r,q.normal)>s)return}else q=C}const z=F,E=P;if(q.type===f.e_edgeA){n.type=o.b2ManifoldType.e_faceA;let e=0,c=t.b2Vec2.Dot(q.normal,u.normals[0]);for(let o=1;o<u.count;++o){const n=t.b2Vec2.Dot(q.normal,u.normals[o]);n<c&&(c=n,e=o)}const i=e,r=i+1<u.count?i+1:0;z[0].v.Copy(u.vertices[i]),z[0].id.cf.indexA=0,z[0].id.cf.indexB=i,z[0].id.cf.typeA=o.b2ContactFeatureType.e_face,z[0].id.cf.typeB=o.b2ContactFeatureType.e_vertex,z[1].v.Copy(u.vertices[r]),z[1].id.cf.indexA=0,z[1].id.cf.indexB=r,z[1].id.cf.typeA=o.b2ContactFeatureType.e_face,z[1].id.cf.typeB=o.b2ContactFeatureType.e_vertex,E.i1=0,E.i2=1,E.v1.Copy(l),E.v2.Copy(p),E.normal.Copy(q.normal),t.b2Vec2.Negate(d,E.sideNormal1),E.sideNormal2.Copy(d)}else n.type=o.b2ManifoldType.e_faceB,z[0].v.Copy(p),z[0].id.cf.indexA=1,z[0].id.cf.indexB=q.index,z[0].id.cf.typeA=o.b2ContactFeatureType.e_vertex,z[0].id.cf.typeB=o.b2ContactFeatureType.e_face,z[1].v.Copy(l),z[1].id.cf.indexA=0,z[1].id.cf.indexB=q.index,z[1].id.cf.typeA=o.b2ContactFeatureType.e_vertex,z[1].id.cf.typeB=o.b2ContactFeatureType.e_face,E.i1=q.index,E.i2=E.i1+1<u.count?E.i1+1:0,E.v1.Copy(u.vertices[E.i1]),E.v2.Copy(u.vertices[E.i2]),E.normal.Copy(u.normals[E.i1]),E.sideNormal1.Set(E.normal.y,-E.normal.x),t.b2Vec2.Negate(E.sideNormal1,E.sideNormal2);E.sideOffset1=t.b2Vec2.Dot(E.sideNormal1,E.v1),E.sideOffset2=t.b2Vec2.Dot(E.sideNormal2,E.v2);const Z=O,L=k;let j;if((j=(0,o.b2ClipSegmentToLine)(Z,z,E.sideNormal1,E.sideOffset1,E.i1))<e.b2_maxManifoldPoints)return;if((j=(0,o.b2ClipSegmentToLine)(L,Z,E.sideNormal2,E.sideOffset2,E.i2))<e.b2_maxManifoldPoints)return;q.type===f.e_edgeA?(n.localNormal.Copy(E.normal),n.localPoint.Copy(E.v1)):(n.localNormal.Copy(r.m_normals[E.i1]),n.localPoint.Copy(r.m_vertices[E.i1]));let I=0;for(let o=0;o<e.b2_maxManifoldPoints;++o){if(t.b2Vec2.Dot(E.normal,t.b2Vec2.Subtract(L[o].v,E.v1,t.b2Vec2.s_t0))<=_){const e=n.points[I];q.type===f.e_edgeA?(t.b2Transform.TransposeMultiplyVec2(s,L[o].v,e.localPoint),e.id.Copy(L[o].id)):(e.localPoint.Copy(L[o].v),e.id.cf.typeA=L[o].id.cf.typeB,e.id.cf.typeB=L[o].id.cf.typeA,e.id.cf.indexA=L[o].id.cf.indexB,e.id.cf.indexB=L[o].id.cf.indexA),++I}}n.pointCount=I}exports.b2CollideEdgeAndPolygon=q;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","./b2_collision":"PKgf","../common/b2_settings":"I6oK"}],"HIjv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2CircleShape=void 0;const t=require("../common/b2_common"),e=require("../common/b2_math"),s=require("./b2_shape");class r extends s.b2Shape{constructor(t=0){super(s.b2ShapeType.e_circle,t),this.m_p=new e.b2Vec2}Set(t,e=this.m_radius){return this.m_p.Copy(t),this.m_radius=e,this}Clone(){return(new r).Copy(this)}Copy(t){return super.Copy(t),this.m_p.Copy(t.m_p),this}GetChildCount(){return 1}TestPoint(t,s){const i=e.b2Transform.MultiplyVec2(t,this.m_p,r.TestPoint_s_center),o=e.b2Vec2.Subtract(s,i,r.TestPoint_s_d);return e.b2Vec2.Dot(o,o)<=this.m_radius**2}RayCast(s,i,o,_){const a=e.b2Transform.MultiplyVec2(o,this.m_p,r.RayCast_s_position),c=e.b2Vec2.Subtract(i.p1,a,r.RayCast_s_s),n=e.b2Vec2.Dot(c,c)-this.m_radius**2,p=e.b2Vec2.Subtract(i.p2,i.p1,r.RayCast_s_r),m=e.b2Vec2.Dot(c,p),u=e.b2Vec2.Dot(p,p),h=m*m-u*n;if(h<0||u<t.b2_epsilon)return!1;let b=-(m+Math.sqrt(h));return b>=0&&b<=i.maxFraction*u&&(b/=u,s.fraction=b,e.b2Vec2.AddScaled(c,b,p,s.normal).Normalize(),!0)}ComputeAABB(t,s,i){const o=e.b2Transform.MultiplyVec2(s,this.m_p,r.ComputeAABB_s_p);t.lowerBound.Set(o.x-this.m_radius,o.y-this.m_radius),t.upperBound.Set(o.x+this.m_radius,o.y+this.m_radius)}ComputeMass(t,s){const r=this.m_radius**2;t.mass=s*Math.PI*r,t.center.Copy(this.m_p),t.I=t.mass*(.5*r+e.b2Vec2.Dot(this.m_p,this.m_p))}SetupDistanceProxy(t,e){t.m_vertices=t.m_buffer,t.m_vertices[0].Copy(this.m_p),t.m_count=1,t.m_radius=this.m_radius}Draw(t,s){const r=this.m_p,i=this.m_radius,o=e.b2Vec2.UNITX;t.DrawSolidCircle(r,i,o,s)}}exports.b2CircleShape=r,r.TestPoint_s_center=new e.b2Vec2,r.TestPoint_s_d=new e.b2Vec2,r.RayCast_s_position=new e.b2Vec2,r.RayCast_s_s=new e.b2Vec2,r.RayCast_s_r=new e.b2Vec2,r.ComputeAABB_s_p=new e.b2Vec2;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","./b2_shape":"stUN"}],"tvYY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2PolygonShape=void 0;const t=require("../common/b2_common"),e=require("../common/b2_math"),s=require("../common/b2_settings"),r=require("./b2_shape"),c={ComputeCentroid:{s:new e.b2Vec2,p1:new e.b2Vec2,p2:new e.b2Vec2,p3:new e.b2Vec2,e1:new e.b2Vec2,e2:new e.b2Vec2},TestPoint:{pLocal:new e.b2Vec2},ComputeAABB:{v:new e.b2Vec2},ComputeMass:{center:new e.b2Vec2,s:new e.b2Vec2,e1:new e.b2Vec2,e2:new e.b2Vec2},Validate:{e:new e.b2Vec2,v:new e.b2Vec2},Set:{r:new e.b2Vec2,v:new e.b2Vec2},RayCast:{p1:new e.b2Vec2,p2:new e.b2Vec2,d:new e.b2Vec2},SetAsBox:{xf:new e.b2Transform}},o=(.5*t.b2_linearSlop)**2;function n(t,s,r){const o=r;o.SetZero();let n=0;const{s:i,p1:m,p2:a,p3:b,e1:u,e2:_}=c.ComputeCentroid;i.Copy(t[0]);for(let c=0;c<s;++c){e.b2Vec2.Subtract(t[0],i,m),e.b2Vec2.Subtract(t[c],i,a),e.b2Vec2.Subtract(t[c+1<s?c+1:0],i,b),e.b2Vec2.Subtract(a,m,u),e.b2Vec2.Subtract(b,m,_);const r=.5*e.b2Vec2.Cross(u,_);n+=r,o.x+=r*(1/3)*(m.x+a.x+b.x),o.y+=r*(1/3)*(m.y+a.y+b.y)}const h=1/n;return o.x=h*o.x+i.x,o.y=h*o.y+i.y,o}class i extends r.b2Shape{constructor(){super(r.b2ShapeType.e_polygon,t.b2_polygonRadius),this.m_centroid=new e.b2Vec2,this.m_vertices=[],this.m_normals=[],this.m_count=0}Clone(){return(new i).Copy(this)}Copy(s){super.Copy(s),this.m_centroid.Copy(s.m_centroid),this.m_count=s.m_count,this.m_vertices=(0,t.b2MakeArray)(this.m_count,e.b2Vec2),this.m_normals=(0,t.b2MakeArray)(this.m_count,e.b2Vec2);for(let t=0;t<this.m_count;++t)this.m_vertices[t].Copy(s.m_vertices[t]),this.m_normals[t].Copy(s.m_normals[t]);return this}GetChildCount(){return 1}Set(r,i=r.length){if(i<3)return this.SetAsBox(1,1);let m=Math.min(i,s.b2_maxPolygonVertices);const a=[];for(let t=0;t<m;++t){const s=r[t];a.every(t=>e.b2Vec2.DistanceSquared(s,t)>=o)&&a.push(s)}if((m=a.length)<3)return this.SetAsBox(1,1);let b=0,u=a[0].x;for(let t=1;t<m;++t){const{x:e}=a[t];(e>u||e===u&&a[t].y<a[b].y)&&(b=t,u=e)}const _=[];let h=0,l=b;for(;;){_[h]=l;let t=0;for(let s=1;s<m;++s){if(t===l){t=s;continue}const r=e.b2Vec2.Subtract(a[t],a[_[h]],c.Set.r),o=e.b2Vec2.Subtract(a[s],a[_[h]],c.Set.v),n=e.b2Vec2.Cross(r,o);n<0&&(t=s),0===n&&o.LengthSquared()>r.LengthSquared()&&(t=s)}if(++h,l=t,t===b)break}(0,t.b2Assert)(h>=3,"Polygon is degenerate"),this.m_count=h,this.m_vertices=(0,t.b2MakeArray)(this.m_count,e.b2Vec2),this.m_normals=(0,t.b2MakeArray)(this.m_count,e.b2Vec2);for(let t=0;t<h;++t)this.m_vertices[t].Copy(a[_[t]]);for(let t=0;t<h;++t){const s=t,r=t+1<h?t+1:0,c=e.b2Vec2.Subtract(this.m_vertices[r],this.m_vertices[s],e.b2Vec2.s_t0);e.b2Vec2.CrossVec2One(c,this.m_normals[t]).Normalize()}return n(this.m_vertices,h,this.m_centroid),this}SetAsBox(s,r,o,n=0){if(this.m_count=4,this.m_vertices=(0,t.b2MakeArray)(this.m_count,e.b2Vec2),this.m_normals=(0,t.b2MakeArray)(this.m_count,e.b2Vec2),this.m_vertices[0].Set(-s,-r),this.m_vertices[1].Set(s,-r),this.m_vertices[2].Set(s,r),this.m_vertices[3].Set(-s,r),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),o){this.m_centroid.Copy(o);const{xf:t}=c.SetAsBox;t.SetPosition(o),t.SetRotationAngle(n);for(let s=0;s<this.m_count;++s)e.b2Transform.MultiplyVec2(t,this.m_vertices[s],this.m_vertices[s]),e.b2Rot.MultiplyVec2(t.q,this.m_normals[s],this.m_normals[s])}else this.m_centroid.SetZero();return this}TestPoint(t,s){const r=e.b2Transform.TransposeMultiplyVec2(t,s,c.TestPoint.pLocal);for(let c=0;c<this.m_count;++c){if(e.b2Vec2.Dot(this.m_normals[c],e.b2Vec2.Subtract(r,this.m_vertices[c],e.b2Vec2.s_t0))>0)return!1}return!0}RayCast(t,s,r,o){const n=e.b2Transform.TransposeMultiplyVec2(r,s.p1,c.RayCast.p1),i=e.b2Transform.TransposeMultiplyVec2(r,s.p2,c.RayCast.p2),m=e.b2Vec2.Subtract(i,n,c.RayCast.d);let a=0,b=s.maxFraction,u=-1;for(let c=0;c<this.m_count;++c){const t=e.b2Vec2.Dot(this.m_normals[c],e.b2Vec2.Subtract(this.m_vertices[c],n,e.b2Vec2.s_t0)),s=e.b2Vec2.Dot(this.m_normals[c],m);if(0===s){if(t<0)return!1}else s<0&&t<a*s?(a=t/s,u=c):s>0&&t<b*s&&(b=t/s);if(b<a)return!1}return u>=0&&(t.fraction=a,e.b2Rot.MultiplyVec2(r.q,this.m_normals[u],t.normal),!0)}ComputeAABB(t,s,r){const o=e.b2Transform.MultiplyVec2(s,this.m_vertices[0],t.lowerBound),n=t.upperBound.Copy(o);for(let m=1;m<this.m_count;++m){const t=e.b2Transform.MultiplyVec2(s,this.m_vertices[m],c.ComputeAABB.v);e.b2Vec2.Min(o,t,o),e.b2Vec2.Max(n,t,n)}const i=this.m_radius;o.SubtractXY(i,i),n.AddXY(i,i)}ComputeMass(t,s){const r=c.ComputeMass.center.SetZero();let o=0,n=0;const i=c.ComputeMass.s.Copy(this.m_vertices[0]);for(let m=0;m<this.m_count;++m){const t=e.b2Vec2.Subtract(this.m_vertices[m],i,c.ComputeMass.e1),s=e.b2Vec2.Subtract(this.m_vertices[m+1<this.m_count?m+1:0],i,c.ComputeMass.e2),a=e.b2Vec2.Cross(t,s),b=.5*a;o+=b,r.AddScaled(b*(1/3),e.b2Vec2.Add(t,s,e.b2Vec2.s_t0));const u=t.x,_=t.y,h=s.x,l=s.y;n+=1/3*.25*a*(u*u+h*u+h*h+(_*_+l*_+l*l))}t.mass=s*o,r.Scale(1/o),e.b2Vec2.Add(r,i,t.center),t.I=s*n,t.I+=t.mass*(e.b2Vec2.Dot(t.center,t.center)-e.b2Vec2.Dot(r,r))}Validate(){const{e:t,v:s}=c.Validate;for(let r=0;r<this.m_count;++r){const c=r,o=r<this.m_count-1?c+1:0,n=this.m_vertices[c];e.b2Vec2.Subtract(this.m_vertices[o],n,t);for(let r=0;r<this.m_count;++r){if(r===c||r===o)continue;if(e.b2Vec2.Subtract(this.m_vertices[r],n,s),e.b2Vec2.Cross(t,s)<0)return!1}}return!0}SetupDistanceProxy(t,e){t.m_vertices=this.m_vertices,t.m_count=this.m_count,t.m_radius=this.m_radius}Draw(t,e){const s=this.m_count,r=this.m_vertices;t.DrawSolidPolygon(r,s,e)}}exports.b2PolygonShape=i;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","../common/b2_settings":"I6oK","./b2_shape":"stUN"}],"OKJP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2EdgeShape=void 0;const e=require("../common/b2_common"),t=require("../common/b2_math"),s=require("./b2_shape");class r extends s.b2Shape{constructor(){super(s.b2ShapeType.e_edge,e.b2_polygonRadius),this.m_vertex1=new t.b2Vec2,this.m_vertex2=new t.b2Vec2,this.m_vertex0=new t.b2Vec2,this.m_vertex3=new t.b2Vec2,this.m_oneSided=!1}SetOneSided(e,t,s,r){return this.m_vertex0.Copy(e),this.m_vertex1.Copy(t),this.m_vertex2.Copy(s),this.m_vertex3.Copy(r),this.m_oneSided=!0,this}SetTwoSided(e,t){return this.m_vertex1.Copy(e),this.m_vertex2.Copy(t),this.m_oneSided=!1,this}Clone(){return(new r).Copy(this)}Copy(e){return super.Copy(e),this.m_vertex1.Copy(e.m_vertex1),this.m_vertex2.Copy(e.m_vertex2),this.m_vertex0.Copy(e.m_vertex0),this.m_vertex3.Copy(e.m_vertex3),this.m_oneSided=e.m_oneSided,this}GetChildCount(){return 1}TestPoint(e,t){return!1}RayCast(e,s,o,_){const i=t.b2Transform.TransposeMultiplyVec2(o,s.p1,r.RayCast_s_p1),n=t.b2Transform.TransposeMultiplyVec2(o,s.p2,r.RayCast_s_p2),a=t.b2Vec2.Subtract(n,i,r.RayCast_s_d),m=this.m_vertex1,c=this.m_vertex2,p=t.b2Vec2.Subtract(c,m,r.RayCast_s_e),{normal:u}=e;u.Set(p.y,-p.x).Normalize();const b=t.b2Vec2.Dot(u,t.b2Vec2.Subtract(m,i,t.b2Vec2.s_t0));if(this.m_oneSided&&b>0)return!1;const h=t.b2Vec2.Dot(u,a);if(0===h)return!1;const d=b/h;if(d<0||s.maxFraction<d)return!1;const y=t.b2Vec2.AddScaled(i,d,a,r.RayCast_s_q),v=t.b2Vec2.Subtract(c,m,r.RayCast_s_r),C=t.b2Vec2.Dot(v,v);if(0===C)return!1;const x=t.b2Vec2.Dot(t.b2Vec2.Subtract(y,m,t.b2Vec2.s_t0),v)/C;return!(x<0||x>1)&&(e.fraction=d,t.b2Rot.MultiplyVec2(o.q,e.normal,e.normal),b>0&&e.normal.Negate(),!0)}ComputeAABB(e,s,o){const _=t.b2Transform.MultiplyVec2(s,this.m_vertex1,r.ComputeAABB_s_v1),i=t.b2Transform.MultiplyVec2(s,this.m_vertex2,r.ComputeAABB_s_v2);t.b2Vec2.Min(_,i,e.lowerBound),t.b2Vec2.Max(_,i,e.upperBound);const n=this.m_radius;e.lowerBound.SubtractXY(n,n),e.upperBound.AddXY(n,n)}ComputeMass(e,s){e.mass=0,t.b2Vec2.Mid(this.m_vertex1,this.m_vertex2,e.center),e.I=0}SetupDistanceProxy(e,t){e.m_vertices=e.m_buffer,e.m_vertices[0].Copy(this.m_vertex1),e.m_vertices[1].Copy(this.m_vertex2),e.m_count=2,e.m_radius=this.m_radius}Draw(e,t){const s=this.m_vertex1,r=this.m_vertex2;e.DrawSegment(s,r,t),!1===this.m_oneSided&&(e.DrawPoint(s,4,t),e.DrawPoint(r,4,t))}}exports.b2EdgeShape=r,r.RayCast_s_p1=new t.b2Vec2,r.RayCast_s_p2=new t.b2Vec2,r.RayCast_s_d=new t.b2Vec2,r.RayCast_s_e=new t.b2Vec2,r.RayCast_s_q=new t.b2Vec2,r.RayCast_s_r=new t.b2Vec2,r.ComputeAABB_s_v1=new t.b2Vec2,r.ComputeAABB_s_v2=new t.b2Vec2;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","./b2_shape":"stUN"}],"papG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2ChainShape=void 0;const e=require("../common/b2_common"),t=require("../common/b2_math"),s=require("./b2_shape"),r=require("./b2_edge_shape");class i extends s.b2Shape{constructor(){super(s.b2ShapeType.e_chain,e.b2_polygonRadius),this.m_vertices=[],this.m_prevVertex=new t.b2Vec2,this.m_nextVertex=new t.b2Vec2}CreateLoop(e,s=e.length){if(s<3)return this;this.m_vertices.length=s+1;for(let r=0;r<s;++r){const{x:s,y:i}=e[r];this.m_vertices[r]=new t.b2Vec2(s,i)}return this.m_vertices[s]=this.m_vertices[0].Clone(),this.m_prevVertex.Copy(this.m_vertices[this.m_vertices.length-2]),this.m_nextVertex.Copy(this.m_vertices[1]),this}CreateChain(e,s,r,i){this.m_vertices.length=s;for(let _=0;_<s;++_){const{x:s,y:r}=e[_];this.m_vertices[_]=new t.b2Vec2(s,r)}return this.m_prevVertex.Copy(r),this.m_nextVertex.Copy(i),this}Clone(){return(new i).Copy(this)}Copy(e){return super.Copy(e),this.CreateChain(e.m_vertices,e.m_vertices.length,e.m_prevVertex,e.m_nextVertex)}GetChildCount(){return this.m_vertices.length-1}GetChildEdge(e,t){e.m_radius=this.m_radius,e.m_vertex1.Copy(this.m_vertices[t]),e.m_vertex2.Copy(this.m_vertices[t+1]),e.m_oneSided=!0,t>0?e.m_vertex0.Copy(this.m_vertices[t-1]):e.m_vertex0.Copy(this.m_prevVertex),t<this.m_vertices.length-2?e.m_vertex3.Copy(this.m_vertices[t+2]):e.m_vertex3.Copy(this.m_nextVertex)}TestPoint(e,t){return!1}RayCast(e,t,s,r){const _=i.RayCast_s_edgeShape,m=r;let o=r+1;return o===this.m_vertices.length&&(o=0),_.m_vertex1.Copy(this.m_vertices[m]),_.m_vertex2.Copy(this.m_vertices[o]),_.RayCast(e,t,s,0)}ComputeAABB(e,s,r){const _=r;let m=r+1;m===this.m_vertices.length&&(m=0);const o=t.b2Transform.MultiplyVec2(s,this.m_vertices[_],i.ComputeAABB_s_v1),h=t.b2Transform.MultiplyVec2(s,this.m_vertices[m],i.ComputeAABB_s_v2),n=t.b2Vec2.Min(o,h,i.ComputeAABB_s_lower),c=t.b2Vec2.Max(o,h,i.ComputeAABB_s_upper);e.lowerBound.x=n.x-this.m_radius,e.lowerBound.y=n.y-this.m_radius,e.upperBound.x=c.x+this.m_radius,e.upperBound.y=c.y+this.m_radius}ComputeMass(e,t){e.mass=0,e.center.SetZero(),e.I=0}SetupDistanceProxy(e,t){e.m_vertices=e.m_buffer,e.m_vertices[0].Copy(this.m_vertices[t]),t+1<this.m_vertices.length?e.m_vertices[1].Copy(this.m_vertices[t+1]):e.m_vertices[1].Copy(this.m_vertices[0]),e.m_count=2,e.m_radius=this.m_radius}Draw(e,t){const s=this.m_vertices;let r=s[0];for(let i=1;i<s.length;++i){const _=s[i];e.DrawSegment(r,_,t),r=_}}}exports.b2ChainShape=i,i.RayCast_s_edgeShape=new r.b2EdgeShape,i.ComputeAABB_s_v1=new t.b2Vec2,i.ComputeAABB_s_v2=new t.b2Vec2,i.ComputeAABB_s_lower=new t.b2Vec2,i.ComputeAABB_s_upper=new t.b2Vec2;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","./b2_shape":"stUN","./b2_edge_shape":"OKJP"}],"Xq2i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2Joint=exports.b2AngularStiffness=exports.b2LinearStiffness=exports.b2JointDef=exports.b2JointEdge=exports.b2JointType=void 0;const t=require("../common/b2_draw"),e=require("../common/b2_math"),n={pA:new e.b2Vec2,pB:new e.b2Vec2};var o;!function(t){t[t.e_unknownJoint=0]="e_unknownJoint",t[t.e_revoluteJoint=1]="e_revoluteJoint",t[t.e_prismaticJoint=2]="e_prismaticJoint",t[t.e_distanceJoint=3]="e_distanceJoint",t[t.e_pulleyJoint=4]="e_pulleyJoint",t[t.e_mouseJoint=5]="e_mouseJoint",t[t.e_gearJoint=6]="e_gearJoint",t[t.e_wheelJoint=7]="e_wheelJoint",t[t.e_weldJoint=8]="e_weldJoint",t[t.e_frictionJoint=9]="e_frictionJoint",t[t.e_motorJoint=10]="e_motorJoint",t[t.e_areaJoint=11]="e_areaJoint"}(o=exports.b2JointType||(exports.b2JointType={}));class i{constructor(t,e){this.prev=null,this.next=null,this.joint=t,this.other=e}}exports.b2JointEdge=i;class s{constructor(t){this.userData=null,this.collideConnected=!1,this.type=t}}function r(t,e,n,o,i){const s=o.GetMass(),r=i.GetMass();let a;a=s>0&&r>0?s*r/(s+r):s>0?s:r;const l=2*Math.PI*e;t.stiffness=a*l*l,t.damping=2*a*n*l}function a(t,e,n,o,i){const s=o.GetInertia(),r=i.GetInertia();let a;a=s>0&&r>0?s*r/(s+r):s>0?s:r;const l=2*Math.PI*e;t.stiffness=a*l*l,t.damping=2*a*n*l}exports.b2JointDef=s,exports.b2LinearStiffness=r,exports.b2AngularStiffness=a;class l{constructor(t){var e;this.m_type=o.e_unknownJoint,this.m_prev=null,this.m_next=null,this.m_islandFlag=!1,this.m_collideConnected=!1,this.m_userData=null,this.m_type=t.type,this.m_edgeA=new i(this,t.bodyB),this.m_edgeB=new i(this,t.bodyA),this.m_bodyA=t.bodyA,this.m_bodyB=t.bodyB,this.m_collideConnected=null!==(e=t.collideConnected)&&void 0!==e&&e,this.m_userData=t.userData}GetType(){return this.m_type}GetBodyA(){return this.m_bodyA}GetBodyB(){return this.m_bodyB}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(t){this.m_userData=t}IsEnabled(){return this.m_bodyA.IsEnabled()&&this.m_bodyB.IsEnabled()}GetCollideConnected(){return this.m_collideConnected}ShiftOrigin(t){}Draw(e){const o=this.m_bodyA.GetTransform().p,i=this.m_bodyB.GetTransform().p,s=this.GetAnchorA(n.pA),r=this.GetAnchorB(n.pB);e.DrawSegment(o,s,t.debugColors.joint6),e.DrawSegment(s,r,t.debugColors.joint6),e.DrawSegment(i,r,t.debugColors.joint6)}}exports.b2Joint=l;
},{"../common/b2_draw":"lvls","../common/b2_math":"cQbL"}],"xSy1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2DistanceJoint=exports.b2DistanceJointDef=void 0;const t=require("../common/b2_common"),s=require("../common/b2_math"),i=require("./b2_joint"),e=require("../common/b2_draw"),m={worldPointA:new s.b2Vec2,worldPointB:new s.b2Vec2,vpA:new s.b2Vec2,vpB:new s.b2Vec2,vpBA:new s.b2Vec2,P:new s.b2Vec2,qA:new s.b2Rot,qB:new s.b2Rot,lalcA:new s.b2Vec2,lalcB:new s.b2Vec2,Draw:{pA:new s.b2Vec2,pB:new s.b2Vec2,axis:new s.b2Vec2,pRest:new s.b2Vec2,p1:new s.b2Vec2,p2:new s.b2Vec2}};class h extends i.b2JointDef{constructor(){super(i.b2JointType.e_distanceJoint),this.localAnchorA=new s.b2Vec2,this.localAnchorB=new s.b2Vec2,this.length=1,this.minLength=0,this.maxLength=t.b2_maxFloat,this.stiffness=0,this.damping=0}Initialize(i,e,m,h){this.bodyA=i,this.bodyB=e,this.bodyA.GetLocalPoint(m,this.localAnchorA),this.bodyB.GetLocalPoint(h,this.localAnchorB),this.length=Math.max(s.b2Vec2.Distance(m,h),t.b2_linearSlop),this.minLength=this.length,this.maxLength=this.length}}exports.b2DistanceJointDef=h;class n extends i.b2Joint{constructor(i){var e,m;super(i),this.m_bias=0,this.m_localAnchorA=new s.b2Vec2,this.m_localAnchorB=new s.b2Vec2,this.m_gamma=0,this.m_impulse=0,this.m_lowerImpulse=0,this.m_upperImpulse=0,this.m_indexA=0,this.m_indexB=0,this.m_u=new s.b2Vec2,this.m_rA=new s.b2Vec2,this.m_rB=new s.b2Vec2,this.m_localCenterA=new s.b2Vec2,this.m_localCenterB=new s.b2Vec2,this.m_currentLength=0,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_softMass=0,this.m_mass=0,this.m_localAnchorA.Copy(i.localAnchorA),this.m_localAnchorB.Copy(i.localAnchorB),this.m_length=Math.max(i.length,t.b2_linearSlop),this.m_minLength=Math.max(i.minLength,t.b2_linearSlop),this.m_maxLength=Math.max(i.maxLength,this.m_minLength),this.m_stiffness=null!==(e=i.stiffness)&&void 0!==e?e:0,this.m_damping=null!==(m=i.damping)&&void 0!==m?m:0}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,s){const i=t*(this.m_impulse+this.m_lowerImpulse-this.m_upperImpulse);return s.x=i*this.m_u.x,s.y=i*this.m_u.y,s}GetReactionTorque(t){return 0}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetLength(s){return this.m_impulse=0,this.m_length=Math.max(t.b2_linearSlop,s),this.m_length}GetLength(){return this.m_length}SetMinLength(i){return this.m_lowerImpulse=0,this.m_minLength=(0,s.b2Clamp)(i,t.b2_linearSlop,this.m_maxLength),this.m_minLength}GetMinLength(){return this.m_minLength}SetMaxLength(t){return this.m_upperImpulse=0,this.m_maxLength=Math.max(t,this.m_minLength),this.m_maxLength}GetMaxLength(){return this.m_maxLength}GetCurrentLength(){const t=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,m.worldPointA),i=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,m.worldPointB);return s.b2Vec2.Distance(i,t)}SetStiffness(t){this.m_stiffness=t}GetStiffness(){return this.m_stiffness}SetDamping(t){this.m_damping=t}GetDamping(){return this.m_damping}InitVelocityConstraints(i){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=i.positions[this.m_indexA].c,h=i.positions[this.m_indexA].a,n=i.velocities[this.m_indexA].v;let o=i.velocities[this.m_indexA].w;const _=i.positions[this.m_indexB].c,c=i.positions[this.m_indexB].a,a=i.velocities[this.m_indexB].v;let r=i.velocities[this.m_indexB].w;const{qA:l,qB:b,lalcA:A,lalcB:d}=m;l.Set(h),b.Set(c),s.b2Rot.MultiplyVec2(l,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,A),this.m_rA),s.b2Rot.MultiplyVec2(b,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,d),this.m_rB),this.m_u.x=_.x+this.m_rB.x-e.x-this.m_rA.x,this.m_u.y=_.y+this.m_rB.y-e.y-this.m_rA.y,this.m_currentLength=this.m_u.Length(),this.m_currentLength>t.b2_linearSlop?this.m_u.Scale(1/this.m_currentLength):(this.m_u.SetZero(),this.m_mass=0,this.m_impulse=0,this.m_lowerImpulse=0,this.m_upperImpulse=0);const p=s.b2Vec2.Cross(this.m_rA,this.m_u),u=s.b2Vec2.Cross(this.m_rB,this.m_u);let B=this.m_invMassA+this.m_invIA*p*p+this.m_invMassB+this.m_invIB*u*u;if(this.m_mass=0!==B?1/B:0,this.m_stiffness>0&&this.m_minLength<this.m_maxLength){const t=this.m_currentLength-this.m_length,s=this.m_damping,e=this.m_stiffness,m=i.step.dt;this.m_gamma=m*(s+m*e),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=t*m*e*this.m_gamma,B+=this.m_gamma,this.m_softMass=0!==B?1/B:0}else this.m_gamma=0,this.m_bias=0,this.m_softMass=this.m_mass;if(i.step.warmStarting){this.m_impulse*=i.step.dtRatio,this.m_lowerImpulse*=i.step.dtRatio,this.m_upperImpulse*=i.step.dtRatio;const{P:t}=m;s.b2Vec2.Scale(this.m_impulse+this.m_lowerImpulse-this.m_upperImpulse,this.m_u,t),n.SubtractScaled(this.m_invMassA,t),o-=this.m_invIA*s.b2Vec2.Cross(this.m_rA,t),a.AddScaled(this.m_invMassB,t),r+=this.m_invIB*s.b2Vec2.Cross(this.m_rB,t)}else this.m_impulse=0;i.velocities[this.m_indexA].w=o,i.velocities[this.m_indexB].w=r}SolveVelocityConstraints(t){const i=t.velocities[this.m_indexA].v;let e=t.velocities[this.m_indexA].w;const h=t.velocities[this.m_indexB].v;let n=t.velocities[this.m_indexB].w;if(this.m_minLength<this.m_maxLength){if(this.m_stiffness>0){const t=s.b2Vec2.AddCrossScalarVec2(i,e,this.m_rA,m.vpA),o=s.b2Vec2.AddCrossScalarVec2(h,n,this.m_rB,m.vpB),_=s.b2Vec2.Dot(this.m_u,s.b2Vec2.Subtract(o,t,m.vpBA)),c=-this.m_softMass*(_+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=c;const a=s.b2Vec2.Scale(c,this.m_u,m.P);i.SubtractScaled(this.m_invMassA,a),e-=this.m_invIA*s.b2Vec2.Cross(this.m_rA,a),h.AddScaled(this.m_invMassB,a),n+=this.m_invIB*s.b2Vec2.Cross(this.m_rB,a)}{const o=this.m_currentLength-this.m_minLength,_=Math.max(0,o)*t.step.inv_dt,c=s.b2Vec2.AddCrossScalarVec2(i,e,this.m_rA,m.vpA),a=s.b2Vec2.AddCrossScalarVec2(h,n,this.m_rB,m.vpB),r=s.b2Vec2.Dot(this.m_u,s.b2Vec2.Subtract(a,c,m.vpBA));let l=-this.m_mass*(r+_);const b=this.m_lowerImpulse;this.m_lowerImpulse=Math.max(0,this.m_lowerImpulse+l),l=this.m_lowerImpulse-b;const A=s.b2Vec2.Scale(l,this.m_u,m.P);i.SubtractScaled(this.m_invMassA,A),e-=this.m_invIA*s.b2Vec2.Cross(this.m_rA,A),h.AddScaled(this.m_invMassB,A),n+=this.m_invIB*s.b2Vec2.Cross(this.m_rB,A)}{const o=this.m_maxLength-this.m_currentLength,_=Math.max(0,o)*t.step.inv_dt,c=s.b2Vec2.AddCrossScalarVec2(i,e,this.m_rA,m.vpA),a=s.b2Vec2.AddCrossScalarVec2(h,n,this.m_rB,m.vpB),r=s.b2Vec2.Dot(this.m_u,s.b2Vec2.Subtract(c,a,m.vpBA));let l=-this.m_mass*(r+_);const b=this.m_upperImpulse;this.m_upperImpulse=Math.max(0,this.m_upperImpulse+l),l=this.m_upperImpulse-b;const A=s.b2Vec2.Scale(-l,this.m_u,m.P);i.SubtractScaled(this.m_invMassA,A),e-=this.m_invIA*s.b2Vec2.Cross(this.m_rA,A),h.AddScaled(this.m_invMassB,A),n+=this.m_invIB*s.b2Vec2.Cross(this.m_rB,A)}}else{const t=s.b2Vec2.AddCrossScalarVec2(i,e,this.m_rA,m.vpA),o=s.b2Vec2.AddCrossScalarVec2(h,n,this.m_rB,m.vpB),_=s.b2Vec2.Dot(this.m_u,s.b2Vec2.Subtract(o,t,m.vpBA)),c=-this.m_mass*_;this.m_impulse+=c;const a=s.b2Vec2.Scale(c,this.m_u,m.P);i.SubtractScaled(this.m_invMassA,a),e-=this.m_invIA*s.b2Vec2.Cross(this.m_rA,a),h.AddScaled(this.m_invMassB,a),n+=this.m_invIB*s.b2Vec2.Cross(this.m_rB,a)}t.velocities[this.m_indexA].w=e,t.velocities[this.m_indexB].w=n}SolvePositionConstraints(i){const e=i.positions[this.m_indexA].c;let h=i.positions[this.m_indexA].a;const n=i.positions[this.m_indexB].c;let o=i.positions[this.m_indexB].a;const{qA:_,qB:c,lalcA:a,lalcB:r,P:l}=m;_.Set(h),c.Set(o);const b=s.b2Rot.MultiplyVec2(_,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,a),this.m_rA),A=s.b2Rot.MultiplyVec2(c,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,r),this.m_rB);this.m_u.x=n.x+A.x-e.x-b.x,this.m_u.y=n.y+A.y-e.y-b.y;const d=this.m_u.Normalize();let p;if(this.m_minLength===this.m_maxLength)p=d-this.m_minLength;else if(d<this.m_minLength)p=d-this.m_minLength;else{if(!(this.m_maxLength<d))return!0;p=d-this.m_maxLength}const u=-this.m_mass*p;return s.b2Vec2.Scale(u,this.m_u,l),e.SubtractScaled(this.m_invMassA,l),h-=this.m_invIA*s.b2Vec2.Cross(b,l),n.AddScaled(this.m_invMassB,l),o+=this.m_invIB*s.b2Vec2.Cross(A,l),i.positions[this.m_indexA].a=h,i.positions[this.m_indexB].a=o,Math.abs(p)<t.b2_linearSlop}Draw(i){const{pA:h,pB:n,axis:o,pRest:_}=m.Draw,c=this.m_bodyA.GetTransform(),a=this.m_bodyB.GetTransform();if(s.b2Transform.MultiplyVec2(c,this.m_localAnchorA,h),s.b2Transform.MultiplyVec2(a,this.m_localAnchorB,n),s.b2Vec2.Subtract(n,h,o),o.Normalize(),i.DrawSegment(h,n,e.debugColors.joint5),s.b2Vec2.AddScaled(h,this.m_length,o,_),i.DrawPoint(_,8,e.debugColors.joint1),this.m_minLength!==this.m_maxLength){if(this.m_minLength>t.b2_linearSlop){const t=s.b2Vec2.AddScaled(h,this.m_minLength,o,m.Draw.p1);i.DrawPoint(t,4,e.debugColors.joint2)}if(this.m_maxLength<t.b2_maxFloat){const t=s.b2Vec2.AddScaled(h,this.m_maxLength,o,m.Draw.p1);i.DrawPoint(t,4,e.debugColors.joint3)}}}}exports.b2DistanceJoint=n;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","./b2_joint":"Xq2i","../common/b2_draw":"lvls"}],"SxzW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2AreaJoint=exports.b2AreaJointDef=void 0;const t=require("../common/b2_common"),s=require("../common/b2_math"),e=require("./b2_joint"),i=require("./b2_distance_joint");class n extends e.b2JointDef{constructor(){super(e.b2JointType.e_areaJoint),this.bodies=[],this.stiffness=0,this.damping=0}AddBody(t){this.bodies.push(t),1===this.bodies.length?this.bodyA=t:2===this.bodies.length&&(this.bodyB=t)}}exports.b2AreaJointDef=n;class o extends e.b2Joint{constructor(e){var n,o;super(e),this.m_stiffness=0,this.m_damping=0,this.m_impulse=0,this.m_targetArea=0,this.m_joints=[],this.m_delta=new s.b2Vec2,this.m_bodies=e.bodies,this.m_stiffness=null!==(n=e.stiffness)&&void 0!==n?n:0,this.m_damping=null!==(o=e.damping)&&void 0!==o?o:0,this.m_targetLengths=(0,t.b2MakeNumberArray)(e.bodies.length),this.m_normals=(0,t.b2MakeArray)(e.bodies.length,s.b2Vec2),this.m_deltas=(0,t.b2MakeArray)(e.bodies.length,s.b2Vec2);const m=new i.b2DistanceJointDef;m.stiffness=this.m_stiffness,m.damping=this.m_damping,this.m_targetArea=0;for(let t=0;t<this.m_bodies.length;++t){const e=this.m_bodies[t],i=this.m_bodies[(t+1)%this.m_bodies.length],n=e.GetWorldCenter(),o=i.GetWorldCenter();this.m_targetLengths[t]=s.b2Vec2.Distance(n,o),this.m_targetArea+=s.b2Vec2.Cross(n,o),m.Initialize(e,i,n,o),this.m_joints[t]=e.GetWorld().CreateJoint(m)}this.m_targetArea*=.5}GetAnchorA(t){return t}GetAnchorB(t){return t}GetReactionForce(t,s){return s}GetReactionTorque(t){return 0}SetStiffness(t){this.m_stiffness=t;for(const s of this.m_joints)s.SetStiffness(t)}GetStiffness(){return this.m_stiffness}SetDamping(t){this.m_damping=t;for(const s of this.m_joints)s.SetDamping(t)}GetDamping(){return this.m_damping}InitVelocityConstraints(t){for(let e=0;e<this.m_bodies.length;++e){const i=this.m_bodies[(e+this.m_bodies.length-1)%this.m_bodies.length],n=this.m_bodies[(e+1)%this.m_bodies.length],o=t.positions[i.m_islandIndex].c,m=t.positions[n.m_islandIndex].c,r=this.m_deltas[e];s.b2Vec2.Subtract(m,o,r)}if(t.step.warmStarting){this.m_impulse*=t.step.dtRatio;for(let s=0;s<this.m_bodies.length;++s){const e=this.m_bodies[s],i=t.velocities[e.m_islandIndex].v,n=this.m_deltas[s];i.x+=e.m_invMass*n.y*.5*this.m_impulse,i.y+=e.m_invMass*-n.x*.5*this.m_impulse}}else this.m_impulse=0}SolveVelocityConstraints(t){let e=0,i=0;for(let o=0;o<this.m_bodies.length;++o){const n=this.m_bodies[o],m=t.velocities[n.m_islandIndex].v,r=this.m_deltas[o];e+=r.LengthSquared()/n.GetMass(),i+=s.b2Vec2.Cross(m,r)}const n=-2*i/e;this.m_impulse+=n;for(let s=0;s<this.m_bodies.length;++s){const e=this.m_bodies[s],i=t.velocities[e.m_islandIndex].v,o=this.m_deltas[s];i.x+=e.m_invMass*o.y*.5*n,i.y+=e.m_invMass*-o.x*.5*n}}SolvePositionConstraints(e){let i=0,n=0;for(let r=0;r<this.m_bodies.length;++r){const o=this.m_bodies[r],m=this.m_bodies[(r+1)%this.m_bodies.length],h=e.positions[o.m_islandIndex].c,a=e.positions[m.m_islandIndex].c,_=s.b2Vec2.Subtract(a,h,this.m_delta);let d=_.Length();d<t.b2_epsilon&&(d=1),this.m_normals[r].x=_.y/d,this.m_normals[r].y=-_.x/d,i+=d,n+=s.b2Vec2.Cross(h,a)}n*=.5;const o=.5*(this.m_targetArea-n)/i;let m=!0;for(let r=0;r<this.m_bodies.length;++r){const i=this.m_bodies[r],n=e.positions[i.m_islandIndex].c,h=(r+1)%this.m_bodies.length,a=s.b2Vec2.Add(this.m_normals[r],this.m_normals[h],this.m_delta);a.Scale(o);const _=a.LengthSquared();_>t.b2_maxLinearCorrection**2&&a.Scale(t.b2_maxLinearCorrection/Math.sqrt(_)),_>t.b2_linearSlop**2&&(m=!1),n.Add(a)}return m}}exports.b2AreaJoint=o;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","./b2_joint":"Xq2i","./b2_distance_joint":"xSy1"}],"zgG7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2FrictionJoint=exports.b2FrictionJointDef=void 0;const t=require("../common/b2_math"),s=require("./b2_joint"),i={qA:new t.b2Rot,qB:new t.b2Rot,lalcA:new t.b2Vec2,lalcB:new t.b2Vec2,Cdot:new t.b2Vec2,impulse:new t.b2Vec2,oldImpulse:new t.b2Vec2};class e extends s.b2JointDef{constructor(){super(s.b2JointType.e_frictionJoint),this.localAnchorA=new t.b2Vec2,this.localAnchorB=new t.b2Vec2,this.maxForce=0,this.maxTorque=0}Initialize(t,s,i){this.bodyA=t,this.bodyB=s,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB)}}exports.b2FrictionJointDef=e;class n extends s.b2Joint{constructor(s){var i,e;super(s),this.m_localAnchorA=new t.b2Vec2,this.m_localAnchorB=new t.b2Vec2,this.m_linearImpulse=new t.b2Vec2,this.m_angularImpulse=0,this.m_maxForce=0,this.m_maxTorque=0,this.m_indexA=0,this.m_indexB=0,this.m_rA=new t.b2Vec2,this.m_rB=new t.b2Vec2,this.m_localCenterA=new t.b2Vec2,this.m_localCenterB=new t.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_linearMass=new t.b2Mat22,this.m_angularMass=0,this.m_localAnchorA.Copy(s.localAnchorA),this.m_localAnchorB.Copy(s.localAnchorB),this.m_linearImpulse.SetZero(),this.m_maxForce=null!==(i=s.maxForce)&&void 0!==i?i:0,this.m_maxTorque=null!==(e=s.maxTorque)&&void 0!==e?e:0}InitVelocityConstraints(s){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=s.positions[this.m_indexA].a,n=s.velocities[this.m_indexA].v;let o=s.velocities[this.m_indexA].w;const m=s.positions[this.m_indexB].a,l=s.velocities[this.m_indexB].v;let r=s.velocities[this.m_indexB].w;const{qA:a,qB:h,lalcA:c,lalcB:_}=i;a.Set(e),h.Set(m),t.b2Rot.MultiplyVec2(a,t.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,c),this.m_rA),t.b2Rot.MultiplyVec2(h,t.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,_),this.m_rB);const u=this.m_invMassA,A=this.m_invMassB,d=this.m_invIA,b=this.m_invIB,x=this.m_linearMass;if(x.ex.x=u+A+d*this.m_rA.y*this.m_rA.y+b*this.m_rB.y*this.m_rB.y,x.ex.y=-d*this.m_rA.x*this.m_rA.y-b*this.m_rB.x*this.m_rB.y,x.ey.x=x.ex.y,x.ey.y=u+A+d*this.m_rA.x*this.m_rA.x+b*this.m_rB.x*this.m_rB.x,x.Inverse(),this.m_angularMass=d+b,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),s.step.warmStarting){this.m_linearImpulse.Scale(s.step.dtRatio),this.m_angularImpulse*=s.step.dtRatio;const i=this.m_linearImpulse;n.SubtractScaled(u,i),o-=d*(t.b2Vec2.Cross(this.m_rA,i)+this.m_angularImpulse),l.AddScaled(A,i),r+=b*(t.b2Vec2.Cross(this.m_rB,i)+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0;s.velocities[this.m_indexA].w=o,s.velocities[this.m_indexB].w=r}SolveVelocityConstraints(s){const e=s.velocities[this.m_indexA].v;let n=s.velocities[this.m_indexA].w;const o=s.velocities[this.m_indexB].v;let m=s.velocities[this.m_indexB].w;const l=this.m_invMassA,r=this.m_invMassB,a=this.m_invIA,h=this.m_invIB,c=s.step.dt;{const s=m-n;let i=-this.m_angularMass*s;const e=this.m_angularImpulse,o=c*this.m_maxTorque;this.m_angularImpulse=(0,t.b2Clamp)(this.m_angularImpulse+i,-o,o),n-=a*(i=this.m_angularImpulse-e),m+=h*i}{const{Cdot:s,impulse:_,oldImpulse:u}=i;t.b2Vec2.Subtract(t.b2Vec2.AddCrossScalarVec2(o,m,this.m_rB,t.b2Vec2.s_t0),t.b2Vec2.AddCrossScalarVec2(e,n,this.m_rA,t.b2Vec2.s_t1),s),t.b2Mat22.MultiplyVec2(this.m_linearMass,s,_).Negate(),u.Copy(this.m_linearImpulse),this.m_linearImpulse.Add(_);const A=c*this.m_maxForce;this.m_linearImpulse.LengthSquared()>A*A&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.Scale(A)),t.b2Vec2.Subtract(this.m_linearImpulse,u,_),e.SubtractScaled(l,_),n-=a*t.b2Vec2.Cross(this.m_rA,_),o.AddScaled(r,_),m+=h*t.b2Vec2.Cross(this.m_rB,_)}s.velocities[this.m_indexA].w=n,s.velocities[this.m_indexB].w=m}SolvePositionConstraints(t){return!0}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,s){return s.x=t*this.m_linearImpulse.x,s.y=t*this.m_linearImpulse.y,s}GetReactionTorque(t){return t*this.m_angularImpulse}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetMaxForce(t){this.m_maxForce=t}GetMaxForce(){return this.m_maxForce}SetMaxTorque(t){this.m_maxTorque=t}GetMaxTorque(){return this.m_maxTorque}}exports.b2FrictionJoint=n;
},{"../common/b2_math":"cQbL","./b2_joint":"Xq2i"}],"RWFZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2GearJoint=exports.b2GearJointDef=void 0;const t=require("../common/b2_common"),i=require("../common/b2_math"),s=require("./b2_joint"),e={qA:new i.b2Rot,qB:new i.b2Rot,qC:new i.b2Rot,qD:new i.b2Rot,lalcA:new i.b2Vec2,lalcB:new i.b2Vec2,lalcC:new i.b2Vec2,lalcD:new i.b2Vec2,u:new i.b2Vec2,rA:new i.b2Vec2,rB:new i.b2Vec2,rC:new i.b2Vec2,rD:new i.b2Vec2,JvAC:new i.b2Vec2,JvBD:new i.b2Vec2};class m extends s.b2JointDef{constructor(){super(s.b2JointType.e_gearJoint),this.ratio=1}}exports.b2GearJointDef=m;class _ extends s.b2Joint{constructor(t){var e;let m,_;super(t),this.m_typeA=s.b2JointType.e_unknownJoint,this.m_typeB=s.b2JointType.e_unknownJoint,this.m_localAnchorA=new i.b2Vec2,this.m_localAnchorB=new i.b2Vec2,this.m_localAnchorC=new i.b2Vec2,this.m_localAnchorD=new i.b2Vec2,this.m_localAxisC=new i.b2Vec2,this.m_localAxisD=new i.b2Vec2,this.m_referenceAngleA=0,this.m_referenceAngleB=0,this.m_constant=0,this.m_ratio=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_indexC=0,this.m_indexD=0,this.m_lcA=new i.b2Vec2,this.m_lcB=new i.b2Vec2,this.m_lcC=new i.b2Vec2,this.m_lcD=new i.b2Vec2,this.m_mA=0,this.m_mB=0,this.m_mC=0,this.m_mD=0,this.m_iA=0,this.m_iB=0,this.m_iC=0,this.m_iD=0,this.m_JvAC=new i.b2Vec2,this.m_JvBD=new i.b2Vec2,this.m_JwA=0,this.m_JwB=0,this.m_JwC=0,this.m_JwD=0,this.m_mass=0,this.m_joint1=t.joint1,this.m_joint2=t.joint2,this.m_typeA=this.m_joint1.GetType(),this.m_typeB=this.m_joint2.GetType(),this.m_bodyC=this.m_joint1.GetBodyA(),this.m_bodyA=this.m_joint1.GetBodyB();const o=this.m_bodyA.m_xf,h=this.m_bodyA.m_sweep.a,c=this.m_bodyC.m_xf,l=this.m_bodyC.m_sweep.a;if(this.m_typeA===s.b2JointType.e_revoluteJoint){const i=t.joint1;this.m_localAnchorC.Copy(i.m_localAnchorA),this.m_localAnchorA.Copy(i.m_localAnchorB),this.m_referenceAngleA=i.m_referenceAngle,this.m_localAxisC.SetZero(),m=h-l-this.m_referenceAngleA}else{const s=t.joint1;this.m_localAnchorC.Copy(s.m_localAnchorA),this.m_localAnchorA.Copy(s.m_localAnchorB),this.m_referenceAngleA=s.m_referenceAngle,this.m_localAxisC.Copy(s.m_localXAxisA);const e=this.m_localAnchorC,_=i.b2Rot.TransposeMultiplyVec2(c.q,i.b2Rot.MultiplyVec2(o.q,this.m_localAnchorA,i.b2Vec2.s_t0).Add(o.p).Subtract(c.p),i.b2Vec2.s_t0);m=i.b2Vec2.Dot(_.Subtract(e),this.m_localAxisC)}this.m_bodyD=this.m_joint2.GetBodyA(),this.m_bodyB=this.m_joint2.GetBodyB();const n=this.m_bodyB.m_xf,r=this.m_bodyB.m_sweep.a,a=this.m_bodyD.m_xf,A=this.m_bodyD.m_sweep.a;if(this.m_typeB===s.b2JointType.e_revoluteJoint){const i=t.joint2;this.m_localAnchorD.Copy(i.m_localAnchorA),this.m_localAnchorB.Copy(i.m_localAnchorB),this.m_referenceAngleB=i.m_referenceAngle,this.m_localAxisD.SetZero(),_=r-A-this.m_referenceAngleB}else{const s=t.joint2;this.m_localAnchorD.Copy(s.m_localAnchorA),this.m_localAnchorB.Copy(s.m_localAnchorB),this.m_referenceAngleB=s.m_referenceAngle,this.m_localAxisD.Copy(s.m_localXAxisA);const e=this.m_localAnchorD,m=i.b2Rot.TransposeMultiplyVec2(a.q,i.b2Rot.MultiplyVec2(n.q,this.m_localAnchorB,i.b2Vec2.s_t0).Add(n.p).Subtract(a.p),i.b2Vec2.s_t0);_=i.b2Vec2.Dot(m.Subtract(e),this.m_localAxisD)}this.m_ratio=null!==(e=t.ratio)&&void 0!==e?e:1,this.m_constant=m+this.m_ratio*_,this.m_impulse=0}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_indexC=this.m_bodyC.m_islandIndex,this.m_indexD=this.m_bodyD.m_islandIndex,this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter),this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter),this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;const m=t.positions[this.m_indexA].a,_=t.velocities[this.m_indexA].v;let o=t.velocities[this.m_indexA].w;const h=t.positions[this.m_indexB].a,c=t.velocities[this.m_indexB].v;let l=t.velocities[this.m_indexB].w;const n=t.positions[this.m_indexC].a,r=t.velocities[this.m_indexC].v;let a=t.velocities[this.m_indexC].w;const A=t.positions[this.m_indexD].a,b=t.velocities[this.m_indexD].v;let d=t.velocities[this.m_indexD].w;const{qA:p,qB:C,qC:B,qD:y}=e;if(p.Set(m),C.Set(h),B.Set(n),y.Set(A),this.m_mass=0,this.m_typeA===s.b2JointType.e_revoluteJoint)this.m_JvAC.SetZero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{const{u:t,rC:s,rA:m,lalcA:_,lalcC:o}=e;i.b2Rot.MultiplyVec2(B,this.m_localAxisC,t),i.b2Rot.MultiplyVec2(B,i.b2Vec2.Subtract(this.m_localAnchorC,this.m_lcC,o),s),i.b2Rot.MultiplyVec2(p,i.b2Vec2.Subtract(this.m_localAnchorA,this.m_lcA,_),m),this.m_JvAC.Copy(t),this.m_JwC=i.b2Vec2.Cross(s,t),this.m_JwA=i.b2Vec2.Cross(m,t),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_typeB===s.b2JointType.e_revoluteJoint)this.m_JvBD.SetZero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{const{u:t,rB:s,rD:m,lalcB:_,lalcD:o}=e;i.b2Rot.MultiplyVec2(y,this.m_localAxisD,t),i.b2Rot.MultiplyVec2(y,i.b2Vec2.Subtract(this.m_localAnchorD,this.m_lcD,o),m),i.b2Rot.MultiplyVec2(C,i.b2Vec2.Subtract(this.m_localAnchorB,this.m_lcB,_),s),i.b2Vec2.Scale(this.m_ratio,t,this.m_JvBD),this.m_JwD=this.m_ratio*i.b2Vec2.Cross(m,t),this.m_JwB=this.m_ratio*i.b2Vec2.Cross(s,t),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,t.step.warmStarting?(_.AddScaled(this.m_mA*this.m_impulse,this.m_JvAC),o+=this.m_iA*this.m_impulse*this.m_JwA,c.AddScaled(this.m_mB*this.m_impulse,this.m_JvBD),l+=this.m_iB*this.m_impulse*this.m_JwB,r.SubtractScaled(this.m_mC*this.m_impulse,this.m_JvAC),a-=this.m_iC*this.m_impulse*this.m_JwC,b.SubtractScaled(this.m_mD*this.m_impulse,this.m_JvBD),d-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,t.velocities[this.m_indexA].w=o,t.velocities[this.m_indexB].w=l,t.velocities[this.m_indexC].w=a,t.velocities[this.m_indexD].w=d}SolveVelocityConstraints(t){const s=t.velocities[this.m_indexA].v;let e=t.velocities[this.m_indexA].w;const m=t.velocities[this.m_indexB].v;let _=t.velocities[this.m_indexB].w;const o=t.velocities[this.m_indexC].v;let h=t.velocities[this.m_indexC].w;const c=t.velocities[this.m_indexD].v;let l=t.velocities[this.m_indexD].w,n=i.b2Vec2.Dot(this.m_JvAC,i.b2Vec2.Subtract(s,o,i.b2Vec2.s_t0))+i.b2Vec2.Dot(this.m_JvBD,i.b2Vec2.Subtract(m,c,i.b2Vec2.s_t0));n+=this.m_JwA*e-this.m_JwC*h+(this.m_JwB*_-this.m_JwD*l);const r=-this.m_mass*n;this.m_impulse+=r,s.AddScaled(this.m_mA*r,this.m_JvAC),e+=this.m_iA*r*this.m_JwA,m.AddScaled(this.m_mB*r,this.m_JvBD),_+=this.m_iB*r*this.m_JwB,o.SubtractScaled(this.m_mC*r,this.m_JvAC),h-=this.m_iC*r*this.m_JwC,c.SubtractScaled(this.m_mD*r,this.m_JvBD),l-=this.m_iD*r*this.m_JwD,t.velocities[this.m_indexA].w=e,t.velocities[this.m_indexB].w=_,t.velocities[this.m_indexC].w=h,t.velocities[this.m_indexD].w=l}SolvePositionConstraints(m){const _=m.positions[this.m_indexA].c;let o=m.positions[this.m_indexA].a;const h=m.positions[this.m_indexB].c;let c=m.positions[this.m_indexB].a;const l=m.positions[this.m_indexC].c;let n=m.positions[this.m_indexC].a;const r=m.positions[this.m_indexD].c;let a=m.positions[this.m_indexD].a;const{qA:A,qB:b,qC:d,qD:p,JvAC:C,JvBD:B}=e;A.Set(o),b.Set(c),d.Set(n),p.Set(a);let y,u,D,w,V,J,x=0;if(this.m_typeA===s.b2JointType.e_revoluteJoint)C.SetZero(),D=1,V=1,x+=this.m_iA+this.m_iC,y=o-n-this.m_referenceAngleA;else{const{u:t,rC:s,rA:m,lalcC:o,lalcA:h}=e;i.b2Rot.MultiplyVec2(d,this.m_localAxisC,t),i.b2Rot.MultiplyVec2(d,i.b2Vec2.Subtract(this.m_localAnchorC,this.m_lcC,o),s),i.b2Rot.MultiplyVec2(A,i.b2Vec2.Subtract(this.m_localAnchorA,this.m_lcA,h),m),C.Copy(t),V=i.b2Vec2.Cross(s,t),D=i.b2Vec2.Cross(m,t),x+=this.m_mC+this.m_mA+this.m_iC*V*V+this.m_iA*D*D;const c=o,n=i.b2Rot.TransposeMultiplyVec2(d,i.b2Vec2.Add(m,_,i.b2Vec2.s_t0).Subtract(l),i.b2Vec2.s_t0);y=i.b2Vec2.Dot(i.b2Vec2.Subtract(n,c,i.b2Vec2.s_t0),this.m_localAxisC)}if(this.m_typeB===s.b2JointType.e_revoluteJoint)B.SetZero(),w=this.m_ratio,J=this.m_ratio,x+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),u=c-a-this.m_referenceAngleB;else{const{u:t,rD:s,rB:m,lalcD:_,lalcB:o}=e;i.b2Rot.MultiplyVec2(p,this.m_localAxisD,t),i.b2Rot.MultiplyVec2(p,i.b2Vec2.Subtract(this.m_localAnchorD,this.m_lcD,_),s),i.b2Rot.MultiplyVec2(b,i.b2Vec2.Subtract(this.m_localAnchorB,this.m_lcB,o),m),i.b2Vec2.Scale(this.m_ratio,t,B),J=this.m_ratio*i.b2Vec2.Cross(s,t),w=this.m_ratio*i.b2Vec2.Cross(m,t),x+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*J*J+this.m_iB*w*w;const c=_,l=i.b2Rot.TransposeMultiplyVec2(p,i.b2Vec2.Add(m,h,i.b2Vec2.s_t0).Subtract(r),i.b2Vec2.s_t0);u=i.b2Vec2.Dot(l.Subtract(c),this.m_localAxisD)}const v=y+this.m_ratio*u-this.m_constant;let S=0;return x>0&&(S=-v/x),_.AddScaled(this.m_mA*S,C),o+=this.m_iA*S*D,h.AddScaled(this.m_mB*S,B),c+=this.m_iB*S*w,l.SubtractScaled(this.m_mC*S,C),n-=this.m_iC*S*V,r.SubtractScaled(this.m_mD*S,B),a-=this.m_iD*S*J,m.positions[this.m_indexA].a=o,m.positions[this.m_indexB].a=c,m.positions[this.m_indexC].a=n,m.positions[this.m_indexD].a=a,0<t.b2_linearSlop}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,s){return i.b2Vec2.Scale(t*this.m_impulse,this.m_JvAC,s)}GetReactionTorque(t){return t*this.m_impulse*this.m_JwA}GetJoint1(){return this.m_joint1}GetJoint2(){return this.m_joint2}GetRatio(){return this.m_ratio}SetRatio(t){this.m_ratio=t}}exports.b2GearJoint=_;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","./b2_joint":"Xq2i"}],"mwAL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2MotorJoint=exports.b2MotorJointDef=void 0;const t=require("../common/b2_math"),e=require("./b2_joint"),s={qA:new t.b2Rot,qB:new t.b2Rot,K:new t.b2Mat22,Cdot:new t.b2Vec2,impulse:new t.b2Vec2,oldImpulse:new t.b2Vec2};class i extends e.b2JointDef{constructor(){super(e.b2JointType.e_motorJoint),this.linearOffset=new t.b2Vec2,this.angularOffset=0,this.maxForce=1,this.maxTorque=1,this.correctionFactor=.3}Initialize(t,e){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(e.GetPosition(),this.linearOffset);const s=t.GetAngle(),i=e.GetAngle();this.angularOffset=i-s}}exports.b2MotorJointDef=i;class n extends e.b2Joint{constructor(e){var s,i,n,r,o;super(e),this.m_linearOffset=new t.b2Vec2,this.m_linearImpulse=new t.b2Vec2,this.m_angularImpulse=0,this.m_indexA=0,this.m_indexB=0,this.m_rA=new t.b2Vec2,this.m_rB=new t.b2Vec2,this.m_localCenterA=new t.b2Vec2,this.m_localCenterB=new t.b2Vec2,this.m_linearError=new t.b2Vec2,this.m_angularError=0,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_linearMass=new t.b2Mat22,this.m_angularMass=0,this.m_linearOffset.Copy(null!==(s=e.linearOffset)&&void 0!==s?s:t.b2Vec2.ZERO),this.m_angularOffset=null!==(i=e.angularOffset)&&void 0!==i?i:0,this.m_linearImpulse.SetZero(),this.m_maxForce=null!==(n=e.maxForce)&&void 0!==n?n:1,this.m_maxTorque=null!==(r=e.maxTorque)&&void 0!==r?r:1,this.m_correctionFactor=null!==(o=e.correctionFactor)&&void 0!==o?o:.3}GetAnchorA(t){const e=this.m_bodyA.GetPosition();return t.x=e.x,t.y=e.y,t}GetAnchorB(t){const e=this.m_bodyB.GetPosition();return t.x=e.x,t.y=e.y,t}GetReactionForce(e,s){return t.b2Vec2.Scale(e,this.m_linearImpulse,s)}GetReactionTorque(t){return t*this.m_angularImpulse}SetLinearOffset(e){t.b2Vec2.Equals(e,this.m_linearOffset)||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_linearOffset.Copy(e))}GetLinearOffset(){return this.m_linearOffset}SetAngularOffset(t){t!==this.m_angularOffset&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_angularOffset=t)}GetAngularOffset(){return this.m_angularOffset}SetMaxForce(t){this.m_maxForce=t}GetMaxForce(){return this.m_maxForce}SetMaxTorque(t){this.m_maxTorque=t}GetMaxTorque(){return this.m_maxTorque}GetCorrectionFactor(){return this.m_correctionFactor}SetCorrectionFactor(t){this.m_correctionFactor=t}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const i=e.positions[this.m_indexA].c,n=e.positions[this.m_indexA].a,r=e.velocities[this.m_indexA].v;let o=e.velocities[this.m_indexA].w;const a=e.positions[this.m_indexB].c,m=e.positions[this.m_indexB].a,l=e.velocities[this.m_indexB].v;let _=e.velocities[this.m_indexB].w;const{qA:c,qB:h}=s;c.Set(n),h.Set(m);const u=t.b2Rot.MultiplyVec2(c,t.b2Vec2.Subtract(this.m_linearOffset,this.m_localCenterA,t.b2Vec2.s_t0),this.m_rA),d=t.b2Rot.MultiplyVec2(h,t.b2Vec2.Negate(this.m_localCenterB,t.b2Vec2.s_t0),this.m_rB),b=this.m_invMassA,x=this.m_invMassB,p=this.m_invIA,A=this.m_invIB,v=this.m_linearMass;if(v.ex.x=b+x+p*u.y*u.y+A*d.y*d.y,v.ex.y=-p*u.x*u.y-A*d.x*d.y,v.ey.x=v.ex.y,v.ey.y=b+x+p*u.x*u.x+A*d.x*d.x,v.Inverse(),this.m_angularMass=p+A,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.b2Vec2.Subtract(t.b2Vec2.Add(a,d,t.b2Vec2.s_t0),t.b2Vec2.Add(i,u,t.b2Vec2.s_t1),this.m_linearError),this.m_angularError=m-n-this.m_angularOffset,e.step.warmStarting){this.m_linearImpulse.Scale(e.step.dtRatio),this.m_angularImpulse*=e.step.dtRatio;const s=this.m_linearImpulse;r.SubtractScaled(b,s),o-=p*(t.b2Vec2.Cross(u,s)+this.m_angularImpulse),l.AddScaled(x,s),_+=A*(t.b2Vec2.Cross(d,s)+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0;e.velocities[this.m_indexA].w=o,e.velocities[this.m_indexB].w=_}SolveVelocityConstraints(e){const i=e.velocities[this.m_indexA].v;let n=e.velocities[this.m_indexA].w;const r=e.velocities[this.m_indexB].v;let o=e.velocities[this.m_indexB].w;const a=this.m_invMassA,m=this.m_invMassB,l=this.m_invIA,_=this.m_invIB,c=e.step.dt,h=e.step.inv_dt;{const e=o-n+h*this.m_correctionFactor*this.m_angularError;let s=-this.m_angularMass*e;const i=this.m_angularImpulse,r=c*this.m_maxTorque;this.m_angularImpulse=(0,t.b2Clamp)(this.m_angularImpulse+s,-r,r),n-=l*(s=this.m_angularImpulse-i),o+=_*s}{const{impulse:e,oldImpulse:u,Cdot:d}=s;t.b2Vec2.AddScaled(t.b2Vec2.Subtract(t.b2Vec2.AddCrossScalarVec2(r,o,this.m_rB,t.b2Vec2.s_t0),t.b2Vec2.AddCrossScalarVec2(i,n,this.m_rA,t.b2Vec2.s_t1),t.b2Vec2.s_t2),h*this.m_correctionFactor,this.m_linearError,d),t.b2Mat22.MultiplyVec2(this.m_linearMass,d,e).Negate(),u.Copy(this.m_linearImpulse),this.m_linearImpulse.Add(e);const b=c*this.m_maxForce;this.m_linearImpulse.LengthSquared()>b*b&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.Scale(b)),t.b2Vec2.Subtract(this.m_linearImpulse,u,e),i.SubtractScaled(a,e),n-=l*t.b2Vec2.Cross(this.m_rA,e),r.AddScaled(m,e),o+=_*t.b2Vec2.Cross(this.m_rB,e)}e.velocities[this.m_indexA].w=n,e.velocities[this.m_indexB].w=o}SolvePositionConstraints(t){return!0}}exports.b2MotorJoint=n;
},{"../common/b2_math":"cQbL","./b2_joint":"Xq2i"}],"BhEk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2MouseJoint=exports.b2MouseJointDef=void 0;const t=require("../common/b2_draw"),s=require("../common/b2_math"),e=require("./b2_joint"),i={qB:new s.b2Rot,lalcB:new s.b2Vec2,Cdot:new s.b2Vec2,impulse:new s.b2Vec2,oldImpulse:new s.b2Vec2,pA:new s.b2Vec2,pB:new s.b2Vec2};class m extends e.b2JointDef{constructor(){super(e.b2JointType.e_mouseJoint),this.target=new s.b2Vec2,this.maxForce=0,this.stiffness=0,this.damping=0}}exports.b2MouseJointDef=m;class n extends e.b2Joint{constructor(t){var e,i,m,n;super(t),this.m_localAnchorB=new s.b2Vec2,this.m_targetA=new s.b2Vec2,this.m_stiffness=0,this.m_damping=0,this.m_beta=0,this.m_impulse=new s.b2Vec2,this.m_maxForce=0,this.m_gamma=0,this.m_indexB=0,this.m_rB=new s.b2Vec2,this.m_localCenterB=new s.b2Vec2,this.m_invMassB=0,this.m_invIB=0,this.m_mass=new s.b2Mat22,this.m_C=new s.b2Vec2,this.m_targetA.Copy(null!==(e=t.target)&&void 0!==e?e:s.b2Vec2.ZERO),s.b2Transform.TransposeMultiplyVec2(this.m_bodyB.GetTransform(),this.m_targetA,this.m_localAnchorB),this.m_maxForce=null!==(i=t.maxForce)&&void 0!==i?i:0,this.m_stiffness=null!==(m=t.stiffness)&&void 0!==m?m:0,this.m_damping=null!==(n=t.damping)&&void 0!==n?n:0,this.m_beta=0,this.m_gamma=0}SetTarget(t){s.b2Vec2.Equals(t,this.m_targetA)||(this.m_bodyB.SetAwake(!0),this.m_targetA.Copy(t))}GetTarget(){return this.m_targetA}SetMaxForce(t){this.m_maxForce=t}GetMaxForce(){return this.m_maxForce}SetStiffness(t){this.m_stiffness=t}GetStiffness(){return this.m_stiffness}SetDamping(t){this.m_damping=t}GetDamping(){return this.m_damping}InitVelocityConstraints(t){this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexB].c,m=t.positions[this.m_indexB].a,n=t.velocities[this.m_indexB].v;let o=t.velocities[this.m_indexB].w;const{qB:h,lalcB:r}=i;h.Set(m);const a=this.m_damping,_=this.m_stiffness,c=t.step.dt;this.m_gamma=c*(a+c*_),0!==this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=c*_*this.m_gamma,s.b2Rot.MultiplyVec2(h,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,r),this.m_rB);const l=this.m_mass;l.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,l.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,l.ey.x=l.ex.y,l.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,l.Inverse(),s.b2Vec2.Add(e,this.m_rB,this.m_C).Subtract(this.m_targetA),this.m_C.Scale(this.m_beta),o*=.98,t.step.warmStarting?(this.m_impulse.Scale(t.step.dtRatio),n.AddScaled(this.m_invMassB,this.m_impulse),o+=this.m_invIB*s.b2Vec2.Cross(this.m_rB,this.m_impulse)):this.m_impulse.SetZero(),t.velocities[this.m_indexB].w=o}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexB].v;let m=t.velocities[this.m_indexB].w;const{Cdot:n,impulse:o,oldImpulse:h}=i;s.b2Vec2.AddCrossScalarVec2(e,m,this.m_rB,n),s.b2Mat22.MultiplyVec2(this.m_mass,s.b2Vec2.Add(n,this.m_C,o).AddScaled(this.m_gamma,this.m_impulse).Negate(),o),h.Copy(this.m_impulse),this.m_impulse.Add(o);const r=t.step.dt*this.m_maxForce;this.m_impulse.LengthSquared()>r*r&&this.m_impulse.Scale(r/this.m_impulse.Length()),s.b2Vec2.Subtract(this.m_impulse,h,o),e.AddScaled(this.m_invMassB,o),m+=this.m_invIB*s.b2Vec2.Cross(this.m_rB,o),t.velocities[this.m_indexB].w=m}SolvePositionConstraints(t){return!0}GetAnchorA(t){return t.x=this.m_targetA.x,t.y=this.m_targetA.y,t}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return s.b2Vec2.Scale(t,this.m_impulse,e)}GetReactionTorque(t){return 0}ShiftOrigin(t){this.m_targetA.Subtract(t)}Draw(s){const e=this.GetAnchorA(i.pA),m=this.GetAnchorB(i.pB);s.DrawPoint(e,4,t.debugColors.joint7),s.DrawPoint(m,4,t.debugColors.joint7),s.DrawSegment(e,m,t.debugColors.joint8)}}exports.b2MouseJoint=n;
},{"../common/b2_draw":"lvls","../common/b2_math":"cQbL","./b2_joint":"Xq2i"}],"FAa8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2PrismaticJoint=exports.b2PrismaticJointDef=void 0;const t=require("../common/b2_common"),e=require("../common/b2_draw"),s=require("../common/b2_math"),i=require("./b2_joint"),o={K3:new s.b2Mat33,K2:new s.b2Mat22,qA:new s.b2Rot,qB:new s.b2Rot,lalcA:new s.b2Vec2,lalcB:new s.b2Vec2,rA:new s.b2Vec2,rB:new s.b2Vec2,GetJointTranslation:{pA:new s.b2Vec2,pB:new s.b2Vec2,d:new s.b2Vec2,axis:new s.b2Vec2},InitVelocityConstraints:{d:new s.b2Vec2,P:new s.b2Vec2},SolveVelocityConstraints:{P:new s.b2Vec2,df:new s.b2Vec2},SolvePositionConstraints:{d:new s.b2Vec2,impulse:new s.b2Vec3,impulse1:new s.b2Vec2,P:new s.b2Vec2},Draw:{p1:new s.b2Vec2,p2:new s.b2Vec2,pA:new s.b2Vec2,pB:new s.b2Vec2,axis:new s.b2Vec2,lower:new s.b2Vec2,upper:new s.b2Vec2,perp:new s.b2Vec2}};class l extends i.b2JointDef{constructor(){super(i.b2JointType.e_prismaticJoint),this.localAnchorA=new s.b2Vec2,this.localAnchorB=new s.b2Vec2,this.localAxisA=new s.b2Vec2(1,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0}Initialize(t,e,s,i){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(s,this.localAnchorA),this.bodyB.GetLocalPoint(s,this.localAnchorB),this.bodyA.GetLocalVector(i,this.localAxisA),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}exports.b2PrismaticJointDef=l;class m extends i.b2Joint{constructor(t){var e,i,o,l,m,n,a,c,r,h;super(t),this.m_localAnchorA=new s.b2Vec2,this.m_localAnchorB=new s.b2Vec2,this.m_localXAxisA=new s.b2Vec2,this.m_localYAxisA=new s.b2Vec2,this.m_referenceAngle=0,this.m_impulse=new s.b2Vec2,this.m_motorImpulse=0,this.m_lowerImpulse=0,this.m_upperImpulse=0,this.m_lowerTranslation=0,this.m_upperTranslation=0,this.m_maxMotorForce=0,this.m_motorSpeed=0,this.m_enableLimit=!1,this.m_enableMotor=!1,this.m_indexA=0,this.m_indexB=0,this.m_localCenterA=new s.b2Vec2,this.m_localCenterB=new s.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_axis=new s.b2Vec2,this.m_perp=new s.b2Vec2,this.m_s1=0,this.m_s2=0,this.m_a1=0,this.m_a2=0,this.m_K=new s.b2Mat22,this.m_translation=0,this.m_axialMass=0,this.m_localAnchorA.Copy(null!==(e=t.localAnchorA)&&void 0!==e?e:s.b2Vec2.ZERO),this.m_localAnchorB.Copy(null!==(i=t.localAnchorB)&&void 0!==i?i:s.b2Vec2.ZERO),s.b2Vec2.Normalize(null!==(o=t.localAxisA)&&void 0!==o?o:s.b2Vec2.UNITX,this.m_localXAxisA),s.b2Vec2.CrossOneVec2(this.m_localXAxisA,this.m_localYAxisA),this.m_referenceAngle=null!==(l=t.referenceAngle)&&void 0!==l?l:0,this.m_lowerTranslation=null!==(m=t.lowerTranslation)&&void 0!==m?m:0,this.m_upperTranslation=null!==(n=t.upperTranslation)&&void 0!==n?n:0,this.m_maxMotorForce=null!==(a=t.maxMotorForce)&&void 0!==a?a:0,this.m_motorSpeed=null!==(c=t.motorSpeed)&&void 0!==c?c:0,this.m_enableLimit=null!==(r=t.enableLimit)&&void 0!==r&&r,this.m_enableMotor=null!==(h=t.enableMotor)&&void 0!==h&&h}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,l=t.velocities[this.m_indexA].v;let m=t.velocities[this.m_indexA].w;const n=t.positions[this.m_indexB].c,a=t.positions[this.m_indexB].a,c=t.velocities[this.m_indexB].v;let r=t.velocities[this.m_indexB].w;const{qA:h,qB:_,lalcA:b,lalcB:p,rA:d,rB:A}=o;h.Set(i),_.Set(a),s.b2Rot.MultiplyVec2(h,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,b),d),s.b2Rot.MultiplyVec2(_,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,p),A);const u=s.b2Vec2.Subtract(n,e,o.InitVelocityConstraints.d).Add(A).Subtract(d),V=this.m_invMassA,x=this.m_invMassB,S=this.m_invIA,w=this.m_invIB;s.b2Rot.MultiplyVec2(h,this.m_localXAxisA,this.m_axis),this.m_a1=s.b2Vec2.Cross(s.b2Vec2.Add(u,d,s.b2Vec2.s_t0),this.m_axis),this.m_a2=s.b2Vec2.Cross(A,this.m_axis),this.m_axialMass=V+x+S*this.m_a1*this.m_a1+w*this.m_a2*this.m_a2,this.m_axialMass>0&&(this.m_axialMass=1/this.m_axialMass),s.b2Rot.MultiplyVec2(h,this.m_localYAxisA,this.m_perp),this.m_s1=s.b2Vec2.Cross(s.b2Vec2.Add(u,d,s.b2Vec2.s_t0),this.m_perp),this.m_s2=s.b2Vec2.Cross(A,this.m_perp);const y=V+x+S*this.m_s1*this.m_s1+w*this.m_s2*this.m_s2,M=S*this.m_s1+w*this.m_s2;let B=S+w;if(0===B&&(B=1),this.m_K.ex.Set(y,M),this.m_K.ey.Set(M,B),this.m_enableLimit?this.m_translation=s.b2Vec2.Dot(this.m_axis,u):(this.m_lowerImpulse=0,this.m_upperImpulse=0),this.m_enableMotor||(this.m_motorImpulse=0),t.step.warmStarting){this.m_impulse.Scale(t.step.dtRatio),this.m_motorImpulse*=t.step.dtRatio,this.m_lowerImpulse*=t.step.dtRatio,this.m_upperImpulse*=t.step.dtRatio;const e=this.m_motorImpulse+this.m_lowerImpulse-this.m_upperImpulse,{P:i}=o.InitVelocityConstraints;s.b2Vec2.Scale(this.m_impulse.x,this.m_perp,i).AddScaled(e,this.m_axis);const n=this.m_impulse.x*this.m_s1+this.m_impulse.y+e*this.m_a1,a=this.m_impulse.x*this.m_s2+this.m_impulse.y+e*this.m_a2;l.SubtractScaled(V,i),m-=S*n,c.AddScaled(x,i),r+=w*a}else this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerImpulse=0,this.m_upperImpulse=0;t.velocities[this.m_indexA].w=m,t.velocities[this.m_indexB].w=r}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const l=t.velocities[this.m_indexB].v;let m=t.velocities[this.m_indexB].w;const n=this.m_invMassA,a=this.m_invMassB,c=this.m_invIA,r=this.m_invIB,{P:h,df:_}=o.SolveVelocityConstraints;if(this.m_enableMotor){const o=s.b2Vec2.Dot(this.m_axis,s.b2Vec2.Subtract(l,e,s.b2Vec2.s_t0))+this.m_a2*m-this.m_a1*i;let _=this.m_axialMass*(this.m_motorSpeed-o);const b=this.m_motorImpulse,p=t.step.dt*this.m_maxMotorForce;this.m_motorImpulse=(0,s.b2Clamp)(this.m_motorImpulse+_,-p,p),_=this.m_motorImpulse-b,s.b2Vec2.Scale(_,this.m_axis,h);const d=_*this.m_a1,A=_*this.m_a2;e.SubtractScaled(n,h),i-=c*d,l.AddScaled(a,h),m+=r*A}if(this.m_enableLimit){{const o=this.m_translation-this.m_lowerTranslation,_=s.b2Vec2.Dot(this.m_axis,s.b2Vec2.Subtract(l,e,s.b2Vec2.s_t0))+this.m_a2*m-this.m_a1*i;let b=-this.m_axialMass*(_+Math.max(o,0)*t.step.inv_dt);const p=this.m_lowerImpulse;this.m_lowerImpulse=Math.max(this.m_lowerImpulse+b,0),b=this.m_lowerImpulse-p,s.b2Vec2.Scale(b,this.m_axis,h);const d=b*this.m_a1,A=b*this.m_a2;e.SubtractScaled(n,h),i-=c*d,l.AddScaled(a,h),m+=r*A}{const o=this.m_upperTranslation-this.m_translation,_=s.b2Vec2.Dot(this.m_axis,s.b2Vec2.Subtract(e,l,s.b2Vec2.s_t0))+this.m_a1*i-this.m_a2*m;let b=-this.m_axialMass*(_+Math.max(o,0)*t.step.inv_dt);const p=this.m_upperImpulse;this.m_upperImpulse=Math.max(this.m_upperImpulse+b,0),b=this.m_upperImpulse-p,s.b2Vec2.Scale(b,this.m_axis,h);const d=b*this.m_a1,A=b*this.m_a2;e.AddScaled(n,h),i+=c*d,l.SubtractScaled(a,h),m-=r*A}}{const t=s.b2Vec2.Dot(this.m_perp,s.b2Vec2.Subtract(l,e,s.b2Vec2.s_t0))+this.m_s2*m-this.m_s1*i,o=m-i;this.m_K.Solve(-t,-o,_),this.m_impulse.Add(_),s.b2Vec2.Scale(_.x,this.m_perp,h);const b=_.x*this.m_s1+_.y,p=_.x*this.m_s2+_.y;e.SubtractScaled(n,h),i-=c*b,l.AddScaled(a,h),m+=r*p}t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=m}SolvePositionConstraints(e){const i=e.positions[this.m_indexA].c;let l=e.positions[this.m_indexA].a;const m=e.positions[this.m_indexB].c;let n=e.positions[this.m_indexB].a;const{qA:a,qB:c,lalcA:r,lalcB:h,rA:_,rB:b}=o;a.Set(l),c.Set(n);const p=this.m_invMassA,d=this.m_invMassB,A=this.m_invIA,u=this.m_invIB,{d:V,impulse:x,P:S}=o.SolvePositionConstraints;s.b2Rot.MultiplyVec2(a,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,r),_),s.b2Rot.MultiplyVec2(c,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,h),b),s.b2Vec2.Add(m,b,V).Subtract(i).Subtract(_);const w=s.b2Rot.MultiplyVec2(a,this.m_localXAxisA,this.m_axis),y=s.b2Vec2.Cross(s.b2Vec2.Add(V,_,s.b2Vec2.s_t0),w),M=s.b2Vec2.Cross(b,w),B=s.b2Rot.MultiplyVec2(a,this.m_localYAxisA,this.m_perp),v=s.b2Vec2.Cross(s.b2Vec2.Add(V,_,s.b2Vec2.s_t0),B),I=s.b2Vec2.Cross(b,B),C=s.b2Vec2.Dot(B,V),T=n-l-this.m_referenceAngle;let G=Math.abs(C);const f=Math.abs(T);let g=!1,D=0;if(this.m_enableLimit){const e=s.b2Vec2.Dot(w,V);Math.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?(D=e,G=Math.max(G,Math.abs(e)),g=!0):e<=this.m_lowerTranslation?(D=Math.min(e-this.m_lowerTranslation,0),G=Math.max(G,this.m_lowerTranslation-e),g=!0):e>=this.m_upperTranslation&&(D=Math.max(e-this.m_upperTranslation,0),G=Math.max(G,e-this.m_upperTranslation),g=!0)}if(g){const t=p+d+A*v*v+u*I*I,e=A*v+u*I,s=A*v*y+u*I*M;let i=A+u;0===i&&(i=1);const l=A*y+u*M,m=p+d+A*y*y+u*M*M,n=o.K3;n.ex.Set(t,e,s),n.ey.Set(e,i,l),n.ez.Set(s,l,m),n.Solve33(-C,-T,-D,x)}else{const t=p+d+A*v*v+u*I*I,e=A*v+u*I;let s=A+u;0===s&&(s=1);const i=o.K2;i.ex.Set(t,e),i.ey.Set(e,s);const l=i.Solve(-C,-T,o.SolvePositionConstraints.impulse1);x.x=l.x,x.y=l.y,x.z=0}s.b2Vec2.Scale(x.x,B,S).AddScaled(x.z,w);const R=x.x*v+x.y+x.z*y,L=x.x*I+x.y+x.z*M;return i.SubtractScaled(p,S),l-=A*R,m.AddScaled(d,S),n+=u*L,e.positions[this.m_indexA].a=l,e.positions[this.m_indexB].a=n,G<=t.b2_linearSlop&&f<=t.b2_angularSlop}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){const s=this.m_motorImpulse+this.m_lowerImpulse-this.m_upperImpulse;return e.x=t*(this.m_impulse.x*this.m_perp.x+s*this.m_axis.x),e.y=t*(this.m_impulse.x*this.m_perp.y+s*this.m_axis.y),e}GetReactionTorque(t){return t*this.m_impulse.y}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetLocalAxisA(){return this.m_localXAxisA}GetReferenceAngle(){return this.m_referenceAngle}GetJointTranslation(){const{pA:t,pB:e,axis:i,d:l}=o.GetJointTranslation;return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t),this.m_bodyB.GetWorldPoint(this.m_localAnchorB,e),s.b2Vec2.Subtract(e,t,l),this.m_bodyA.GetWorldVector(this.m_localXAxisA,i),s.b2Vec2.Dot(l,i)}GetJointSpeed(){const t=this.m_bodyA,e=this.m_bodyB,{lalcA:i,lalcB:l,rA:m,rB:n}=o;s.b2Rot.MultiplyVec2(t.m_xf.q,s.b2Vec2.Subtract(this.m_localAnchorA,t.m_sweep.localCenter,i),m),s.b2Rot.MultiplyVec2(e.m_xf.q,s.b2Vec2.Subtract(this.m_localAnchorB,e.m_sweep.localCenter,l),n);const a=s.b2Vec2.Add(t.m_sweep.c,m,s.b2Vec2.s_t0),c=s.b2Vec2.Add(e.m_sweep.c,n,s.b2Vec2.s_t1),r=s.b2Vec2.Subtract(c,a,s.b2Vec2.s_t2),h=s.b2Rot.MultiplyVec2(t.m_xf.q,this.m_localXAxisA,this.m_axis),_=t.m_linearVelocity,b=e.m_linearVelocity,p=t.m_angularVelocity,d=e.m_angularVelocity;return s.b2Vec2.Dot(r,s.b2Vec2.CrossScalarVec2(p,h,s.b2Vec2.s_t0))+s.b2Vec2.Dot(h,s.b2Vec2.Subtract(s.b2Vec2.AddCrossScalarVec2(b,d,n,s.b2Vec2.s_t0),s.b2Vec2.AddCrossScalarVec2(_,p,m,s.b2Vec2.s_t1),s.b2Vec2.s_t0))}IsLimitEnabled(){return this.m_enableLimit}EnableLimit(t){return t!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t,this.m_lowerImpulse=0,this.m_upperImpulse=0),t}GetLowerLimit(){return this.m_lowerTranslation}GetUpperLimit(){return this.m_upperTranslation}SetLimits(t,e){t===this.m_lowerTranslation&&e===this.m_upperTranslation||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e,this.m_lowerImpulse=0,this.m_upperImpulse=0)}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(t){return t!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t),t}SetMotorSpeed(t){return t!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t),t}GetMotorSpeed(){return this.m_motorSpeed}SetMaxMotorForce(t){t!==this.m_maxMotorForce&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t)}GetMaxMotorForce(){return this.m_maxMotorForce}GetMotorForce(t){return t*this.m_motorImpulse}Draw(t){const{p1:i,p2:l,pA:m,pB:n,axis:a}=o.Draw,c=this.m_bodyA.GetTransform(),r=this.m_bodyB.GetTransform();if(s.b2Transform.MultiplyVec2(c,this.m_localAnchorA,m),s.b2Transform.MultiplyVec2(r,this.m_localAnchorB,n),s.b2Rot.MultiplyVec2(c.q,this.m_localXAxisA,a),t.DrawSegment(m,n,e.debugColors.joint5),this.m_enableLimit){const{lower:n,upper:r,perp:h}=o.Draw;s.b2Vec2.AddScaled(m,this.m_lowerTranslation,a,n),s.b2Vec2.AddScaled(m,this.m_upperTranslation,a,r),s.b2Rot.MultiplyVec2(c.q,this.m_localYAxisA,h),t.DrawSegment(n,r,e.debugColors.joint1),t.DrawSegment(s.b2Vec2.SubtractScaled(n,.5,h,i),s.b2Vec2.AddScaled(n,.5,h,l),e.debugColors.joint2),t.DrawSegment(s.b2Vec2.SubtractScaled(r,.5,h,i),s.b2Vec2.AddScaled(r,.5,h,l),e.debugColors.joint3)}else t.DrawSegment(s.b2Vec2.Subtract(m,a,i),s.b2Vec2.Add(m,a,l),e.debugColors.joint1);t.DrawPoint(m,5,e.debugColors.joint1),t.DrawPoint(n,5,e.debugColors.joint4)}}exports.b2PrismaticJoint=m;
},{"../common/b2_common":"ReKW","../common/b2_draw":"lvls","../common/b2_math":"cQbL","./b2_joint":"Xq2i"}],"smnA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2PulleyJoint=exports.b2PulleyJointDef=exports.b2_minPulleyLength=void 0;const t=require("../common/b2_common"),i=require("../common/b2_draw"),s=require("../common/b2_math"),e=require("./b2_joint");exports.b2_minPulleyLength=2;const n={qA:new s.b2Rot,qB:new s.b2Rot,lalcA:new s.b2Vec2,lalcB:new s.b2Vec2,p:new s.b2Vec2,PA:new s.b2Vec2,PB:new s.b2Vec2,vpA:new s.b2Vec2,vpB:new s.b2Vec2,pA:new s.b2Vec2,pB:new s.b2Vec2};class o extends e.b2JointDef{constructor(){super(e.b2JointType.e_pulleyJoint),this.groundAnchorA=new s.b2Vec2(-1,1),this.groundAnchorB=new s.b2Vec2(1,1),this.localAnchorA=new s.b2Vec2(-1,0),this.localAnchorB=new s.b2Vec2(1,0),this.lengthA=0,this.lengthB=0,this.ratio=1,this.collideConnected=!0}Initialize(t,i,e,n,o,h,c){this.bodyA=t,this.bodyB=i,this.groundAnchorA.Copy(e),this.groundAnchorB.Copy(n),this.bodyA.GetLocalPoint(o,this.localAnchorA),this.bodyB.GetLocalPoint(h,this.localAnchorB),this.lengthA=s.b2Vec2.Distance(o,e),this.lengthB=s.b2Vec2.Distance(h,n),this.ratio=c}}exports.b2PulleyJointDef=o;const h=new s.b2Vec2(-1,1),c=s.b2Vec2.UNITX,r=new s.b2Vec2(-1,0),m=s.b2Vec2.UNITX;class _ extends e.b2Joint{constructor(t){var i,e,n,o,_,l,A;super(t),this.m_groundAnchorA=new s.b2Vec2,this.m_groundAnchorB=new s.b2Vec2,this.m_lengthA=0,this.m_lengthB=0,this.m_localAnchorA=new s.b2Vec2,this.m_localAnchorB=new s.b2Vec2,this.m_constant=0,this.m_ratio=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_uA=new s.b2Vec2,this.m_uB=new s.b2Vec2,this.m_rA=new s.b2Vec2,this.m_rB=new s.b2Vec2,this.m_localCenterA=new s.b2Vec2,this.m_localCenterB=new s.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_groundAnchorA.Copy(null!==(i=t.groundAnchorA)&&void 0!==i?i:h),this.m_groundAnchorB.Copy(null!==(e=t.groundAnchorB)&&void 0!==e?e:c),this.m_localAnchorA.Copy(null!==(n=t.localAnchorA)&&void 0!==n?n:r),this.m_localAnchorB.Copy(null!==(o=t.localAnchorB)&&void 0!==o?o:m),this.m_lengthA=null!==(_=t.lengthA)&&void 0!==_?_:0,this.m_lengthB=null!==(l=t.lengthB)&&void 0!==l?l:0,this.m_ratio=null!==(A=t.ratio)&&void 0!==A?A:1,this.m_constant=this.m_lengthA+this.m_ratio*this.m_lengthB,this.m_impulse=0}InitVelocityConstraints(i){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=i.positions[this.m_indexA].c,o=i.positions[this.m_indexA].a,h=i.velocities[this.m_indexA].v;let c=i.velocities[this.m_indexA].w;const r=i.positions[this.m_indexB].c,m=i.positions[this.m_indexB].a,_=i.velocities[this.m_indexB].v;let l=i.velocities[this.m_indexB].w;const{qA:A,qB:a,lalcA:d,lalcB:b}=n;A.Set(o),a.Set(m),s.b2Rot.MultiplyVec2(A,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,d),this.m_rA),s.b2Rot.MultiplyVec2(a,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,b),this.m_rB),s.b2Vec2.Add(e,this.m_rA,this.m_uA).Subtract(this.m_groundAnchorA),s.b2Vec2.Add(r,this.m_rB,this.m_uB).Subtract(this.m_groundAnchorB);const u=this.m_uA.Length(),B=this.m_uB.Length();u>10*t.b2_linearSlop?this.m_uA.Scale(1/u):this.m_uA.SetZero(),B>10*t.b2_linearSlop?this.m_uB.Scale(1/B):this.m_uB.SetZero();const V=s.b2Vec2.Cross(this.m_rA,this.m_uA),v=s.b2Vec2.Cross(this.m_rB,this.m_uB),p=this.m_invMassA+this.m_invIA*V*V,g=this.m_invMassB+this.m_invIB*v*v;if(this.m_mass=p+this.m_ratio*this.m_ratio*g,this.m_mass>0&&(this.m_mass=1/this.m_mass),i.step.warmStarting){this.m_impulse*=i.step.dtRatio;const{PA:t,PB:e}=n;s.b2Vec2.Scale(-this.m_impulse,this.m_uA,t),s.b2Vec2.Scale(-this.m_ratio*this.m_impulse,this.m_uB,e),h.AddScaled(this.m_invMassA,t),c+=this.m_invIA*s.b2Vec2.Cross(this.m_rA,t),_.AddScaled(this.m_invMassB,e),l+=this.m_invIB*s.b2Vec2.Cross(this.m_rB,e)}else this.m_impulse=0;i.velocities[this.m_indexA].w=c,i.velocities[this.m_indexB].w=l}SolveVelocityConstraints(t){const i=t.velocities[this.m_indexA].v;let e=t.velocities[this.m_indexA].w;const o=t.velocities[this.m_indexB].v;let h=t.velocities[this.m_indexB].w;const{PA:c,PB:r,vpA:m,vpB:_}=n;s.b2Vec2.AddCrossScalarVec2(i,e,this.m_rA,m),s.b2Vec2.AddCrossScalarVec2(o,h,this.m_rB,_);const l=-s.b2Vec2.Dot(this.m_uA,m)-this.m_ratio*s.b2Vec2.Dot(this.m_uB,_),A=-this.m_mass*l;this.m_impulse+=A,s.b2Vec2.Scale(-A,this.m_uA,c),s.b2Vec2.Scale(-this.m_ratio*A,this.m_uB,r),i.AddScaled(this.m_invMassA,c),e+=this.m_invIA*s.b2Vec2.Cross(this.m_rA,c),o.AddScaled(this.m_invMassB,r),h+=this.m_invIB*s.b2Vec2.Cross(this.m_rB,r),t.velocities[this.m_indexA].w=e,t.velocities[this.m_indexB].w=h}SolvePositionConstraints(i){const e=i.positions[this.m_indexA].c;let o=i.positions[this.m_indexA].a;const h=i.positions[this.m_indexB].c;let c=i.positions[this.m_indexB].a;const{qA:r,qB:m,lalcA:_,lalcB:l,PA:A,PB:a}=n;r.Set(o),m.Set(c);const d=s.b2Rot.MultiplyVec2(r,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,_),this.m_rA),b=s.b2Rot.MultiplyVec2(m,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,l),this.m_rB),u=s.b2Vec2.Add(e,d,this.m_uA).Subtract(this.m_groundAnchorA),B=s.b2Vec2.Add(h,b,this.m_uB).Subtract(this.m_groundAnchorB),V=u.Length(),v=B.Length();V>10*t.b2_linearSlop?u.Scale(1/V):u.SetZero(),v>10*t.b2_linearSlop?B.Scale(1/v):B.SetZero();const p=s.b2Vec2.Cross(d,u),g=s.b2Vec2.Cross(b,B),S=this.m_invMassA+this.m_invIA*p*p,w=this.m_invMassB+this.m_invIB*g*g;let y=S+this.m_ratio*this.m_ratio*w;y>0&&(y=1/y);const x=this.m_constant-V-this.m_ratio*v,C=Math.abs(x),G=-y*x;return s.b2Vec2.Scale(-G,u,A),s.b2Vec2.Scale(-this.m_ratio*G,B,a),e.AddScaled(this.m_invMassA,A),o+=this.m_invIA*s.b2Vec2.Cross(d,A),h.AddScaled(this.m_invMassB,a),c+=this.m_invIB*s.b2Vec2.Cross(b,a),i.positions[this.m_indexA].a=o,i.positions[this.m_indexB].a=c,C<t.b2_linearSlop}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,i){return i.x=t*this.m_impulse*this.m_uB.x,i.y=t*this.m_impulse*this.m_uB.y,i}GetReactionTorque(t){return 0}GetGroundAnchorA(){return this.m_groundAnchorA}GetGroundAnchorB(){return this.m_groundAnchorB}GetLengthA(){return this.m_lengthA}GetLengthB(){return this.m_lengthB}GetRatio(){return this.m_ratio}GetCurrentLengthA(){const t=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,n.p),i=this.m_groundAnchorA;return s.b2Vec2.Distance(t,i)}GetCurrentLengthB(){const t=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,n.p),i=this.m_groundAnchorB;return s.b2Vec2.Distance(t,i)}ShiftOrigin(t){this.m_groundAnchorA.Subtract(t),this.m_groundAnchorB.Subtract(t)}Draw(t){const s=this.GetAnchorA(n.pA),e=this.GetAnchorB(n.pB),o=this.GetGroundAnchorA(),h=this.GetGroundAnchorB();t.DrawSegment(o,s,i.debugColors.joint6),t.DrawSegment(h,e,i.debugColors.joint6),t.DrawSegment(o,h,i.debugColors.joint6)}}exports.b2PulleyJoint=_;
},{"../common/b2_common":"ReKW","../common/b2_draw":"lvls","../common/b2_math":"cQbL","./b2_joint":"Xq2i"}],"ELTV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2RevoluteJoint=exports.b2RevoluteJointDef=void 0;const e=require("../common/b2_common"),t=require("../common/b2_draw"),i=require("../common/b2_math"),s=require("./b2_joint"),o={qA:new i.b2Rot,qB:new i.b2Rot,lalcA:new i.b2Vec2,lalcB:new i.b2Vec2,P:new i.b2Vec2,Cdot:new i.b2Vec2,C:new i.b2Vec2,impulse:new i.b2Vec2,p2:new i.b2Vec2,r:new i.b2Vec2,pA:new i.b2Vec2,pB:new i.b2Vec2,rlo:new i.b2Vec2,rhi:new i.b2Vec2};class m extends s.b2JointDef{constructor(){super(s.b2JointType.e_revoluteJoint),this.localAnchorA=new i.b2Vec2,this.localAnchorB=new i.b2Vec2,this.referenceAngle=0,this.enableLimit=!1,this.lowerAngle=0,this.upperAngle=0,this.enableMotor=!1,this.motorSpeed=0,this.maxMotorTorque=0}Initialize(e,t,i){this.bodyA=e,this.bodyB=t,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}exports.b2RevoluteJointDef=m;class l extends s.b2Joint{constructor(e){var t,s,o,m,l,n,r,h,_;super(e),this.m_localAnchorA=new i.b2Vec2,this.m_localAnchorB=new i.b2Vec2,this.m_impulse=new i.b2Vec2,this.m_motorImpulse=0,this.m_lowerImpulse=0,this.m_upperImpulse=0,this.m_enableMotor=!1,this.m_maxMotorTorque=0,this.m_motorSpeed=0,this.m_enableLimit=!1,this.m_referenceAngle=0,this.m_lowerAngle=0,this.m_upperAngle=0,this.m_indexA=0,this.m_indexB=0,this.m_rA=new i.b2Vec2,this.m_rB=new i.b2Vec2,this.m_localCenterA=new i.b2Vec2,this.m_localCenterB=new i.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_K=new i.b2Mat22,this.m_angle=0,this.m_axialMass=0,this.m_localAnchorA.Copy(null!==(t=e.localAnchorA)&&void 0!==t?t:i.b2Vec2.ZERO),this.m_localAnchorB.Copy(null!==(s=e.localAnchorB)&&void 0!==s?s:i.b2Vec2.ZERO),this.m_referenceAngle=null!==(o=e.referenceAngle)&&void 0!==o?o:0,this.m_impulse.SetZero(),this.m_lowerAngle=null!==(m=e.lowerAngle)&&void 0!==m?m:0,this.m_upperAngle=null!==(l=e.upperAngle)&&void 0!==l?l:0,this.m_maxMotorTorque=null!==(n=e.maxMotorTorque)&&void 0!==n?n:0,this.m_motorSpeed=null!==(r=e.motorSpeed)&&void 0!==r?r:0,this.m_enableLimit=null!==(h=e.enableLimit)&&void 0!==h&&h,this.m_enableMotor=null!==(_=e.enableMotor)&&void 0!==_&&_}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const t=e.positions[this.m_indexA].a,s=e.velocities[this.m_indexA].v;let m=e.velocities[this.m_indexA].w;const l=e.positions[this.m_indexB].a,n=e.velocities[this.m_indexB].v;let r=e.velocities[this.m_indexB].w;const{qA:h,qB:_,lalcA:a,lalcB:c}=o;h.Set(t),_.Set(l),i.b2Rot.MultiplyVec2(h,i.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,a),this.m_rA),i.b2Rot.MultiplyVec2(_,i.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,c),this.m_rB);const p=this.m_invMassA,A=this.m_invMassB,u=this.m_invIA,b=this.m_invIB;let d;if(this.m_K.ex.x=p+A+this.m_rA.y*this.m_rA.y*u+this.m_rB.y*this.m_rB.y*b,this.m_K.ey.x=-this.m_rA.y*this.m_rA.x*u-this.m_rB.y*this.m_rB.x*b,this.m_K.ex.y=this.m_K.ey.x,this.m_K.ey.y=p+A+this.m_rA.x*this.m_rA.x*u+this.m_rB.x*this.m_rB.x*b,this.m_axialMass=u+b,this.m_axialMass>0?(this.m_axialMass=1/this.m_axialMass,d=!1):d=!0,this.m_angle=l-t-this.m_referenceAngle,(!1===this.m_enableLimit||d)&&(this.m_lowerImpulse=0,this.m_upperImpulse=0),(!1===this.m_enableMotor||d)&&(this.m_motorImpulse=0),e.step.warmStarting){this.m_impulse.Scale(e.step.dtRatio),this.m_motorImpulse*=e.step.dtRatio,this.m_lowerImpulse*=e.step.dtRatio,this.m_upperImpulse*=e.step.dtRatio;const t=this.m_motorImpulse+this.m_lowerImpulse-this.m_upperImpulse,l=o.P.Set(this.m_impulse.x,this.m_impulse.y);s.SubtractScaled(p,l),m-=u*(i.b2Vec2.Cross(this.m_rA,l)+t),n.AddScaled(A,l),r+=b*(i.b2Vec2.Cross(this.m_rB,l)+t)}else this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerImpulse=0,this.m_upperImpulse=0;e.velocities[this.m_indexA].w=m,e.velocities[this.m_indexB].w=r}SolveVelocityConstraints(e){const t=e.velocities[this.m_indexA].v;let s=e.velocities[this.m_indexA].w;const m=e.velocities[this.m_indexB].v;let l=e.velocities[this.m_indexB].w;const n=this.m_invMassA,r=this.m_invMassB,h=this.m_invIA,_=this.m_invIB,a=h+_===0;if(this.m_enableMotor&&!a){const t=l-s-this.m_motorSpeed;let o=-this.m_axialMass*t;const m=this.m_motorImpulse,n=e.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=(0,i.b2Clamp)(this.m_motorImpulse+o,-n,n),s-=h*(o=this.m_motorImpulse-m),l+=_*o}if(this.m_enableLimit&&!a){{const t=this.m_angle-this.m_lowerAngle,i=l-s;let o=-this.m_axialMass*(i+Math.max(t,0)*e.step.inv_dt);const m=this.m_lowerImpulse;this.m_lowerImpulse=Math.max(this.m_lowerImpulse+o,0),s-=h*(o=this.m_lowerImpulse-m),l+=_*o}{const t=this.m_upperAngle-this.m_angle,i=s-l;let o=-this.m_axialMass*(i+Math.max(t,0)*e.step.inv_dt);const m=this.m_upperImpulse;this.m_upperImpulse=Math.max(this.m_upperImpulse+o,0),s+=h*(o=this.m_upperImpulse-m),l-=_*o}}{const{Cdot:e,impulse:a}=o;i.b2Vec2.Subtract(i.b2Vec2.AddCrossScalarVec2(m,l,this.m_rB,i.b2Vec2.s_t0),i.b2Vec2.AddCrossScalarVec2(t,s,this.m_rA,i.b2Vec2.s_t1),e),this.m_K.Solve(-e.x,-e.y,a),this.m_impulse.x+=a.x,this.m_impulse.y+=a.y,t.SubtractScaled(n,a),s-=h*i.b2Vec2.Cross(this.m_rA,a),m.AddScaled(r,a),l+=_*i.b2Vec2.Cross(this.m_rB,a)}e.velocities[this.m_indexA].w=s,e.velocities[this.m_indexB].w=l}SolvePositionConstraints(t){const s=t.positions[this.m_indexA].c;let m=t.positions[this.m_indexA].a;const l=t.positions[this.m_indexB].c;let n=t.positions[this.m_indexB].a;const{qA:r,qB:h,lalcA:_,lalcB:a,impulse:c}=o;r.Set(m),h.Set(n);let p=0,A=0;const u=this.m_invIA+this.m_invIB===0;if(this.m_enableLimit&&!u){const t=n-m-this.m_referenceAngle;let s=0;Math.abs(this.m_upperAngle-this.m_lowerAngle)<2*e.b2_angularSlop?s=(0,i.b2Clamp)(t-this.m_lowerAngle,-e.b2_maxAngularCorrection,e.b2_maxAngularCorrection):t<=this.m_lowerAngle?s=(0,i.b2Clamp)(t-this.m_lowerAngle+e.b2_angularSlop,-e.b2_maxAngularCorrection,0):t>=this.m_upperAngle&&(s=(0,i.b2Clamp)(t-this.m_upperAngle-e.b2_angularSlop,0,e.b2_maxAngularCorrection));const o=-this.m_axialMass*s;m-=this.m_invIA*o,n+=this.m_invIB*o,p=Math.abs(s)}{r.Set(m),h.Set(n);const e=i.b2Rot.MultiplyVec2(r,i.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,_),this.m_rA),t=i.b2Rot.MultiplyVec2(h,i.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,a),this.m_rB),p=i.b2Vec2.Add(l,t,o.C).Subtract(s).Subtract(e);A=p.Length();const u=this.m_invMassA,b=this.m_invMassB,d=this.m_invIA,x=this.m_invIB,w=this.m_K;w.ex.x=u+b+d*e.y*e.y+x*t.y*t.y,w.ex.y=-d*e.x*e.y-x*t.x*t.y,w.ey.x=w.ex.y,w.ey.y=u+b+d*e.x*e.x+x*t.x*t.x,w.Solve(p.x,p.y,c).Negate(),s.SubtractScaled(u,c),m-=d*i.b2Vec2.Cross(e,c),l.AddScaled(b,c),n+=x*i.b2Vec2.Cross(t,c)}return t.positions[this.m_indexA].a=m,t.positions[this.m_indexB].a=n,A<=e.b2_linearSlop&&p<=e.b2_angularSlop}GetAnchorA(e){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,e)}GetAnchorB(e){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,e)}GetReactionForce(e,t){return t.x=e*this.m_impulse.x,t.y=e*this.m_impulse.y,t}GetReactionTorque(e){return e*(this.m_motorImpulse+this.m_lowerImpulse-this.m_upperImpulse)}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetReferenceAngle(){return this.m_referenceAngle}GetJointAngle(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle}GetJointSpeed(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(e){return e!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=e),e}GetMotorTorque(e){return e*this.m_motorImpulse}GetMotorSpeed(){return this.m_motorSpeed}SetMaxMotorTorque(e){e!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=e)}GetMaxMotorTorque(){return this.m_maxMotorTorque}IsLimitEnabled(){return this.m_enableLimit}EnableLimit(e){return e!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=e,this.m_lowerImpulse=0,this.m_upperImpulse=0),e}GetLowerLimit(){return this.m_lowerAngle}GetUpperLimit(){return this.m_upperAngle}SetLimits(e,t){e===this.m_lowerAngle&&t===this.m_upperAngle||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerImpulse=0,this.m_upperImpulse=0,this.m_lowerAngle=e,this.m_upperAngle=t)}SetMotorSpeed(e){return e!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=e),e}Draw(e){const{p2:s,r:m,pA:l,pB:n}=o,r=this.m_bodyA.GetTransform(),h=this.m_bodyB.GetTransform();i.b2Transform.MultiplyVec2(r,this.m_localAnchorA,l),i.b2Transform.MultiplyVec2(h,this.m_localAnchorB,n),e.DrawPoint(l,5,t.debugColors.joint4),e.DrawPoint(n,5,t.debugColors.joint5);const _=this.m_bodyA.GetAngle(),a=this.m_bodyB.GetAngle()-_-this.m_referenceAngle;if(m.Set(Math.cos(a),Math.sin(a)).Scale(.5),e.DrawSegment(n,i.b2Vec2.Add(n,m,s),t.debugColors.joint1),e.DrawCircle(n,.5,t.debugColors.joint1),this.m_enableLimit){const{rlo:m,rhi:l}=o;m.Set(Math.cos(this.m_lowerAngle),Math.sin(this.m_lowerAngle)).Scale(.5),l.Set(Math.cos(this.m_upperAngle),Math.sin(this.m_upperAngle)).Scale(.5),e.DrawSegment(n,i.b2Vec2.Add(n,m,s),t.debugColors.joint2),e.DrawSegment(n,i.b2Vec2.Add(n,l,s),t.debugColors.joint3)}e.DrawSegment(r.p,l,t.debugColors.joint6),e.DrawSegment(l,n,t.debugColors.joint6),e.DrawSegment(h.p,n,t.debugColors.joint6)}}exports.b2RevoluteJoint=l;
},{"../common/b2_common":"ReKW","../common/b2_draw":"lvls","../common/b2_math":"cQbL","./b2_joint":"Xq2i"}],"LRlb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2WeldJoint=exports.b2WeldJointDef=void 0;const e=require("../common/b2_common"),t=require("../common/b2_math"),s=require("./b2_joint"),i={qA:new t.b2Rot,qB:new t.b2Rot,rA:new t.b2Vec2,rB:new t.b2Vec2,lalcA:new t.b2Vec2,lalcB:new t.b2Vec2,K:new t.b2Mat33,P:new t.b2Vec2,Cdot1:new t.b2Vec3,impulse1:new t.b2Vec2,impulse:new t.b2Vec3,C1:new t.b2Vec2,C:new t.b2Vec3};class m extends s.b2JointDef{constructor(){super(s.b2JointType.e_weldJoint),this.localAnchorA=new t.b2Vec2,this.localAnchorB=new t.b2Vec2,this.referenceAngle=0,this.stiffness=0,this.damping=0}Initialize(e,t,s){this.bodyA=e,this.bodyB=t,this.bodyA.GetLocalPoint(s,this.localAnchorA),this.bodyB.GetLocalPoint(s,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}exports.b2WeldJointDef=m;class n extends s.b2Joint{constructor(e){var s,i,m,n,c;super(e),this.m_stiffness=0,this.m_damping=0,this.m_bias=0,this.m_localAnchorA=new t.b2Vec2,this.m_localAnchorB=new t.b2Vec2,this.m_referenceAngle=0,this.m_gamma=0,this.m_impulse=new t.b2Vec3,this.m_indexA=0,this.m_indexB=0,this.m_rA=new t.b2Vec2,this.m_rB=new t.b2Vec2,this.m_localCenterA=new t.b2Vec2,this.m_localCenterB=new t.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=new t.b2Mat33,this.m_localAnchorA.Copy(null!==(s=e.localAnchorA)&&void 0!==s?s:t.b2Vec2.ZERO),this.m_localAnchorB.Copy(null!==(i=e.localAnchorB)&&void 0!==i?i:t.b2Vec2.ZERO),this.m_referenceAngle=null!==(m=e.referenceAngle)&&void 0!==m?m:0,this.m_stiffness=null!==(n=e.stiffness)&&void 0!==n?n:0,this.m_damping=null!==(c=e.damping)&&void 0!==c?c:0}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const s=e.positions[this.m_indexA].a,m=e.velocities[this.m_indexA].v;let n=e.velocities[this.m_indexA].w;const c=e.positions[this.m_indexB].a,o=e.velocities[this.m_indexB].v;let h=e.velocities[this.m_indexB].w;const{qA:l,qB:_,lalcA:r,lalcB:a,K:A}=i;l.Set(s),_.Set(c),t.b2Rot.MultiplyVec2(l,t.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,r),this.m_rA),t.b2Rot.MultiplyVec2(_,t.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,a),this.m_rB);const b=this.m_invMassA,d=this.m_invMassB,x=this.m_invIA,y=this.m_invIB;if(A.ex.x=b+d+this.m_rA.y*this.m_rA.y*x+this.m_rB.y*this.m_rB.y*y,A.ey.x=-this.m_rA.y*this.m_rA.x*x-this.m_rB.y*this.m_rB.x*y,A.ez.x=-this.m_rA.y*x-this.m_rB.y*y,A.ex.y=A.ey.x,A.ey.y=b+d+this.m_rA.x*this.m_rA.x*x+this.m_rB.x*this.m_rB.x*y,A.ez.y=this.m_rA.x*x+this.m_rB.x*y,A.ex.z=A.ez.x,A.ey.z=A.ez.y,A.ez.z=x+y,this.m_stiffness>0){A.GetInverse22(this.m_mass);let t=x+y;const i=c-s-this.m_referenceAngle,m=this.m_damping,n=this.m_stiffness,o=e.step.dt;this.m_gamma=o*(m+o*n),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=i*o*n*this.m_gamma,t+=this.m_gamma,this.m_mass.ez.z=0!==t?1/t:0}else 0===A.ez.z?(A.GetInverse22(this.m_mass),this.m_gamma=0,this.m_bias=0):(A.GetSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0);if(e.step.warmStarting){this.m_impulse.Scale(e.step.dtRatio);const{P:s}=i;s.Copy(this.m_impulse),m.SubtractScaled(b,s),n-=x*(t.b2Vec2.Cross(this.m_rA,s)+this.m_impulse.z),o.AddScaled(d,s),h+=y*(t.b2Vec2.Cross(this.m_rB,s)+this.m_impulse.z)}else this.m_impulse.SetZero();e.velocities[this.m_indexA].w=n,e.velocities[this.m_indexB].w=h}SolveVelocityConstraints(e){const s=e.velocities[this.m_indexA].v;let m=e.velocities[this.m_indexA].w;const n=e.velocities[this.m_indexB].v;let c=e.velocities[this.m_indexB].w;const o=this.m_invMassA,h=this.m_invMassB,l=this.m_invIA,_=this.m_invIB;if(this.m_stiffness>0){const e=c-m,r=-this.m_mass.ez.z*(e+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=r,m-=l*r,c+=_*r;const{Cdot1:a,impulse1:A}=i;t.b2Vec2.Subtract(t.b2Vec2.AddCrossScalarVec2(n,c,this.m_rB,t.b2Vec2.s_t0),t.b2Vec2.AddCrossScalarVec2(s,m,this.m_rA,t.b2Vec2.s_t1),a),t.b2Mat33.MultiplyVec2(this.m_mass,a,A).Negate(),this.m_impulse.x+=A.x,this.m_impulse.y+=A.y;const b=A;s.SubtractScaled(o,b),m-=l*t.b2Vec2.Cross(this.m_rA,b),n.AddScaled(h,b),c+=_*t.b2Vec2.Cross(this.m_rB,b)}else{const{Cdot1:e,impulse:r,P:a}=i;t.b2Vec2.Subtract(t.b2Vec2.AddCrossScalarVec2(n,c,this.m_rB,t.b2Vec2.s_t0),t.b2Vec2.AddCrossScalarVec2(s,m,this.m_rA,t.b2Vec2.s_t1),e),e.z=c-m,t.b2Mat33.MultiplyVec3(this.m_mass,e,r).Negate(),this.m_impulse.Add(r),a.Set(r.x,r.y),s.SubtractScaled(o,a),m-=l*(t.b2Vec2.Cross(this.m_rA,a)+r.z),n.AddScaled(h,a),c+=_*(t.b2Vec2.Cross(this.m_rB,a)+r.z)}e.velocities[this.m_indexA].w=m,e.velocities[this.m_indexB].w=c}SolvePositionConstraints(s){const m=s.positions[this.m_indexA].c;let n=s.positions[this.m_indexA].a;const c=s.positions[this.m_indexB].c;let o=s.positions[this.m_indexB].a;const{qA:h,qB:l,lalcA:_,lalcB:r,K:a,C1:A,P:b,rA:d,rB:x}=i;h.Set(n),l.Set(o);const y=this.m_invMassA,u=this.m_invMassB,B=this.m_invIA,p=this.m_invIB;let V,v;if(t.b2Rot.MultiplyVec2(h,t.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,_),d),t.b2Rot.MultiplyVec2(l,t.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,r),x),a.ex.x=y+u+d.y*d.y*B+x.y*x.y*p,a.ey.x=-d.y*d.x*B-x.y*x.x*p,a.ez.x=-d.y*B-x.y*p,a.ex.y=a.ey.x,a.ey.y=y+u+d.x*d.x*B+x.x*x.x*p,a.ez.y=d.x*B+x.x*p,a.ex.z=a.ez.x,a.ey.z=a.ez.y,a.ez.z=B+p,this.m_stiffness>0)t.b2Vec2.Add(c,x,A).Subtract(m).Subtract(d),V=A.Length(),v=0,a.Solve22(A.x,A.y,b).Negate(),m.SubtractScaled(y,b),n-=B*t.b2Vec2.Cross(d,b),c.AddScaled(u,b),o+=p*t.b2Vec2.Cross(x,b);else{t.b2Vec2.Add(c,x,A).Subtract(m).Subtract(d),t.b2Vec2.Subtract(t.b2Vec2.Add(c,x,t.b2Vec2.s_t0),t.b2Vec2.Add(m,d,t.b2Vec2.s_t1),A);const e=o-n-this.m_referenceAngle;V=A.Length(),v=Math.abs(e);const{impulse:s,C:h}=i;h.Set(A.x,A.y,e),a.ez.z>0?a.Solve33(h.x,h.y,h.z,s).Negate():(a.Solve22(A.x,A.y,s).Negate(),s.z=0),b.Copy(s),m.SubtractScaled(y,b),n-=B*(t.b2Vec2.Cross(d,b)+s.z),c.AddScaled(u,b),o+=p*(t.b2Vec2.Cross(x,b)+s.z)}return s.positions[this.m_indexA].a=n,s.positions[this.m_indexB].a=o,V<=e.b2_linearSlop&&v<=e.b2_angularSlop}GetAnchorA(e){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,e)}GetAnchorB(e){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,e)}GetReactionForce(e,t){return t.x=e*this.m_impulse.x,t.y=e*this.m_impulse.y,t}GetReactionTorque(e){return e*this.m_impulse.z}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetReferenceAngle(){return this.m_referenceAngle}SetStiffness(e){this.m_stiffness=e}GetStiffness(){return this.m_stiffness}SetDamping(e){this.m_damping=e}GetDamping(){return this.m_damping}}exports.b2WeldJoint=n;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","./b2_joint":"Xq2i"}],"yJEF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2WheelJoint=exports.b2WheelJointDef=void 0;const t=require("../common/b2_common"),s=require("../common/b2_math"),i=require("./b2_joint"),e=require("../common/b2_draw"),m={qA:new s.b2Rot,qB:new s.b2Rot,lalcA:new s.b2Vec2,lalcB:new s.b2Vec2,rA:new s.b2Vec2,rB:new s.b2Vec2,d:new s.b2Vec2,P:new s.b2Vec2,ay:new s.b2Vec2,pA:new s.b2Vec2,pB:new s.b2Vec2,axis:new s.b2Vec2,Draw:{p1:new s.b2Vec2,p2:new s.b2Vec2,pA:new s.b2Vec2,pB:new s.b2Vec2,axis:new s.b2Vec2,lower:new s.b2Vec2,upper:new s.b2Vec2,perp:new s.b2Vec2}};class o extends i.b2JointDef{constructor(){super(i.b2JointType.e_wheelJoint),this.localAnchorA=new s.b2Vec2,this.localAnchorB=new s.b2Vec2,this.localAxisA=new s.b2Vec2(1,0),this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorTorque=0,this.motorSpeed=0,this.stiffness=0,this.damping=0}Initialize(t,s,i,e){this.bodyA=t,this.bodyB=s,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.bodyA.GetLocalVector(e,this.localAxisA)}}exports.b2WheelJointDef=o;class a extends i.b2Joint{constructor(t){var i,e,m,o,a,l,h,n,_,r,c;super(t),this.m_localAnchorA=new s.b2Vec2,this.m_localAnchorB=new s.b2Vec2,this.m_localXAxisA=new s.b2Vec2,this.m_localYAxisA=new s.b2Vec2,this.m_impulse=0,this.m_motorImpulse=0,this.m_springImpulse=0,this.m_lowerImpulse=0,this.m_upperImpulse=0,this.m_translation=0,this.m_lowerTranslation=0,this.m_upperTranslation=0,this.m_maxMotorTorque=0,this.m_motorSpeed=0,this.m_enableLimit=!1,this.m_enableMotor=!1,this.m_stiffness=0,this.m_damping=0,this.m_indexA=0,this.m_indexB=0,this.m_localCenterA=new s.b2Vec2,this.m_localCenterB=new s.b2Vec2,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_ax=new s.b2Vec2,this.m_ay=new s.b2Vec2,this.m_sAx=0,this.m_sBx=0,this.m_sAy=0,this.m_sBy=0,this.m_mass=0,this.m_motorMass=0,this.m_axialMass=0,this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_localAnchorA.Copy(null!==(i=t.localAnchorA)&&void 0!==i?i:s.b2Vec2.ZERO),this.m_localAnchorB.Copy(null!==(e=t.localAnchorB)&&void 0!==e?e:s.b2Vec2.ZERO),this.m_localXAxisA.Copy(null!==(m=t.localAxisA)&&void 0!==m?m:s.b2Vec2.UNITX),s.b2Vec2.CrossOneVec2(this.m_localXAxisA,this.m_localYAxisA),this.m_lowerTranslation=null!==(o=t.lowerTranslation)&&void 0!==o?o:0,this.m_upperTranslation=null!==(a=t.upperTranslation)&&void 0!==a?a:0,this.m_enableLimit=null!==(l=t.enableLimit)&&void 0!==l&&l,this.m_maxMotorTorque=null!==(h=t.maxMotorTorque)&&void 0!==h?h:0,this.m_motorSpeed=null!==(n=t.motorSpeed)&&void 0!==n?n:0,this.m_enableMotor=null!==(_=t.enableMotor)&&void 0!==_&&_,this.m_ax.SetZero(),this.m_ay.SetZero(),this.m_stiffness=null!==(r=t.stiffness)&&void 0!==r?r:0,this.m_damping=null!==(c=t.damping)&&void 0!==c?c:0}GetMotorSpeed(){return this.m_motorSpeed}GetMaxMotorTorque(){return this.m_maxMotorTorque}SetStiffness(t){this.m_stiffness=t}GetStiffness(){return this.m_stiffness}SetDamping(t){this.m_damping=t}GetDamping(){return this.m_damping}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const i=this.m_invMassA,e=this.m_invMassB,o=this.m_invIA,a=this.m_invIB,l=t.positions[this.m_indexA].c,h=t.positions[this.m_indexA].a,n=t.velocities[this.m_indexA].v;let _=t.velocities[this.m_indexA].w;const r=t.positions[this.m_indexB].c,c=t.positions[this.m_indexB].a,b=t.velocities[this.m_indexB].v;let p=t.velocities[this.m_indexB].w;const{qA:A,qB:u,lalcA:d,lalcB:V,rA:x,rB:S,d:B}=m;A.Set(h),u.Set(c),s.b2Rot.MultiplyVec2(A,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,d),x),s.b2Rot.MultiplyVec2(u,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,V),S),s.b2Vec2.Add(r,S,B).Subtract(l).Subtract(x),s.b2Rot.MultiplyVec2(A,this.m_localYAxisA,this.m_ay),this.m_sAy=s.b2Vec2.Cross(s.b2Vec2.Add(B,x,s.b2Vec2.s_t0),this.m_ay),this.m_sBy=s.b2Vec2.Cross(S,this.m_ay),this.m_mass=i+e+o*this.m_sAy*this.m_sAy+a*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),s.b2Rot.MultiplyVec2(A,this.m_localXAxisA,this.m_ax),this.m_sAx=s.b2Vec2.Cross(s.b2Vec2.Add(B,x,s.b2Vec2.s_t0),this.m_ax),this.m_sBx=s.b2Vec2.Cross(S,this.m_ax);const y=i+e+o*this.m_sAx*this.m_sAx+a*this.m_sBx*this.m_sBx;if(this.m_axialMass=y>0?1/y:0,this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_stiffness>0&&y>0){this.m_springMass=1/y;const i=s.b2Vec2.Dot(B,this.m_ax),e=t.step.dt;this.m_gamma=e*(this.m_damping+e*this.m_stiffness),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=i*e*this.m_stiffness*this.m_gamma,this.m_springMass=y+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}else this.m_springImpulse=0;if(this.m_enableLimit?this.m_translation=s.b2Vec2.Dot(this.m_ax,B):(this.m_lowerImpulse=0,this.m_upperImpulse=0),this.m_enableMotor?(this.m_motorMass=o+a,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),t.step.warmStarting){this.m_impulse*=t.step.dtRatio,this.m_springImpulse*=t.step.dtRatio,this.m_motorImpulse*=t.step.dtRatio;const i=this.m_springImpulse+this.m_lowerImpulse-this.m_upperImpulse,{P:e}=m;s.b2Vec2.Scale(this.m_impulse,this.m_ay,e).AddScaled(i,this.m_ax);const o=this.m_impulse*this.m_sAy+i*this.m_sAx+this.m_motorImpulse,a=this.m_impulse*this.m_sBy+i*this.m_sBx+this.m_motorImpulse;n.SubtractScaled(this.m_invMassA,e),_-=this.m_invIA*o,b.AddScaled(this.m_invMassB,e),p+=this.m_invIB*a}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0,this.m_lowerImpulse=0,this.m_upperImpulse=0;t.velocities[this.m_indexA].w=_,t.velocities[this.m_indexB].w=p}SolveVelocityConstraints(t){const i=this.m_invMassA,e=this.m_invMassB,o=this.m_invIA,a=this.m_invIB,l=t.velocities[this.m_indexA].v;let h=t.velocities[this.m_indexA].w;const n=t.velocities[this.m_indexB].v;let _=t.velocities[this.m_indexB].w;const{P:r}=m;{const t=s.b2Vec2.Dot(this.m_ax,s.b2Vec2.Subtract(n,l,s.b2Vec2.s_t0))+this.m_sBx*_-this.m_sAx*h,m=-this.m_springMass*(t+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=m,s.b2Vec2.Scale(m,this.m_ax,r);const c=m*this.m_sAx,b=m*this.m_sBx;l.SubtractScaled(i,r),h-=o*c,n.AddScaled(e,r),_+=a*b}{const i=_-h-this.m_motorSpeed;let e=-this.m_motorMass*i;const m=this.m_motorImpulse,l=t.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=(0,s.b2Clamp)(this.m_motorImpulse+e,-l,l),h-=o*(e=this.m_motorImpulse-m),_+=a*e}if(this.m_enableLimit){{const m=this.m_translation-this.m_lowerTranslation,c=s.b2Vec2.Dot(this.m_ax,s.b2Vec2.Subtract(n,l,s.b2Vec2.s_t0))+this.m_sBx*_-this.m_sAx*h;let b=-this.m_axialMass*(c+Math.max(m,0)*t.step.inv_dt);const p=this.m_lowerImpulse;this.m_lowerImpulse=Math.max(this.m_lowerImpulse+b,0),b=this.m_lowerImpulse-p,s.b2Vec2.Scale(b,this.m_ax,r);const A=b*this.m_sAx,u=b*this.m_sBx;l.SubtractScaled(i,r),h-=o*A,n.AddScaled(e,r),_+=a*u}{const m=this.m_upperTranslation-this.m_translation,c=s.b2Vec2.Dot(this.m_ax,s.b2Vec2.Subtract(l,n,s.b2Vec2.s_t0))+this.m_sAx*h-this.m_sBx*_;let b=-this.m_axialMass*(c+Math.max(m,0)*t.step.inv_dt);const p=this.m_upperImpulse;this.m_upperImpulse=Math.max(this.m_upperImpulse+b,0),b=this.m_upperImpulse-p,s.b2Vec2.Scale(b,this.m_ax,r);const A=b*this.m_sAx,u=b*this.m_sBx;l.AddScaled(i,r),h+=o*A,n.SubtractScaled(e,r),_-=a*u}}{const t=s.b2Vec2.Dot(this.m_ay,s.b2Vec2.Subtract(n,l,s.b2Vec2.s_t0))+this.m_sBy*_-this.m_sAy*h,m=-this.m_mass*t;this.m_impulse+=m,s.b2Vec2.Scale(m,this.m_ay,r);const c=m*this.m_sAy,b=m*this.m_sBy;l.SubtractScaled(i,r),h-=o*c,n.AddScaled(e,r),_+=a*b}t.velocities[this.m_indexA].w=h,t.velocities[this.m_indexB].w=_}SolvePositionConstraints(i){const e=i.positions[this.m_indexA].c;let o=i.positions[this.m_indexA].a;const a=i.positions[this.m_indexB].c;let l=i.positions[this.m_indexB].a,h=0;const{qA:n,qB:_,lalcA:r,lalcB:c,rA:b,rB:p,d:A,P:u,ay:d}=m;if(this.m_enableLimit){n.Set(o),_.Set(l),s.b2Rot.MultiplyVec2(n,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,r),b),s.b2Rot.MultiplyVec2(_,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,c),p),s.b2Vec2.Subtract(a,e,A).Add(p).Subtract(b);const i=s.b2Rot.MultiplyVec2(n,this.m_localXAxisA,this.m_ax),m=s.b2Vec2.Cross(s.b2Vec2.Add(A,b,s.b2Vec2.s_t0),this.m_ax),d=s.b2Vec2.Cross(p,this.m_ax);let V=0;const x=s.b2Vec2.Dot(i,A);if(Math.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?V=x:x<=this.m_lowerTranslation?V=Math.min(x-this.m_lowerTranslation,0):x>=this.m_upperTranslation&&(V=Math.max(x-this.m_upperTranslation,0)),0!==V){const t=this.m_invMassA+this.m_invMassB+this.m_invIA*m*m+this.m_invIB*d*d;let n=0;0!==t&&(n=-V/t),s.b2Vec2.Scale(n,i,u);const _=n*m,r=n*d;e.SubtractScaled(this.m_invMassA,u),o-=this.m_invIA*_,a.AddScaled(this.m_invMassB,u),l+=this.m_invIB*r,h=Math.abs(V)}}{n.Set(o),_.Set(l),s.b2Rot.MultiplyVec2(n,s.b2Vec2.Subtract(this.m_localAnchorA,this.m_localCenterA,r),b),s.b2Rot.MultiplyVec2(_,s.b2Vec2.Subtract(this.m_localAnchorB,this.m_localCenterB,c),p),s.b2Vec2.Subtract(a,e,A).Add(p).Subtract(b),s.b2Rot.MultiplyVec2(n,this.m_localYAxisA,d);const t=s.b2Vec2.Cross(s.b2Vec2.Add(A,b,s.b2Vec2.s_t0),d),i=s.b2Vec2.Cross(p,d),m=s.b2Vec2.Dot(A,d),V=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;let x=0;0!==V&&(x=-m/V),s.b2Vec2.Scale(x,d,u);const S=x*t,B=x*i;e.SubtractScaled(this.m_invMassA,u),o-=this.m_invIA*S,a.AddScaled(this.m_invMassB,u),l+=this.m_invIB*B,h=Math.max(h,Math.abs(m))}return i.positions[this.m_indexA].a=o,i.positions[this.m_indexB].a=l,h<=t.b2_linearSlop}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,s){const i=this.m_springImpulse+this.m_lowerImpulse-this.m_upperImpulse;return s.x=t*(this.m_impulse*this.m_ay.x+i*this.m_ax.x),s.y=t*(this.m_impulse*this.m_ay.y+i*this.m_ax.y),s}GetReactionTorque(t){return t*this.m_motorImpulse}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetLocalAxisA(){return this.m_localXAxisA}GetJointTranslation(){const t=this.m_bodyA,i=this.m_bodyB,{pA:e,pB:o,d:a,axis:l}=m;return t.GetWorldPoint(this.m_localAnchorA,e),i.GetWorldPoint(this.m_localAnchorB,o),s.b2Vec2.Subtract(o,e,a),t.GetWorldVector(this.m_localXAxisA,l),s.b2Vec2.Dot(a,l)}GetJointLinearSpeed(){const t=this.m_bodyA,i=this.m_bodyB,{rA:e,rB:o,lalcA:a,lalcB:l,axis:h}=m;s.b2Rot.MultiplyVec2(t.m_xf.q,s.b2Vec2.Subtract(this.m_localAnchorA,t.m_sweep.localCenter,a),e),s.b2Rot.MultiplyVec2(i.m_xf.q,s.b2Vec2.Subtract(this.m_localAnchorB,i.m_sweep.localCenter,l),o);const n=s.b2Vec2.Add(t.m_sweep.c,e,s.b2Vec2.s_t0),_=s.b2Vec2.Add(i.m_sweep.c,o,s.b2Vec2.s_t1),r=s.b2Vec2.Subtract(_,n,s.b2Vec2.s_t2);s.b2Rot.MultiplyVec2(t.m_xf.q,this.m_localXAxisA,h);const c=t.m_linearVelocity,b=i.m_linearVelocity,p=t.m_angularVelocity,A=i.m_angularVelocity;return s.b2Vec2.Dot(r,s.b2Vec2.CrossScalarVec2(p,h,s.b2Vec2.s_t0))+s.b2Vec2.Dot(h,s.b2Vec2.AddCrossScalarVec2(b,A,o,s.b2Vec2.s_t0).Subtract(c).Subtract(s.b2Vec2.CrossScalarVec2(p,e,s.b2Vec2.s_t1)))}GetJointAngle(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a}GetJointAngularSpeed(){const t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-t}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(t){return t!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t),t}SetMotorSpeed(t){return t!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t),t}SetMaxMotorTorque(t){t!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=t)}GetMotorTorque(t){return t*this.m_motorImpulse}IsLimitEnabled(){return this.m_enableLimit}EnableLimit(t){return t!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t,this.m_lowerImpulse=0,this.m_upperImpulse=0),t}GetLowerLimit(){return this.m_lowerTranslation}GetUpperLimit(){return this.m_upperTranslation}SetLimits(t,s){t===this.m_lowerTranslation&&s===this.m_upperTranslation||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=s,this.m_lowerImpulse=0,this.m_upperImpulse=0)}Draw(t){const{p1:i,p2:o,pA:a,pB:l,axis:h}=m.Draw,n=this.m_bodyA.GetTransform(),_=this.m_bodyB.GetTransform();if(s.b2Transform.MultiplyVec2(n,this.m_localAnchorA,a),s.b2Transform.MultiplyVec2(_,this.m_localAnchorB,l),s.b2Rot.MultiplyVec2(n.q,this.m_localXAxisA,h),t.DrawSegment(a,l,e.debugColors.joint5),this.m_enableLimit){const{lower:l,upper:_,perp:r}=m.Draw;s.b2Vec2.AddScaled(a,this.m_lowerTranslation,h,l),s.b2Vec2.AddScaled(a,this.m_upperTranslation,h,_),s.b2Rot.MultiplyVec2(n.q,this.m_localYAxisA,r),t.DrawSegment(l,_,e.debugColors.joint1),t.DrawSegment(s.b2Vec2.SubtractScaled(l,.5,r,i),s.b2Vec2.AddScaled(l,.5,r,o),e.debugColors.joint2),t.DrawSegment(s.b2Vec2.SubtractScaled(_,.5,r,i),s.b2Vec2.AddScaled(_,.5,r,o),e.debugColors.joint3)}else t.DrawSegment(s.b2Vec2.Subtract(a,h,i),s.b2Vec2.Add(a,h,o),e.debugColors.joint1);t.DrawPoint(a,5,e.debugColors.joint1),t.DrawPoint(l,5,e.debugColors.joint4)}}exports.b2WheelJoint=a;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","./b2_joint":"Xq2i","../common/b2_draw":"lvls"}],"UQyq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2Contact=exports.b2ContactEdge=exports.b2MixRestitutionThreshold=exports.b2MixRestitution=exports.b2MixFriction=void 0;const t=require("../common/b2_common"),i=require("../collision/b2_collision");function e(t,i){return Math.sqrt(t*i)}function s(t,i){return t>i?t:i}function n(t,i){return t<i?t:i}exports.b2MixFriction=e,exports.b2MixRestitution=s,exports.b2MixRestitutionThreshold=n;class o{constructor(t){this.m_other=null,this.prev=null,this.next=null,this.contact=t}get other(){return(0,t.b2Assert)(null!==this.m_other),this.m_other}set other(i){(0,t.b2Assert)(null===this.m_other),this.m_other=i}Reset(){this.m_other=null,this.prev=null,this.next=null}}exports.b2ContactEdge=o;class h{constructor(){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_prev=null,this.m_next=null,this.m_nodeA=new o(this),this.m_nodeB=new o(this),this.m_indexA=0,this.m_indexB=0,this.m_manifold=new i.b2Manifold,this.m_toiCount=0,this.m_toi=0,this.m_friction=0,this.m_restitution=0,this.m_restitutionThreshold=0,this.m_tangentSpeed=0,this.m_oldManifold=new i.b2Manifold}GetManifold(){return this.m_manifold}GetWorldManifold(t){const i=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody(),s=this.GetShapeA(),n=this.GetShapeB();t.Initialize(this.m_manifold,i.GetTransform(),s.m_radius,e.GetTransform(),n.m_radius)}IsTouching(){return this.m_touchingFlag}SetEnabled(t){this.m_enabledFlag=t}IsEnabled(){return this.m_enabledFlag}GetNext(){return this.m_next}GetFixtureA(){return this.m_fixtureA}GetChildIndexA(){return this.m_indexA}GetShapeA(){return this.m_fixtureA.GetShape()}GetFixtureB(){return this.m_fixtureB}GetChildIndexB(){return this.m_indexB}GetShapeB(){return this.m_fixtureB.GetShape()}FlagForFiltering(){this.m_filterFlag=!0}SetFriction(t){this.m_friction=t}GetFriction(){return this.m_friction}ResetFriction(){this.m_friction=e(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)}SetRestitution(t){this.m_restitution=t}GetRestitution(){return this.m_restitution}ResetRestitution(){this.m_restitution=s(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)}SetRestitutionThreshold(t){this.m_restitutionThreshold=t}GetRestitutionThreshold(){return this.m_restitutionThreshold}ResetRestitutionThreshold(){this.m_restitutionThreshold=n(this.m_fixtureA.m_restitutionThreshold,this.m_fixtureB.m_restitutionThreshold)}SetTangentSpeed(t){this.m_tangentSpeed=t}GetTangentSpeed(){return this.m_tangentSpeed}Reset(t,i,o,h){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!0,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_fixtureA=t,this.m_fixtureB=o,this.m_indexA=i,this.m_indexB=h,this.m_manifold.pointCount=0,this.m_prev=null,this.m_next=null,this.m_nodeA.Reset(),this.m_nodeB.Reset(),this.m_toiCount=0,this.m_friction=e(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=s(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution),this.m_restitutionThreshold=n(this.m_fixtureA.m_restitutionThreshold,this.m_fixtureB.m_restitutionThreshold)}Update(t){const e=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=e,this.m_enabledFlag=!0;let s=!1;const n=this.m_touchingFlag,o=this.m_fixtureA.IsSensor(),h=this.m_fixtureB.IsSensor(),r=o||h,m=this.m_fixtureA.GetBody(),l=this.m_fixtureB.GetBody(),_=m.GetTransform(),u=l.GetTransform();if(r){const t=this.GetShapeA(),e=this.GetShapeB();s=(0,i.b2TestOverlap)(t,this.m_indexA,e,this.m_indexB,_,u),this.m_manifold.pointCount=0}else{this.Evaluate(this.m_manifold,_,u),s=this.m_manifold.pointCount>0;for(let t=0;t<this.m_manifold.pointCount;++t){const i=this.m_manifold.points[t];i.normalImpulse=0,i.tangentImpulse=0;const e=i.id;for(let t=0;t<this.m_oldManifold.pointCount;++t){const s=this.m_oldManifold.points[t];if(s.id.key===e.key){i.normalImpulse=s.normalImpulse,i.tangentImpulse=s.tangentImpulse;break}}}s!==n&&(m.SetAwake(!0),l.SetAwake(!0))}this.m_touchingFlag=s,!n&&s&&t&&t.BeginContact(this),n&&!s&&t&&t.EndContact(this),!r&&s&&t&&t.PreSolve(this,this.m_oldManifold)}}exports.b2Contact=h;
},{"../common/b2_common":"ReKW","../collision/b2_collision":"PKgf"}],"Rrpm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2CircleContact=void 0;const e=require("../collision/b2_collide_circle"),t=require("./b2_contact");class c extends t.b2Contact{Evaluate(t,c,i){(0,e.b2CollideCircles)(t,this.GetShapeA(),c,this.GetShapeB(),i)}}exports.b2CircleContact=c;
},{"../collision/b2_collide_circle":"DoJb","./b2_contact":"UQyq"}],"OG4W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2PolygonContact=void 0;const e=require("../collision/b2_collide_polygon"),o=require("./b2_contact");class t extends o.b2Contact{Evaluate(o,t,l){(0,e.b2CollidePolygons)(o,this.GetShapeA(),t,this.GetShapeB(),l)}}exports.b2PolygonContact=t;
},{"../collision/b2_collide_polygon":"nWAU","./b2_contact":"UQyq"}],"e4Qu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2PolygonAndCircleContact=void 0;const e=require("../collision/b2_collide_circle"),t=require("./b2_contact");class o extends t.b2Contact{Evaluate(t,o,l){(0,e.b2CollidePolygonAndCircle)(t,this.GetShapeA(),o,this.GetShapeB(),l)}}exports.b2PolygonAndCircleContact=o;
},{"../collision/b2_collide_circle":"DoJb","./b2_contact":"UQyq"}],"ycyC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2EdgeAndCircleContact=void 0;const e=require("../collision/b2_collide_edge"),t=require("./b2_contact");class o extends t.b2Contact{Evaluate(t,o,c){(0,e.b2CollideEdgeAndCircle)(t,this.GetShapeA(),o,this.GetShapeB(),c)}}exports.b2EdgeAndCircleContact=o;
},{"../collision/b2_collide_edge":"bTYS","./b2_contact":"UQyq"}],"eBtq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2EdgeAndPolygonContact=void 0;const e=require("../collision/b2_collide_edge"),t=require("./b2_contact");class o extends t.b2Contact{Evaluate(t,o,n){(0,e.b2CollideEdgeAndPolygon)(t,this.GetShapeA(),o,this.GetShapeB(),n)}}exports.b2EdgeAndPolygonContact=o;
},{"../collision/b2_collide_edge":"bTYS","./b2_contact":"UQyq"}],"fgka":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2ChainAndCircleContact=void 0;const e=require("../collision/b2_collide_edge"),t=require("../collision/b2_edge_shape"),i=require("./b2_contact");class s extends i.b2Contact{Evaluate(t,i,a){const d=s.Evaluate_s_edge;this.GetShapeA().GetChildEdge(d,this.m_indexA),(0,e.b2CollideEdgeAndCircle)(t,d,i,this.GetShapeB(),a)}}exports.b2ChainAndCircleContact=s,s.Evaluate_s_edge=new t.b2EdgeShape;
},{"../collision/b2_collide_edge":"bTYS","../collision/b2_edge_shape":"OKJP","./b2_contact":"UQyq"}],"WjvU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2ChainAndPolygonContact=void 0;const e=require("../collision/b2_collide_edge"),t=require("../collision/b2_edge_shape"),o=require("./b2_contact");class n extends o.b2Contact{Evaluate(t,o,i){const s=n.Evaluate_s_edge;this.GetShapeA().GetChildEdge(s,this.m_indexA),(0,e.b2CollideEdgeAndPolygon)(t,s,o,this.GetShapeB(),i)}}exports.b2ChainAndPolygonContact=n,n.Evaluate_s_edge=new t.b2EdgeShape;
},{"../collision/b2_collide_edge":"bTYS","../collision/b2_edge_shape":"OKJP","./b2_contact":"UQyq"}],"FpyL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2ContactFactory=void 0;const e=require("../collision/b2_shape"),t=require("./b2_circle_contact"),c=require("./b2_polygon_contact"),o=require("./b2_polygon_circle_contact"),r=require("./b2_edge_circle_contact"),n=require("./b2_edge_polygon_contact"),p=require("./b2_chain_circle_contact"),y=require("./b2_chain_polygon_contact");class i{constructor(){const i=new Array(e.b2ShapeType.e_typeCount);for(let t=0;t<e.b2ShapeType.e_typeCount;t++)i[t]=new Array(e.b2ShapeType.e_typeCount);this.m_registers=i,this.AddType(t.b2CircleContact,e.b2ShapeType.e_circle,e.b2ShapeType.e_circle),this.AddType(o.b2PolygonAndCircleContact,e.b2ShapeType.e_polygon,e.b2ShapeType.e_circle),this.AddType(c.b2PolygonContact,e.b2ShapeType.e_polygon,e.b2ShapeType.e_polygon),this.AddType(r.b2EdgeAndCircleContact,e.b2ShapeType.e_edge,e.b2ShapeType.e_circle),this.AddType(n.b2EdgeAndPolygonContact,e.b2ShapeType.e_edge,e.b2ShapeType.e_polygon),this.AddType(p.b2ChainAndCircleContact,e.b2ShapeType.e_chain,e.b2ShapeType.e_circle),this.AddType(y.b2ChainAndPolygonContact,e.b2ShapeType.e_chain,e.b2ShapeType.e_polygon)}AddType(e,t,c){const o=[],r=e=>{o.push(e)};this.m_registers[t][c]={createFcn(t,c,r,n){var p;const y=null!==(p=o.pop())&&void 0!==p?p:new e;return y.Reset(t,c,r,n),y},destroyFcn:r},t!==c&&(this.m_registers[c][t]={createFcn(t,c,r,n){var p;const y=null!==(p=o.pop())&&void 0!==p?p:new e;return y.Reset(r,n,t,c),y},destroyFcn:r})}Create(e,t,c,o){const r=e.GetType(),n=c.GetType(),p=this.m_registers[r][n];return p?p.createFcn(e,t,c,o):null}Destroy(e){const t=e.m_fixtureA.GetType(),c=e.m_fixtureB.GetType(),o=this.m_registers[t][c];null==o||o.destroyFcn(e)}}exports.b2ContactFactory=i;
},{"../collision/b2_shape":"stUN","./b2_circle_contact":"Rrpm","./b2_polygon_contact":"OG4W","./b2_polygon_circle_contact":"e4Qu","./b2_edge_circle_contact":"ycyC","./b2_edge_polygon_contact":"eBtq","./b2_chain_circle_contact":"fgka","./b2_chain_polygon_contact":"WjvU"}],"G1MF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2ContactListener=exports.b2ContactImpulse=exports.b2ContactFilter=exports.b2DestructionListener=void 0;const t=require("../common/b2_common");class e{SayGoodbyeJoint(t){}SayGoodbyeFixture(t){}}exports.b2DestructionListener=e;class o{ShouldCollide(t,e){const o=t.GetFilterData(),s=e.GetFilterData();return o.groupIndex===s.groupIndex&&0!==o.groupIndex?o.groupIndex>0:0!=(o.maskBits&s.categoryBits)&&0!=(o.categoryBits&s.maskBits)}}exports.b2ContactFilter=o,o.b2_defaultFilter=new o;class s{constructor(){this.normalImpulses=(0,t.b2MakeNumberArray)(t.b2_maxManifoldPoints),this.tangentImpulses=(0,t.b2MakeNumberArray)(t.b2_maxManifoldPoints),this.count=0}}exports.b2ContactImpulse=s;class r{BeginContact(t){}EndContact(t){}PreSolve(t,e){}PostSolve(t,e){}}exports.b2ContactListener=r,r.b2_defaultListener=new r;
},{"../common/b2_common":"ReKW"}],"PdJY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2ContactManager=void 0;const t=require("../collision/b2_broad_phase"),e=require("./b2_contact_factory"),n=require("./b2_body"),o=require("./b2_world_callbacks");class i{constructor(){this.m_broadPhase=new t.b2BroadPhase,this.m_contactList=null,this.m_contactCount=0,this.m_contactFilter=o.b2ContactFilter.b2_defaultFilter,this.m_contactListener=o.b2ContactListener.b2_defaultListener,this.m_contactFactory=new e.b2ContactFactory,this.AddPair=((t,e)=>{let n=t.fixture,o=e.fixture,i=t.childIndex,c=e.childIndex,r=n.GetBody(),_=o.GetBody();if(r===_)return;let s=_.GetContactList();for(;s;){if(s.other===r){const t=s.contact.GetFixtureA(),e=s.contact.GetFixtureB(),r=s.contact.GetChildIndexA(),_=s.contact.GetChildIndexB();if(t===n&&e===o&&r===i&&_===c)return;if(t===o&&e===n&&r===c&&_===i)return}s=s.next}if(!1===_.ShouldCollide(r))return;if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(n,o))return;const a=this.m_contactFactory.Create(n,i,o,c);null!==a&&(n=a.GetFixtureA(),o=a.GetFixtureB(),i=a.GetChildIndexA(),c=a.GetChildIndexB(),r=n.m_body,_=o.m_body,a.m_prev=null,a.m_next=this.m_contactList,null!==this.m_contactList&&(this.m_contactList.m_prev=a),this.m_contactList=a,a.m_nodeA.other=_,a.m_nodeA.prev=null,a.m_nodeA.next=r.m_contactList,null!==r.m_contactList&&(r.m_contactList.prev=a.m_nodeA),r.m_contactList=a.m_nodeA,a.m_nodeB.other=r,a.m_nodeB.prev=null,a.m_nodeB.next=_.m_contactList,null!==_.m_contactList&&(_.m_contactList.prev=a.m_nodeB),_.m_contactList=a.m_nodeB,++this.m_contactCount)})}FindNewContacts(){this.m_broadPhase.UpdatePairs(this.AddPair)}Destroy(t){const e=t.GetFixtureA(),n=t.GetFixtureB(),o=e.GetBody(),i=n.GetBody();this.m_contactListener&&t.IsTouching()&&this.m_contactListener.EndContact(t),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_contactList&&(this.m_contactList=t.m_next),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA===o.m_contactList&&(o.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB===i.m_contactList&&(i.m_contactList=t.m_nodeB.next),t.m_manifold.pointCount>0&&!e.IsSensor()&&!n.IsSensor()&&(e.GetBody().SetAwake(!0),n.GetBody().SetAwake(!0)),this.m_contactFactory.Destroy(t),--this.m_contactCount}Collide(){let t=this.m_contactList;for(;t;){const e=t.GetFixtureA(),o=t.GetFixtureB(),i=t.GetChildIndexA(),c=t.GetChildIndexB(),r=e.GetBody(),_=o.GetBody();if(t.m_filterFlag){if(!_.ShouldCollide(r)||this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(e,o)){const e=t;t=e.m_next,this.Destroy(e);continue}t.m_filterFlag=!1}const s=r.IsAwake()&&r.m_type!==n.b2BodyType.b2_staticBody,a=_.IsAwake()&&_.m_type!==n.b2BodyType.b2_staticBody;if(!s&&!a){t=t.m_next;continue}const m=e.m_proxies[i].treeNode,d=o.m_proxies[c].treeNode;if(m.aabb.TestOverlap(d.aabb))t.Update(this.m_contactListener),t=t.m_next;else{const e=t;t=e.m_next,this.Destroy(e)}}}}exports.b2ContactManager=i;
},{"../collision/b2_broad_phase":"q2ad","./b2_contact_factory":"FpyL","./b2_body":"rONj","./b2_world_callbacks":"G1MF"}],"w6W3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2SolverData=exports.b2Velocity=exports.b2Position=exports.b2TimeStep=exports.b2Profile=void 0;const t=require("../common/b2_math");class s{constructor(){this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0}Reset(){return this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0,this}}exports.b2Profile=s;class i{constructor(){this.dt=0,this.inv_dt=0,this.dtRatio=0,this.config={velocityIterations:0,positionIterations:0},this.warmStarting=!1}static Create(){return new i}Copy(t){return this.dt=t.dt,this.inv_dt=t.inv_dt,this.dtRatio=t.dtRatio,this.config={...t.config},this.warmStarting=t.warmStarting,this}}exports.b2TimeStep=i;class o{constructor(){this.c=new t.b2Vec2,this.a=0}}exports.b2Position=o;class e{constructor(){this.v=new t.b2Vec2,this.w=0}}exports.b2Velocity=e;class r{constructor(){this.step=i.Create()}}exports.b2SolverData=r;
},{"../common/b2_math":"cQbL"}],"DnH3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2ContactSolver=exports.b2ContactSolverDef=exports.b2ContactVelocityConstraint=exports.b2GetBlockSolve=exports.b2SetBlockSolve=void 0;const t=require("../common/b2_common"),s=require("../common/b2_math"),o=require("../collision/b2_collision"),e=require("./b2_time_step");let i=!0;function n(t){i=t}function a(){return i}exports.b2SetBlockSolve=n,exports.b2GetBlockSolve=a;class c{constructor(){this.rA=new s.b2Vec2,this.rB=new s.b2Vec2,this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}}class r{constructor(){this.points=(0,t.b2MakeArray)(t.b2_maxManifoldPoints,c),this.normal=new s.b2Vec2,this.tangent=new s.b2Vec2,this.normalMass=new s.b2Mat22,this.K=new s.b2Mat22,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.invIA=0,this.invIB=0,this.friction=0,this.restitution=0,this.threshold=0,this.tangentSpeed=0,this.pointCount=0,this.contactIndex=0}}exports.b2ContactVelocityConstraint=r;class l{constructor(){this.localPoints=(0,t.b2MakeArray)(t.b2_maxManifoldPoints,s.b2Vec2),this.localNormal=new s.b2Vec2,this.localPoint=new s.b2Vec2,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.localCenterA=new s.b2Vec2,this.localCenterB=new s.b2Vec2,this.invIA=0,this.invIB=0,this.type=o.b2ManifoldType.e_circles,this.radiusA=0,this.radiusB=0,this.pointCount=0}}class _{constructor(){this.step=e.b2TimeStep.Create(),this.count=0}}exports.b2ContactSolverDef=_;class b{constructor(){this.normal=new s.b2Vec2,this.point=new s.b2Vec2,this.separation=0}Initialize(t,e,i,n){const a=b.Initialize_s_pointA,c=b.Initialize_s_pointB,r=b.Initialize_s_planePoint,l=b.Initialize_s_clipPoint;switch(t.type){case o.b2ManifoldType.e_circles:s.b2Transform.MultiplyVec2(e,t.localPoint,a),s.b2Transform.MultiplyVec2(i,t.localPoints[0],c),s.b2Vec2.Subtract(c,a,this.normal).Normalize(),s.b2Vec2.Mid(a,c,this.point),this.separation=s.b2Vec2.Dot(s.b2Vec2.Subtract(c,a,s.b2Vec2.s_t0),this.normal)-t.radiusA-t.radiusB;break;case o.b2ManifoldType.e_faceA:s.b2Rot.MultiplyVec2(e.q,t.localNormal,this.normal),s.b2Transform.MultiplyVec2(e,t.localPoint,r),s.b2Transform.MultiplyVec2(i,t.localPoints[n],l),this.separation=s.b2Vec2.Dot(s.b2Vec2.Subtract(l,r,s.b2Vec2.s_t0),this.normal)-t.radiusA-t.radiusB,this.point.Copy(l);break;case o.b2ManifoldType.e_faceB:s.b2Rot.MultiplyVec2(i.q,t.localNormal,this.normal),s.b2Transform.MultiplyVec2(i,t.localPoint,r),s.b2Transform.MultiplyVec2(e,t.localPoints[n],l),this.separation=s.b2Vec2.Dot(s.b2Vec2.Subtract(l,r,s.b2Vec2.s_t0),this.normal)-t.radiusA-t.radiusB,this.point.Copy(l),this.normal.Negate()}}}b.Initialize_s_pointA=new s.b2Vec2,b.Initialize_s_pointB=new s.b2Vec2,b.Initialize_s_planePoint=new s.b2Vec2,b.Initialize_s_clipPoint=new s.b2Vec2;class m{constructor(){this.m_step=e.b2TimeStep.Create(),this.m_positionConstraints=(0,t.b2MakeArray)(1024,l),this.m_velocityConstraints=(0,t.b2MakeArray)(1024,r),this.m_count=0}Initialize(t){if(this.m_step.Copy(t.step),this.m_count=t.count,this.m_positionConstraints.length<this.m_count){const t=Math.max(2*this.m_positionConstraints.length,this.m_count);for(;this.m_positionConstraints.length<t;)this.m_positionConstraints[this.m_positionConstraints.length]=new l}if(this.m_velocityConstraints.length<this.m_count){const t=Math.max(2*this.m_velocityConstraints.length,this.m_count);for(;this.m_velocityConstraints.length<t;)this.m_velocityConstraints[this.m_velocityConstraints.length]=new r}this.m_positions=t.positions,this.m_velocities=t.velocities,this.m_contacts=t.contacts;for(let s=0;s<this.m_count;++s){const t=this.m_contacts[s],o=t.m_fixtureA,e=t.m_fixtureB,i=o.GetShape(),n=e.GetShape(),a=i.m_radius,c=n.m_radius,r=o.GetBody(),l=e.GetBody(),_=t.GetManifold(),{pointCount:b}=_,m=this.m_velocityConstraints[s];m.friction=t.m_friction,m.restitution=t.m_restitution,m.threshold=t.m_restitutionThreshold,m.tangentSpeed=t.m_tangentSpeed,m.indexA=r.m_islandIndex,m.indexB=l.m_islandIndex,m.invMassA=r.m_invMass,m.invMassB=l.m_invMass,m.invIA=r.m_invI,m.invIB=l.m_invI,m.contactIndex=s,m.pointCount=b,m.K.SetZero(),m.normalMass.SetZero();const V=this.m_positionConstraints[s];V.indexA=r.m_islandIndex,V.indexB=l.m_islandIndex,V.invMassA=r.m_invMass,V.invMassB=l.m_invMass,V.localCenterA.Copy(r.m_sweep.localCenter),V.localCenterB.Copy(l.m_sweep.localCenter),V.invIA=r.m_invI,V.invIB=l.m_invI,V.localNormal.Copy(_.localNormal),V.localPoint.Copy(_.localPoint),V.pointCount=b,V.radiusA=a,V.radiusB=c,V.type=_.type;for(let s=0;s<b;++s){const t=_.points[s],o=m.points[s];this.m_step.warmStarting?(o.normalImpulse=this.m_step.dtRatio*t.normalImpulse,o.tangentImpulse=this.m_step.dtRatio*t.tangentImpulse):(o.normalImpulse=0,o.tangentImpulse=0),o.rA.SetZero(),o.rB.SetZero(),o.normalMass=0,o.tangentMass=0,o.velocityBias=0,V.localPoints[s].Copy(t.localPoint)}}return this}InitializeVelocityConstraints(){const t=m.InitializeVelocityConstraints_s_xfA,o=m.InitializeVelocityConstraints_s_xfB,e=m.InitializeVelocityConstraints_s_worldManifold;for(let n=0;n<this.m_count;++n){const a=this.m_velocityConstraints[n],c=this.m_positionConstraints[n],{radiusA:r,radiusB:l,localCenterA:_,localCenterB:b}=c,m=this.m_contacts[a.contactIndex].GetManifold(),{indexA:V,indexB:p,tangent:C,pointCount:S}=a,h=a.invMassA,u=a.invMassB,v=a.invIA,d=a.invIB,y=this.m_positions[V].c,A=this.m_positions[V].a,I=this.m_velocities[V].v,B=this.m_velocities[V].w,x=this.m_positions[p].c,M=this.m_positions[p].a,f=this.m_velocities[p].v,w=this.m_velocities[p].w;t.q.Set(A),o.q.Set(M),s.b2Vec2.Subtract(y,s.b2Rot.MultiplyVec2(t.q,_,s.b2Vec2.s_t0),t.p),s.b2Vec2.Subtract(x,s.b2Rot.MultiplyVec2(o.q,b,s.b2Vec2.s_t0),o.p),e.Initialize(m,t,r,o,l),a.normal.Copy(e.normal),s.b2Vec2.CrossVec2One(a.normal,C);for(let t=0;t<S;++t){const o=a.points[t];s.b2Vec2.Subtract(e.points[t],y,o.rA),s.b2Vec2.Subtract(e.points[t],x,o.rB);const i=s.b2Vec2.Cross(o.rA,a.normal),n=s.b2Vec2.Cross(o.rB,a.normal),c=h+u+v*i*i+d*n*n;o.normalMass=c>0?1/c:0;const r=s.b2Vec2.Cross(o.rA,C),l=s.b2Vec2.Cross(o.rB,C),_=h+u+v*r*r+d*l*l;o.tangentMass=_>0?1/_:0,o.velocityBias=0;const b=s.b2Vec2.Dot(a.normal,s.b2Vec2.Subtract(s.b2Vec2.AddCrossScalarVec2(f,w,o.rB,s.b2Vec2.s_t0),s.b2Vec2.AddCrossScalarVec2(I,B,o.rA,s.b2Vec2.s_t1),s.b2Vec2.s_t0));b<-a.threshold&&(o.velocityBias=-a.restitution*b)}if(2===a.pointCount&&i){const t=a.points[0],o=a.points[1],e=s.b2Vec2.Cross(t.rA,a.normal),i=s.b2Vec2.Cross(t.rB,a.normal),n=s.b2Vec2.Cross(o.rA,a.normal),c=s.b2Vec2.Cross(o.rB,a.normal),r=h+u+v*e*e+d*i*i,l=h+u+v*n*n+d*c*c,_=h+u+v*e*n+d*i*c;r*r<1e3*(r*l-_*_)?(a.K.ex.Set(r,_),a.K.ey.Set(_,l),a.K.GetInverse(a.normalMass)):a.pointCount=1}}}WarmStart(){const t=m.WarmStart_s_P;for(let o=0;o<this.m_count;++o){const e=this.m_velocityConstraints[o],{indexA:i,indexB:n,pointCount:a,normal:c,tangent:r}=e,l=e.invMassA,_=e.invIA,b=e.invMassB,m=e.invIB,V=this.m_velocities[i].v;let p=this.m_velocities[i].w;const C=this.m_velocities[n].v;let S=this.m_velocities[n].w;for(let o=0;o<a;++o){const i=e.points[o];s.b2Vec2.Add(s.b2Vec2.Scale(i.normalImpulse,c,s.b2Vec2.s_t0),s.b2Vec2.Scale(i.tangentImpulse,r,s.b2Vec2.s_t1),t),p-=_*s.b2Vec2.Cross(i.rA,t),V.SubtractScaled(l,t),S+=m*s.b2Vec2.Cross(i.rB,t),C.AddScaled(b,t)}this.m_velocities[i].w=p,this.m_velocities[n].w=S}}SolveVelocityConstraints(){const t=m.SolveVelocityConstraints_s_dv,o=m.SolveVelocityConstraints_s_dv1,e=m.SolveVelocityConstraints_s_dv2,n=m.SolveVelocityConstraints_s_P,a=m.SolveVelocityConstraints_s_a,c=m.SolveVelocityConstraints_s_b,r=m.SolveVelocityConstraints_s_x,l=m.SolveVelocityConstraints_s_d,_=m.SolveVelocityConstraints_s_P1,b=m.SolveVelocityConstraints_s_P2,V=m.SolveVelocityConstraints_s_P1P2;for(let m=0;m<this.m_count;++m){const p=this.m_velocityConstraints[m],{indexA:C,indexB:S,pointCount:h,normal:u,tangent:v,friction:d}=p,y=p.invMassA,A=p.invIA,I=p.invMassB,B=p.invIB,x=this.m_velocities[C].v;let M=this.m_velocities[C].w;const f=this.m_velocities[S].v;let w=this.m_velocities[S].w;for(let o=0;o<h;++o){const e=p.points[o];s.b2Vec2.Subtract(s.b2Vec2.AddCrossScalarVec2(f,w,e.rB,s.b2Vec2.s_t0),s.b2Vec2.AddCrossScalarVec2(x,M,e.rA,s.b2Vec2.s_t1),t);const i=s.b2Vec2.Dot(t,v)-p.tangentSpeed;let a=e.tangentMass*-i;const c=d*e.normalImpulse,r=(0,s.b2Clamp)(e.tangentImpulse+a,-c,c);a=r-e.tangentImpulse,e.tangentImpulse=r,s.b2Vec2.Scale(a,v,n),x.SubtractScaled(y,n),M-=A*s.b2Vec2.Cross(e.rA,n),f.AddScaled(I,n),w+=B*s.b2Vec2.Cross(e.rB,n)}if(1===p.pointCount||!1===i)for(let o=0;o<h;++o){const e=p.points[o];s.b2Vec2.Subtract(s.b2Vec2.AddCrossScalarVec2(f,w,e.rB,s.b2Vec2.s_t0),s.b2Vec2.AddCrossScalarVec2(x,M,e.rA,s.b2Vec2.s_t1),t);const i=s.b2Vec2.Dot(t,u);let a=-e.normalMass*(i-e.velocityBias);const c=Math.max(e.normalImpulse+a,0);a=c-e.normalImpulse,e.normalImpulse=c,s.b2Vec2.Scale(a,u,n),x.SubtractScaled(y,n),M-=A*s.b2Vec2.Cross(e.rA,n),f.AddScaled(I,n),w+=B*s.b2Vec2.Cross(e.rB,n)}else{const t=p.points[0],i=p.points[1];a.Set(t.normalImpulse,i.normalImpulse),s.b2Vec2.Subtract(s.b2Vec2.AddCrossScalarVec2(f,w,t.rB,s.b2Vec2.s_t0),s.b2Vec2.AddCrossScalarVec2(x,M,t.rA,s.b2Vec2.s_t1),o),s.b2Vec2.Subtract(s.b2Vec2.AddCrossScalarVec2(f,w,i.rB,s.b2Vec2.s_t0),s.b2Vec2.AddCrossScalarVec2(x,M,i.rA,s.b2Vec2.s_t1),e);let n=s.b2Vec2.Dot(o,u),m=s.b2Vec2.Dot(e,u);for(c.x=n-t.velocityBias,c.y=m-i.velocityBias,c.Subtract(s.b2Mat22.MultiplyVec2(p.K,a,s.b2Vec2.s_t0));;){if(s.b2Mat22.MultiplyVec2(p.normalMass,c,r).Negate(),r.x>=0&&r.y>=0){s.b2Vec2.Subtract(r,a,l),s.b2Vec2.Scale(l.x,u,_),s.b2Vec2.Scale(l.y,u,b),s.b2Vec2.Add(_,b,V),x.SubtractScaled(y,V),M-=A*(s.b2Vec2.Cross(t.rA,_)+s.b2Vec2.Cross(i.rA,b)),f.AddScaled(I,V),w+=B*(s.b2Vec2.Cross(t.rB,_)+s.b2Vec2.Cross(i.rB,b)),t.normalImpulse=r.x,i.normalImpulse=r.y;break}if(r.x=-t.normalMass*c.x,r.y=0,n=0,m=p.K.ex.y*r.x+c.y,r.x>=0&&m>=0){s.b2Vec2.Subtract(r,a,l),s.b2Vec2.Scale(l.x,u,_),s.b2Vec2.Scale(l.y,u,b),s.b2Vec2.Add(_,b,V),x.SubtractScaled(y,V),M-=A*(s.b2Vec2.Cross(t.rA,_)+s.b2Vec2.Cross(i.rA,b)),f.AddScaled(I,V),w+=B*(s.b2Vec2.Cross(t.rB,_)+s.b2Vec2.Cross(i.rB,b)),t.normalImpulse=r.x,i.normalImpulse=r.y;break}if(r.x=0,r.y=-i.normalMass*c.y,n=p.K.ey.x*r.y+c.x,m=0,r.y>=0&&n>=0){s.b2Vec2.Subtract(r,a,l),s.b2Vec2.Scale(l.x,u,_),s.b2Vec2.Scale(l.y,u,b),s.b2Vec2.Add(_,b,V),x.SubtractScaled(y,V),M-=A*(s.b2Vec2.Cross(t.rA,_)+s.b2Vec2.Cross(i.rA,b)),f.AddScaled(I,V),w+=B*(s.b2Vec2.Cross(t.rB,_)+s.b2Vec2.Cross(i.rB,b)),t.normalImpulse=r.x,i.normalImpulse=r.y;break}if(r.x=0,r.y=0,n=c.x,m=c.y,n>=0&&m>=0){s.b2Vec2.Subtract(r,a,l),s.b2Vec2.Scale(l.x,u,_),s.b2Vec2.Scale(l.y,u,b),s.b2Vec2.Add(_,b,V),x.SubtractScaled(y,V),M-=A*(s.b2Vec2.Cross(t.rA,_)+s.b2Vec2.Cross(i.rA,b)),f.AddScaled(I,V),w+=B*(s.b2Vec2.Cross(t.rB,_)+s.b2Vec2.Cross(i.rB,b)),t.normalImpulse=r.x,i.normalImpulse=r.y;break}break}}this.m_velocities[C].w=M,this.m_velocities[S].w=w}}StoreImpulses(){for(let t=0;t<this.m_count;++t){const s=this.m_velocityConstraints[t],o=this.m_contacts[s.contactIndex].GetManifold();for(let t=0;t<s.pointCount;++t)o.points[t].normalImpulse=s.points[t].normalImpulse,o.points[t].tangentImpulse=s.points[t].tangentImpulse}}SolvePositionConstraints(){const o=m.SolvePositionConstraints_s_xfA,e=m.SolvePositionConstraints_s_xfB,i=m.SolvePositionConstraints_s_psm,n=m.SolvePositionConstraints_s_rA,a=m.SolvePositionConstraints_s_rB,c=m.SolvePositionConstraints_s_P;let r=0;for(let l=0;l<this.m_count;++l){const _=this.m_positionConstraints[l],{indexA:b,indexB:m,localCenterA:V,localCenterB:p,pointCount:C}=_,S=_.invMassA,h=_.invIA,u=_.invMassB,v=_.invIB,d=this.m_positions[b].c;let y=this.m_positions[b].a;const A=this.m_positions[m].c;let I=this.m_positions[m].a;for(let l=0;l<C;++l){o.q.Set(y),e.q.Set(I),s.b2Vec2.Subtract(d,s.b2Rot.MultiplyVec2(o.q,V,s.b2Vec2.s_t0),o.p),s.b2Vec2.Subtract(A,s.b2Rot.MultiplyVec2(e.q,p,s.b2Vec2.s_t0),e.p),i.Initialize(_,o,e,l);const{normal:b,point:m,separation:C}=i;s.b2Vec2.Subtract(m,d,n),s.b2Vec2.Subtract(m,A,a),r=Math.min(r,C);const B=(0,s.b2Clamp)(t.b2_baumgarte*(C+t.b2_linearSlop),-t.b2_maxLinearCorrection,0),x=s.b2Vec2.Cross(n,b),M=s.b2Vec2.Cross(a,b),f=S+u+h*x*x+v*M*M,w=f>0?-B/f:0;s.b2Vec2.Scale(w,b,c),d.SubtractScaled(S,c),y-=h*s.b2Vec2.Cross(n,c),A.AddScaled(u,c),I+=v*s.b2Vec2.Cross(a,c)}this.m_positions[b].c.Copy(d),this.m_positions[b].a=y,this.m_positions[m].c.Copy(A),this.m_positions[m].a=I}return r>=-3*t.b2_linearSlop}SolveTOIPositionConstraints(o,e){const i=m.SolveTOIPositionConstraints_s_xfA,n=m.SolveTOIPositionConstraints_s_xfB,a=m.SolveTOIPositionConstraints_s_psm,c=m.SolveTOIPositionConstraints_s_rA,r=m.SolveTOIPositionConstraints_s_rB,l=m.SolveTOIPositionConstraints_s_P;let _=0;for(let b=0;b<this.m_count;++b){const m=this.m_positionConstraints[b],{indexA:V,indexB:p,localCenterA:C,localCenterB:S,pointCount:h}=m;let u=0,v=0;V!==o&&V!==e||(u=m.invMassA,v=m.invIA);let d=0,y=0;p!==o&&p!==e||(d=m.invMassB,y=m.invIB);const A=this.m_positions[V].c;let I=this.m_positions[V].a;const B=this.m_positions[p].c;let x=this.m_positions[p].a;for(let o=0;o<h;++o){i.q.Set(I),n.q.Set(x),s.b2Vec2.Subtract(A,s.b2Rot.MultiplyVec2(i.q,C,s.b2Vec2.s_t0),i.p),s.b2Vec2.Subtract(B,s.b2Rot.MultiplyVec2(n.q,S,s.b2Vec2.s_t0),n.p),a.Initialize(m,i,n,o);const{normal:e,point:b,separation:V}=a;s.b2Vec2.Subtract(b,A,c),s.b2Vec2.Subtract(b,B,r),_=Math.min(_,V);const p=(0,s.b2Clamp)(t.b2_toiBaumgarte*(V+t.b2_linearSlop),-t.b2_maxLinearCorrection,0),h=s.b2Vec2.Cross(c,e),M=s.b2Vec2.Cross(r,e),f=u+d+v*h*h+y*M*M,w=f>0?-p/f:0;s.b2Vec2.Scale(w,e,l),A.SubtractScaled(u,l),I-=v*s.b2Vec2.Cross(c,l),B.AddScaled(d,l),x+=y*s.b2Vec2.Cross(r,l)}this.m_positions[V].a=I,this.m_positions[p].a=x}return _>=-1.5*t.b2_linearSlop}}exports.b2ContactSolver=m,m.InitializeVelocityConstraints_s_xfA=new s.b2Transform,m.InitializeVelocityConstraints_s_xfB=new s.b2Transform,m.InitializeVelocityConstraints_s_worldManifold=new o.b2WorldManifold,m.WarmStart_s_P=new s.b2Vec2,m.SolveVelocityConstraints_s_dv=new s.b2Vec2,m.SolveVelocityConstraints_s_dv1=new s.b2Vec2,m.SolveVelocityConstraints_s_dv2=new s.b2Vec2,m.SolveVelocityConstraints_s_P=new s.b2Vec2,m.SolveVelocityConstraints_s_a=new s.b2Vec2,m.SolveVelocityConstraints_s_b=new s.b2Vec2,m.SolveVelocityConstraints_s_x=new s.b2Vec2,m.SolveVelocityConstraints_s_d=new s.b2Vec2,m.SolveVelocityConstraints_s_P1=new s.b2Vec2,m.SolveVelocityConstraints_s_P2=new s.b2Vec2,m.SolveVelocityConstraints_s_P1P2=new s.b2Vec2,m.SolvePositionConstraints_s_xfA=new s.b2Transform,m.SolvePositionConstraints_s_xfB=new s.b2Transform,m.SolvePositionConstraints_s_psm=new b,m.SolvePositionConstraints_s_rA=new s.b2Vec2,m.SolvePositionConstraints_s_rB=new s.b2Vec2,m.SolvePositionConstraints_s_P=new s.b2Vec2,m.SolveTOIPositionConstraints_s_xfA=new s.b2Transform,m.SolveTOIPositionConstraints_s_xfB=new s.b2Transform,m.SolveTOIPositionConstraints_s_psm=new b,m.SolveTOIPositionConstraints_s_rA=new s.b2Vec2,m.SolveTOIPositionConstraints_s_rB=new s.b2Vec2,m.SolveTOIPositionConstraints_s_P=new s.b2Vec2;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","../collision/b2_collision":"PKgf","./b2_time_step":"w6W3"}],"DDAc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2Island=void 0;const t=require("../common/b2_common"),o=require("../common/b2_math"),i=require("../common/b2_timer"),s=require("./b2_contact_solver"),e=require("./b2_body"),n=require("./b2_time_step"),a=require("./b2_world_callbacks");class m{constructor(o,i,s,e){this.m_bodyCount=0,this.m_jointCount=0,this.m_contactCount=0,this.m_bodyCapacity=o,this.m_listener=e,this.m_bodies=new Array(o),this.m_contacts=new Array(i),this.m_joints=new Array(s),this.m_velocities=(0,t.b2MakeArray)(o,n.b2Velocity),this.m_positions=(0,t.b2MakeArray)(o,n.b2Position),this.Resize(o)}Resize(t){for(;this.m_bodyCapacity<t;)this.m_velocities[this.m_bodyCapacity]=new n.b2Velocity,this.m_positions[this.m_bodyCapacity]=new n.b2Position,this.m_bodyCapacity++}Clear(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0}AddBody(t){t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount]=t,++this.m_bodyCount}AddContact(t){this.m_contacts[this.m_contactCount++]=t}AddJoint(t){this.m_joints[this.m_jointCount++]=t}Solve(i,s,n,a){const c=m.s_timer.Reset(),_=s.dt;for(let t=0;t<this.m_bodyCount;++t){const o=this.m_bodies[t];this.m_positions[t].c.Copy(o.m_sweep.c);const{a:i}=o.m_sweep,s=this.m_velocities[t].v.Copy(o.m_linearVelocity);let a=o.m_angularVelocity;o.m_sweep.c0.Copy(o.m_sweep.c),o.m_sweep.a0=o.m_sweep.a,o.m_type===e.b2BodyType.b2_dynamicBody&&(s.x+=_*o.m_invMass*(o.m_gravityScale*o.m_mass*n.x+o.m_force.x),s.y+=_*o.m_invMass*(o.m_gravityScale*o.m_mass*n.y+o.m_force.y),a+=_*o.m_invI*o.m_torque,s.Scale(1/(1+_*o.m_linearDamping)),a*=1/(1+_*o.m_angularDamping)),this.m_positions[t].a=i,this.m_velocities[t].w=a}c.Reset();const l=m.s_solverData;l.step.Copy(s),l.positions=this.m_positions,l.velocities=this.m_velocities;const r=m.s_contactSolverDef;r.step.Copy(s),r.contacts=this.m_contacts,r.count=this.m_contactCount,r.positions=this.m_positions,r.velocities=this.m_velocities;const h=m.s_contactSolver.Initialize(r);h.InitializeVelocityConstraints(),s.warmStarting&&h.WarmStart();for(let t=0;t<this.m_jointCount;++t)this.m_joints[t].InitVelocityConstraints(l);i.solveInit=c.GetMilliseconds(),c.Reset();for(let t=0;t<s.config.velocityIterations;++t){for(let t=0;t<this.m_jointCount;++t)this.m_joints[t].SolveVelocityConstraints(l);h.SolveVelocityConstraints()}h.StoreImpulses(),i.solveVelocity=c.GetMilliseconds();for(let e=0;e<this.m_bodyCount;++e){const{c:i}=this.m_positions[e];let{a:s}=this.m_positions[e];const{v:n}=this.m_velocities[e];let{w:a}=this.m_velocities[e];const c=o.b2Vec2.Scale(_,n,m.s_translation);if(o.b2Vec2.Dot(c,c)>t.b2_maxTranslationSquared){const o=t.b2_maxTranslation/c.Length();n.Scale(o)}const l=_*a;if(l*l>t.b2_maxRotationSquared){a*=t.b2_maxRotation/Math.abs(l)}i.AddScaled(_,n),s+=_*a,this.m_positions[e].a=s,this.m_velocities[e].w=a}c.Reset();let p=!1;for(let t=0;t<s.config.positionIterations;++t){const t=h.SolvePositionConstraints();let o=!0;for(let i=0;i<this.m_jointCount;++i){const t=this.m_joints[i].SolvePositionConstraints(l);o=o&&t}if(t&&o){p=!0;break}}for(let t=0;t<this.m_bodyCount;++t){const o=this.m_bodies[t];o.m_sweep.c.Copy(this.m_positions[t].c),o.m_sweep.a=this.m_positions[t].a,o.m_linearVelocity.Copy(this.m_velocities[t].v),o.m_angularVelocity=this.m_velocities[t].w,o.SynchronizeTransform()}if(i.solvePosition=c.GetMilliseconds(),this.Report(h.m_velocityConstraints),a){let i=t.b2_maxFloat;const s=t.b2_linearSleepTolerance*t.b2_linearSleepTolerance,n=t.b2_angularSleepTolerance*t.b2_angularSleepTolerance;for(let t=0;t<this.m_bodyCount;++t){const a=this.m_bodies[t];a.GetType()!==e.b2BodyType.b2_staticBody&&(!a.m_autoSleepFlag||a.m_angularVelocity*a.m_angularVelocity>n||o.b2Vec2.Dot(a.m_linearVelocity,a.m_linearVelocity)>s?(a.m_sleepTime=0,i=0):(a.m_sleepTime+=_,i=Math.min(i,a.m_sleepTime)))}if(i>=t.b2_timeToSleep&&p)for(let t=0;t<this.m_bodyCount;++t){this.m_bodies[t].SetAwake(!1)}}}SolveTOI(i,s,e){for(let t=0;t<this.m_bodyCount;++t){const o=this.m_bodies[t];this.m_positions[t].c.Copy(o.m_sweep.c),this.m_positions[t].a=o.m_sweep.a,this.m_velocities[t].v.Copy(o.m_linearVelocity),this.m_velocities[t].w=o.m_angularVelocity}const n=m.s_contactSolverDef;n.contacts=this.m_contacts,n.count=this.m_contactCount,n.step.Copy(i),n.positions=this.m_positions,n.velocities=this.m_velocities;const a=m.s_contactSolver.Initialize(n);for(let t=0;t<i.config.positionIterations;++t){if(a.SolveTOIPositionConstraints(s,e))break}this.m_bodies[s].m_sweep.c0.Copy(this.m_positions[s].c),this.m_bodies[s].m_sweep.a0=this.m_positions[s].a,this.m_bodies[e].m_sweep.c0.Copy(this.m_positions[e].c),this.m_bodies[e].m_sweep.a0=this.m_positions[e].a,a.InitializeVelocityConstraints();for(let t=0;t<i.config.velocityIterations;++t)a.SolveVelocityConstraints();const c=i.dt;for(let _=0;_<this.m_bodyCount;++_){const{c:i}=this.m_positions[_];let{a:s}=this.m_positions[_];const{v:e}=this.m_velocities[_];let{w:n}=this.m_velocities[_];const a=o.b2Vec2.Scale(c,e,m.s_translation);if(o.b2Vec2.Dot(a,a)>t.b2_maxTranslationSquared){const o=t.b2_maxTranslation/a.Length();e.Scale(o)}const l=c*n;if(l*l>t.b2_maxRotationSquared){n*=t.b2_maxRotation/Math.abs(l)}i.AddScaled(c,e),s+=c*n,this.m_positions[_].a=s,this.m_velocities[_].w=n;const r=this.m_bodies[_];r.m_sweep.c.Copy(i),r.m_sweep.a=s,r.m_linearVelocity.Copy(e),r.m_angularVelocity=n,r.SynchronizeTransform()}this.Report(a.m_velocityConstraints)}Report(t){for(let o=0;o<this.m_contactCount;++o){const i=this.m_contacts[o],s=t[o],e=m.s_impulse;e.count=s.pointCount;for(let t=0;t<s.pointCount;++t)e.normalImpulses[t]=s.points[t].normalImpulse,e.tangentImpulses[t]=s.points[t].tangentImpulse;this.m_listener.PostSolve(i,e)}}}exports.b2Island=m,m.s_timer=new i.b2Timer,m.s_solverData=new n.b2SolverData,m.s_contactSolverDef=new s.b2ContactSolverDef,m.s_contactSolver=new s.b2ContactSolver,m.s_translation=new o.b2Vec2,m.s_impulse=new a.b2ContactImpulse;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","../common/b2_timer":"ixAk","./b2_contact_solver":"DnH3","./b2_body":"rONj","./b2_time_step":"w6W3","./b2_world_callbacks":"G1MF"}],"H7LA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2World=void 0;const t=require("../common/b2_common"),e=require("../common/b2_math"),i=require("../common/b2_timer"),n=require("../collision/b2_collision"),o=require("../collision/b2_time_of_impact"),s=require("./b2_joint"),r=require("./b2_area_joint"),_=require("./b2_distance_joint"),a=require("./b2_friction_joint"),m=require("./b2_gear_joint"),l=require("./b2_motor_joint"),c=require("./b2_mouse_joint"),u=require("./b2_prismatic_joint"),d=require("./b2_pulley_joint"),p=require("./b2_revolute_joint"),h=require("./b2_weld_joint"),y=require("./b2_wheel_joint"),b=require("./b2_body"),g=require("./b2_contact_manager"),S=require("./b2_island"),f=require("./b2_time_step");class x{constructor(i){this.m_contactManager=new g.b2ContactManager,this.m_bodyList=null,this.m_jointList=null,this.m_bodyCount=0,this.m_jointCount=0,this.m_gravity=new e.b2Vec2,this.m_allowSleep=!0,this.m_destructionListener=null,this.m_inv_dt0=0,this.m_newContacts=!1,this.m_locked=!1,this.m_clearForces=!0,this.m_warmStarting=!0,this.m_continuousPhysics=!0,this.m_subStepping=!1,this.m_stepComplete=!0,this.m_profile=new f.b2Profile,this.m_island=new S.b2Island(2*t.b2_maxTOIContacts,t.b2_maxTOIContacts,0,this.m_contactManager.m_contactListener),this.s_stack=[],this.m_gravity.Copy(i)}static Create(t){return new x(t)}SetDestructionListener(t){this.m_destructionListener=t}GetDestructionListener(){return this.m_destructionListener}SetContactFilter(t){this.m_contactManager.m_contactFilter=t}SetContactListener(t){this.m_contactManager.m_contactListener=t,this.m_island.m_listener=t}CreateBody(e={}){(0,t.b2Assert)(!this.IsLocked());const i=new b.b2Body(e,this);return i.m_prev=null,i.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=i),this.m_bodyList=i,++this.m_bodyCount,i}DestroyBody(e){var i,n;(0,t.b2Assert)(!this.IsLocked());let o=e.m_jointList;for(;o;){const t=o;o=o.next,null===(i=this.m_destructionListener)||void 0===i||i.SayGoodbyeJoint(t.joint),this.DestroyJoint(t.joint),e.m_jointList=o}e.m_jointList=null;let s=e.m_contactList;for(;s;){const t=s;s=s.next,this.m_contactManager.Destroy(t.contact)}e.m_contactList=null;const r=this.m_contactManager.m_broadPhase;let _=e.m_fixtureList;for(;_;){const t=_;_=_.m_next,null===(n=this.m_destructionListener)||void 0===n||n.SayGoodbyeFixture(t),t.DestroyProxies(r),e.m_fixtureList=_,e.m_fixtureCount-=1}e.m_fixtureList=null,e.m_fixtureCount=0,e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),e===this.m_bodyList&&(this.m_bodyList=e.m_next),--this.m_bodyCount}static Joint_Create(t){switch(t.type){case s.b2JointType.e_distanceJoint:return new _.b2DistanceJoint(t);case s.b2JointType.e_mouseJoint:return new c.b2MouseJoint(t);case s.b2JointType.e_prismaticJoint:return new u.b2PrismaticJoint(t);case s.b2JointType.e_revoluteJoint:return new p.b2RevoluteJoint(t);case s.b2JointType.e_pulleyJoint:return new d.b2PulleyJoint(t);case s.b2JointType.e_gearJoint:return new m.b2GearJoint(t);case s.b2JointType.e_wheelJoint:return new y.b2WheelJoint(t);case s.b2JointType.e_weldJoint:return new h.b2WeldJoint(t);case s.b2JointType.e_frictionJoint:return new a.b2FrictionJoint(t);case s.b2JointType.e_motorJoint:return new l.b2MotorJoint(t);case s.b2JointType.e_areaJoint:return new r.b2AreaJoint(t)}throw new Error}CreateJoint(e){(0,t.b2Assert)(!this.IsLocked());const i=x.Joint_Create(e);i.m_prev=null,i.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=i),this.m_jointList=i,++this.m_jointCount,i.m_edgeA.prev=null,i.m_edgeA.next=i.m_bodyA.m_jointList,i.m_bodyA.m_jointList&&(i.m_bodyA.m_jointList.prev=i.m_edgeA),i.m_bodyA.m_jointList=i.m_edgeA,i.m_edgeB.prev=null,i.m_edgeB.next=i.m_bodyB.m_jointList,i.m_bodyB.m_jointList&&(i.m_bodyB.m_jointList.prev=i.m_edgeB),i.m_bodyB.m_jointList=i.m_edgeB;const n=i.m_bodyA,o=i.m_bodyB;if(!e.collideConnected){let t=o.GetContactList();for(;t;)t.other===n&&t.contact.FlagForFiltering(),t=t.next}return i}DestroyJoint(e){(0,t.b2Assert)(!this.IsLocked()),e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),e===this.m_jointList&&(this.m_jointList=e.m_next);const i=e.m_bodyA,n=e.m_bodyB,o=e.m_collideConnected;if(i.SetAwake(!0),n.SetAwake(!0),e.m_edgeA.prev&&(e.m_edgeA.prev.next=e.m_edgeA.next),e.m_edgeA.next&&(e.m_edgeA.next.prev=e.m_edgeA.prev),e.m_edgeA===i.m_jointList&&(i.m_jointList=e.m_edgeA.next),e.m_edgeA.prev=null,e.m_edgeA.next=null,e.m_edgeB.prev&&(e.m_edgeB.prev.next=e.m_edgeB.next),e.m_edgeB.next&&(e.m_edgeB.next.prev=e.m_edgeB.prev),e.m_edgeB===n.m_jointList&&(n.m_jointList=e.m_edgeB.next),e.m_edgeB.prev=null,e.m_edgeB.next=null,--this.m_jointCount,!o){let t=n.GetContactList();for(;t;)t.other===i&&t.contact.FlagForFiltering(),t=t.next}}Step(t,e){const i=x.Step_s_stepTimer.Reset();this.m_newContacts&&(this.m_contactManager.FindNewContacts(),this.m_newContacts=!1),this.m_locked=!0;const n=x.Step_s_step;n.dt=t,n.config={...e},n.inv_dt=t>0?1/t:0,n.dtRatio=this.m_inv_dt0*t,n.warmStarting=this.m_warmStarting;{const t=x.Step_s_timer.Reset();this.m_contactManager.Collide(),this.m_profile.collide=t.GetMilliseconds()}if(this.m_stepComplete&&n.dt>0){const t=x.Step_s_timer.Reset();this.Solve(n),this.m_profile.solve=t.GetMilliseconds()}if(this.m_continuousPhysics&&n.dt>0){const t=x.Step_s_timer.Reset();this.SolveTOI(n),this.m_profile.solveTOI=t.GetMilliseconds()}n.dt>0&&(this.m_inv_dt0=n.inv_dt),this.m_clearForces&&this.ClearForces(),this.m_locked=!1,this.m_profile.step=i.GetMilliseconds()}ClearForces(){for(let t=this.m_bodyList;t;t=t.GetNext())t.m_force.SetZero(),t.m_torque=0}QueryAABB(e,i){this.m_contactManager.m_broadPhase.Query(e,e=>{const n=(0,t.b2Verify)(e.userData);return i(n.fixture)})}QueryAllAABB(t,e=[]){return this.QueryAABB(t,t=>(e.push(t),!0)),e}QueryPointAABB(e,i){this.m_contactManager.m_broadPhase.QueryPoint(e,e=>{const n=(0,t.b2Verify)(e.userData);return i(n.fixture)})}QueryAllPointAABB(t,e=[]){return this.QueryPointAABB(t,t=>(e.push(t),!0)),e}QueryFixtureShape(e,i,o,s){const r=x.QueryFixtureShape_s_aabb;e.ComputeAABB(r,o,i),this.m_contactManager.m_broadPhase.Query(r,r=>{const _=(0,t.b2Verify)(r.userData),{fixture:a}=_;return!(0,n.b2TestOverlap)(e,i,a.GetShape(),_.childIndex,o,a.GetBody().GetTransform())||s(a)})}QueryAllFixtureShape(t,e,i,n=[]){return this.QueryFixtureShape(t,e,i,t=>(n.push(t),!0)),n}QueryFixturePoint(e,i){this.m_contactManager.m_broadPhase.QueryPoint(e,n=>{const o=(0,t.b2Verify)(n.userData),{fixture:s}=o;return!s.TestPoint(e)||i(s)})}QueryAllFixturePoint(t,e=[]){return this.QueryFixturePoint(t,t=>(e.push(t),!0)),e}RayCast(e,i,n){const o=x.RayCast_s_input;o.maxFraction=1,o.p1.Copy(e),o.p2.Copy(i),this.m_contactManager.m_broadPhase.RayCast(o,(o,s)=>{const r=(0,t.b2Verify)(s.userData),{fixture:_}=r,a=r.childIndex,m=x.RayCast_s_output;if(_.RayCast(m,o,a)){const{fraction:t}=m,o=x.RayCast_s_point;return o.Set((1-t)*e.x+t*i.x,(1-t)*e.y+t*i.y),n(_,o,m.normal,t)}return o.maxFraction})}RayCastOne(t,e){let i=null,n=1;return this.RayCast(t,e,(t,e,o,s)=>(s<n&&(n=s,i=t),n)),i}RayCastAll(t,e,i=[]){return this.RayCast(t,e,t=>(i.push(t),1)),i}GetBodyList(){return this.m_bodyList}GetJointList(){return this.m_jointList}GetContactList(){return this.m_contactManager.m_contactList}SetAllowSleeping(t){if(t!==this.m_allowSleep&&(this.m_allowSleep=t,!this.m_allowSleep))for(let e=this.m_bodyList;e;e=e.m_next)e.SetAwake(!0)}GetAllowSleeping(){return this.m_allowSleep}SetWarmStarting(t){this.m_warmStarting=t}GetWarmStarting(){return this.m_warmStarting}SetContinuousPhysics(t){this.m_continuousPhysics=t}GetContinuousPhysics(){return this.m_continuousPhysics}SetSubStepping(t){this.m_subStepping=t}GetSubStepping(){return this.m_subStepping}GetProxyCount(){return this.m_contactManager.m_broadPhase.GetProxyCount()}GetBodyCount(){return this.m_bodyCount}GetJointCount(){return this.m_jointCount}GetContactCount(){return this.m_contactManager.m_contactCount}GetTreeHeight(){return this.m_contactManager.m_broadPhase.GetTreeHeight()}GetTreeBalance(){return this.m_contactManager.m_broadPhase.GetTreeBalance()}GetTreeQuality(){return this.m_contactManager.m_broadPhase.GetTreeQuality()}SetGravity(t){this.m_gravity.Copy(t)}GetGravity(){return this.m_gravity}IsLocked(){return this.m_locked}SetAutoClearForces(t){this.m_clearForces=t}GetAutoClearForces(){return this.m_clearForces}ShiftOrigin(e){(0,t.b2Assert)(!this.IsLocked());for(let t=this.m_bodyList;t;t=t.m_next)t.m_xf.p.Subtract(e),t.m_sweep.c0.Subtract(e),t.m_sweep.c.Subtract(e);for(let t=this.m_jointList;t;t=t.m_next)t.ShiftOrigin(e);this.m_contactManager.m_broadPhase.ShiftOrigin(e)}GetContactManager(){return this.m_contactManager}GetProfile(){return this.m_profile}Solve(e){this.m_profile.solveInit=0,this.m_profile.solveVelocity=0,this.m_profile.solvePosition=0;const n=this.m_island;n.Resize(this.m_bodyCount),n.Clear();for(let t=this.m_bodyList;t;t=t.m_next)t.m_islandFlag=!1;for(let t=this.m_contactManager.m_contactList;t;t=t.m_next)t.m_islandFlag=!1;for(let t=this.m_jointList;t;t=t.m_next)t.m_islandFlag=!1;const o=this.s_stack;for(let i=this.m_bodyList;i;i=i.m_next){if(i.m_islandFlag)continue;if(!i.IsAwake()||!i.IsEnabled())continue;if(i.GetType()===b.b2BodyType.b2_staticBody)continue;n.Clear();let s=0;for(o[s++]=i,i.m_islandFlag=!0;s>0;){const e=o[--s];if((0,t.b2Assert)(null!==e),n.AddBody(e),e.GetType()!==b.b2BodyType.b2_staticBody){e.m_awakeFlag=!0;for(let t=e.m_contactList;t;t=t.next){const{contact:e}=t;if(e.m_islandFlag)continue;if(!e.IsEnabled()||!e.IsTouching())continue;const i=e.m_fixtureA.m_isSensor,r=e.m_fixtureB.m_isSensor;if(i||r)continue;n.AddContact(e),e.m_islandFlag=!0;const{other:_}=t;_.m_islandFlag||(o[s++]=_,_.m_islandFlag=!0)}for(let t=e.m_jointList;t;t=t.next){if(t.joint.m_islandFlag)continue;const{other:e}=t;e.IsEnabled()&&(n.AddJoint(t.joint),t.joint.m_islandFlag=!0,e.m_islandFlag||(o[s++]=e,e.m_islandFlag=!0))}}}const r=new f.b2Profile;n.Solve(r,e,this.m_gravity,this.m_allowSleep),this.m_profile.solveInit+=r.solveInit,this.m_profile.solveVelocity+=r.solveVelocity,this.m_profile.solvePosition+=r.solvePosition;for(let t=0;t<n.m_bodyCount;++t){const e=n.m_bodies[t];e.GetType()===b.b2BodyType.b2_staticBody&&(e.m_islandFlag=!1)}}for(let t=0;t<o.length&&o[t];++t)o[t]=null;const s=new i.b2Timer;for(let t=this.m_bodyList;t;t=t.m_next)t.m_islandFlag&&t.GetType()!==b.b2BodyType.b2_staticBody&&t.SynchronizeFixtures();this.m_contactManager.FindNewContacts(),this.m_profile.broadphase=s.GetMilliseconds()}SolveTOI(e){const i=this.m_island;if(i.Clear(),this.m_stepComplete){for(let t=this.m_bodyList;t;t=t.m_next)t.m_islandFlag=!1,t.m_sweep.alpha0=0;for(let t=this.m_contactManager.m_contactList;t;t=t.m_next)t.m_toiFlag=!1,t.m_islandFlag=!1,t.m_toiCount=0,t.m_toi=1}for(;;){let n=null,s=1;for(let e=this.m_contactManager.m_contactList;e;e=e.m_next){if(!e.IsEnabled())continue;if(e.m_toiCount>t.b2_maxSubSteps)continue;let i=1;if(e.m_toiFlag)i=e.m_toi;else{const t=e.GetFixtureA(),n=e.GetFixtureB();if(t.IsSensor()||n.IsSensor())continue;const s=t.GetBody(),r=n.GetBody(),_=s.m_type,a=r.m_type,m=s.IsAwake()&&_!==b.b2BodyType.b2_staticBody,l=r.IsAwake()&&a!==b.b2BodyType.b2_staticBody;if(!m&&!l)continue;const c=s.IsBullet()||_!==b.b2BodyType.b2_dynamicBody,u=r.IsBullet()||a!==b.b2BodyType.b2_dynamicBody;if(!c&&!u)continue;let{alpha0:d}=s.m_sweep;s.m_sweep.alpha0<r.m_sweep.alpha0?(d=r.m_sweep.alpha0,s.m_sweep.Advance(d)):r.m_sweep.alpha0<s.m_sweep.alpha0&&(d=s.m_sweep.alpha0,r.m_sweep.Advance(d));const p=e.GetChildIndexA(),h=e.GetChildIndexB(),y=x.SolveTOI_s_toi_input;y.proxyA.SetShape(t.GetShape(),p),y.proxyB.SetShape(n.GetShape(),h),y.sweepA.Copy(s.m_sweep),y.sweepB.Copy(r.m_sweep),y.tMax=1;const g=x.SolveTOI_s_toi_output;(0,o.b2TimeOfImpact)(g,y);const S=g.t;i=g.state===o.b2TOIOutputState.e_touching?Math.min(d+(1-d)*S,1):1,e.m_toi=i,e.m_toiFlag=!0}i<s&&(n=e,s=i)}if(null===n||1-10*t.b2_epsilon<s){this.m_stepComplete=!0;break}const r=n.GetFixtureA(),_=n.GetFixtureB(),a=r.GetBody(),m=_.GetBody(),l=x.SolveTOI_s_backup1.Copy(a.m_sweep),c=x.SolveTOI_s_backup2.Copy(m.m_sweep);if(a.Advance(s),m.Advance(s),n.Update(this.m_contactManager.m_contactListener),n.m_toiFlag=!1,++n.m_toiCount,!n.IsEnabled()||!n.IsTouching()){n.SetEnabled(!1),a.m_sweep.Copy(l),m.m_sweep.Copy(c),a.SynchronizeTransform(),m.SynchronizeTransform();continue}a.SetAwake(!0),m.SetAwake(!0),i.Clear(),i.AddBody(a),i.AddBody(m),i.AddContact(n),a.m_islandFlag=!0,m.m_islandFlag=!0,n.m_islandFlag=!0;for(let e=0;e<2;++e){const n=0===e?a:m;if(n.m_type===b.b2BodyType.b2_dynamicBody)for(let e=n.m_contactList;e&&i.m_bodyCount!==i.m_bodyCapacity&&i.m_contactCount!==t.b2_maxTOIContacts;e=e.next){const{contact:t}=e;if(t.m_islandFlag)continue;const{other:o}=e;if(o.m_type===b.b2BodyType.b2_dynamicBody&&!n.IsBullet()&&!o.IsBullet())continue;const r=t.m_fixtureA.m_isSensor,_=t.m_fixtureB.m_isSensor;if(r||_)continue;const a=x.SolveTOI_s_backup.Copy(o.m_sweep);o.m_islandFlag||o.Advance(s),t.Update(this.m_contactManager.m_contactListener),t.IsEnabled()&&t.IsTouching()?(t.m_islandFlag=!0,i.AddContact(t),o.m_islandFlag||(o.m_islandFlag=!0,o.m_type!==b.b2BodyType.b2_staticBody&&o.SetAwake(!0),i.AddBody(o))):(o.m_sweep.Copy(a),o.SynchronizeTransform())}}const u=x.SolveTOI_s_subStep;u.dt=(1-s)*e.dt,u.inv_dt=1/u.dt,u.dtRatio=1,u.config={...e.config,positionIterations:20},u.warmStarting=!1,i.SolveTOI(u,a.m_islandIndex,m.m_islandIndex);for(let t=0;t<i.m_bodyCount;++t){const e=i.m_bodies[t];if(e.m_islandFlag=!1,e.m_type===b.b2BodyType.b2_dynamicBody){e.SynchronizeFixtures();for(let t=e.m_contactList;t;t=t.next)t.contact.m_toiFlag=!1,t.contact.m_islandFlag=!1}}if(this.m_contactManager.FindNewContacts(),this.m_subStepping){this.m_stepComplete=!1;break}}}}exports.b2World=x,x.Step_s_step=f.b2TimeStep.Create(),x.Step_s_stepTimer=new i.b2Timer,x.Step_s_timer=new i.b2Timer,x.QueryFixtureShape_s_aabb=new n.b2AABB,x.RayCast_s_input=new n.b2RayCastInput,x.RayCast_s_output=new n.b2RayCastOutput,x.RayCast_s_point=new e.b2Vec2,x.SolveTOI_s_subStep=f.b2TimeStep.Create(),x.SolveTOI_s_backup=new e.b2Sweep,x.SolveTOI_s_backup1=new e.b2Sweep,x.SolveTOI_s_backup2=new e.b2Sweep,x.SolveTOI_s_toi_input=new o.b2TOIInput,x.SolveTOI_s_toi_output=new o.b2TOIOutput;
},{"../common/b2_common":"ReKW","../common/b2_math":"cQbL","../common/b2_timer":"ixAk","../collision/b2_collision":"PKgf","../collision/b2_time_of_impact":"skt6","./b2_joint":"Xq2i","./b2_area_joint":"SxzW","./b2_distance_joint":"xSy1","./b2_friction_joint":"zgG7","./b2_gear_joint":"RWFZ","./b2_motor_joint":"mwAL","./b2_mouse_joint":"BhEk","./b2_prismatic_joint":"FAa8","./b2_pulley_joint":"smnA","./b2_revolute_joint":"ELTV","./b2_weld_joint":"LRlb","./b2_wheel_joint":"yJEF","./b2_body":"rONj","./b2_contact_manager":"PdJY","./b2_island":"DDAc","./b2_time_step":"w6W3"}],"YV35":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2Rope=exports.b2RopeTuning=exports.b2BendingModel=exports.b2StretchingModel=void 0;const t=require("../common/b2_common"),s=require("../common/b2_draw"),e=require("../common/b2_math"),i={J1:new e.b2Vec2,J2:new e.b2Vec2,J3:new e.b2Vec2,r:new e.b2Vec2,e1:new e.b2Vec2,e2:new e.b2Vec2,Jd1:new e.b2Vec2,Jd2:new e.b2Vec2,d:new e.b2Vec2,u:new e.b2Vec2,dp1:new e.b2Vec2,dp2:new e.b2Vec2,dp3:new e.b2Vec2,d1:new e.b2Vec2,d2:new e.b2Vec2,dHat:new e.b2Vec2};var n,o;!function(t){t[t.b2_pbdStretchingModel=0]="b2_pbdStretchingModel",t[t.b2_xpbdStretchingModel=1]="b2_xpbdStretchingModel"}(n=exports.b2StretchingModel||(exports.b2StretchingModel={})),function(t){t[t.b2_springAngleBendingModel=0]="b2_springAngleBendingModel",t[t.b2_pbdAngleBendingModel=1]="b2_pbdAngleBendingModel",t[t.b2_xpbdAngleBendingModel=2]="b2_xpbdAngleBendingModel",t[t.b2_pbdDistanceBendingModel=3]="b2_pbdDistanceBendingModel",t[t.b2_pbdHeightBendingModel=4]="b2_pbdHeightBendingModel",t[t.b2_pbdTriangleBendingModel=5]="b2_pbdTriangleBendingModel"}(o=exports.b2BendingModel||(exports.b2BendingModel={}));class c{constructor(){this.stretchingModel=n.b2_pbdStretchingModel,this.bendingModel=o.b2_pbdAngleBendingModel,this.damping=0,this.stretchStiffness=1,this.stretchHertz=0,this.stretchDamping=0,this.bendStiffness=.5,this.bendHertz=1,this.bendDamping=0,this.isometric=!1,this.fixedEffectiveMass=!1,this.warmStart=!1}Copy(t){return this.stretchingModel=t.stretchingModel,this.bendingModel=t.bendingModel,this.damping=t.damping,this.stretchStiffness=t.stretchStiffness,this.stretchHertz=t.stretchHertz,this.stretchDamping=t.stretchDamping,this.bendStiffness=t.bendStiffness,this.bendHertz=t.bendHertz,this.bendDamping=t.bendDamping,this.isometric=t.isometric,this.fixedEffectiveMass=t.fixedEffectiveMass,this.warmStart=t.warmStart,this}}exports.b2RopeTuning=c;class h{constructor(){this.i1=0,this.i2=0,this.invMass1=0,this.invMass2=0,this.L=0,this.lambda=0,this.spring=0,this.damper=0}}class a{constructor(){this.i1=0,this.i2=0,this.i3=0,this.invMass1=0,this.invMass2=0,this.invMass3=0,this.invEffectiveMass=0,this.lambda=0,this.L1=0,this.L2=0,this.alpha1=0,this.alpha2=0,this.spring=0,this.damper=0}}class d{constructor(s){this.m_position=new e.b2Vec2,this.m_count=0,this.m_stretchCount=0,this.m_bendCount=0,this.m_gravity=new e.b2Vec2,this.m_tuning=new c,(0,t.b2Assert)(s.vertices.length>=3),this.m_position.Copy(s.position),this.m_count=s.vertices.length,this.m_bindPositions=(0,t.b2MakeArray)(this.m_count,e.b2Vec2),this.m_ps=(0,t.b2MakeArray)(this.m_count,e.b2Vec2),this.m_p0s=(0,t.b2MakeArray)(this.m_count,e.b2Vec2),this.m_vs=(0,t.b2MakeArray)(this.m_count,e.b2Vec2),this.m_invMasses=(0,t.b2MakeNumberArray)(this.m_count);for(let t=0;t<this.m_count;++t){this.m_bindPositions[t].Copy(s.vertices[t]),e.b2Vec2.Add(s.vertices[t],this.m_position,this.m_ps[t]),e.b2Vec2.Add(s.vertices[t],this.m_position,this.m_p0s[t]),this.m_vs[t].SetZero();const i=s.masses[t];this.m_invMasses[t]=i>0?1/i:0}this.m_stretchCount=this.m_count-1,this.m_bendCount=this.m_count-2,this.m_stretchConstraints=new Array(this.m_stretchCount);for(let t=0;t<this.m_stretchCount;t++)this.m_stretchConstraints[t]=new h;this.m_bendConstraints=new Array(this.m_bendCount);for(let t=0;t<this.m_bendCount;t++)this.m_bendConstraints[t]=new a;for(let t=0;t<this.m_stretchCount;++t){const s=this.m_stretchConstraints[t],i=this.m_ps[t],n=this.m_ps[t+1];s.i1=t,s.i2=t+1,s.L=e.b2Vec2.Distance(i,n),s.invMass1=this.m_invMasses[t],s.invMass2=this.m_invMasses[t+1],s.lambda=0,s.damper=0,s.spring=0}const{J1:n,J2:o,r:d,e1:b,e2:r,Jd1:m,Jd2:_}=i;for(let t=0;t<this.m_bendCount;++t){const s=this.m_bendConstraints[t],i=this.m_ps[t],c=this.m_ps[t+1],h=this.m_ps[t+2];s.i1=t,s.i2=t+1,s.i3=t+2,s.invMass1=this.m_invMasses[t],s.invMass2=this.m_invMasses[t+1],s.invMass3=this.m_invMasses[t+2],s.invEffectiveMass=0,s.L1=e.b2Vec2.Distance(i,c),s.L2=e.b2Vec2.Distance(c,h),s.lambda=0,e.b2Vec2.Subtract(c,i,b),e.b2Vec2.Subtract(h,c,r);const a=b.LengthSquared(),l=r.LengthSquared();if(a*l==0)continue;e.b2Vec2.Skew(b,m).Scale(-1/a),e.b2Vec2.Skew(r,_).Scale(1/l),e.b2Vec2.Negate(m,n),e.b2Vec2.Subtract(m,_,o);const p=_;s.invEffectiveMass=s.invMass1*e.b2Vec2.Dot(n,n)+s.invMass2*e.b2Vec2.Dot(o,o)+s.invMass3*e.b2Vec2.Dot(p,p),e.b2Vec2.Subtract(h,i,d);const g=d.LengthSquared();0!==g&&(s.alpha1=e.b2Vec2.Dot(r,d)/g,s.alpha2=e.b2Vec2.Dot(b,d)/g)}this.m_gravity.Copy(s.gravity),this.SetTuning(s.tuning)}SetTuning(t){this.m_tuning.Copy(t);const s=2*Math.PI*this.m_tuning.bendHertz;for(let i=0;i<this.m_bendCount;++i){const t=this.m_bendConstraints[i],e=t.L1*t.L1,n=t.L2*t.L2;if(e*n==0){t.spring=0,t.damper=0;continue}const o=1/t.L1+1/t.L2,c=t.invMass1/e+t.invMass2*o*o+t.invMass3/n;if(0===c){t.spring=0,t.damper=0;continue}const h=1/c;t.spring=h*s*s,t.damper=2*h*this.m_tuning.bendDamping*s}const e=2*Math.PI*this.m_tuning.stretchHertz;for(let i=0;i<this.m_stretchCount;++i){const t=this.m_stretchConstraints[i],s=t.invMass1+t.invMass2;if(0===s)continue;const n=1/s;t.spring=n*e*e,t.damper=2*n*this.m_tuning.stretchDamping*e}}Step(t,s,e){if(0===t)return;const i=1/t,c=Math.exp(-t*this.m_tuning.damping);for(let n=0;n<this.m_count;++n)this.m_invMasses[n]>0?(this.m_vs[n].Scale(c),this.m_vs[n].AddScaled(t,this.m_gravity)):(this.m_vs[n].x=i*(this.m_bindPositions[n].x+e.x-this.m_p0s[n].x),this.m_vs[n].y=i*(this.m_bindPositions[n].y+e.y-this.m_p0s[n].y));this.m_tuning.bendingModel===o.b2_springAngleBendingModel&&this.ApplyBendForces(t);for(let n=0;n<this.m_bendCount;++n)this.m_bendConstraints[n].lambda=0;for(let n=0;n<this.m_stretchCount;++n)this.m_stretchConstraints[n].lambda=0;for(let n=0;n<this.m_count;++n)this.m_ps[n].AddScaled(t,this.m_vs[n]);for(let h=0;h<s;++h)this.m_tuning.bendingModel===o.b2_pbdAngleBendingModel?this.SolveBend_PBD_Angle():this.m_tuning.bendingModel===o.b2_xpbdAngleBendingModel?this.SolveBend_XPBD_Angle(t):this.m_tuning.bendingModel===o.b2_pbdDistanceBendingModel?this.SolveBend_PBD_Distance():this.m_tuning.bendingModel===o.b2_pbdHeightBendingModel?this.SolveBend_PBD_Height():this.m_tuning.bendingModel===o.b2_pbdTriangleBendingModel&&this.SolveBend_PBD_Triangle(),this.m_tuning.stretchingModel===n.b2_pbdStretchingModel?this.SolveStretch_PBD():this.m_tuning.stretchingModel===n.b2_xpbdStretchingModel&&this.SolveStretch_XPBD(t);for(let n=0;n<this.m_count;++n)this.m_vs[n].x=i*(this.m_ps[n].x-this.m_p0s[n].x),this.m_vs[n].y=i*(this.m_ps[n].y-this.m_p0s[n].y),this.m_p0s[n].Copy(this.m_ps[n])}Reset(t){this.m_position.Copy(t);for(let s=0;s<this.m_count;++s)e.b2Vec2.Add(this.m_bindPositions[s],this.m_position,this.m_ps[s]),this.m_p0s[s].Copy(this.m_ps[s]),this.m_vs[s].SetZero();for(let s=0;s<this.m_bendCount;++s)this.m_bendConstraints[s].lambda=0;for(let s=0;s<this.m_stretchCount;++s)this.m_stretchConstraints[s].lambda=0}SolveStretch_PBD(){const t=this.m_tuning.stretchStiffness,{d:s}=i;for(let i=0;i<this.m_stretchCount;++i){const n=this.m_stretchConstraints[i],o=this.m_ps[n.i1],c=this.m_ps[n.i2];e.b2Vec2.Subtract(c,o,s);const h=s.Normalize(),a=n.invMass1+n.invMass2;if(0===a)continue;const d=n.invMass1/a,b=n.invMass2/a;o.SubtractScaled(t*d*(n.L-h),s),c.AddScaled(t*b*(n.L-h),s)}}SolveStretch_XPBD(t){const{dp1:s,dp2:n,u:o,J1:c}=i;for(let i=0;i<this.m_stretchCount;++i){const h=this.m_stretchConstraints[i],a=this.m_ps[h.i1],d=this.m_ps[h.i2];e.b2Vec2.Subtract(a,this.m_p0s[h.i1],s),e.b2Vec2.Subtract(d,this.m_p0s[h.i2],n),e.b2Vec2.Subtract(d,a,o);const b=o.Normalize();e.b2Vec2.Negate(o,c);const r=o,m=h.invMass1+h.invMass2;if(0===m)continue;const _=1/(h.spring*t*t),l=_*(t*t*h.damper)/t,p=b-h.L,g=e.b2Vec2.Dot(c,s)+e.b2Vec2.Dot(r,n),u=-(p+_*h.lambda+l*g)/((1+l)*m+_);a.AddScaled(h.invMass1*u,c),d.AddScaled(h.invMass2*u,r),h.lambda+=u}}SolveBend_PBD_Angle(){const t=this.m_tuning.bendStiffness,{Jd1:s,Jd2:n,J1:o,J2:c,d1:h,d2:a}=i;for(let i=0;i<this.m_bendCount;++i){const d=this.m_bendConstraints[i],b=this.m_ps[d.i1],r=this.m_ps[d.i2],m=this.m_ps[d.i3];e.b2Vec2.Subtract(r,b,h),e.b2Vec2.Subtract(m,r,a);const _=e.b2Vec2.Cross(h,a),l=e.b2Vec2.Dot(h,a),p=Math.atan2(_,l);let g,u;if(this.m_tuning.isometric?(g=d.L1*d.L1,u=d.L2*d.L2):(g=h.LengthSquared(),u=a.LengthSquared()),g*u==0)continue;e.b2Vec2.Skew(h,s).Scale(-1/g),e.b2Vec2.Skew(a,n).Scale(1/u),e.b2Vec2.Negate(s,o),e.b2Vec2.Subtract(s,n,c);const M=n;let v;0===(v=this.m_tuning.fixedEffectiveMass?d.invEffectiveMass:d.invMass1*e.b2Vec2.Dot(o,o)+d.invMass2*e.b2Vec2.Dot(c,c)+d.invMass3*e.b2Vec2.Dot(M,M))&&(v=d.invEffectiveMass);const S=-t*p/v;b.AddScaled(d.invMass1*S,o),r.AddScaled(d.invMass2*S,c),m.AddScaled(d.invMass3*S,M)}}SolveBend_XPBD_Angle(t){const{dp1:s,dp2:n,dp3:o,d1:c,d2:h,Jd1:a,Jd2:d,J1:b,J2:r}=i;for(let i=0;i<this.m_bendCount;++i){const m=this.m_bendConstraints[i],_=this.m_ps[m.i1],l=this.m_ps[m.i2],p=this.m_ps[m.i3];let g,u;if(e.b2Vec2.Subtract(_,this.m_p0s[m.i1],s),e.b2Vec2.Subtract(l,this.m_p0s[m.i2],n),e.b2Vec2.Subtract(p,this.m_p0s[m.i3],o),e.b2Vec2.Subtract(l,_,c),e.b2Vec2.Subtract(p,l,h),this.m_tuning.isometric?(g=m.L1*m.L1,u=m.L2*m.L2):(g=c.LengthSquared(),u=h.LengthSquared()),g*u==0)continue;const M=e.b2Vec2.Cross(c,h),v=e.b2Vec2.Dot(c,h),S=Math.atan2(M,v);e.b2Vec2.Skew(c,a).Scale(-1/g),e.b2Vec2.Skew(h,d).Scale(1/u),e.b2Vec2.Negate(a,b),e.b2Vec2.Subtract(a,d,r);const f=d;let V;if(0===(V=this.m_tuning.fixedEffectiveMass?m.invEffectiveMass:m.invMass1*e.b2Vec2.Dot(b,b)+m.invMass2*e.b2Vec2.Dot(r,r)+m.invMass3*e.b2Vec2.Dot(f,f)))continue;const D=1/(m.spring*t*t),C=D*(t*t*m.damper)/t,A=S,B=e.b2Vec2.Dot(b,s)+e.b2Vec2.Dot(r,n)+e.b2Vec2.Dot(f,o),L=-(A+D*m.lambda+C*B)/((1+C)*V+D);_.AddScaled(m.invMass1*L,b),l.AddScaled(m.invMass2*L,r),p.AddScaled(m.invMass3*L,f),m.lambda+=L}}SolveBend_PBD_Distance(){const t=this.m_tuning.bendStiffness,{d:s}=i;for(let i=0;i<this.m_bendCount;++i){const n=this.m_bendConstraints[i],{i1:o}=n,c=n.i3,h=this.m_ps[o],a=this.m_ps[c];e.b2Vec2.Subtract(a,h,s);const d=s.Normalize(),b=n.invMass1+n.invMass3;if(0===b)continue;const r=n.invMass1/b,m=n.invMass3/b;h.SubtractScaled(t*r*(n.L1+n.L2-d),s),a.AddScaled(t*m*(n.L1+n.L2-d),s)}}SolveBend_PBD_Height(){const t=this.m_tuning.bendStiffness,{dHat:s,J1:n,J2:o,J3:c,d:h}=i;for(let i=0;i<this.m_bendCount;++i){const a=this.m_bendConstraints[i],d=this.m_ps[a.i1],b=this.m_ps[a.i2],r=this.m_ps[a.i3];h.x=a.alpha1*d.x+a.alpha2*r.x-b.x,h.y=a.alpha1*d.y+a.alpha2*r.y-b.y;const m=h.Length();if(0===m)continue;e.b2Vec2.Scale(1/m,h,s),e.b2Vec2.Scale(a.alpha1,s,n),e.b2Vec2.Negate(s,o),e.b2Vec2.Scale(a.alpha2,s,c);const _=a.invMass1*a.alpha1*a.alpha1+a.invMass2+a.invMass3*a.alpha2*a.alpha2;if(0===_)continue;const l=-t*(1/_)*m;d.AddScaled(a.invMass1*l,n),b.AddScaled(a.invMass2*l,o),r.AddScaled(a.invMass3*l,c)}}SolveBend_PBD_Triangle(){const t=this.m_tuning.bendStiffness,{d:s}=i;for(let e=0;e<this.m_bendCount;++e){const i=this.m_bendConstraints[e],n=this.m_ps[i.i1],o=this.m_ps[i.i2],c=this.m_ps[i.i3],h=i.invMass1,a=i.invMass2,d=i.invMass3,b=t/(h+d+2*a);s.x=o.x-1/3*(n.x+o.x+c.x),s.y=o.y-1/3*(n.y+o.y+c.y),n.AddScaled(2*h*b,s),o.AddScaled(-4*a*b,s),c.AddScaled(2*d*b,s)}}ApplyBendForces(t){const s=2*Math.PI*this.m_tuning.bendHertz,{d1:n,d2:o,Jd1:c,Jd2:h,J1:a,J2:d}=i;for(let i=0;i<this.m_bendCount;++i){const b=this.m_bendConstraints[i],r=this.m_ps[b.i1],m=this.m_ps[b.i2],_=this.m_ps[b.i3],l=this.m_vs[b.i1],p=this.m_vs[b.i2],g=this.m_vs[b.i3];let u,M;if(e.b2Vec2.Subtract(m,r,n),e.b2Vec2.Subtract(_,m,o),this.m_tuning.isometric?(u=b.L1*b.L1,M=b.L2*b.L2):(u=n.LengthSquared(),M=o.LengthSquared()),u*M==0)continue;const v=e.b2Vec2.Cross(n,o),S=e.b2Vec2.Dot(n,o),f=Math.atan2(v,S);e.b2Vec2.Skew(n,c).Scale(-1/u),e.b2Vec2.Skew(o,h).Scale(1/M),e.b2Vec2.Negate(c,a),e.b2Vec2.Subtract(c,h,d);const V=h;let D;if(0===(D=this.m_tuning.fixedEffectiveMass?b.invEffectiveMass:b.invMass1*e.b2Vec2.Dot(a,a)+b.invMass2*e.b2Vec2.Dot(d,d)+b.invMass3*e.b2Vec2.Dot(V,V)))continue;const C=1/D,A=-t*(C*s*s*f+2*C*this.m_tuning.bendDamping*s*(e.b2Vec2.Dot(a,l)+e.b2Vec2.Dot(d,p)+e.b2Vec2.Dot(V,g)));this.m_vs[b.i1].AddScaled(b.invMass1*A,a),this.m_vs[b.i2].AddScaled(b.invMass2*A,d),this.m_vs[b.i3].AddScaled(b.invMass3*A,V)}}Draw(t){for(let i=0;i<this.m_count-1;++i){t.DrawSegment(this.m_ps[i],this.m_ps[i+1],s.debugColors.rope);const e=this.m_invMasses[i]>0?s.debugColors.ropePointD:s.debugColors.ropePointG;t.DrawPoint(this.m_ps[i],5,e)}const e=this.m_invMasses[this.m_count-1]>0?s.debugColors.ropePointD:s.debugColors.ropePointG;t.DrawPoint(this.m_ps[this.m_count-1],5,e)}}exports.b2Rope=d;
},{"../common/b2_common":"ReKW","../common/b2_draw":"lvls","../common/b2_math":"cQbL"}],"FjWk":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,r,o,i){void 0===i&&(i=o);var t=Object.getOwnPropertyDescriptor(r,o);t&&("get"in t?r.__esModule:!t.writable&&!t.configurable)||(t={enumerable:!0,get:function(){return r[o]}}),Object.defineProperty(e,i,t)}:function(e,r,o,i){void 0===i&&(i=o),e[i]=r[o]}),r=this&&this.__exportStar||function(r,o){for(var i in r)"default"===i||Object.prototype.hasOwnProperty.call(o,i)||e(o,r,i)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.b2GetBlockSolve=exports.b2SetBlockSolve=exports.b2World=exports.b2BodyType=exports.b2Body=void 0,r(require("./common/b2_common"),exports),r(require("./common/b2_settings"),exports),r(require("./common/b2_math"),exports),r(require("./common/b2_draw"),exports),r(require("./common/b2_draw_helper"),exports),r(require("./common/b2_timer"),exports),r(require("./common/b2_augment"),exports),r(require("./collision/b2_collision"),exports),r(require("./collision/b2_distance"),exports),r(require("./collision/b2_broad_phase"),exports),r(require("./collision/b2_dynamic_tree"),exports),r(require("./collision/b2_time_of_impact"),exports),r(require("./collision/b2_collide_circle"),exports),r(require("./collision/b2_collide_polygon"),exports),r(require("./collision/b2_collide_edge"),exports),r(require("./collision/b2_shape"),exports),r(require("./collision/b2_circle_shape"),exports),r(require("./collision/b2_polygon_shape"),exports),r(require("./collision/b2_edge_shape"),exports),r(require("./collision/b2_chain_shape"),exports),r(require("./dynamics/b2_fixture"),exports);var o=require("./dynamics/b2_body");Object.defineProperty(exports,"b2Body",{enumerable:!0,get:function(){return o.b2Body}}),Object.defineProperty(exports,"b2BodyType",{enumerable:!0,get:function(){return o.b2BodyType}});var i=require("./dynamics/b2_world");Object.defineProperty(exports,"b2World",{enumerable:!0,get:function(){return i.b2World}}),r(require("./dynamics/b2_world_callbacks"),exports),r(require("./dynamics/b2_time_step"),exports),r(require("./dynamics/b2_contact_manager"),exports),r(require("./dynamics/b2_contact"),exports),r(require("./dynamics/b2_contact_factory"),exports);var t=require("./dynamics/b2_contact_solver");Object.defineProperty(exports,"b2SetBlockSolve",{enumerable:!0,get:function(){return t.b2SetBlockSolve}}),Object.defineProperty(exports,"b2GetBlockSolve",{enumerable:!0,get:function(){return t.b2GetBlockSolve}}),r(require("./dynamics/b2_joint"),exports),r(require("./dynamics/b2_area_joint"),exports),r(require("./dynamics/b2_distance_joint"),exports),r(require("./dynamics/b2_friction_joint"),exports),r(require("./dynamics/b2_gear_joint"),exports),r(require("./dynamics/b2_motor_joint"),exports),r(require("./dynamics/b2_mouse_joint"),exports),r(require("./dynamics/b2_prismatic_joint"),exports),r(require("./dynamics/b2_pulley_joint"),exports),r(require("./dynamics/b2_revolute_joint"),exports),r(require("./dynamics/b2_weld_joint"),exports),r(require("./dynamics/b2_wheel_joint"),exports),r(require("./rope/b2_rope"),exports);
},{"./common/b2_common":"ReKW","./common/b2_settings":"I6oK","./common/b2_math":"cQbL","./common/b2_draw":"lvls","./common/b2_draw_helper":"mgAn","./common/b2_timer":"ixAk","./common/b2_augment":"KzIc","./collision/b2_collision":"PKgf","./collision/b2_distance":"hp9S","./collision/b2_broad_phase":"q2ad","./collision/b2_dynamic_tree":"sfrf","./collision/b2_time_of_impact":"skt6","./collision/b2_collide_circle":"DoJb","./collision/b2_collide_polygon":"nWAU","./collision/b2_collide_edge":"bTYS","./collision/b2_shape":"stUN","./collision/b2_circle_shape":"HIjv","./collision/b2_polygon_shape":"tvYY","./collision/b2_edge_shape":"OKJP","./collision/b2_chain_shape":"papG","./dynamics/b2_fixture":"IcdW","./dynamics/b2_body":"rONj","./dynamics/b2_world":"H7LA","./dynamics/b2_world_callbacks":"G1MF","./dynamics/b2_time_step":"w6W3","./dynamics/b2_contact_manager":"PdJY","./dynamics/b2_contact":"UQyq","./dynamics/b2_contact_factory":"FpyL","./dynamics/b2_contact_solver":"DnH3","./dynamics/b2_joint":"Xq2i","./dynamics/b2_area_joint":"SxzW","./dynamics/b2_distance_joint":"xSy1","./dynamics/b2_friction_joint":"zgG7","./dynamics/b2_gear_joint":"RWFZ","./dynamics/b2_motor_joint":"mwAL","./dynamics/b2_mouse_joint":"BhEk","./dynamics/b2_prismatic_joint":"FAa8","./dynamics/b2_pulley_joint":"smnA","./dynamics/b2_revolute_joint":"ELTV","./dynamics/b2_weld_joint":"LRlb","./dynamics/b2_wheel_joint":"yJEF","./rope/b2_rope":"YV35"}],"HNse":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.box2dCoreFactory=void 0;const e=require("@box2d/core"),o=(o,t,r,a)=>{const d=e.b2World.Create(o),s=d.CreateBody(),y=new e.b2EdgeShape;return y.SetTwoSided(new e.b2Vec2(t.x,t.y),new e.b2Vec2(r.x,r.y)),s.CreateFixture({shape:y,density:a}),{name:"@box2d/core",createBoxShape:(o,t)=>(new e.b2PolygonShape).SetAsBox(o,t),createBoxBody(o,t,r,a){d.CreateBody({type:e.b2BodyType.b2_dynamicBody,position:{x:t,y:r}}).CreateFixture({shape:o,density:a})},step(e,o,t){d.Step(e,{velocityIterations:o,positionIterations:t})}}};exports.box2dCoreFactory=o;
},{"@box2d/core":"FjWk"}],"Ew5n":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,e=arguments[3];!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof t&&t.amd?t(["exports"],i):i((e=e||self).box2d={})}(this,function(t){"use strict";function e(t,e){return void 0!==t?t:e}const i=1e37,s=1e-5,o=s*s,n=3.14159265359,r=2,a=8,m=.1,l=2,h=.008,_=2/180*n,c=2*h,u=8,d=32,p=1,f=.2,y=8/180*n,x=2,B=x*x,S=.5*n,A=S*S,b=.2,C=.75,V=-1,g=.75,v=1,w=.25,M=.5,P=4,I=256,G=2.5,D=.5,F=.01,T=2/180*n;class L{constructor(t=0,e=0,i=0){this.major=0,this.minor=0,this.revision=0,this.major=t,this.minor=e,this.revision=i}toString(){return this.major+"."+this.minor+"."+this.revision}}const R=new L(2,3,2);function k(t,e){const i=new Array(t);for(let s=0;s<t;++s)i[s]=e(s);return i}function q(t,e=0){const i=new Array(t);for(let s=0;s<t;++s)i[s]=e;return i}const z=n/180,J=180/n,N=2*n,j=Math.abs;function E(t,e){return t<e?t:e}function O(t,e){return t>e?t:e}function X(t,e,i){return t<e?e:t>i?i:t}const U=isFinite;function Z(t){return t*t}function W(t){return 1/Math.sqrt(t)}const Q=Math.sqrt,H=Math.pow;const Y=Math.cos,K=Math.sin,$=Math.acos,tt=Math.asin,et=Math.atan2;class it{constructor(...t){if(t[0]instanceof Float32Array){if(2!==t[0].length)throw new Error;this.data=t[0]}else{const e="number"==typeof t[0]?t[0]:0,i="number"==typeof t[1]?t[1]:0;this.data=new Float32Array([e,i])}}get x(){return this.data[0]}set x(t){this.data[0]=t}get y(){return this.data[1]}set y(t){this.data[1]=t}Clone(){return new it(this.x,this.y)}SetZero(){return this.x=0,this.y=0,this}Set(t,e){return this.x=t,this.y=e,this}Copy(t){return this.x=t.x,this.y=t.y,this}SelfAdd(t){return this.x+=t.x,this.y+=t.y,this}SelfAddXY(t,e){return this.x+=t,this.y+=e,this}SelfSub(t){return this.x-=t.x,this.y-=t.y,this}SelfSubXY(t,e){return this.x-=t,this.y-=e,this}SelfMul(t){return this.x*=t,this.y*=t,this}SelfMulAdd(t,e){return this.x+=t*e.x,this.y+=t*e.y,this}SelfMulSub(t,e){return this.x-=t*e.x,this.y-=t*e.y,this}Dot(t){return this.x*t.x+this.y*t.y}Cross(t){return this.x*t.y-this.y*t.x}Length(){const t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}LengthSquared(){const t=this.x,e=this.y;return t*t+e*e}Normalize(){const t=this.Length();if(t>=s){const e=1/t;this.x*=e,this.y*=e}return t}SelfNormalize(){const t=this.Length();if(t>=s){const e=1/t;this.x*=e,this.y*=e}return this}SelfRotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.x;return this.x=e*s-i*this.y,this.y=i*s+e*this.y,this}SelfRotateCosSin(t,e){const i=this.x;return this.x=t*i-e*this.y,this.y=e*i+t*this.y,this}IsValid(){return isFinite(this.x)&&isFinite(this.y)}SelfCrossVS(t){const e=this.x;return this.x=t*this.y,this.y=-t*e,this}SelfCrossSV(t){const e=this.x;return this.x=-t*this.y,this.y=t*e,this}SelfMinV(t){return this.x=E(this.x,t.x),this.y=E(this.y,t.y),this}SelfMaxV(t){return this.x=O(this.x,t.x),this.y=O(this.y,t.y),this}SelfAbs(){return this.x=j(this.x),this.y=j(this.y),this}SelfNeg(){return this.x=-this.x,this.y=-this.y,this}SelfSkew(){const t=this.x;return this.x=-this.y,this.y=t,this}static MakeArray(t){return k(t,t=>new it)}static AbsV(t,e){return e.x=j(t.x),e.y=j(t.y),e}static MinV(t,e,i){return i.x=E(t.x,e.x),i.y=E(t.y,e.y),i}static MaxV(t,e,i){return i.x=O(t.x,e.x),i.y=O(t.y,e.y),i}static ClampV(t,e,i,s){return s.x=X(t.x,e.x,i.x),s.y=X(t.y,e.y,i.y),s}static RotateV(t,e,i){const s=t.x,o=t.y,n=Math.cos(e),r=Math.sin(e);return i.x=n*s-r*o,i.y=r*s+n*o,i}static DotVV(t,e){return t.x*e.x+t.y*e.y}static CrossVV(t,e){return t.x*e.y-t.y*e.x}static CrossVS(t,e,i){const s=t.x;return i.x=e*t.y,i.y=-e*s,i}static CrossVOne(t,e){const i=t.x;return e.x=t.y,e.y=-i,e}static CrossSV(t,e,i){const s=e.x;return i.x=-t*e.y,i.y=t*s,i}static CrossOneV(t,e){const i=t.x;return e.x=-t.y,e.y=i,e}static AddVV(t,e,i){return i.x=t.x+e.x,i.y=t.y+e.y,i}static SubVV(t,e,i){return i.x=t.x-e.x,i.y=t.y-e.y,i}static MulSV(t,e,i){return i.x=e.x*t,i.y=e.y*t,i}static MulVS(t,e,i){return i.x=t.x*e,i.y=t.y*e,i}static AddVMulSV(t,e,i,s){return s.x=t.x+e*i.x,s.y=t.y+e*i.y,s}static SubVMulSV(t,e,i,s){return s.x=t.x-e*i.x,s.y=t.y-e*i.y,s}static AddVCrossSV(t,e,i,s){const o=i.x;return s.x=t.x-e*i.y,s.y=t.y+e*o,s}static MidVV(t,e,i){return i.x=.5*(t.x+e.x),i.y=.5*(t.y+e.y),i}static ExtVV(t,e,i){return i.x=.5*(e.x-t.x),i.y=.5*(e.y-t.y),i}static IsEqualToV(t,e){return t.x===e.x&&t.y===e.y}static DistanceVV(t,e){const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)}static DistanceSquaredVV(t,e){const i=t.x-e.x,s=t.y-e.y;return i*i+s*s}static NegV(t,e){return e.x=-t.x,e.y=-t.y,e}}it.ZERO=new it(0,0),it.UNITX=new it(1,0),it.UNITY=new it(0,1),it.s_t0=new it,it.s_t1=new it,it.s_t2=new it,it.s_t3=new it;const st=new it(0,0);class ot{constructor(...t){if(t[0]instanceof Float32Array){if(3!==t[0].length)throw new Error;this.data=t[0]}else{const e="number"==typeof t[0]?t[0]:0,i="number"==typeof t[1]?t[1]:0,s="number"==typeof t[2]?t[2]:0;this.data=new Float32Array([e,i,s])}}get x(){return this.data[0]}set x(t){this.data[0]=t}get y(){return this.data[1]}set y(t){this.data[1]=t}get z(){return this.data[2]}set z(t){this.data[2]=t}Clone(){return new ot(this.x,this.y,this.z)}SetZero(){return this.x=0,this.y=0,this.z=0,this}SetXYZ(t,e,i){return this.x=t,this.y=e,this.z=i,this}Copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}SelfNeg(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}SelfAdd(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}SelfAddXYZ(t,e,i){return this.x+=t,this.y+=e,this.z+=i,this}SelfSub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}SelfSubXYZ(t,e,i){return this.x-=t,this.y-=e,this.z-=i,this}SelfMul(t){return this.x*=t,this.y*=t,this.z*=t,this}static DotV3V3(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static CrossV3V3(t,e,i){const s=t.x,o=t.y,n=t.z,r=e.x,a=e.y,m=e.z;return i.x=o*m-n*a,i.y=n*r-s*m,i.z=s*a-o*r,i}}ot.ZERO=new ot(0,0,0),ot.s_t0=new ot;class nt{constructor(){this.data=new Float32Array([1,0,0,1]),this.ex=new it(this.data.subarray(0,2)),this.ey=new it(this.data.subarray(2,4))}Clone(){return(new nt).Copy(this)}static FromVV(t,e){return(new nt).SetVV(t,e)}static FromSSSS(t,e,i,s){return(new nt).SetSSSS(t,e,i,s)}static FromAngle(t){return(new nt).SetAngle(t)}SetSSSS(t,e,i,s){return this.ex.Set(t,i),this.ey.Set(e,s),this}SetVV(t,e){return this.ex.Copy(t),this.ey.Copy(e),this}SetAngle(t){const e=Math.cos(t),i=Math.sin(t);return this.ex.Set(e,i),this.ey.Set(-i,e),this}Copy(t){return this.ex.Copy(t.ex),this.ey.Copy(t.ey),this}SetIdentity(){return this.ex.Set(1,0),this.ey.Set(0,1),this}SetZero(){return this.ex.SetZero(),this.ey.SetZero(),this}GetAngle(){return Math.atan2(this.ex.y,this.ex.x)}GetInverse(t){const e=this.ex.x,i=this.ey.x,s=this.ex.y,o=this.ey.y;let n=e*o-i*s;return 0!==n&&(n=1/n),t.ex.x=n*o,t.ey.x=-n*i,t.ex.y=-n*s,t.ey.y=n*e,t}Solve(t,e,i){const s=this.ex.x,o=this.ey.x,n=this.ex.y,r=this.ey.y;let a=s*r-o*n;return 0!==a&&(a=1/a),i.x=a*(r*t-o*e),i.y=a*(s*e-n*t),i}SelfAbs(){return this.ex.SelfAbs(),this.ey.SelfAbs(),this}SelfInv(){return this.GetInverse(this),this}SelfAddM(t){return this.ex.SelfAdd(t.ex),this.ey.SelfAdd(t.ey),this}SelfSubM(t){return this.ex.SelfSub(t.ex),this.ey.SelfSub(t.ey),this}static AbsM(t,e){const i=t.ex,s=t.ey;return e.ex.x=j(i.x),e.ex.y=j(i.y),e.ey.x=j(s.x),e.ey.y=j(s.y),e}static MulMV(t,e,i){const s=t.ex,o=t.ey,n=e.x,r=e.y;return i.x=s.x*n+o.x*r,i.y=s.y*n+o.y*r,i}static MulTMV(t,e,i){const s=t.ex,o=t.ey,n=e.x,r=e.y;return i.x=s.x*n+s.y*r,i.y=o.x*n+o.y*r,i}static AddMM(t,e,i){const s=t.ex,o=t.ey,n=e.ex,r=e.ey;return i.ex.x=s.x+n.x,i.ex.y=s.y+n.y,i.ey.x=o.x+r.x,i.ey.y=o.y+r.y,i}static MulMM(t,e,i){const s=t.ex.x,o=t.ex.y,n=t.ey.x,r=t.ey.y,a=e.ex.x,m=e.ex.y,l=e.ey.x,h=e.ey.y;return i.ex.x=s*a+n*m,i.ex.y=o*a+r*m,i.ey.x=s*l+n*h,i.ey.y=o*l+r*h,i}static MulTMM(t,e,i){const s=t.ex.x,o=t.ex.y,n=t.ey.x,r=t.ey.y,a=e.ex.x,m=e.ex.y,l=e.ey.x,h=e.ey.y;return i.ex.x=s*a+o*m,i.ex.y=n*a+r*m,i.ey.x=s*l+o*h,i.ey.y=n*l+r*h,i}}nt.IDENTITY=new nt;class rt{constructor(){this.data=new Float32Array([1,0,0,0,1,0,0,0,1]),this.ex=new ot(this.data.subarray(0,3)),this.ey=new ot(this.data.subarray(3,6)),this.ez=new ot(this.data.subarray(6,9))}Clone(){return(new rt).Copy(this)}SetVVV(t,e,i){return this.ex.Copy(t),this.ey.Copy(e),this.ez.Copy(i),this}Copy(t){return this.ex.Copy(t.ex),this.ey.Copy(t.ey),this.ez.Copy(t.ez),this}SetIdentity(){return this.ex.SetXYZ(1,0,0),this.ey.SetXYZ(0,1,0),this.ez.SetXYZ(0,0,1),this}SetZero(){return this.ex.SetZero(),this.ey.SetZero(),this.ez.SetZero(),this}SelfAddM(t){return this.ex.SelfAdd(t.ex),this.ey.SelfAdd(t.ey),this.ez.SelfAdd(t.ez),this}Solve33(t,e,i,s){const o=this.ex.x,n=this.ex.y,r=this.ex.z,a=this.ey.x,m=this.ey.y,l=this.ey.z,h=this.ez.x,_=this.ez.y,c=this.ez.z;let u=o*(m*c-l*_)+n*(l*h-a*c)+r*(a*_-m*h);return 0!==u&&(u=1/u),s.x=u*(t*(m*c-l*_)+e*(l*h-a*c)+i*(a*_-m*h)),s.y=u*(o*(e*c-i*_)+n*(i*h-t*c)+r*(t*_-e*h)),s.z=u*(o*(m*i-l*e)+n*(l*t-a*i)+r*(a*e-m*t)),s}Solve22(t,e,i){const s=this.ex.x,o=this.ey.x,n=this.ex.y,r=this.ey.y;let a=s*r-o*n;return 0!==a&&(a=1/a),i.x=a*(r*t-o*e),i.y=a*(s*e-n*t),i}GetInverse22(t){const e=this.ex.x,i=this.ey.x,s=this.ex.y,o=this.ey.y;let n=e*o-i*s;0!==n&&(n=1/n),t.ex.x=n*o,t.ey.x=-n*i,t.ex.z=0,t.ex.y=-n*s,t.ey.y=n*e,t.ey.z=0,t.ez.x=0,t.ez.y=0,t.ez.z=0}GetSymInverse33(t){let e=ot.DotV3V3(this.ex,ot.CrossV3V3(this.ey,this.ez,ot.s_t0));0!==e&&(e=1/e);const i=this.ex.x,s=this.ey.x,o=this.ez.x,n=this.ey.y,r=this.ez.y,a=this.ez.z;t.ex.x=e*(n*a-r*r),t.ex.y=e*(o*r-s*a),t.ex.z=e*(s*r-o*n),t.ey.x=t.ex.y,t.ey.y=e*(i*a-o*o),t.ey.z=e*(o*s-i*r),t.ez.x=t.ex.z,t.ez.y=t.ey.z,t.ez.z=e*(i*n-s*s)}static MulM33V3(t,e,i){const s=e.x,o=e.y,n=e.z;return i.x=t.ex.x*s+t.ey.x*o+t.ez.x*n,i.y=t.ex.y*s+t.ey.y*o+t.ez.y*n,i.z=t.ex.z*s+t.ey.z*o+t.ez.z*n,i}static MulM33XYZ(t,e,i,s,o){return o.x=t.ex.x*e+t.ey.x*i+t.ez.x*s,o.y=t.ex.y*e+t.ey.y*i+t.ez.y*s,o.z=t.ex.z*e+t.ey.z*i+t.ez.z*s,o}static MulM33V2(t,e,i){const s=e.x,o=e.y;return i.x=t.ex.x*s+t.ey.x*o,i.y=t.ex.y*s+t.ey.y*o,i}static MulM33XY(t,e,i,s){return s.x=t.ex.x*e+t.ey.x*i,s.y=t.ex.y*e+t.ey.y*i,s}}rt.IDENTITY=new rt;class at{constructor(t=0){this.s=0,this.c=1,t&&(this.s=Math.sin(t),this.c=Math.cos(t))}Clone(){return(new at).Copy(this)}Copy(t){return this.s=t.s,this.c=t.c,this}SetAngle(t){return this.s=Math.sin(t),this.c=Math.cos(t),this}SetIdentity(){return this.s=0,this.c=1,this}GetAngle(){return Math.atan2(this.s,this.c)}GetXAxis(t){return t.x=this.c,t.y=this.s,t}GetYAxis(t){return t.x=-this.s,t.y=this.c,t}static MulRR(t,e,i){const s=t.c,o=t.s,n=e.c,r=e.s;return i.s=o*n+s*r,i.c=s*n-o*r,i}static MulTRR(t,e,i){const s=t.c,o=t.s,n=e.c,r=e.s;return i.s=s*r-o*n,i.c=s*n+o*r,i}static MulRV(t,e,i){const s=t.c,o=t.s,n=e.x,r=e.y;return i.x=s*n-o*r,i.y=o*n+s*r,i}static MulTRV(t,e,i){const s=t.c,o=t.s,n=e.x,r=e.y;return i.x=s*n+o*r,i.y=-o*n+s*r,i}}at.IDENTITY=new at;class mt{constructor(){this.p=new it,this.q=new at}Clone(){return(new mt).Copy(this)}Copy(t){return this.p.Copy(t.p),this.q.Copy(t.q),this}SetIdentity(){return this.p.SetZero(),this.q.SetIdentity(),this}SetPositionRotation(t,e){return this.p.Copy(t),this.q.Copy(e),this}SetPositionAngle(t,e){return this.p.Copy(t),this.q.SetAngle(e),this}SetPosition(t){return this.p.Copy(t),this}SetPositionXY(t,e){return this.p.Set(t,e),this}SetRotation(t){return this.q.Copy(t),this}SetRotationAngle(t){return this.q.SetAngle(t),this}GetPosition(){return this.p}GetRotation(){return this.q}GetRotationAngle(){return this.q.GetAngle()}GetAngle(){return this.q.GetAngle()}static MulXV(t,e,i){const s=t.q.c,o=t.q.s,n=e.x,r=e.y;return i.x=s*n-o*r+t.p.x,i.y=o*n+s*r+t.p.y,i}static MulTXV(t,e,i){const s=t.q.c,o=t.q.s,n=e.x-t.p.x,r=e.y-t.p.y;return i.x=s*n+o*r,i.y=-o*n+s*r,i}static MulXX(t,e,i){return at.MulRR(t.q,e.q,i.q),it.AddVV(at.MulRV(t.q,e.p,i.p),t.p,i.p),i}static MulTXX(t,e,i){return at.MulTRR(t.q,e.q,i.q),at.MulTRV(t.q,it.SubVV(e.p,t.p,i.p),i.p),i}}mt.IDENTITY=new mt;class lt{constructor(){this.localCenter=new it,this.c0=new it,this.c=new it,this.a0=0,this.a=0,this.alpha0=0}Clone(){return(new lt).Copy(this)}Copy(t){return this.localCenter.Copy(t.localCenter),this.c0.Copy(t.c0),this.c.Copy(t.c),this.a0=t.a0,this.a=t.a,this.alpha0=t.alpha0,this}GetTransform(t,e){const i=1-e;t.p.x=i*this.c0.x+e*this.c.x,t.p.y=i*this.c0.y+e*this.c.y;const s=i*this.a0+e*this.a;return t.q.SetAngle(s),t.p.SelfSub(at.MulRV(t.q,this.localCenter,it.s_t0)),t}Advance(t){const e=(t-this.alpha0)/(1-this.alpha0),i=1-e;this.c0.x=i*this.c0.x+e*this.c.x,this.c0.y=i*this.c0.y+e*this.c.y,this.a0=i*this.a0+e*this.a,this.alpha0=t}Normalize(){const t=N*Math.floor(this.a0/N);this.a0-=t,this.a-=t}}class ht{constructor(...t){if(t[0]instanceof Float32Array){if(4!==t[0].length)throw new Error;this.data=t[0]}else{const e="number"==typeof t[0]?t[0]:.5,i="number"==typeof t[1]?t[1]:.5,s="number"==typeof t[2]?t[2]:.5,o="number"==typeof t[3]?t[3]:1;this.data=new Float32Array([e,i,s,o])}}get r(){return this.data[0]}set r(t){this.data[0]=t}get g(){return this.data[1]}set g(t){this.data[1]=t}get b(){return this.data[2]}set b(t){this.data[2]=t}get a(){return this.data[3]}set a(t){this.data[3]=t}Clone(){return(new ht).Copy(this)}Copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}IsEqual(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}IsZero(){return 0===this.r&&0===this.g&&0===this.b&&0===this.a}Set(t,e,i,s=this.a){this.SetRGBA(t,e,i,s)}SetByteRGB(t,e,i){return this.r=t/255,this.g=e/255,this.b=i/255,this}SetByteRGBA(t,e,i,s){return this.r=t/255,this.g=e/255,this.b=i/255,this.a=s/255,this}SetRGB(t,e,i){return this.r=t,this.g=e,this.b=i,this}SetRGBA(t,e,i,s){return this.r=t,this.g=e,this.b=i,this.a=s,this}SelfAdd(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this}Add(t,e){return e.r=this.r+t.r,e.g=this.g+t.g,e.b=this.b+t.b,e.a=this.a+t.a,e}SelfSub(t){return this.r-=t.r,this.g-=t.g,this.b-=t.b,this.a-=t.a,this}Sub(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,e.a=this.a-t.a,e}SelfMul(t){return this.r*=t,this.g*=t,this.b*=t,this.a*=t,this}Mul(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,e.a=this.a*t,e}Mix(t,e){ht.MixColors(this,t,e)}static MixColors(t,e,i){const s=i*(e.r-t.r),o=i*(e.g-t.g),n=i*(e.b-t.b),r=i*(e.a-t.a);t.r+=s,t.g+=o,t.b+=n,t.a+=r,e.r-=s,e.g-=o,e.b-=n,e.a-=r}MakeStyleString(t=this.a){return ht.MakeStyleString(this.r,this.g,this.b,t)}static MakeStyleString(t,e,i,s=1){return t*=255,e*=255,i*=255,s<1?`rgba(${t},${e},${i},${s})`:`rgb(${t},${e},${i})`}}var _t;ht.ZERO=new ht(0,0,0,0),ht.RED=new ht(1,0,0),ht.GREEN=new ht(0,1,0),ht.BLUE=new ht(0,0,1),(_t=t.b2DrawFlags||(t.b2DrawFlags={}))[_t.e_none=0]="e_none",_t[_t.e_shapeBit=1]="e_shapeBit",_t[_t.e_jointBit=2]="e_jointBit",_t[_t.e_aabbBit=4]="e_aabbBit",_t[_t.e_pairBit=8]="e_pairBit",_t[_t.e_centerOfMassBit=16]="e_centerOfMassBit",_t[_t.e_particleBit=32]="e_particleBit",_t[_t.e_controllerBit=64]="e_controllerBit",_t[_t.e_all=63]="e_all";class ct{constructor(){this.m_start=Date.now()}Reset(){return this.m_start=Date.now(),this}GetMilliseconds(){return Date.now()-this.m_start}}class ut{constructor(t){this.m_stack=[],this.m_count=0,this.m_stack=k(t,t=>null),this.m_count=0}Reset(){return this.m_count=0,this}Push(t){this.m_stack[this.m_count]=t,this.m_count++}Pop(){this.m_count--;const t=this.m_stack[this.m_count];if(this.m_stack[this.m_count]=null,null===t)throw new Error;return t}GetCount(){return this.m_count}}class dt{constructor(){this.m_buffer=it.MakeArray(2),this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0}Copy(t){return t.m_vertices===t.m_buffer?(this.m_vertices=this.m_buffer,this.m_buffer[0].Copy(t.m_buffer[0]),this.m_buffer[1].Copy(t.m_buffer[1])):this.m_vertices=t.m_vertices,this.m_count=t.m_count,this.m_radius=t.m_radius,this}Reset(){return this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0,this}SetShape(t,e){t.SetupDistanceProxy(this,e)}SetVerticesRadius(t,e,i){this.m_vertices=t,this.m_count=e,this.m_radius=i}GetSupport(t){let e=0,i=it.DotVV(this.m_vertices[0],t);for(let s=1;s<this.m_count;++s){const o=it.DotVV(this.m_vertices[s],t);o>i&&(e=s,i=o)}return e}GetSupportVertex(t){let e=0,i=it.DotVV(this.m_vertices[0],t);for(let s=1;s<this.m_count;++s){const o=it.DotVV(this.m_vertices[s],t);o>i&&(e=s,i=o)}return this.m_vertices[e]}GetVertexCount(){return this.m_count}GetVertex(t){return this.m_vertices[t]}}class pt{constructor(){this.metric=0,this.count=0,this.indexA=[0,0,0],this.indexB=[0,0,0]}Reset(){return this.metric=0,this.count=0,this}}class ft{constructor(){this.proxyA=new dt,this.proxyB=new dt,this.transformA=new mt,this.transformB=new mt,this.useRadii=!1}Reset(){return this.proxyA.Reset(),this.proxyB.Reset(),this.transformA.SetIdentity(),this.transformB.SetIdentity(),this.useRadii=!1,this}}class yt{constructor(){this.pointA=new it,this.pointB=new it,this.distance=0,this.iterations=0}Reset(){return this.pointA.SetZero(),this.pointB.SetZero(),this.distance=0,this.iterations=0,this}}t.b2_gjkCalls=0,t.b2_gjkIters=0,t.b2_gjkMaxIters=0;class xt{constructor(){this.wA=new it,this.wB=new it,this.w=new it,this.a=0,this.indexA=0,this.indexB=0}Copy(t){return this.wA.Copy(t.wA),this.wB.Copy(t.wB),this.w.Copy(t.w),this.a=t.a,this.indexA=t.indexA,this.indexB=t.indexB,this}}class Bt{constructor(){this.m_v1=new xt,this.m_v2=new xt,this.m_v3=new xt,this.m_vertices=[],this.m_count=0,this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3}ReadCache(t,e,i,o,n){this.m_count=t.count;const r=this.m_vertices;for(let s=0;s<this.m_count;++s){const a=r[s];a.indexA=t.indexA[s],a.indexB=t.indexB[s];const m=e.GetVertex(a.indexA),l=o.GetVertex(a.indexB);mt.MulXV(i,m,a.wA),mt.MulXV(n,l,a.wB),it.SubVV(a.wB,a.wA,a.w),a.a=0}if(this.m_count>1){const e=t.metric,i=this.GetMetric();(i<.5*e||2*e<i||i<s)&&(this.m_count=0)}if(0===this.m_count){const t=r[0];t.indexA=0,t.indexB=0;const s=e.GetVertex(0),a=o.GetVertex(0);mt.MulXV(i,s,t.wA),mt.MulXV(n,a,t.wB),it.SubVV(t.wB,t.wA,t.w),t.a=1,this.m_count=1}}WriteCache(t){t.metric=this.GetMetric(),t.count=this.m_count;const e=this.m_vertices;for(let i=0;i<this.m_count;++i)t.indexA[i]=e[i].indexA,t.indexB[i]=e[i].indexB}GetSearchDirection(t){switch(this.m_count){case 1:return it.NegV(this.m_v1.w,t);case 2:{const e=it.SubVV(this.m_v2.w,this.m_v1.w,t);return it.CrossVV(e,it.NegV(this.m_v1.w,it.s_t0))>0?it.CrossOneV(e,t):it.CrossVOne(e,t)}default:return t.SetZero()}}GetClosestPoint(t){switch(this.m_count){case 0:return t.SetZero();case 1:return t.Copy(this.m_v1.w);case 2:return t.Set(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);case 3:default:return t.SetZero()}}GetWitnessPoints(t,e){switch(this.m_count){case 0:break;case 1:t.Copy(this.m_v1.wA),e.Copy(this.m_v1.wB);break;case 2:t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,e.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,e.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:e.x=t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,e.y=t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y}}GetMetric(){switch(this.m_count){case 0:case 1:return 0;case 2:return it.DistanceVV(this.m_v1.w,this.m_v2.w);case 3:return it.CrossVV(it.SubVV(this.m_v2.w,this.m_v1.w,it.s_t0),it.SubVV(this.m_v3.w,this.m_v1.w,it.s_t1));default:return 0}}Solve2(){const t=this.m_v1.w,e=this.m_v2.w,i=it.SubVV(e,t,Bt.s_e12),s=-it.DotVV(t,i);if(s<=0)return this.m_v1.a=1,void(this.m_count=1);const o=it.DotVV(e,i);if(o<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);const n=1/(o+s);this.m_v1.a=o*n,this.m_v2.a=s*n,this.m_count=2}Solve3(){const t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w,s=it.SubVV(e,t,Bt.s_e12),o=it.DotVV(t,s),n=it.DotVV(e,s),r=-o,a=it.SubVV(i,t,Bt.s_e13),m=it.DotVV(t,a),l=it.DotVV(i,a),h=-m,_=it.SubVV(i,e,Bt.s_e23),c=it.DotVV(e,_),u=it.DotVV(i,_),d=-c,p=it.CrossVV(s,a),f=p*it.CrossVV(e,i),y=p*it.CrossVV(i,t),x=p*it.CrossVV(t,e);if(r<=0&&h<=0)return this.m_v1.a=1,void(this.m_count=1);if(n>0&&r>0&&x<=0){const t=1/(n+r);return this.m_v1.a=n*t,this.m_v2.a=r*t,void(this.m_count=2)}if(l>0&&h>0&&y<=0){const t=1/(l+h);return this.m_v1.a=l*t,this.m_v3.a=h*t,this.m_count=2,void this.m_v2.Copy(this.m_v3)}if(n<=0&&d<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);if(l<=0&&u<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v3);if(u>0&&d>0&&f<=0){const t=1/(u+d);return this.m_v2.a=u*t,this.m_v3.a=d*t,this.m_count=2,void this.m_v1.Copy(this.m_v3)}const B=1/(f+y+x);this.m_v1.a=f*B,this.m_v2.a=y*B,this.m_v3.a=x*B,this.m_count=3}}Bt.s_e12=new it,Bt.s_e13=new it,Bt.s_e23=new it;const St=new Bt,At=[0,0,0],bt=[0,0,0],Ct=new it,Vt=new it,gt=new it,vt=new it,wt=new it;function Mt(e,i,n){++t.b2_gjkCalls;const r=n.proxyA,a=n.proxyB,m=n.transformA,l=n.transformB,h=St;h.ReadCache(i,r,m,a,l);const _=h.m_vertices,c=At,u=bt;let d=0,p=0;for(;p<20;){d=h.m_count;for(let t=0;t<d;++t)c[t]=_[t].indexA,u[t]=_[t].indexB;switch(h.m_count){case 1:break;case 2:h.Solve2();break;case 3:h.Solve3()}if(3===h.m_count)break;const e=h.GetSearchDirection(Vt);if(e.LengthSquared()<o)break;const i=_[h.m_count];i.indexA=r.GetSupport(at.MulTRV(m.q,it.NegV(e,it.s_t0),vt)),mt.MulXV(m,r.GetVertex(i.indexA),i.wA),i.indexB=a.GetSupport(at.MulTRV(l.q,e,wt)),mt.MulXV(l,a.GetVertex(i.indexB),i.wB),it.SubVV(i.wB,i.wA,i.w),++p,++t.b2_gjkIters;let s=!1;for(let t=0;t<d;++t)if(i.indexA===c[t]&&i.indexB===u[t]){s=!0;break}if(s)break;++h.m_count}if(t.b2_gjkMaxIters=O(t.b2_gjkMaxIters,p),h.GetWitnessPoints(e.pointA,e.pointB),e.distance=it.DistanceVV(e.pointA,e.pointB),e.iterations=p,h.WriteCache(i),n.useRadii){const t=r.m_radius,i=a.m_radius;if(e.distance>t+i&&e.distance>s){e.distance-=t+i;const s=it.SubVV(e.pointB,e.pointA,gt);s.Normalize(),e.pointA.SelfMulAdd(t,s),e.pointB.SelfMulSub(i,s)}else{const t=it.MidVV(e.pointA,e.pointB,Ct);e.pointA.Copy(t),e.pointB.Copy(t),e.distance=0}}}const Pt=new it,It=new Bt,Gt=new it,Dt=new it,Ft=new it,Tt=new it,Lt=new it,Rt=new it;var kt,qt,zt;(kt=t.b2ContactFeatureType||(t.b2ContactFeatureType={}))[kt.e_vertex=0]="e_vertex",kt[kt.e_face=1]="e_face";class Jt{constructor(){this._key=0,this._key_invalid=!1,this._indexA=0,this._indexB=0,this._typeA=0,this._typeB=0}get key(){return this._key_invalid&&(this._key_invalid=!1,this._key=this._indexA|this._indexB<<8|this._typeA<<16|this._typeB<<24),this._key}set key(t){this._key=t,this._key_invalid=!1,this._indexA=255&this._key,this._indexB=this._key>>8&255,this._typeA=this._key>>16&255,this._typeB=this._key>>24&255}get indexA(){return this._indexA}set indexA(t){this._indexA=t,this._key_invalid=!0}get indexB(){return this._indexB}set indexB(t){this._indexB=t,this._key_invalid=!0}get typeA(){return this._typeA}set typeA(t){this._typeA=t,this._key_invalid=!0}get typeB(){return this._typeB}set typeB(t){this._typeB=t,this._key_invalid=!0}}class Nt{constructor(){this.cf=new Jt}Copy(t){return this.key=t.key,this}Clone(){return(new Nt).Copy(this)}get key(){return this.cf.key}set key(t){this.cf.key=t}}class jt{constructor(){this.localPoint=new it,this.normalImpulse=0,this.tangentImpulse=0,this.id=new Nt}static MakeArray(t){return k(t,t=>new jt)}Reset(){this.localPoint.SetZero(),this.normalImpulse=0,this.tangentImpulse=0,this.id.key=0}Copy(t){return this.localPoint.Copy(t.localPoint),this.normalImpulse=t.normalImpulse,this.tangentImpulse=t.tangentImpulse,this.id.Copy(t.id),this}}(qt=t.b2ManifoldType||(t.b2ManifoldType={}))[qt.e_unknown=-1]="e_unknown",qt[qt.e_circles=0]="e_circles",qt[qt.e_faceA=1]="e_faceA",qt[qt.e_faceB=2]="e_faceB";class Et{constructor(){this.points=jt.MakeArray(r),this.localNormal=new it,this.localPoint=new it,this.type=t.b2ManifoldType.e_unknown,this.pointCount=0}Reset(){for(let t=0;t<r;++t)this.points[t].Reset();this.localNormal.SetZero(),this.localPoint.SetZero(),this.type=t.b2ManifoldType.e_unknown,this.pointCount=0}Copy(t){this.pointCount=t.pointCount;for(let e=0;e<r;++e)this.points[e].Copy(t.points[e]);return this.localNormal.Copy(t.localNormal),this.localPoint.Copy(t.localPoint),this.type=t.type,this}Clone(){return(new Et).Copy(this)}}class Ot{constructor(){this.normal=new it,this.points=it.MakeArray(r),this.separations=q(r)}Initialize(e,i,s,n,r){if(0!==e.pointCount)switch(e.type){case t.b2ManifoldType.e_circles:{this.normal.Set(1,0);const t=mt.MulXV(i,e.localPoint,Ot.Initialize_s_pointA),a=mt.MulXV(n,e.points[0].localPoint,Ot.Initialize_s_pointB);it.DistanceSquaredVV(t,a)>o&&it.SubVV(a,t,this.normal).SelfNormalize();const m=it.AddVMulSV(t,s,this.normal,Ot.Initialize_s_cA),l=it.SubVMulSV(a,r,this.normal,Ot.Initialize_s_cB);it.MidVV(m,l,this.points[0]),this.separations[0]=it.DotVV(it.SubVV(l,m,it.s_t0),this.normal);break}case t.b2ManifoldType.e_faceA:{at.MulRV(i.q,e.localNormal,this.normal);const t=mt.MulXV(i,e.localPoint,Ot.Initialize_s_planePoint);for(let i=0;i<e.pointCount;++i){const o=mt.MulXV(n,e.points[i].localPoint,Ot.Initialize_s_clipPoint),a=s-it.DotVV(it.SubVV(o,t,it.s_t0),this.normal),m=it.AddVMulSV(o,a,this.normal,Ot.Initialize_s_cA),l=it.SubVMulSV(o,r,this.normal,Ot.Initialize_s_cB);it.MidVV(m,l,this.points[i]),this.separations[i]=it.DotVV(it.SubVV(l,m,it.s_t0),this.normal)}break}case t.b2ManifoldType.e_faceB:{at.MulRV(n.q,e.localNormal,this.normal);const t=mt.MulXV(n,e.localPoint,Ot.Initialize_s_planePoint);for(let o=0;o<e.pointCount;++o){const n=mt.MulXV(i,e.points[o].localPoint,Ot.Initialize_s_clipPoint),a=r-it.DotVV(it.SubVV(n,t,it.s_t0),this.normal),m=it.AddVMulSV(n,a,this.normal,Ot.Initialize_s_cB),l=it.SubVMulSV(n,s,this.normal,Ot.Initialize_s_cA);it.MidVV(l,m,this.points[o]),this.separations[o]=it.DotVV(it.SubVV(l,m,it.s_t0),this.normal)}this.normal.SelfNeg();break}}}}Ot.Initialize_s_pointA=new it,Ot.Initialize_s_pointB=new it,Ot.Initialize_s_cA=new it,Ot.Initialize_s_cB=new it,Ot.Initialize_s_planePoint=new it,Ot.Initialize_s_clipPoint=new it,(zt=t.b2PointState||(t.b2PointState={}))[zt.b2_nullState=0]="b2_nullState",zt[zt.b2_addState=1]="b2_addState",zt[zt.b2_persistState=2]="b2_persistState",zt[zt.b2_removeState=3]="b2_removeState";class Xt{constructor(){this.v=new it,this.id=new Nt}static MakeArray(t){return k(t,t=>new Xt)}Copy(t){return this.v.Copy(t.v),this.id.Copy(t.id),this}}class Ut{constructor(){this.p1=new it,this.p2=new it,this.maxFraction=1}Copy(t){return this.p1.Copy(t.p1),this.p2.Copy(t.p2),this.maxFraction=t.maxFraction,this}}class Zt{constructor(){this.normal=new it,this.fraction=0}Copy(t){return this.normal.Copy(t.normal),this.fraction=t.fraction,this}}class Wt{constructor(){this.lowerBound=new it,this.upperBound=new it,this.m_cache_center=new it,this.m_cache_extent=new it}Copy(t){return this.lowerBound.Copy(t.lowerBound),this.upperBound.Copy(t.upperBound),this}IsValid(){return!!this.lowerBound.IsValid()&&(!!this.upperBound.IsValid()&&(!(this.upperBound.x<this.lowerBound.x)&&!(this.upperBound.y<this.lowerBound.y)))}GetCenter(){return it.MidVV(this.lowerBound,this.upperBound,this.m_cache_center)}GetExtents(){return it.ExtVV(this.lowerBound,this.upperBound,this.m_cache_extent)}GetPerimeter(){return 2*(this.upperBound.x-this.lowerBound.x+(this.upperBound.y-this.lowerBound.y))}Combine1(t){return this.lowerBound.x=E(this.lowerBound.x,t.lowerBound.x),this.lowerBound.y=E(this.lowerBound.y,t.lowerBound.y),this.upperBound.x=O(this.upperBound.x,t.upperBound.x),this.upperBound.y=O(this.upperBound.y,t.upperBound.y),this}Combine2(t,e){return this.lowerBound.x=E(t.lowerBound.x,e.lowerBound.x),this.lowerBound.y=E(t.lowerBound.y,e.lowerBound.y),this.upperBound.x=O(t.upperBound.x,e.upperBound.x),this.upperBound.y=O(t.upperBound.y,e.upperBound.y),this}static Combine(t,e,i){return i.Combine2(t,e),i}Contains(t){return!(this.lowerBound.x<=t.lowerBound.x)&&(!(this.lowerBound.y<=t.lowerBound.y)&&(!(t.upperBound.x<=this.upperBound.x)&&!(t.upperBound.y<=this.upperBound.y)))}RayCast(t,e){let o=-i,n=i;const r=e.p1.x,a=e.p1.y,m=e.p2.x-e.p1.x,l=e.p2.y-e.p1.y,h=j(m),_=j(l),c=t.normal;if(h<s){if(r<this.lowerBound.x||this.upperBound.x<r)return!1}else{const t=1/m;let e=(this.lowerBound.x-r)*t,i=(this.upperBound.x-r)*t,s=-1;if(e>i){const t=e;e=i,i=t,s=1}if(e>o&&(c.x=s,c.y=0,o=e),o>(n=E(n,i)))return!1}if(_<s){if(a<this.lowerBound.y||this.upperBound.y<a)return!1}else{const t=1/l;let e=(this.lowerBound.y-a)*t,i=(this.upperBound.y-a)*t,s=-1;if(e>i){const t=e;e=i,i=t,s=1}if(e>o&&(c.x=0,c.y=s,o=e),o>(n=E(n,i)))return!1}return!(o<0||e.maxFraction<o)&&(t.fraction=o,!0)}TestContain(t){return!(t.x<this.lowerBound.x||this.upperBound.x<t.x)&&!(t.y<this.lowerBound.y||this.upperBound.y<t.y)}TestOverlap(t){return!(this.upperBound.x<t.lowerBound.x)&&(!(this.upperBound.y<t.lowerBound.y)&&(!(t.upperBound.x<this.lowerBound.x)&&!(t.upperBound.y<this.lowerBound.y)))}}function Qt(t,e){return!(t.upperBound.x<e.lowerBound.x)&&(!(t.upperBound.y<e.lowerBound.y)&&(!(e.upperBound.x<t.lowerBound.x)&&!(e.upperBound.y<t.lowerBound.y)))}function Ht(e,i,s,o,n){let r=0;const a=i[0],m=i[1],l=it.DotVV(s,a.v)-o,h=it.DotVV(s,m.v)-o;if(l<=0&&e[r++].Copy(a),h<=0&&e[r++].Copy(m),l*h<0){const i=l/(l-h),s=e[r].v;s.x=a.v.x+i*(m.v.x-a.v.x),s.y=a.v.y+i*(m.v.y-a.v.y);const o=e[r].id;o.cf.indexA=n,o.cf.indexB=a.id.cf.indexB,o.cf.typeA=t.b2ContactFeatureType.e_vertex,o.cf.typeB=t.b2ContactFeatureType.e_face,++r}return r}const Yt=new ft,Kt=new pt,$t=new yt;function te(t,e,i,o,n,r){const a=Yt.Reset();a.proxyA.SetShape(t,e),a.proxyB.SetShape(i,o),a.transformA.Copy(n),a.transformB.Copy(r),a.useRadii=!0;const m=Kt.Reset();m.count=0;const l=$t.Reset();return Mt(l,m,a),l.distance<10*s}function ee(t){if(null===t)throw new Error;return t}class ie{constructor(t=0){this.m_id=0,this.aabb=new Wt,this._userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=0,this.m_id=t}get userData(){if(null===this._userData)throw new Error;return this._userData}set userData(t){if(null!==this._userData)throw new Error;this._userData=t}Reset(){this._userData=null}IsLeaf(){return null===this.child1}}class se{constructor(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0,this.m_stack=new ut(256)}Query(t,e){const i=this.m_stack.Reset();for(i.Push(this.m_root);i.GetCount()>0;){const s=i.Pop();if(null!==s&&s.aabb.TestOverlap(t))if(s.IsLeaf()){if(!e(s))return}else i.Push(s.child1),i.Push(s.child2)}}QueryPoint(t,e){const i=this.m_stack.Reset();for(i.Push(this.m_root);i.GetCount()>0;){const s=i.Pop();if(null!==s&&s.aabb.TestContain(t))if(s.IsLeaf()){if(!e(s))return}else i.Push(s.child1),i.Push(s.child2)}}RayCast(t,e){const i=t.p1,s=t.p2,o=it.SubVV(s,i,se.s_r);o.Normalize();const n=it.CrossOneV(o,se.s_v),r=it.AbsV(n,se.s_abs_v);let a=t.maxFraction;const m=se.s_segmentAABB;let l=i.x+a*(s.x-i.x),h=i.y+a*(s.y-i.y);m.lowerBound.x=E(i.x,l),m.lowerBound.y=E(i.y,h),m.upperBound.x=O(i.x,l),m.upperBound.y=O(i.y,h);const _=this.m_stack.Reset();for(_.Push(this.m_root);_.GetCount()>0;){const o=_.Pop();if(null===o)continue;if(!Qt(o.aabb,m))continue;const c=o.aabb.GetCenter(),u=o.aabb.GetExtents();if(!(j(it.DotVV(n,it.SubVV(i,c,it.s_t0)))-it.DotVV(r,u)>0))if(o.IsLeaf()){const n=se.s_subInput;n.p1.Copy(t.p1),n.p2.Copy(t.p2),n.maxFraction=a;const r=e(n,o);if(0===r)return;r>0&&(a=r,l=i.x+a*(s.x-i.x),h=i.y+a*(s.y-i.y),m.lowerBound.x=E(i.x,l),m.lowerBound.y=E(i.y,h),m.upperBound.x=O(i.x,l),m.upperBound.y=O(i.y,h))}else _.Push(o.child1),_.Push(o.child2)}}AllocateNode(){if(null!==this.m_freeList){const t=this.m_freeList;return this.m_freeList=t.parent,t.parent=null,t.child1=null,t.child2=null,t.height=0,t}return new ie(se.s_node_id++)}FreeNode(t){t.parent=this.m_freeList,t.child1=null,t.child2=null,t.height=-1,t.Reset(),this.m_freeList=t}CreateProxy(t,e){const i=this.AllocateNode(),s=m,o=m;return i.aabb.lowerBound.x=t.lowerBound.x-s,i.aabb.lowerBound.y=t.lowerBound.y-o,i.aabb.upperBound.x=t.upperBound.x+s,i.aabb.upperBound.y=t.upperBound.y+o,i.userData=e,i.height=0,this.InsertLeaf(i),i}DestroyProxy(t){this.RemoveLeaf(t),this.FreeNode(t)}MoveProxy(t,e,i){if(t.aabb.Contains(e))return!1;this.RemoveLeaf(t);const s=m,o=m;t.aabb.lowerBound.x=e.lowerBound.x-s,t.aabb.lowerBound.y=e.lowerBound.y-o,t.aabb.upperBound.x=e.upperBound.x+s,t.aabb.upperBound.y=e.upperBound.y+o;const n=l*i.x,r=l*i.y;return n<0?t.aabb.lowerBound.x+=n:t.aabb.upperBound.x+=n,r<0?t.aabb.lowerBound.y+=r:t.aabb.upperBound.y+=r,this.InsertLeaf(t),!0}InsertLeaf(t){if(++this.m_insertionCount,null===this.m_root)return this.m_root=t,void(this.m_root.parent=null);const e=t.aabb;let i=this.m_root;for(;!i.IsLeaf();){const t=ee(i.child1),s=ee(i.child2),o=i.aabb.GetPerimeter(),n=se.s_combinedAABB;n.Combine2(i.aabb,e);const r=n.GetPerimeter(),a=2*r,m=2*(r-o);let l;const h=se.s_aabb;let _,c,u;if(t.IsLeaf()?(h.Combine2(e,t.aabb),l=h.GetPerimeter()+m):(h.Combine2(e,t.aabb),_=t.aabb.GetPerimeter(),l=(c=h.GetPerimeter())-_+m),s.IsLeaf()?(h.Combine2(e,s.aabb),u=h.GetPerimeter()+m):(h.Combine2(e,s.aabb),_=s.aabb.GetPerimeter(),u=(c=h.GetPerimeter())-_+m),a<l&&a<u)break;i=l<u?t:s}const s=i.parent,o=this.AllocateNode();o.parent=s,o.aabb.Combine2(e,i.aabb),o.height=i.height+1,null!==s?(s.child1===i?s.child1=o:s.child2=o,o.child1=i,o.child2=t,i.parent=o,t.parent=o):(o.child1=i,o.child2=t,i.parent=o,t.parent=o,this.m_root=o);let n=t.parent;for(;null!==n;){const t=ee((n=this.Balance(n)).child1),e=ee(n.child2);n.height=1+O(t.height,e.height),n.aabb.Combine2(t.aabb,e.aabb),n=n.parent}}RemoveLeaf(t){if(t===this.m_root)return void(this.m_root=null);const e=ee(t.parent),i=e&&e.parent,s=ee(e.child1===t?e.child2:e.child1);if(null!==i){i.child1===e?i.child1=s:i.child2=s,s.parent=i,this.FreeNode(e);let t=i;for(;null!==t;){const e=ee((t=this.Balance(t)).child1),i=ee(t.child2);t.aabb.Combine2(e.aabb,i.aabb),t.height=1+O(e.height,i.height),t=t.parent}}else this.m_root=s,s.parent=null,this.FreeNode(e)}Balance(t){if(t.IsLeaf()||t.height<2)return t;const e=ee(t.child1),i=ee(t.child2),s=i.height-e.height;if(s>1){const s=ee(i.child1),o=ee(i.child2);return i.child1=t,i.parent=t.parent,t.parent=i,null!==i.parent?i.parent.child1===t?i.parent.child1=i:i.parent.child2=i:this.m_root=i,s.height>o.height?(i.child2=s,t.child2=o,o.parent=t,t.aabb.Combine2(e.aabb,o.aabb),i.aabb.Combine2(t.aabb,s.aabb),t.height=1+O(e.height,o.height),i.height=1+O(t.height,s.height)):(i.child2=o,t.child2=s,s.parent=t,t.aabb.Combine2(e.aabb,s.aabb),i.aabb.Combine2(t.aabb,o.aabb),t.height=1+O(e.height,s.height),i.height=1+O(t.height,o.height)),i}if(s<-1){const s=ee(e.child1),o=ee(e.child2);return e.child1=t,e.parent=t.parent,t.parent=e,null!==e.parent?e.parent.child1===t?e.parent.child1=e:e.parent.child2=e:this.m_root=e,s.height>o.height?(e.child2=s,t.child1=o,o.parent=t,t.aabb.Combine2(i.aabb,o.aabb),e.aabb.Combine2(t.aabb,s.aabb),t.height=1+O(i.height,o.height),e.height=1+O(t.height,s.height)):(e.child2=o,t.child1=s,s.parent=t,t.aabb.Combine2(i.aabb,s.aabb),e.aabb.Combine2(t.aabb,o.aabb),t.height=1+O(i.height,s.height),e.height=1+O(t.height,o.height)),e}return t}GetHeight(){return null===this.m_root?0:this.m_root.height}static GetAreaNode(t){if(null===t)return 0;if(t.IsLeaf())return 0;let e=t.aabb.GetPerimeter();return e+=se.GetAreaNode(t.child1),e+=se.GetAreaNode(t.child2)}GetAreaRatio(){if(null===this.m_root)return 0;const t=this.m_root.aabb.GetPerimeter();return se.GetAreaNode(this.m_root)/t}static ComputeHeightNode(t){if(null===t)return 0;if(t.IsLeaf())return 0;return 1+O(se.ComputeHeightNode(t.child1),se.ComputeHeightNode(t.child2))}ComputeHeight(){return se.ComputeHeightNode(this.m_root)}ValidateStructure(t){if(null===t)return;if(this.m_root,t.IsLeaf())return;const e=ee(t.child1),i=ee(t.child2);this.ValidateStructure(e),this.ValidateStructure(i)}ValidateMetrics(t){if(null===t)return;if(t.IsLeaf())return;const e=ee(t.child1),i=ee(t.child2);se.s_aabb.Combine2(e.aabb,i.aabb),this.ValidateMetrics(e),this.ValidateMetrics(i)}Validate(){}static GetMaxBalanceNode(t,e){if(null===t)return e;if(t.height<=1)return e;const i=ee(t.child1),s=ee(t.child2);return O(e,j(s.height-i.height))}GetMaxBalance(){return se.GetMaxBalanceNode(this.m_root,0)}RebuildBottomUp(){this.Validate()}static ShiftOriginNode(t,e){if(null===t)return;if(t.height<=1)return;const i=t.child1,s=t.child2;se.ShiftOriginNode(i,e),se.ShiftOriginNode(s,e),t.aabb.lowerBound.SelfSub(e),t.aabb.upperBound.SelfSub(e)}ShiftOrigin(t){se.ShiftOriginNode(this.m_root,t)}}function oe(t,e,i){const s=t[e];t[e]=t[i],t[i]=s}se.s_r=new it,se.s_v=new it,se.s_abs_v=new it,se.s_segmentAABB=new Wt,se.s_subInput=new Ut,se.s_combinedAABB=new Wt,se.s_aabb=new Wt,se.s_node_id=0;class ne{constructor(t,e){this.proxyA=t,this.proxyB=e}}class re{constructor(){this.m_tree=new se,this.m_proxyCount=0,this.m_moveCount=0,this.m_moveBuffer=[],this.m_pairCount=0,this.m_pairBuffer=[]}CreateProxy(t,e){const i=this.m_tree.CreateProxy(t,e);return++this.m_proxyCount,this.BufferMove(i),i}DestroyProxy(t){this.UnBufferMove(t),--this.m_proxyCount,this.m_tree.DestroyProxy(t)}MoveProxy(t,e,i){this.m_tree.MoveProxy(t,e,i)&&this.BufferMove(t)}TouchProxy(t){this.BufferMove(t)}GetProxyCount(){return this.m_proxyCount}UpdatePairs(t){this.m_pairCount=0;for(let i=0;i<this.m_moveCount;++i){const t=this.m_moveBuffer[i];if(null===t)continue;const e=t.aabb;this.m_tree.Query(e,e=>{if(e.m_id===t.m_id)return!0;let i,s;if(e.m_id<t.m_id?(i=e,s=t):(i=t,s=e),this.m_pairCount===this.m_pairBuffer.length)this.m_pairBuffer[this.m_pairCount]=new ne(i,s);else{const t=this.m_pairBuffer[this.m_pairCount];t.proxyA=i,t.proxyB=s}return++this.m_pairCount,!0})}this.m_moveCount=0,function(t,e=0,i=t.length-e,s=function(t,e){return t<e}){let o=e;const n=[];let r=0;for(;;){for(;o+1<i;i++){const e=t[o+Math.floor(Math.random()*(i-o))];n[r++]=i;for(let n=o-1;;){for(;s(t[++n],e););for(;s(e,t[--i]););if(n>=i)break;oe(t,n,i)}}if(0===r)break;o=i,i=n[--r]}}(this.m_pairBuffer,0,this.m_pairCount,ae);let e=0;for(;e<this.m_pairCount;){const i=this.m_pairBuffer[e];for(t(i.proxyA.userData,i.proxyB.userData),++e;e<this.m_pairCount;){const t=this.m_pairBuffer[e];if(t.proxyA.m_id!==i.proxyA.m_id||t.proxyB.m_id!==i.proxyB.m_id)break;++e}}}Query(t,e){this.m_tree.Query(t,e)}QueryPoint(t,e){this.m_tree.QueryPoint(t,e)}RayCast(t,e){this.m_tree.RayCast(t,e)}GetTreeHeight(){return this.m_tree.GetHeight()}GetTreeBalance(){return this.m_tree.GetMaxBalance()}GetTreeQuality(){return this.m_tree.GetAreaRatio()}ShiftOrigin(t){this.m_tree.ShiftOrigin(t)}BufferMove(t){this.m_moveBuffer[this.m_moveCount]=t,++this.m_moveCount}UnBufferMove(t){const e=this.m_moveBuffer.indexOf(t);this.m_moveBuffer[e]=null}}function ae(t,e){return t.proxyA.m_id<e.proxyA.m_id||t.proxyA.m_id===e.proxyA.m_id&&t.proxyB.m_id<e.proxyB.m_id}t.b2_toiTime=0,t.b2_toiMaxTime=0,t.b2_toiCalls=0,t.b2_toiIters=0,t.b2_toiMaxIters=0,t.b2_toiRootIters=0,t.b2_toiMaxRootIters=0;const me=new mt,le=new mt,he=new it,_e=new it,ce=new it,ue=new it,de=new it;class pe{constructor(){this.proxyA=new dt,this.proxyB=new dt,this.sweepA=new lt,this.sweepB=new lt,this.tMax=0}}var fe,ye;(fe=t.b2TOIOutputState||(t.b2TOIOutputState={}))[fe.e_unknown=0]="e_unknown",fe[fe.e_failed=1]="e_failed",fe[fe.e_overlapped=2]="e_overlapped",fe[fe.e_touching=3]="e_touching",fe[fe.e_separated=4]="e_separated";class xe{constructor(){this.state=t.b2TOIOutputState.e_unknown,this.t=0}}(ye=t.b2SeparationFunctionType||(t.b2SeparationFunctionType={}))[ye.e_unknown=-1]="e_unknown",ye[ye.e_points=0]="e_points",ye[ye.e_faceA=1]="e_faceA",ye[ye.e_faceB=2]="e_faceB";class Be{constructor(){this.m_sweepA=new lt,this.m_sweepB=new lt,this.m_type=t.b2SeparationFunctionType.e_unknown,this.m_localPoint=new it,this.m_axis=new it}Initialize(e,i,s,o,n,r){this.m_proxyA=i,this.m_proxyB=o;const a=e.count;this.m_sweepA.Copy(s),this.m_sweepB.Copy(n);const m=me,l=le;if(this.m_sweepA.GetTransform(m,r),this.m_sweepB.GetTransform(l,r),1===a){this.m_type=t.b2SeparationFunctionType.e_points;const i=this.m_proxyA.GetVertex(e.indexA[0]),s=this.m_proxyB.GetVertex(e.indexB[0]),o=mt.MulXV(m,i,he),n=mt.MulXV(l,s,_e);it.SubVV(n,o,this.m_axis);const r=this.m_axis.Normalize();return this.m_localPoint.SetZero(),r}if(e.indexA[0]===e.indexA[1]){this.m_type=t.b2SeparationFunctionType.e_faceB;const i=this.m_proxyB.GetVertex(e.indexB[0]),s=this.m_proxyB.GetVertex(e.indexB[1]);it.CrossVOne(it.SubVV(s,i,it.s_t0),this.m_axis).SelfNormalize();const o=at.MulRV(l.q,this.m_axis,ce);it.MidVV(i,s,this.m_localPoint);const n=mt.MulXV(l,this.m_localPoint,_e),r=this.m_proxyA.GetVertex(e.indexA[0]),a=mt.MulXV(m,r,he);let h=it.DotVV(it.SubVV(a,n,it.s_t0),o);return h<0&&(this.m_axis.SelfNeg(),h=-h),h}{this.m_type=t.b2SeparationFunctionType.e_faceA;const i=this.m_proxyA.GetVertex(e.indexA[0]),s=this.m_proxyA.GetVertex(e.indexA[1]);it.CrossVOne(it.SubVV(s,i,it.s_t0),this.m_axis).SelfNormalize();const o=at.MulRV(m.q,this.m_axis,ce);it.MidVV(i,s,this.m_localPoint);const n=mt.MulXV(m,this.m_localPoint,he),r=this.m_proxyB.GetVertex(e.indexB[0]),a=mt.MulXV(l,r,_e);let h=it.DotVV(it.SubVV(a,n,it.s_t0),o);return h<0&&(this.m_axis.SelfNeg(),h=-h),h}}FindMinSeparation(e,i,s){const o=me,n=le;switch(this.m_sweepA.GetTransform(o,s),this.m_sweepB.GetTransform(n,s),this.m_type){case t.b2SeparationFunctionType.e_points:{const t=at.MulTRV(o.q,this.m_axis,ue),s=at.MulTRV(n.q,it.NegV(this.m_axis,it.s_t0),de);e[0]=this.m_proxyA.GetSupport(t),i[0]=this.m_proxyB.GetSupport(s);const r=this.m_proxyA.GetVertex(e[0]),a=this.m_proxyB.GetVertex(i[0]),m=mt.MulXV(o,r,he),l=mt.MulXV(n,a,_e);return it.DotVV(it.SubVV(l,m,it.s_t0),this.m_axis)}case t.b2SeparationFunctionType.e_faceA:{const t=at.MulRV(o.q,this.m_axis,ce),s=mt.MulXV(o,this.m_localPoint,he),r=at.MulTRV(n.q,it.NegV(t,it.s_t0),de);e[0]=-1,i[0]=this.m_proxyB.GetSupport(r);const a=this.m_proxyB.GetVertex(i[0]),m=mt.MulXV(n,a,_e);return it.DotVV(it.SubVV(m,s,it.s_t0),t)}case t.b2SeparationFunctionType.e_faceB:{const t=at.MulRV(n.q,this.m_axis,ce),s=mt.MulXV(n,this.m_localPoint,_e),r=at.MulTRV(o.q,it.NegV(t,it.s_t0),ue);i[0]=-1,e[0]=this.m_proxyA.GetSupport(r);const a=this.m_proxyA.GetVertex(e[0]),m=mt.MulXV(o,a,he);return it.DotVV(it.SubVV(m,s,it.s_t0),t)}default:return e[0]=-1,i[0]=-1,0}}Evaluate(e,i,s){const o=me,n=le;switch(this.m_sweepA.GetTransform(o,s),this.m_sweepB.GetTransform(n,s),this.m_type){case t.b2SeparationFunctionType.e_points:{const t=this.m_proxyA.GetVertex(e),s=this.m_proxyB.GetVertex(i),r=mt.MulXV(o,t,he),a=mt.MulXV(n,s,_e);return it.DotVV(it.SubVV(a,r,it.s_t0),this.m_axis)}case t.b2SeparationFunctionType.e_faceA:{const t=at.MulRV(o.q,this.m_axis,ce),e=mt.MulXV(o,this.m_localPoint,he),s=this.m_proxyB.GetVertex(i),r=mt.MulXV(n,s,_e);return it.DotVV(it.SubVV(r,e,it.s_t0),t)}case t.b2SeparationFunctionType.e_faceB:{const t=at.MulRV(n.q,this.m_axis,ce),i=mt.MulXV(n,this.m_localPoint,_e),s=this.m_proxyA.GetVertex(e),r=mt.MulXV(o,s,he);return it.DotVV(it.SubVV(r,i,it.s_t0),t)}default:return 0}}}const Se=new ct,Ae=new pt,be=new ft,Ce=new yt,Ve=new Be,ge=[0],ve=[0],we=new lt,Me=new lt;function Pe(e,i){const s=Se.Reset();++t.b2_toiCalls,e.state=t.b2TOIOutputState.e_unknown,e.t=i.tMax;const o=i.proxyA,n=i.proxyB,r=O(a,O(o.m_count,n.m_count)),m=we.Copy(i.sweepA),l=Me.Copy(i.sweepB);m.Normalize(),l.Normalize();const _=i.tMax,c=o.m_radius+n.m_radius,u=O(h,c-3*h),d=.25*h;let p=0;let f=0;const y=Ae;y.count=0;const x=be;for(x.proxyA.Copy(i.proxyA),x.proxyB.Copy(i.proxyB),x.useRadii=!1;;){const i=me,s=le;m.GetTransform(i,p),l.GetTransform(s,p),x.transformA.Copy(i),x.transformB.Copy(s);const a=Ce;if(Mt(a,y,x),a.distance<=0){e.state=t.b2TOIOutputState.e_overlapped,e.t=0;break}if(a.distance<u+d){e.state=t.b2TOIOutputState.e_touching,e.t=p;break}const h=Ve;h.Initialize(y,o,m,n,l,p);let c=!1,B=_,S=0;for(;;){const i=ge,s=ve;let o=h.FindMinSeparation(i,s,B);if(o>u+d){e.state=t.b2TOIOutputState.e_separated,e.t=_,c=!0;break}if(o>u-d){p=B;break}let n=h.Evaluate(i[0],s[0],p);if(n<u-d){e.state=t.b2TOIOutputState.e_failed,e.t=p,c=!0;break}if(n<=u+d){e.state=t.b2TOIOutputState.e_touching,e.t=p,c=!0;break}let a=0,m=p,l=B;for(;;){let e=0;e=1&a?m+(u-n)*(l-m)/(o-n):.5*(m+l),++a,++t.b2_toiRootIters;const r=h.Evaluate(i[0],s[0],e);if(j(r-u)<d){B=e;break}if(r>u?(m=e,n=r):(l=e,o=r),50===a)break}if(t.b2_toiMaxRootIters=O(t.b2_toiMaxRootIters,a),++S===r)break}if(++f,++t.b2_toiIters,c)break;if(20===f){e.state=t.b2TOIOutputState.e_failed,e.t=p;break}}t.b2_toiMaxIters=O(t.b2_toiMaxIters,f);const B=s.GetMilliseconds();t.b2_toiMaxTime=O(t.b2_toiMaxTime,B),t.b2_toiTime+=B}const Ie=new it,Ge=new it;function De(e,i,s,o,n){e.pointCount=0;const r=mt.MulXV(s,i.m_p,Ie),a=mt.MulXV(n,o.m_p,Ge),m=it.DistanceSquaredVV(r,a),l=i.m_radius+o.m_radius;m>l*l||(e.type=t.b2ManifoldType.e_circles,e.localPoint.Copy(i.m_p),e.localNormal.SetZero(),e.pointCount=1,e.points[0].localPoint.Copy(o.m_p),e.points[0].id.key=0)}const Fe=new it,Te=new it,Le=new it;function Re(e,o,n,r,a){e.pointCount=0;const m=mt.MulXV(a,r.m_p,Fe),l=mt.MulTXV(n,m,Te);let h=0,_=-i;const c=o.m_radius+r.m_radius,u=o.m_count,d=o.m_vertices,p=o.m_normals;for(let t=0;t<u;++t){const e=it.DotVV(p[t],it.SubVV(l,d[t],it.s_t0));if(e>c)return;e>_&&(_=e,h=t)}const f=h,y=(f+1)%u,x=d[f],B=d[y];if(_<s)return e.pointCount=1,e.type=t.b2ManifoldType.e_faceA,e.localNormal.Copy(p[h]),it.MidVV(x,B,e.localPoint),e.points[0].localPoint.Copy(r.m_p),void(e.points[0].id.key=0);const S=it.DotVV(it.SubVV(l,x,it.s_t0),it.SubVV(B,x,it.s_t1)),A=it.DotVV(it.SubVV(l,B,it.s_t0),it.SubVV(x,B,it.s_t1));if(S<=0){if(it.DistanceSquaredVV(l,x)>c*c)return;e.pointCount=1,e.type=t.b2ManifoldType.e_faceA,it.SubVV(l,x,e.localNormal).SelfNormalize(),e.localPoint.Copy(x),e.points[0].localPoint.Copy(r.m_p),e.points[0].id.key=0}else if(A<=0){if(it.DistanceSquaredVV(l,B)>c*c)return;e.pointCount=1,e.type=t.b2ManifoldType.e_faceA,it.SubVV(l,B,e.localNormal).SelfNormalize(),e.localPoint.Copy(B),e.points[0].localPoint.Copy(r.m_p),e.points[0].id.key=0}else{const i=it.MidVV(x,B,Le);if(it.DotVV(it.SubVV(l,i,it.s_t1),p[f])>c)return;e.pointCount=1,e.type=t.b2ManifoldType.e_faceA,e.localNormal.Copy(p[f]).SelfNormalize(),e.localPoint.Copy(i),e.points[0].localPoint.Copy(r.m_p),e.points[0].id.key=0}}const ke=new it,qe=new it,ze=new it,Je=new it;function Ne(t,e,s,o,n){const r=t.m_vertices,a=t.m_normals,m=o.m_count,l=o.m_vertices,h=at.MulRV(e.q,a[s],ke),_=at.MulTRV(n.q,h,qe);let c=0,u=i;for(let i=0;i<m;++i){const t=it.DotVV(l[i],_);t<u&&(u=t,c=i)}const d=mt.MulXV(e,r[s],ze),p=mt.MulXV(n,l[c],Je);return it.DotVV(it.SubVV(p,d,it.s_t0),h)}const je=new it,Ee=new it;function Oe(t,e,s,o,n){const r=e.m_count,a=e.m_normals,m=it.SubVV(mt.MulXV(n,o.m_centroid,it.s_t0),mt.MulXV(s,e.m_centroid,it.s_t1),je),l=at.MulTRV(s.q,m,Ee);let h=0,_=-i;for(let i=0;i<r;++i){const t=it.DotVV(a[i],l);t>_&&(_=t,h=i)}let c=Ne(e,s,h,o,n);const u=(h+r-1)%r,d=Ne(e,s,u,o,n),p=(h+1)%r,f=Ne(e,s,p,o,n);let y=0,x=0,B=0;if(d>c&&d>f)B=-1,y=u,x=d;else{if(!(f>c))return t[0]=h,c;B=1,y=p,x=f}for(;(c=Ne(e,s,h=-1===B?(y+r-1)%r:(y+1)%r,o,n))>x;)y=h,x=c;return t[0]=y,x}const Xe=new it;const Ue=Xt.MakeArray(2),Ze=Xt.MakeArray(2),We=Xt.MakeArray(2),Qe=[0],He=[0],Ye=new it,Ke=new it,$e=new it,ti=new it,ei=new it,ii=new it,si=new it,oi=new it;function ni(e,s,o,n,a){e.pointCount=0;const m=s.m_radius+n.m_radius,l=Qe;l[0]=0;const h=Oe(l,s,o,n,a);if(h>m)return;const _=He;_[0]=0;const c=Oe(_,n,a,s,o);if(c>m)return;let u,d,p,f,y=0,x=0;c>.98*h+.001?(u=n,d=s,p=a,f=o,y=_[0],e.type=t.b2ManifoldType.e_faceB,x=1):(u=s,d=n,p=o,f=a,y=l[0],e.type=t.b2ManifoldType.e_faceA,x=0);const B=Ue;!function(e,s,o,n,r,a){const m=s.m_normals,l=r.m_count,h=r.m_vertices,_=r.m_normals,c=at.MulTRV(a.q,at.MulRV(o.q,m[n],it.s_t0),Xe);let u=0,d=i;for(let t=0;t<l;++t){const e=it.DotVV(c,_[t]);e<d&&(d=e,u=t)}const p=u,f=(p+1)%l,y=e[0];mt.MulXV(a,h[p],y.v);const x=y.id.cf;x.indexA=n,x.indexB=p,x.typeA=t.b2ContactFeatureType.e_face,x.typeB=t.b2ContactFeatureType.e_vertex;const B=e[1];mt.MulXV(a,h[f],B.v);const S=B.id.cf;S.indexA=n,S.indexB=f,S.typeA=t.b2ContactFeatureType.e_face,S.typeB=t.b2ContactFeatureType.e_vertex}(B,u,p,y,d,f);const S=u.m_count,A=u.m_vertices,b=y,C=(y+1)%S,V=A[b],g=A[C],v=it.SubVV(g,V,Ye);v.Normalize();const w=it.CrossVOne(v,Ke),M=it.MidVV(V,g,$e),P=at.MulRV(p.q,v,ei),I=it.CrossVOne(P,ti),G=mt.MulXV(p,V,si),D=mt.MulXV(p,g,oi),F=it.DotVV(I,G),T=-it.DotVV(P,G)+m,L=it.DotVV(P,D)+m,R=Ze,k=We;let q;if((q=Ht(R,B,it.NegV(P,ii),T,b))<2)return;if((q=Ht(k,R,P,L,C))<2)return;e.localNormal.Copy(w),e.localPoint.Copy(M);let z=0;for(let t=0;t<r;++t){const i=k[t];if(it.DotVV(I,i.v)-F<=m){const t=e.points[z];if(mt.MulTXV(f,i.v,t.localPoint),t.id.Copy(i.id),x){const e=t.id.cf;t.id.cf.indexA=e.indexB,t.id.cf.indexB=e.indexA,t.id.cf.typeA=e.typeB,t.id.cf.typeB=e.typeA}++z}}e.pointCount=z}const ri=new it,ai=new it,mi=new it,li=new it,hi=new it,_i=new it,ci=new it,ui=new Nt;function di(e,i,s,o,n){e.pointCount=0;const r=mt.MulTXV(s,mt.MulXV(n,o.m_p,it.s_t0),ri),a=i.m_vertex1,m=i.m_vertex2,l=it.SubVV(m,a,ai),h=it.DotVV(l,it.SubVV(m,r,it.s_t0)),_=it.DotVV(l,it.SubVV(r,a,it.s_t0)),c=i.m_radius+o.m_radius,u=ui;if(u.cf.indexB=0,u.cf.typeB=t.b2ContactFeatureType.e_vertex,_<=0){const s=a,n=it.SubVV(r,s,mi);if(it.DotVV(n,n)>c*c)return;if(i.m_hasVertex0){const t=i.m_vertex0,e=a,s=it.SubVV(e,t,li);if(it.DotVV(s,it.SubVV(e,r,it.s_t0))>0)return}return u.cf.indexA=0,u.cf.typeA=t.b2ContactFeatureType.e_vertex,e.pointCount=1,e.type=t.b2ManifoldType.e_circles,e.localNormal.SetZero(),e.localPoint.Copy(s),e.points[0].id.Copy(u),void e.points[0].localPoint.Copy(o.m_p)}if(h<=0){const s=m,n=it.SubVV(r,s,mi);if(it.DotVV(n,n)>c*c)return;if(i.m_hasVertex3){const t=i.m_vertex3,e=m,s=it.SubVV(t,e,hi);if(it.DotVV(s,it.SubVV(r,e,it.s_t0))>0)return}return u.cf.indexA=1,u.cf.typeA=t.b2ContactFeatureType.e_vertex,e.pointCount=1,e.type=t.b2ManifoldType.e_circles,e.localNormal.SetZero(),e.localPoint.Copy(s),e.points[0].id.Copy(u),void e.points[0].localPoint.Copy(o.m_p)}const d=it.DotVV(l,l),p=_i;p.x=1/d*(h*a.x+_*m.x),p.y=1/d*(h*a.y+_*m.y);const f=it.SubVV(r,p,mi);if(it.DotVV(f,f)>c*c)return;const y=ci.Set(-l.y,l.x);it.DotVV(y,it.SubVV(r,a,it.s_t0))<0&&y.Set(-y.x,-y.y),y.Normalize(),u.cf.indexA=0,u.cf.typeA=t.b2ContactFeatureType.e_face,e.pointCount=1,e.type=t.b2ManifoldType.e_faceA,e.localNormal.Copy(y),e.localPoint.Copy(a),e.points[0].id.Copy(u),e.points[0].localPoint.Copy(o.m_p)}var pi,fi;!function(t){t[t.e_unknown=0]="e_unknown",t[t.e_edgeA=1]="e_edgeA",t[t.e_edgeB=2]="e_edgeB"}(pi||(pi={}));class yi{constructor(){this.type=pi.e_unknown,this.index=0,this.separation=0}}class xi{constructor(){this.vertices=[],this.normals=[],this.count=0}}!function(t){t[t.e_isolated=0]="e_isolated",t[t.e_concave=1]="e_concave",t[t.e_convex=2]="e_convex"}(fi||(fi={}));class Bi{constructor(){this.m_polygonB=new xi,this.m_xf=new mt,this.m_centroidB=new it,this.m_v0=new it,this.m_v1=new it,this.m_v2=new it,this.m_v3=new it,this.m_normal0=new it,this.m_normal1=new it,this.m_normal2=new it,this.m_normal=new it,this.m_type1=fi.e_isolated,this.m_type2=fi.e_isolated,this.m_lowerLimit=new it,this.m_upperLimit=new it,this.m_radius=0,this.m_front=!1}Collide(e,i,s,o,n){mt.MulTXX(s,n,this.m_xf),mt.MulXV(this.m_xf,o.m_centroid,this.m_centroidB),this.m_v0.Copy(i.m_vertex0),this.m_v1.Copy(i.m_vertex1),this.m_v2.Copy(i.m_vertex2),this.m_v3.Copy(i.m_vertex3);const a=i.m_hasVertex0,m=i.m_hasVertex3,l=it.SubVV(this.m_v2,this.m_v1,Bi.s_edge1);l.Normalize(),this.m_normal1.Set(l.y,-l.x);const h=it.DotVV(this.m_normal1,it.SubVV(this.m_centroidB,this.m_v1,it.s_t0));let _=0,c=0,u=!1,d=!1;if(a){const t=it.SubVV(this.m_v1,this.m_v0,Bi.s_edge0);t.Normalize(),this.m_normal0.Set(t.y,-t.x),u=it.CrossVV(t,l)>=0,_=it.DotVV(this.m_normal0,it.SubVV(this.m_centroidB,this.m_v0,it.s_t0))}if(m){const t=it.SubVV(this.m_v3,this.m_v2,Bi.s_edge2);t.Normalize(),this.m_normal2.Set(t.y,-t.x),d=it.CrossVV(l,t)>0,c=it.DotVV(this.m_normal2,it.SubVV(this.m_centroidB,this.m_v2,it.s_t0))}a&&m?u&&d?(this.m_front=_>=0||h>=0||c>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):u?(this.m_front=_>=0||h>=0&&c>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):d?(this.m_front=c>=0||_>=0&&h>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):(this.m_front=_>=0&&h>=0&&c>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):a?u?(this.m_front=_>=0||h>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):(this.m_front=_>=0&&h>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):m?d?(this.m_front=h>=0||c>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1))):(this.m_front=h>=0&&c>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1))):(this.m_front=h>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1))),this.m_polygonB.count=o.m_count;for(let t=0;t<o.m_count;++t)this.m_polygonB.vertices.length<=t&&this.m_polygonB.vertices.push(new it),this.m_polygonB.normals.length<=t&&this.m_polygonB.normals.push(new it),mt.MulXV(this.m_xf,o.m_vertices[t],this.m_polygonB.vertices[t]),at.MulRV(this.m_xf.q,o.m_normals[t],this.m_polygonB.normals[t]);this.m_radius=o.m_radius+i.m_radius,e.pointCount=0;const p=this.ComputeEdgeSeparation(Bi.s_edgeAxis);if(p.type===pi.e_unknown)return;if(p.separation>this.m_radius)return;const f=this.ComputePolygonSeparation(Bi.s_polygonAxis);if(f.type!==pi.e_unknown&&f.separation>this.m_radius)return;let y;y=f.type===pi.e_unknown?p:f.separation>.98*p.separation+.001?f:p;const x=Bi.s_ie,B=Bi.s_rf;if(y.type===pi.e_edgeA){e.type=t.b2ManifoldType.e_faceA;let i=0,s=it.DotVV(this.m_normal,this.m_polygonB.normals[0]);for(let t=1;t<this.m_polygonB.count;++t){const e=it.DotVV(this.m_normal,this.m_polygonB.normals[t]);e<s&&(s=e,i=t)}const o=i,n=(o+1)%this.m_polygonB.count,r=x[0];r.v.Copy(this.m_polygonB.vertices[o]),r.id.cf.indexA=0,r.id.cf.indexB=o,r.id.cf.typeA=t.b2ContactFeatureType.e_face,r.id.cf.typeB=t.b2ContactFeatureType.e_vertex;const a=x[1];a.v.Copy(this.m_polygonB.vertices[n]),a.id.cf.indexA=0,a.id.cf.indexB=n,a.id.cf.typeA=t.b2ContactFeatureType.e_face,a.id.cf.typeB=t.b2ContactFeatureType.e_vertex,this.m_front?(B.i1=0,B.i2=1,B.v1.Copy(this.m_v1),B.v2.Copy(this.m_v2),B.normal.Copy(this.m_normal1)):(B.i1=1,B.i2=0,B.v1.Copy(this.m_v2),B.v2.Copy(this.m_v1),B.normal.Copy(this.m_normal1).SelfNeg())}else{e.type=t.b2ManifoldType.e_faceB;const i=x[0];i.v.Copy(this.m_v1),i.id.cf.indexA=0,i.id.cf.indexB=y.index,i.id.cf.typeA=t.b2ContactFeatureType.e_vertex,i.id.cf.typeB=t.b2ContactFeatureType.e_face;const s=x[1];s.v.Copy(this.m_v2),s.id.cf.indexA=0,s.id.cf.indexB=y.index,s.id.cf.typeA=t.b2ContactFeatureType.e_vertex,s.id.cf.typeB=t.b2ContactFeatureType.e_face,B.i1=y.index,B.i2=(B.i1+1)%this.m_polygonB.count,B.v1.Copy(this.m_polygonB.vertices[B.i1]),B.v2.Copy(this.m_polygonB.vertices[B.i2]),B.normal.Copy(this.m_polygonB.normals[B.i1])}B.sideNormal1.Set(B.normal.y,-B.normal.x),B.sideNormal2.Copy(B.sideNormal1).SelfNeg(),B.sideOffset1=it.DotVV(B.sideNormal1,B.v1),B.sideOffset2=it.DotVV(B.sideNormal2,B.v2);const S=Bi.s_clipPoints1,A=Bi.s_clipPoints2;let b=0;if((b=Ht(S,x,B.sideNormal1,B.sideOffset1,B.i1))<r)return;if((b=Ht(A,S,B.sideNormal2,B.sideOffset2,B.i2))<r)return;y.type===pi.e_edgeA?(e.localNormal.Copy(B.normal),e.localPoint.Copy(B.v1)):(e.localNormal.Copy(o.m_normals[B.i1]),e.localPoint.Copy(o.m_vertices[B.i1]));let C=0;for(let t=0;t<r;++t){let i;if((i=it.DotVV(B.normal,it.SubVV(A[t].v,B.v1,it.s_t0)))<=this.m_radius){const i=e.points[C];y.type===pi.e_edgeA?(mt.MulTXV(this.m_xf,A[t].v,i.localPoint),i.id.Copy(A[t].id)):(i.localPoint.Copy(A[t].v),i.id.cf.typeA=A[t].id.cf.typeB,i.id.cf.typeB=A[t].id.cf.typeA,i.id.cf.indexA=A[t].id.cf.indexB,i.id.cf.indexB=A[t].id.cf.indexA),++C}}e.pointCount=C}ComputeEdgeSeparation(t){const e=t;e.type=pi.e_edgeA,e.index=this.m_front?0:1,e.separation=i;for(let i=0;i<this.m_polygonB.count;++i){const t=it.DotVV(this.m_normal,it.SubVV(this.m_polygonB.vertices[i],this.m_v1,it.s_t0));t<e.separation&&(e.separation=t)}return e}ComputePolygonSeparation(t){const e=t;e.type=pi.e_unknown,e.index=-1,e.separation=-i;const s=Bi.s_perp.Set(-this.m_normal.y,this.m_normal.x);for(let i=0;i<this.m_polygonB.count;++i){const t=it.NegV(this.m_polygonB.normals[i],Bi.s_n),o=E(it.DotVV(t,it.SubVV(this.m_polygonB.vertices[i],this.m_v1,it.s_t0)),it.DotVV(t,it.SubVV(this.m_polygonB.vertices[i],this.m_v2,it.s_t0)));if(o>this.m_radius)return e.type=pi.e_edgeB,e.index=i,e.separation=o,e;if(it.DotVV(t,s)>=0){if(it.DotVV(it.SubVV(t,this.m_upperLimit,it.s_t0),this.m_normal)<-_)continue}else if(it.DotVV(it.SubVV(t,this.m_lowerLimit,it.s_t0),this.m_normal)<-_)continue;o>e.separation&&(e.type=pi.e_edgeB,e.index=i,e.separation=o)}return e}}Bi.s_edge1=new it,Bi.s_edge0=new it,Bi.s_edge2=new it,Bi.s_ie=Xt.MakeArray(2),Bi.s_rf=new class{constructor(){this.i1=0,this.i2=0,this.v1=new it,this.v2=new it,this.normal=new it,this.sideNormal1=new it,this.sideOffset1=0,this.sideNormal2=new it,this.sideOffset2=0}},Bi.s_clipPoints1=Xt.MakeArray(2),Bi.s_clipPoints2=Xt.MakeArray(2),Bi.s_edgeAxis=new yi,Bi.s_polygonAxis=new yi,Bi.s_n=new it,Bi.s_perp=new it;const Si=new Bi;function Ai(t,e,i,s,o){Si.Collide(t,e,i,s,o)}class bi{constructor(){this.mass=0,this.center=new it(0,0),this.I=0}}var Ci,Vi,gi,vi;(Ci=t.b2ShapeType||(t.b2ShapeType={}))[Ci.e_unknown=-1]="e_unknown",Ci[Ci.e_circleShape=0]="e_circleShape",Ci[Ci.e_edgeShape=1]="e_edgeShape",Ci[Ci.e_polygonShape=2]="e_polygonShape",Ci[Ci.e_chainShape=3]="e_chainShape",Ci[Ci.e_shapeTypeCount=4]="e_shapeTypeCount";class wi{constructor(e,i){this.m_type=t.b2ShapeType.e_unknown,this.m_radius=0,this.m_type=e,this.m_radius=i}Copy(t){return this.m_radius=t.m_radius,this}GetType(){return this.m_type}}class Mi extends wi{constructor(e=0){super(t.b2ShapeType.e_circleShape,e),this.m_p=new it}Set(t,e=this.m_radius){return this.m_p.Copy(t),this.m_radius=e,this}Clone(){return(new Mi).Copy(this)}Copy(t){return super.Copy(t),this.m_p.Copy(t.m_p),this}GetChildCount(){return 1}TestPoint(t,e){const i=mt.MulXV(t,this.m_p,Mi.TestPoint_s_center),s=it.SubVV(e,i,Mi.TestPoint_s_d);return it.DotVV(s,s)<=Z(this.m_radius)}ComputeDistance(t,e,i,s){const o=mt.MulXV(t,this.m_p,Mi.ComputeDistance_s_center);return it.SubVV(e,o,i),i.Normalize()-this.m_radius}RayCast(t,e,i,o){const n=mt.MulXV(i,this.m_p,Mi.RayCast_s_position),r=it.SubVV(e.p1,n,Mi.RayCast_s_s),a=it.DotVV(r,r)-Z(this.m_radius),m=it.SubVV(e.p2,e.p1,Mi.RayCast_s_r),l=it.DotVV(r,m),h=it.DotVV(m,m),_=l*l-h*a;if(_<0||h<s)return!1;let c=-(l+Q(_));return 0<=c&&c<=e.maxFraction*h&&(c/=h,t.fraction=c,it.AddVMulSV(r,c,m,t.normal).SelfNormalize(),!0)}ComputeAABB(t,e,i){const s=mt.MulXV(e,this.m_p,Mi.ComputeAABB_s_p);t.lowerBound.Set(s.x-this.m_radius,s.y-this.m_radius),t.upperBound.Set(s.x+this.m_radius,s.y+this.m_radius)}ComputeMass(t,e){const i=Z(this.m_radius);t.mass=e*n*i,t.center.Copy(this.m_p),t.I=t.mass*(.5*i+it.DotVV(this.m_p,this.m_p))}SetupDistanceProxy(t,e){t.m_vertices=t.m_buffer,t.m_vertices[0].Copy(this.m_p),t.m_count=1,t.m_radius=this.m_radius}ComputeSubmergedArea(t,e,i,o){const r=mt.MulXV(i,this.m_p,new it),a=-(it.DotVV(t,r)-e);if(a<-this.m_radius+s)return 0;if(a>this.m_radius)return o.Copy(r),n*this.m_radius*this.m_radius;const m=this.m_radius*this.m_radius,l=a*a,h=m*(tt(a/this.m_radius)+n/2)+a*Q(m-l),_=-2/3*H(m-l,1.5)/h;return o.x=r.x+t.x*_,o.y=r.y+t.y*_,h}Dump(t){t("    const shape: b2CircleShape = new b2CircleShape();\n"),t("    shape.m_radius = %.15f;\n",this.m_radius),t("    shape.m_p.Set(%.15f, %.15f);\n",this.m_p.x,this.m_p.y)}}Mi.TestPoint_s_center=new it,Mi.TestPoint_s_d=new it,Mi.ComputeDistance_s_center=new it,Mi.RayCast_s_position=new it,Mi.RayCast_s_s=new it,Mi.RayCast_s_r=new it,Mi.ComputeAABB_s_p=new it;class Pi extends wi{constructor(){super(t.b2ShapeType.e_polygonShape,c),this.m_centroid=new it(0,0),this.m_vertices=[],this.m_normals=[],this.m_count=0}Clone(){return(new Pi).Copy(this)}Copy(t){super.Copy(t),this.m_centroid.Copy(t.m_centroid),this.m_count=t.m_count,this.m_vertices=it.MakeArray(this.m_count),this.m_normals=it.MakeArray(this.m_count);for(let e=0;e<this.m_count;++e)this.m_vertices[e].Copy(t.m_vertices[e]),this.m_normals[e].Copy(t.m_normals[e]);return this}GetChildCount(){return 1}Set(...t){if("number"==typeof t[0][0]){const e=t[0];if(e.length%2!=0)throw new Error;return this._Set(t=>({x:e[2*t],y:e[2*t+1]}),e.length/2)}{const e=t[0],i=t[1]||e.length;return this._Set(t=>e[t],i)}}_Set(t,e){if(e<3)return this.SetAsBox(1,1);let i=e;const s=[];for(let l=0;l<i;++l){const e=t(l);let i=!0;for(let t=0;t<s.length;++t)if(it.DistanceSquaredVV(e,s[t])<.5*h*(.5*h)){i=!1;break}i&&s.push(e)}if((i=s.length)<3)return this.SetAsBox(1,1);let o=0,n=s[0].x;for(let l=1;l<i;++l){const t=s[l].x;(t>n||t===n&&s[l].y<s[o].y)&&(o=l,n=t)}const r=[];let a=0,m=o;for(;;){r[a]=m;let t=0;for(let e=1;e<i;++e){if(t===m){t=e;continue}const i=it.SubVV(s[t],s[r[a]],Pi.Set_s_r),o=it.SubVV(s[e],s[r[a]],Pi.Set_s_v),n=it.CrossVV(i,o);n<0&&(t=e),0===n&&o.LengthSquared()>i.LengthSquared()&&(t=e)}if(++a,m=t,t===o)break}this.m_count=a,this.m_vertices=it.MakeArray(this.m_count),this.m_normals=it.MakeArray(this.m_count);for(let l=0;l<a;++l)this.m_vertices[l].Copy(s[r[l]]);for(let l=0;l<a;++l){const t=this.m_vertices[l],e=this.m_vertices[(l+1)%a],i=it.SubVV(e,t,it.s_t0);it.CrossVOne(i,this.m_normals[l]).SelfNormalize()}return Pi.ComputeCentroid(this.m_vertices,a,this.m_centroid),this}SetAsBox(t,e,i,s=0){if(this.m_count=4,this.m_vertices=it.MakeArray(this.m_count),this.m_normals=it.MakeArray(this.m_count),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero(),i){this.m_centroid.Copy(i);const t=new mt;t.SetPosition(i),t.SetRotationAngle(s);for(let e=0;e<this.m_count;++e)mt.MulXV(t,this.m_vertices[e],this.m_vertices[e]),at.MulRV(t.q,this.m_normals[e],this.m_normals[e])}return this}TestPoint(t,e){const i=mt.MulTXV(t,e,Pi.TestPoint_s_pLocal);for(let s=0;s<this.m_count;++s){if(it.DotVV(this.m_normals[s],it.SubVV(i,this.m_vertices[s],it.s_t0))>0)return!1}return!0}ComputeDistance(t,e,s,o){const n=mt.MulTXV(t,e,Pi.ComputeDistance_s_pLocal);let r=-i;const a=Pi.ComputeDistance_s_normalForMaxDistance.Copy(n);for(let i=0;i<this.m_count;++i){const t=it.DotVV(this.m_normals[i],it.SubVV(n,this.m_vertices[i],it.s_t0));t>r&&(r=t,a.Copy(this.m_normals[i]))}if(r>0){const e=Pi.ComputeDistance_s_minDistance.Copy(a);let i=r*r;for(let t=0;t<this.m_count;++t){const s=it.SubVV(n,this.m_vertices[t],Pi.ComputeDistance_s_distance),o=s.LengthSquared();i>o&&(e.Copy(s),i=o)}return at.MulRV(t.q,e,s),s.Normalize(),Math.sqrt(i)}return at.MulRV(t.q,a,s),r}RayCast(t,e,i,s){const o=mt.MulTXV(i,e.p1,Pi.RayCast_s_p1),n=mt.MulTXV(i,e.p2,Pi.RayCast_s_p2),r=it.SubVV(n,o,Pi.RayCast_s_d);let a=0,m=e.maxFraction,l=-1;for(let h=0;h<this.m_count;++h){const t=it.DotVV(this.m_normals[h],it.SubVV(this.m_vertices[h],o,it.s_t0)),e=it.DotVV(this.m_normals[h],r);if(0===e){if(t<0)return!1}else e<0&&t<a*e?(a=t/e,l=h):e>0&&t<m*e&&(m=t/e);if(m<a)return!1}return l>=0&&(t.fraction=a,at.MulRV(i.q,this.m_normals[l],t.normal),!0)}ComputeAABB(t,e,i){const s=mt.MulXV(e,this.m_vertices[0],t.lowerBound),o=t.upperBound.Copy(s);for(let r=0;r<this.m_count;++r){const t=mt.MulXV(e,this.m_vertices[r],Pi.ComputeAABB_s_v);it.MinV(t,s,s),it.MaxV(t,o,o)}const n=this.m_radius;s.SelfSubXY(n,n),o.SelfAddXY(n,n)}ComputeMass(t,e){const i=Pi.ComputeMass_s_center.SetZero();let s=0,o=0;const n=Pi.ComputeMass_s_s.SetZero();for(let r=0;r<this.m_count;++r)n.SelfAdd(this.m_vertices[r]);n.SelfMul(1/this.m_count);for(let r=0;r<this.m_count;++r){const t=it.SubVV(this.m_vertices[r],n,Pi.ComputeMass_s_e1),e=it.SubVV(this.m_vertices[(r+1)%this.m_count],n,Pi.ComputeMass_s_e2),a=it.CrossVV(t,e),m=.5*a;s+=m,i.SelfAdd(it.MulSV(m*(1/3),it.AddVV(t,e,it.s_t0),it.s_t1));const l=t.x,h=t.y,_=e.x,c=e.y;o+=1/3*.25*a*(l*l+_*l+_*_+(h*h+c*h+c*c))}t.mass=e*s,i.SelfMul(1/s),it.AddVV(i,n,t.center),t.I=e*o,t.I+=t.mass*(it.DotVV(t.center,t.center)-it.DotVV(i,i))}Validate(){for(let t=0;t<this.m_count;++t){const e=t,i=(t+1)%this.m_count,s=this.m_vertices[e],o=it.SubVV(this.m_vertices[i],s,Pi.Validate_s_e);for(let t=0;t<this.m_count;++t){if(t===e||t===i)continue;const n=it.SubVV(this.m_vertices[t],s,Pi.Validate_s_v);if(it.CrossVV(o,n)<0)return!1}}return!0}SetupDistanceProxy(t,e){t.m_vertices=this.m_vertices,t.m_count=this.m_count,t.m_radius=this.m_radius}ComputeSubmergedArea(t,e,i,o){const n=at.MulTRV(i.q,t,Pi.ComputeSubmergedArea_s_normalL),r=e-it.DotVV(t,i.p),a=[];let m=0,l=-1,h=-1,_=!1;for(let C=0;C<this.m_count;++C){a[C]=it.DotVV(n,this.m_vertices[C])-r;const t=a[C]<-s;C>0&&(t?_||(l=C-1,m++):_&&(h=C-1,m++)),_=t}switch(m){case 0:if(_){const t=Pi.ComputeSubmergedArea_s_md;return this.ComputeMass(t,1),mt.MulXV(i,t.center,o),t.mass}return 0;case 1:-1===l?l=this.m_count-1:h=this.m_count-1}const c=(l+1)%this.m_count,u=(h+1)%this.m_count,d=(0-a[l])/(a[c]-a[l]),p=(0-a[h])/(a[u]-a[h]),f=Pi.ComputeSubmergedArea_s_intoVec.Set(this.m_vertices[l].x*(1-d)+this.m_vertices[c].x*d,this.m_vertices[l].y*(1-d)+this.m_vertices[c].y*d),y=Pi.ComputeSubmergedArea_s_outoVec.Set(this.m_vertices[h].x*(1-p)+this.m_vertices[u].x*p,this.m_vertices[h].y*(1-p)+this.m_vertices[u].y*p);let x=0;const B=Pi.ComputeSubmergedArea_s_center.SetZero();let S,A=this.m_vertices[c],b=c;for(;b!==u;){S=(b=(b+1)%this.m_count)===u?y:this.m_vertices[b];const t=.5*((A.x-f.x)*(S.y-f.y)-(A.y-f.y)*(S.x-f.x));x+=t,B.x+=t*(f.x+A.x+S.x)/3,B.y+=t*(f.y+A.y+S.y)/3,A=S}return B.SelfMul(1/x),mt.MulXV(i,B,o),x}Dump(t){t("    const shape: b2PolygonShape = new b2PolygonShape();\n"),t("    const vs: b2Vec2[] = [];\n");for(let e=0;e<this.m_count;++e)t("    vs[%d] = new b2Vec2(%.15f, %.15f);\n",e,this.m_vertices[e].x,this.m_vertices[e].y);t("    shape.Set(vs, %d);\n",this.m_count)}static ComputeCentroid(t,e,i){const s=i;s.SetZero();let o=0;const n=Pi.ComputeCentroid_s_pRef.SetZero();for(let r=0;r<e;++r){const i=n,a=t[r],m=t[(r+1)%e],l=it.SubVV(a,i,Pi.ComputeCentroid_s_e1),h=it.SubVV(m,i,Pi.ComputeCentroid_s_e2),_=.5*it.CrossVV(l,h);o+=_,s.x+=_*(1/3)*(i.x+a.x+m.x),s.y+=_*(1/3)*(i.y+a.y+m.y)}return s.SelfMul(1/o),s}}Pi.Set_s_r=new it,Pi.Set_s_v=new it,Pi.TestPoint_s_pLocal=new it,Pi.ComputeDistance_s_pLocal=new it,Pi.ComputeDistance_s_normalForMaxDistance=new it,Pi.ComputeDistance_s_minDistance=new it,Pi.ComputeDistance_s_distance=new it,Pi.RayCast_s_p1=new it,Pi.RayCast_s_p2=new it,Pi.RayCast_s_d=new it,Pi.ComputeAABB_s_v=new it,Pi.ComputeMass_s_center=new it,Pi.ComputeMass_s_s=new it,Pi.ComputeMass_s_e1=new it,Pi.ComputeMass_s_e2=new it,Pi.Validate_s_e=new it,Pi.Validate_s_v=new it,Pi.ComputeSubmergedArea_s_normalL=new it,Pi.ComputeSubmergedArea_s_md=new bi,Pi.ComputeSubmergedArea_s_intoVec=new it,Pi.ComputeSubmergedArea_s_outoVec=new it,Pi.ComputeSubmergedArea_s_center=new it,Pi.ComputeCentroid_s_pRef=new it,Pi.ComputeCentroid_s_e1=new it,Pi.ComputeCentroid_s_e2=new it;class Ii extends wi{constructor(){super(t.b2ShapeType.e_edgeShape,c),this.m_vertex1=new it,this.m_vertex2=new it,this.m_vertex0=new it,this.m_vertex3=new it,this.m_hasVertex0=!1,this.m_hasVertex3=!1}Set(t,e){return this.m_vertex1.Copy(t),this.m_vertex2.Copy(e),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this}Clone(){return(new Ii).Copy(this)}Copy(t){return super.Copy(t),this.m_vertex1.Copy(t.m_vertex1),this.m_vertex2.Copy(t.m_vertex2),this.m_vertex0.Copy(t.m_vertex0),this.m_vertex3.Copy(t.m_vertex3),this.m_hasVertex0=t.m_hasVertex0,this.m_hasVertex3=t.m_hasVertex3,this}GetChildCount(){return 1}TestPoint(t,e){return!1}ComputeDistance(t,e,i,s){const o=mt.MulXV(t,this.m_vertex1,Ii.ComputeDistance_s_v1),n=mt.MulXV(t,this.m_vertex2,Ii.ComputeDistance_s_v2),r=it.SubVV(e,o,Ii.ComputeDistance_s_d),a=it.SubVV(n,o,Ii.ComputeDistance_s_s),m=it.DotVV(r,a);if(m>0){const t=it.DotVV(a,a);m>t?it.SubVV(e,n,r):r.SelfMulSub(m/t,a)}return i.Copy(r),i.Normalize()}RayCast(t,e,i,s){const o=mt.MulTXV(i,e.p1,Ii.RayCast_s_p1),n=mt.MulTXV(i,e.p2,Ii.RayCast_s_p2),r=it.SubVV(n,o,Ii.RayCast_s_d),a=this.m_vertex1,m=this.m_vertex2,l=it.SubVV(m,a,Ii.RayCast_s_e),h=t.normal.Set(l.y,-l.x).SelfNormalize(),_=it.DotVV(h,it.SubVV(a,o,it.s_t0)),c=it.DotVV(h,r);if(0===c)return!1;const u=_/c;if(u<0||e.maxFraction<u)return!1;const d=it.AddVMulSV(o,u,r,Ii.RayCast_s_q),p=it.SubVV(m,a,Ii.RayCast_s_r),f=it.DotVV(p,p);if(0===f)return!1;const y=it.DotVV(it.SubVV(d,a,it.s_t0),p)/f;return!(y<0||1<y)&&(t.fraction=u,at.MulRV(i.q,t.normal,t.normal),_>0&&t.normal.SelfNeg(),!0)}ComputeAABB(t,e,i){const s=mt.MulXV(e,this.m_vertex1,Ii.ComputeAABB_s_v1),o=mt.MulXV(e,this.m_vertex2,Ii.ComputeAABB_s_v2);it.MinV(s,o,t.lowerBound),it.MaxV(s,o,t.upperBound);const n=this.m_radius;t.lowerBound.SelfSubXY(n,n),t.upperBound.SelfAddXY(n,n)}ComputeMass(t,e){t.mass=0,it.MidVV(this.m_vertex1,this.m_vertex2,t.center),t.I=0}SetupDistanceProxy(t,e){t.m_vertices=t.m_buffer,t.m_vertices[0].Copy(this.m_vertex1),t.m_vertices[1].Copy(this.m_vertex2),t.m_count=2,t.m_radius=this.m_radius}ComputeSubmergedArea(t,e,i,s){return s.SetZero(),0}Dump(t){t("    const shape: b2EdgeShape = new b2EdgeShape();\n"),t("    shape.m_radius = %.15f;\n",this.m_radius),t("    shape.m_vertex0.Set(%.15f, %.15f);\n",this.m_vertex0.x,this.m_vertex0.y),t("    shape.m_vertex1.Set(%.15f, %.15f);\n",this.m_vertex1.x,this.m_vertex1.y),t("    shape.m_vertex2.Set(%.15f, %.15f);\n",this.m_vertex2.x,this.m_vertex2.y),t("    shape.m_vertex3.Set(%.15f, %.15f);\n",this.m_vertex3.x,this.m_vertex3.y),t("    shape.m_hasVertex0 = %s;\n",this.m_hasVertex0),t("    shape.m_hasVertex3 = %s;\n",this.m_hasVertex3)}}Ii.ComputeDistance_s_v1=new it,Ii.ComputeDistance_s_v2=new it,Ii.ComputeDistance_s_d=new it,Ii.ComputeDistance_s_s=new it,Ii.RayCast_s_p1=new it,Ii.RayCast_s_p2=new it,Ii.RayCast_s_d=new it,Ii.RayCast_s_e=new it,Ii.RayCast_s_q=new it,Ii.RayCast_s_r=new it,Ii.ComputeAABB_s_v1=new it,Ii.ComputeAABB_s_v2=new it;class Gi extends wi{constructor(){super(t.b2ShapeType.e_chainShape,c),this.m_vertices=[],this.m_count=0,this.m_prevVertex=new it,this.m_nextVertex=new it,this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1}CreateLoop(...t){if("number"==typeof t[0][0]){const e=t[0];if(e.length%2!=0)throw new Error;return this._CreateLoop(t=>({x:e[2*t],y:e[2*t+1]}),e.length/2)}{const e=t[0],i=t[1]||e.length;return this._CreateLoop(t=>e[t],i)}}_CreateLoop(t,e){if(e<3)return this;this.m_count=e+1,this.m_vertices=it.MakeArray(this.m_count);for(let i=0;i<e;++i)this.m_vertices[i].Copy(t(i));return this.m_vertices[e].Copy(this.m_vertices[0]),this.m_prevVertex.Copy(this.m_vertices[this.m_count-2]),this.m_nextVertex.Copy(this.m_vertices[1]),this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this}CreateChain(...t){if("number"==typeof t[0][0]){const e=t[0];if(e.length%2!=0)throw new Error;return this._CreateChain(t=>({x:e[2*t],y:e[2*t+1]}),e.length/2)}{const e=t[0],i=t[1]||e.length;return this._CreateChain(t=>e[t],i)}}_CreateChain(t,e){this.m_count=e,this.m_vertices=it.MakeArray(e);for(let i=0;i<e;++i)this.m_vertices[i].Copy(t(i));return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex.SetZero(),this.m_nextVertex.SetZero(),this}SetPrevVertex(t){return this.m_prevVertex.Copy(t),this.m_hasPrevVertex=!0,this}SetNextVertex(t){return this.m_nextVertex.Copy(t),this.m_hasNextVertex=!0,this}Clone(){return(new Gi).Copy(this)}Copy(t){return super.Copy(t),this._CreateChain(e=>t.m_vertices[e],t.m_count),this.m_prevVertex.Copy(t.m_prevVertex),this.m_nextVertex.Copy(t.m_nextVertex),this.m_hasPrevVertex=t.m_hasPrevVertex,this.m_hasNextVertex=t.m_hasNextVertex,this}GetChildCount(){return this.m_count-1}GetChildEdge(t,e){t.m_radius=this.m_radius,t.m_vertex1.Copy(this.m_vertices[e]),t.m_vertex2.Copy(this.m_vertices[e+1]),e>0?(t.m_vertex0.Copy(this.m_vertices[e-1]),t.m_hasVertex0=!0):(t.m_vertex0.Copy(this.m_prevVertex),t.m_hasVertex0=this.m_hasPrevVertex),e<this.m_count-2?(t.m_vertex3.Copy(this.m_vertices[e+2]),t.m_hasVertex3=!0):(t.m_vertex3.Copy(this.m_nextVertex),t.m_hasVertex3=this.m_hasNextVertex)}TestPoint(t,e){return!1}ComputeDistance(t,e,i,s){const o=Gi.ComputeDistance_s_edgeShape;return this.GetChildEdge(o,s),o.ComputeDistance(t,e,i,0)}RayCast(t,e,i,s){const o=Gi.RayCast_s_edgeShape;return o.m_vertex1.Copy(this.m_vertices[s]),o.m_vertex2.Copy(this.m_vertices[(s+1)%this.m_count]),o.RayCast(t,e,i,0)}ComputeAABB(t,e,i){const s=this.m_vertices[i],o=this.m_vertices[(i+1)%this.m_count],n=mt.MulXV(e,s,Gi.ComputeAABB_s_v1),r=mt.MulXV(e,o,Gi.ComputeAABB_s_v2);it.MinV(n,r,t.lowerBound),it.MaxV(n,r,t.upperBound)}ComputeMass(t,e){t.mass=0,t.center.SetZero(),t.I=0}SetupDistanceProxy(t,e){t.m_vertices=t.m_buffer,t.m_vertices[0].Copy(this.m_vertices[e]),e+1<this.m_count?t.m_vertices[1].Copy(this.m_vertices[e+1]):t.m_vertices[1].Copy(this.m_vertices[0]),t.m_count=2,t.m_radius=this.m_radius}ComputeSubmergedArea(t,e,i,s){return s.SetZero(),0}Dump(t){t("    const shape: b2ChainShape = new b2ChainShape();\n"),t("    const vs: b2Vec2[] = [];\n");for(let e=0;e<this.m_count;++e)t("    vs[%d] = new bVec2(%.15f, %.15f);\n",e,this.m_vertices[e].x,this.m_vertices[e].y);t("    shape.CreateChain(vs, %d);\n",this.m_count),t("    shape.m_prevVertex.Set(%.15f, %.15f);\n",this.m_prevVertex.x,this.m_prevVertex.y),t("    shape.m_nextVertex.Set(%.15f, %.15f);\n",this.m_nextVertex.x,this.m_nextVertex.y),t("    shape.m_hasPrevVertex = %s;\n",this.m_hasPrevVertex?"true":"false"),t("    shape.m_hasNextVertex = %s;\n",this.m_hasNextVertex?"true":"false")}}Gi.ComputeDistance_s_edgeShape=new Ii,Gi.RayCast_s_edgeShape=new Ii,Gi.ComputeAABB_s_v1=new it,Gi.ComputeAABB_s_v2=new it;class Di{constructor(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0}Clone(){return(new Di).Copy(this)}Copy(t){return this.categoryBits=t.categoryBits,this.maskBits=t.maskBits,this.groupIndex=t.groupIndex||0,this}}Di.DEFAULT=new Di;class Fi{constructor(){this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.isSensor=!1,this.filter=new Di}}class Ti{constructor(t,e){this.aabb=new Wt,this.childIndex=0,this.fixture=t,this.childIndex=e,this.fixture.m_shape.ComputeAABB(this.aabb,this.fixture.m_body.GetTransform(),e),this.treeNode=this.fixture.m_body.m_world.m_contactManager.m_broadPhase.CreateProxy(this.aabb,this)}Reset(){this.fixture.m_body.m_world.m_contactManager.m_broadPhase.DestroyProxy(this.treeNode)}Touch(){this.fixture.m_body.m_world.m_contactManager.m_broadPhase.TouchProxy(this.treeNode)}Synchronize(t,e,i){if(t===e)this.fixture.m_shape.ComputeAABB(this.aabb,t,this.childIndex),this.fixture.m_body.m_world.m_contactManager.m_broadPhase.MoveProxy(this.treeNode,this.aabb,i);else{const s=Ti.Synchronize_s_aabb1,o=Ti.Synchronize_s_aabb2;this.fixture.m_shape.ComputeAABB(s,t,this.childIndex),this.fixture.m_shape.ComputeAABB(o,e,this.childIndex),this.aabb.Combine2(s,o),this.fixture.m_body.m_world.m_contactManager.m_broadPhase.MoveProxy(this.treeNode,this.aabb,i)}}}Ti.Synchronize_s_aabb1=new Wt,Ti.Synchronize_s_aabb2=new Wt;class Li{constructor(t,i){this.m_density=0,this.m_next=null,this.m_friction=0,this.m_restitution=0,this.m_proxies=[],this.m_filter=new Di,this.m_isSensor=!1,this.m_userData=null,this.m_body=t,this.m_shape=i.shape.Clone(),this.m_userData=e(i.userData,null),this.m_friction=e(i.friction,.2),this.m_restitution=e(i.restitution,0),this.m_filter.Copy(e(i.filter,Di.DEFAULT)),this.m_isSensor=e(i.isSensor,!1),this.m_density=e(i.density,0)}get m_proxyCount(){return this.m_proxies.length}Reset(){}GetType(){return this.m_shape.GetType()}GetShape(){return this.m_shape}SetSensor(t){t!==this.m_isSensor&&(this.m_body.SetAwake(!0),this.m_isSensor=t)}IsSensor(){return this.m_isSensor}SetFilterData(t){this.m_filter.Copy(t),this.Refilter()}GetFilterData(){return this.m_filter}Refilter(){let t=this.m_body.GetContactList();for(;t;){const e=t.contact,i=e.GetFixtureA(),s=e.GetFixtureB();i!==this&&s!==this||e.FlagForFiltering(),t=t.next}this.TouchProxies()}GetBody(){return this.m_body}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(t){this.m_userData=t}TestPoint(t){return this.m_shape.TestPoint(this.m_body.GetTransform(),t)}ComputeDistance(t,e,i){return this.m_shape.ComputeDistance(this.m_body.GetTransform(),t,e,i)}RayCast(t,e,i){return this.m_shape.RayCast(t,e,this.m_body.GetTransform(),i)}GetMassData(t=new bi){return this.m_shape.ComputeMass(t,this.m_density),t}SetDensity(t){this.m_density=t}GetDensity(){return this.m_density}GetFriction(){return this.m_friction}SetFriction(t){this.m_friction=t}GetRestitution(){return this.m_restitution}SetRestitution(t){this.m_restitution=t}GetAABB(t){return this.m_proxies[t].aabb}Dump(t,e){t("    const fd: b2FixtureDef = new b2FixtureDef();\n"),t("    fd.friction = %.15f;\n",this.m_friction),t("    fd.restitution = %.15f;\n",this.m_restitution),t("    fd.density = %.15f;\n",this.m_density),t("    fd.isSensor = %s;\n",this.m_isSensor?"true":"false"),t("    fd.filter.categoryBits = %d;\n",this.m_filter.categoryBits),t("    fd.filter.maskBits = %d;\n",this.m_filter.maskBits),t("    fd.filter.groupIndex = %d;\n",this.m_filter.groupIndex),this.m_shape.Dump(t),t("\n"),t("    fd.shape = shape;\n"),t("\n"),t("    bodies[%d].CreateFixture(fd);\n",e)}CreateProxies(){if(0!==this.m_proxies.length)throw new Error;for(let t=0;t<this.m_shape.GetChildCount();++t)this.m_proxies[t]=new Ti(this,t)}DestroyProxies(){for(const t of this.m_proxies)t.Reset();this.m_proxies.length=0}TouchProxies(){for(const t of this.m_proxies)t.Touch()}SynchronizeProxies(t,e,i){for(const s of this.m_proxies)s.Synchronize(t,e,i)}}(Vi=t.b2BodyType||(t.b2BodyType={}))[Vi.b2_unknown=-1]="b2_unknown",Vi[Vi.b2_staticBody=0]="b2_staticBody",Vi[Vi.b2_kinematicBody=1]="b2_kinematicBody",Vi[Vi.b2_dynamicBody=2]="b2_dynamicBody";class Ri{constructor(i,s){this.m_type=t.b2BodyType.b2_staticBody,this.m_islandFlag=!1,this.m_awakeFlag=!1,this.m_autoSleepFlag=!1,this.m_bulletFlag=!1,this.m_fixedRotationFlag=!1,this.m_activeFlag=!1,this.m_toiFlag=!1,this.m_islandIndex=0,this.m_xf=new mt,this.m_xf0=new mt,this.m_sweep=new lt,this.m_linearVelocity=new it,this.m_angularVelocity=0,this.m_force=new it,this.m_torque=0,this.m_prev=null,this.m_next=null,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_jointList=null,this.m_contactList=null,this.m_mass=1,this.m_invMass=1,this.m_I=0,this.m_invI=0,this.m_linearDamping=0,this.m_angularDamping=0,this.m_gravityScale=1,this.m_sleepTime=0,this.m_userData=null,this.m_controllerList=null,this.m_controllerCount=0,this.m_bulletFlag=e(i.bullet,!1),this.m_fixedRotationFlag=e(i.fixedRotation,!1),this.m_autoSleepFlag=e(i.allowSleep,!0),this.m_awakeFlag=e(i.awake,!0),this.m_activeFlag=e(i.active,!0),this.m_world=s,this.m_xf.p.Copy(e(i.position,it.ZERO)),this.m_xf.q.SetAngle(e(i.angle,0)),this.m_xf0.Copy(this.m_xf),this.m_sweep.localCenter.SetZero(),this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=this.m_sweep.a=this.m_xf.q.GetAngle(),this.m_sweep.alpha0=0,this.m_linearVelocity.Copy(e(i.linearVelocity,it.ZERO)),this.m_angularVelocity=e(i.angularVelocity,0),this.m_linearDamping=e(i.linearDamping,0),this.m_angularDamping=e(i.angularDamping,0),this.m_gravityScale=e(i.gravityScale,1),this.m_force.SetZero(),this.m_torque=0,this.m_sleepTime=0,this.m_type=e(i.type,t.b2BodyType.b2_staticBody),i.type===t.b2BodyType.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_userData=i.userData,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_controllerList=null,this.m_controllerCount=0}CreateFixture(t,e=0){return t instanceof wi?this.CreateFixtureShapeDensity(t,e):this.CreateFixtureDef(t)}CreateFixtureDef(t){if(this.m_world.IsLocked())throw new Error;const e=new Li(this,t);return this.m_activeFlag&&e.CreateProxies(),e.m_next=this.m_fixtureList,this.m_fixtureList=e,++this.m_fixtureCount,e.m_density>0&&this.ResetMassData(),this.m_world.m_newFixture=!0,e}CreateFixtureShapeDensity(t,e=0){const i=Ri.CreateFixtureShapeDensity_s_def;return i.shape=t,i.density=e,this.CreateFixtureDef(i)}DestroyFixture(t){if(this.m_world.IsLocked())throw new Error;let e=this.m_fixtureList,i=null;for(;null!==e;){if(e===t){i?i.m_next=t.m_next:this.m_fixtureList=t.m_next;break}i=e,e=e.m_next}let s=this.m_contactList;for(;s;){const e=s.contact;s=s.next;const i=e.GetFixtureA(),o=e.GetFixtureB();t!==i&&t!==o||this.m_world.m_contactManager.Destroy(e)}this.m_activeFlag&&t.DestroyProxies(),t.m_next=null,t.Reset(),--this.m_fixtureCount,this.ResetMassData()}SetTransformVec(t,e){this.SetTransformXY(t.x,t.y,e)}SetTransformXY(t,e,i){if(this.m_world.IsLocked())throw new Error;this.m_xf.q.SetAngle(i),this.m_xf.p.Set(t,e),this.m_xf0.Copy(this.m_xf),mt.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.a=i,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_sweep.a0=i;for(let s=this.m_fixtureList;s;s=s.m_next)s.SynchronizeProxies(this.m_xf,this.m_xf,it.ZERO);this.m_world.m_contactManager.FindNewContacts()}SetTransform(t){this.SetTransformVec(t.p,t.GetAngle())}GetTransform(){return this.m_xf}GetPosition(){return this.m_xf.p}SetPosition(t){this.SetTransformVec(t,this.GetAngle())}SetPositionXY(t,e){this.SetTransformXY(t,e,this.GetAngle())}GetAngle(){return this.m_sweep.a}SetAngle(t){this.SetTransformVec(this.GetPosition(),t)}GetWorldCenter(){return this.m_sweep.c}GetLocalCenter(){return this.m_sweep.localCenter}SetLinearVelocity(e){this.m_type!==t.b2BodyType.b2_staticBody&&(it.DotVV(e,e)>0&&this.SetAwake(!0),this.m_linearVelocity.Copy(e))}GetLinearVelocity(){return this.m_linearVelocity}SetAngularVelocity(e){this.m_type!==t.b2BodyType.b2_staticBody&&(e*e>0&&this.SetAwake(!0),this.m_angularVelocity=e)}GetAngularVelocity(){return this.m_angularVelocity}GetDefinition(t){return t.type=this.GetType(),t.allowSleep=this.m_autoSleepFlag,t.angle=this.GetAngle(),t.angularDamping=this.m_angularDamping,t.gravityScale=this.m_gravityScale,t.angularVelocity=this.m_angularVelocity,t.fixedRotation=this.m_fixedRotationFlag,t.bullet=this.m_bulletFlag,t.awake=this.m_awakeFlag,t.linearDamping=this.m_linearDamping,t.linearVelocity.Copy(this.GetLinearVelocity()),t.position.Copy(this.GetPosition()),t.userData=this.GetUserData(),t}ApplyForce(e,i,s=!0){this.m_type===t.b2BodyType.b2_dynamicBody&&(s&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=e.x,this.m_force.y+=e.y,this.m_torque+=(i.x-this.m_sweep.c.x)*e.y-(i.y-this.m_sweep.c.y)*e.x))}ApplyForceToCenter(e,i=!0){this.m_type===t.b2BodyType.b2_dynamicBody&&(i&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=e.x,this.m_force.y+=e.y))}ApplyTorque(e,i=!0){this.m_type===t.b2BodyType.b2_dynamicBody&&(i&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_torque+=e))}ApplyLinearImpulse(e,i,s=!0){this.m_type===t.b2BodyType.b2_dynamicBody&&(s&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*e.x,this.m_linearVelocity.y+=this.m_invMass*e.y,this.m_angularVelocity+=this.m_invI*((i.x-this.m_sweep.c.x)*e.y-(i.y-this.m_sweep.c.y)*e.x)))}ApplyLinearImpulseToCenter(e,i=!0){this.m_type===t.b2BodyType.b2_dynamicBody&&(i&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*e.x,this.m_linearVelocity.y+=this.m_invMass*e.y))}ApplyAngularImpulse(e,i=!0){this.m_type===t.b2BodyType.b2_dynamicBody&&(i&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*e))}GetMass(){return this.m_mass}GetInertia(){return this.m_I+this.m_mass*it.DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter)}GetMassData(t){return t.mass=this.m_mass,t.I=this.m_I+this.m_mass*it.DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter),t.center.Copy(this.m_sweep.localCenter),t}SetMassData(e){if(this.m_world.IsLocked())throw new Error;if(this.m_type!==t.b2BodyType.b2_dynamicBody)return;this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=e.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,e.I>0&&!this.m_fixedRotationFlag&&(this.m_I=e.I-this.m_mass*it.DotVV(e.center,e.center),this.m_invI=1/this.m_I);const i=Ri.SetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(e.center),mt.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),it.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,it.SubVV(this.m_sweep.c,i,it.s_t0),this.m_linearVelocity)}ResetMassData(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type===t.b2BodyType.b2_staticBody||this.m_type===t.b2BodyType.b2_kinematicBody)return this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);const e=Ri.ResetMassData_s_localCenter.SetZero();for(let t=this.m_fixtureList;t;t=t.m_next){if(0===t.m_density)continue;const i=t.GetMassData(Ri.ResetMassData_s_massData);this.m_mass+=i.mass,e.x+=i.center.x*i.mass,e.y+=i.center.y*i.mass,this.m_I+=i.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,e.x*=this.m_invMass,e.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&!this.m_fixedRotationFlag?(this.m_I-=this.m_mass*it.DotVV(e,e),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);const i=Ri.ResetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(e),mt.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),it.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,it.SubVV(this.m_sweep.c,i,it.s_t0),this.m_linearVelocity)}GetWorldPoint(t,e){return mt.MulXV(this.m_xf,t,e)}GetWorldVector(t,e){return at.MulRV(this.m_xf.q,t,e)}GetLocalPoint(t,e){return mt.MulTXV(this.m_xf,t,e)}GetLocalVector(t,e){return at.MulTRV(this.m_xf.q,t,e)}GetLinearVelocityFromWorldPoint(t,e){return it.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,it.SubVV(t,this.m_sweep.c,it.s_t0),e)}GetLinearVelocityFromLocalPoint(t,e){return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(t,e),e)}GetLinearDamping(){return this.m_linearDamping}SetLinearDamping(t){this.m_linearDamping=t}GetAngularDamping(){return this.m_angularDamping}SetAngularDamping(t){this.m_angularDamping=t}GetGravityScale(){return this.m_gravityScale}SetGravityScale(t){this.m_gravityScale=t}SetType(e){if(this.m_world.IsLocked())throw new Error;if(this.m_type===e)return;this.m_type=e,this.ResetMassData(),this.m_type===t.b2BodyType.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.SynchronizeFixtures()),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;let i=this.m_contactList;for(;i;){const t=i;i=i.next,this.m_world.m_contactManager.Destroy(t.contact)}this.m_contactList=null;for(let t=this.m_fixtureList;t;t=t.m_next)t.TouchProxies()}GetType(){return this.m_type}SetBullet(t){this.m_bulletFlag=t}IsBullet(){return this.m_bulletFlag}SetSleepingAllowed(t){this.m_autoSleepFlag=t,t||this.SetAwake(!0)}IsSleepingAllowed(){return this.m_autoSleepFlag}SetAwake(t){t?(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)}IsAwake(){return this.m_awakeFlag}SetActive(t){if(this.m_world.IsLocked())throw new Error;if(t!==this.IsActive())if(this.m_activeFlag=t,t)for(let e=this.m_fixtureList;e;e=e.m_next)e.CreateProxies();else{for(let e=this.m_fixtureList;e;e=e.m_next)e.DestroyProxies();let t=this.m_contactList;for(;t;){const e=t;t=t.next,this.m_world.m_contactManager.Destroy(e.contact)}this.m_contactList=null}}IsActive(){return this.m_activeFlag}SetFixedRotation(t){this.m_fixedRotationFlag!==t&&(this.m_fixedRotationFlag=t,this.m_angularVelocity=0,this.ResetMassData())}IsFixedRotation(){return this.m_fixedRotationFlag}GetFixtureList(){return this.m_fixtureList}GetJointList(){return this.m_jointList}GetContactList(){return this.m_contactList}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(t){this.m_userData=t}GetWorld(){return this.m_world}Dump(e){const i=this.m_islandIndex;e("{\n"),e("  const bd: b2BodyDef = new b2BodyDef();\n");let s="";switch(this.m_type){case t.b2BodyType.b2_staticBody:s="b2BodyType.b2_staticBody";break;case t.b2BodyType.b2_kinematicBody:s="b2BodyType.b2_kinematicBody";break;case t.b2BodyType.b2_dynamicBody:s="b2BodyType.b2_dynamicBody"}e("  bd.type = %s;\n",s),e("  bd.position.Set(%.15f, %.15f);\n",this.m_xf.p.x,this.m_xf.p.y),e("  bd.angle = %.15f;\n",this.m_sweep.a),e("  bd.linearVelocity.Set(%.15f, %.15f);\n",this.m_linearVelocity.x,this.m_linearVelocity.y),e("  bd.angularVelocity = %.15f;\n",this.m_angularVelocity),e("  bd.linearDamping = %.15f;\n",this.m_linearDamping),e("  bd.angularDamping = %.15f;\n",this.m_angularDamping),e("  bd.allowSleep = %s;\n",this.m_autoSleepFlag?"true":"false"),e("  bd.awake = %s;\n",this.m_awakeFlag?"true":"false"),e("  bd.fixedRotation = %s;\n",this.m_fixedRotationFlag?"true":"false"),e("  bd.bullet = %s;\n",this.m_bulletFlag?"true":"false"),e("  bd.active = %s;\n",this.m_activeFlag?"true":"false"),e("  bd.gravityScale = %.15f;\n",this.m_gravityScale),e("\n"),e("  bodies[%d] = this.m_world.CreateBody(bd);\n",this.m_islandIndex),e("\n");for(let t=this.m_fixtureList;t;t=t.m_next)e("  {\n"),t.Dump(e,i),e("  }\n");e("}\n")}SynchronizeFixtures(){const t=Ri.SynchronizeFixtures_s_xf1;t.q.SetAngle(this.m_sweep.a0),at.MulRV(t.q,this.m_sweep.localCenter,t.p),it.SubVV(this.m_sweep.c0,t.p,t.p);const e=it.SubVV(this.m_sweep.c,this.m_sweep.c0,Ri.SynchronizeFixtures_s_displacement);for(let i=this.m_fixtureList;i;i=i.m_next)i.SynchronizeProxies(t,this.m_xf,e)}SynchronizeTransform(){this.m_xf.q.SetAngle(this.m_sweep.a),at.MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),it.SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)}ShouldCollide(e){return(this.m_type!==t.b2BodyType.b2_staticBody||e.m_type!==t.b2BodyType.b2_staticBody)&&this.ShouldCollideConnected(e)}ShouldCollideConnected(t){for(let e=this.m_jointList;e;e=e.next)if(e.other===t&&!e.joint.m_collideConnected)return!1;return!0}Advance(t){this.m_sweep.Advance(t),this.m_sweep.c.Copy(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_xf.q.SetAngle(this.m_sweep.a),at.MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),it.SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)}GetControllerList(){return this.m_controllerList}GetControllerCount(){return this.m_controllerCount}}Ri.CreateFixtureShapeDensity_s_def=new Fi,Ri.SetMassData_s_oldCenter=new it,Ri.ResetMassData_s_localCenter=new it,Ri.ResetMassData_s_oldCenter=new it,Ri.ResetMassData_s_massData=new bi,Ri.SynchronizeFixtures_s_xf1=new mt,Ri.SynchronizeFixtures_s_displacement=new it,(gi=t.b2JointType||(t.b2JointType={}))[gi.e_unknownJoint=0]="e_unknownJoint",gi[gi.e_revoluteJoint=1]="e_revoluteJoint",gi[gi.e_prismaticJoint=2]="e_prismaticJoint",gi[gi.e_distanceJoint=3]="e_distanceJoint",gi[gi.e_pulleyJoint=4]="e_pulleyJoint",gi[gi.e_mouseJoint=5]="e_mouseJoint",gi[gi.e_gearJoint=6]="e_gearJoint",gi[gi.e_wheelJoint=7]="e_wheelJoint",gi[gi.e_weldJoint=8]="e_weldJoint",gi[gi.e_frictionJoint=9]="e_frictionJoint",gi[gi.e_ropeJoint=10]="e_ropeJoint",gi[gi.e_motorJoint=11]="e_motorJoint",gi[gi.e_areaJoint=12]="e_areaJoint",(vi=t.b2LimitState||(t.b2LimitState={}))[vi.e_inactiveLimit=0]="e_inactiveLimit",vi[vi.e_atLowerLimit=1]="e_atLowerLimit",vi[vi.e_atUpperLimit=2]="e_atUpperLimit",vi[vi.e_equalLimits=3]="e_equalLimits";class ki{constructor(t){this._other=null,this.prev=null,this.next=null,this.joint=t}get other(){if(null===this._other)throw new Error;return this._other}set other(t){if(null!==this._other)throw new Error;this._other=t}Reset(){this._other=null,this.prev=null,this.next=null}}class qi{constructor(e){this.type=t.b2JointType.e_unknownJoint,this.userData=null,this.collideConnected=!1,this.type=e}}class zi{constructor(i){this.m_type=t.b2JointType.e_unknownJoint,this.m_prev=null,this.m_next=null,this.m_edgeA=new ki(this),this.m_edgeB=new ki(this),this.m_index=0,this.m_islandFlag=!1,this.m_collideConnected=!1,this.m_userData=null,this.m_type=i.type,this.m_edgeA.other=i.bodyB,this.m_edgeB.other=i.bodyA,this.m_bodyA=i.bodyA,this.m_bodyB=i.bodyB,this.m_collideConnected=e(i.collideConnected,!1),this.m_userData=e(i.userData,null)}GetType(){return this.m_type}GetBodyA(){return this.m_bodyA}GetBodyB(){return this.m_bodyB}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(t){this.m_userData=t}IsActive(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()}GetCollideConnected(){return this.m_collideConnected}Dump(t){t("// Dump is not supported for this joint type.\n")}ShiftOrigin(t){}}class Ji extends qi{constructor(){super(t.b2JointType.e_distanceJoint),this.localAnchorA=new it,this.localAnchorB=new it,this.length=1,this.frequencyHz=0,this.dampingRatio=0}Initialize(t,e,i,s){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(s,this.localAnchorB),this.length=it.DistanceVV(i,s),this.frequencyHz=0,this.dampingRatio=0}}class Ni extends zi{constructor(t){super(t),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_bias=0,this.m_localAnchorA=new it,this.m_localAnchorB=new it,this.m_gamma=0,this.m_impulse=0,this.m_length=0,this.m_indexA=0,this.m_indexB=0,this.m_u=new it,this.m_rA=new it,this.m_rB=new it,this.m_localCenterA=new it,this.m_localCenterB=new it,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_qA=new at,this.m_qB=new at,this.m_lalcA=new it,this.m_lalcB=new it,this.m_frequencyHz=e(t.frequencyHz,0),this.m_dampingRatio=e(t.dampingRatio,0),this.m_localAnchorA.Copy(t.localAnchorA),this.m_localAnchorB.Copy(t.localAnchorB),this.m_length=t.length}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.x=t*this.m_impulse*this.m_u.x,e.y=t*this.m_impulse*this.m_u.y,e}GetReactionTorque(t){return 0}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetLength(t){this.m_length=t}Length(){return this.m_length}SetFrequency(t){this.m_frequencyHz=t}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(t){this.m_dampingRatio=t}GetDampingRatio(){return this.m_dampingRatio}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2DistanceJointDef = new b2DistanceJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),t("  jd.length = %.15f;\n",this.m_length),t("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),t("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,s=t.velocities[this.m_indexA].v;let o=t.velocities[this.m_indexA].w;const r=t.positions[this.m_indexB].c,a=t.positions[this.m_indexB].a,m=t.velocities[this.m_indexB].v;let l=t.velocities[this.m_indexB].w;const _=this.m_qA.SetAngle(i),c=this.m_qB.SetAngle(a);it.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),at.MulRV(_,this.m_lalcA,this.m_rA),it.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),at.MulRV(c,this.m_lalcB,this.m_rB),this.m_u.x=r.x+this.m_rB.x-e.x-this.m_rA.x,this.m_u.y=r.y+this.m_rB.y-e.y-this.m_rA.y;const u=this.m_u.Length();u>h?this.m_u.SelfMul(1/u):this.m_u.SetZero();const d=it.CrossVV(this.m_rA,this.m_u),p=it.CrossVV(this.m_rB,this.m_u);let f=this.m_invMassA+this.m_invIA*d*d+this.m_invMassB+this.m_invIB*p*p;if(this.m_mass=0!==f?1/f:0,this.m_frequencyHz>0){const e=u-this.m_length,i=2*n*this.m_frequencyHz,s=2*this.m_mass*this.m_dampingRatio*i,o=this.m_mass*i*i,r=t.step.dt;this.m_gamma=r*(s+r*o),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=e*r*o*this.m_gamma,f+=this.m_gamma,this.m_mass=0!==f?1/f:0}else this.m_gamma=0,this.m_bias=0;if(t.step.warmStarting){this.m_impulse*=t.step.dtRatio;const e=it.MulSV(this.m_impulse,this.m_u,Ni.InitVelocityConstraints_s_P);s.SelfMulSub(this.m_invMassA,e),o-=this.m_invIA*it.CrossVV(this.m_rA,e),m.SelfMulAdd(this.m_invMassB,e),l+=this.m_invIB*it.CrossVV(this.m_rB,e)}else this.m_impulse=0;t.velocities[this.m_indexA].w=o,t.velocities[this.m_indexB].w=l}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const s=t.velocities[this.m_indexB].v;let o=t.velocities[this.m_indexB].w;const n=it.AddVCrossSV(e,i,this.m_rA,Ni.SolveVelocityConstraints_s_vpA),r=it.AddVCrossSV(s,o,this.m_rB,Ni.SolveVelocityConstraints_s_vpB),a=it.DotVV(this.m_u,it.SubVV(r,n,it.s_t0)),m=-this.m_mass*(a+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=m;const l=it.MulSV(m,this.m_u,Ni.SolveVelocityConstraints_s_P);e.SelfMulSub(this.m_invMassA,l),i-=this.m_invIA*it.CrossVV(this.m_rA,l),s.SelfMulAdd(this.m_invMassB,l),o+=this.m_invIB*it.CrossVV(this.m_rB,l),t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=o}SolvePositionConstraints(t){if(this.m_frequencyHz>0)return!0;const e=t.positions[this.m_indexA].c;let i=t.positions[this.m_indexA].a;const s=t.positions[this.m_indexB].c;let o=t.positions[this.m_indexB].a;const n=this.m_qA.SetAngle(i),r=this.m_qB.SetAngle(o),a=at.MulRV(n,this.m_lalcA,this.m_rA),m=at.MulRV(r,this.m_lalcB,this.m_rB),l=this.m_u;l.x=s.x+m.x-e.x-a.x,l.y=s.y+m.y-e.y-a.y;let _=this.m_u.Normalize()-this.m_length;_=X(_,-f,f);const c=-this.m_mass*_,u=it.MulSV(c,l,Ni.SolvePositionConstraints_s_P);return e.SelfMulSub(this.m_invMassA,u),i-=this.m_invIA*it.CrossVV(a,u),s.SelfMulAdd(this.m_invMassB,u),o+=this.m_invIB*it.CrossVV(m,u),t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=o,j(_)<h}}Ni.InitVelocityConstraints_s_P=new it,Ni.SolveVelocityConstraints_s_vpA=new it,Ni.SolveVelocityConstraints_s_vpB=new it,Ni.SolveVelocityConstraints_s_P=new it,Ni.SolvePositionConstraints_s_P=new it;class ji extends zi{constructor(t){super(t),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_impulse=0,this.m_targetArea=0,this.m_delta=new it,this.m_bodies=t.bodies,this.m_frequencyHz=e(t.frequencyHz,0),this.m_dampingRatio=e(t.dampingRatio,0),this.m_targetLengths=q(t.bodies.length),this.m_normals=it.MakeArray(t.bodies.length),this.m_joints=[],this.m_deltas=it.MakeArray(t.bodies.length);const i=new Ji;i.frequencyHz=this.m_frequencyHz,i.dampingRatio=this.m_dampingRatio,this.m_targetArea=0;for(let e=0;e<this.m_bodies.length;++e){const t=this.m_bodies[e],s=this.m_bodies[(e+1)%this.m_bodies.length],o=t.GetWorldCenter(),n=s.GetWorldCenter();this.m_targetLengths[e]=it.DistanceVV(o,n),this.m_targetArea+=it.CrossVV(o,n),i.Initialize(t,s,o,n),this.m_joints[e]=t.GetWorld().CreateJoint(i)}this.m_targetArea*=.5}GetAnchorA(t){return t}GetAnchorB(t){return t}GetReactionForce(t,e){return e}GetReactionTorque(t){return 0}SetFrequency(t){this.m_frequencyHz=t;for(let e=0;e<this.m_joints.length;++e)this.m_joints[e].SetFrequency(t)}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(t){this.m_dampingRatio=t;for(let e=0;e<this.m_joints.length;++e)this.m_joints[e].SetDampingRatio(t)}GetDampingRatio(){return this.m_dampingRatio}Dump(t){t("Area joint dumping is not supported.\n")}InitVelocityConstraints(t){for(let e=0;e<this.m_bodies.length;++e){const i=this.m_bodies[(e+this.m_bodies.length-1)%this.m_bodies.length],s=this.m_bodies[(e+1)%this.m_bodies.length],o=t.positions[i.m_islandIndex].c,n=t.positions[s.m_islandIndex].c,r=this.m_deltas[e];it.SubVV(n,o,r)}if(t.step.warmStarting){this.m_impulse*=t.step.dtRatio;for(let e=0;e<this.m_bodies.length;++e){const i=this.m_bodies[e],s=t.velocities[i.m_islandIndex].v,o=this.m_deltas[e];s.x+=i.m_invMass*o.y*.5*this.m_impulse,s.y+=i.m_invMass*-o.x*.5*this.m_impulse}}else this.m_impulse=0}SolveVelocityConstraints(t){let e=0,i=0;for(let o=0;o<this.m_bodies.length;++o){const s=this.m_bodies[o],n=t.velocities[s.m_islandIndex].v,r=this.m_deltas[o];e+=r.LengthSquared()/s.GetMass(),i+=it.CrossVV(n,r)}const s=-2*i/e;this.m_impulse+=s;for(let o=0;o<this.m_bodies.length;++o){const e=this.m_bodies[o],i=t.velocities[e.m_islandIndex].v,n=this.m_deltas[o];i.x+=e.m_invMass*n.y*.5*s,i.y+=e.m_invMass*-n.x*.5*s}}SolvePositionConstraints(t){let e=0,i=0;for(let r=0;r<this.m_bodies.length;++r){const o=this.m_bodies[r],n=this.m_bodies[(r+1)%this.m_bodies.length],a=t.positions[o.m_islandIndex].c,m=t.positions[n.m_islandIndex].c,l=it.SubVV(m,a,this.m_delta);let h=l.Length();h<s&&(h=1),this.m_normals[r].x=l.y/h,this.m_normals[r].y=-l.x/h,e+=h,i+=it.CrossVV(a,m)}i*=.5;const o=.5*(this.m_targetArea-i)/e;let n=!0;for(let s=0;s<this.m_bodies.length;++s){const e=this.m_bodies[s],i=t.positions[e.m_islandIndex].c,r=(s+1)%this.m_bodies.length,a=it.AddVV(this.m_normals[s],this.m_normals[r],this.m_delta);a.SelfMul(o);const m=a.LengthSquared();m>Z(f)&&a.SelfMul(f/Q(m)),m>Z(h)&&(n=!1),i.x+=a.x,i.y+=a.y}return n}}class Ei extends zi{constructor(t){super(t),this.m_localAnchorA=new it,this.m_localAnchorB=new it,this.m_linearImpulse=new it,this.m_angularImpulse=0,this.m_maxForce=0,this.m_maxTorque=0,this.m_indexA=0,this.m_indexB=0,this.m_rA=new it,this.m_rB=new it,this.m_localCenterA=new it,this.m_localCenterB=new it,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_linearMass=new nt,this.m_angularMass=0,this.m_qA=new at,this.m_qB=new at,this.m_lalcA=new it,this.m_lalcB=new it,this.m_K=new nt,this.m_localAnchorA.Copy(t.localAnchorA),this.m_localAnchorB.Copy(t.localAnchorB),this.m_linearImpulse.SetZero(),this.m_maxForce=e(t.maxForce,0),this.m_maxTorque=e(t.maxTorque,0),this.m_linearMass.SetZero()}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].a,i=t.velocities[this.m_indexA].v;let s=t.velocities[this.m_indexA].w;const o=t.positions[this.m_indexB].a,n=t.velocities[this.m_indexB].v;let r=t.velocities[this.m_indexB].w;const a=this.m_qA.SetAngle(e),m=this.m_qB.SetAngle(o);it.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const l=at.MulRV(a,this.m_lalcA,this.m_rA);it.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const h=at.MulRV(m,this.m_lalcB,this.m_rB),_=this.m_invMassA,c=this.m_invMassB,u=this.m_invIA,d=this.m_invIB,p=this.m_K;if(p.ex.x=_+c+u*l.y*l.y+d*h.y*h.y,p.ex.y=-u*l.x*l.y-d*h.x*h.y,p.ey.x=p.ex.y,p.ey.y=_+c+u*l.x*l.x+d*h.x*h.x,p.GetInverse(this.m_linearMass),this.m_angularMass=u+d,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.step.warmStarting){this.m_linearImpulse.SelfMul(t.step.dtRatio),this.m_angularImpulse*=t.step.dtRatio;const e=this.m_linearImpulse;i.SelfMulSub(_,e),s-=u*(it.CrossVV(this.m_rA,e)+this.m_angularImpulse),n.SelfMulAdd(c,e),r+=d*(it.CrossVV(this.m_rB,e)+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0;t.velocities[this.m_indexA].w=s,t.velocities[this.m_indexB].w=r}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const s=t.velocities[this.m_indexB].v;let o=t.velocities[this.m_indexB].w;const n=this.m_invMassA,r=this.m_invMassB,a=this.m_invIA,m=this.m_invIB,l=t.step.dt;{const t=o-i;let e=-this.m_angularMass*t;const s=this.m_angularImpulse,n=l*this.m_maxTorque;this.m_angularImpulse=X(this.m_angularImpulse+e,-n,n),i-=a*(e=this.m_angularImpulse-s),o+=m*e}{const t=it.SubVV(it.AddVCrossSV(s,o,this.m_rB,it.s_t0),it.AddVCrossSV(e,i,this.m_rA,it.s_t1),Ei.SolveVelocityConstraints_s_Cdot_v2),h=nt.MulMV(this.m_linearMass,t,Ei.SolveVelocityConstraints_s_impulseV).SelfNeg(),_=Ei.SolveVelocityConstraints_s_oldImpulseV.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(h);const c=l*this.m_maxForce;this.m_linearImpulse.LengthSquared()>c*c&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(c)),it.SubVV(this.m_linearImpulse,_,h),e.SelfMulSub(n,h),i-=a*it.CrossVV(this.m_rA,h),s.SelfMulAdd(r,h),o+=m*it.CrossVV(this.m_rB,h)}t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=o}SolvePositionConstraints(t){return!0}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.x=t*this.m_linearImpulse.x,e.y=t*this.m_linearImpulse.y,e}GetReactionTorque(t){return t*this.m_angularImpulse}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetMaxForce(t){this.m_maxForce=t}GetMaxForce(){return this.m_maxForce}SetMaxTorque(t){this.m_maxTorque=t}GetMaxTorque(){return this.m_maxTorque}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2FrictionJointDef = new b2FrictionJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),t("  jd.maxForce = %.15f;\n",this.m_maxForce),t("  jd.maxTorque = %.15f;\n",this.m_maxTorque),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}Ei.SolveVelocityConstraints_s_Cdot_v2=new it,Ei.SolveVelocityConstraints_s_impulseV=new it,Ei.SolveVelocityConstraints_s_oldImpulseV=new it;class Oi extends zi{constructor(i){let s,o;super(i),this.m_typeA=t.b2JointType.e_unknownJoint,this.m_typeB=t.b2JointType.e_unknownJoint,this.m_localAnchorA=new it,this.m_localAnchorB=new it,this.m_localAnchorC=new it,this.m_localAnchorD=new it,this.m_localAxisC=new it,this.m_localAxisD=new it,this.m_referenceAngleA=0,this.m_referenceAngleB=0,this.m_constant=0,this.m_ratio=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_indexC=0,this.m_indexD=0,this.m_lcA=new it,this.m_lcB=new it,this.m_lcC=new it,this.m_lcD=new it,this.m_mA=0,this.m_mB=0,this.m_mC=0,this.m_mD=0,this.m_iA=0,this.m_iB=0,this.m_iC=0,this.m_iD=0,this.m_JvAC=new it,this.m_JvBD=new it,this.m_JwA=0,this.m_JwB=0,this.m_JwC=0,this.m_JwD=0,this.m_mass=0,this.m_qA=new at,this.m_qB=new at,this.m_qC=new at,this.m_qD=new at,this.m_lalcA=new it,this.m_lalcB=new it,this.m_lalcC=new it,this.m_lalcD=new it,this.m_joint1=i.joint1,this.m_joint2=i.joint2,this.m_typeA=this.m_joint1.GetType(),this.m_typeB=this.m_joint2.GetType(),this.m_bodyC=this.m_joint1.GetBodyA(),this.m_bodyA=this.m_joint1.GetBodyB();const n=this.m_bodyA.m_xf,r=this.m_bodyA.m_sweep.a,a=this.m_bodyC.m_xf,m=this.m_bodyC.m_sweep.a;if(this.m_typeA===t.b2JointType.e_revoluteJoint){const t=i.joint1;this.m_localAnchorC.Copy(t.m_localAnchorA),this.m_localAnchorA.Copy(t.m_localAnchorB),this.m_referenceAngleA=t.m_referenceAngle,this.m_localAxisC.SetZero(),s=r-m-this.m_referenceAngleA}else{const t=i.joint1;this.m_localAnchorC.Copy(t.m_localAnchorA),this.m_localAnchorA.Copy(t.m_localAnchorB),this.m_referenceAngleA=t.m_referenceAngle,this.m_localAxisC.Copy(t.m_localXAxisA);const e=this.m_localAnchorC,o=at.MulTRV(a.q,it.AddVV(at.MulRV(n.q,this.m_localAnchorA,it.s_t0),it.SubVV(n.p,a.p,it.s_t1),it.s_t0),it.s_t0);s=it.DotVV(it.SubVV(o,e,it.s_t0),this.m_localAxisC)}this.m_bodyD=this.m_joint2.GetBodyA(),this.m_bodyB=this.m_joint2.GetBodyB();const l=this.m_bodyB.m_xf,h=this.m_bodyB.m_sweep.a,_=this.m_bodyD.m_xf,c=this.m_bodyD.m_sweep.a;if(this.m_typeB===t.b2JointType.e_revoluteJoint){const t=i.joint2;this.m_localAnchorD.Copy(t.m_localAnchorA),this.m_localAnchorB.Copy(t.m_localAnchorB),this.m_referenceAngleB=t.m_referenceAngle,this.m_localAxisD.SetZero(),o=h-c-this.m_referenceAngleB}else{const t=i.joint2;this.m_localAnchorD.Copy(t.m_localAnchorA),this.m_localAnchorB.Copy(t.m_localAnchorB),this.m_referenceAngleB=t.m_referenceAngle,this.m_localAxisD.Copy(t.m_localXAxisA);const e=this.m_localAnchorD,s=at.MulTRV(_.q,it.AddVV(at.MulRV(l.q,this.m_localAnchorB,it.s_t0),it.SubVV(l.p,_.p,it.s_t1),it.s_t0),it.s_t0);o=it.DotVV(it.SubVV(s,e,it.s_t0),this.m_localAxisD)}this.m_ratio=e(i.ratio,1),this.m_constant=s+this.m_ratio*o,this.m_impulse=0}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_indexC=this.m_bodyC.m_islandIndex,this.m_indexD=this.m_bodyD.m_islandIndex,this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter),this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter),this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;const i=e.positions[this.m_indexA].a,s=e.velocities[this.m_indexA].v;let o=e.velocities[this.m_indexA].w;const n=e.positions[this.m_indexB].a,r=e.velocities[this.m_indexB].v;let a=e.velocities[this.m_indexB].w;const m=e.positions[this.m_indexC].a,l=e.velocities[this.m_indexC].v;let h=e.velocities[this.m_indexC].w;const _=e.positions[this.m_indexD].a,c=e.velocities[this.m_indexD].v;let u=e.velocities[this.m_indexD].w;const d=this.m_qA.SetAngle(i),p=this.m_qB.SetAngle(n),f=this.m_qC.SetAngle(m),y=this.m_qD.SetAngle(_);if(this.m_mass=0,this.m_typeA===t.b2JointType.e_revoluteJoint)this.m_JvAC.SetZero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{const t=at.MulRV(f,this.m_localAxisC,Oi.InitVelocityConstraints_s_u);it.SubVV(this.m_localAnchorC,this.m_lcC,this.m_lalcC);const e=at.MulRV(f,this.m_lalcC,Oi.InitVelocityConstraints_s_rC);it.SubVV(this.m_localAnchorA,this.m_lcA,this.m_lalcA);const i=at.MulRV(d,this.m_lalcA,Oi.InitVelocityConstraints_s_rA);this.m_JvAC.Copy(t),this.m_JwC=it.CrossVV(e,t),this.m_JwA=it.CrossVV(i,t),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_typeB===t.b2JointType.e_revoluteJoint)this.m_JvBD.SetZero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{const t=at.MulRV(y,this.m_localAxisD,Oi.InitVelocityConstraints_s_u);it.SubVV(this.m_localAnchorD,this.m_lcD,this.m_lalcD);const e=at.MulRV(y,this.m_lalcD,Oi.InitVelocityConstraints_s_rD);it.SubVV(this.m_localAnchorB,this.m_lcB,this.m_lalcB);const i=at.MulRV(p,this.m_lalcB,Oi.InitVelocityConstraints_s_rB);it.MulSV(this.m_ratio,t,this.m_JvBD),this.m_JwD=this.m_ratio*it.CrossVV(e,t),this.m_JwB=this.m_ratio*it.CrossVV(i,t),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,e.step.warmStarting?(s.SelfMulAdd(this.m_mA*this.m_impulse,this.m_JvAC),o+=this.m_iA*this.m_impulse*this.m_JwA,r.SelfMulAdd(this.m_mB*this.m_impulse,this.m_JvBD),a+=this.m_iB*this.m_impulse*this.m_JwB,l.SelfMulSub(this.m_mC*this.m_impulse,this.m_JvAC),h-=this.m_iC*this.m_impulse*this.m_JwC,c.SelfMulSub(this.m_mD*this.m_impulse,this.m_JvBD),u-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,e.velocities[this.m_indexA].w=o,e.velocities[this.m_indexB].w=a,e.velocities[this.m_indexC].w=h,e.velocities[this.m_indexD].w=u}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const s=t.velocities[this.m_indexB].v;let o=t.velocities[this.m_indexB].w;const n=t.velocities[this.m_indexC].v;let r=t.velocities[this.m_indexC].w;const a=t.velocities[this.m_indexD].v;let m=t.velocities[this.m_indexD].w,l=it.DotVV(this.m_JvAC,it.SubVV(e,n,it.s_t0))+it.DotVV(this.m_JvBD,it.SubVV(s,a,it.s_t0));l+=this.m_JwA*i-this.m_JwC*r+(this.m_JwB*o-this.m_JwD*m);const h=-this.m_mass*l;this.m_impulse+=h,e.SelfMulAdd(this.m_mA*h,this.m_JvAC),i+=this.m_iA*h*this.m_JwA,s.SelfMulAdd(this.m_mB*h,this.m_JvBD),o+=this.m_iB*h*this.m_JwB,n.SelfMulSub(this.m_mC*h,this.m_JvAC),r-=this.m_iC*h*this.m_JwC,a.SelfMulSub(this.m_mD*h,this.m_JvBD),m-=this.m_iD*h*this.m_JwD,t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=o,t.velocities[this.m_indexC].w=r,t.velocities[this.m_indexD].w=m}SolvePositionConstraints(e){const i=e.positions[this.m_indexA].c;let s=e.positions[this.m_indexA].a;const o=e.positions[this.m_indexB].c;let n=e.positions[this.m_indexB].a;const r=e.positions[this.m_indexC].c;let a=e.positions[this.m_indexC].a;const m=e.positions[this.m_indexD].c;let l=e.positions[this.m_indexD].a;const _=this.m_qA.SetAngle(s),c=this.m_qB.SetAngle(n),u=this.m_qC.SetAngle(a),d=this.m_qD.SetAngle(l);let p,f;const y=this.m_JvAC,x=this.m_JvBD;let B,S,A,b,C=0;if(this.m_typeA===t.b2JointType.e_revoluteJoint)y.SetZero(),B=1,A=1,C+=this.m_iA+this.m_iC,p=s-a-this.m_referenceAngleA;else{const t=at.MulRV(u,this.m_localAxisC,Oi.SolvePositionConstraints_s_u),e=at.MulRV(u,this.m_lalcC,Oi.SolvePositionConstraints_s_rC),s=at.MulRV(_,this.m_lalcA,Oi.SolvePositionConstraints_s_rA);y.Copy(t),A=it.CrossVV(e,t),B=it.CrossVV(s,t),C+=this.m_mC+this.m_mA+this.m_iC*A*A+this.m_iA*B*B;const o=this.m_lalcC,n=at.MulTRV(u,it.AddVV(s,it.SubVV(i,r,it.s_t0),it.s_t0),it.s_t0);p=it.DotVV(it.SubVV(n,o,it.s_t0),this.m_localAxisC)}if(this.m_typeB===t.b2JointType.e_revoluteJoint)x.SetZero(),S=this.m_ratio,b=this.m_ratio,C+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),f=n-l-this.m_referenceAngleB;else{const t=at.MulRV(d,this.m_localAxisD,Oi.SolvePositionConstraints_s_u),e=at.MulRV(d,this.m_lalcD,Oi.SolvePositionConstraints_s_rD),i=at.MulRV(c,this.m_lalcB,Oi.SolvePositionConstraints_s_rB);it.MulSV(this.m_ratio,t,x),b=this.m_ratio*it.CrossVV(e,t),S=this.m_ratio*it.CrossVV(i,t),C+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*b*b+this.m_iB*S*S;const s=this.m_lalcD,n=at.MulTRV(d,it.AddVV(i,it.SubVV(o,m,it.s_t0),it.s_t0),it.s_t0);f=it.DotVV(it.SubVV(n,s,it.s_t0),this.m_localAxisD)}const V=p+this.m_ratio*f-this.m_constant;let g=0;return C>0&&(g=-V/C),i.SelfMulAdd(this.m_mA*g,y),s+=this.m_iA*g*B,o.SelfMulAdd(this.m_mB*g,x),n+=this.m_iB*g*S,r.SelfMulSub(this.m_mC*g,y),a-=this.m_iC*g*A,m.SelfMulSub(this.m_mD*g,x),l-=this.m_iD*g*b,e.positions[this.m_indexA].a=s,e.positions[this.m_indexB].a=n,e.positions[this.m_indexC].a=a,e.positions[this.m_indexD].a=l,0<h}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return it.MulSV(t*this.m_impulse,this.m_JvAC,e)}GetReactionTorque(t){return t*this.m_impulse*this.m_JwA}GetJoint1(){return this.m_joint1}GetJoint2(){return this.m_joint2}GetRatio(){return this.m_ratio}SetRatio(t){this.m_ratio=t}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex,s=this.m_joint1.m_index,o=this.m_joint2.m_index;t("  const jd: b2GearJointDef = new b2GearJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.joint1 = joints[%d];\n",s),t("  jd.joint2 = joints[%d];\n",o),t("  jd.ratio = %.15f;\n",this.m_ratio),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}Oi.InitVelocityConstraints_s_u=new it,Oi.InitVelocityConstraints_s_rA=new it,Oi.InitVelocityConstraints_s_rB=new it,Oi.InitVelocityConstraints_s_rC=new it,Oi.InitVelocityConstraints_s_rD=new it,Oi.SolvePositionConstraints_s_u=new it,Oi.SolvePositionConstraints_s_rA=new it,Oi.SolvePositionConstraints_s_rB=new it,Oi.SolvePositionConstraints_s_rC=new it,Oi.SolvePositionConstraints_s_rD=new it;class Xi extends zi{constructor(t){super(t),this.m_linearOffset=new it,this.m_angularOffset=0,this.m_linearImpulse=new it,this.m_angularImpulse=0,this.m_maxForce=0,this.m_maxTorque=0,this.m_correctionFactor=.3,this.m_indexA=0,this.m_indexB=0,this.m_rA=new it,this.m_rB=new it,this.m_localCenterA=new it,this.m_localCenterB=new it,this.m_linearError=new it,this.m_angularError=0,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_linearMass=new nt,this.m_angularMass=0,this.m_qA=new at,this.m_qB=new at,this.m_K=new nt,this.m_linearOffset.Copy(e(t.linearOffset,it.ZERO)),this.m_linearImpulse.SetZero(),this.m_maxForce=e(t.maxForce,0),this.m_maxTorque=e(t.maxTorque,0),this.m_correctionFactor=e(t.correctionFactor,.3)}GetAnchorA(t){const e=this.m_bodyA.GetPosition();return t.x=e.x,t.y=e.y,t}GetAnchorB(t){const e=this.m_bodyB.GetPosition();return t.x=e.x,t.y=e.y,t}GetReactionForce(t,e){return it.MulSV(t,this.m_linearImpulse,e)}GetReactionTorque(t){return t*this.m_angularImpulse}SetLinearOffset(t){it.IsEqualToV(t,this.m_linearOffset)||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_linearOffset.Copy(t))}GetLinearOffset(){return this.m_linearOffset}SetAngularOffset(t){t!==this.m_angularOffset&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_angularOffset=t)}GetAngularOffset(){return this.m_angularOffset}SetMaxForce(t){this.m_maxForce=t}GetMaxForce(){return this.m_maxForce}SetMaxTorque(t){this.m_maxTorque=t}GetMaxTorque(){return this.m_maxTorque}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,s=t.velocities[this.m_indexA].v;let o=t.velocities[this.m_indexA].w;const n=t.positions[this.m_indexB].c,r=t.positions[this.m_indexB].a,a=t.velocities[this.m_indexB].v;let m=t.velocities[this.m_indexB].w;const l=this.m_qA.SetAngle(i),h=this.m_qB.SetAngle(r),_=at.MulRV(l,it.SubVV(this.m_linearOffset,this.m_localCenterA,it.s_t0),this.m_rA),c=at.MulRV(h,it.NegV(this.m_localCenterB,it.s_t0),this.m_rB),u=this.m_invMassA,d=this.m_invMassB,p=this.m_invIA,f=this.m_invIB,y=this.m_K;if(y.ex.x=u+d+p*_.y*_.y+f*c.y*c.y,y.ex.y=-p*_.x*_.y-f*c.x*c.y,y.ey.x=y.ex.y,y.ey.y=u+d+p*_.x*_.x+f*c.x*c.x,y.GetInverse(this.m_linearMass),this.m_angularMass=p+f,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),it.SubVV(it.AddVV(n,c,it.s_t0),it.AddVV(e,_,it.s_t1),this.m_linearError),this.m_angularError=r-i-this.m_angularOffset,t.step.warmStarting){this.m_linearImpulse.SelfMul(t.step.dtRatio),this.m_angularImpulse*=t.step.dtRatio;const e=this.m_linearImpulse;s.SelfMulSub(u,e),o-=p*(it.CrossVV(_,e)+this.m_angularImpulse),a.SelfMulAdd(d,e),m+=f*(it.CrossVV(c,e)+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0;t.velocities[this.m_indexA].w=o,t.velocities[this.m_indexB].w=m}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const s=t.velocities[this.m_indexB].v;let o=t.velocities[this.m_indexB].w;const n=this.m_invMassA,r=this.m_invMassB,a=this.m_invIA,m=this.m_invIB,l=t.step.dt,h=t.step.inv_dt;{const t=o-i+h*this.m_correctionFactor*this.m_angularError;let e=-this.m_angularMass*t;const s=this.m_angularImpulse,n=l*this.m_maxTorque;this.m_angularImpulse=X(this.m_angularImpulse+e,-n,n),i-=a*(e=this.m_angularImpulse-s),o+=m*e}{const t=this.m_rA,_=this.m_rB,c=it.AddVV(it.SubVV(it.AddVV(s,it.CrossSV(o,_,it.s_t0),it.s_t0),it.AddVV(e,it.CrossSV(i,t,it.s_t1),it.s_t1),it.s_t2),it.MulSV(h*this.m_correctionFactor,this.m_linearError,it.s_t3),Xi.SolveVelocityConstraints_s_Cdot_v2),u=nt.MulMV(this.m_linearMass,c,Xi.SolveVelocityConstraints_s_impulse_v2).SelfNeg(),d=Xi.SolveVelocityConstraints_s_oldImpulse_v2.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(u);const p=l*this.m_maxForce;this.m_linearImpulse.LengthSquared()>p*p&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(p)),it.SubVV(this.m_linearImpulse,d,u),e.SelfMulSub(n,u),i-=a*it.CrossVV(t,u),s.SelfMulAdd(r,u),o+=m*it.CrossVV(_,u)}t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=o}SolvePositionConstraints(t){return!0}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2MotorJointDef = new b2MotorJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.linearOffset.Set(%.15f, %.15f);\n",this.m_linearOffset.x,this.m_linearOffset.y),t("  jd.angularOffset = %.15f;\n",this.m_angularOffset),t("  jd.maxForce = %.15f;\n",this.m_maxForce),t("  jd.maxTorque = %.15f;\n",this.m_maxTorque),t("  jd.correctionFactor = %.15f;\n",this.m_correctionFactor),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}Xi.SolveVelocityConstraints_s_Cdot_v2=new it,Xi.SolveVelocityConstraints_s_impulse_v2=new it,Xi.SolveVelocityConstraints_s_oldImpulse_v2=new it;class Ui extends zi{constructor(t){super(t),this.m_localAnchorB=new it,this.m_targetA=new it,this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_beta=0,this.m_impulse=new it,this.m_maxForce=0,this.m_gamma=0,this.m_indexA=0,this.m_indexB=0,this.m_rB=new it,this.m_localCenterB=new it,this.m_invMassB=0,this.m_invIB=0,this.m_mass=new nt,this.m_C=new it,this.m_qB=new at,this.m_lalcB=new it,this.m_K=new nt,this.m_targetA.Copy(e(t.target,it.ZERO)),mt.MulTXV(this.m_bodyB.GetTransform(),this.m_targetA,this.m_localAnchorB),this.m_maxForce=e(t.maxForce,0),this.m_impulse.SetZero(),this.m_frequencyHz=e(t.frequencyHz,0),this.m_dampingRatio=e(t.dampingRatio,0),this.m_beta=0,this.m_gamma=0}SetTarget(t){this.m_bodyB.IsAwake()||this.m_bodyB.SetAwake(!0),this.m_targetA.Copy(t)}GetTarget(){return this.m_targetA}SetMaxForce(t){this.m_maxForce=t}GetMaxForce(){return this.m_maxForce}SetFrequency(t){this.m_frequencyHz=t}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(t){this.m_dampingRatio=t}GetDampingRatio(){return this.m_dampingRatio}InitVelocityConstraints(t){this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexB].c,i=t.positions[this.m_indexB].a,s=t.velocities[this.m_indexB].v;let o=t.velocities[this.m_indexB].w;const r=this.m_qB.SetAngle(i),a=this.m_bodyB.GetMass(),m=2*n*this.m_frequencyHz,l=2*a*this.m_dampingRatio*m,h=a*(m*m),_=t.step.dt;this.m_gamma=_*(l+_*h),0!==this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=_*h*this.m_gamma,it.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),at.MulRV(r,this.m_lalcB,this.m_rB);const c=this.m_K;c.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,c.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,c.ey.x=c.ex.y,c.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,c.GetInverse(this.m_mass),this.m_C.x=e.x+this.m_rB.x-this.m_targetA.x,this.m_C.y=e.y+this.m_rB.y-this.m_targetA.y,this.m_C.SelfMul(this.m_beta),o*=.98,t.step.warmStarting?(this.m_impulse.SelfMul(t.step.dtRatio),s.x+=this.m_invMassB*this.m_impulse.x,s.y+=this.m_invMassB*this.m_impulse.y,o+=this.m_invIB*it.CrossVV(this.m_rB,this.m_impulse)):this.m_impulse.SetZero(),t.velocities[this.m_indexB].w=o}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexB].v;let i=t.velocities[this.m_indexB].w;const s=it.AddVCrossSV(e,i,this.m_rB,Ui.SolveVelocityConstraints_s_Cdot),o=nt.MulMV(this.m_mass,it.AddVV(s,it.AddVV(this.m_C,it.MulSV(this.m_gamma,this.m_impulse,it.s_t0),it.s_t0),it.s_t0).SelfNeg(),Ui.SolveVelocityConstraints_s_impulse),n=Ui.SolveVelocityConstraints_s_oldImpulse.Copy(this.m_impulse);this.m_impulse.SelfAdd(o);const r=t.step.dt*this.m_maxForce;this.m_impulse.LengthSquared()>r*r&&this.m_impulse.SelfMul(r/this.m_impulse.Length()),it.SubVV(this.m_impulse,n,o),e.SelfMulAdd(this.m_invMassB,o),i+=this.m_invIB*it.CrossVV(this.m_rB,o),t.velocities[this.m_indexB].w=i}SolvePositionConstraints(t){return!0}GetAnchorA(t){return t.x=this.m_targetA.x,t.y=this.m_targetA.y,t}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return it.MulSV(t,this.m_impulse,e)}GetReactionTorque(t){return 0}Dump(t){t("Mouse joint dumping is not supported.\n")}ShiftOrigin(t){this.m_targetA.SelfSub(t)}}Ui.SolveVelocityConstraints_s_Cdot=new it,Ui.SolveVelocityConstraints_s_impulse=new it,Ui.SolveVelocityConstraints_s_oldImpulse=new it;class Zi extends zi{constructor(i){super(i),this.m_localAnchorA=new it,this.m_localAnchorB=new it,this.m_localXAxisA=new it,this.m_localYAxisA=new it,this.m_referenceAngle=0,this.m_impulse=new ot(0,0,0),this.m_motorImpulse=0,this.m_lowerTranslation=0,this.m_upperTranslation=0,this.m_maxMotorForce=0,this.m_motorSpeed=0,this.m_enableLimit=!1,this.m_enableMotor=!1,this.m_limitState=t.b2LimitState.e_inactiveLimit,this.m_indexA=0,this.m_indexB=0,this.m_localCenterA=new it,this.m_localCenterB=new it,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_axis=new it(0,0),this.m_perp=new it(0,0),this.m_s1=0,this.m_s2=0,this.m_a1=0,this.m_a2=0,this.m_K=new rt,this.m_K3=new rt,this.m_K2=new nt,this.m_motorMass=0,this.m_qA=new at,this.m_qB=new at,this.m_lalcA=new it,this.m_lalcB=new it,this.m_rA=new it,this.m_rB=new it,this.m_localAnchorA.Copy(e(i.localAnchorA,it.ZERO)),this.m_localAnchorB.Copy(e(i.localAnchorB,it.ZERO)),this.m_localXAxisA.Copy(e(i.localAxisA,new it(1,0))).SelfNormalize(),it.CrossOneV(this.m_localXAxisA,this.m_localYAxisA),this.m_referenceAngle=e(i.referenceAngle,0),this.m_lowerTranslation=e(i.lowerTranslation,0),this.m_upperTranslation=e(i.upperTranslation,0),this.m_maxMotorForce=e(i.maxMotorForce,0),this.m_motorSpeed=e(i.motorSpeed,0),this.m_enableLimit=e(i.enableLimit,!1),this.m_enableMotor=e(i.enableMotor,!1)}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const i=e.positions[this.m_indexA].c,s=e.positions[this.m_indexA].a,o=e.velocities[this.m_indexA].v;let n=e.velocities[this.m_indexA].w;const r=e.positions[this.m_indexB].c,a=e.positions[this.m_indexB].a,m=e.velocities[this.m_indexB].v;let l=e.velocities[this.m_indexB].w;const _=this.m_qA.SetAngle(s),c=this.m_qB.SetAngle(a);it.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const u=at.MulRV(_,this.m_lalcA,this.m_rA);it.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const d=at.MulRV(c,this.m_lalcB,this.m_rB),p=it.AddVV(it.SubVV(r,i,it.s_t0),it.SubVV(d,u,it.s_t1),Zi.InitVelocityConstraints_s_d),f=this.m_invMassA,y=this.m_invMassB,x=this.m_invIA,B=this.m_invIB;if(at.MulRV(_,this.m_localXAxisA,this.m_axis),this.m_a1=it.CrossVV(it.AddVV(p,u,it.s_t0),this.m_axis),this.m_a2=it.CrossVV(d,this.m_axis),this.m_motorMass=f+y+x*this.m_a1*this.m_a1+B*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),at.MulRV(_,this.m_localYAxisA,this.m_perp),this.m_s1=it.CrossVV(it.AddVV(p,u,it.s_t0),this.m_perp),this.m_s2=it.CrossVV(d,this.m_perp),this.m_K.ex.x=f+y+x*this.m_s1*this.m_s1+B*this.m_s2*this.m_s2,this.m_K.ex.y=x*this.m_s1+B*this.m_s2,this.m_K.ex.z=x*this.m_s1*this.m_a1+B*this.m_s2*this.m_a2,this.m_K.ey.x=this.m_K.ex.y,this.m_K.ey.y=x+B,0===this.m_K.ey.y&&(this.m_K.ey.y=1),this.m_K.ey.z=x*this.m_a1+B*this.m_a2,this.m_K.ez.x=this.m_K.ex.z,this.m_K.ez.y=this.m_K.ey.z,this.m_K.ez.z=f+y+x*this.m_a1*this.m_a1+B*this.m_a2*this.m_a2,this.m_enableLimit){const e=it.DotVV(this.m_axis,p);j(this.m_upperTranslation-this.m_lowerTranslation)<2*h?this.m_limitState=t.b2LimitState.e_equalLimits:e<=this.m_lowerTranslation?this.m_limitState!==t.b2LimitState.e_atLowerLimit&&(this.m_limitState=t.b2LimitState.e_atLowerLimit,this.m_impulse.z=0):e>=this.m_upperTranslation?this.m_limitState!==t.b2LimitState.e_atUpperLimit&&(this.m_limitState=t.b2LimitState.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=t.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=t.b2LimitState.e_inactiveLimit,this.m_impulse.z=0;if(this.m_enableMotor||(this.m_motorImpulse=0),e.step.warmStarting){this.m_impulse.SelfMul(e.step.dtRatio),this.m_motorImpulse*=e.step.dtRatio;const t=it.AddVV(it.MulSV(this.m_impulse.x,this.m_perp,it.s_t0),it.MulSV(this.m_motorImpulse+this.m_impulse.z,this.m_axis,it.s_t1),Zi.InitVelocityConstraints_s_P),i=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,s=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;o.SelfMulSub(f,t),n-=x*i,m.SelfMulAdd(y,t),l+=B*s}else this.m_impulse.SetZero(),this.m_motorImpulse=0;e.velocities[this.m_indexA].w=n,e.velocities[this.m_indexB].w=l}SolveVelocityConstraints(e){const i=e.velocities[this.m_indexA].v;let s=e.velocities[this.m_indexA].w;const o=e.velocities[this.m_indexB].v;let n=e.velocities[this.m_indexB].w;const r=this.m_invMassA,a=this.m_invMassB,m=this.m_invIA,l=this.m_invIB;if(this.m_enableMotor&&this.m_limitState!==t.b2LimitState.e_equalLimits){const t=it.DotVV(this.m_axis,it.SubVV(o,i,it.s_t0))+this.m_a2*n-this.m_a1*s;let h=this.m_motorMass*(this.m_motorSpeed-t);const _=this.m_motorImpulse,c=e.step.dt*this.m_maxMotorForce;this.m_motorImpulse=X(this.m_motorImpulse+h,-c,c),h=this.m_motorImpulse-_;const u=it.MulSV(h,this.m_axis,Zi.SolveVelocityConstraints_s_P),d=h*this.m_a1,p=h*this.m_a2;i.SelfMulSub(r,u),s-=m*d,o.SelfMulAdd(a,u),n+=l*p}const h=it.DotVV(this.m_perp,it.SubVV(o,i,it.s_t0))+this.m_s2*n-this.m_s1*s,_=n-s;if(this.m_enableLimit&&this.m_limitState!==t.b2LimitState.e_inactiveLimit){const e=it.DotVV(this.m_axis,it.SubVV(o,i,it.s_t0))+this.m_a2*n-this.m_a1*s,c=Zi.SolveVelocityConstraints_s_f1.Copy(this.m_impulse),u=this.m_K.Solve33(-h,-_,-e,Zi.SolveVelocityConstraints_s_df3);this.m_impulse.SelfAdd(u),this.m_limitState===t.b2LimitState.e_atLowerLimit?this.m_impulse.z=O(this.m_impulse.z,0):this.m_limitState===t.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=E(this.m_impulse.z,0));const d=-h-(this.m_impulse.z-c.z)*this.m_K.ez.x,p=-_-(this.m_impulse.z-c.z)*this.m_K.ez.y,f=this.m_K.Solve22(d,p,Zi.SolveVelocityConstraints_s_f2r);f.x+=c.x,f.y+=c.y,this.m_impulse.x=f.x,this.m_impulse.y=f.y,u.x=this.m_impulse.x-c.x,u.y=this.m_impulse.y-c.y,u.z=this.m_impulse.z-c.z;const y=it.AddVV(it.MulSV(u.x,this.m_perp,it.s_t0),it.MulSV(u.z,this.m_axis,it.s_t1),Zi.SolveVelocityConstraints_s_P),x=u.x*this.m_s1+u.y+u.z*this.m_a1,B=u.x*this.m_s2+u.y+u.z*this.m_a2;i.SelfMulSub(r,y),s-=m*x,o.SelfMulAdd(a,y),n+=l*B}else{const t=this.m_K.Solve22(-h,-_,Zi.SolveVelocityConstraints_s_df2);this.m_impulse.x+=t.x,this.m_impulse.y+=t.y;const e=it.MulSV(t.x,this.m_perp,Zi.SolveVelocityConstraints_s_P),c=t.x*this.m_s1+t.y,u=t.x*this.m_s2+t.y;i.SelfMulSub(r,e),s-=m*c,o.SelfMulAdd(a,e),n+=l*u}e.velocities[this.m_indexA].w=s,e.velocities[this.m_indexB].w=n}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let i=t.positions[this.m_indexA].a;const s=t.positions[this.m_indexB].c;let o=t.positions[this.m_indexB].a;const n=this.m_qA.SetAngle(i),r=this.m_qB.SetAngle(o),a=this.m_invMassA,m=this.m_invMassB,l=this.m_invIA,c=this.m_invIB,u=at.MulRV(n,this.m_lalcA,this.m_rA),d=at.MulRV(r,this.m_lalcB,this.m_rB),p=it.SubVV(it.AddVV(s,d,it.s_t0),it.AddVV(e,u,it.s_t1),Zi.SolvePositionConstraints_s_d),y=at.MulRV(n,this.m_localXAxisA,this.m_axis),x=it.CrossVV(it.AddVV(p,u,it.s_t0),y),B=it.CrossVV(d,y),S=at.MulRV(n,this.m_localYAxisA,this.m_perp),A=it.CrossVV(it.AddVV(p,u,it.s_t0),S),b=it.CrossVV(d,S);let C=Zi.SolvePositionConstraints_s_impulse;const V=it.DotVV(S,p),g=o-i-this.m_referenceAngle;let v=j(V);const w=j(g);let M=!1,P=0;if(this.m_enableLimit){const t=it.DotVV(y,p);j(this.m_upperTranslation-this.m_lowerTranslation)<2*h?(P=X(t,-f,f),v=O(v,j(t)),M=!0):t<=this.m_lowerTranslation?(P=X(t-this.m_lowerTranslation+h,-f,0),v=O(v,this.m_lowerTranslation-t),M=!0):t>=this.m_upperTranslation&&(P=X(t-this.m_upperTranslation-h,0,f),v=O(v,t-this.m_upperTranslation),M=!0)}if(M){const t=a+m+l*A*A+c*b*b,e=l*A+c*b,i=l*A*x+c*b*B;let s=l+c;0===s&&(s=1);const o=l*x+c*B,n=a+m+l*x*x+c*B*B,r=this.m_K3;r.ex.SetXYZ(t,e,i),r.ey.SetXYZ(e,s,o),r.ez.SetXYZ(i,o,n),C=r.Solve33(-V,-g,-P,C)}else{const t=a+m+l*A*A+c*b*b,e=l*A+c*b;let i=l+c;0===i&&(i=1);const s=this.m_K2;s.ex.Set(t,e),s.ey.Set(e,i);const o=s.Solve(-V,-g,Zi.SolvePositionConstraints_s_impulse1);C.x=o.x,C.y=o.y,C.z=0}const I=it.AddVV(it.MulSV(C.x,S,it.s_t0),it.MulSV(C.z,y,it.s_t1),Zi.SolvePositionConstraints_s_P),G=C.x*A+C.y+C.z*x,D=C.x*b+C.y+C.z*B;return e.SelfMulSub(a,I),i-=l*G,s.SelfMulAdd(m,I),o+=c*D,t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=o,v<=h&&w<=_}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.x=t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),e.y=t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y),e}GetReactionTorque(t){return t*this.m_impulse.y}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetLocalAxisA(){return this.m_localXAxisA}GetReferenceAngle(){return this.m_referenceAngle}GetJointTranslation(){const t=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,Zi.GetJointTranslation_s_pA),e=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,Zi.GetJointTranslation_s_pB),i=it.SubVV(e,t,Zi.GetJointTranslation_s_d),s=this.m_bodyA.GetWorldVector(this.m_localXAxisA,Zi.GetJointTranslation_s_axis);return it.DotVV(i,s)}GetJointSpeed(){const t=this.m_bodyA,e=this.m_bodyB;it.SubVV(this.m_localAnchorA,t.m_sweep.localCenter,this.m_lalcA);const i=at.MulRV(t.m_xf.q,this.m_lalcA,this.m_rA);it.SubVV(this.m_localAnchorB,e.m_sweep.localCenter,this.m_lalcB);const s=at.MulRV(e.m_xf.q,this.m_lalcB,this.m_rB),o=it.AddVV(t.m_sweep.c,i,it.s_t0),n=it.AddVV(e.m_sweep.c,s,it.s_t1),r=it.SubVV(n,o,it.s_t2),a=t.GetWorldVector(this.m_localXAxisA,this.m_axis),m=t.m_linearVelocity,l=e.m_linearVelocity,h=t.m_angularVelocity,_=e.m_angularVelocity;return it.DotVV(r,it.CrossSV(h,a,it.s_t0))+it.DotVV(a,it.SubVV(it.AddVCrossSV(l,_,s,it.s_t0),it.AddVCrossSV(m,h,i,it.s_t1),it.s_t0))}IsLimitEnabled(){return this.m_enableLimit}EnableLimit(t){t!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)}GetLowerLimit(){return this.m_lowerTranslation}GetUpperLimit(){return this.m_upperTranslation}SetLimits(t,e){t===this.m_lowerTranslation&&e===this.m_upperTranslation||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e,this.m_impulse.z=0)}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(t){t!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t)}SetMotorSpeed(t){t!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t)}GetMotorSpeed(){return this.m_motorSpeed}SetMaxMotorForce(t){t!==this.m_maxMotorForce&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t)}GetMaxMotorForce(){return this.m_maxMotorForce}GetMotorForce(t){return t*this.m_motorImpulse}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2PrismaticJointDef = new b2PrismaticJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),t("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),t("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),t("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),t("  jd.lowerTranslation = %.15f;\n",this.m_lowerTranslation),t("  jd.upperTranslation = %.15f;\n",this.m_upperTranslation),t("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),t("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),t("  jd.maxMotorForce = %.15f;\n",this.m_maxMotorForce),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}Zi.InitVelocityConstraints_s_d=new it,Zi.InitVelocityConstraints_s_P=new it,Zi.SolveVelocityConstraints_s_P=new it,Zi.SolveVelocityConstraints_s_f2r=new it,Zi.SolveVelocityConstraints_s_f1=new ot,Zi.SolveVelocityConstraints_s_df3=new ot,Zi.SolveVelocityConstraints_s_df2=new it,Zi.SolvePositionConstraints_s_d=new it,Zi.SolvePositionConstraints_s_impulse=new ot,Zi.SolvePositionConstraints_s_impulse1=new it,Zi.SolvePositionConstraints_s_P=new it,Zi.GetJointTranslation_s_pA=new it,Zi.GetJointTranslation_s_pB=new it,Zi.GetJointTranslation_s_d=new it,Zi.GetJointTranslation_s_axis=new it;class Wi extends zi{constructor(t){super(t),this.m_groundAnchorA=new it,this.m_groundAnchorB=new it,this.m_lengthA=0,this.m_lengthB=0,this.m_localAnchorA=new it,this.m_localAnchorB=new it,this.m_constant=0,this.m_ratio=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_uA=new it,this.m_uB=new it,this.m_rA=new it,this.m_rB=new it,this.m_localCenterA=new it,this.m_localCenterB=new it,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_qA=new at,this.m_qB=new at,this.m_lalcA=new it,this.m_lalcB=new it,this.m_groundAnchorA.Copy(e(t.groundAnchorA,new it(-1,1))),this.m_groundAnchorB.Copy(e(t.groundAnchorB,new it(1,0))),this.m_localAnchorA.Copy(e(t.localAnchorA,new it(-1,0))),this.m_localAnchorB.Copy(e(t.localAnchorB,new it(1,0))),this.m_lengthA=e(t.lengthA,0),this.m_lengthB=e(t.lengthB,0),this.m_ratio=e(t.ratio,1),this.m_constant=e(t.lengthA,0)+this.m_ratio*e(t.lengthB,0),this.m_impulse=0}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,s=t.velocities[this.m_indexA].v;let o=t.velocities[this.m_indexA].w;const n=t.positions[this.m_indexB].c,r=t.positions[this.m_indexB].a,a=t.velocities[this.m_indexB].v;let m=t.velocities[this.m_indexB].w;const l=this.m_qA.SetAngle(i),_=this.m_qB.SetAngle(r);it.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),at.MulRV(l,this.m_lalcA,this.m_rA),it.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),at.MulRV(_,this.m_lalcB,this.m_rB),this.m_uA.Copy(e).SelfAdd(this.m_rA).SelfSub(this.m_groundAnchorA),this.m_uB.Copy(n).SelfAdd(this.m_rB).SelfSub(this.m_groundAnchorB);const c=this.m_uA.Length(),u=this.m_uB.Length();c>10*h?this.m_uA.SelfMul(1/c):this.m_uA.SetZero(),u>10*h?this.m_uB.SelfMul(1/u):this.m_uB.SetZero();const d=it.CrossVV(this.m_rA,this.m_uA),p=it.CrossVV(this.m_rB,this.m_uB),f=this.m_invMassA+this.m_invIA*d*d,y=this.m_invMassB+this.m_invIB*p*p;if(this.m_mass=f+this.m_ratio*this.m_ratio*y,this.m_mass>0&&(this.m_mass=1/this.m_mass),t.step.warmStarting){this.m_impulse*=t.step.dtRatio;const e=it.MulSV(-this.m_impulse,this.m_uA,Wi.InitVelocityConstraints_s_PA),i=it.MulSV(-this.m_ratio*this.m_impulse,this.m_uB,Wi.InitVelocityConstraints_s_PB);s.SelfMulAdd(this.m_invMassA,e),o+=this.m_invIA*it.CrossVV(this.m_rA,e),a.SelfMulAdd(this.m_invMassB,i),m+=this.m_invIB*it.CrossVV(this.m_rB,i)}else this.m_impulse=0;t.velocities[this.m_indexA].w=o,t.velocities[this.m_indexB].w=m}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const s=t.velocities[this.m_indexB].v;let o=t.velocities[this.m_indexB].w;const n=it.AddVCrossSV(e,i,this.m_rA,Wi.SolveVelocityConstraints_s_vpA),r=it.AddVCrossSV(s,o,this.m_rB,Wi.SolveVelocityConstraints_s_vpB),a=-it.DotVV(this.m_uA,n)-this.m_ratio*it.DotVV(this.m_uB,r),m=-this.m_mass*a;this.m_impulse+=m;const l=it.MulSV(-m,this.m_uA,Wi.SolveVelocityConstraints_s_PA),h=it.MulSV(-this.m_ratio*m,this.m_uB,Wi.SolveVelocityConstraints_s_PB);e.SelfMulAdd(this.m_invMassA,l),i+=this.m_invIA*it.CrossVV(this.m_rA,l),s.SelfMulAdd(this.m_invMassB,h),o+=this.m_invIB*it.CrossVV(this.m_rB,h),t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=o}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let i=t.positions[this.m_indexA].a;const s=t.positions[this.m_indexB].c;let o=t.positions[this.m_indexB].a;const n=this.m_qA.SetAngle(i),r=this.m_qB.SetAngle(o);it.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const a=at.MulRV(n,this.m_lalcA,this.m_rA);it.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const m=at.MulRV(r,this.m_lalcB,this.m_rB),l=this.m_uA.Copy(e).SelfAdd(a).SelfSub(this.m_groundAnchorA),_=this.m_uB.Copy(s).SelfAdd(m).SelfSub(this.m_groundAnchorB),c=l.Length(),u=_.Length();c>10*h?l.SelfMul(1/c):l.SetZero(),u>10*h?_.SelfMul(1/u):_.SetZero();const d=it.CrossVV(a,l),p=it.CrossVV(m,_),f=this.m_invMassA+this.m_invIA*d*d,y=this.m_invMassB+this.m_invIB*p*p;let x=f+this.m_ratio*this.m_ratio*y;x>0&&(x=1/x);const B=this.m_constant-c-this.m_ratio*u,S=j(B),A=-x*B,b=it.MulSV(-A,l,Wi.SolvePositionConstraints_s_PA),C=it.MulSV(-this.m_ratio*A,_,Wi.SolvePositionConstraints_s_PB);return e.SelfMulAdd(this.m_invMassA,b),i+=this.m_invIA*it.CrossVV(a,b),s.SelfMulAdd(this.m_invMassB,C),o+=this.m_invIB*it.CrossVV(m,C),t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=o,S<h}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.x=t*this.m_impulse*this.m_uB.x,e.y=t*this.m_impulse*this.m_uB.y,e}GetReactionTorque(t){return 0}GetGroundAnchorA(){return this.m_groundAnchorA}GetGroundAnchorB(){return this.m_groundAnchorB}GetLengthA(){return this.m_lengthA}GetLengthB(){return this.m_lengthB}GetRatio(){return this.m_ratio}GetCurrentLengthA(){const t=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,Wi.GetCurrentLengthA_s_p),e=this.m_groundAnchorA;return it.DistanceVV(t,e)}GetCurrentLengthB(){const t=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,Wi.GetCurrentLengthB_s_p),e=this.m_groundAnchorB;return it.DistanceVV(t,e)}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2PulleyJointDef = new b2PulleyJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.groundAnchorA.Set(%.15f, %.15f);\n",this.m_groundAnchorA.x,this.m_groundAnchorA.y),t("  jd.groundAnchorB.Set(%.15f, %.15f);\n",this.m_groundAnchorB.x,this.m_groundAnchorB.y),t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),t("  jd.lengthA = %.15f;\n",this.m_lengthA),t("  jd.lengthB = %.15f;\n",this.m_lengthB),t("  jd.ratio = %.15f;\n",this.m_ratio),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}ShiftOrigin(t){this.m_groundAnchorA.SelfSub(t),this.m_groundAnchorB.SelfSub(t)}}Wi.InitVelocityConstraints_s_PA=new it,Wi.InitVelocityConstraints_s_PB=new it,Wi.SolveVelocityConstraints_s_vpA=new it,Wi.SolveVelocityConstraints_s_vpB=new it,Wi.SolveVelocityConstraints_s_PA=new it,Wi.SolveVelocityConstraints_s_PB=new it,Wi.SolvePositionConstraints_s_PA=new it,Wi.SolvePositionConstraints_s_PB=new it,Wi.GetCurrentLengthA_s_p=new it,Wi.GetCurrentLengthB_s_p=new it;class Qi extends zi{constructor(i){super(i),this.m_localAnchorA=new it,this.m_localAnchorB=new it,this.m_impulse=new ot,this.m_motorImpulse=0,this.m_enableMotor=!1,this.m_maxMotorTorque=0,this.m_motorSpeed=0,this.m_enableLimit=!1,this.m_referenceAngle=0,this.m_lowerAngle=0,this.m_upperAngle=0,this.m_indexA=0,this.m_indexB=0,this.m_rA=new it,this.m_rB=new it,this.m_localCenterA=new it,this.m_localCenterB=new it,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=new rt,this.m_motorMass=0,this.m_limitState=t.b2LimitState.e_inactiveLimit,this.m_qA=new at,this.m_qB=new at,this.m_lalcA=new it,this.m_lalcB=new it,this.m_K=new nt,this.m_localAnchorA.Copy(e(i.localAnchorA,it.ZERO)),this.m_localAnchorB.Copy(e(i.localAnchorB,it.ZERO)),this.m_referenceAngle=e(i.referenceAngle,0),this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerAngle=e(i.lowerAngle,0),this.m_upperAngle=e(i.upperAngle,0),this.m_maxMotorTorque=e(i.maxMotorTorque,0),this.m_motorSpeed=e(i.motorSpeed,0),this.m_enableLimit=e(i.enableLimit,!1),this.m_enableMotor=e(i.enableMotor,!1),this.m_limitState=t.b2LimitState.e_inactiveLimit}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const i=e.positions[this.m_indexA].a,s=e.velocities[this.m_indexA].v;let o=e.velocities[this.m_indexA].w;const n=e.positions[this.m_indexB].a,r=e.velocities[this.m_indexB].v;let a=e.velocities[this.m_indexB].w;const m=this.m_qA.SetAngle(i),l=this.m_qB.SetAngle(n);it.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),at.MulRV(m,this.m_lalcA,this.m_rA),it.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),at.MulRV(l,this.m_lalcB,this.m_rB);const h=this.m_invMassA,c=this.m_invMassB,u=this.m_invIA,d=this.m_invIB,p=u+d===0;if(this.m_mass.ex.x=h+c+this.m_rA.y*this.m_rA.y*u+this.m_rB.y*this.m_rB.y*d,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*u-this.m_rB.y*this.m_rB.x*d,this.m_mass.ez.x=-this.m_rA.y*u-this.m_rB.y*d,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=h+c+this.m_rA.x*this.m_rA.x*u+this.m_rB.x*this.m_rB.x*d,this.m_mass.ez.y=this.m_rA.x*u+this.m_rB.x*d,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=u+d,this.m_motorMass=u+d,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),this.m_enableMotor&&!p||(this.m_motorImpulse=0),this.m_enableLimit&&!p){const e=n-i-this.m_referenceAngle;j(this.m_upperAngle-this.m_lowerAngle)<2*_?this.m_limitState=t.b2LimitState.e_equalLimits:e<=this.m_lowerAngle?(this.m_limitState!==t.b2LimitState.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=t.b2LimitState.e_atLowerLimit):e>=this.m_upperAngle?(this.m_limitState!==t.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=t.b2LimitState.e_atUpperLimit):(this.m_limitState=t.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=t.b2LimitState.e_inactiveLimit;if(e.step.warmStarting){this.m_impulse.SelfMul(e.step.dtRatio),this.m_motorImpulse*=e.step.dtRatio;const t=Qi.InitVelocityConstraints_s_P.Set(this.m_impulse.x,this.m_impulse.y);s.SelfMulSub(h,t),o-=u*(it.CrossVV(this.m_rA,t)+this.m_motorImpulse+this.m_impulse.z),r.SelfMulAdd(c,t),a+=d*(it.CrossVV(this.m_rB,t)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.SetZero(),this.m_motorImpulse=0;e.velocities[this.m_indexA].w=o,e.velocities[this.m_indexB].w=a}SolveVelocityConstraints(e){const i=e.velocities[this.m_indexA].v;let s=e.velocities[this.m_indexA].w;const o=e.velocities[this.m_indexB].v;let n=e.velocities[this.m_indexB].w;const r=this.m_invMassA,a=this.m_invMassB,m=this.m_invIA,l=this.m_invIB,h=m+l===0;if(this.m_enableMotor&&this.m_limitState!==t.b2LimitState.e_equalLimits&&!h){const t=n-s-this.m_motorSpeed;let i=-this.m_motorMass*t;const o=this.m_motorImpulse,r=e.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=X(this.m_motorImpulse+i,-r,r),s-=m*(i=this.m_motorImpulse-o),n+=l*i}if(this.m_enableLimit&&this.m_limitState!==t.b2LimitState.e_inactiveLimit&&!h){const e=it.SubVV(it.AddVCrossSV(o,n,this.m_rB,it.s_t0),it.AddVCrossSV(i,s,this.m_rA,it.s_t1),Qi.SolveVelocityConstraints_s_Cdot1),h=n-s,_=this.m_mass.Solve33(e.x,e.y,h,Qi.SolveVelocityConstraints_s_impulse_v3).SelfNeg();if(this.m_limitState===t.b2LimitState.e_equalLimits)this.m_impulse.SelfAdd(_);else if(this.m_limitState===t.b2LimitState.e_atLowerLimit){if(this.m_impulse.z+_.z<0){const t=-e.x+this.m_impulse.z*this.m_mass.ez.x,i=-e.y+this.m_impulse.z*this.m_mass.ez.y,s=this.m_mass.Solve22(t,i,Qi.SolveVelocityConstraints_s_reduced_v2);_.x=s.x,_.y=s.y,_.z=-this.m_impulse.z,this.m_impulse.x+=s.x,this.m_impulse.y+=s.y,this.m_impulse.z=0}else this.m_impulse.SelfAdd(_)}else if(this.m_limitState===t.b2LimitState.e_atUpperLimit){if(this.m_impulse.z+_.z>0){const t=-e.x+this.m_impulse.z*this.m_mass.ez.x,i=-e.y+this.m_impulse.z*this.m_mass.ez.y,s=this.m_mass.Solve22(t,i,Qi.SolveVelocityConstraints_s_reduced_v2);_.x=s.x,_.y=s.y,_.z=-this.m_impulse.z,this.m_impulse.x+=s.x,this.m_impulse.y+=s.y,this.m_impulse.z=0}else this.m_impulse.SelfAdd(_)}const c=Qi.SolveVelocityConstraints_s_P.Set(_.x,_.y);i.SelfMulSub(r,c),s-=m*(it.CrossVV(this.m_rA,c)+_.z),o.SelfMulAdd(a,c),n+=l*(it.CrossVV(this.m_rB,c)+_.z)}else{const t=it.SubVV(it.AddVCrossSV(o,n,this.m_rB,it.s_t0),it.AddVCrossSV(i,s,this.m_rA,it.s_t1),Qi.SolveVelocityConstraints_s_Cdot_v2),e=this.m_mass.Solve22(-t.x,-t.y,Qi.SolveVelocityConstraints_s_impulse_v2);this.m_impulse.x+=e.x,this.m_impulse.y+=e.y,i.SelfMulSub(r,e),s-=m*it.CrossVV(this.m_rA,e),o.SelfMulAdd(a,e),n+=l*it.CrossVV(this.m_rB,e)}e.velocities[this.m_indexA].w=s,e.velocities[this.m_indexB].w=n}SolvePositionConstraints(e){const i=e.positions[this.m_indexA].c;let s=e.positions[this.m_indexA].a;const o=e.positions[this.m_indexB].c;let n=e.positions[this.m_indexB].a;const r=this.m_qA.SetAngle(s),a=this.m_qB.SetAngle(n);let m=0,l=0;const c=this.m_invIA+this.m_invIB===0;if(this.m_enableLimit&&this.m_limitState!==t.b2LimitState.e_inactiveLimit&&!c){const e=n-s-this.m_referenceAngle;let i=0;if(this.m_limitState===t.b2LimitState.e_equalLimits){const t=X(e-this.m_lowerAngle,-y,y);i=-this.m_motorMass*t,m=j(t)}else if(this.m_limitState===t.b2LimitState.e_atLowerLimit){let t=e-this.m_lowerAngle;m=-t,t=X(t+_,-y,0),i=-this.m_motorMass*t}else if(this.m_limitState===t.b2LimitState.e_atUpperLimit){let t=e-this.m_upperAngle;m=t,t=X(t-_,0,y),i=-this.m_motorMass*t}s-=this.m_invIA*i,n+=this.m_invIB*i}{r.SetAngle(s),a.SetAngle(n),it.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const t=at.MulRV(r,this.m_lalcA,this.m_rA);it.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const e=at.MulRV(a,this.m_lalcB,this.m_rB),m=it.SubVV(it.AddVV(o,e,it.s_t0),it.AddVV(i,t,it.s_t1),Qi.SolvePositionConstraints_s_C_v2);l=m.Length();const h=this.m_invMassA,_=this.m_invMassB,c=this.m_invIA,u=this.m_invIB,d=this.m_K;d.ex.x=h+_+c*t.y*t.y+u*e.y*e.y,d.ex.y=-c*t.x*t.y-u*e.x*e.y,d.ey.x=d.ex.y,d.ey.y=h+_+c*t.x*t.x+u*e.x*e.x;const p=d.Solve(m.x,m.y,Qi.SolvePositionConstraints_s_impulse).SelfNeg();i.SelfMulSub(h,p),s-=c*it.CrossVV(t,p),o.SelfMulAdd(_,p),n+=u*it.CrossVV(e,p)}return e.positions[this.m_indexA].a=s,e.positions[this.m_indexB].a=n,l<=h&&m<=_}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.x=t*this.m_impulse.x,e.y=t*this.m_impulse.y,e}GetReactionTorque(t){return t*this.m_impulse.z}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetReferenceAngle(){return this.m_referenceAngle}GetJointAngle(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle}GetJointSpeed(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(t){t!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t)}GetMotorTorque(t){return t*this.m_motorImpulse}GetMotorSpeed(){return this.m_motorSpeed}SetMaxMotorTorque(t){t!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=t)}GetMaxMotorTorque(){return this.m_maxMotorTorque}IsLimitEnabled(){return this.m_enableLimit}EnableLimit(t){t!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)}GetLowerLimit(){return this.m_lowerAngle}GetUpperLimit(){return this.m_upperAngle}SetLimits(t,e){t===this.m_lowerAngle&&e===this.m_upperAngle||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=t,this.m_upperAngle=e)}SetMotorSpeed(t){t!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t)}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2RevoluteJointDef = new b2RevoluteJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),t("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),t("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),t("  jd.lowerAngle = %.15f;\n",this.m_lowerAngle),t("  jd.upperAngle = %.15f;\n",this.m_upperAngle),t("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),t("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),t("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}Qi.InitVelocityConstraints_s_P=new it,Qi.SolveVelocityConstraints_s_P=new it,Qi.SolveVelocityConstraints_s_Cdot_v2=new it,Qi.SolveVelocityConstraints_s_Cdot1=new it,Qi.SolveVelocityConstraints_s_impulse_v3=new ot,Qi.SolveVelocityConstraints_s_reduced_v2=new it,Qi.SolveVelocityConstraints_s_impulse_v2=new it,Qi.SolvePositionConstraints_s_C_v2=new it,Qi.SolvePositionConstraints_s_impulse=new it;class Hi extends zi{constructor(i){super(i),this.m_localAnchorA=new it,this.m_localAnchorB=new it,this.m_maxLength=0,this.m_length=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_u=new it,this.m_rA=new it,this.m_rB=new it,this.m_localCenterA=new it,this.m_localCenterB=new it,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_state=t.b2LimitState.e_inactiveLimit,this.m_qA=new at,this.m_qB=new at,this.m_lalcA=new it,this.m_lalcB=new it,this.m_localAnchorA.Copy(e(i.localAnchorA,new it(-1,0))),this.m_localAnchorB.Copy(e(i.localAnchorB,new it(1,0))),this.m_maxLength=e(i.maxLength,0)}InitVelocityConstraints(e){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const i=e.positions[this.m_indexA].c,s=e.positions[this.m_indexA].a,o=e.velocities[this.m_indexA].v;let n=e.velocities[this.m_indexA].w;const r=e.positions[this.m_indexB].c,a=e.positions[this.m_indexB].a,m=e.velocities[this.m_indexB].v;let l=e.velocities[this.m_indexB].w;const _=this.m_qA.SetAngle(s),c=this.m_qB.SetAngle(a);it.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),at.MulRV(_,this.m_lalcA,this.m_rA),it.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),at.MulRV(c,this.m_lalcB,this.m_rB),this.m_u.Copy(r).SelfAdd(this.m_rB).SelfSub(i).SelfSub(this.m_rA),this.m_length=this.m_u.Length();const u=this.m_length-this.m_maxLength;if(this.m_state=u>0?t.b2LimitState.e_atUpperLimit:t.b2LimitState.e_inactiveLimit,!(this.m_length>h))return this.m_u.SetZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.SelfMul(1/this.m_length);const d=it.CrossVV(this.m_rA,this.m_u),p=it.CrossVV(this.m_rB,this.m_u),f=this.m_invMassA+this.m_invIA*d*d+this.m_invMassB+this.m_invIB*p*p;if(this.m_mass=0!==f?1/f:0,e.step.warmStarting){this.m_impulse*=e.step.dtRatio;const t=it.MulSV(this.m_impulse,this.m_u,Hi.InitVelocityConstraints_s_P);o.SelfMulSub(this.m_invMassA,t),n-=this.m_invIA*it.CrossVV(this.m_rA,t),m.SelfMulAdd(this.m_invMassB,t),l+=this.m_invIB*it.CrossVV(this.m_rB,t)}else this.m_impulse=0;e.velocities[this.m_indexA].w=n,e.velocities[this.m_indexB].w=l}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const s=t.velocities[this.m_indexB].v;let o=t.velocities[this.m_indexB].w;const n=it.AddVCrossSV(e,i,this.m_rA,Hi.SolveVelocityConstraints_s_vpA),r=it.AddVCrossSV(s,o,this.m_rB,Hi.SolveVelocityConstraints_s_vpB),a=this.m_length-this.m_maxLength;let m=it.DotVV(this.m_u,it.SubVV(r,n,it.s_t0));a<0&&(m+=t.step.inv_dt*a);let l=-this.m_mass*m;const h=this.m_impulse;this.m_impulse=E(0,this.m_impulse+l),l=this.m_impulse-h;const _=it.MulSV(l,this.m_u,Hi.SolveVelocityConstraints_s_P);e.SelfMulSub(this.m_invMassA,_),i-=this.m_invIA*it.CrossVV(this.m_rA,_),s.SelfMulAdd(this.m_invMassB,_),o+=this.m_invIB*it.CrossVV(this.m_rB,_),t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=o}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let i=t.positions[this.m_indexA].a;const s=t.positions[this.m_indexB].c;let o=t.positions[this.m_indexB].a;const n=this.m_qA.SetAngle(i),r=this.m_qB.SetAngle(o);it.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const a=at.MulRV(n,this.m_lalcA,this.m_rA);it.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const m=at.MulRV(r,this.m_lalcB,this.m_rB),l=this.m_u.Copy(s).SelfAdd(m).SelfSub(e).SelfSub(a),_=l.Normalize();let c=_-this.m_maxLength;c=X(c,0,f);const u=-this.m_mass*c,d=it.MulSV(u,l,Hi.SolvePositionConstraints_s_P);return e.SelfMulSub(this.m_invMassA,d),i-=this.m_invIA*it.CrossVV(a,d),s.SelfMulAdd(this.m_invMassB,d),o+=this.m_invIB*it.CrossVV(m,d),t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=o,_-this.m_maxLength<h}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return it.MulSV(t*this.m_impulse,this.m_u,e)}GetReactionTorque(t){return 0}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetMaxLength(t){this.m_maxLength=t}GetMaxLength(){return this.m_maxLength}GetLimitState(){return this.m_state}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2RopeJointDef = new b2RopeJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),t("  jd.maxLength = %.15f;\n",this.m_maxLength),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}Hi.InitVelocityConstraints_s_P=new it,Hi.SolveVelocityConstraints_s_vpA=new it,Hi.SolveVelocityConstraints_s_vpB=new it,Hi.SolveVelocityConstraints_s_P=new it,Hi.SolvePositionConstraints_s_P=new it;class Yi extends zi{constructor(t){super(t),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_bias=0,this.m_localAnchorA=new it,this.m_localAnchorB=new it,this.m_referenceAngle=0,this.m_gamma=0,this.m_impulse=new ot(0,0,0),this.m_indexA=0,this.m_indexB=0,this.m_rA=new it,this.m_rB=new it,this.m_localCenterA=new it,this.m_localCenterB=new it,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=new rt,this.m_qA=new at,this.m_qB=new at,this.m_lalcA=new it,this.m_lalcB=new it,this.m_K=new rt,this.m_frequencyHz=e(t.frequencyHz,0),this.m_dampingRatio=e(t.dampingRatio,0),this.m_localAnchorA.Copy(e(t.localAnchorA,it.ZERO)),this.m_localAnchorB.Copy(e(t.localAnchorB,it.ZERO)),this.m_referenceAngle=e(t.referenceAngle,0),this.m_impulse.SetZero()}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].a,i=t.velocities[this.m_indexA].v;let s=t.velocities[this.m_indexA].w;const o=t.positions[this.m_indexB].a,r=t.velocities[this.m_indexB].v;let a=t.velocities[this.m_indexB].w;const m=this.m_qA.SetAngle(e),l=this.m_qB.SetAngle(o);it.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),at.MulRV(m,this.m_lalcA,this.m_rA),it.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),at.MulRV(l,this.m_lalcB,this.m_rB);const h=this.m_invMassA,_=this.m_invMassB,c=this.m_invIA,u=this.m_invIB,d=this.m_K;if(d.ex.x=h+_+this.m_rA.y*this.m_rA.y*c+this.m_rB.y*this.m_rB.y*u,d.ey.x=-this.m_rA.y*this.m_rA.x*c-this.m_rB.y*this.m_rB.x*u,d.ez.x=-this.m_rA.y*c-this.m_rB.y*u,d.ex.y=d.ey.x,d.ey.y=h+_+this.m_rA.x*this.m_rA.x*c+this.m_rB.x*this.m_rB.x*u,d.ez.y=this.m_rA.x*c+this.m_rB.x*u,d.ex.z=d.ez.x,d.ey.z=d.ez.y,d.ez.z=c+u,this.m_frequencyHz>0){d.GetInverse22(this.m_mass);let i=c+u;const s=i>0?1/i:0,r=o-e-this.m_referenceAngle,a=2*n*this.m_frequencyHz,m=2*s*this.m_dampingRatio*a,l=s*a*a,h=t.step.dt;this.m_gamma=h*(m+h*l),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=r*h*l*this.m_gamma,i+=this.m_gamma,this.m_mass.ez.z=0!==i?1/i:0}else d.GetSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0;if(t.step.warmStarting){this.m_impulse.SelfMul(t.step.dtRatio);const e=Yi.InitVelocityConstraints_s_P.Set(this.m_impulse.x,this.m_impulse.y);i.SelfMulSub(h,e),s-=c*(it.CrossVV(this.m_rA,e)+this.m_impulse.z),r.SelfMulAdd(_,e),a+=u*(it.CrossVV(this.m_rB,e)+this.m_impulse.z)}else this.m_impulse.SetZero();t.velocities[this.m_indexA].w=s,t.velocities[this.m_indexB].w=a}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const s=t.velocities[this.m_indexB].v;let o=t.velocities[this.m_indexB].w;const n=this.m_invMassA,r=this.m_invMassB,a=this.m_invIA,m=this.m_invIB;if(this.m_frequencyHz>0){const t=o-i,l=-this.m_mass.ez.z*(t+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=l,i-=a*l,o+=m*l;const h=it.SubVV(it.AddVCrossSV(s,o,this.m_rB,it.s_t0),it.AddVCrossSV(e,i,this.m_rA,it.s_t1),Yi.SolveVelocityConstraints_s_Cdot1),_=rt.MulM33XY(this.m_mass,h.x,h.y,Yi.SolveVelocityConstraints_s_impulse1).SelfNeg();this.m_impulse.x+=_.x,this.m_impulse.y+=_.y;const c=_;e.SelfMulSub(n,c),i-=a*it.CrossVV(this.m_rA,c),s.SelfMulAdd(r,c),o+=m*it.CrossVV(this.m_rB,c)}else{const t=it.SubVV(it.AddVCrossSV(s,o,this.m_rB,it.s_t0),it.AddVCrossSV(e,i,this.m_rA,it.s_t1),Yi.SolveVelocityConstraints_s_Cdot1),l=o-i,h=rt.MulM33XYZ(this.m_mass,t.x,t.y,l,Yi.SolveVelocityConstraints_s_impulse).SelfNeg();this.m_impulse.SelfAdd(h);const _=Yi.SolveVelocityConstraints_s_P.Set(h.x,h.y);e.SelfMulSub(n,_),i-=a*(it.CrossVV(this.m_rA,_)+h.z),s.SelfMulAdd(r,_),o+=m*(it.CrossVV(this.m_rB,_)+h.z)}t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=o}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let i=t.positions[this.m_indexA].a;const s=t.positions[this.m_indexB].c;let o=t.positions[this.m_indexB].a;const n=this.m_qA.SetAngle(i),r=this.m_qB.SetAngle(o),a=this.m_invMassA,m=this.m_invMassB,l=this.m_invIA,c=this.m_invIB;it.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const u=at.MulRV(n,this.m_lalcA,this.m_rA);it.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const d=at.MulRV(r,this.m_lalcB,this.m_rB);let p,f;const y=this.m_K;if(y.ex.x=a+m+u.y*u.y*l+d.y*d.y*c,y.ey.x=-u.y*u.x*l-d.y*d.x*c,y.ez.x=-u.y*l-d.y*c,y.ex.y=y.ey.x,y.ey.y=a+m+u.x*u.x*l+d.x*d.x*c,y.ez.y=u.x*l+d.x*c,y.ex.z=y.ez.x,y.ey.z=y.ez.y,y.ez.z=l+c,this.m_frequencyHz>0){const t=it.SubVV(it.AddVV(s,d,it.s_t0),it.AddVV(e,u,it.s_t1),Yi.SolvePositionConstraints_s_C1);p=t.Length(),f=0;const n=y.Solve22(t.x,t.y,Yi.SolvePositionConstraints_s_P).SelfNeg();e.SelfMulSub(a,n),i-=l*it.CrossVV(u,n),s.SelfMulAdd(m,n),o+=c*it.CrossVV(d,n)}else{const t=it.SubVV(it.AddVV(s,d,it.s_t0),it.AddVV(e,u,it.s_t1),Yi.SolvePositionConstraints_s_C1),n=o-i-this.m_referenceAngle;p=t.Length(),f=j(n);const r=y.Solve33(t.x,t.y,n,Yi.SolvePositionConstraints_s_impulse).SelfNeg(),h=Yi.SolvePositionConstraints_s_P.Set(r.x,r.y);e.SelfMulSub(a,h),i-=l*(it.CrossVV(this.m_rA,h)+r.z),s.SelfMulAdd(m,h),o+=c*(it.CrossVV(this.m_rB,h)+r.z)}return t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=o,p<=h&&f<=_}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.x=t*this.m_impulse.x,e.y=t*this.m_impulse.y,e}GetReactionTorque(t){return t*this.m_impulse.z}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetReferenceAngle(){return this.m_referenceAngle}SetFrequency(t){this.m_frequencyHz=t}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(t){this.m_dampingRatio=t}GetDampingRatio(){return this.m_dampingRatio}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2WeldJointDef = new b2WeldJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),t("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),t("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),t("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}Yi.InitVelocityConstraints_s_P=new it,Yi.SolveVelocityConstraints_s_Cdot1=new it,Yi.SolveVelocityConstraints_s_impulse1=new it,Yi.SolveVelocityConstraints_s_impulse=new ot,Yi.SolveVelocityConstraints_s_P=new it,Yi.SolvePositionConstraints_s_C1=new it,Yi.SolvePositionConstraints_s_P=new it,Yi.SolvePositionConstraints_s_impulse=new ot;class Ki extends zi{constructor(t){super(t),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_localAnchorA=new it,this.m_localAnchorB=new it,this.m_localXAxisA=new it,this.m_localYAxisA=new it,this.m_impulse=0,this.m_motorImpulse=0,this.m_springImpulse=0,this.m_maxMotorTorque=0,this.m_motorSpeed=0,this.m_enableMotor=!1,this.m_indexA=0,this.m_indexB=0,this.m_localCenterA=new it,this.m_localCenterB=new it,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_ax=new it,this.m_ay=new it,this.m_sAx=0,this.m_sBx=0,this.m_sAy=0,this.m_sBy=0,this.m_mass=0,this.m_motorMass=0,this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_qA=new at,this.m_qB=new at,this.m_lalcA=new it,this.m_lalcB=new it,this.m_rA=new it,this.m_rB=new it,this.m_frequencyHz=e(t.frequencyHz,2),this.m_dampingRatio=e(t.dampingRatio,.7),this.m_localAnchorA.Copy(e(t.localAnchorA,it.ZERO)),this.m_localAnchorB.Copy(e(t.localAnchorB,it.ZERO)),this.m_localXAxisA.Copy(e(t.localAxisA,it.UNITX)),it.CrossOneV(this.m_localXAxisA,this.m_localYAxisA),this.m_maxMotorTorque=e(t.maxMotorTorque,0),this.m_motorSpeed=e(t.motorSpeed,0),this.m_enableMotor=e(t.enableMotor,!1),this.m_ax.SetZero(),this.m_ay.SetZero()}GetMotorSpeed(){return this.m_motorSpeed}GetMaxMotorTorque(){return this.m_maxMotorTorque}SetSpringFrequencyHz(t){this.m_frequencyHz=t}GetSpringFrequencyHz(){return this.m_frequencyHz}SetSpringDampingRatio(t){this.m_dampingRatio=t}GetSpringDampingRatio(){return this.m_dampingRatio}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=this.m_invMassA,i=this.m_invMassB,s=this.m_invIA,o=this.m_invIB,r=t.positions[this.m_indexA].c,a=t.positions[this.m_indexA].a,m=t.velocities[this.m_indexA].v;let l=t.velocities[this.m_indexA].w;const h=t.positions[this.m_indexB].c,_=t.positions[this.m_indexB].a,c=t.velocities[this.m_indexB].v;let u=t.velocities[this.m_indexB].w;const d=this.m_qA.SetAngle(a),p=this.m_qB.SetAngle(_);it.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const f=at.MulRV(d,this.m_lalcA,this.m_rA);it.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const y=at.MulRV(p,this.m_lalcB,this.m_rB),x=it.SubVV(it.AddVV(h,y,it.s_t0),it.AddVV(r,f,it.s_t1),Ki.InitVelocityConstraints_s_d);if(at.MulRV(d,this.m_localYAxisA,this.m_ay),this.m_sAy=it.CrossVV(it.AddVV(x,f,it.s_t0),this.m_ay),this.m_sBy=it.CrossVV(y,this.m_ay),this.m_mass=e+i+s*this.m_sAy*this.m_sAy+o*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){at.MulRV(d,this.m_localXAxisA,this.m_ax),this.m_sAx=it.CrossVV(it.AddVV(x,f,it.s_t0),this.m_ax),this.m_sBx=it.CrossVV(y,this.m_ax);const r=e+i+s*this.m_sAx*this.m_sAx+o*this.m_sBx*this.m_sBx;if(r>0){this.m_springMass=1/r;const e=it.DotVV(x,this.m_ax),i=2*n*this.m_frequencyHz,s=2*this.m_springMass*this.m_dampingRatio*i,o=this.m_springMass*i*i,a=t.step.dt;this.m_gamma=a*(s+a*o),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=e*a*o*this.m_gamma,this.m_springMass=r+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=s+o,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),t.step.warmStarting){this.m_impulse*=t.step.dtRatio,this.m_springImpulse*=t.step.dtRatio,this.m_motorImpulse*=t.step.dtRatio;const e=it.AddVV(it.MulSV(this.m_impulse,this.m_ay,it.s_t0),it.MulSV(this.m_springImpulse,this.m_ax,it.s_t1),Ki.InitVelocityConstraints_s_P),i=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,s=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;m.SelfMulSub(this.m_invMassA,e),l-=this.m_invIA*i,c.SelfMulAdd(this.m_invMassB,e),u+=this.m_invIB*s}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;t.velocities[this.m_indexA].w=l,t.velocities[this.m_indexB].w=u}SolveVelocityConstraints(t){const e=this.m_invMassA,i=this.m_invMassB,s=this.m_invIA,o=this.m_invIB,n=t.velocities[this.m_indexA].v;let r=t.velocities[this.m_indexA].w;const a=t.velocities[this.m_indexB].v;let m=t.velocities[this.m_indexB].w;{const t=it.DotVV(this.m_ax,it.SubVV(a,n,it.s_t0))+this.m_sBx*m-this.m_sAx*r,l=-this.m_springMass*(t+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=l;const h=it.MulSV(l,this.m_ax,Ki.SolveVelocityConstraints_s_P),_=l*this.m_sAx,c=l*this.m_sBx;n.SelfMulSub(e,h),r-=s*_,a.SelfMulAdd(i,h),m+=o*c}{const e=m-r-this.m_motorSpeed;let i=-this.m_motorMass*e;const n=this.m_motorImpulse,a=t.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=X(this.m_motorImpulse+i,-a,a),r-=s*(i=this.m_motorImpulse-n),m+=o*i}{const t=it.DotVV(this.m_ay,it.SubVV(a,n,it.s_t0))+this.m_sBy*m-this.m_sAy*r,l=-this.m_mass*t;this.m_impulse+=l;const h=it.MulSV(l,this.m_ay,Ki.SolveVelocityConstraints_s_P),_=l*this.m_sAy,c=l*this.m_sBy;n.SelfMulSub(e,h),r-=s*_,a.SelfMulAdd(i,h),m+=o*c}t.velocities[this.m_indexA].w=r,t.velocities[this.m_indexB].w=m}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let i=t.positions[this.m_indexA].a;const s=t.positions[this.m_indexB].c;let o=t.positions[this.m_indexB].a;const n=this.m_qA.SetAngle(i),r=this.m_qB.SetAngle(o);it.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const a=at.MulRV(n,this.m_lalcA,this.m_rA);it.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const m=at.MulRV(r,this.m_lalcB,this.m_rB),l=it.AddVV(it.SubVV(s,e,it.s_t0),it.SubVV(m,a,it.s_t1),Ki.SolvePositionConstraints_s_d),_=at.MulRV(n,this.m_localYAxisA,this.m_ay),c=it.CrossVV(it.AddVV(l,a,it.s_t0),_),u=it.CrossVV(m,_),d=it.DotVV(l,this.m_ay),p=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;let f;f=0!==p?-d/p:0;const y=it.MulSV(f,_,Ki.SolvePositionConstraints_s_P),x=f*c,B=f*u;return e.SelfMulSub(this.m_invMassA,y),i-=this.m_invIA*x,s.SelfMulAdd(this.m_invMassB,y),o+=this.m_invIB*B,t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=o,j(d)<=h}GetDefinition(t){return t}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.x=t*(this.m_impulse*this.m_ay.x+this.m_springImpulse*this.m_ax.x),e.y=t*(this.m_impulse*this.m_ay.y+this.m_springImpulse*this.m_ax.y),e}GetReactionTorque(t){return t*this.m_motorImpulse}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetLocalAxisA(){return this.m_localXAxisA}GetJointTranslation(){return this.GetPrismaticJointTranslation()}GetJointLinearSpeed(){return this.GetPrismaticJointSpeed()}GetJointAngle(){return this.GetRevoluteJointAngle()}GetJointAngularSpeed(){return this.GetRevoluteJointSpeed()}GetPrismaticJointTranslation(){const t=this.m_bodyA,e=this.m_bodyB,i=t.GetWorldPoint(this.m_localAnchorA,new it),s=e.GetWorldPoint(this.m_localAnchorB,new it),o=it.SubVV(s,i,new it),n=t.GetWorldVector(this.m_localXAxisA,new it);return it.DotVV(o,n)}GetPrismaticJointSpeed(){const t=this.m_bodyA,e=this.m_bodyB;it.SubVV(this.m_localAnchorA,t.m_sweep.localCenter,this.m_lalcA);const i=at.MulRV(t.m_xf.q,this.m_lalcA,this.m_rA);it.SubVV(this.m_localAnchorB,e.m_sweep.localCenter,this.m_lalcB);const s=at.MulRV(e.m_xf.q,this.m_lalcB,this.m_rB),o=it.AddVV(t.m_sweep.c,i,it.s_t0),n=it.AddVV(e.m_sweep.c,s,it.s_t1),r=it.SubVV(n,o,it.s_t2),a=t.GetWorldVector(this.m_localXAxisA,new it),m=t.m_linearVelocity,l=e.m_linearVelocity,h=t.m_angularVelocity,_=e.m_angularVelocity;return it.DotVV(r,it.CrossSV(h,a,it.s_t0))+it.DotVV(a,it.SubVV(it.AddVCrossSV(l,_,s,it.s_t0),it.AddVCrossSV(m,h,i,it.s_t1),it.s_t0))}GetRevoluteJointAngle(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a}GetRevoluteJointSpeed(){const t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-t}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(t){t!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t)}SetMotorSpeed(t){t!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t)}SetMaxMotorTorque(t){t!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=t)}GetMotorTorque(t){return t*this.m_motorImpulse}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2WheelJointDef = new b2WheelJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),t("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),t("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),t("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),t("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),t("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),t("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}function $i(t,e){return Q(t*e)}function ts(t,e){return t>e?t:e}Ki.InitVelocityConstraints_s_d=new it,Ki.InitVelocityConstraints_s_P=new it,Ki.SolveVelocityConstraints_s_P=new it,Ki.SolvePositionConstraints_s_d=new it,Ki.SolvePositionConstraints_s_P=new it;class es{constructor(t){this._other=null,this.prev=null,this.next=null,this.contact=t}get other(){if(null===this._other)throw new Error;return this._other}set other(t){if(null!==this._other)throw new Error;this._other=t}Reset(){this._other=null,this.prev=null,this.next=null}}class is{constructor(){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_prev=null,this.m_next=null,this.m_nodeA=new es(this),this.m_nodeB=new es(this),this.m_indexA=0,this.m_indexB=0,this.m_manifold=new Et,this.m_toiCount=0,this.m_toi=0,this.m_friction=0,this.m_restitution=0,this.m_tangentSpeed=0,this.m_oldManifold=new Et}GetManifold(){return this.m_manifold}GetWorldManifold(t){const e=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody(),s=this.GetShapeA(),o=this.GetShapeB();t.Initialize(this.m_manifold,e.GetTransform(),s.m_radius,i.GetTransform(),o.m_radius)}IsTouching(){return this.m_touchingFlag}SetEnabled(t){this.m_enabledFlag=t}IsEnabled(){return this.m_enabledFlag}GetNext(){return this.m_next}GetFixtureA(){return this.m_fixtureA}GetChildIndexA(){return this.m_indexA}GetShapeA(){return this.m_fixtureA.GetShape()}GetFixtureB(){return this.m_fixtureB}GetChildIndexB(){return this.m_indexB}GetShapeB(){return this.m_fixtureB.GetShape()}FlagForFiltering(){this.m_filterFlag=!0}SetFriction(t){this.m_friction=t}GetFriction(){return this.m_friction}ResetFriction(){this.m_friction=$i(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)}SetRestitution(t){this.m_restitution=t}GetRestitution(){return this.m_restitution}ResetRestitution(){this.m_restitution=ts(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)}SetTangentSpeed(t){this.m_tangentSpeed=t}GetTangentSpeed(){return this.m_tangentSpeed}Reset(t,e,i,s){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!0,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_fixtureA=t,this.m_fixtureB=i,this.m_indexA=e,this.m_indexB=s,this.m_manifold.pointCount=0,this.m_prev=null,this.m_next=null,this.m_nodeA.Reset(),this.m_nodeB.Reset(),this.m_toiCount=0,this.m_friction=$i(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=ts(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)}Update(t){const e=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=e,this.m_enabledFlag=!0;let i=!1;const s=this.m_touchingFlag,o=this.m_fixtureA.IsSensor(),n=this.m_fixtureB.IsSensor(),r=o||n,a=this.m_fixtureA.GetBody(),m=this.m_fixtureB.GetBody(),l=a.GetTransform(),h=m.GetTransform();if(r){const t=this.GetShapeA(),e=this.GetShapeB();i=te(t,this.m_indexA,e,this.m_indexB,l,h),this.m_manifold.pointCount=0}else{this.Evaluate(this.m_manifold,l,h),i=this.m_manifold.pointCount>0;for(let t=0;t<this.m_manifold.pointCount;++t){const e=this.m_manifold.points[t];e.normalImpulse=0,e.tangentImpulse=0;const i=e.id;for(let t=0;t<this.m_oldManifold.pointCount;++t){const s=this.m_oldManifold.points[t];if(s.id.key===i.key){e.normalImpulse=s.normalImpulse,e.tangentImpulse=s.tangentImpulse;break}}}i!==s&&(a.SetAwake(!0),m.SetAwake(!0))}this.m_touchingFlag=i,!s&&i&&t&&t.BeginContact(this),s&&!i&&t&&t.EndContact(this),!r&&i&&t&&t.PreSolve(this,this.m_oldManifold)}ComputeTOI(t,e){const i=is.ComputeTOI_s_input;i.proxyA.SetShape(this.GetShapeA(),this.m_indexA),i.proxyB.SetShape(this.GetShapeB(),this.m_indexB),i.sweepA.Copy(t),i.sweepB.Copy(e),i.tMax=h;const s=is.ComputeTOI_s_output;return Pe(s,i),s.t}}is.ComputeTOI_s_input=new pe,is.ComputeTOI_s_output=new xe;class ss extends is{static Create(){return new ss}static Destroy(t){}Evaluate(t,e,i){De(t,this.GetShapeA(),e,this.GetShapeB(),i)}}class os extends is{static Create(){return new os}static Destroy(t){}Evaluate(t,e,i){ni(t,this.GetShapeA(),e,this.GetShapeB(),i)}}class ns extends is{static Create(){return new ns}static Destroy(t){}Evaluate(t,e,i){Re(t,this.GetShapeA(),e,this.GetShapeB(),i)}}class rs extends is{static Create(){return new rs}static Destroy(t){}Evaluate(t,e,i){di(t,this.GetShapeA(),e,this.GetShapeB(),i)}}class as extends is{static Create(){return new as}static Destroy(t){}Evaluate(t,e,i){Ai(t,this.GetShapeA(),e,this.GetShapeB(),i)}}class ms extends is{static Create(){return new ms}static Destroy(t){}Evaluate(t,e,i){const s=ms.Evaluate_s_edge;this.GetShapeA().GetChildEdge(s,this.m_indexA),di(t,s,e,this.GetShapeB(),i)}}ms.Evaluate_s_edge=new Ii;class ls extends is{static Create(){return new ls}static Destroy(t){}Evaluate(t,e,i){const s=ls.Evaluate_s_edge;this.GetShapeA().GetChildEdge(s,this.m_indexA),Ai(t,s,e,this.GetShapeB(),i)}}ls.Evaluate_s_edge=new Ii;class hs{constructor(){this.pool=[],this.createFcn=null,this.destroyFcn=null,this.primary=!1}}class _s{constructor(){this.m_registers=[],this.InitializeRegisters()}AddType(t,e,i,s){const o=[];function n(){return o.pop()||t()}function r(t){o.push(t)}this.m_registers[i][s].pool=o,this.m_registers[i][s].createFcn=n,this.m_registers[i][s].destroyFcn=r,this.m_registers[i][s].primary=!0,i!==s&&(this.m_registers[s][i].pool=o,this.m_registers[s][i].createFcn=n,this.m_registers[s][i].destroyFcn=r,this.m_registers[s][i].primary=!1)}InitializeRegisters(){for(let e=0;e<t.b2ShapeType.e_shapeTypeCount;e++){this.m_registers[e]=[];for(let i=0;i<t.b2ShapeType.e_shapeTypeCount;i++)this.m_registers[e][i]=new hs}this.AddType(ss.Create,ss.Destroy,t.b2ShapeType.e_circleShape,t.b2ShapeType.e_circleShape),this.AddType(ns.Create,ns.Destroy,t.b2ShapeType.e_polygonShape,t.b2ShapeType.e_circleShape),this.AddType(os.Create,os.Destroy,t.b2ShapeType.e_polygonShape,t.b2ShapeType.e_polygonShape),this.AddType(rs.Create,rs.Destroy,t.b2ShapeType.e_edgeShape,t.b2ShapeType.e_circleShape),this.AddType(as.Create,as.Destroy,t.b2ShapeType.e_edgeShape,t.b2ShapeType.e_polygonShape),this.AddType(ms.Create,ms.Destroy,t.b2ShapeType.e_chainShape,t.b2ShapeType.e_circleShape),this.AddType(ls.Create,ls.Destroy,t.b2ShapeType.e_chainShape,t.b2ShapeType.e_polygonShape)}Create(t,e,i,s){const o=t.GetType(),n=i.GetType(),r=this.m_registers[o][n];if(r.createFcn){const o=r.createFcn();return r.primary?o.Reset(t,e,i,s):o.Reset(i,s,t,e),o}return null}Destroy(t){const e=t.m_fixtureA.GetType(),i=t.m_fixtureB.GetType(),s=this.m_registers[e][i];s.destroyFcn&&s.destroyFcn(t)}}class cs{ShouldCollide(e,i){const s=e.GetBody(),o=i.GetBody();if(o.GetType()===t.b2BodyType.b2_staticBody&&s.GetType()===t.b2BodyType.b2_staticBody)return!1;if(!o.ShouldCollideConnected(s))return!1;const n=e.GetFilterData(),r=i.GetFilterData();return n.groupIndex===r.groupIndex&&0!==n.groupIndex?n.groupIndex>0:0!=(n.maskBits&r.categoryBits)&&0!=(n.categoryBits&r.maskBits)}ShouldCollideFixtureParticle(t,e,i){return!0}ShouldCollideParticleParticle(t,e,i){return!0}}cs.b2_defaultFilter=new cs;class us{constructor(){this.normalImpulses=q(r),this.tangentImpulses=q(r),this.count=0}}class ds{BeginContact(t){}EndContact(t){}BeginContactFixtureParticle(t,e){}EndContactFixtureParticle(t,e){}BeginContactParticleParticle(t,e){}EndContactParticleParticle(t,e){}PreSolve(t,e){}PostSolve(t,e){}}ds.b2_defaultListener=new ds;class ps{ReportFixture(t){return!0}ReportParticle(t,e){return!1}ShouldQueryParticleSystem(t){return!0}}class fs{ReportFixture(t,e,i,s){return s}ReportParticle(t,e,i,s,o){return 0}ShouldQueryParticleSystem(t){return!0}}class ys{constructor(){this.m_broadPhase=new re,this.m_contactList=null,this.m_contactCount=0,this.m_contactFilter=cs.b2_defaultFilter,this.m_contactListener=ds.b2_defaultListener,this.m_contactFactory=new _s}AddPair(t,e){let i=t.fixture,s=e.fixture,o=t.childIndex,n=e.childIndex,r=i.GetBody(),a=s.GetBody();if(r===a)return;let m=a.GetContactList();for(;m;){if(m.other===r){const t=m.contact.GetFixtureA(),e=m.contact.GetFixtureB(),r=m.contact.GetChildIndexA(),a=m.contact.GetChildIndexB();if(t===i&&e===s&&r===o&&a===n)return;if(t===s&&e===i&&r===n&&a===o)return}m=m.next}if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(i,s))return;const l=this.m_contactFactory.Create(i,o,s,n);null!==l&&(i=l.GetFixtureA(),s=l.GetFixtureB(),o=l.GetChildIndexA(),n=l.GetChildIndexB(),r=i.m_body,a=s.m_body,l.m_prev=null,l.m_next=this.m_contactList,null!==this.m_contactList&&(this.m_contactList.m_prev=l),this.m_contactList=l,l.m_nodeA.other=a,l.m_nodeA.prev=null,l.m_nodeA.next=r.m_contactList,null!==r.m_contactList&&(r.m_contactList.prev=l.m_nodeA),r.m_contactList=l.m_nodeA,l.m_nodeB.other=r,l.m_nodeB.prev=null,l.m_nodeB.next=a.m_contactList,null!==a.m_contactList&&(a.m_contactList.prev=l.m_nodeB),a.m_contactList=l.m_nodeB,i.IsSensor()||s.IsSensor()||(r.SetAwake(!0),a.SetAwake(!0)),++this.m_contactCount)}FindNewContacts(){this.m_broadPhase.UpdatePairs((t,e)=>{this.AddPair(t,e)})}Destroy(t){const e=t.GetFixtureA(),i=t.GetFixtureB(),s=e.GetBody(),o=i.GetBody();this.m_contactListener&&t.IsTouching()&&this.m_contactListener.EndContact(t),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_contactList&&(this.m_contactList=t.m_next),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA===s.m_contactList&&(s.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB===o.m_contactList&&(o.m_contactList=t.m_nodeB.next),t.m_manifold.pointCount>0&&!e.IsSensor()&&!i.IsSensor()&&(e.GetBody().SetAwake(!0),i.GetBody().SetAwake(!0)),this.m_contactFactory.Destroy(t),--this.m_contactCount}Collide(){let e=this.m_contactList;for(;e;){const i=e.GetFixtureA(),s=e.GetFixtureB(),o=e.GetChildIndexA(),n=e.GetChildIndexB(),r=i.GetBody(),a=s.GetBody();if(e.m_filterFlag){if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(i,s)){const t=e;e=t.m_next,this.Destroy(t);continue}e.m_filterFlag=!1}const m=r.IsAwake()&&r.m_type!==t.b2BodyType.b2_staticBody,l=a.IsAwake()&&a.m_type!==t.b2BodyType.b2_staticBody;if(!m&&!l){e=e.m_next;continue}const h=i.m_proxies[o].treeNode,_=s.m_proxies[n].treeNode;if(Qt(h.aabb,_.aabb))e.Update(this.m_contactListener),e=e.m_next;else{const t=e;e=t.m_next,this.Destroy(t)}}}}class xs{constructor(){this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0}Reset(){return this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0,this}}class Bs{constructor(){this.dt=0,this.inv_dt=0,this.dtRatio=0,this.velocityIterations=0,this.positionIterations=0,this.particleIterations=0,this.warmStarting=!1}Copy(t){return this.dt=t.dt,this.inv_dt=t.inv_dt,this.dtRatio=t.dtRatio,this.positionIterations=t.positionIterations,this.velocityIterations=t.velocityIterations,this.particleIterations=t.particleIterations,this.warmStarting=t.warmStarting,this}}class Ss{constructor(){this.c=new it,this.a=0}static MakeArray(t){return k(t,t=>new Ss)}}class As{constructor(){this.v=new it,this.w=0}static MakeArray(t){return k(t,t=>new As)}}class bs{constructor(){this.step=new Bs}}let Cs=!1;class Vs{constructor(){this.rA=new it,this.rB=new it,this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}static MakeArray(t){return k(t,t=>new Vs)}}class gs{constructor(){this.points=Vs.MakeArray(r),this.normal=new it,this.tangent=new it,this.normalMass=new nt,this.K=new nt,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.invIA=0,this.invIB=0,this.friction=0,this.restitution=0,this.tangentSpeed=0,this.pointCount=0,this.contactIndex=0}static MakeArray(t){return k(t,t=>new gs)}}class vs{constructor(){this.localPoints=it.MakeArray(r),this.localNormal=new it,this.localPoint=new it,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.localCenterA=new it,this.localCenterB=new it,this.invIA=0,this.invIB=0,this.type=t.b2ManifoldType.e_unknown,this.radiusA=0,this.radiusB=0,this.pointCount=0}static MakeArray(t){return k(t,t=>new vs)}}class ws{constructor(){this.step=new Bs,this.count=0}}class Ms{constructor(){this.normal=new it,this.point=new it,this.separation=0}Initialize(e,i,s,o){const n=Ms.Initialize_s_pointA,r=Ms.Initialize_s_pointB,a=Ms.Initialize_s_planePoint,m=Ms.Initialize_s_clipPoint;switch(e.type){case t.b2ManifoldType.e_circles:mt.MulXV(i,e.localPoint,n),mt.MulXV(s,e.localPoints[0],r),it.SubVV(r,n,this.normal).SelfNormalize(),it.MidVV(n,r,this.point),this.separation=it.DotVV(it.SubVV(r,n,it.s_t0),this.normal)-e.radiusA-e.radiusB;break;case t.b2ManifoldType.e_faceA:at.MulRV(i.q,e.localNormal,this.normal),mt.MulXV(i,e.localPoint,a),mt.MulXV(s,e.localPoints[o],m),this.separation=it.DotVV(it.SubVV(m,a,it.s_t0),this.normal)-e.radiusA-e.radiusB,this.point.Copy(m);break;case t.b2ManifoldType.e_faceB:at.MulRV(s.q,e.localNormal,this.normal),mt.MulXV(s,e.localPoint,a),mt.MulXV(i,e.localPoints[o],m),this.separation=it.DotVV(it.SubVV(m,a,it.s_t0),this.normal)-e.radiusA-e.radiusB,this.point.Copy(m),this.normal.SelfNeg()}}}Ms.Initialize_s_pointA=new it,Ms.Initialize_s_pointB=new it,Ms.Initialize_s_planePoint=new it,Ms.Initialize_s_clipPoint=new it;class Ps{constructor(){this.m_step=new Bs,this.m_positionConstraints=vs.MakeArray(1024),this.m_velocityConstraints=gs.MakeArray(1024),this.m_count=0}Initialize(t){if(this.m_step.Copy(t.step),this.m_count=t.count,this.m_positionConstraints.length<this.m_count){const t=O(2*this.m_positionConstraints.length,this.m_count);for(;this.m_positionConstraints.length<t;)this.m_positionConstraints[this.m_positionConstraints.length]=new vs}if(this.m_velocityConstraints.length<this.m_count){const t=O(2*this.m_velocityConstraints.length,this.m_count);for(;this.m_velocityConstraints.length<t;)this.m_velocityConstraints[this.m_velocityConstraints.length]=new gs}this.m_positions=t.positions,this.m_velocities=t.velocities,this.m_contacts=t.contacts;for(let e=0;e<this.m_count;++e){const t=this.m_contacts[e],i=t.m_fixtureA,s=t.m_fixtureB,o=i.GetShape(),n=s.GetShape(),r=o.m_radius,a=n.m_radius,m=i.GetBody(),l=s.GetBody(),h=t.GetManifold(),_=h.pointCount,c=this.m_velocityConstraints[e];c.friction=t.m_friction,c.restitution=t.m_restitution,c.tangentSpeed=t.m_tangentSpeed,c.indexA=m.m_islandIndex,c.indexB=l.m_islandIndex,c.invMassA=m.m_invMass,c.invMassB=l.m_invMass,c.invIA=m.m_invI,c.invIB=l.m_invI,c.contactIndex=e,c.pointCount=_,c.K.SetZero(),c.normalMass.SetZero();const u=this.m_positionConstraints[e];u.indexA=m.m_islandIndex,u.indexB=l.m_islandIndex,u.invMassA=m.m_invMass,u.invMassB=l.m_invMass,u.localCenterA.Copy(m.m_sweep.localCenter),u.localCenterB.Copy(l.m_sweep.localCenter),u.invIA=m.m_invI,u.invIB=l.m_invI,u.localNormal.Copy(h.localNormal),u.localPoint.Copy(h.localPoint),u.pointCount=_,u.radiusA=r,u.radiusB=a,u.type=h.type;for(let e=0;e<_;++e){const t=h.points[e],i=c.points[e];this.m_step.warmStarting?(i.normalImpulse=this.m_step.dtRatio*t.normalImpulse,i.tangentImpulse=this.m_step.dtRatio*t.tangentImpulse):(i.normalImpulse=0,i.tangentImpulse=0),i.rA.SetZero(),i.rB.SetZero(),i.normalMass=0,i.tangentMass=0,i.velocityBias=0,u.localPoints[e].Copy(t.localPoint)}}return this}InitializeVelocityConstraints(){const t=Ps.InitializeVelocityConstraints_s_xfA,e=Ps.InitializeVelocityConstraints_s_xfB,i=Ps.InitializeVelocityConstraints_s_worldManifold;for(let s=0;s<this.m_count;++s){const o=this.m_velocityConstraints[s],n=this.m_positionConstraints[s],r=n.radiusA,a=n.radiusB,m=this.m_contacts[o.contactIndex].GetManifold(),l=o.indexA,h=o.indexB,_=o.invMassA,c=o.invMassB,u=o.invIA,d=o.invIB,f=n.localCenterA,y=n.localCenterB,x=this.m_positions[l].c,B=this.m_positions[l].a,S=this.m_velocities[l].v,A=this.m_velocities[l].w,b=this.m_positions[h].c,C=this.m_positions[h].a,V=this.m_velocities[h].v,g=this.m_velocities[h].w;t.q.SetAngle(B),e.q.SetAngle(C),it.SubVV(x,at.MulRV(t.q,f,it.s_t0),t.p),it.SubVV(b,at.MulRV(e.q,y,it.s_t0),e.p),i.Initialize(m,t,r,e,a),o.normal.Copy(i.normal),it.CrossVOne(o.normal,o.tangent);const v=o.pointCount;for(let t=0;t<v;++t){const e=o.points[t];it.SubVV(i.points[t],x,e.rA),it.SubVV(i.points[t],b,e.rB);const s=it.CrossVV(e.rA,o.normal),n=it.CrossVV(e.rB,o.normal),r=_+c+u*s*s+d*n*n;e.normalMass=r>0?1/r:0;const a=o.tangent,m=it.CrossVV(e.rA,a),l=it.CrossVV(e.rB,a),h=_+c+u*m*m+d*l*l;e.tangentMass=h>0?1/h:0,e.velocityBias=0;const f=it.DotVV(o.normal,it.SubVV(it.AddVCrossSV(V,g,e.rB,it.s_t0),it.AddVCrossSV(S,A,e.rA,it.s_t1),it.s_t0));f<-p&&(e.velocityBias+=-o.restitution*f)}if(2===o.pointCount&&Cs){const t=o.points[0],e=o.points[1],i=it.CrossVV(t.rA,o.normal),s=it.CrossVV(t.rB,o.normal),n=it.CrossVV(e.rA,o.normal),r=it.CrossVV(e.rB,o.normal),a=_+c+u*i*i+d*s*s,m=_+c+u*n*n+d*r*r,l=_+c+u*i*n+d*s*r;a*a<1e3*(a*m-l*l)?(o.K.ex.Set(a,l),o.K.ey.Set(l,m),o.K.GetInverse(o.normalMass)):o.pointCount=1}}}WarmStart(){const t=Ps.WarmStart_s_P;for(let e=0;e<this.m_count;++e){const i=this.m_velocityConstraints[e],s=i.indexA,o=i.indexB,n=i.invMassA,r=i.invIA,a=i.invMassB,m=i.invIB,l=i.pointCount,h=this.m_velocities[s].v;let _=this.m_velocities[s].w;const c=this.m_velocities[o].v;let u=this.m_velocities[o].w;const d=i.normal,p=i.tangent;for(let e=0;e<l;++e){const s=i.points[e];it.AddVV(it.MulSV(s.normalImpulse,d,it.s_t0),it.MulSV(s.tangentImpulse,p,it.s_t1),t),_-=r*it.CrossVV(s.rA,t),h.SelfMulSub(n,t),u+=m*it.CrossVV(s.rB,t),c.SelfMulAdd(a,t)}this.m_velocities[s].w=_,this.m_velocities[o].w=u}}SolveVelocityConstraints(){const t=Ps.SolveVelocityConstraints_s_dv,e=Ps.SolveVelocityConstraints_s_dv1,i=Ps.SolveVelocityConstraints_s_dv2,s=Ps.SolveVelocityConstraints_s_P,o=Ps.SolveVelocityConstraints_s_a,n=Ps.SolveVelocityConstraints_s_b,r=Ps.SolveVelocityConstraints_s_x,a=Ps.SolveVelocityConstraints_s_d,m=Ps.SolveVelocityConstraints_s_P1,l=Ps.SolveVelocityConstraints_s_P2,h=Ps.SolveVelocityConstraints_s_P1P2;for(let _=0;_<this.m_count;++_){const c=this.m_velocityConstraints[_],u=c.indexA,d=c.indexB,p=c.invMassA,f=c.invIA,y=c.invMassB,x=c.invIB,B=c.pointCount,S=this.m_velocities[u].v;let A=this.m_velocities[u].w;const b=this.m_velocities[d].v;let C=this.m_velocities[d].w;const V=c.normal,g=c.tangent,v=c.friction;for(let e=0;e<B;++e){const i=c.points[e];it.SubVV(it.AddVCrossSV(b,C,i.rB,it.s_t0),it.AddVCrossSV(S,A,i.rA,it.s_t1),t);const o=it.DotVV(t,g)-c.tangentSpeed;let n=i.tangentMass*-o;const r=v*i.normalImpulse,a=X(i.tangentImpulse+n,-r,r);n=a-i.tangentImpulse,i.tangentImpulse=a,it.MulSV(n,g,s),S.SelfMulSub(p,s),A-=f*it.CrossVV(i.rA,s),b.SelfMulAdd(y,s),C+=x*it.CrossVV(i.rB,s)}if(1===c.pointCount||!1===Cs)for(let e=0;e<B;++e){const i=c.points[e];it.SubVV(it.AddVCrossSV(b,C,i.rB,it.s_t0),it.AddVCrossSV(S,A,i.rA,it.s_t1),t);const o=it.DotVV(t,V);let n=-i.normalMass*(o-i.velocityBias);const r=O(i.normalImpulse+n,0);n=r-i.normalImpulse,i.normalImpulse=r,it.MulSV(n,V,s),S.SelfMulSub(p,s),A-=f*it.CrossVV(i.rA,s),b.SelfMulAdd(y,s),C+=x*it.CrossVV(i.rB,s)}else{const t=c.points[0],s=c.points[1];o.Set(t.normalImpulse,s.normalImpulse),it.SubVV(it.AddVCrossSV(b,C,t.rB,it.s_t0),it.AddVCrossSV(S,A,t.rA,it.s_t1),e),it.SubVV(it.AddVCrossSV(b,C,s.rB,it.s_t0),it.AddVCrossSV(S,A,s.rA,it.s_t1),i);let _=it.DotVV(e,V),u=it.DotVV(i,V);for(n.x=_-t.velocityBias,n.y=u-s.velocityBias,n.SelfSub(nt.MulMV(c.K,o,it.s_t0));;){if(nt.MulMV(c.normalMass,n,r).SelfNeg(),r.x>=0&&r.y>=0){it.SubVV(r,o,a),it.MulSV(a.x,V,m),it.MulSV(a.y,V,l),it.AddVV(m,l,h),S.SelfMulSub(p,h),A-=f*(it.CrossVV(t.rA,m)+it.CrossVV(s.rA,l)),b.SelfMulAdd(y,h),C+=x*(it.CrossVV(t.rB,m)+it.CrossVV(s.rB,l)),t.normalImpulse=r.x,s.normalImpulse=r.y;break}if(r.x=-t.normalMass*n.x,r.y=0,_=0,u=c.K.ex.y*r.x+n.y,r.x>=0&&u>=0){it.SubVV(r,o,a),it.MulSV(a.x,V,m),it.MulSV(a.y,V,l),it.AddVV(m,l,h),S.SelfMulSub(p,h),A-=f*(it.CrossVV(t.rA,m)+it.CrossVV(s.rA,l)),b.SelfMulAdd(y,h),C+=x*(it.CrossVV(t.rB,m)+it.CrossVV(s.rB,l)),t.normalImpulse=r.x,s.normalImpulse=r.y;break}if(r.x=0,r.y=-s.normalMass*n.y,_=c.K.ey.x*r.y+n.x,u=0,r.y>=0&&_>=0){it.SubVV(r,o,a),it.MulSV(a.x,V,m),it.MulSV(a.y,V,l),it.AddVV(m,l,h),S.SelfMulSub(p,h),A-=f*(it.CrossVV(t.rA,m)+it.CrossVV(s.rA,l)),b.SelfMulAdd(y,h),C+=x*(it.CrossVV(t.rB,m)+it.CrossVV(s.rB,l)),t.normalImpulse=r.x,s.normalImpulse=r.y;break}if(r.x=0,r.y=0,_=n.x,u=n.y,_>=0&&u>=0){it.SubVV(r,o,a),it.MulSV(a.x,V,m),it.MulSV(a.y,V,l),it.AddVV(m,l,h),S.SelfMulSub(p,h),A-=f*(it.CrossVV(t.rA,m)+it.CrossVV(s.rA,l)),b.SelfMulAdd(y,h),C+=x*(it.CrossVV(t.rB,m)+it.CrossVV(s.rB,l)),t.normalImpulse=r.x,s.normalImpulse=r.y;break}break}}this.m_velocities[u].w=A,this.m_velocities[d].w=C}}StoreImpulses(){for(let t=0;t<this.m_count;++t){const e=this.m_velocityConstraints[t],i=this.m_contacts[e.contactIndex].GetManifold();for(let t=0;t<e.pointCount;++t)i.points[t].normalImpulse=e.points[t].normalImpulse,i.points[t].tangentImpulse=e.points[t].tangentImpulse}}SolvePositionConstraints(){const t=Ps.SolvePositionConstraints_s_xfA,e=Ps.SolvePositionConstraints_s_xfB,i=Ps.SolvePositionConstraints_s_psm,s=Ps.SolvePositionConstraints_s_rA,o=Ps.SolvePositionConstraints_s_rB,n=Ps.SolvePositionConstraints_s_P;let r=0;for(let a=0;a<this.m_count;++a){const m=this.m_positionConstraints[a],l=m.indexA,_=m.indexB,c=m.localCenterA,u=m.invMassA,d=m.invIA,p=m.localCenterB,y=m.invMassB,x=m.invIB,B=m.pointCount,S=this.m_positions[l].c;let A=this.m_positions[l].a;const C=this.m_positions[_].c;let V=this.m_positions[_].a;for(let a=0;a<B;++a){t.q.SetAngle(A),e.q.SetAngle(V),it.SubVV(S,at.MulRV(t.q,c,it.s_t0),t.p),it.SubVV(C,at.MulRV(e.q,p,it.s_t0),e.p),i.Initialize(m,t,e,a);const l=i.normal,_=i.point,B=i.separation;it.SubVV(_,S,s),it.SubVV(_,C,o),r=E(r,B);const g=X(b*(B+h),-f,0),v=it.CrossVV(s,l),w=it.CrossVV(o,l),M=u+y+d*v*v+x*w*w,P=M>0?-g/M:0;it.MulSV(P,l,n),S.SelfMulSub(u,n),A-=d*it.CrossVV(s,n),C.SelfMulAdd(y,n),V+=x*it.CrossVV(o,n)}this.m_positions[l].a=A,this.m_positions[_].a=V}return r>-3*h}SolveTOIPositionConstraints(t,e){const i=Ps.SolveTOIPositionConstraints_s_xfA,s=Ps.SolveTOIPositionConstraints_s_xfB,o=Ps.SolveTOIPositionConstraints_s_psm,n=Ps.SolveTOIPositionConstraints_s_rA,r=Ps.SolveTOIPositionConstraints_s_rB,a=Ps.SolveTOIPositionConstraints_s_P;let m=0;for(let l=0;l<this.m_count;++l){const _=this.m_positionConstraints[l],c=_.indexA,u=_.indexB,d=_.localCenterA,p=_.localCenterB,y=_.pointCount;let x=0,B=0;c!==t&&c!==e||(x=_.invMassA,B=_.invIA);let S=0,A=0;u!==t&&u!==e||(S=_.invMassB,A=_.invIB);const b=this.m_positions[c].c;let V=this.m_positions[c].a;const g=this.m_positions[u].c;let v=this.m_positions[u].a;for(let t=0;t<y;++t){i.q.SetAngle(V),s.q.SetAngle(v),it.SubVV(b,at.MulRV(i.q,d,it.s_t0),i.p),it.SubVV(g,at.MulRV(s.q,p,it.s_t0),s.p),o.Initialize(_,i,s,t);const e=o.normal,l=o.point,c=o.separation;it.SubVV(l,b,n),it.SubVV(l,g,r),m=E(m,c);const u=X(C*(c+h),-f,0),y=it.CrossVV(n,e),w=it.CrossVV(r,e),M=x+S+B*y*y+A*w*w,P=M>0?-u/M:0;it.MulSV(P,e,a),b.SelfMulSub(x,a),V-=B*it.CrossVV(n,a),g.SelfMulAdd(S,a),v+=A*it.CrossVV(r,a)}this.m_positions[c].a=V,this.m_positions[u].a=v}return m>=-1.5*h}}Ps.InitializeVelocityConstraints_s_xfA=new mt,Ps.InitializeVelocityConstraints_s_xfB=new mt,Ps.InitializeVelocityConstraints_s_worldManifold=new Ot,Ps.WarmStart_s_P=new it,Ps.SolveVelocityConstraints_s_dv=new it,Ps.SolveVelocityConstraints_s_dv1=new it,Ps.SolveVelocityConstraints_s_dv2=new it,Ps.SolveVelocityConstraints_s_P=new it,Ps.SolveVelocityConstraints_s_a=new it,Ps.SolveVelocityConstraints_s_b=new it,Ps.SolveVelocityConstraints_s_x=new it,Ps.SolveVelocityConstraints_s_d=new it,Ps.SolveVelocityConstraints_s_P1=new it,Ps.SolveVelocityConstraints_s_P2=new it,Ps.SolveVelocityConstraints_s_P1P2=new it,Ps.SolvePositionConstraints_s_xfA=new mt,Ps.SolvePositionConstraints_s_xfB=new mt,Ps.SolvePositionConstraints_s_psm=new Ms,Ps.SolvePositionConstraints_s_rA=new it,Ps.SolvePositionConstraints_s_rB=new it,Ps.SolvePositionConstraints_s_P=new it,Ps.SolveTOIPositionConstraints_s_xfA=new mt,Ps.SolveTOIPositionConstraints_s_xfB=new mt,Ps.SolveTOIPositionConstraints_s_psm=new Ms,Ps.SolveTOIPositionConstraints_s_rA=new it,Ps.SolveTOIPositionConstraints_s_rB=new it,Ps.SolveTOIPositionConstraints_s_P=new it;class Is{constructor(){this.m_bodies=[],this.m_contacts=[],this.m_joints=[],this.m_positions=Ss.MakeArray(1024),this.m_velocities=As.MakeArray(1024),this.m_bodyCount=0,this.m_jointCount=0,this.m_contactCount=0,this.m_bodyCapacity=0,this.m_contactCapacity=0,this.m_jointCapacity=0}Initialize(t,e,i,s){if(this.m_bodyCapacity=t,this.m_contactCapacity=e,this.m_jointCapacity=i,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_listener=s,this.m_positions.length<t){const e=O(2*this.m_positions.length,t);for(;this.m_positions.length<e;)this.m_positions[this.m_positions.length]=new Ss}if(this.m_velocities.length<t){const e=O(2*this.m_velocities.length,t);for(;this.m_velocities.length<e;)this.m_velocities[this.m_velocities.length]=new As}}Clear(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0}AddBody(t){t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=t}AddContact(t){this.m_contacts[this.m_contactCount++]=t}AddJoint(t){this.m_joints[this.m_jointCount++]=t}Solve(e,s,o,n){const r=Is.s_timer.Reset(),a=s.dt;for(let i=0;i<this.m_bodyCount;++i){const e=this.m_bodies[i];this.m_positions[i].c.Copy(e.m_sweep.c);const s=e.m_sweep.a,n=this.m_velocities[i].v.Copy(e.m_linearVelocity);let r=e.m_angularVelocity;e.m_sweep.c0.Copy(e.m_sweep.c),e.m_sweep.a0=e.m_sweep.a,e.m_type===t.b2BodyType.b2_dynamicBody&&(n.x+=a*(e.m_gravityScale*o.x+e.m_invMass*e.m_force.x),n.y+=a*(e.m_gravityScale*o.y+e.m_invMass*e.m_force.y),r+=a*e.m_invI*e.m_torque,n.SelfMul(1/(1+a*e.m_linearDamping)),r*=1/(1+a*e.m_angularDamping)),this.m_positions[i].a=s,this.m_velocities[i].w=r}r.Reset();const m=Is.s_solverData;m.step.Copy(s),m.positions=this.m_positions,m.velocities=this.m_velocities;const l=Is.s_contactSolverDef;l.step.Copy(s),l.contacts=this.m_contacts,l.count=this.m_contactCount,l.positions=this.m_positions,l.velocities=this.m_velocities;const h=Is.s_contactSolver.Initialize(l);h.InitializeVelocityConstraints(),s.warmStarting&&h.WarmStart();for(let t=0;t<this.m_jointCount;++t)this.m_joints[t].InitVelocityConstraints(m);e.solveInit=r.GetMilliseconds(),r.Reset();for(let t=0;t<s.velocityIterations;++t){for(let t=0;t<this.m_jointCount;++t)this.m_joints[t].SolveVelocityConstraints(m);h.SolveVelocityConstraints()}h.StoreImpulses(),e.solveVelocity=r.GetMilliseconds();for(let t=0;t<this.m_bodyCount;++t){const e=this.m_positions[t].c;let i=this.m_positions[t].a;const s=this.m_velocities[t].v;let o=this.m_velocities[t].w;const n=it.MulSV(a,s,Is.s_translation);if(it.DotVV(n,n)>B){const t=x/n.Length();s.SelfMul(t)}const r=a*o;if(r*r>A){o*=S/j(r)}e.x+=a*s.x,e.y+=a*s.y,i+=a*o,this.m_positions[t].a=i,this.m_velocities[t].w=o}r.Reset();let _=!1;for(let t=0;t<s.positionIterations;++t){const t=h.SolvePositionConstraints();let e=!0;for(let i=0;i<this.m_jointCount;++i){const t=this.m_joints[i].SolvePositionConstraints(m);e=e&&t}if(t&&e){_=!0;break}}for(let t=0;t<this.m_bodyCount;++t){const e=this.m_bodies[t];e.m_sweep.c.Copy(this.m_positions[t].c),e.m_sweep.a=this.m_positions[t].a,e.m_linearVelocity.Copy(this.m_velocities[t].v),e.m_angularVelocity=this.m_velocities[t].w,e.SynchronizeTransform()}if(e.solvePosition=r.GetMilliseconds(),this.Report(h.m_velocityConstraints),n){let e=i;const s=F*F,o=T*T;for(let i=0;i<this.m_bodyCount;++i){const n=this.m_bodies[i];n.GetType()!==t.b2BodyType.b2_staticBody&&(!n.m_autoSleepFlag||n.m_angularVelocity*n.m_angularVelocity>o||it.DotVV(n.m_linearVelocity,n.m_linearVelocity)>s?(n.m_sleepTime=0,e=0):(n.m_sleepTime+=a,e=E(e,n.m_sleepTime)))}if(e>=D&&_)for(let t=0;t<this.m_bodyCount;++t){this.m_bodies[t].SetAwake(!1)}}}SolveTOI(t,e,i){for(let r=0;r<this.m_bodyCount;++r){const t=this.m_bodies[r];this.m_positions[r].c.Copy(t.m_sweep.c),this.m_positions[r].a=t.m_sweep.a,this.m_velocities[r].v.Copy(t.m_linearVelocity),this.m_velocities[r].w=t.m_angularVelocity}const s=Is.s_contactSolverDef;s.contacts=this.m_contacts,s.count=this.m_contactCount,s.step.Copy(t),s.positions=this.m_positions,s.velocities=this.m_velocities;const o=Is.s_contactSolver.Initialize(s);for(let r=0;r<t.positionIterations;++r){if(o.SolveTOIPositionConstraints(e,i))break}this.m_bodies[e].m_sweep.c0.Copy(this.m_positions[e].c),this.m_bodies[e].m_sweep.a0=this.m_positions[e].a,this.m_bodies[i].m_sweep.c0.Copy(this.m_positions[i].c),this.m_bodies[i].m_sweep.a0=this.m_positions[i].a,o.InitializeVelocityConstraints();for(let r=0;r<t.velocityIterations;++r)o.SolveVelocityConstraints();const n=t.dt;for(let r=0;r<this.m_bodyCount;++r){const t=this.m_positions[r].c;let e=this.m_positions[r].a;const i=this.m_velocities[r].v;let s=this.m_velocities[r].w;const o=it.MulSV(n,i,Is.s_translation);if(it.DotVV(o,o)>B){const t=x/o.Length();i.SelfMul(t)}const a=n*s;if(a*a>A){s*=S/j(a)}t.SelfMulAdd(n,i),e+=n*s,this.m_positions[r].a=e,this.m_velocities[r].w=s;const m=this.m_bodies[r];m.m_sweep.c.Copy(t),m.m_sweep.a=e,m.m_linearVelocity.Copy(i),m.m_angularVelocity=s,m.SynchronizeTransform()}this.Report(o.m_velocityConstraints)}Report(t){if(null!==this.m_listener)for(let e=0;e<this.m_contactCount;++e){const i=this.m_contacts[e];if(!i)continue;const s=t[e],o=Is.s_impulse;o.count=s.pointCount;for(let t=0;t<s.pointCount;++t)o.normalImpulses[t]=s.points[t].normalImpulse,o.tangentImpulses[t]=s.points[t].tangentImpulse;this.m_listener.PostSolve(i,o)}}}var Gs,Ds;Is.s_timer=new ct,Is.s_solverData=new bs,Is.s_contactSolverDef=new ws,Is.s_contactSolver=new Ps,Is.s_translation=new it,Is.s_impulse=new us,(Gs=t.b2ParticleFlag||(t.b2ParticleFlag={}))[Gs.b2_waterParticle=0]="b2_waterParticle",Gs[Gs.b2_zombieParticle=2]="b2_zombieParticle",Gs[Gs.b2_wallParticle=4]="b2_wallParticle",Gs[Gs.b2_springParticle=8]="b2_springParticle",Gs[Gs.b2_elasticParticle=16]="b2_elasticParticle",Gs[Gs.b2_viscousParticle=32]="b2_viscousParticle",Gs[Gs.b2_powderParticle=64]="b2_powderParticle",Gs[Gs.b2_tensileParticle=128]="b2_tensileParticle",Gs[Gs.b2_colorMixingParticle=256]="b2_colorMixingParticle",Gs[Gs.b2_destructionListenerParticle=512]="b2_destructionListenerParticle",Gs[Gs.b2_barrierParticle=1024]="b2_barrierParticle",Gs[Gs.b2_staticPressureParticle=2048]="b2_staticPressureParticle",Gs[Gs.b2_reactiveParticle=4096]="b2_reactiveParticle",Gs[Gs.b2_repulsiveParticle=8192]="b2_repulsiveParticle",Gs[Gs.b2_fixtureContactListenerParticle=16384]="b2_fixtureContactListenerParticle",Gs[Gs.b2_particleContactListenerParticle=32768]="b2_particleContactListenerParticle",Gs[Gs.b2_fixtureContactFilterParticle=65536]="b2_fixtureContactFilterParticle",Gs[Gs.b2_particleContactFilterParticle=131072]="b2_particleContactFilterParticle";class Fs{constructor(){this.flags=0,this.position=new it,this.velocity=new it,this.color=new ht(0,0,0,0),this.lifetime=0,this.userData=null,this.group=null}}function Ts(t,e,i){return X(Math.ceil(Math.sqrt(t/(.01*e))*i),1,8)}class Ls{constructor(){this.m_index=V}GetIndex(){return this.m_index}SetIndex(t){this.m_index=t}}(Ds=t.b2ParticleGroupFlag||(t.b2ParticleGroupFlag={}))[Ds.b2_solidParticleGroup=1]="b2_solidParticleGroup",Ds[Ds.b2_rigidParticleGroup=2]="b2_rigidParticleGroup",Ds[Ds.b2_particleGroupCanBeEmpty=4]="b2_particleGroupCanBeEmpty",Ds[Ds.b2_particleGroupWillBeDestroyed=8]="b2_particleGroupWillBeDestroyed",Ds[Ds.b2_particleGroupNeedsUpdateDepth=16]="b2_particleGroupNeedsUpdateDepth",Ds[Ds.b2_particleGroupInternalMask=24]="b2_particleGroupInternalMask";class Rs{constructor(){this.flags=0,this.groupFlags=0,this.position=new it,this.angle=0,this.linearVelocity=new it,this.angularVelocity=0,this.color=new ht,this.strength=1,this.shapeCount=0,this.stride=0,this.particleCount=0,this.lifetime=0,this.userData=null,this.group=null}}class ks{constructor(t){this.m_firstIndex=0,this.m_lastIndex=0,this.m_groupFlags=0,this.m_strength=1,this.m_prev=null,this.m_next=null,this.m_timestamp=-1,this.m_mass=0,this.m_inertia=0,this.m_center=new it,this.m_linearVelocity=new it,this.m_angularVelocity=0,this.m_transform=new mt,this.m_userData=null,this.m_system=t}GetNext(){return this.m_next}GetParticleSystem(){return this.m_system}GetParticleCount(){return this.m_lastIndex-this.m_firstIndex}GetBufferIndex(){return this.m_firstIndex}ContainsParticle(t){return this.m_firstIndex<=t&&t<this.m_lastIndex}GetAllParticleFlags(){if(!this.m_system.m_flagsBuffer.data)throw new Error;let t=0;for(let e=this.m_firstIndex;e<this.m_lastIndex;e++)t|=this.m_system.m_flagsBuffer.data[e];return t}GetGroupFlags(){return this.m_groupFlags}SetGroupFlags(e){e|=this.m_groupFlags&t.b2ParticleGroupFlag.b2_particleGroupInternalMask,this.m_system.SetGroupFlags(this,e)}GetMass(){return this.UpdateStatistics(),this.m_mass}GetInertia(){return this.UpdateStatistics(),this.m_inertia}GetCenter(){return this.UpdateStatistics(),this.m_center}GetLinearVelocity(){return this.UpdateStatistics(),this.m_linearVelocity}GetAngularVelocity(){return this.UpdateStatistics(),this.m_angularVelocity}GetTransform(){return this.m_transform}GetPosition(){return this.m_transform.p}GetAngle(){return this.m_transform.q.GetAngle()}GetLinearVelocityFromWorldPoint(t,e){const i=ks.GetLinearVelocityFromWorldPoint_s_t0;return this.UpdateStatistics(),it.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,it.SubVV(t,this.m_center,i),e)}GetUserData(){return this.m_userData}SetUserData(t){this.m_userData=t}ApplyForce(t){this.m_system.ApplyForce(this.m_firstIndex,this.m_lastIndex,t)}ApplyLinearImpulse(t){this.m_system.ApplyLinearImpulse(this.m_firstIndex,this.m_lastIndex,t)}DestroyParticles(t){if(this.m_system.m_world.IsLocked())throw new Error;for(let e=this.m_firstIndex;e<this.m_lastIndex;e++)this.m_system.DestroyParticle(e,t)}UpdateStatistics(){if(!this.m_system.m_positionBuffer.data)throw new Error;if(!this.m_system.m_velocityBuffer.data)throw new Error;const t=new it,e=new it;if(this.m_timestamp!==this.m_system.m_timestamp){const i=this.m_system.GetParticleMass();this.m_mass=i*(this.m_lastIndex-this.m_firstIndex),this.m_center.SetZero(),this.m_linearVelocity.SetZero();for(let t=this.m_firstIndex;t<this.m_lastIndex;t++)this.m_center.SelfMulAdd(i,this.m_system.m_positionBuffer.data[t]),this.m_linearVelocity.SelfMulAdd(i,this.m_system.m_velocityBuffer.data[t]);if(this.m_mass>0){const t=1/this.m_mass;this.m_center.SelfMul(t),this.m_linearVelocity.SelfMul(t)}this.m_inertia=0,this.m_angularVelocity=0;for(let s=this.m_firstIndex;s<this.m_lastIndex;s++)it.SubVV(this.m_system.m_positionBuffer.data[s],this.m_center,t),it.SubVV(this.m_system.m_velocityBuffer.data[s],this.m_linearVelocity,e),this.m_inertia+=i*it.DotVV(t,t),this.m_angularVelocity+=i*it.CrossVV(t,e);this.m_inertia>0&&(this.m_angularVelocity*=1/this.m_inertia),this.m_timestamp=this.m_system.m_timestamp}}}ks.GetLinearVelocityFromWorldPoint_s_t0=new it;class qs{constructor(t){this.m_front=0,this.m_back=0,this.m_capacity=0,this.m_buffer=k(t,t=>null),this.m_capacity=t}Push(t){if(this.m_back>=this.m_capacity){for(let t=this.m_front;t<this.m_back;t++)this.m_buffer[t-this.m_front]=this.m_buffer[t];this.m_back-=this.m_front,this.m_front=0,this.m_back>=this.m_capacity&&(this.m_capacity>0?(this.m_buffer.concat(k(this.m_capacity,t=>null)),this.m_capacity*=2):(this.m_buffer.concat(k(1,t=>null)),this.m_capacity=1))}this.m_buffer[this.m_back]=t,this.m_back++}Pop(){this.m_buffer[this.m_front]=null,this.m_front++}Empty(){return this.m_front===this.m_back}Front(){const t=this.m_buffer[this.m_front];if(!t)throw new Error;return t}}class zs{constructor(t){this.m_generatorCapacity=0,this.m_generatorCount=0,this.m_countX=0,this.m_countY=0,this.m_diagram=[],this.m_generatorBuffer=k(t,t=>new Js),this.m_generatorCapacity=t}AddGenerator(t,e,i){const s=this.m_generatorBuffer[this.m_generatorCount++];s.center.Copy(t),s.tag=e,s.necessary=i}Generate(t,e){const s=1/t,o=new it(+i,+i),n=new it(-i,-i);let r=0;for(let i=0;i<this.m_generatorCount;i++){const t=this.m_generatorBuffer[i];t.necessary&&(it.MinV(o,t.center,o),it.MaxV(n,t.center,n),++r)}if(0===r)return this.m_countX=0,void(this.m_countY=0);o.x-=e,o.y-=e,n.x+=e,n.y+=e,this.m_countX=1+Math.floor(s*(n.x-o.x)),this.m_countY=1+Math.floor(s*(n.y-o.y)),this.m_diagram=[];const a=new qs(4*this.m_countX*this.m_countY);for(let i=0;i<this.m_generatorCount;i++){const t=this.m_generatorBuffer[i];t.center.SelfSub(o).SelfMul(s);const e=Math.floor(t.center.x),n=Math.floor(t.center.y);e>=0&&n>=0&&e<this.m_countX&&n<this.m_countY&&a.Push(new Ns(e,n,e+n*this.m_countX,t))}for(;!a.Empty();){const t=a.Front(),e=t.m_x,i=t.m_y,s=t.m_i,o=t.m_generator;a.Pop(),this.m_diagram[s]||(this.m_diagram[s]=o,e>0&&a.Push(new Ns(e-1,i,s-1,o)),i>0&&a.Push(new Ns(e,i-1,s-this.m_countX,o)),e<this.m_countX-1&&a.Push(new Ns(e+1,i,s+1,o)),i<this.m_countY-1&&a.Push(new Ns(e,i+1,s+this.m_countX,o)))}for(let i=0;i<this.m_countY;i++)for(let t=0;t<this.m_countX-1;t++){const e=t+i*this.m_countX,s=this.m_diagram[e],o=this.m_diagram[e+1];s!==o&&(a.Push(new Ns(t,i,e,o)),a.Push(new Ns(t+1,i,e+1,s)))}for(let i=0;i<this.m_countY-1;i++)for(let t=0;t<this.m_countX;t++){const e=t+i*this.m_countX,s=this.m_diagram[e],o=this.m_diagram[e+this.m_countX];s!==o&&(a.Push(new Ns(t,i,e,o)),a.Push(new Ns(t,i+1,e+this.m_countX,s)))}for(;!a.Empty();){const t=a.Front(),e=t.m_x,i=t.m_y,s=t.m_i,o=t.m_generator;a.Pop();const n=this.m_diagram[s],r=o;if(n!==r){const t=n.center.x-e,o=n.center.y-i,m=r.center.x-e,l=r.center.y-i;t*t+o*o>m*m+l*l&&(this.m_diagram[s]=r,e>0&&a.Push(new Ns(e-1,i,s-1,r)),i>0&&a.Push(new Ns(e,i-1,s-this.m_countX,r)),e<this.m_countX-1&&a.Push(new Ns(e+1,i,s+1,r)),i<this.m_countY-1&&a.Push(new Ns(e,i+1,s+this.m_countX,r)))}}}GetNodes(t){for(let e=0;e<this.m_countY-1;e++)for(let i=0;i<this.m_countX-1;i++){const s=i+e*this.m_countX,o=this.m_diagram[s],n=this.m_diagram[s+1],r=this.m_diagram[s+this.m_countX],a=this.m_diagram[s+1+this.m_countX];n!==r&&(o!==n&&o!==r&&(o.necessary||n.necessary||r.necessary)&&t(o.tag,n.tag,r.tag),a!==n&&a!==r&&(o.necessary||n.necessary||r.necessary)&&t(n.tag,a.tag,r.tag))}}}class Js{constructor(){this.center=new it,this.tag=0,this.necessary=!1}}class Ns{constructor(t,e,i,s){this.m_x=t,this.m_y=e,this.m_i=i,this.m_generator=s}}function js(t,e,i){const s=t[e];t[e]=t[i],t[i]=s}function Es(t,e){return t<e}function Os(t,e=0,i=t.length-e,s=Es){let o=e;const n=[];let r=0;for(;;){for(;o+1<i;i++){const e=t[o+Math.floor(Math.random()*(i-o))];n[r++]=i;for(let n=o-1;;){for(;s(t[++n],e););for(;s(e,t[--i]););if(n>=i)break;js(t,n,i)}}if(0===r)break;o=i,i=n[--r]}return t}function Xs(t,e=0,i=t.length-e,s=Es){return Os(t,e,i,s)}function Us(t,e,i=t.length){let s=0;for(let o=0;o<i;++o)e(t[o])||(o!==s?js(t,s++,o):++s);return s}function Zs(t,e,i,s,o){let n=i-e;for(;n>0;){const i=Math.floor(n/2);let r=e+i;o(t[r],s)?(e=++r,n-=i+1):n=i}return e}function Ws(t,e,i,s,o){let n=i-e;for(;n>0;){const i=Math.floor(n/2);let r=e+i;o(s,t[r])?n=i:(e=++r,n-=i+1)}return e}function Qs(t,e,i,s){let o=i;for(;e!==o;)js(t,e++,o++),o===s?o=i:e===i&&(i=o)}class Hs{constructor(t){this.data=[],this.count=0,this.capacity=0,this.allocator=t}Append(){return this.count>=this.capacity&&this.Grow(),this.count++}Reserve(t){if(!(this.capacity>=t)){for(let e=this.capacity;e<t;++e)this.data[e]=this.allocator();this.capacity=t}}Grow(){const t=this.capacity?2*this.capacity:I;this.Reserve(t)}Free(){0!==this.data.length&&(this.data=[],this.capacity=0,this.count=0)}Shorten(t){}Data(){return this.data}GetCount(){return this.count}SetCount(t){this.count=t}GetCapacity(){return this.capacity}RemoveIf(t){this.count=Us(this.data,t,this.count)}Unique(t){this.count=function(t,e,i,s){if(e===i)return i;let o=e;for(;++e!==i;)s(t[o],t[e])||js(t,++o,e);return++o}(this.data,0,this.count,t)}}class Ys extends ps{constructor(t){super(),this.m_system=t}ShouldQueryParticleSystem(t){return!1}ReportFixture(t){if(t.IsSensor())return!0;const e=t.GetShape().GetChildCount();for(let i=0;i<e;i++){const e=t.GetAABB(i),s=this.m_system.GetInsideBoundsEnumerator(e);let o;for(;(o=s.GetNext())>=0;)this.ReportFixtureAndParticle(t,i,o)}return!0}ReportParticle(t,e){return!1}ReportFixtureAndParticle(t,e,i){}}class Ks{constructor(){this.indexA=0,this.indexB=0,this.weight=0,this.normal=new it,this.flags=0}SetIndices(t,e){this.indexA=t,this.indexB=e}SetWeight(t){this.weight=t}SetNormal(t){this.normal.Copy(t)}SetFlags(t){this.flags=t}GetIndexA(){return this.indexA}GetIndexB(){return this.indexB}GetWeight(){return this.weight}GetNormal(){return this.normal}GetFlags(){return this.flags}IsEqual(t){return this.indexA===t.indexA&&this.indexB===t.indexB&&this.flags===t.flags&&this.weight===t.weight&&this.normal.x===t.normal.x&&this.normal.y===t.normal.y}IsNotEqual(t){return!this.IsEqual(t)}ApproximatelyEqual(t){return this.indexA===t.indexA&&this.indexB===t.indexB&&this.flags===t.flags&&j(this.weight-t.weight)<.01&&it.DistanceSquaredVV(this.normal,t.normal)<1e-4}}class $s{constructor(){this.index=0,this.weight=0,this.normal=new it,this.mass=0}}class to{constructor(){this.indexA=0,this.indexB=0,this.flags=0,this.strength=0,this.distance=0}}class eo{constructor(){this.indexA=0,this.indexB=0,this.indexC=0,this.flags=0,this.strength=0,this.pa=new it(0,0),this.pb=new it(0,0),this.pc=new it(0,0),this.ka=0,this.kb=0,this.kc=0,this.s=0}}class io{constructor(){this.strictContactCheck=!1,this.density=1,this.gravityScale=1,this.radius=1,this.maxCount=0,this.pressureStrength=.005,this.dampingStrength=1,this.elasticStrength=.25,this.springStrength=.25,this.viscousStrength=.25,this.surfaceTensionPressureStrength=.2,this.surfaceTensionNormalStrength=.2,this.repulsiveStrength=1,this.powderStrength=.5,this.ejectionStrength=.5,this.staticPressureStrength=.2,this.staticPressureRelaxation=.2,this.staticPressureIterations=8,this.colorMixingStrength=.5,this.destroyByAge=!0,this.lifetimeGranularity=1/60}Copy(t){return this.strictContactCheck=t.strictContactCheck,this.density=t.density,this.gravityScale=t.gravityScale,this.radius=t.radius,this.maxCount=t.maxCount,this.pressureStrength=t.pressureStrength,this.dampingStrength=t.dampingStrength,this.elasticStrength=t.elasticStrength,this.springStrength=t.springStrength,this.viscousStrength=t.viscousStrength,this.surfaceTensionPressureStrength=t.surfaceTensionPressureStrength,this.surfaceTensionNormalStrength=t.surfaceTensionNormalStrength,this.repulsiveStrength=t.repulsiveStrength,this.powderStrength=t.powderStrength,this.ejectionStrength=t.ejectionStrength,this.staticPressureStrength=t.staticPressureStrength,this.staticPressureRelaxation=t.staticPressureRelaxation,this.staticPressureIterations=t.staticPressureIterations,this.colorMixingStrength=t.colorMixingStrength,this.destroyByAge=t.destroyByAge,this.lifetimeGranularity=t.lifetimeGranularity,this}Clone(){return(new io).Copy(this)}}class so{constructor(t,e){this.m_paused=!1,this.m_timestamp=0,this.m_allParticleFlags=0,this.m_needsUpdateAllParticleFlags=!1,this.m_allGroupFlags=0,this.m_needsUpdateAllGroupFlags=!1,this.m_hasForce=!1,this.m_iterationIndex=0,this.m_inverseDensity=0,this.m_particleDiameter=0,this.m_inverseDiameter=0,this.m_squaredDiameter=0,this.m_count=0,this.m_internalAllocatedCapacity=0,this.m_handleIndexBuffer=new oo,this.m_flagsBuffer=new oo,this.m_positionBuffer=new oo,this.m_velocityBuffer=new oo,this.m_forceBuffer=[],this.m_weightBuffer=[],this.m_staticPressureBuffer=[],this.m_accumulationBuffer=[],this.m_accumulation2Buffer=[],this.m_depthBuffer=[],this.m_colorBuffer=new oo,this.m_groupBuffer=[],this.m_userDataBuffer=new oo,this.m_stuckThreshold=0,this.m_lastBodyContactStepBuffer=new oo,this.m_bodyContactCountBuffer=new oo,this.m_consecutiveContactStepsBuffer=new oo,this.m_stuckParticleBuffer=new Hs(()=>0),this.m_proxyBuffer=new Hs(()=>new no),this.m_contactBuffer=new Hs(()=>new Ks),this.m_bodyContactBuffer=new Hs(()=>new $s),this.m_pairBuffer=new Hs(()=>new to),this.m_triadBuffer=new Hs(()=>new eo),this.m_expirationTimeBuffer=new oo,this.m_indexByExpirationTimeBuffer=new oo,this.m_timeElapsed=0,this.m_expirationTimeBufferRequiresSorting=!1,this.m_groupCount=0,this.m_groupList=null,this.m_def=new io,this.m_prev=null,this.m_next=null,this.UpdateBodyContacts_callback=null,this.SolveCollision_callback=null,this.SetStrictContactCheck(t.strictContactCheck),this.SetDensity(t.density),this.SetGravityScale(t.gravityScale),this.SetRadius(t.radius),this.SetMaxParticleCount(t.maxCount),this.m_def=t.Clone(),this.m_world=e,this.SetDestructionByAge(this.m_def.destroyByAge)}static computeTag(t,e){return(e+so.yOffset>>>0<<so.yShift)+(so.xScale*t+so.xOffset>>>0)>>>0}static computeRelativeTag(t,e,i){return t+(i<<so.yShift)+(e<<so.xShift)>>>0}Drop(){for(;this.m_groupList;)this.DestroyParticleGroup(this.m_groupList);this.FreeUserOverridableBuffer(this.m_handleIndexBuffer),this.FreeUserOverridableBuffer(this.m_flagsBuffer),this.FreeUserOverridableBuffer(this.m_lastBodyContactStepBuffer),this.FreeUserOverridableBuffer(this.m_bodyContactCountBuffer),this.FreeUserOverridableBuffer(this.m_consecutiveContactStepsBuffer),this.FreeUserOverridableBuffer(this.m_positionBuffer),this.FreeUserOverridableBuffer(this.m_velocityBuffer),this.FreeUserOverridableBuffer(this.m_colorBuffer),this.FreeUserOverridableBuffer(this.m_userDataBuffer),this.FreeUserOverridableBuffer(this.m_expirationTimeBuffer),this.FreeUserOverridableBuffer(this.m_indexByExpirationTimeBuffer),this.FreeBuffer(this.m_forceBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_weightBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_staticPressureBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulationBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulation2Buffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_depthBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_groupBuffer,this.m_internalAllocatedCapacity)}CreateParticle(t){if(this.m_world.IsLocked())throw new Error;if(this.m_count>=this.m_internalAllocatedCapacity){const t=this.m_count?2*this.m_count:I;this.ReallocateInternalAllocatedBuffers(t)}if(this.m_count>=this.m_internalAllocatedCapacity){if(!this.m_def.destroyByAge)return V;this.DestroyOldestParticle(0,!1),this.SolveZombie()}const i=this.m_count++;this.m_flagsBuffer.data[i]=0,this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[i]=0),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[i]=0),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[i]=0),this.m_positionBuffer.data[i]=(this.m_positionBuffer.data[i]||new it).Copy(e(t.position,it.ZERO)),this.m_velocityBuffer.data[i]=(this.m_velocityBuffer.data[i]||new it).Copy(e(t.velocity,it.ZERO)),this.m_weightBuffer[i]=0,this.m_forceBuffer[i]=(this.m_forceBuffer[i]||new it).SetZero(),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[i]=0),this.m_depthBuffer&&(this.m_depthBuffer[i]=0);const s=(new ht).Copy(e(t.color,ht.ZERO));!this.m_colorBuffer.data&&s.IsZero()||(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data[i]=(this.m_colorBuffer.data[i]||new ht).Copy(s)),(this.m_userDataBuffer.data||t.userData)&&(this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data[i]=t.userData),this.m_handleIndexBuffer.data&&(this.m_handleIndexBuffer.data[i]=null);const o=this.m_proxyBuffer.data[this.m_proxyBuffer.Append()],n=e(t.lifetime,0),r=n>0;(this.m_expirationTimeBuffer.data||r)&&(this.SetParticleLifetime(i,r?n:this.ExpirationTimeToLifetime(-this.GetQuantizedTimeElapsed())),this.m_indexByExpirationTimeBuffer.data[i]=i),o.index=i;const a=e(t.group,null);return this.m_groupBuffer[i]=a,a&&(a.m_firstIndex<a.m_lastIndex?(this.RotateBuffer(a.m_firstIndex,a.m_lastIndex,i),a.m_lastIndex=i+1):(a.m_firstIndex=i,a.m_lastIndex=i+1)),this.SetParticleFlags(i,e(t.flags,0)),i}GetParticleHandleFromIndex(t){this.m_handleIndexBuffer.data=this.RequestBuffer(this.m_handleIndexBuffer.data);let e=this.m_handleIndexBuffer.data[t];return e||((e=new Ls).SetIndex(t),this.m_handleIndexBuffer.data[t]=e,e)}DestroyParticle(e,i=!1){let s=t.b2ParticleFlag.b2_zombieParticle;i&&(s|=t.b2ParticleFlag.b2_destructionListenerParticle),this.SetParticleFlags(e,this.m_flagsBuffer.data[e]|s)}DestroyOldestParticle(t,e=!1){const i=this.GetParticleCount(),s=this.m_indexByExpirationTimeBuffer.data[i-(t+1)],o=this.m_indexByExpirationTimeBuffer.data[t];this.DestroyParticle(this.m_expirationTimeBuffer.data[s]>0?s:o,e)}DestroyParticlesInShape(t,e,i=!1){const s=so.DestroyParticlesInShape_s_aabb;if(this.m_world.IsLocked())throw new Error;const o=new co(this,t,e,i),n=s;return t.ComputeAABB(n,e,0),this.m_world.QueryAABB(o,n),o.Destroyed()}CreateParticleGroup(t){const i=so.CreateParticleGroup_s_transform;if(this.m_world.IsLocked())throw new Error;const s=i;s.SetPositionAngle(e(t.position,it.ZERO),e(t.angle,0));const o=this.m_count;if(t.shape&&this.CreateParticlesWithShapeForGroup(t.shape,t,s),t.shapes&&this.CreateParticlesWithShapesForGroup(t.shapes,e(t.shapeCount,t.shapes.length),t,s),t.positionData){const i=e(t.particleCount,t.positionData.length);for(let e=0;e<i;e++){const i=t.positionData[e];this.CreateParticleForGroup(t,s,i)}}const n=this.m_count;let r=new ks(this);r.m_firstIndex=o,r.m_lastIndex=n,r.m_strength=e(t.strength,1),r.m_userData=t.userData,r.m_transform.Copy(s),r.m_prev=null,r.m_next=this.m_groupList,this.m_groupList&&(this.m_groupList.m_prev=r),this.m_groupList=r,++this.m_groupCount;for(let e=o;e<n;e++)this.m_groupBuffer[e]=r;this.SetGroupFlags(r,e(t.groupFlags,0));const a=new _o;return this.UpdateContacts(!0),this.UpdatePairsAndTriads(o,n,a),t.group&&(this.JoinParticleGroups(t.group,r),r=t.group),r}JoinParticleGroups(t,e){if(this.m_world.IsLocked())throw new Error;this.RotateBuffer(e.m_firstIndex,e.m_lastIndex,this.m_count),this.RotateBuffer(t.m_firstIndex,t.m_lastIndex,e.m_firstIndex);const i=new uo(e.m_firstIndex);this.UpdateContacts(!0),this.UpdatePairsAndTriads(t.m_firstIndex,e.m_lastIndex,i);for(let o=e.m_firstIndex;o<e.m_lastIndex;o++)this.m_groupBuffer[o]=t;const s=t.m_groupFlags|e.m_groupFlags;this.SetGroupFlags(t,s),t.m_lastIndex=e.m_lastIndex,e.m_firstIndex=e.m_lastIndex,this.DestroyParticleGroup(e)}SplitParticleGroup(t){this.UpdateContacts(!0);const e=k(t.GetParticleCount(),t=>new ao);so.InitializeParticleLists(t,e),this.MergeParticleListsInContact(t,e);const i=so.FindLongestParticleList(t,e);this.MergeZombieParticleListNodes(t,e,i),this.CreateParticleGroupsFromParticleList(t,e,i),this.UpdatePairsAndTriadsWithParticleList(t,e)}GetParticleGroupList(){return this.m_groupList}GetParticleGroupCount(){return this.m_groupCount}GetParticleCount(){return this.m_count}GetMaxParticleCount(){return this.m_def.maxCount}SetMaxParticleCount(t){this.m_def.maxCount=t}GetAllParticleFlags(){return this.m_allParticleFlags}GetAllGroupFlags(){return this.m_allGroupFlags}SetPaused(t){this.m_paused=t}GetPaused(){return this.m_paused}SetDensity(t){this.m_def.density=t,this.m_inverseDensity=1/this.m_def.density}GetDensity(){return this.m_def.density}SetGravityScale(t){this.m_def.gravityScale=t}GetGravityScale(){return this.m_def.gravityScale}SetDamping(t){this.m_def.dampingStrength=t}GetDamping(){return this.m_def.dampingStrength}SetStaticPressureIterations(t){this.m_def.staticPressureIterations=t}GetStaticPressureIterations(){return this.m_def.staticPressureIterations}SetRadius(t){this.m_particleDiameter=2*t,this.m_squaredDiameter=this.m_particleDiameter*this.m_particleDiameter,this.m_inverseDiameter=1/this.m_particleDiameter}GetRadius(){return this.m_particleDiameter/2}GetPositionBuffer(){return this.m_positionBuffer.data}GetVelocityBuffer(){return this.m_velocityBuffer.data}GetColorBuffer(){return this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data}GetGroupBuffer(){return this.m_groupBuffer}GetWeightBuffer(){return this.m_weightBuffer}GetUserDataBuffer(){return this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data}GetFlagsBuffer(){return this.m_flagsBuffer.data}SetParticleFlags(e,i){this.m_flagsBuffer.data[e]&~i&&(this.m_needsUpdateAllParticleFlags=!0),~this.m_allParticleFlags&i&&(i&t.b2ParticleFlag.b2_tensileParticle&&(this.m_accumulation2Buffer=this.RequestBuffer(this.m_accumulation2Buffer)),i&t.b2ParticleFlag.b2_colorMixingParticle&&(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data)),this.m_allParticleFlags|=i),this.m_flagsBuffer.data[e]=i}GetParticleFlags(t){return this.m_flagsBuffer.data[t]}SetFlagsBuffer(t){this.SetUserOverridableBuffer(this.m_flagsBuffer,t)}SetPositionBuffer(t){if(t instanceof Float32Array){if(t.length%2!=0)throw new Error;const e=t.length/2,i=new Array(e);for(let s=0;s<e;++s)i[s]=new it(t.subarray(2*s,2*s+2));t=i}this.SetUserOverridableBuffer(this.m_positionBuffer,t)}SetVelocityBuffer(t){if(t instanceof Float32Array){if(t.length%2!=0)throw new Error;const e=t.length/2,i=new Array(e);for(let s=0;s<e;++s)i[s]=new it(t.subarray(2*s,2*s+2));t=i}this.SetUserOverridableBuffer(this.m_velocityBuffer,t)}SetColorBuffer(t){if(t instanceof Float32Array){if(t.length%4!=0)throw new Error;const e=t.length/4,i=new Array(e);for(let s=0;s<e;++s)i[s]=new ht(t.subarray(4*s,4*s+4));t=i}this.SetUserOverridableBuffer(this.m_colorBuffer,t)}SetUserDataBuffer(t){this.SetUserOverridableBuffer(this.m_userDataBuffer,t)}GetContacts(){return this.m_contactBuffer.data}GetContactCount(){return this.m_contactBuffer.count}GetBodyContacts(){return this.m_bodyContactBuffer.data}GetBodyContactCount(){return this.m_bodyContactBuffer.count}GetPairs(){return this.m_pairBuffer.data}GetPairCount(){return this.m_pairBuffer.count}GetTriads(){return this.m_triadBuffer.data}GetTriadCount(){return this.m_triadBuffer.count}SetStuckThreshold(t){this.m_stuckThreshold=t,t>0&&(this.m_lastBodyContactStepBuffer.data=this.RequestBuffer(this.m_lastBodyContactStepBuffer.data),this.m_bodyContactCountBuffer.data=this.RequestBuffer(this.m_bodyContactCountBuffer.data),this.m_consecutiveContactStepsBuffer.data=this.RequestBuffer(this.m_consecutiveContactStepsBuffer.data))}GetStuckCandidates(){return this.m_stuckParticleBuffer.Data()}GetStuckCandidateCount(){return this.m_stuckParticleBuffer.GetCount()}ComputeCollisionEnergy(){const t=so.ComputeCollisionEnergy_s_v,e=this.m_velocityBuffer.data;let i=0;for(let s=0;s<this.m_contactBuffer.count;s++){const o=this.m_contactBuffer.data[s],n=o.indexA,r=o.indexB,a=o.normal,m=it.SubVV(e[r],e[n],t),l=it.DotVV(m,a);l<0&&(i+=l*l)}return.5*this.GetParticleMass()*i}SetStrictContactCheck(t){this.m_def.strictContactCheck=t}GetStrictContactCheck(){return this.m_def.strictContactCheck}SetParticleLifetime(t,e){const i=null===this.m_indexByExpirationTimeBuffer.data;if(this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),i){const t=this.GetParticleCount();for(let e=0;e<t;++e)this.m_indexByExpirationTimeBuffer.data[e]=e}const s=e/this.m_def.lifetimeGranularity,o=s>0?this.GetQuantizedTimeElapsed()+s:s;o!==this.m_expirationTimeBuffer.data[t]&&(this.m_expirationTimeBuffer.data[t]=o,this.m_expirationTimeBufferRequiresSorting=!0)}GetParticleLifetime(t){return this.ExpirationTimeToLifetime(this.GetExpirationTimeBuffer()[t])}SetDestructionByAge(t){t&&this.GetExpirationTimeBuffer(),this.m_def.destroyByAge=t}GetDestructionByAge(){return this.m_def.destroyByAge}GetExpirationTimeBuffer(){return this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_expirationTimeBuffer.data}ExpirationTimeToLifetime(t){return(t>0?t-this.GetQuantizedTimeElapsed():t)*this.m_def.lifetimeGranularity}GetIndexByExpirationTimeBuffer(){return this.GetParticleCount()?this.SetParticleLifetime(0,this.GetParticleLifetime(0)):this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),this.m_indexByExpirationTimeBuffer.data}ParticleApplyLinearImpulse(t,e){this.ApplyLinearImpulse(t,t+1,e)}ApplyLinearImpulse(t,e,i){const s=this.m_velocityBuffer.data,o=(e-t)*this.GetParticleMass(),n=(new it).Copy(i).SelfMul(1/o);for(let r=t;r<e;r++)s[r].SelfAdd(n)}static IsSignificantForce(t){return 0!==t.x||0!==t.y}ParticleApplyForce(t,e){so.IsSignificantForce(e)&&this.ForceCanBeApplied(this.m_flagsBuffer.data[t])&&(this.PrepareForceBuffer(),this.m_forceBuffer[t].SelfAdd(e))}ApplyForce(t,e,i){const s=(new it).Copy(i).SelfMul(1/(e-t));if(so.IsSignificantForce(s)){this.PrepareForceBuffer();for(let i=t;i<e;i++)this.m_forceBuffer[i].SelfAdd(s)}}GetNext(){return this.m_next}QueryAABB(t,e){if(0===this.m_proxyBuffer.count)return;const i=this.m_proxyBuffer.count,s=Zs(this.m_proxyBuffer.data,0,i,so.computeTag(this.m_inverseDiameter*e.lowerBound.x,this.m_inverseDiameter*e.lowerBound.y),no.CompareProxyTag),o=Ws(this.m_proxyBuffer.data,s,i,so.computeTag(this.m_inverseDiameter*e.upperBound.x,this.m_inverseDiameter*e.upperBound.y),no.CompareTagProxy),n=this.m_positionBuffer.data;for(let r=s;r<o;++r){const i=this.m_proxyBuffer.data[r].index,s=n[i];if(e.lowerBound.x<s.x&&s.x<e.upperBound.x&&e.lowerBound.y<s.y&&s.y<e.upperBound.y&&!t.ReportParticle(this,i))break}}QueryShapeAABB(t,e,i,s=0){const o=so.QueryShapeAABB_s_aabb;e.ComputeAABB(o,i,s),this.QueryAABB(t,o)}QueryPointAABB(t,e,i=h){const s=so.QueryPointAABB_s_aabb;s.lowerBound.Set(e.x-i,e.y-i),s.upperBound.Set(e.x+i,e.y+i),this.QueryAABB(t,s)}RayCast(t,e,i){const s=so.RayCast_s_aabb,o=so.RayCast_s_p,n=so.RayCast_s_v,r=so.RayCast_s_n,a=so.RayCast_s_point;if(0===this.m_proxyBuffer.count)return;const m=this.m_positionBuffer.data,l=s;it.MinV(e,i,l.lowerBound),it.MaxV(e,i,l.upperBound);let h=1;const _=it.SubVV(i,e,n),c=it.DotVV(_,_),u=this.GetInsideBoundsEnumerator(l);let d;for(;(d=u.GetNext())>=0;){const i=it.SubVV(e,m[d],o),s=it.DotVV(i,_),n=s*s-c*(it.DotVV(i,i)-this.m_squaredDiameter);if(n>=0){const o=Q(n);let m=(-s-o)/c;if(m>h)continue;if(m<0&&((m=(-s+o)/c)<0||m>h))continue;const l=it.AddVMulSV(i,m,_,r);if(l.Normalize(),(h=E(h,t.ReportParticle(this,d,it.AddVMulSV(e,m,_,a),l,m)))<=0)break}}}ComputeAABB(t){const e=this.GetParticleCount();t.lowerBound.x=+i,t.lowerBound.y=+i,t.upperBound.x=-i,t.upperBound.y=-i;const s=this.m_positionBuffer.data;for(let i=0;i<e;i++){const e=s[i];it.MinV(t.lowerBound,e,t.lowerBound),it.MaxV(t.upperBound,e,t.upperBound)}t.lowerBound.x-=this.m_particleDiameter,t.lowerBound.y-=this.m_particleDiameter,t.upperBound.x+=this.m_particleDiameter,t.upperBound.y+=this.m_particleDiameter}FreeBuffer(t,e){null!==t&&(t.length=0)}FreeUserOverridableBuffer(t){0===t.userSuppliedCapacity&&this.FreeBuffer(t.data,this.m_internalAllocatedCapacity)}ReallocateBuffer3(t,e,i){if(i<=e)throw new Error;const s=t?t.slice():[];return s.length=i,s}ReallocateBuffer5(t,e,i,s,o){if(s<=i)throw new Error;if(e&&!(s<=e))throw new Error;return o&&!t||e||(t=this.ReallocateBuffer3(t,i,s)),t}ReallocateBuffer4(t,e,i,s){return this.ReallocateBuffer5(t.data,t.userSuppliedCapacity,e,i,s)}RequestBuffer(t){return t||(0===this.m_internalAllocatedCapacity&&this.ReallocateInternalAllocatedBuffers(I),(t=[]).length=this.m_internalAllocatedCapacity),t}ReallocateHandleBuffers(t){this.m_handleIndexBuffer.data=this.ReallocateBuffer4(this.m_handleIndexBuffer,this.m_internalAllocatedCapacity,t,!0)}ReallocateInternalAllocatedBuffers(t){function e(t,e){return e&&t>e?e:t}if(t=e(t,this.m_def.maxCount),t=e(t,this.m_flagsBuffer.userSuppliedCapacity),t=e(t,this.m_positionBuffer.userSuppliedCapacity),t=e(t,this.m_velocityBuffer.userSuppliedCapacity),t=e(t,this.m_colorBuffer.userSuppliedCapacity),t=e(t,this.m_userDataBuffer.userSuppliedCapacity),this.m_internalAllocatedCapacity<t){this.ReallocateHandleBuffers(t),this.m_flagsBuffer.data=this.ReallocateBuffer4(this.m_flagsBuffer,this.m_internalAllocatedCapacity,t,!1);const e=this.m_stuckThreshold>0;this.m_lastBodyContactStepBuffer.data=this.ReallocateBuffer4(this.m_lastBodyContactStepBuffer,this.m_internalAllocatedCapacity,t,e),this.m_bodyContactCountBuffer.data=this.ReallocateBuffer4(this.m_bodyContactCountBuffer,this.m_internalAllocatedCapacity,t,e),this.m_consecutiveContactStepsBuffer.data=this.ReallocateBuffer4(this.m_consecutiveContactStepsBuffer,this.m_internalAllocatedCapacity,t,e),this.m_positionBuffer.data=this.ReallocateBuffer4(this.m_positionBuffer,this.m_internalAllocatedCapacity,t,!1),this.m_velocityBuffer.data=this.ReallocateBuffer4(this.m_velocityBuffer,this.m_internalAllocatedCapacity,t,!1),this.m_forceBuffer=this.ReallocateBuffer5(this.m_forceBuffer,0,this.m_internalAllocatedCapacity,t,!1),this.m_weightBuffer=this.ReallocateBuffer5(this.m_weightBuffer,0,this.m_internalAllocatedCapacity,t,!1),this.m_staticPressureBuffer=this.ReallocateBuffer5(this.m_staticPressureBuffer,0,this.m_internalAllocatedCapacity,t,!0),this.m_accumulationBuffer=this.ReallocateBuffer5(this.m_accumulationBuffer,0,this.m_internalAllocatedCapacity,t,!1),this.m_accumulation2Buffer=this.ReallocateBuffer5(this.m_accumulation2Buffer,0,this.m_internalAllocatedCapacity,t,!0),this.m_depthBuffer=this.ReallocateBuffer5(this.m_depthBuffer,0,this.m_internalAllocatedCapacity,t,!0),this.m_colorBuffer.data=this.ReallocateBuffer4(this.m_colorBuffer,this.m_internalAllocatedCapacity,t,!0),this.m_groupBuffer=this.ReallocateBuffer5(this.m_groupBuffer,0,this.m_internalAllocatedCapacity,t,!1),this.m_userDataBuffer.data=this.ReallocateBuffer4(this.m_userDataBuffer,this.m_internalAllocatedCapacity,t,!0),this.m_expirationTimeBuffer.data=this.ReallocateBuffer4(this.m_expirationTimeBuffer,this.m_internalAllocatedCapacity,t,!0),this.m_indexByExpirationTimeBuffer.data=this.ReallocateBuffer4(this.m_indexByExpirationTimeBuffer,this.m_internalAllocatedCapacity,t,!1),this.m_internalAllocatedCapacity=t}}CreateParticleForGroup(t,i,s){const o=new Fs;o.flags=e(t.flags,0),mt.MulXV(i,s,o.position),it.AddVV(e(t.linearVelocity,it.ZERO),it.CrossSV(e(t.angularVelocity,0),it.SubVV(o.position,e(t.position,it.ZERO),it.s_t0),it.s_t0),o.velocity),o.color.Copy(e(t.color,ht.ZERO)),o.lifetime=e(t.lifetime,0),o.userData=t.userData,this.CreateParticle(o)}CreateParticlesStrokeShapeForGroup(i,s,o){const n=so.CreateParticlesStrokeShapeForGroup_s_edge,r=so.CreateParticlesStrokeShapeForGroup_s_d,a=so.CreateParticlesStrokeShapeForGroup_s_p;let m=e(s.stride,0);0===m&&(m=this.GetParticleStride());let l=0;const h=i.GetChildCount();for(let e=0;e<h;e++){let h=null;i.GetType()===t.b2ShapeType.e_edgeShape?h=i:(h=n,i.GetChildEdge(h,e));const _=it.SubVV(h.m_vertex2,h.m_vertex1,r),c=_.Length();for(;l<c;){const t=it.AddVMulSV(h.m_vertex1,l/c,_,a);this.CreateParticleForGroup(s,o,t),l+=m}l-=c}}CreateParticlesFillShapeForGroup(t,i,s){const o=so.CreateParticlesFillShapeForGroup_s_aabb,n=so.CreateParticlesFillShapeForGroup_s_p;let r=e(i.stride,0);0===r&&(r=this.GetParticleStride());const a=mt.IDENTITY,m=o;t.ComputeAABB(m,a,0);for(let e=Math.floor(m.lowerBound.y/r)*r;e<m.upperBound.y;e+=r)for(let o=Math.floor(m.lowerBound.x/r)*r;o<m.upperBound.x;o+=r){const r=n.Set(o,e);t.TestPoint(a,r)&&this.CreateParticleForGroup(i,s,r)}}CreateParticlesWithShapeForGroup(e,i,s){switch(e.GetType()){case t.b2ShapeType.e_edgeShape:case t.b2ShapeType.e_chainShape:this.CreateParticlesStrokeShapeForGroup(e,i,s);break;case t.b2ShapeType.e_polygonShape:case t.b2ShapeType.e_circleShape:this.CreateParticlesFillShapeForGroup(e,i,s)}}CreateParticlesWithShapesForGroup(t,e,i,s){const o=new po(t,e);this.CreateParticlesFillShapeForGroup(o,i,s)}CloneParticle(t,e){const i=new Fs;i.flags=this.m_flagsBuffer.data[t],i.position.Copy(this.m_positionBuffer.data[t]),i.velocity.Copy(this.m_velocityBuffer.data[t]),this.m_colorBuffer.data&&i.color.Copy(this.m_colorBuffer.data[t]),this.m_userDataBuffer.data&&(i.userData=this.m_userDataBuffer.data[t]),i.group=e;const s=this.CreateParticle(i);if(this.m_handleIndexBuffer.data){const e=this.m_handleIndexBuffer.data[t];e&&e.SetIndex(s),this.m_handleIndexBuffer.data[s]=e,this.m_handleIndexBuffer.data[t]=null}return this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[s]=this.m_lastBodyContactStepBuffer.data[t]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[s]=this.m_bodyContactCountBuffer.data[t]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[s]=this.m_consecutiveContactStepsBuffer.data[t]),this.m_hasForce&&this.m_forceBuffer[s].Copy(this.m_forceBuffer[t]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[s]=this.m_staticPressureBuffer[t]),this.m_depthBuffer&&(this.m_depthBuffer[s]=this.m_depthBuffer[t]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[s]=this.m_expirationTimeBuffer.data[t]),s}DestroyParticlesInGroup(t,e=!1){for(let i=t.m_firstIndex;i<t.m_lastIndex;i++)this.DestroyParticle(i,e)}DestroyParticleGroup(t){this.m_world.m_destructionListener&&this.m_world.m_destructionListener.SayGoodbyeParticleGroup(t),this.SetGroupFlags(t,0);for(let e=t.m_firstIndex;e<t.m_lastIndex;e++)this.m_groupBuffer[e]=null;t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_groupList&&(this.m_groupList=t.m_next),--this.m_groupCount}static ParticleCanBeConnected(e,i){return 0!=(e&(t.b2ParticleFlag.b2_wallParticle|t.b2ParticleFlag.b2_springParticle|t.b2ParticleFlag.b2_elasticParticle))||null!==i&&0!=(i.GetGroupFlags()&t.b2ParticleGroupFlag.b2_rigidParticleGroup)}UpdatePairsAndTriads(e,i,s){const o=so.UpdatePairsAndTriads_s_dab,n=so.UpdatePairsAndTriads_s_dbc,r=so.UpdatePairsAndTriads_s_dca,a=this.m_positionBuffer.data;let m=0;for(let t=e;t<i;t++)m|=this.m_flagsBuffer.data[t];if(m&so.k_pairFlags)for(let l=0;l<this.m_contactBuffer.count;l++){const o=this.m_contactBuffer.data[l],n=o.indexA,r=o.indexB,m=this.m_flagsBuffer.data[n],h=this.m_flagsBuffer.data[r],_=this.m_groupBuffer[n],c=this.m_groupBuffer[r];if(n>=e&&n<i&&r>=e&&r<i&&!((m|h)&t.b2ParticleFlag.b2_zombieParticle)&&(m|h)&so.k_pairFlags&&(s.IsNecessary(n)||s.IsNecessary(r))&&so.ParticleCanBeConnected(m,_)&&so.ParticleCanBeConnected(h,c)&&s.ShouldCreatePair(n,r)){const t=this.m_pairBuffer.data[this.m_pairBuffer.Append()];t.indexA=n,t.indexB=r,t.flags=o.flags,t.strength=E(_?_.m_strength:1,c?c.m_strength:1),t.distance=it.DistanceVV(a[n],a[r])}Xs(this.m_pairBuffer.data,0,this.m_pairBuffer.count,so.ComparePairIndices),this.m_pairBuffer.Unique(so.MatchPairIndices)}if(m&so.k_triadFlags){const m=new zs(i-e);for(let o=e;o<i;o++){const e=this.m_flagsBuffer.data[o],i=this.m_groupBuffer[o];e&t.b2ParticleFlag.b2_zombieParticle||!so.ParticleCanBeConnected(e,i)||m.AddGenerator(a[o],o,s.IsNecessary(o))}const l=this.GetParticleStride();m.Generate(l/2,2*l);const h=this,_=(t,e,i)=>{const m=h.m_flagsBuffer.data[t],l=h.m_flagsBuffer.data[e],_=h.m_flagsBuffer.data[i];if((m|l|_)&so.k_triadFlags&&s.ShouldCreateTriad(t,e,i)){const s=a[t],c=a[e],u=a[i],d=it.SubVV(s,c,o),p=it.SubVV(c,u,n),f=it.SubVV(u,s,r),y=P*h.m_squaredDiameter;if(it.DotVV(d,d)>y||it.DotVV(p,p)>y||it.DotVV(f,f)>y)return;const x=h.m_groupBuffer[t],B=h.m_groupBuffer[e],S=h.m_groupBuffer[i],A=h.m_triadBuffer.data[h.m_triadBuffer.Append()];A.indexA=t,A.indexB=e,A.indexC=i,A.flags=m|l|_,A.strength=E(E(x?x.m_strength:1,B?B.m_strength:1),S?S.m_strength:1);const b=(s.x+c.x+u.x)/3,C=(s.y+c.y+u.y)/3;A.pa.x=s.x-b,A.pa.y=s.y-C,A.pb.x=c.x-b,A.pb.y=c.y-C,A.pc.x=u.x-b,A.pc.y=u.y-C,A.ka=-it.DotVV(f,d),A.kb=-it.DotVV(d,p),A.kc=-it.DotVV(p,f),A.s=it.CrossVV(s,c)+it.CrossVV(c,u)+it.CrossVV(u,s)}};m.GetNodes(_),Xs(this.m_triadBuffer.data,0,this.m_triadBuffer.count,so.CompareTriadIndices),this.m_triadBuffer.Unique(so.MatchTriadIndices)}}UpdatePairsAndTriadsWithReactiveParticles(){const e=new fo(this.m_flagsBuffer);this.UpdatePairsAndTriads(0,this.m_count,e);for(let i=0;i<this.m_count;i++)this.m_flagsBuffer.data[i]&=~t.b2ParticleFlag.b2_reactiveParticle;this.m_allParticleFlags&=~t.b2ParticleFlag.b2_reactiveParticle}static ComparePairIndices(t,e){const i=t.indexA-e.indexA;return 0!==i?i<0:t.indexB<e.indexB}static MatchPairIndices(t,e){return t.indexA===e.indexA&&t.indexB===e.indexB}static CompareTriadIndices(t,e){const i=t.indexA-e.indexA;if(0!==i)return i<0;const s=t.indexB-e.indexB;return 0!==s?s<0:t.indexC<e.indexC}static MatchTriadIndices(t,e){return t.indexA===e.indexA&&t.indexB===e.indexB&&t.indexC===e.indexC}static InitializeParticleLists(t,e){const i=t.GetBufferIndex(),s=t.GetParticleCount();for(let o=0;o<s;o++){const t=e[o];t.list=t,t.next=null,t.count=1,t.index=o+i}}MergeParticleListsInContact(t,e){const i=t.GetBufferIndex();for(let s=0;s<this.m_contactBuffer.count;s++){const o=this.m_contactBuffer.data[s],n=o.indexA,r=o.indexB;if(!t.ContainsParticle(n)||!t.ContainsParticle(r))continue;let a=e[n-i].list,m=e[r-i].list;if(a!==m){if(a.count<m.count){const t=a;a=m,m=t}so.MergeParticleLists(a,m)}}}static MergeParticleLists(t,e){for(let i=e;;){i.list=t;const e=i.next;if(!e){i.next=t.next;break}i=e}t.next=e,t.count+=e.count,e.count=0}static FindLongestParticleList(t,e){const i=t.GetParticleCount();let s=e[0];for(let o=0;o<i;o++){const t=e[o];s.count<t.count&&(s=t)}return s}MergeZombieParticleListNodes(e,i,s){const o=e.GetParticleCount();for(let n=0;n<o;n++){const e=i[n];e!==s&&this.m_flagsBuffer.data[e.index]&t.b2ParticleFlag.b2_zombieParticle&&so.MergeParticleListAndNode(s,e)}}static MergeParticleListAndNode(t,e){e.list=t,e.next=t.next,t.next=e,t.count++,e.count=0}CreateParticleGroupsFromParticleList(e,i,s){const o=e.GetParticleCount(),n=new Rs;n.groupFlags=e.GetGroupFlags(),n.userData=e.GetUserData();for(let r=0;r<o;r++){const e=i[r];if(!e.count||e===s)continue;const o=this.CreateParticleGroup(n);for(let i=e;i;i=i.next){const e=i.index,s=this.CloneParticle(e,o);this.m_flagsBuffer.data[e]|=t.b2ParticleFlag.b2_zombieParticle,i.index=s}}}UpdatePairsAndTriadsWithParticleList(t,e){const i=t.GetBufferIndex();for(let s=0;s<this.m_pairBuffer.count;s++){const o=this.m_pairBuffer.data[s],n=o.indexA,r=o.indexB;t.ContainsParticle(n)&&(o.indexA=e[n-i].index),t.ContainsParticle(r)&&(o.indexB=e[r-i].index)}for(let s=0;s<this.m_triadBuffer.count;s++){const o=this.m_triadBuffer.data[s],n=o.indexA,r=o.indexB,a=o.indexC;t.ContainsParticle(n)&&(o.indexA=e[n-i].index),t.ContainsParticle(r)&&(o.indexB=e[r-i].index),t.ContainsParticle(a)&&(o.indexC=e[a-i].index)}}ComputeDepth(){const e=[];let s=0;for(let i=0;i<this.m_contactBuffer.count;i++){const o=this.m_contactBuffer.data[i],n=o.indexA,r=o.indexB,a=this.m_groupBuffer[n],m=this.m_groupBuffer[r];a&&a===m&&a.m_groupFlags&t.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&(e[s++]=o)}const o=[];let n=0;for(let i=this.m_groupList;i;i=i.GetNext())if(i.m_groupFlags&t.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth){o[n++]=i,this.SetGroupFlags(i,i.m_groupFlags&~t.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth);for(let t=i.m_firstIndex;t<i.m_lastIndex;t++)this.m_accumulationBuffer[t]=0}for(let t=0;t<s;t++){const i=e[t],s=i.indexA,o=i.indexB,n=i.weight;this.m_accumulationBuffer[s]+=n,this.m_accumulationBuffer[o]+=n}for(let t=0;t<n;t++){const e=o[t];for(let t=e.m_firstIndex;t<e.m_lastIndex;t++){const e=this.m_accumulationBuffer[t];this.m_depthBuffer[t]=e<.8?0:i}}const r=Q(this.m_count)>>0;for(let t=0;t<r;t++){let t=!1;for(let i=0;i<s;i++){const s=e[i],o=s.indexA,n=s.indexB,r=1-s.weight,a=this.m_depthBuffer[o],m=this.m_depthBuffer[n],l=m+r,h=a+r;a>l&&(this.m_depthBuffer[o]=l,t=!0),m>h&&(this.m_depthBuffer[n]=h,t=!0)}if(!t)break}for(let t=0;t<n;t++){const e=o[t];for(let t=e.m_firstIndex;t<e.m_lastIndex;t++)this.m_depthBuffer[t]<i?this.m_depthBuffer[t]*=this.m_particleDiameter:this.m_depthBuffer[t]=0}}GetInsideBoundsEnumerator(t){const e=so.computeTag(this.m_inverseDiameter*t.lowerBound.x-1,this.m_inverseDiameter*t.lowerBound.y-1),i=so.computeTag(this.m_inverseDiameter*t.upperBound.x+1,this.m_inverseDiameter*t.upperBound.y+1),s=this.m_proxyBuffer.count,o=Zs(this.m_proxyBuffer.data,0,s,e,no.CompareProxyTag),n=Ws(this.m_proxyBuffer.data,0,s,i,no.CompareTagProxy);return new ro(this,e,i,o,n)}UpdateAllParticleFlags(){this.m_allParticleFlags=0;for(let t=0;t<this.m_count;t++)this.m_allParticleFlags|=this.m_flagsBuffer.data[t];this.m_needsUpdateAllParticleFlags=!1}UpdateAllGroupFlags(){this.m_allGroupFlags=0;for(let t=this.m_groupList;t;t=t.GetNext())this.m_allGroupFlags|=t.m_groupFlags;this.m_needsUpdateAllGroupFlags=!1}AddContact(t,e,i){const s=this.m_flagsBuffer.data,o=this.m_positionBuffer.data,n=it.SubVV(o[e],o[t],so.AddContact_s_d),r=it.DotVV(n,n);if(0<r&&r<this.m_squaredDiameter){let i=W(r);const o=this.m_contactBuffer.data[this.m_contactBuffer.Append()];o.indexA=t,o.indexB=e,o.flags=s[t]|s[e],o.weight=1-r*i*this.m_inverseDiameter,o.normal.x=i*n.x,o.normal.y=i*n.y}}FindContacts_Reference(t){const e=this.m_proxyBuffer.count;this.m_contactBuffer.count=0;for(let i=0,s=0;i<e;i++){const t=so.computeRelativeTag(this.m_proxyBuffer.data[i].tag,1,0);for(let s=i+1;s<e&&!(t<this.m_proxyBuffer.data[s].tag);s++)this.AddContact(this.m_proxyBuffer.data[i].index,this.m_proxyBuffer.data[s].index,this.m_contactBuffer);const o=so.computeRelativeTag(this.m_proxyBuffer.data[i].tag,-1,1);for(;s<e&&!(o<=this.m_proxyBuffer.data[s].tag);s++);const n=so.computeRelativeTag(this.m_proxyBuffer.data[i].tag,1,1);for(let r=s;r<e&&!(n<this.m_proxyBuffer.data[r].tag);r++)this.AddContact(this.m_proxyBuffer.data[i].index,this.m_proxyBuffer.data[r].index,this.m_contactBuffer)}}FindContacts(t){this.FindContacts_Reference(t)}UpdateProxies_Reference(t){const e=this.m_positionBuffer.data,i=this.m_inverseDiameter;for(let s=0;s<this.m_proxyBuffer.count;++s){const t=this.m_proxyBuffer.data[s],o=e[t.index];t.tag=so.computeTag(i*o.x,i*o.y)}}UpdateProxies(t){this.UpdateProxies_Reference(t)}SortProxies(t){Os(this.m_proxyBuffer.data,0,this.m_proxyBuffer.count,no.CompareProxyProxy)}FilterContacts(e){const i=this.GetParticleContactFilter();if(null===i)return;const s=this;this.m_contactBuffer.RemoveIf(e=>0!=(e.flags&t.b2ParticleFlag.b2_particleContactFilterParticle)&&!i.ShouldCollideParticleParticle(s,e.indexA,e.indexB))}NotifyContactListenerPreContact(t){if(null!==this.GetParticleContactListener())throw t.Initialize(this.m_contactBuffer,this.m_flagsBuffer),new Error}NotifyContactListenerPostContact(t){const e=this.GetParticleContactListener();if(null!==e){for(let t=0;t<this.m_contactBuffer.count;++t){const i=this.m_contactBuffer.data[t];e.BeginContactParticleParticle(this,i)}throw new Error}}static b2ParticleContactIsZombie(e){return(e.flags&t.b2ParticleFlag.b2_zombieParticle)===t.b2ParticleFlag.b2_zombieParticle}UpdateContacts(t){this.UpdateProxies(this.m_proxyBuffer),this.SortProxies(this.m_proxyBuffer);const e=new ho;this.NotifyContactListenerPreContact(e),this.FindContacts(this.m_contactBuffer),this.FilterContacts(this.m_contactBuffer),this.NotifyContactListenerPostContact(e),t&&this.m_contactBuffer.RemoveIf(so.b2ParticleContactIsZombie)}NotifyBodyContactListenerPreContact(t){if(null!==this.GetFixtureContactListener())throw t.Initialize(this.m_bodyContactBuffer,this.m_flagsBuffer),new Error}NotifyBodyContactListenerPostContact(t){const e=this.GetFixtureContactListener();if(null!==e){for(let t=0;t<this.m_bodyContactBuffer.count;t++){const i=this.m_bodyContactBuffer.data[t];e.BeginContactFixtureParticle(this,i)}throw new Error}}UpdateBodyContacts(){const t=so.UpdateBodyContacts_s_aabb,e=new lo;if(this.NotifyBodyContactListenerPreContact(e),this.m_stuckThreshold>0){const t=this.GetParticleCount();for(let e=0;e<t;e++)this.m_bodyContactCountBuffer.data[e]=0,this.m_timestamp>this.m_lastBodyContactStepBuffer.data[e]+1&&(this.m_consecutiveContactStepsBuffer.data[e]=0)}this.m_bodyContactBuffer.SetCount(0),this.m_stuckParticleBuffer.SetCount(0);const i=t;this.ComputeAABB(i),null===this.UpdateBodyContacts_callback&&(this.UpdateBodyContacts_callback=new yo(this));const s=this.UpdateBodyContacts_callback;s.m_contactFilter=this.GetFixtureContactFilter(),this.m_world.QueryAABB(s,i),this.m_def.strictContactCheck&&this.RemoveSpuriousBodyContacts(),this.NotifyBodyContactListenerPostContact(e)}Solve(e){const i=so.Solve_s_subStep;if(0!==this.m_count&&(this.m_expirationTimeBuffer.data&&this.SolveLifetimes(e),this.m_allParticleFlags&t.b2ParticleFlag.b2_zombieParticle&&this.SolveZombie(),this.m_needsUpdateAllParticleFlags&&this.UpdateAllParticleFlags(),this.m_needsUpdateAllGroupFlags&&this.UpdateAllGroupFlags(),!this.m_paused))for(this.m_iterationIndex=0;this.m_iterationIndex<e.particleIterations;this.m_iterationIndex++){++this.m_timestamp;const s=i.Copy(e);s.dt/=e.particleIterations,s.inv_dt*=e.particleIterations,this.UpdateContacts(!1),this.UpdateBodyContacts(),this.ComputeWeight(),this.m_allGroupFlags&t.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&this.ComputeDepth(),this.m_allParticleFlags&t.b2ParticleFlag.b2_reactiveParticle&&this.UpdatePairsAndTriadsWithReactiveParticles(),this.m_hasForce&&this.SolveForce(s),this.m_allParticleFlags&t.b2ParticleFlag.b2_viscousParticle&&this.SolveViscous(),this.m_allParticleFlags&t.b2ParticleFlag.b2_repulsiveParticle&&this.SolveRepulsive(s),this.m_allParticleFlags&t.b2ParticleFlag.b2_powderParticle&&this.SolvePowder(s),this.m_allParticleFlags&t.b2ParticleFlag.b2_tensileParticle&&this.SolveTensile(s),this.m_allGroupFlags&t.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SolveSolid(s),this.m_allParticleFlags&t.b2ParticleFlag.b2_colorMixingParticle&&this.SolveColorMixing(),this.SolveGravity(s),this.m_allParticleFlags&t.b2ParticleFlag.b2_staticPressureParticle&&this.SolveStaticPressure(s),this.SolvePressure(s),this.SolveDamping(s),this.m_allParticleFlags&so.k_extraDampingFlags&&this.SolveExtraDamping(),this.m_allParticleFlags&t.b2ParticleFlag.b2_elasticParticle&&this.SolveElastic(s),this.m_allParticleFlags&t.b2ParticleFlag.b2_springParticle&&this.SolveSpring(s),this.LimitVelocity(s),this.m_allGroupFlags&t.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigidDamping(),this.m_allParticleFlags&t.b2ParticleFlag.b2_barrierParticle&&this.SolveBarrier(s),this.SolveCollision(s),this.m_allGroupFlags&t.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigid(s),this.m_allParticleFlags&t.b2ParticleFlag.b2_wallParticle&&this.SolveWall();for(let t=0;t<this.m_count;t++)this.m_positionBuffer.data[t].SelfMulAdd(s.dt,this.m_velocityBuffer.data[t])}}SolveCollision(t){const e=so.SolveCollision_s_aabb,s=this.m_positionBuffer.data,o=this.m_velocityBuffer.data,n=e;n.lowerBound.x=+i,n.lowerBound.y=+i,n.upperBound.x=-i,n.upperBound.y=-i;for(let i=0;i<this.m_count;i++){const e=o[i],r=s[i],a=r.x+t.dt*e.x,m=r.y+t.dt*e.y;n.lowerBound.x=E(n.lowerBound.x,E(r.x,a)),n.lowerBound.y=E(n.lowerBound.y,E(r.y,m)),n.upperBound.x=O(n.upperBound.x,O(r.x,a)),n.upperBound.y=O(n.upperBound.y,O(r.y,m))}null===this.SolveCollision_callback&&(this.SolveCollision_callback=new xo(this,t));const r=this.SolveCollision_callback;r.m_step=t,this.m_world.QueryAABB(r,n)}LimitVelocity(t){const e=this.m_velocityBuffer.data,i=this.GetCriticalVelocitySquared(t);for(let s=0;s<this.m_count;s++){const t=e[s],o=it.DotVV(t,t);o>i&&t.SelfMul(Q(i/o))}}SolveGravity(t){const e=so.SolveGravity_s_gravity,i=this.m_velocityBuffer.data,s=it.MulSV(t.dt*this.m_def.gravityScale,this.m_world.GetGravity(),e);for(let o=0;o<this.m_count;o++)i[o].SelfAdd(s)}SolveBarrier(e){const i=so.SolveBarrier_s_aabb,s=so.SolveBarrier_s_va,o=so.SolveBarrier_s_vb,n=so.SolveBarrier_s_pba,r=so.SolveBarrier_s_vba,a=so.SolveBarrier_s_vc,m=so.SolveBarrier_s_pca,l=so.SolveBarrier_s_vca,h=so.SolveBarrier_s_qba,_=so.SolveBarrier_s_qca,c=so.SolveBarrier_s_dv,u=so.SolveBarrier_s_f,d=this.m_positionBuffer.data,p=this.m_velocityBuffer.data;for(let t=0;t<this.m_count;t++){0!=(this.m_flagsBuffer.data[t]&so.k_barrierWallFlags)&&p[t].SetZero()}const f=G*e.dt,y=this.GetParticleMass();for(let x=0;x<this.m_pairBuffer.count;x++){const B=this.m_pairBuffer.data[x];if(B.flags&t.b2ParticleFlag.b2_barrierParticle){const t=B.indexA,x=B.indexB,S=d[t],A=d[x],b=i;it.MinV(S,A,b.lowerBound),it.MaxV(S,A,b.upperBound);const C=this.m_groupBuffer[t],V=this.m_groupBuffer[x],g=this.GetLinearVelocity(C,t,S,s),v=this.GetLinearVelocity(V,x,A,o),w=it.SubVV(A,S,n),M=it.SubVV(v,g,r),P=this.GetInsideBoundsEnumerator(b);let I;for(;(I=P.GetNext())>=0;){const t=d[I],i=this.m_groupBuffer[I];if(C!==i&&V!==i){const s=this.GetLinearVelocity(i,I,t,a),o=it.SubVV(t,S,m),n=it.SubVV(s,g,l),r=it.CrossVV(M,n),d=it.CrossVV(w,n)-it.CrossVV(o,M),x=it.CrossVV(w,o);let B,A;const b=h,C=_;if(0===r){if(0===d)continue;if(!((A=-x/d)>=0&&A<f))continue;if(it.AddVMulSV(w,A,M,b),it.AddVMulSV(o,A,n,C),!((B=it.DotVV(b,C)/it.DotVV(b,b))>=0&&B<=1))continue}else{const t=d*d-4*x*r;if(t<0)continue;const e=Q(t);let i=(-d-e)/(2*r),s=(-d+e)/(2*r);if(i>s){const t=i;i=s,s=t}if(A=i,it.AddVMulSV(w,A,M,b),it.AddVMulSV(o,A,n,C),B=it.DotVV(b,C)/it.DotVV(b,b),!(A>=0&&A<f&&B>=0&&B<=1)){if(!((A=s)>=0&&A<f))continue;if(it.AddVMulSV(w,A,M,b),it.AddVMulSV(o,A,n,C),!((B=it.DotVV(b,C)/it.DotVV(b,b))>=0&&B<=1))continue}}const V=c;V.x=g.x+B*M.x-s.x,V.y=g.y+B*M.y-s.y;const v=it.MulSV(y,V,u);if(i&&this.IsRigidGroup(i)){const e=i.GetMass(),s=i.GetInertia();e>0&&i.m_linearVelocity.SelfMulAdd(1/e,v),s>0&&(i.m_angularVelocity+=it.CrossVV(it.SubVV(t,i.GetCenter(),it.s_t0),v)/s)}else p[I].SelfAdd(V);this.ParticleApplyForce(I,v.SelfMul(-e.inv_dt))}}}}}SolveStaticPressure(e){this.m_staticPressureBuffer=this.RequestBuffer(this.m_staticPressureBuffer);const i=this.GetCriticalPressure(e),s=this.m_def.staticPressureStrength*i,o=w*i,n=this.m_def.staticPressureRelaxation;for(let r=0;r<this.m_def.staticPressureIterations;r++){for(let t=0;t<this.m_count;t++)this.m_accumulationBuffer[t]=0;for(let e=0;e<this.m_contactBuffer.count;e++){const i=this.m_contactBuffer.data[e];if(i.flags&t.b2ParticleFlag.b2_staticPressureParticle){const t=i.indexA,e=i.indexB,s=i.weight;this.m_accumulationBuffer[t]+=s*this.m_staticPressureBuffer[e],this.m_accumulationBuffer[e]+=s*this.m_staticPressureBuffer[t]}}for(let e=0;e<this.m_count;e++){const i=this.m_weightBuffer[e];if(this.m_flagsBuffer.data[e]&t.b2ParticleFlag.b2_staticPressureParticle){const t=(this.m_accumulationBuffer[e]+s*(i-v))/(i+n);this.m_staticPressureBuffer[e]=X(t,0,o)}else this.m_staticPressureBuffer[e]=0}}}ComputeWeight(){for(let t=0;t<this.m_count;t++)this.m_weightBuffer[t]=0;for(let t=0;t<this.m_bodyContactBuffer.count;t++){const e=this.m_bodyContactBuffer.data[t],i=e.index,s=e.weight;this.m_weightBuffer[i]+=s}for(let t=0;t<this.m_contactBuffer.count;t++){const e=this.m_contactBuffer.data[t],i=e.indexA,s=e.indexB,o=e.weight;this.m_weightBuffer[i]+=o,this.m_weightBuffer[s]+=o}}SolvePressure(e){const i=so.SolvePressure_s_f,s=this.m_positionBuffer.data,o=this.m_velocityBuffer.data,n=this.GetCriticalPressure(e),r=this.m_def.pressureStrength*n,a=w*n;for(let t=0;t<this.m_count;t++){const e=r*O(0,this.m_weightBuffer[t]-v);this.m_accumulationBuffer[t]=E(e,a)}if(this.m_allParticleFlags&so.k_noPressureFlags)for(let t=0;t<this.m_count;t++)this.m_flagsBuffer.data[t]&so.k_noPressureFlags&&(this.m_accumulationBuffer[t]=0);if(this.m_allParticleFlags&t.b2ParticleFlag.b2_staticPressureParticle)for(let h=0;h<this.m_count;h++)this.m_flagsBuffer.data[h]&t.b2ParticleFlag.b2_staticPressureParticle&&(this.m_accumulationBuffer[h]+=this.m_staticPressureBuffer[h]);const m=e.dt/(this.m_def.density*this.m_particleDiameter),l=this.GetParticleInvMass();for(let t=0;t<this.m_bodyContactBuffer.count;t++){const e=this.m_bodyContactBuffer.data[t],n=e.index,a=e.body,h=e.weight,_=e.mass,c=e.normal,u=s[n],d=this.m_accumulationBuffer[n]+r*h,p=it.MulSV(m*h*_*d,c,i);o[n].SelfMulSub(l,p),a.ApplyLinearImpulse(p,u,!0)}for(let t=0;t<this.m_contactBuffer.count;t++){const e=this.m_contactBuffer.data[t],s=e.indexA,n=e.indexB,r=e.weight,a=e.normal,l=this.m_accumulationBuffer[s]+this.m_accumulationBuffer[n],h=it.MulSV(m*r*l,a,i);o[s].SelfSub(h),o[n].SelfAdd(h)}}SolveDamping(t){const e=so.SolveDamping_s_v,i=so.SolveDamping_s_f,s=this.m_positionBuffer.data,o=this.m_velocityBuffer.data,n=this.m_def.dampingStrength,r=1/this.GetCriticalVelocity(t),a=this.GetParticleInvMass();for(let m=0;m<this.m_bodyContactBuffer.count;m++){const t=this.m_bodyContactBuffer.data[m],l=t.index,h=t.body,_=t.weight,c=t.mass,u=t.normal,d=s[l],p=it.SubVV(h.GetLinearVelocityFromWorldPoint(d,it.s_t0),o[l],e),f=it.DotVV(p,u);if(f<0){const t=O(n*_,E(-r*f,.5)),e=it.MulSV(t*c*f,u,i);o[l].SelfMulAdd(a,e),h.ApplyLinearImpulse(e.SelfNeg(),d,!0)}}for(let m=0;m<this.m_contactBuffer.count;m++){const t=this.m_contactBuffer.data[m],s=t.indexA,a=t.indexB,l=t.weight,h=t.normal,_=it.SubVV(o[a],o[s],e),c=it.DotVV(_,h);if(c<0){const t=O(n*l,E(-r*c,.5)),e=it.MulSV(t*c,h,i);o[s].SelfAdd(e),o[a].SelfSub(e)}}}SolveRigidDamping(){const t=so.SolveRigidDamping_s_t0,e=so.SolveRigidDamping_s_t1,i=so.SolveRigidDamping_s_p,s=so.SolveRigidDamping_s_v,o=[0],n=[0],r=[0],a=[0],m=[0],l=[0],h=this.m_positionBuffer.data,_=this.m_def.dampingStrength;for(let c=0;c<this.m_bodyContactBuffer.count;c++){const i=this.m_bodyContactBuffer.data[c],u=i.index,d=this.m_groupBuffer[u];if(d&&this.IsRigidGroup(d)){const c=i.body,p=i.normal,f=i.weight,y=h[u],x=it.SubVV(c.GetLinearVelocityFromWorldPoint(y,t),d.GetLinearVelocityFromWorldPoint(y,e),s),B=it.DotVV(x,p);if(B<0){this.InitDampingParameterWithRigidGroupOrParticle(o,n,r,!0,d,u,y,p),this.InitDampingParameter(a,m,l,c.GetMass(),c.GetInertia()-c.GetMass()*c.GetLocalCenter().LengthSquared(),c.GetWorldCenter(),y,p);const t=_*E(f,1)*this.ComputeDampingImpulse(o[0],n[0],r[0],a[0],m[0],l[0],B);this.ApplyDamping(o[0],n[0],r[0],!0,d,u,t,p),c.ApplyLinearImpulse(it.MulSV(-t,p,it.s_t0),y,!0)}}}for(let c=0;c<this.m_contactBuffer.count;c++){const u=this.m_contactBuffer.data[c],d=u.indexA,p=u.indexB,f=u.normal,y=u.weight,x=this.m_groupBuffer[d],B=this.m_groupBuffer[p],S=this.IsRigidGroup(x),A=this.IsRigidGroup(B);if(x!==B&&(S||A)){const c=it.MidVV(h[d],h[p],i),u=it.SubVV(this.GetLinearVelocity(B,p,c,t),this.GetLinearVelocity(x,d,c,e),s),b=it.DotVV(u,f);if(b<0){this.InitDampingParameterWithRigidGroupOrParticle(o,n,r,S,x,d,c,f),this.InitDampingParameterWithRigidGroupOrParticle(a,m,l,A,B,p,c,f);const t=_*y*this.ComputeDampingImpulse(o[0],n[0],r[0],a[0],m[0],l[0],b);this.ApplyDamping(o[0],n[0],r[0],S,x,d,t,f),this.ApplyDamping(a[0],m[0],l[0],A,B,p,-t,f)}}}}SolveExtraDamping(){const t=so.SolveExtraDamping_s_v,e=so.SolveExtraDamping_s_f,i=this.m_velocityBuffer.data,s=this.m_positionBuffer.data,o=this.GetParticleInvMass();for(let n=0;n<this.m_bodyContactBuffer.count;n++){const r=this.m_bodyContactBuffer.data[n],a=r.index;if(this.m_flagsBuffer.data[a]&so.k_extraDampingFlags){const n=r.body,m=r.mass,l=r.normal,h=s[a],_=it.SubVV(n.GetLinearVelocityFromWorldPoint(h,it.s_t0),i[a],t),c=it.DotVV(_,l);if(c<0){const t=it.MulSV(.5*m*c,l,e);i[a].SelfMulAdd(o,t),n.ApplyLinearImpulse(t.SelfNeg(),h,!0)}}}}SolveWall(){const e=this.m_velocityBuffer.data;for(let i=0;i<this.m_count;i++)this.m_flagsBuffer.data[i]&t.b2ParticleFlag.b2_wallParticle&&e[i].SetZero()}SolveRigid(e){const i=so.SolveRigid_s_position,s=so.SolveRigid_s_rotation,o=so.SolveRigid_s_transform,n=so.SolveRigid_s_velocityTransform,r=this.m_positionBuffer.data,a=this.m_velocityBuffer.data;for(let m=this.m_groupList;m;m=m.GetNext())if(m.m_groupFlags&t.b2ParticleGroupFlag.b2_rigidParticleGroup){m.UpdateStatistics();const t=s;t.SetAngle(e.dt*m.m_angularVelocity);const l=it.AddVV(m.m_center,it.SubVV(it.MulSV(e.dt,m.m_linearVelocity,it.s_t0),at.MulRV(t,m.m_center,it.s_t1),it.s_t0),i),h=o;h.SetPositionRotation(l,t),mt.MulXX(h,m.m_transform,m.m_transform);const _=n;_.p.x=e.inv_dt*h.p.x,_.p.y=e.inv_dt*h.p.y,_.q.s=e.inv_dt*h.q.s,_.q.c=e.inv_dt*(h.q.c-1);for(let e=m.m_firstIndex;e<m.m_lastIndex;e++)mt.MulXV(_,r[e],a[e])}}SolveElastic(e){const i=so.SolveElastic_s_pa,s=so.SolveElastic_s_pb,o=so.SolveElastic_s_pc,n=so.SolveElastic_s_r,r=so.SolveElastic_s_t0,a=this.m_positionBuffer.data,m=this.m_velocityBuffer.data,l=e.inv_dt*this.m_def.elasticStrength;for(let h=0;h<this.m_triadBuffer.count;h++){const _=this.m_triadBuffer.data[h];if(_.flags&t.b2ParticleFlag.b2_elasticParticle){const t=_.indexA,h=_.indexB,c=_.indexC,u=_.pa,d=_.pb,p=_.pc,f=i.Copy(a[t]),y=s.Copy(a[h]),x=o.Copy(a[c]),B=m[t],S=m[h],A=m[c];f.SelfMulAdd(e.dt,B),y.SelfMulAdd(e.dt,S),x.SelfMulAdd(e.dt,A);const b=(f.x+y.x+x.x)/3,C=(f.y+y.y+x.y)/3;f.x-=b,f.y-=C,y.x-=b,y.y-=C,x.x-=b,x.y-=C;const V=n;V.s=it.CrossVV(u,f)+it.CrossVV(d,y)+it.CrossVV(p,x),V.c=it.DotVV(u,f)+it.DotVV(d,y)+it.DotVV(p,x);let g=W(V.s*V.s+V.c*V.c);isFinite(g)||(g=198177537e11),V.s*=g,V.c*=g;const v=l*_.strength;at.MulRV(V,u,r),it.SubVV(r,f,r),it.MulSV(v,r,r),B.SelfAdd(r),at.MulRV(V,d,r),it.SubVV(r,y,r),it.MulSV(v,r,r),S.SelfAdd(r),at.MulRV(V,p,r),it.SubVV(r,x,r),it.MulSV(v,r,r),A.SelfAdd(r)}}}SolveSpring(e){const i=so.SolveSpring_s_pa,s=so.SolveSpring_s_pb,o=so.SolveSpring_s_d,n=so.SolveSpring_s_f,r=this.m_positionBuffer.data,a=this.m_velocityBuffer.data,m=e.inv_dt*this.m_def.springStrength;for(let l=0;l<this.m_pairBuffer.count;l++){const h=this.m_pairBuffer.data[l];if(h.flags&t.b2ParticleFlag.b2_springParticle){const t=h.indexA,l=h.indexB,_=i.Copy(r[t]),c=s.Copy(r[l]),u=a[t],d=a[l];_.SelfMulAdd(e.dt,u),c.SelfMulAdd(e.dt,d);const p=it.SubVV(c,_,o),f=h.distance,y=p.Length(),x=m*h.strength,B=it.MulSV(x*(f-y)/y,p,n);u.SelfSub(B),d.SelfAdd(B)}}}SolveTensile(e){const i=so.SolveTensile_s_weightedNormal,s=so.SolveTensile_s_s,o=so.SolveTensile_s_f,n=this.m_velocityBuffer.data;for(let t=0;t<this.m_count;t++)this.m_accumulation2Buffer[t]=new it,this.m_accumulation2Buffer[t].SetZero();for(let h=0;h<this.m_contactBuffer.count;h++){const e=this.m_contactBuffer.data[h];if(e.flags&t.b2ParticleFlag.b2_tensileParticle){const t=e.indexA,s=e.indexB,o=e.weight,n=e.normal,r=it.MulSV((1-o)*o,n,i);this.m_accumulation2Buffer[t].SelfSub(r),this.m_accumulation2Buffer[s].SelfAdd(r)}}const r=this.GetCriticalVelocity(e),a=this.m_def.surfaceTensionPressureStrength*r,m=this.m_def.surfaceTensionNormalStrength*r,l=M*r;for(let h=0;h<this.m_contactBuffer.count;h++){const e=this.m_contactBuffer.data[h];if(e.flags&t.b2ParticleFlag.b2_tensileParticle){const t=e.indexA,i=e.indexB,r=e.weight,h=e.normal,_=this.m_weightBuffer[t]+this.m_weightBuffer[i],c=it.SubVV(this.m_accumulation2Buffer[i],this.m_accumulation2Buffer[t],s),u=E(a*(_-2)+m*it.DotVV(c,h),l)*r,d=it.MulSV(u,h,o);n[t].SelfSub(d),n[i].SelfAdd(d)}}}SolveViscous(){const e=so.SolveViscous_s_v,i=so.SolveViscous_s_f,s=this.m_positionBuffer.data,o=this.m_velocityBuffer.data,n=this.m_def.viscousStrength,r=this.GetParticleInvMass();for(let a=0;a<this.m_bodyContactBuffer.count;a++){const m=this.m_bodyContactBuffer.data[a],l=m.index;if(this.m_flagsBuffer.data[l]&t.b2ParticleFlag.b2_viscousParticle){const t=m.body,a=m.weight,h=m.mass,_=s[l],c=it.SubVV(t.GetLinearVelocityFromWorldPoint(_,it.s_t0),o[l],e),u=it.MulSV(n*h*a,c,i);o[l].SelfMulAdd(r,u),t.ApplyLinearImpulse(u.SelfNeg(),_,!0)}}for(let a=0;a<this.m_contactBuffer.count;a++){const s=this.m_contactBuffer.data[a];if(s.flags&t.b2ParticleFlag.b2_viscousParticle){const t=s.indexA,r=s.indexB,a=s.weight,m=it.SubVV(o[r],o[t],e),l=it.MulSV(n*a,m,i);o[t].SelfAdd(l),o[r].SelfSub(l)}}}SolveRepulsive(e){const i=so.SolveRepulsive_s_f,s=this.m_velocityBuffer.data,o=this.m_def.repulsiveStrength*this.GetCriticalVelocity(e);for(let n=0;n<this.m_contactBuffer.count;n++){const e=this.m_contactBuffer.data[n];if(e.flags&t.b2ParticleFlag.b2_repulsiveParticle){const t=e.indexA,n=e.indexB;if(this.m_groupBuffer[t]!==this.m_groupBuffer[n]){const r=e.weight,a=e.normal,m=it.MulSV(o*r,a,i);s[t].SelfSub(m),s[n].SelfAdd(m)}}}}SolvePowder(e){const i=so.SolvePowder_s_f,s=this.m_positionBuffer.data,o=this.m_velocityBuffer.data,n=this.m_def.powderStrength*this.GetCriticalVelocity(e),r=1-g,a=this.GetParticleInvMass();for(let m=0;m<this.m_bodyContactBuffer.count;m++){const e=this.m_bodyContactBuffer.data[m],l=e.index;if(this.m_flagsBuffer.data[l]&t.b2ParticleFlag.b2_powderParticle){const t=e.weight;if(t>r){const m=e.body,h=e.mass,_=s[l],c=e.normal,u=it.MulSV(n*h*(t-r),c,i);o[l].SelfMulSub(a,u),m.ApplyLinearImpulse(u,_,!0)}}}for(let m=0;m<this.m_contactBuffer.count;m++){const e=this.m_contactBuffer.data[m];if(e.flags&t.b2ParticleFlag.b2_powderParticle){const t=e.weight;if(t>r){const s=e.indexA,a=e.indexB,m=e.normal,l=it.MulSV(n*(t-r),m,i);o[s].SelfSub(l),o[a].SelfAdd(l)}}}}SolveSolid(t){const e=so.SolveSolid_s_f,i=this.m_velocityBuffer.data;this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer);const s=t.inv_dt*this.m_def.ejectionStrength;for(let o=0;o<this.m_contactBuffer.count;o++){const t=this.m_contactBuffer.data[o],n=t.indexA,r=t.indexB;if(this.m_groupBuffer[n]!==this.m_groupBuffer[r]){const o=t.weight,a=t.normal,m=this.m_depthBuffer[n]+this.m_depthBuffer[r],l=it.MulSV(s*m*o,a,e);i[n].SelfSub(l),i[r].SelfAdd(l)}}}SolveForce(t){const e=this.m_velocityBuffer.data,i=t.dt*this.GetParticleInvMass();for(let s=0;s<this.m_count;s++)e[s].SelfMulAdd(i,this.m_forceBuffer[s]);this.m_hasForce=!1}SolveColorMixing(){const e=.5*this.m_def.colorMixingStrength;if(e)for(let i=0;i<this.m_contactBuffer.count;i++){const s=this.m_contactBuffer.data[i],o=s.indexA,n=s.indexB;if(this.m_flagsBuffer.data[o]&this.m_flagsBuffer.data[n]&t.b2ParticleFlag.b2_colorMixingParticle){const t=this.m_colorBuffer.data[o],i=this.m_colorBuffer.data[n];ht.MixColors(t,i,e)}}}SolveZombie(){let e=0;const i=[];for(let t=0;t<this.m_count;t++)i[t]=V;let s=0;for(let l=0;l<this.m_count;l++){const o=this.m_flagsBuffer.data[l];if(o&t.b2ParticleFlag.b2_zombieParticle){const e=this.m_world.m_destructionListener;if(o&t.b2ParticleFlag.b2_destructionListenerParticle&&e&&e.SayGoodbyeParticle(this,l),this.m_handleIndexBuffer.data){const t=this.m_handleIndexBuffer.data[l];t&&(t.SetIndex(V),this.m_handleIndexBuffer.data[l]=null)}i[l]=V}else{if(i[l]=e,l!==e){if(this.m_handleIndexBuffer.data){const t=this.m_handleIndexBuffer.data[l];t&&t.SetIndex(e),this.m_handleIndexBuffer.data[e]=t}this.m_flagsBuffer.data[e]=this.m_flagsBuffer.data[l],this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[e]=this.m_lastBodyContactStepBuffer.data[l]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[e]=this.m_bodyContactCountBuffer.data[l]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[e]=this.m_consecutiveContactStepsBuffer.data[l]),this.m_positionBuffer.data[e].Copy(this.m_positionBuffer.data[l]),this.m_velocityBuffer.data[e].Copy(this.m_velocityBuffer.data[l]),this.m_groupBuffer[e]=this.m_groupBuffer[l],this.m_hasForce&&this.m_forceBuffer[e].Copy(this.m_forceBuffer[l]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[e]=this.m_staticPressureBuffer[l]),this.m_depthBuffer&&(this.m_depthBuffer[e]=this.m_depthBuffer[l]),this.m_colorBuffer.data&&this.m_colorBuffer.data[e].Copy(this.m_colorBuffer.data[l]),this.m_userDataBuffer.data&&(this.m_userDataBuffer.data[e]=this.m_userDataBuffer.data[l]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[e]=this.m_expirationTimeBuffer.data[l])}e++,s|=o}}const o=t=>t.index<0,n=t=>t.indexA<0||t.indexB<0,r=t=>t.index<0,a=t=>t.indexA<0||t.indexB<0,m=t=>t.indexA<0||t.indexB<0||t.indexC<0;for(let t=0;t<this.m_proxyBuffer.count;t++){const e=this.m_proxyBuffer.data[t];e.index=i[e.index]}this.m_proxyBuffer.RemoveIf(o);for(let t=0;t<this.m_contactBuffer.count;t++){const e=this.m_contactBuffer.data[t];e.indexA=i[e.indexA],e.indexB=i[e.indexB]}this.m_contactBuffer.RemoveIf(n);for(let t=0;t<this.m_bodyContactBuffer.count;t++){const e=this.m_bodyContactBuffer.data[t];e.index=i[e.index]}this.m_bodyContactBuffer.RemoveIf(r);for(let t=0;t<this.m_pairBuffer.count;t++){const e=this.m_pairBuffer.data[t];e.indexA=i[e.indexA],e.indexB=i[e.indexB]}this.m_pairBuffer.RemoveIf(a);for(let t=0;t<this.m_triadBuffer.count;t++){const e=this.m_triadBuffer.data[t];e.indexA=i[e.indexA],e.indexB=i[e.indexB],e.indexC=i[e.indexC]}if(this.m_triadBuffer.RemoveIf(m),this.m_indexByExpirationTimeBuffer.data){let t=0;for(let e=0;e<this.m_count;e++){const s=i[this.m_indexByExpirationTimeBuffer.data[e]];s!==V&&(this.m_indexByExpirationTimeBuffer.data[t++]=s)}}for(let l=this.m_groupList;l;l=l.GetNext()){let s=e,o=0,n=!1;for(let t=l.m_firstIndex;t<l.m_lastIndex;t++){const e=i[t];e>=0?(s=E(s,e),o=O(o,e+1)):n=!0}s<o?(l.m_firstIndex=s,l.m_lastIndex=o,n&&l.m_groupFlags&t.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SetGroupFlags(l,l.m_groupFlags|t.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth)):(l.m_firstIndex=0,l.m_lastIndex=0,l.m_groupFlags&t.b2ParticleGroupFlag.b2_particleGroupCanBeEmpty||this.SetGroupFlags(l,l.m_groupFlags|t.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed))}this.m_count=e,this.m_allParticleFlags=s,this.m_needsUpdateAllParticleFlags=!1;for(let l=this.m_groupList;l;){const e=l.GetNext();l.m_groupFlags&t.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed&&this.DestroyParticleGroup(l),l=e}}SolveLifetimes(t){this.m_timeElapsed=this.LifetimeToExpirationTime(t.dt);const e=this.GetQuantizedTimeElapsed(),i=this.m_expirationTimeBuffer.data,s=this.m_indexByExpirationTimeBuffer.data,o=this.GetParticleCount();if(this.m_expirationTimeBufferRequiresSorting){Os(s,0,o,(t,e)=>{const s=i[t],o=i[e],n=s<=0;return n===o<=0?s>o:n}),this.m_expirationTimeBufferRequiresSorting=!1}for(let n=o-1;n>=0;--n){const t=s[n],o=i[t];if(e<o||o<=0)break;this.DestroyParticle(t)}}RotateBuffer(t,e,i){if(t!==e&&e!==i){if(Qs(this.m_flagsBuffer.data,t,e,i),this.m_lastBodyContactStepBuffer.data&&Qs(this.m_lastBodyContactStepBuffer.data,t,e,i),this.m_bodyContactCountBuffer.data&&Qs(this.m_bodyContactCountBuffer.data,t,e,i),this.m_consecutiveContactStepsBuffer.data&&Qs(this.m_consecutiveContactStepsBuffer.data,t,e,i),Qs(this.m_positionBuffer.data,t,e,i),Qs(this.m_velocityBuffer.data,t,e,i),Qs(this.m_groupBuffer,t,e,i),this.m_hasForce&&Qs(this.m_forceBuffer,t,e,i),this.m_staticPressureBuffer&&Qs(this.m_staticPressureBuffer,t,e,i),this.m_depthBuffer&&Qs(this.m_depthBuffer,t,e,i),this.m_colorBuffer.data&&Qs(this.m_colorBuffer.data,t,e,i),this.m_userDataBuffer.data&&Qs(this.m_userDataBuffer.data,t,e,i),this.m_handleIndexBuffer.data){Qs(this.m_handleIndexBuffer.data,t,e,i);for(let e=t;e<i;++e){const t=this.m_handleIndexBuffer.data[e];t&&t.SetIndex(s(t.GetIndex()))}}if(this.m_expirationTimeBuffer.data){Qs(this.m_expirationTimeBuffer.data,t,e,i);const o=this.GetParticleCount(),n=this.m_indexByExpirationTimeBuffer.data;for(let t=0;t<o;++t)n[t]=s(n[t])}for(let t=0;t<this.m_proxyBuffer.count;t++){const e=this.m_proxyBuffer.data[t];e.index=s(e.index)}for(let t=0;t<this.m_contactBuffer.count;t++){const e=this.m_contactBuffer.data[t];e.indexA=s(e.indexA),e.indexB=s(e.indexB)}for(let t=0;t<this.m_bodyContactBuffer.count;t++){const e=this.m_bodyContactBuffer.data[t];e.index=s(e.index)}for(let t=0;t<this.m_pairBuffer.count;t++){const e=this.m_pairBuffer.data[t];e.indexA=s(e.indexA),e.indexB=s(e.indexB)}for(let t=0;t<this.m_triadBuffer.count;t++){const e=this.m_triadBuffer.data[t];e.indexA=s(e.indexA),e.indexB=s(e.indexB),e.indexC=s(e.indexC)}for(let t=this.m_groupList;t;t=t.GetNext())t.m_firstIndex=s(t.m_firstIndex),t.m_lastIndex=s(t.m_lastIndex-1)+1}function s(s){return s<t?s:s<e?s+i-e:s<i?s+t-e:s}}GetCriticalVelocity(t){return this.m_particleDiameter*t.inv_dt}GetCriticalVelocitySquared(t){const e=this.GetCriticalVelocity(t);return e*e}GetCriticalPressure(t){return this.m_def.density*this.GetCriticalVelocitySquared(t)}GetParticleStride(){return g*this.m_particleDiameter}GetParticleMass(){const t=this.GetParticleStride();return this.m_def.density*t*t}GetParticleInvMass(){const t=this.m_inverseDiameter*(1/g);return this.m_inverseDensity*t*t}GetFixtureContactFilter(){return this.m_allParticleFlags&t.b2ParticleFlag.b2_fixtureContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null}GetParticleContactFilter(){return this.m_allParticleFlags&t.b2ParticleFlag.b2_particleContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null}GetFixtureContactListener(){return this.m_allParticleFlags&t.b2ParticleFlag.b2_fixtureContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null}GetParticleContactListener(){return this.m_allParticleFlags&t.b2ParticleFlag.b2_particleContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null}SetUserOverridableBuffer(t,e){t.data=e,t.userSuppliedCapacity=e.length}SetGroupFlags(e,i){const s=e.m_groupFlags;(s^i)&t.b2ParticleGroupFlag.b2_solidParticleGroup&&(i|=t.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth),s&~i&&(this.m_needsUpdateAllGroupFlags=!0),~this.m_allGroupFlags&i&&(i&t.b2ParticleGroupFlag.b2_solidParticleGroup&&(this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer)),this.m_allGroupFlags|=i),e.m_groupFlags=i}static BodyContactCompare(t,e){return t.index===e.index?t.weight>e.weight:t.index<e.index}RemoveSpuriousBodyContacts(){Os(this.m_bodyContactBuffer.data,0,this.m_bodyContactBuffer.count,so.BodyContactCompare);const t=so.RemoveSpuriousBodyContacts_s_n,e=so.RemoveSpuriousBodyContacts_s_pos,i=so.RemoveSpuriousBodyContacts_s_normal,s=this;let o=-1,n=0;this.m_bodyContactBuffer.count=Us(this.m_bodyContactBuffer.data,r=>{if(r.index!==o&&(n=0,o=r.index),n++>3)return!0;const a=t.Copy(r.normal);a.SelfMul(s.m_particleDiameter*(1-r.weight));const m=it.AddVV(s.m_positionBuffer.data[r.index],a,e);if(!r.fixture.TestPoint(m)){const t=r.fixture.GetShape().GetChildCount();for(let e=0;e<t;e++){const t=i;if(r.fixture.ComputeDistance(m,t,e)<h)return!1}return!0}return!1},this.m_bodyContactBuffer.count)}DetectStuckParticle(t){this.m_stuckThreshold<=0||(++this.m_bodyContactCountBuffer.data[t],2===this.m_bodyContactCountBuffer.data[t]&&(++this.m_consecutiveContactStepsBuffer.data[t],this.m_consecutiveContactStepsBuffer.data[t]>this.m_stuckThreshold&&(this.m_stuckParticleBuffer.data[this.m_stuckParticleBuffer.Append()]=t)),this.m_lastBodyContactStepBuffer.data[t]=this.m_timestamp)}ValidateParticleIndex(t){return t>=0&&t<this.GetParticleCount()&&t!==V}GetQuantizedTimeElapsed(){return Math.floor(this.m_timeElapsed/4294967296)}LifetimeToExpirationTime(t){return this.m_timeElapsed+Math.floor(t/this.m_def.lifetimeGranularity*4294967296)}ForceCanBeApplied(e){return!(e&t.b2ParticleFlag.b2_wallParticle)}PrepareForceBuffer(){if(!this.m_hasForce){for(let t=0;t<this.m_count;t++)this.m_forceBuffer[t].SetZero();this.m_hasForce=!0}}IsRigidGroup(e){return null!==e&&0!=(e.m_groupFlags&t.b2ParticleGroupFlag.b2_rigidParticleGroup)}GetLinearVelocity(t,e,i,s){return t&&this.IsRigidGroup(t)?t.GetLinearVelocityFromWorldPoint(i,s):s.Copy(this.m_velocityBuffer.data[e])}InitDampingParameter(t,e,i,s,o,n,r,a){t[0]=s>0?1/s:0,e[0]=o>0?1/o:0,i[0]=it.CrossVV(it.SubVV(r,n,it.s_t0),a)}InitDampingParameterWithRigidGroupOrParticle(e,i,s,o,n,r,a,m){if(n&&o)this.InitDampingParameter(e,i,s,n.GetMass(),n.GetInertia(),n.GetCenter(),a,m);else{const o=this.m_flagsBuffer.data[r];this.InitDampingParameter(e,i,s,o&t.b2ParticleFlag.b2_wallParticle?0:this.GetParticleMass(),0,a,a,m)}}ComputeDampingImpulse(t,e,i,s,o,n,r){const a=t+e*i*i+s+o*n*n;return a>0?r/a:0}ApplyDamping(t,e,i,s,o,n,r,a){o&&s?(o.m_linearVelocity.SelfMulAdd(r*t,a),o.m_angularVelocity+=r*i*e):this.m_velocityBuffer.data[n].SelfMulAdd(r*t,a)}}so.xTruncBits=12,so.yTruncBits=12,so.tagBits=32,so.yOffset=1<<so.yTruncBits-1,so.yShift=so.tagBits-so.yTruncBits,so.xShift=so.tagBits-so.yTruncBits-so.xTruncBits,so.xScale=1<<so.xShift,so.xOffset=so.xScale*(1<<so.xTruncBits-1),so.yMask=(1<<so.yTruncBits)-1<<so.yShift,so.xMask=~so.yMask,so.DestroyParticlesInShape_s_aabb=new Wt,so.CreateParticleGroup_s_transform=new mt,so.ComputeCollisionEnergy_s_v=new it,so.QueryShapeAABB_s_aabb=new Wt,so.QueryPointAABB_s_aabb=new Wt,so.RayCast_s_aabb=new Wt,so.RayCast_s_p=new it,so.RayCast_s_v=new it,so.RayCast_s_n=new it,so.RayCast_s_point=new it,so.k_pairFlags=t.b2ParticleFlag.b2_springParticle,so.k_triadFlags=t.b2ParticleFlag.b2_elasticParticle,so.k_noPressureFlags=t.b2ParticleFlag.b2_powderParticle|t.b2ParticleFlag.b2_tensileParticle,so.k_extraDampingFlags=t.b2ParticleFlag.b2_staticPressureParticle,so.k_barrierWallFlags=t.b2ParticleFlag.b2_barrierParticle|t.b2ParticleFlag.b2_wallParticle,so.CreateParticlesStrokeShapeForGroup_s_edge=new Ii,so.CreateParticlesStrokeShapeForGroup_s_d=new it,so.CreateParticlesStrokeShapeForGroup_s_p=new it,so.CreateParticlesFillShapeForGroup_s_aabb=new Wt,so.CreateParticlesFillShapeForGroup_s_p=new it,so.UpdatePairsAndTriads_s_dab=new it,so.UpdatePairsAndTriads_s_dbc=new it,so.UpdatePairsAndTriads_s_dca=new it,so.AddContact_s_d=new it,so.UpdateBodyContacts_s_aabb=new Wt,so.Solve_s_subStep=new Bs,so.SolveCollision_s_aabb=new Wt,so.SolveGravity_s_gravity=new it,so.SolveBarrier_s_aabb=new Wt,so.SolveBarrier_s_va=new it,so.SolveBarrier_s_vb=new it,so.SolveBarrier_s_pba=new it,so.SolveBarrier_s_vba=new it,so.SolveBarrier_s_vc=new it,so.SolveBarrier_s_pca=new it,so.SolveBarrier_s_vca=new it,so.SolveBarrier_s_qba=new it,so.SolveBarrier_s_qca=new it,so.SolveBarrier_s_dv=new it,so.SolveBarrier_s_f=new it,so.SolvePressure_s_f=new it,so.SolveDamping_s_v=new it,so.SolveDamping_s_f=new it,so.SolveRigidDamping_s_t0=new it,so.SolveRigidDamping_s_t1=new it,so.SolveRigidDamping_s_p=new it,so.SolveRigidDamping_s_v=new it,so.SolveExtraDamping_s_v=new it,so.SolveExtraDamping_s_f=new it,so.SolveRigid_s_position=new it,so.SolveRigid_s_rotation=new at,so.SolveRigid_s_transform=new mt,so.SolveRigid_s_velocityTransform=new mt,so.SolveElastic_s_pa=new it,so.SolveElastic_s_pb=new it,so.SolveElastic_s_pc=new it,so.SolveElastic_s_r=new at,so.SolveElastic_s_t0=new it,so.SolveSpring_s_pa=new it,so.SolveSpring_s_pb=new it,so.SolveSpring_s_d=new it,so.SolveSpring_s_f=new it,so.SolveTensile_s_weightedNormal=new it,so.SolveTensile_s_s=new it,so.SolveTensile_s_f=new it,so.SolveViscous_s_v=new it,so.SolveViscous_s_f=new it,so.SolveRepulsive_s_f=new it,so.SolvePowder_s_f=new it,so.SolveSolid_s_f=new it,so.RemoveSpuriousBodyContacts_s_n=new it,so.RemoveSpuriousBodyContacts_s_pos=new it,so.RemoveSpuriousBodyContacts_s_normal=new it;class oo{constructor(){this._data=null,this.userSuppliedCapacity=0}get data(){return this._data}set data(t){this._data=t}}class no{constructor(){this.index=V,this.tag=0}static CompareProxyProxy(t,e){return t.tag<e.tag}static CompareTagProxy(t,e){return t<e.tag}static CompareProxyTag(t,e){return t.tag<e}}class ro{constructor(t,e,i,s,o){this.m_system=t,this.m_xLower=(e&so.xMask)>>>0,this.m_xUpper=(i&so.xMask)>>>0,this.m_yLower=(e&so.yMask)>>>0,this.m_yUpper=(i&so.yMask)>>>0,this.m_first=s,this.m_last=o}GetNext(){for(;this.m_first<this.m_last;){const t=(this.m_system.m_proxyBuffer.data[this.m_first].tag&so.xMask)>>>0;if(t>=this.m_xLower&&t<=this.m_xUpper)return this.m_system.m_proxyBuffer.data[this.m_first++].index;this.m_first++}return V}}class ao{constructor(){this.next=null,this.count=0,this.index=0}}class mo{Allocate(t,e){return e}Clear(){}GetCount(){return 0}Invalidate(t){}GetValidBuffer(){return[]}GetBuffer(){return[]}SetCount(t){}}class lo extends mo{Initialize(t,e){}Find(t){return V}}class ho extends mo{Initialize(t,e){}Find(t){return V}}class _o{IsNecessary(t){return!0}ShouldCreatePair(t,e){return!0}ShouldCreateTriad(t,e,i){return!0}}class co extends ps{constructor(t,e,i,s){super(),this.m_callDestructionListener=!1,this.m_destroyed=0,this.m_system=t,this.m_shape=e,this.m_xf=i,this.m_callDestructionListener=s,this.m_destroyed=0}ReportFixture(t){return!1}ReportParticle(t,e){return t===this.m_system&&(this.m_shape.TestPoint(this.m_xf,this.m_system.m_positionBuffer.data[e])&&(this.m_system.DestroyParticle(e,this.m_callDestructionListener),this.m_destroyed++),!0)}Destroyed(){return this.m_destroyed}}class uo extends _o{constructor(t){super(),this.m_threshold=0,this.m_threshold=t}ShouldCreatePair(t,e){return t<this.m_threshold&&this.m_threshold<=e||e<this.m_threshold&&this.m_threshold<=t}ShouldCreateTriad(t,e,i){return(t<this.m_threshold||e<this.m_threshold||i<this.m_threshold)&&(this.m_threshold<=t||this.m_threshold<=e||this.m_threshold<=i)}}class po extends wi{constructor(e,i=e.length){super(t.b2ShapeType.e_unknown,0),this.m_shapeCount=0,this.m_shapes=e,this.m_shapeCount=i}Clone(){throw new Error}GetChildCount(){return 1}TestPoint(t,e){for(let i=0;i<this.m_shapeCount;i++)if(this.m_shapes[i].TestPoint(t,e))return!0;return!1}ComputeDistance(t,e,i,s){return 0}RayCast(t,e,i,s){return!1}ComputeAABB(t,e,s){const o=new Wt;t.lowerBound.x=+i,t.lowerBound.y=+i,t.upperBound.x=-i,t.upperBound.y=-i;for(let i=0;i<this.m_shapeCount;i++){const s=this.m_shapes[i].GetChildCount();for(let n=0;n<s;n++){const s=o;this.m_shapes[i].ComputeAABB(s,e,n),t.Combine1(s)}}}ComputeMass(t,e){}SetupDistanceProxy(t,e){}ComputeSubmergedArea(t,e,i,s){return 0}Dump(t){}}class fo extends _o{constructor(t){super(),this.m_flagsBuffer=t}IsNecessary(e){return 0!=(this.m_flagsBuffer.data[e]&t.b2ParticleFlag.b2_reactiveParticle)}}class yo extends Ys{constructor(t,e=null){super(t),this.m_contactFilter=null,this.m_contactFilter=e}ShouldCollideFixtureParticle(e,i,s){if(this.m_contactFilter){if(this.m_system.GetFlagsBuffer()[s]&t.b2ParticleFlag.b2_fixtureContactFilterParticle)return this.m_contactFilter.ShouldCollideFixtureParticle(e,this.m_system,s)}return!0}ReportFixtureAndParticle(e,i,s){const o=yo.ReportFixtureAndParticle_s_n,n=yo.ReportFixtureAndParticle_s_rp,r=this.m_system.m_positionBuffer.data[s],a=o,m=e.ComputeDistance(r,a,i);if(m<this.m_system.m_particleDiameter&&this.ShouldCollideFixtureParticle(e,this.m_system,s)){const i=e.GetBody(),o=i.GetWorldCenter(),l=i.GetMass(),h=i.GetInertia()-l*i.GetLocalCenter().LengthSquared(),_=l>0?1/l:0,c=h>0?1/h:0,u=this.m_system.m_flagsBuffer.data[s]&t.b2ParticleFlag.b2_wallParticle?0:this.m_system.GetParticleInvMass(),d=it.SubVV(r,o,n),p=it.CrossVV(d,a),f=u+_+c*p*p,y=this.m_system.m_bodyContactBuffer.data[this.m_system.m_bodyContactBuffer.Append()];y.index=s,y.body=i,y.fixture=e,y.weight=1-m*this.m_system.m_inverseDiameter,y.normal.Copy(a.SelfNeg()),y.mass=f>0?1/f:0,this.m_system.DetectStuckParticle(s)}}}yo.ReportFixtureAndParticle_s_n=new it,yo.ReportFixtureAndParticle_s_rp=new it;class xo extends Ys{constructor(t,e){super(t),this.m_step=e}ReportFixtureAndParticle(e,i,s){const o=xo.ReportFixtureAndParticle_s_p1,n=xo.ReportFixtureAndParticle_s_output,r=xo.ReportFixtureAndParticle_s_input,a=xo.ReportFixtureAndParticle_s_p,m=xo.ReportFixtureAndParticle_s_v,l=xo.ReportFixtureAndParticle_s_f,_=e.GetBody(),c=this.m_system.m_positionBuffer.data[s],u=this.m_system.m_velocityBuffer.data[s],d=n,p=r;if(0===this.m_system.m_iterationIndex){const i=mt.MulTXV(_.m_xf0,c,o);e.GetShape().GetType()===t.b2ShapeType.e_circleShape&&(i.SelfSub(_.GetLocalCenter()),at.MulRV(_.m_xf0.q,i,i),at.MulTRV(_.m_xf.q,i,i),i.SelfAdd(_.GetLocalCenter())),mt.MulXV(_.m_xf,i,p.p1)}else p.p1.Copy(c);if(it.AddVMulSV(c,this.m_step.dt,u,p.p2),p.maxFraction=1,e.RayCast(d,p,i)){const t=d.normal,e=a;e.x=(1-d.fraction)*p.p1.x+d.fraction*p.p2.x+h*t.x,e.y=(1-d.fraction)*p.p1.y+d.fraction*p.p2.y+h*t.y;const i=m;i.x=this.m_step.inv_dt*(e.x-c.x),i.y=this.m_step.inv_dt*(e.y-c.y),this.m_system.m_velocityBuffer.data[s].Copy(i);const o=l;o.x=this.m_step.inv_dt*this.m_system.GetParticleMass()*(u.x-i.x),o.y=this.m_step.inv_dt*this.m_system.GetParticleMass()*(u.y-i.y),this.m_system.ParticleApplyForce(s,o)}}ReportParticle(t,e){return!1}}xo.ReportFixtureAndParticle_s_p1=new it,xo.ReportFixtureAndParticle_s_output=new Zt,xo.ReportFixtureAndParticle_s_input=new Ut,xo.ReportFixtureAndParticle_s_p=new it,xo.ReportFixtureAndParticle_s_v=new it,xo.ReportFixtureAndParticle_s_f=new it;class Bo{constructor(t){this.m_newFixture=!1,this.m_locked=!1,this.m_clearForces=!0,this.m_contactManager=new ys,this.m_bodyList=null,this.m_jointList=null,this.m_particleSystemList=null,this.m_bodyCount=0,this.m_jointCount=0,this.m_gravity=new it,this.m_allowSleep=!0,this.m_destructionListener=null,this.m_debugDraw=null,this.m_inv_dt0=0,this.m_warmStarting=!0,this.m_continuousPhysics=!0,this.m_subStepping=!1,this.m_stepComplete=!0,this.m_profile=new xs,this.m_island=new Is,this.s_stack=[],this.m_controllerList=null,this.m_controllerCount=0,this.m_gravity.Copy(t)}SetDestructionListener(t){this.m_destructionListener=t}SetContactFilter(t){this.m_contactManager.m_contactFilter=t}SetContactListener(t){this.m_contactManager.m_contactListener=t}SetDebugDraw(t){this.m_debugDraw=t}CreateBody(t={}){if(this.IsLocked())throw new Error;const e=new Ri(t,this);return e.m_prev=null,e.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=e),this.m_bodyList=e,++this.m_bodyCount,e}DestroyBody(t){if(this.IsLocked())throw new Error;let e=t.m_jointList;for(;e;){const i=e;e=e.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(i.joint),this.DestroyJoint(i.joint),t.m_jointList=e}t.m_jointList=null;let i=t.m_controllerList;for(;i;){const e=i;i=i.nextController,e.controller.RemoveBody(t)}let s=t.m_contactList;for(;s;){const t=s;s=s.next,this.m_contactManager.Destroy(t.contact)}t.m_contactList=null;let o=t.m_fixtureList;for(;o;){const e=o;o=o.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(e),e.DestroyProxies(),e.Reset(),t.m_fixtureList=o,t.m_fixtureCount-=1}t.m_fixtureList=null,t.m_fixtureCount=0,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_bodyList&&(this.m_bodyList=t.m_next),--this.m_bodyCount}static _Joint_Create(e){switch(e.type){case t.b2JointType.e_distanceJoint:return new Ni(e);case t.b2JointType.e_mouseJoint:return new Ui(e);case t.b2JointType.e_prismaticJoint:return new Zi(e);case t.b2JointType.e_revoluteJoint:return new Qi(e);case t.b2JointType.e_pulleyJoint:return new Wi(e);case t.b2JointType.e_gearJoint:return new Oi(e);case t.b2JointType.e_wheelJoint:return new Ki(e);case t.b2JointType.e_weldJoint:return new Yi(e);case t.b2JointType.e_frictionJoint:return new Ei(e);case t.b2JointType.e_ropeJoint:return new Hi(e);case t.b2JointType.e_motorJoint:return new Xi(e);case t.b2JointType.e_areaJoint:return new ji(e)}throw new Error}static _Joint_Destroy(t){}CreateJoint(t){if(this.IsLocked())throw new Error;const e=Bo._Joint_Create(t);e.m_prev=null,e.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=e),this.m_jointList=e,++this.m_jointCount,e.m_edgeA.prev=null,e.m_edgeA.next=e.m_bodyA.m_jointList,e.m_bodyA.m_jointList&&(e.m_bodyA.m_jointList.prev=e.m_edgeA),e.m_bodyA.m_jointList=e.m_edgeA,e.m_edgeB.prev=null,e.m_edgeB.next=e.m_bodyB.m_jointList,e.m_bodyB.m_jointList&&(e.m_bodyB.m_jointList.prev=e.m_edgeB),e.m_bodyB.m_jointList=e.m_edgeB;const i=e.m_bodyA,s=e.m_bodyB;if(!e.m_collideConnected){let t=s.GetContactList();for(;t;)t.other===i&&t.contact.FlagForFiltering(),t=t.next}return e}DestroyJoint(t){if(this.IsLocked())throw new Error;t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_jointList&&(this.m_jointList=t.m_next);const e=t.m_bodyA,i=t.m_bodyB,s=t.m_collideConnected;if(e.SetAwake(!0),i.SetAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA===e.m_jointList&&(e.m_jointList=t.m_edgeA.next),t.m_edgeA.Reset(),t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB===i.m_jointList&&(i.m_jointList=t.m_edgeB.next),t.m_edgeB.Reset(),Bo._Joint_Destroy(t),--this.m_jointCount,!s){let t=i.GetContactList();for(;t;)t.other===e&&t.contact.FlagForFiltering(),t=t.next}}CreateParticleSystem(t){if(this.IsLocked())throw new Error;const e=new so(t,this);return e.m_prev=null,e.m_next=this.m_particleSystemList,this.m_particleSystemList&&(this.m_particleSystemList.m_prev=e),this.m_particleSystemList=e,e}DestroyParticleSystem(t){if(this.IsLocked())throw new Error;t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_particleSystemList&&(this.m_particleSystemList=t.m_next)}CalculateReasonableParticleIterations(t){if(null===this.m_particleSystemList)return 1;return Ts(this.m_gravity.Length(),function(t){let e=i;for(let i=t.GetParticleSystemList();null!==i;i=i.m_next)e=E(e,i.GetRadius());return e}(this),t)}Step(t,e,i,s=this.CalculateReasonableParticleIterations(t)){const o=Bo.Step_s_stepTimer.Reset();this.m_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_newFixture=!1),this.m_locked=!0;const n=Bo.Step_s_step;n.dt=t,n.velocityIterations=e,n.positionIterations=i,n.particleIterations=s,n.inv_dt=t>0?1/t:0,n.dtRatio=this.m_inv_dt0*t,n.warmStarting=this.m_warmStarting;const r=Bo.Step_s_timer.Reset();if(this.m_contactManager.Collide(),this.m_profile.collide=r.GetMilliseconds(),this.m_stepComplete&&n.dt>0){const t=Bo.Step_s_timer.Reset();for(let e=this.m_particleSystemList;e;e=e.m_next)e.Solve(n);this.Solve(n),this.m_profile.solve=t.GetMilliseconds()}if(this.m_continuousPhysics&&n.dt>0){const t=Bo.Step_s_timer.Reset();this.SolveTOI(n),this.m_profile.solveTOI=t.GetMilliseconds()}n.dt>0&&(this.m_inv_dt0=n.inv_dt),this.m_clearForces&&this.ClearForces(),this.m_locked=!1,this.m_profile.step=o.GetMilliseconds()}ClearForces(){for(let t=this.m_bodyList;t;t=t.m_next)t.m_force.SetZero(),t.m_torque=0}DrawParticleSystem(t){if(null===this.m_debugDraw)return;const e=t.GetParticleCount();if(e){const i=t.GetRadius(),s=t.GetPositionBuffer();if(t.m_colorBuffer.data){const o=t.GetColorBuffer();this.m_debugDraw.DrawParticles(s,i,o,e)}else this.m_debugDraw.DrawParticles(s,i,null,e)}}DrawDebugData(){if(null===this.m_debugDraw)return;const e=this.m_debugDraw.GetFlags(),i=Bo.DrawDebugData_s_color.SetRGB(0,0,0);if(e&t.b2DrawFlags.e_shapeBit)for(let s=this.m_bodyList;s;s=s.m_next){const e=s.m_xf;this.m_debugDraw.PushTransform(e);for(let o=s.GetFixtureList();o;o=o.m_next)s.IsActive()?s.GetType()===t.b2BodyType.b2_staticBody?(i.SetRGB(.5,.9,.5),this.DrawShape(o,i)):s.GetType()===t.b2BodyType.b2_kinematicBody?(i.SetRGB(.5,.5,.9),this.DrawShape(o,i)):s.IsAwake()?(i.SetRGB(.9,.7,.7),this.DrawShape(o,i)):(i.SetRGB(.6,.6,.6),this.DrawShape(o,i)):(i.SetRGB(.5,.5,.3),this.DrawShape(o,i));this.m_debugDraw.PopTransform(e)}if(e&t.b2DrawFlags.e_particleBit)for(let t=this.m_particleSystemList;t;t=t.m_next)this.DrawParticleSystem(t);if(e&t.b2DrawFlags.e_jointBit)for(let t=this.m_jointList;t;t=t.m_next)this.DrawJoint(t);if(e&t.b2DrawFlags.e_aabbBit){i.SetRGB(.9,.3,.9);const t=Bo.DrawDebugData_s_vs;for(let e=this.m_bodyList;e;e=e.m_next)if(e.IsActive())for(let s=e.GetFixtureList();s;s=s.m_next)for(let e=0;e<s.m_proxyCount;++e){const o=s.m_proxies[e].treeNode.aabb;t[0].Set(o.lowerBound.x,o.lowerBound.y),t[1].Set(o.upperBound.x,o.lowerBound.y),t[2].Set(o.upperBound.x,o.upperBound.y),t[3].Set(o.lowerBound.x,o.upperBound.y),this.m_debugDraw.DrawPolygon(t,4,i)}}if(e&t.b2DrawFlags.e_centerOfMassBit)for(let t=this.m_bodyList;t;t=t.m_next){const e=Bo.DrawDebugData_s_xf;e.q.Copy(t.m_xf.q),e.p.Copy(t.GetWorldCenter()),this.m_debugDraw.DrawTransform(e)}if(e&t.b2DrawFlags.e_controllerBit)for(let t=this.m_controllerList;t;t=t.m_next)t.Draw(this.m_debugDraw)}QueryAABB(...t){t[0]instanceof ps?this._QueryAABB(t[0],t[1]):this._QueryAABB(null,t[0],t[1])}_QueryAABB(t,e,i){if(this.m_contactManager.m_broadPhase.Query(e,e=>{const s=e.userData.fixture;return t?t.ReportFixture(s):!i||i(s)}),t instanceof ps)for(let s=this.m_particleSystemList;s;s=s.m_next)t.ShouldQueryParticleSystem(s)&&s.QueryAABB(t,e)}QueryAllAABB(t,e=[]){return this.QueryAABB(t,t=>(e.push(t),!0)),e}QueryPointAABB(...t){t[0]instanceof ps?this._QueryPointAABB(t[0],t[1]):this._QueryPointAABB(null,t[0],t[1])}_QueryPointAABB(t,e,i){if(this.m_contactManager.m_broadPhase.QueryPoint(e,e=>{const s=e.userData.fixture;return t?t.ReportFixture(s):!i||i(s)}),t instanceof ps)for(let s=this.m_particleSystemList;s;s=s.m_next)t.ShouldQueryParticleSystem(s)&&s.QueryPointAABB(t,e)}QueryAllPointAABB(t,e=[]){return this.QueryPointAABB(t,t=>(e.push(t),!0)),e}QueryFixtureShape(...t){t[0]instanceof ps?this._QueryFixtureShape(t[0],t[1],t[2],t[3]):this._QueryFixtureShape(null,t[0],t[1],t[2],t[3])}_QueryFixtureShape(t,e,i,s,o){const n=Bo.QueryFixtureShape_s_aabb;if(e.ComputeAABB(n,s,i),this.m_contactManager.m_broadPhase.Query(n,n=>{const r=n.userData,a=r.fixture;if(te(e,i,a.GetShape(),r.childIndex,s,a.GetBody().GetTransform())){if(t)return t.ReportFixture(a);if(o)return o(a)}return!0}),t instanceof ps)for(let r=this.m_particleSystemList;r;r=r.m_next)t.ShouldQueryParticleSystem(r)&&r.QueryAABB(t,n)}QueryAllFixtureShape(t,e,i,s=[]){return this.QueryFixtureShape(t,e,i,t=>(s.push(t),!0)),s}QueryFixturePoint(...t){t[0]instanceof ps?this._QueryFixturePoint(t[0],t[1]):this._QueryFixturePoint(null,t[0],t[1])}_QueryFixturePoint(t,e,i){if(this.m_contactManager.m_broadPhase.QueryPoint(e,s=>{const o=s.userData.fixture;if(o.TestPoint(e)){if(t)return t.ReportFixture(o);if(i)return i(o)}return!0}),t)for(let s=this.m_particleSystemList;s;s=s.m_next)t.ShouldQueryParticleSystem(s)&&s.QueryPointAABB(t,e)}QueryAllFixturePoint(t,e=[]){return this.QueryFixturePoint(t,t=>(e.push(t),!0)),e}RayCast(...t){t[0]instanceof fs?this._RayCast(t[0],t[1],t[2]):this._RayCast(null,t[0],t[1],t[2])}_RayCast(t,e,i,s){const o=Bo.RayCast_s_input;if(o.maxFraction=1,o.p1.Copy(e),o.p2.Copy(i),this.m_contactManager.m_broadPhase.RayCast(o,(o,n)=>{const r=n.userData,a=r.fixture,m=r.childIndex,l=Bo.RayCast_s_output;if(a.RayCast(l,o,m)){const o=l.fraction,n=Bo.RayCast_s_point;if(n.Set((1-o)*e.x+o*i.x,(1-o)*e.y+o*i.y),t)return t.ReportFixture(a,n,l.normal,o);if(s)return s(a,n,l.normal,o)}return o.maxFraction}),t)for(let n=this.m_particleSystemList;n;n=n.m_next)t.ShouldQueryParticleSystem(n)&&n.RayCast(t,e,i)}RayCastOne(t,e){let i=null,s=1;return this.RayCast(t,e,(t,e,o,n)=>(n<s&&(s=n,i=t),s)),i}RayCastAll(t,e,i=[]){return this.RayCast(t,e,(t,e,s,o)=>(i.push(t),1)),i}GetBodyList(){return this.m_bodyList}GetJointList(){return this.m_jointList}GetParticleSystemList(){return this.m_particleSystemList}GetContactList(){return this.m_contactManager.m_contactList}SetAllowSleeping(t){if(t!==this.m_allowSleep&&(this.m_allowSleep=t,!this.m_allowSleep))for(let e=this.m_bodyList;e;e=e.m_next)e.SetAwake(!0)}GetAllowSleeping(){return this.m_allowSleep}SetWarmStarting(t){this.m_warmStarting=t}GetWarmStarting(){return this.m_warmStarting}SetContinuousPhysics(t){this.m_continuousPhysics=t}GetContinuousPhysics(){return this.m_continuousPhysics}SetSubStepping(t){this.m_subStepping=t}GetSubStepping(){return this.m_subStepping}GetProxyCount(){return this.m_contactManager.m_broadPhase.GetProxyCount()}GetBodyCount(){return this.m_bodyCount}GetJointCount(){return this.m_jointCount}GetContactCount(){return this.m_contactManager.m_contactCount}GetTreeHeight(){return this.m_contactManager.m_broadPhase.GetTreeHeight()}GetTreeBalance(){return this.m_contactManager.m_broadPhase.GetTreeBalance()}GetTreeQuality(){return this.m_contactManager.m_broadPhase.GetTreeQuality()}SetGravity(t,e=!0){if(!it.IsEqualToV(this.m_gravity,t)&&(this.m_gravity.Copy(t),e))for(let i=this.m_bodyList;i;i=i.m_next)i.SetAwake(!0)}GetGravity(){return this.m_gravity}IsLocked(){return this.m_locked}SetAutoClearForces(t){this.m_clearForces=t}GetAutoClearForces(){return this.m_clearForces}ShiftOrigin(t){if(this.IsLocked())throw new Error;for(let e=this.m_bodyList;e;e=e.m_next)e.m_xf.p.SelfSub(t),e.m_sweep.c0.SelfSub(t),e.m_sweep.c.SelfSub(t);for(let e=this.m_jointList;e;e=e.m_next)e.ShiftOrigin(t);this.m_contactManager.m_broadPhase.ShiftOrigin(t)}GetContactManager(){return this.m_contactManager}GetProfile(){return this.m_profile}Dump(e){if(this.m_locked)return;e("const g: b2Vec2 = new b2Vec2(%.15f, %.15f);\n",this.m_gravity.x,this.m_gravity.y),e("this.m_world.SetGravity(g);\n"),e("const bodies: b2Body[] = [];\n"),e("const joints: b2Joint[] = [];\n");let i=0;for(let t=this.m_bodyList;t;t=t.m_next)t.m_islandIndex=i,t.Dump(e),++i;i=0;for(let t=this.m_jointList;t;t=t.m_next)t.m_index=i,++i;for(let s=this.m_jointList;s;s=s.m_next)s.m_type!==t.b2JointType.e_gearJoint&&(e("{\n"),s.Dump(e),e("}\n"));for(let s=this.m_jointList;s;s=s.m_next)s.m_type===t.b2JointType.e_gearJoint&&(e("{\n"),s.Dump(e),e("}\n"))}DrawJoint(e){if(null===this.m_debugDraw)return;const i=e.GetBodyA(),s=e.GetBodyB(),o=i.m_xf,n=s.m_xf,r=o.p,a=n.p,m=e.GetAnchorA(Bo.DrawJoint_s_p1),l=e.GetAnchorB(Bo.DrawJoint_s_p2),h=Bo.DrawJoint_s_color.SetRGB(.5,.8,.8);switch(e.m_type){case t.b2JointType.e_distanceJoint:this.m_debugDraw.DrawSegment(m,l,h);break;case t.b2JointType.e_pulleyJoint:{const t=e,i=t.GetGroundAnchorA(),s=t.GetGroundAnchorB();this.m_debugDraw.DrawSegment(i,m,h),this.m_debugDraw.DrawSegment(s,l,h),this.m_debugDraw.DrawSegment(i,s,h);break}case t.b2JointType.e_mouseJoint:{const t=Bo.DrawJoint_s_c;t.Set(0,1,0),this.m_debugDraw.DrawPoint(m,4,t),this.m_debugDraw.DrawPoint(l,4,t),t.Set(.8,.8,.8),this.m_debugDraw.DrawSegment(m,l,t);break}default:this.m_debugDraw.DrawSegment(r,m,h),this.m_debugDraw.DrawSegment(m,l,h),this.m_debugDraw.DrawSegment(a,l,h)}}DrawShape(e,i){if(null===this.m_debugDraw)return;const s=e.GetShape();switch(s.m_type){case t.b2ShapeType.e_circleShape:{const t=s,e=t.m_p,o=t.m_radius,n=it.UNITX;this.m_debugDraw.DrawSolidCircle(e,o,n,i);break}case t.b2ShapeType.e_edgeShape:{const t=s,e=t.m_vertex1,o=t.m_vertex2;this.m_debugDraw.DrawSegment(e,o,i);break}case t.b2ShapeType.e_chainShape:{const t=s,e=t.m_count,o=t.m_vertices,n=Bo.DrawShape_s_ghostColor.SetRGBA(.75*i.r,.75*i.g,.75*i.b,i.a);let r=o[0];if(this.m_debugDraw.DrawPoint(r,4,i),t.m_hasPrevVertex){const e=t.m_prevVertex;this.m_debugDraw.DrawSegment(e,r,n),this.m_debugDraw.DrawCircle(e,.1,n)}for(let s=1;s<e;++s){const t=o[s];this.m_debugDraw.DrawSegment(r,t,i),this.m_debugDraw.DrawPoint(t,4,i),r=t}if(t.m_hasNextVertex){const e=t.m_nextVertex;this.m_debugDraw.DrawSegment(e,r,n),this.m_debugDraw.DrawCircle(e,.1,n)}break}case t.b2ShapeType.e_polygonShape:{const t=s,e=t.m_count,o=t.m_vertices;this.m_debugDraw.DrawSolidPolygon(o,e,i);break}}}Solve(e){for(let t=this.m_bodyList;t;t=t.m_next)t.m_xf0.Copy(t.m_xf);for(let t=this.m_controllerList;t;t=t.m_next)t.Step(e);this.m_profile.solveInit=0,this.m_profile.solveVelocity=0,this.m_profile.solvePosition=0;const i=this.m_island;i.Initialize(this.m_bodyCount,this.m_contactManager.m_contactCount,this.m_jointCount,this.m_contactManager.m_contactListener);for(let t=this.m_bodyList;t;t=t.m_next)t.m_islandFlag=!1;for(let t=this.m_contactManager.m_contactList;t;t=t.m_next)t.m_islandFlag=!1;for(let t=this.m_jointList;t;t=t.m_next)t.m_islandFlag=!1;const s=this.s_stack;for(let n=this.m_bodyList;n;n=n.m_next){if(n.m_islandFlag)continue;if(!n.IsAwake()||!n.IsActive())continue;if(n.GetType()===t.b2BodyType.b2_staticBody)continue;i.Clear();let o=0;for(s[o++]=n,n.m_islandFlag=!0;o>0;){const e=s[--o];if(!e)throw new Error;if(i.AddBody(e),e.m_awakeFlag=!0,e.GetType()!==t.b2BodyType.b2_staticBody){for(let t=e.m_contactList;t;t=t.next){const e=t.contact;if(e.m_islandFlag)continue;if(!e.IsEnabled()||!e.IsTouching())continue;const n=e.m_fixtureA.m_isSensor,r=e.m_fixtureB.m_isSensor;if(n||r)continue;i.AddContact(e),e.m_islandFlag=!0;const a=t.other;a.m_islandFlag||(s[o++]=a,a.m_islandFlag=!0)}for(let t=e.m_jointList;t;t=t.next){if(t.joint.m_islandFlag)continue;const e=t.other;e.IsActive()&&(i.AddJoint(t.joint),t.joint.m_islandFlag=!0,e.m_islandFlag||(s[o++]=e,e.m_islandFlag=!0))}}}const r=new xs;i.Solve(r,e,this.m_gravity,this.m_allowSleep),this.m_profile.solveInit+=r.solveInit,this.m_profile.solveVelocity+=r.solveVelocity,this.m_profile.solvePosition+=r.solvePosition;for(let e=0;e<i.m_bodyCount;++e){const s=i.m_bodies[e];s.GetType()===t.b2BodyType.b2_staticBody&&(s.m_islandFlag=!1)}}for(let t=0;t<s.length&&s[t];++t)s[t]=null;const o=new ct;for(let n=this.m_bodyList;n;n=n.m_next)n.m_islandFlag&&n.GetType()!==t.b2BodyType.b2_staticBody&&n.SynchronizeFixtures();this.m_contactManager.FindNewContacts(),this.m_profile.broadphase=o.GetMilliseconds()}SolveTOI(e){const i=this.m_island;if(i.Initialize(2*d,d,0,this.m_contactManager.m_contactListener),this.m_stepComplete){for(let t=this.m_bodyList;t;t=t.m_next)t.m_islandFlag=!1,t.m_sweep.alpha0=0;for(let t=this.m_contactManager.m_contactList;t;t=t.m_next)t.m_toiFlag=!1,t.m_islandFlag=!1,t.m_toiCount=0,t.m_toi=1}for(;;){let o=null,n=1;for(let e=this.m_contactManager.m_contactList;e;e=e.m_next){if(!e.IsEnabled())continue;if(e.m_toiCount>u)continue;let i=1;if(e.m_toiFlag)i=e.m_toi;else{const s=e.GetFixtureA(),o=e.GetFixtureB();if(s.IsSensor()||o.IsSensor())continue;const n=s.GetBody(),r=o.GetBody(),a=n.m_type,m=r.m_type,l=n.IsAwake()&&a!==t.b2BodyType.b2_staticBody,h=r.IsAwake()&&m!==t.b2BodyType.b2_staticBody;if(!l&&!h)continue;const _=n.IsBullet()||a!==t.b2BodyType.b2_dynamicBody,c=r.IsBullet()||m!==t.b2BodyType.b2_dynamicBody;if(!_&&!c)continue;let u=n.m_sweep.alpha0;n.m_sweep.alpha0<r.m_sweep.alpha0?(u=r.m_sweep.alpha0,n.m_sweep.Advance(u)):r.m_sweep.alpha0<n.m_sweep.alpha0&&(u=n.m_sweep.alpha0,r.m_sweep.Advance(u));const d=e.GetChildIndexA(),p=e.GetChildIndexB(),f=Bo.SolveTOI_s_toi_input;f.proxyA.SetShape(s.GetShape(),d),f.proxyB.SetShape(o.GetShape(),p),f.sweepA.Copy(n.m_sweep),f.sweepB.Copy(r.m_sweep),f.tMax=1;const y=Bo.SolveTOI_s_toi_output;Pe(y,f);const x=y.t;i=y.state===t.b2TOIOutputState.e_touching?E(u+(1-u)*x,1):1,e.m_toi=i,e.m_toiFlag=!0}i<n&&(o=e,n=i)}if(null===o||1-10*s<n){this.m_stepComplete=!0;break}const r=o.GetFixtureA(),a=o.GetFixtureB(),m=r.GetBody(),l=a.GetBody(),h=Bo.SolveTOI_s_backup1.Copy(m.m_sweep),_=Bo.SolveTOI_s_backup2.Copy(l.m_sweep);if(m.Advance(n),l.Advance(n),o.Update(this.m_contactManager.m_contactListener),o.m_toiFlag=!1,++o.m_toiCount,!o.IsEnabled()||!o.IsTouching()){o.SetEnabled(!1),m.m_sweep.Copy(h),l.m_sweep.Copy(_),m.SynchronizeTransform(),l.SynchronizeTransform();continue}m.SetAwake(!0),l.SetAwake(!0),i.Clear(),i.AddBody(m),i.AddBody(l),i.AddContact(o),m.m_islandFlag=!0,l.m_islandFlag=!0,o.m_islandFlag=!0;for(let e=0;e<2;++e){const s=0===e?m:l;if(s.m_type===t.b2BodyType.b2_dynamicBody)for(let e=s.m_contactList;e&&i.m_bodyCount!==i.m_bodyCapacity&&i.m_contactCount!==i.m_contactCapacity;e=e.next){const o=e.contact;if(o.m_islandFlag)continue;const r=e.other;if(r.m_type===t.b2BodyType.b2_dynamicBody&&!s.IsBullet()&&!r.IsBullet())continue;const a=o.m_fixtureA.m_isSensor,m=o.m_fixtureB.m_isSensor;if(a||m)continue;const l=Bo.SolveTOI_s_backup.Copy(r.m_sweep);r.m_islandFlag||r.Advance(n),o.Update(this.m_contactManager.m_contactListener),o.IsEnabled()&&o.IsTouching()?(o.m_islandFlag=!0,i.AddContact(o),r.m_islandFlag||(r.m_islandFlag=!0,r.m_type!==t.b2BodyType.b2_staticBody&&r.SetAwake(!0),i.AddBody(r))):(r.m_sweep.Copy(l),r.SynchronizeTransform())}}const c=Bo.SolveTOI_s_subStep;c.dt=(1-n)*e.dt,c.inv_dt=1/c.dt,c.dtRatio=1,c.positionIterations=20,c.velocityIterations=e.velocityIterations,c.particleIterations=e.particleIterations,c.warmStarting=!1,i.SolveTOI(c,m.m_islandIndex,l.m_islandIndex);for(let e=0;e<i.m_bodyCount;++e){const s=i.m_bodies[e];if(s.m_islandFlag=!1,s.m_type===t.b2BodyType.b2_dynamicBody){s.SynchronizeFixtures();for(let t=s.m_contactList;t;t=t.next)t.contact.m_toiFlag=!1,t.contact.m_islandFlag=!1}}if(this.m_contactManager.FindNewContacts(),this.m_subStepping){this.m_stepComplete=!1;break}}}AddController(t){return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=t),this.m_controllerList=t,++this.m_controllerCount,t}RemoveController(t){return t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),this.m_controllerList===t&&(this.m_controllerList=t.m_next),--this.m_controllerCount,t.m_prev=null,t.m_next=null,t}}Bo.Step_s_step=new Bs,Bo.Step_s_stepTimer=new ct,Bo.Step_s_timer=new ct,Bo.DrawDebugData_s_color=new ht(0,0,0),Bo.DrawDebugData_s_vs=it.MakeArray(4),Bo.DrawDebugData_s_xf=new mt,Bo.QueryFixtureShape_s_aabb=new Wt,Bo.RayCast_s_input=new Ut,Bo.RayCast_s_output=new Zt,Bo.RayCast_s_point=new it,Bo.DrawJoint_s_p1=new it,Bo.DrawJoint_s_p2=new it,Bo.DrawJoint_s_color=new ht(.5,.8,.8),Bo.DrawJoint_s_c=new ht,Bo.DrawShape_s_ghostColor=new ht,Bo.SolveTOI_s_subStep=new Bs,Bo.SolveTOI_s_backup=new lt,Bo.SolveTOI_s_backup1=new lt,Bo.SolveTOI_s_backup2=new lt,Bo.SolveTOI_s_toi_input=new pe,Bo.SolveTOI_s_toi_output=new xe;class So{constructor(t,e){this.prevBody=null,this.nextBody=null,this.prevController=null,this.nextController=null,this.controller=t,this.body=e}}class Ao{constructor(){this.m_bodyList=null,this.m_bodyCount=0,this.m_prev=null,this.m_next=null}GetNext(){return this.m_next}GetPrev(){return this.m_prev}GetBodyList(){return this.m_bodyList}AddBody(t){const e=new So(this,t);e.nextBody=this.m_bodyList,e.prevBody=null,this.m_bodyList&&(this.m_bodyList.prevBody=e),this.m_bodyList=e,++this.m_bodyCount,e.nextController=t.m_controllerList,e.prevController=null,t.m_controllerList&&(t.m_controllerList.prevController=e),t.m_controllerList=e,++t.m_controllerCount}RemoveBody(t){if(this.m_bodyCount<=0)throw new Error;let e=this.m_bodyList;for(;e&&e.body!==t;)e=e.nextBody;if(null===e)throw new Error;e.prevBody&&(e.prevBody.nextBody=e.nextBody),e.nextBody&&(e.nextBody.prevBody=e.prevBody),this.m_bodyList===e&&(this.m_bodyList=e.nextBody),--this.m_bodyCount,e.nextController&&(e.nextController.prevController=e.prevController),e.prevController&&(e.prevController.nextController=e.nextController),t.m_controllerList===e&&(t.m_controllerList=e.nextController),--t.m_controllerCount}Clear(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body);this.m_bodyCount=0}}class bo extends Ao{constructor(){super(...arguments),this.A=new it(0,0)}Step(t){const e=it.MulSV(t.dt,this.A,bo.Step_s_dtA);for(let i=this.m_bodyList;i;i=i.nextBody){const t=i.body;t.IsAwake()&&t.SetLinearVelocity(it.AddVV(t.GetLinearVelocity(),e,it.s_t0))}}Draw(t){}}bo.Step_s_dtA=new it;class Co extends Ao{constructor(){super(...arguments),this.G=1,this.invSqr=!0}Step(t){if(this.invSqr)for(let e=this.m_bodyList;e;e=e.nextBody){const t=e.body,i=t.GetWorldCenter(),o=t.GetMass();for(let n=this.m_bodyList;n&&n!==e;n=n.nextBody){const e=n.body,r=e.GetWorldCenter(),a=e.GetMass(),m=r.x-i.x,l=r.y-i.y,h=m*m+l*l;if(h<s)continue;const _=Co.Step_s_f.Set(m,l);_.SelfMul(this.G/h/Q(h)*o*a),t.IsAwake()&&t.ApplyForce(_,i),e.IsAwake()&&e.ApplyForce(_.SelfMul(-1),r)}}else for(let e=this.m_bodyList;e;e=e.nextBody){const t=e.body,i=t.GetWorldCenter(),o=t.GetMass();for(let n=this.m_bodyList;n&&n!==e;n=n.nextBody){const e=n.body,r=e.GetWorldCenter(),a=e.GetMass(),m=r.x-i.x,l=r.y-i.y,h=m*m+l*l;if(h<s)continue;const _=Co.Step_s_f.Set(m,l);_.SelfMul(this.G/h*o*a),t.IsAwake()&&t.ApplyForce(_,i),e.IsAwake()&&e.ApplyForce(_.SelfMul(-1),r)}}}Draw(t){}}Co.Step_s_f=new it;class Vo extends Ao{constructor(){super(...arguments),this.T=new nt,this.maxTimestep=0}Step(t){let e=t.dt;if(!(e<=s)){e>this.maxTimestep&&this.maxTimestep>0&&(e=this.maxTimestep);for(let t=this.m_bodyList;t;t=t.nextBody){const i=t.body;if(!i.IsAwake())continue;const s=i.GetWorldVector(nt.MulMV(this.T,i.GetLocalVector(i.GetLinearVelocity(),it.s_t0),it.s_t1),Vo.Step_s_damping);i.SetLinearVelocity(it.AddVV(i.GetLinearVelocity(),it.MulSV(e,s,it.s_t0),it.s_t1))}}}Draw(t){}SetAxisAligned(t,e){this.T.ex.x=-t,this.T.ex.y=0,this.T.ey.x=0,this.T.ey.y=-e,this.maxTimestep=t>0||e>0?1/O(t,e):0}}Vo.Step_s_damping=new it;class go{constructor(){this.m_count=0,this.m_ps=[],this.m_p0s=[],this.m_vs=[],this.m_ims=[],this.m_Ls=[],this.m_as=[],this.m_gravity=new it,this.m_damping=0,this.m_k2=1,this.m_k3=.1}GetVertexCount(){return this.m_count}GetVertices(){return this.m_ps}Initialize(t){this.m_count=t.count,this.m_ps=it.MakeArray(this.m_count),this.m_p0s=it.MakeArray(this.m_count),this.m_vs=it.MakeArray(this.m_count),this.m_ims=q(this.m_count);for(let s=0;s<this.m_count;++s){this.m_ps[s].Copy(t.vertices[s]),this.m_p0s[s].Copy(t.vertices[s]),this.m_vs[s].SetZero();const e=t.masses[s];this.m_ims[s]=e>0?1/e:0}const e=this.m_count-1,i=this.m_count-2;this.m_Ls=q(e),this.m_as=q(i);for(let s=0;s<e;++s){const t=this.m_ps[s],e=this.m_ps[s+1];this.m_Ls[s]=it.DistanceVV(t,e)}for(let s=0;s<i;++s){const t=this.m_ps[s],e=this.m_ps[s+1],i=this.m_ps[s+2],o=it.SubVV(e,t,it.s_t0),n=it.SubVV(i,e,it.s_t1),r=it.CrossVV(o,n),a=it.DotVV(o,n);this.m_as[s]=et(r,a)}this.m_gravity.Copy(t.gravity),this.m_damping=t.damping,this.m_k2=t.k2,this.m_k3=t.k3}Step(t,e){if(0===t)return;const i=Math.exp(-t*this.m_damping);for(let o=0;o<this.m_count;++o)this.m_p0s[o].Copy(this.m_ps[o]),this.m_ims[o]>0&&this.m_vs[o].SelfMulAdd(t,this.m_gravity),this.m_vs[o].SelfMul(i),this.m_ps[o].SelfMulAdd(t,this.m_vs[o]);for(let o=0;o<e;++o)this.SolveC2(),this.SolveC3(),this.SolveC2();const s=1/t;for(let o=0;o<this.m_count;++o)it.MulSV(s,it.SubVV(this.m_ps[o],this.m_p0s[o],it.s_t0),this.m_vs[o])}SolveC2(){const t=this.m_count-1;for(let e=0;e<t;++e){const t=this.m_ps[e],i=this.m_ps[e+1],s=it.SubVV(i,t,go.s_d),o=s.Normalize(),n=this.m_ims[e],r=this.m_ims[e+1];if(n+r===0)continue;const a=n/(n+r),m=r/(n+r);t.SelfMulSub(this.m_k2*a*(this.m_Ls[e]-o),s),i.SelfMulAdd(this.m_k2*m*(this.m_Ls[e]-o),s)}}SetAngle(t){const e=this.m_count-2;for(let i=0;i<e;++i)this.m_as[i]=t}SolveC3(){const t=this.m_count-2;for(let e=0;e<t;++e){const t=this.m_ps[e],i=this.m_ps[e+1],s=this.m_ps[e+2],o=this.m_ims[e],r=this.m_ims[e+1],a=this.m_ims[e+2],m=it.SubVV(i,t,go.s_d1),l=it.SubVV(s,i,go.s_d2),h=m.LengthSquared(),_=l.LengthSquared();if(h*_==0)continue;const c=it.CrossVV(m,l),u=it.DotVV(m,l);let d=et(c,u);const p=it.MulSV(-1/h,m.SelfSkew(),go.s_Jd1),f=it.MulSV(1/_,l.SelfSkew(),go.s_Jd2),y=it.NegV(p,go.s_J1),x=it.SubVV(p,f,go.s_J2),B=f;let S=o*it.DotVV(y,y)+r*it.DotVV(x,x)+a*it.DotVV(B,B);if(0===S)continue;S=1/S;let A=d-this.m_as[e];for(;A>n;)A=(d-=2*n)-this.m_as[e];for(;A<-n;)A=(d+=2*n)-this.m_as[e];const b=-this.m_k3*S*A;t.SelfMulAdd(o*b,y),i.SelfMulAdd(r*b,x),s.SelfMulAdd(a*b,B)}}Draw(t){const e=new ht(.4,.5,.7);for(let i=0;i<this.m_count-1;++i)t.DrawSegment(this.m_ps[i],this.m_ps[i+1],e)}}go.s_d=new it,go.s_d1=new it,go.s_d2=new it,go.s_Jd1=new it,go.s_Jd2=new it,go.s_J1=new it,go.s_J2=new it,t.b2AABB=Wt,t.b2Abs=j,t.b2Acos=$,t.b2Alloc=function(t){return null},t.b2AreaJoint=ji,t.b2AreaJointDef=class extends qi{constructor(){super(t.b2JointType.e_areaJoint),this.bodies=[],this.frequencyHz=0,this.dampingRatio=0}AddBody(t){this.bodies.push(t),1===this.bodies.length?this.bodyA=t:2===this.bodies.length&&(this.bodyB=t)}},t.b2Asin=tt,t.b2Assert=function(t,...e){if(!t)throw new Error(...e)},t.b2Atan2=et,t.b2BlockAllocator=class{},t.b2Body=Ri,t.b2BodyDef=class{constructor(){this.type=t.b2BodyType.b2_staticBody,this.position=new it(0,0),this.angle=0,this.linearVelocity=new it(0,0),this.angularVelocity=0,this.linearDamping=0,this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.active=!0,this.userData=null,this.gravityScale=1}},t.b2BroadPhase=re,t.b2BuoyancyController=class extends Ao{constructor(){super(...arguments),this.normal=new it(0,1),this.offset=0,this.density=0,this.velocity=new it(0,0),this.linearDrag=0,this.angularDrag=0,this.useDensity=!1,this.useWorldGravity=!0,this.gravity=new it(0,0)}Step(t){if(this.m_bodyList){this.useWorldGravity&&this.gravity.Copy(this.m_bodyList.body.GetWorld().GetGravity());for(let t=this.m_bodyList;t;t=t.nextBody){const e=t.body;if(!e.IsAwake())continue;const i=new it,o=new it;let n=0,r=0;for(let t=e.GetFixtureList();t;t=t.m_next){const s=new it,a=t.GetShape().ComputeSubmergedArea(this.normal,this.offset,e.GetTransform(),s);n+=a,i.x+=a*s.x,i.y+=a*s.y;let m=0;r+=a*(m=this.useDensity?t.GetDensity():1),o.x+=a*s.x*m,o.y+=a*s.y*m}if(i.x/=n,i.y/=n,o.x/=r,o.y/=r,n<s)continue;const a=this.gravity.Clone().SelfNeg();a.SelfMul(this.density*n),e.ApplyForce(a,o);const m=e.GetLinearVelocityFromWorldPoint(i,new it);m.SelfSub(this.velocity),m.SelfMul(-this.linearDrag*n),e.ApplyForce(m,i),e.ApplyTorque(-e.GetInertia()/e.GetMass()*n*e.GetAngularVelocity()*this.angularDrag)}}}Draw(t){const e=100,i=new it,s=new it;i.x=this.normal.x*this.offset+this.normal.y*e,i.y=this.normal.y*this.offset-this.normal.x*e,s.x=this.normal.x*this.offset-this.normal.y*e,s.y=this.normal.y*this.offset+this.normal.x*e;const o=new ht(0,0,.8);t.DrawSegment(i,s,o)}},t.b2CalculateParticleIterations=Ts,t.b2ChainAndCircleContact=ms,t.b2ChainAndPolygonContact=ls,t.b2ChainShape=Gi,t.b2CircleContact=ss,t.b2CircleShape=Mi,t.b2Clamp=X,t.b2ClipSegmentToLine=Ht,t.b2ClipVertex=Xt,t.b2CollideCircles=De,t.b2CollideEdgeAndCircle=di,t.b2CollideEdgeAndPolygon=Ai,t.b2CollidePolygonAndCircle=Re,t.b2CollidePolygons=ni,t.b2Color=ht,t.b2ConstantAccelController=bo,t.b2ConstantForceController=class extends Ao{constructor(){super(...arguments),this.F=new it(0,0)}Step(t){for(let e=this.m_bodyList;e;e=e.nextBody){const t=e.body;t.IsAwake()&&t.ApplyForce(this.F,t.GetWorldCenter())}}Draw(t){}},t.b2Contact=is,t.b2ContactEdge=es,t.b2ContactFactory=_s,t.b2ContactFeature=Jt,t.b2ContactFilter=cs,t.b2ContactID=Nt,t.b2ContactImpulse=us,t.b2ContactListener=ds,t.b2ContactManager=ys,t.b2ContactPositionConstraint=vs,t.b2ContactRegister=hs,t.b2ContactSolver=Ps,t.b2ContactSolverDef=ws,t.b2ContactVelocityConstraint=gs,t.b2Controller=Ao,t.b2ControllerEdge=So,t.b2Cos=Y,t.b2Counter=class{constructor(){this.m_count=0,this.m_min_count=0,this.m_max_count=0}GetCount(){return this.m_count}GetMinCount(){return this.m_min_count}GetMaxCount(){return this.m_max_count}ResetCount(){const t=this.m_count;return this.m_count=0,t}ResetMinCount(){this.m_min_count=0}ResetMaxCount(){this.m_max_count=0}Increment(){this.m_count++,this.m_max_count<this.m_count&&(this.m_max_count=this.m_count)}Decrement(){this.m_count--,this.m_min_count>this.m_count&&(this.m_min_count=this.m_count)}},t.b2DegToRad=function(t){return t*z},t.b2DestructionListener=class{SayGoodbyeJoint(t){}SayGoodbyeFixture(t){}SayGoodbyeParticleGroup(t){}SayGoodbyeParticle(t,e){}},t.b2Distance=Mt,t.b2DistanceInput=ft,t.b2DistanceJoint=Ni,t.b2DistanceJointDef=Ji,t.b2DistanceOutput=yt,t.b2DistanceProxy=dt,t.b2Draw=class{constructor(){this.m_drawFlags=0}SetFlags(t){this.m_drawFlags=t}GetFlags(){return this.m_drawFlags}AppendFlags(t){this.m_drawFlags|=t}ClearFlags(t){this.m_drawFlags&=~t}},t.b2DynamicTree=se,t.b2EdgeAndCircleContact=rs,t.b2EdgeAndPolygonContact=as,t.b2EdgeShape=Ii,t.b2Filter=Di,t.b2Fixture=Li,t.b2FixtureDef=Fi,t.b2FixtureParticleQueryCallback=Ys,t.b2FixtureProxy=Ti,t.b2Free=function(t){},t.b2FrictionJoint=Ei,t.b2FrictionJointDef=class extends qi{constructor(){super(t.b2JointType.e_frictionJoint),this.localAnchorA=new it,this.localAnchorB=new it,this.maxForce=0,this.maxTorque=0}Initialize(t,e,i){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB)}},t.b2GearJoint=Oi,t.b2GearJointDef=class extends qi{constructor(){super(t.b2JointType.e_gearJoint),this.ratio=1}},t.b2GetPointStates=function(e,i,s,o){let n;for(n=0;n<s.pointCount;++n){const i=s.points[n].id.key;e[n]=t.b2PointState.b2_removeState;for(let s=0,r=o.pointCount;s<r;++s)if(o.points[s].id.key===i){e[n]=t.b2PointState.b2_persistState;break}}for(;n<r;++n)e[n]=t.b2PointState.b2_nullState;for(n=0;n<o.pointCount;++n){const e=o.points[n].id.key;i[n]=t.b2PointState.b2_addState;for(let o=0,r=s.pointCount;o<r;++o)if(s.points[o].id.key===e){i[n]=t.b2PointState.b2_persistState;break}}for(;n<r;++n)i[n]=t.b2PointState.b2_nullState},t.b2GravityController=Co,t.b2GrowableBuffer=Hs,t.b2GrowableStack=ut,t.b2InvSqrt=W,t.b2IsPowerOfTwo=function(t){return t>0&&0==(t&t-1)},t.b2IsValid=U,t.b2Island=Is,t.b2Jacobian=class{constructor(){this.linear=new it,this.angularA=0,this.angularB=0}SetZero(){return this.linear.SetZero(),this.angularA=0,this.angularB=0,this}Set(t,e,i){return this.linear.Copy(t),this.angularA=e,this.angularB=i,this}},t.b2Joint=zi,t.b2JointDef=qi,t.b2JointEdge=ki,t.b2Log=function(t,...e){},t.b2MakeArray=k,t.b2MakeNullArray=function(t){const e=new Array(t);for(let i=0;i<t;++i)e[i]=null;return e},t.b2MakeNumberArray=q,t.b2Manifold=Et,t.b2ManifoldPoint=jt,t.b2MassData=bi,t.b2Mat22=nt,t.b2Mat33=rt,t.b2Max=O,t.b2Maybe=e,t.b2Min=E,t.b2MixFriction=$i,t.b2MixRestitution=ts,t.b2MotorJoint=Xi,t.b2MotorJointDef=class extends qi{constructor(){super(t.b2JointType.e_motorJoint),this.linearOffset=new it(0,0),this.angularOffset=0,this.maxForce=1,this.maxTorque=1,this.correctionFactor=.3}Initialize(t,e){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(this.bodyB.GetPosition(),this.linearOffset);const i=this.bodyA.GetAngle(),s=this.bodyB.GetAngle();this.angularOffset=s-i}},t.b2MouseJoint=Ui,t.b2MouseJointDef=class extends qi{constructor(){super(t.b2JointType.e_mouseJoint),this.target=new it,this.maxForce=0,this.frequencyHz=5,this.dampingRatio=.7}},t.b2NextPowerOfTwo=function(t){return t|=t>>1&2147483647,t|=t>>2&1073741823,t|=t>>4&268435455,t|=t>>8&16777215,1+(t|=t>>16&65535)},t.b2Pair=ne,t.b2PairLessThan=ae,t.b2ParseInt=function(t){return parseInt(t,10)},t.b2ParseUInt=function(t){return Math.abs(parseInt(t,10))},t.b2ParticleBodyContact=$s,t.b2ParticleContact=Ks,t.b2ParticleDef=Fs,t.b2ParticleGroup=ks,t.b2ParticleGroupDef=Rs,t.b2ParticleHandle=Ls,t.b2ParticlePair=to,t.b2ParticlePairSet=ho,t.b2ParticleSystem=so,t.b2ParticleSystemDef=io,t.b2ParticleSystem_CompositeShape=po,t.b2ParticleSystem_ConnectionFilter=_o,t.b2ParticleSystem_DestroyParticlesInShapeCallback=co,t.b2ParticleSystem_FixedSetAllocator=mo,t.b2ParticleSystem_FixtureParticle=class{constructor(t,e){this.second=V,this.first=t,this.second=e}},t.b2ParticleSystem_FixtureParticleSet=lo,t.b2ParticleSystem_InsideBoundsEnumerator=ro,t.b2ParticleSystem_JoinParticleGroupsFilter=uo,t.b2ParticleSystem_ParticleListNode=ao,t.b2ParticleSystem_ParticlePair=class{constructor(t,e){this.first=V,this.second=V,this.first=t,this.second=e}},t.b2ParticleSystem_Proxy=no,t.b2ParticleSystem_ReactiveFilter=fo,t.b2ParticleSystem_SolveCollisionCallback=xo,t.b2ParticleSystem_UpdateBodyContactsCallback=yo,t.b2ParticleSystem_UserOverridableBuffer=oo,t.b2ParticleTriad=eo,t.b2PolygonAndCircleContact=ns,t.b2PolygonContact=os,t.b2PolygonShape=Pi,t.b2Position=Ss,t.b2PositionSolverManifold=Ms,t.b2Pow=H,t.b2PrismaticJoint=Zi,t.b2PrismaticJointDef=class extends qi{constructor(){super(t.b2JointType.e_prismaticJoint),this.localAnchorA=new it,this.localAnchorB=new it,this.localAxisA=new it(1,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0}Initialize(t,e,i,s){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.bodyA.GetLocalVector(s,this.localAxisA),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}},t.b2Profile=xs,t.b2PulleyJoint=Wi,t.b2PulleyJointDef=class extends qi{constructor(){super(t.b2JointType.e_pulleyJoint),this.groundAnchorA=new it(-1,1),this.groundAnchorB=new it(1,1),this.localAnchorA=new it(-1,0),this.localAnchorB=new it(1,0),this.lengthA=0,this.lengthB=0,this.ratio=1,this.collideConnected=!0}Initialize(t,e,i,s,o,n,r){this.bodyA=t,this.bodyB=e,this.groundAnchorA.Copy(i),this.groundAnchorB.Copy(s),this.bodyA.GetLocalPoint(o,this.localAnchorA),this.bodyB.GetLocalPoint(n,this.localAnchorB),this.lengthA=it.DistanceVV(o,i),this.lengthB=it.DistanceVV(n,s),this.ratio=r}},t.b2QueryCallback=ps,t.b2RadToDeg=function(t){return t*J},t.b2Random=function(){return 2*Math.random()-1},t.b2RandomRange=function(t,e){return(e-t)*Math.random()+t},t.b2RayCastCallback=fs,t.b2RayCastInput=Ut,t.b2RayCastOutput=Zt,t.b2RevoluteJoint=Qi,t.b2RevoluteJointDef=class extends qi{constructor(){super(t.b2JointType.e_revoluteJoint),this.localAnchorA=new it(0,0),this.localAnchorB=new it(0,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerAngle=0,this.upperAngle=0,this.enableMotor=!1,this.motorSpeed=0,this.maxMotorTorque=0}Initialize(t,e,i){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}},t.b2Rope=go,t.b2RopeDef=class{constructor(){this.vertices=[],this.count=0,this.masses=[],this.gravity=new it(0,0),this.damping=.1,this.k2=.9,this.k3=.1}},t.b2RopeJoint=Hi,t.b2RopeJointDef=class extends qi{constructor(){super(t.b2JointType.e_ropeJoint),this.localAnchorA=new it(-1,0),this.localAnchorB=new it(1,0),this.maxLength=0}},t.b2Rot=at,t.b2SeparationFunction=Be,t.b2Shape=wi,t.b2ShapeCast=function(t,e){t.iterations=0,t.lambda=1,t.normal.SetZero(),t.point.SetZero();const i=e.proxyA,s=e.proxyB,o=O(i.m_radius,c)+O(s.m_radius,c),n=e.transformA,r=e.transformB,a=e.translationB,m=Pt.Set(0,0);let l=0;const _=It;_.m_count=0;const u=_.m_vertices;let d=i.GetSupport(at.MulTRV(n.q,it.NegV(a,it.s_t1),it.s_t0)),p=mt.MulXV(n,i.GetVertex(d),Gt),f=s.GetSupport(at.MulTRV(r.q,a,it.s_t0)),y=mt.MulXV(r,s.GetVertex(f),Dt);const x=it.SubVV(p,y,Ft),B=O(c,o-c),S=.5*h;let A=0;for(;A<20&&j(x.Length()-B)>S;){t.iterations+=1,d=i.GetSupport(at.MulTRV(n.q,it.NegV(x,it.s_t1),it.s_t0)),p=mt.MulXV(n,i.GetVertex(d),Gt),f=s.GetSupport(at.MulTRV(r.q,x,it.s_t0)),y=mt.MulXV(r,s.GetVertex(f),Dt);const e=it.SubVV(p,y,Tt);x.Normalize();const o=it.DotVV(x,e),h=it.DotVV(x,a);if(o-B>l*h){if(h<=0)return!1;if((l=(o-B)/h)>1)return!1;m.Copy(x).SelfNeg(),_.m_count=0}const c=u[_.m_count];switch(c.indexA=f,c.wA.Copy(y).SelfMulAdd(l,a),c.indexB=d,c.wB.Copy(p),c.w.Copy(c.wB).SelfSub(c.wA),c.a=1,_.m_count+=1,_.m_count){case 1:break;case 2:_.Solve2();break;case 3:_.Solve3()}if(3===_.m_count)return!1;_.GetClosestPoint(x),++A}const b=Lt,C=Rt;return _.GetWitnessPoints(b,C),x.LengthSquared()>0&&(m.Copy(x).SelfNeg(),m.Normalize()),t.normal.Copy(m),t.lambda=l,t.iterations=A,!0},t.b2ShapeCastInput=class{constructor(){this.proxyA=new dt,this.proxyB=new dt,this.transformA=new mt,this.transformB=new mt,this.translationB=new it}},t.b2ShapeCastOutput=class{constructor(){this.point=new it,this.normal=new it,this.lambda=0,this.iterations=0}},t.b2Simplex=Bt,t.b2SimplexCache=pt,t.b2SimplexVertex=xt,t.b2Sin=K,t.b2SolverData=bs,t.b2Sq=Z,t.b2Sqrt=Q,t.b2StackAllocator=class{},t.b2Swap=function(t,e){const i=t[0];t[0]=e[0],e[0]=i},t.b2Sweep=lt,t.b2TOIInput=pe,t.b2TOIOutput=xe,t.b2TensorDampingController=Vo,t.b2TestOverlapAABB=Qt,t.b2TestOverlapShape=te,t.b2TimeOfImpact=Pe,t.b2TimeStep=Bs,t.b2Timer=ct,t.b2Transform=mt,t.b2TreeNode=ie,t.b2Vec2=it,t.b2Vec2_zero=st,t.b2Vec3=ot,t.b2Velocity=As,t.b2VelocityConstraintPoint=Vs,t.b2Version=L,t.b2WeldJoint=Yi,t.b2WeldJointDef=class extends qi{constructor(){super(t.b2JointType.e_weldJoint),this.localAnchorA=new it,this.localAnchorB=new it,this.referenceAngle=0,this.frequencyHz=0,this.dampingRatio=0}Initialize(t,e,i){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}},t.b2WheelJoint=Ki,t.b2WheelJointDef=class extends qi{constructor(){super(t.b2JointType.e_wheelJoint),this.localAnchorA=new it(0,0),this.localAnchorB=new it(0,0),this.localAxisA=new it(1,0),this.enableMotor=!1,this.maxMotorTorque=0,this.motorSpeed=0,this.frequencyHz=2,this.dampingRatio=.7}Initialize(t,e,i,s){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.bodyA.GetLocalVector(s,this.localAxisA)}},t.b2World=Bo,t.b2WorldManifold=Ot,t.b2_180_over_pi=J,t.b2_aabbExtension=m,t.b2_aabbMultiplier=l,t.b2_angularSleepTolerance=T,t.b2_angularSlop=_,t.b2_barrierCollisionTime=G,t.b2_baumgarte=b,t.b2_branch="master",t.b2_commit="fbf51801d80fc389d43dc46524520e89043b6faf",t.b2_epsilon=s,t.b2_epsilon_sq=o,t.b2_gjk_reset=function(){t.b2_gjkCalls=0,t.b2_gjkIters=0,t.b2_gjkMaxIters=0},t.b2_invalidParticleIndex=V,t.b2_linearSleepTolerance=F,t.b2_linearSlop=h,t.b2_maxAngularCorrection=y,t.b2_maxFloat=i,t.b2_maxLinearCorrection=f,t.b2_maxManifoldPoints=r,t.b2_maxParticleForce=M,t.b2_maxParticleIndex=2147483647,t.b2_maxParticlePressure=w,t.b2_maxPolygonVertices=a,t.b2_maxRotation=S,t.b2_maxRotationSquared=A,t.b2_maxSubSteps=u,t.b2_maxTOIContacts=d,t.b2_maxTranslation=x,t.b2_maxTranslationSquared=B,t.b2_maxTriadDistance=2,t.b2_maxTriadDistanceSquared=P,t.b2_minParticleSystemBufferCapacity=I,t.b2_minParticleWeight=v,t.b2_minPulleyLength=2,t.b2_particleStride=g,t.b2_pi=n,t.b2_pi_over_180=z,t.b2_polygonRadius=c,t.b2_timeToSleep=D,t.b2_toiBaumgarte=C,t.b2_toi_reset=function(){t.b2_toiTime=0,t.b2_toiMaxTime=0,t.b2_toiCalls=0,t.b2_toiIters=0,t.b2_toiMaxIters=0,t.b2_toiRootIters=0,t.b2_toiMaxRootIters=0},t.b2_two_pi=N,t.b2_velocityThreshold=p,t.b2_version=R,t.g_blockSolve=Cs,Object.defineProperty(t,"__esModule",{value:!0})});
},{}],"W87g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flyoverBox2dFactory=void 0;const e=require("@flyover/box2d"),o=(o,t,r,y)=>{const d=new e.b2World(new e.b2Vec2(o.x,o.y)),n=d.CreateBody(new e.b2BodyDef),x=new e.b2EdgeShape;return x.Set(new e.b2Vec2(t.x,t.y),new e.b2Vec2(r.x,r.y)),n.CreateFixture(x,y),{name:"@flyover/box2d",createBoxShape:(o,t)=>(new e.b2PolygonShape).SetAsBox(o,t),createBoxBody(o,t,r,y){const n=new e.b2BodyDef;n.type=e.b2BodyType.b2_dynamicBody,n.position.Set(t,r),d.CreateBody(n).CreateFixture(o,y)},step(e,o,t){d.Step(e,o,t)}}};exports.flyoverBox2dFactory=o;
},{"@flyover/box2d":"Ew5n"}],"HBwq":[function(require,module,exports) {
var COMPILED=!0,goog=goog||{};goog.global=this,goog.isDef=function(o){return void 0!==o},goog.exportPath_=function(o,t,e){o=o.split("."),e=e||goog.global,o[0]in e||!e.execScript||e.execScript("var "+o[0]);for(var r;o.length&&(r=o.shift());)!o.length&&goog.isDef(t)?e[r]=t:e=e[r]?e[r]:e[r]={}},goog.define=function(o,t){var e=t;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,o)?e=goog.global.CLOSURE_UNCOMPILED_DEFINES[o]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,o)&&(e=goog.global.CLOSURE_DEFINES[o])),goog.exportPath_(o,e)},goog.DEBUG=!1,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.provide=function(o){if(!COMPILED&&goog.isProvided_(o))throw Error('Namespace "'+o+'" already declared.');goog.constructNamespace_(o)},goog.constructNamespace_=function(o,t){if(!COMPILED){delete goog.implicitNamespaces_[o];for(var e=o;(e=e.substring(0,e.lastIndexOf(".")))&&!goog.getObjectByName(e);)goog.implicitNamespaces_[e]=!0}goog.exportPath_(o,t)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(o){if(!goog.isString(o)||!o||-1==o.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+o+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=o,!COMPILED){if(goog.isProvided_(o))throw Error('Namespace "'+o+'" already declared.');delete goog.implicitNamespaces_[o]}},goog.module.get=function(o){return goog.module.getInternal_(o)},goog.module.getInternal_=function(o){if(!COMPILED)return goog.isProvided_(o)?o in goog.loadedModules_?goog.loadedModules_[o]:goog.getObjectByName(o):null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareTestMethods=function(){if(!goog.isInModuleLoader_())throw Error("goog.module.declareTestMethods must be called from within a goog.module");goog.moduleLoaderState_.declareTestMethods=!0},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(o){if(goog.DISALLOW_TEST_ONLY_CODE)throw o=o||"",Error("Importing test-only code into non-debug environment"+(o?": "+o:"."))},goog.forwardDeclare=function(o){},COMPILED||(goog.isProvided_=function(o){return o in goog.loadedModules_||!goog.implicitNamespaces_[o]&&goog.isDefAndNotNull(goog.getObjectByName(o))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(o,t){for(var e,r=o.split("."),i=t||goog.global;e=r.shift();){if(!goog.isDefAndNotNull(i[e]))return null;i=i[e]}return i},goog.globalize=function(o,t){var e,r=t||goog.global;for(e in o)r[e]=o[e]},goog.addDependency=function(o,t,e,r){if(goog.DEPENDENCIES_ENABLED){var i;o=o.replace(/\\/g,"/");for(var b=goog.dependencies_,p=0;i=t[p];p++)b.nameToPath[i]=o,b.pathIsModule[o]=!!r;for(r=0;t=e[r];r++)o in b.requires||(b.requires[o]={}),b.requires[o][t]=!0}},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(o){goog.global.console&&goog.global.console.error(o)},goog.require=function(o){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(o),goog.isProvided_(o))return goog.isInModuleLoader_()?goog.module.getInternal_(o):null;if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(o);if(t)return goog.included_[t]=!0,goog.writeScripts_(),null}throw o="goog.require could not find: "+o,goog.logToConsole_(o),Error(o)}},goog.basePath="",goog.nullFunction=function(){},goog.identityFunction=function(o,t){return o},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(o){o.getInstance=function(){return o.instance_?o.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=o),o.instance_=new o)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var o=goog.global.document;return void 0!==o&&"write"in o},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var o=goog.global.document.getElementsByTagName("script"),t=o.length-1;0<=t;--t){var e=o[t].src,r=-1==(r=e.lastIndexOf("?"))?e.length:r;if("base.js"==e.substr(r-7,7)){goog.basePath=e.substr(0,r-7);break}}},goog.importScript_=function(o,t){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(o,t)&&(goog.dependencies_.written[o]=!0)},goog.IS_OLD_IE_=!goog.global.atob&&goog.global.document&&goog.global.document.all,goog.importModule_=function(o){goog.importScript_("",'goog.retrieveAndExecModule_("'+o+'");')&&(goog.dependencies_.written[o]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(o,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\n//# sourceURL="+o+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+t+"\n;return exports});\n//# sourceURL="+o+"\n"},goog.loadQueuedModules_=function(){var o=goog.queuedModules_.length;if(0<o){var t=goog.queuedModules_;goog.queuedModules_=[];for(var e=0;e<o;e++)goog.maybeProcessDeferredPath_(t[e])}},goog.maybeProcessDeferredDep_=function(o){goog.isDeferredModule_(o)&&goog.allDepsAreAvailable_(o)&&(o=goog.getPathFromDeps_(o),goog.maybeProcessDeferredPath_(goog.basePath+o))},goog.isDeferredModule_=function(o){return!(!(o=goog.getPathFromDeps_(o))||!goog.dependencies_.pathIsModule[o])&&goog.basePath+o in goog.dependencies_.deferred},goog.allDepsAreAvailable_=function(o){if((o=goog.getPathFromDeps_(o))&&o in goog.dependencies_.requires)for(var t in goog.dependencies_.requires[o])if(!goog.isProvided_(t)&&!goog.isDeferredModule_(t))return!1;return!0},goog.maybeProcessDeferredPath_=function(o){if(o in goog.dependencies_.deferred){var t=goog.dependencies_.deferred[o];delete goog.dependencies_.deferred[o],goog.globalEval(t)}},goog.loadModule=function(o){var t=goog.moduleLoaderState_;try{var e;if(goog.moduleLoaderState_={moduleName:void 0,declareTestMethods:!1},goog.isFunction(o))e=o.call(goog.global,{});else{if(!goog.isString(o))throw Error("Invalid module definition");e=goog.loadModuleFromSource_.call(goog.global,o)}var r=goog.moduleLoaderState_.moduleName;if(!goog.isString(r)||!r)throw Error('Invalid module name "'+r+'"');if(goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(r,e):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(e),goog.loadedModules_[r]=e,goog.moduleLoaderState_.declareTestMethods)for(var i in e)0!==i.indexOf("test",0)&&"tearDown"!=i&&"setUp"!=i&&"setUpPage"!=i&&"tearDownPage"!=i||(goog.global[i]=e[i])}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.writeScriptTag_=function(o,t){if(goog.inHtmlDocument_()){var e=goog.global.document;if("complete"==e.readyState){if(/\bdeps.js$/.test(o))return!1;throw Error('Cannot write "'+o+'" after document load')}var r=goog.IS_OLD_IE_;return void 0===t?r?(r=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ",e.write('<script type="text/javascript" src="'+o+'"'+r+"><\/script>")):e.write('<script type="text/javascript" src="'+o+'"><\/script>'):e.write('<script type="text/javascript">'+t+"<\/script>"),!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(o,t){return"complete"==o.readyState&&goog.lastNonModuleScriptIndex_==t&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(){function o(t){if(!(t in i.written)){if(!(t in i.visited)&&(i.visited[t]=!0,t in i.requires))for(var b in i.requires[t])if(!goog.isProvided_(b)){if(!(b in i.nameToPath))throw Error("Undefined nameToPath for "+b);o(i.nameToPath[b])}t in r||(r[t]=!0,e.push(t))}}var t,e=[],r={},i=goog.dependencies_;for(t in goog.included_)i.written[t]||o(t);for(var b=0;b<e.length;b++)t=e[b],goog.dependencies_.written[t]=!0;var p=goog.moduleLoaderState_;for(goog.moduleLoaderState_=null,b=0;b<e.length;b++){if(!(t=e[b]))throw goog.moduleLoaderState_=p,Error("Undefined script input");i.pathIsModule[t]?goog.importModule_(goog.basePath+t):goog.importScript_(goog.basePath+t)}goog.moduleLoaderState_=p},goog.getPathFromDeps_=function(o){return o in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[o]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.normalizePath_=function(o){o=o.split("/");for(var t=0;t<o.length;)"."==o[t]?o.splice(t,1):t&&".."==o[t]&&o[t-1]&&".."!=o[t-1]?o.splice(--t,2):t++;return o.join("/")},goog.retrieveAndExecModule_=function(o){if(!COMPILED){var t=o;o=goog.normalizePath_(o);var e=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,r=null,i=new goog.global.XMLHttpRequest;if(i.onload=function(){r=this.responseText},i.open("get",o,!1),i.send(),null==(r=i.responseText))throw Error("load of "+o+"failed");i=goog.wrapModule_(o,r),goog.IS_OLD_IE_?(goog.dependencies_.deferred[t]=i,goog.queuedModules_.push(t)):e(o,i)}},goog.typeOf=function(o){var t=typeof o;if("object"==t){if(!o)return"null";if(o instanceof Array)return"array";if(o instanceof Object)return t;var e=Object.prototype.toString.call(o);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof o.length&&void 0!==o.splice&&void 0!==o.propertyIsEnumerable&&!o.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||void 0!==o.call&&void 0!==o.propertyIsEnumerable&&!o.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===o.call)return"object";return t},goog.isNull=function(o){return null===o},goog.isDefAndNotNull=function(o){return null!=o},goog.isArray=function(o){return"array"==goog.typeOf(o)},goog.isArrayLike=function(o){var t=goog.typeOf(o);return"array"==t||"object"==t&&"number"==typeof o.length},goog.isDateLike=function(o){return goog.isObject(o)&&"function"==typeof o.getFullYear},goog.isString=function(o){return"string"==typeof o},goog.isBoolean=function(o){return"boolean"==typeof o},goog.isNumber=function(o){return"number"==typeof o},goog.isFunction=function(o){return"function"==goog.typeOf(o)},goog.isObject=function(o){var t=typeof o;return"object"==t&&null!=o||"function"==t},goog.getUid=function(o){return o[goog.UID_PROPERTY_]||(o[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(o){return!!o[goog.UID_PROPERTY_]},goog.removeUid=function(o){"removeAttribute"in o&&o.removeAttribute(goog.UID_PROPERTY_);try{delete o[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(o){if("object"==(e=goog.typeOf(o))||"array"==e){if(o.clone)return o.clone();var t,e="array"==e?[]:{};for(t in o)e[t]=goog.cloneObject(o[t]);return e}return o},goog.bindNative_=function(o,t,e){return o.call.apply(o.bind,arguments)},goog.bindJs_=function(o,t,e){if(!o)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,r),o.apply(t,e)}}return function(){return o.apply(t,arguments)}},goog.bind=function(o,t,e){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(o,t){var e=Array.prototype.slice.call(arguments,1);return function(){var t=e.slice();return t.push.apply(t,arguments),o.apply(this,t)}},goog.mixin=function(o,t){for(var e in t)o[e]=t[e]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(o){if(goog.global.execScript)goog.global.execScript(o,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),void 0!==goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(o);else{var t=goog.global.document,e=t.createElement("script");e.type="text/javascript",e.defer=!1,e.appendChild(t.createTextNode(o)),t.body.appendChild(e),t.body.removeChild(e)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(o,t){var e=function(o){return goog.cssNameMapping_[o]||o},r=function(o){o=o.split("-");for(var t=[],r=0;r<o.length;r++)t.push(e(o[r]));return t.join("-")};r=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?e:r:function(o){return o};return t?o+"-"+r(t):r(o)},goog.setCssNameMapping=function(o,t){goog.cssNameMapping_=o,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(o,t){return t&&(o=o.replace(/\{\$([^}]+)}/g,function(o,e){return e in t?t[e]:o})),o},goog.getMsgWithFallback=function(o,t){return o},goog.exportSymbol=function(o,t,e){goog.exportPath_(o,t,e)},goog.exportProperty=function(o,t,e){o[t]=e},goog.inherits=function(o,t){function e(){}e.prototype=t.prototype,o.superClass_=t.prototype,o.prototype=new e,o.prototype.constructor=o,o.base=function(o,e,r){for(var i=Array(arguments.length-2),b=2;b<arguments.length;b++)i[b-2]=arguments[b];return t.prototype[e].apply(o,i)}},goog.base=function(o,t,e){var r=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!r)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(r.superClass_){for(var i=Array(arguments.length-1),b=1;b<arguments.length;b++)i[b-1]=arguments[b];return r.superClass_.constructor.apply(o,i)}for(i=Array(arguments.length-2),b=2;b<arguments.length;b++)i[b-2]=arguments[b];b=!1;for(var p=o.constructor;p;p=p.superClass_&&p.superClass_.constructor)if(p.prototype[t]===r)b=!0;else if(b)return p.prototype[t].apply(o,i);if(o[t]===r)return o.constructor.prototype[t].apply(o,i);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(o){o.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(o,t){var e=t.constructor,r=t.statics;return e&&e!=Object.prototype.constructor||(e=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),e=goog.defineClass.createSealingConstructor_(e,o),o&&goog.inherits(e,o),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(e.prototype,t),null!=r&&(r instanceof Function?r(e):goog.defineClass.applyProperties_(e,r)),e},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(o,t){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return o;var e=function(){var t=o.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===e&&Object.seal(t),t};return e}return o},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e]);for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++)e=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])},goog.tagUnsealableClass=function(o){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(o.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";var box2d={b2Settings:{}};Object.defineProperty||(Object.defineProperty=function(o,t,e){Object.__defineGetter__&&("get"in e?o.__defineGetter__(t,e.get):"value"in e&&o.__defineGetter__(t,e.value)),Object.__defineSetter__&&("set"in e?o.__defineSetter__(t,e.set):"value"in e&&o.__defineSetter__(t,e.value))}),box2d.DEBUG=!1,goog.exportSymbol("box2d.DEBUG",box2d.DEBUG),box2d.ENABLE_ASSERTS=box2d.DEBUG,goog.exportSymbol("box2d.ENABLE_ASSERTS",box2d.ENABLE_ASSERTS),box2d.b2Assert=function(o,t,e){box2d.DEBUG},goog.exportSymbol("box2d.b2Assert",box2d.b2Assert),box2d.b2_maxFloat=1e37,goog.exportSymbol("box2d.b2_maxFloat",box2d.b2_maxFloat),box2d.b2_epsilon=1e-5,goog.exportSymbol("box2d.b2_epsilon",box2d.b2_epsilon),box2d.b2_epsilon_sq=box2d.b2_epsilon*box2d.b2_epsilon,goog.exportSymbol("box2d.b2_epsilon_sq",box2d.b2_epsilon_sq),box2d.b2_pi=Math.PI,goog.exportSymbol("box2d.b2_pi",box2d.b2_pi),box2d.b2_maxManifoldPoints=2,goog.exportSymbol("box2d.b2_maxManifoldPoints",box2d.b2_maxManifoldPoints),box2d.b2_maxPolygonVertices=8,goog.exportSymbol("box2d.b2_maxPolygonVertices",box2d.b2_maxPolygonVertices),box2d.b2_aabbExtension=.1,goog.exportSymbol("box2d.b2_aabbExtension",box2d.b2_aabbExtension),box2d.b2_aabbMultiplier=2,goog.exportSymbol("box2d.b2_aabbMultiplier",box2d.b2_aabbMultiplier),box2d.b2_linearSlop=.008,goog.exportSymbol("box2d.b2_linearSlop",box2d.b2_linearSlop),box2d.b2_angularSlop=2/180*box2d.b2_pi,goog.exportSymbol("box2d.b2_angularSlop",box2d.b2_angularSlop),box2d.b2_polygonRadius=2*box2d.b2_linearSlop,goog.exportSymbol("box2d.b2_polygonRadius",box2d.b2_polygonRadius),box2d.b2_maxSubSteps=8,goog.exportSymbol("box2d.b2_maxSubSteps",box2d.b2_maxSubSteps),box2d.b2_maxTOIContacts=32,goog.exportSymbol("box2d.b2_maxTOIContacts",box2d.b2_maxTOIContacts),box2d.b2_velocityThreshold=1,goog.exportSymbol("box2d.b2_velocityThreshold",box2d.b2_velocityThreshold),box2d.b2_maxLinearCorrection=.2,goog.exportSymbol("box2d.b2_maxLinearCorrection",box2d.b2_maxLinearCorrection),box2d.b2_maxAngularCorrection=8/180*box2d.b2_pi,goog.exportSymbol("box2d.b2_maxAngularCorrection",box2d.b2_maxAngularCorrection),box2d.b2_maxTranslation=2,goog.exportSymbol("box2d.b2_maxTranslation",box2d.b2_maxTranslation),box2d.b2_maxTranslationSquared=box2d.b2_maxTranslation*box2d.b2_maxTranslation,goog.exportSymbol("box2d.b2_maxTranslationSquared",box2d.b2_maxTranslationSquared),box2d.b2_maxRotation=.5*box2d.b2_pi,goog.exportSymbol("box2d.b2_maxRotation",box2d.b2_maxRotation),box2d.b2_maxRotationSquared=box2d.b2_maxRotation*box2d.b2_maxRotation,goog.exportSymbol("box2d.b2_maxRotationSquared",box2d.b2_maxRotationSquared),box2d.b2_baumgarte=.2,goog.exportSymbol("box2d.b2_baumgarte",box2d.b2_baumgarte),box2d.b2_toiBaumgarte=.75,goog.exportSymbol("box2d.b2_toiBaumgarte",box2d.b2_toiBaumgarte),box2d.b2_invalidParticleIndex=-1,goog.exportSymbol("box2d.b2_invalidParticleIndex",box2d.b2_invalidParticleIndex),box2d.b2_maxParticleIndex=2147483647,goog.exportSymbol("box2d.b2_maxParticleIndex",box2d.b2_maxParticleIndex),box2d.b2_particleStride=.75,goog.exportSymbol("box2d.b2_particleStride",box2d.b2_particleStride),box2d.b2_minParticleWeight=1,goog.exportSymbol("box2d.b2_minParticleWeight",box2d.b2_minParticleWeight),box2d.b2_maxParticlePressure=.25,goog.exportSymbol("box2d.b2_maxParticlePressure",box2d.b2_maxParticlePressure),box2d.b2_maxParticleForce=.5,goog.exportSymbol("box2d.b2_maxParticleForce",box2d.b2_maxParticleForce),box2d.b2_maxTriadDistance=2,goog.exportSymbol("box2d.b2_maxTriadDistance",box2d.b2_maxTriadDistance),box2d.b2_maxTriadDistanceSquared=box2d.b2_maxTriadDistance*box2d.b2_maxTriadDistance,goog.exportSymbol("box2d.b2_maxTriadDistanceSquared",box2d.b2_maxTriadDistanceSquared),box2d.b2_minParticleSystemBufferCapacity=256,goog.exportSymbol("box2d.b2_minParticleSystemBufferCapacity",box2d.b2_minParticleSystemBufferCapacity),box2d.b2_barrierCollisionTime=2.5,goog.exportSymbol("box2d.b2_barrierCollisionTime",box2d.b2_barrierCollisionTime),box2d.b2_timeToSleep=.5,goog.exportSymbol("box2d.b2_timeToSleep",box2d.b2_timeToSleep),box2d.b2_linearSleepTolerance=.01,goog.exportSymbol("box2d.b2_linearSleepTolerance",box2d.b2_linearSleepTolerance),box2d.b2_angularSleepTolerance=2/180*box2d.b2_pi,goog.exportSymbol("box2d.b2_angularSleepTolerance",box2d.b2_angularSleepTolerance),box2d.b2Alloc=function(o){return null},goog.exportSymbol("box2d.b2Alloc",box2d.b2Alloc),box2d.b2Free=function(o){},goog.exportSymbol("box2d.b2Free",box2d.b2Free),box2d.b2Log=function(o){goog.global.console.log.apply(null,arguments)},goog.exportSymbol("box2d.b2Log",box2d.b2Log),box2d.b2Version=function(o,t,e){this.major=o||0,this.minor=t||0,this.revision=e||0},goog.exportSymbol("box2d.b2Version",box2d.b2Version),box2d.b2Version.prototype.major=0,goog.exportProperty(box2d.b2Version.prototype,"major",box2d.b2Version.prototype.major),box2d.b2Version.prototype.minor=0,goog.exportProperty(box2d.b2Version.prototype,"minor",box2d.b2Version.prototype.minor),box2d.b2Version.prototype.revision=0,goog.exportProperty(box2d.b2Version.prototype,"revision",box2d.b2Version.prototype.revision),box2d.b2Version.prototype.toString=function(){return this.major+"."+this.minor+"."+this.revision},goog.exportProperty(box2d.b2Version.prototype,"toString",box2d.b2Version.prototype.toString),box2d.b2_version=new box2d.b2Version(2,3,2),goog.exportSymbol("box2d.b2_version",box2d.b2_version),box2d.b2_changelist=313,goog.exportSymbol("box2d.b2_changelist",box2d.b2_changelist),box2d.b2ParseInt=function(o){return parseInt(o,10)},goog.exportSymbol("box2d.b2ParseInt",box2d.b2ParseInt),box2d.b2ParseUInt=function(o){return box2d.b2Abs(parseInt(o,10))},goog.exportSymbol("box2d.b2ParseUInt",box2d.b2ParseUInt),box2d.b2MakeArray=function(o,t){o="number"==typeof o?o:0;var e=[];if("function"==typeof t)for(var r=0;r<o;++r)e.push(t(r));else for(r=0;r<o;++r)e.push(null);return e},goog.exportSymbol("box2d.b2MakeArray",box2d.b2MakeArray),box2d.b2MakeNumberArray=function(o){return box2d.b2MakeArray(o,function(o){return 0})},goog.exportSymbol("box2d.b2MakeNumberArray",box2d.b2MakeNumberArray),box2d.b2ControllerEdge=function(){},goog.exportSymbol("box2d.b2ControllerEdge",box2d.b2ControllerEdge),box2d.b2ControllerEdge.prototype.controller=null,goog.exportProperty(box2d.b2ControllerEdge.prototype,"controller",box2d.b2ControllerEdge.prototype.controller),box2d.b2ControllerEdge.prototype.body=null,goog.exportProperty(box2d.b2ControllerEdge.prototype,"body",box2d.b2ControllerEdge.prototype.body),box2d.b2ControllerEdge.prototype.prevBody=null,goog.exportProperty(box2d.b2ControllerEdge.prototype,"prevBody",box2d.b2ControllerEdge.prototype.prevBody),box2d.b2ControllerEdge.prototype.nextBody=null,goog.exportProperty(box2d.b2ControllerEdge.prototype,"nextBody",box2d.b2ControllerEdge.prototype.nextBody),box2d.b2ControllerEdge.prototype.prevController=null,goog.exportProperty(box2d.b2ControllerEdge.prototype,"prevController",box2d.b2ControllerEdge.prototype.prevController),box2d.b2ControllerEdge.prototype.nextController=null,goog.exportProperty(box2d.b2ControllerEdge.prototype,"nextController",box2d.b2ControllerEdge.prototype.nextController),box2d.b2Controller=function(){},goog.exportSymbol("box2d.b2Controller",box2d.b2Controller),box2d.b2Controller.prototype.m_world=null,goog.exportProperty(box2d.b2Controller.prototype,"m_world",box2d.b2Controller.prototype.m_world),box2d.b2Controller.prototype.m_bodyList=null,goog.exportProperty(box2d.b2Controller.prototype,"m_bodyList",box2d.b2Controller.prototype.m_bodyList),box2d.b2Controller.prototype.m_bodyCount=0,goog.exportProperty(box2d.b2Controller.prototype,"m_bodyCount",box2d.b2Controller.prototype.m_bodyCount),box2d.b2Controller.prototype.m_prev=null,goog.exportProperty(box2d.b2Controller.prototype,"m_prev",box2d.b2Controller.prototype.m_prev),box2d.b2Controller.prototype.m_next=null,goog.exportProperty(box2d.b2Controller.prototype,"m_next",box2d.b2Controller.prototype.m_next),box2d.b2Controller.prototype.Step=function(o){},goog.exportProperty(box2d.b2Controller.prototype,"Step",box2d.b2Controller.prototype.Step),box2d.b2Controller.prototype.Draw=function(o){},goog.exportProperty(box2d.b2Controller.prototype,"Draw",box2d.b2Controller.prototype.Draw),box2d.b2Controller.prototype.GetNext=function(){return this.m_next},goog.exportProperty(box2d.b2Controller.prototype,"GetNext",box2d.b2Controller.prototype.GetNext),box2d.b2Controller.prototype.GetPrev=function(){return this.m_prev},goog.exportProperty(box2d.b2Controller.prototype,"GetPrev",box2d.b2Controller.prototype.GetPrev),box2d.b2Controller.prototype.GetWorld=function(){return this.m_world},goog.exportProperty(box2d.b2Controller.prototype,"GetWorld",box2d.b2Controller.prototype.GetWorld),box2d.b2Controller.prototype.GetBodyList=function(){return this.m_bodyList},goog.exportProperty(box2d.b2Controller.prototype,"GetBodyList",box2d.b2Controller.prototype.GetBodyList),box2d.b2Controller.prototype.AddBody=function(o){var t=new box2d.b2ControllerEdge;t.body=o,t.controller=this,t.nextBody=this.m_bodyList,t.prevBody=null,this.m_bodyList&&(this.m_bodyList.prevBody=t),this.m_bodyList=t,++this.m_bodyCount,t.nextController=o.m_controllerList,t.prevController=null,o.m_controllerList&&(o.m_controllerList.prevController=t),o.m_controllerList=t,++o.m_controllerCount},goog.exportProperty(box2d.b2Controller.prototype,"AddBody",box2d.b2Controller.prototype.AddBody),box2d.b2Controller.prototype.RemoveBody=function(o){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_bodyCount);for(var t=this.m_bodyList;t&&t.body!==o;)t=t.nextBody;box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==t),t.prevBody&&(t.prevBody.nextBody=t.nextBody),t.nextBody&&(t.nextBody.prevBody=t.prevBody),this.m_bodyList===t&&(this.m_bodyList=t.nextBody),--this.m_bodyCount,t.nextController&&(t.nextController.prevController=t.prevController),t.prevController&&(t.prevController.nextController=t.nextController),o.m_controllerList===t&&(o.m_controllerList=t.nextController),--o.m_controllerCount},goog.exportProperty(box2d.b2Controller.prototype,"RemoveBody",box2d.b2Controller.prototype.RemoveBody),box2d.b2Controller.prototype.Clear=function(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body);this.m_bodyCount=0},goog.exportProperty(box2d.b2Controller.prototype,"Clear",box2d.b2Controller.prototype.Clear),box2d.b2Color=function(o,t,e,r){this.r=o,this.g=t,this.b=e,this.a="number"==typeof r?r:1},goog.exportSymbol("box2d.b2Color",box2d.b2Color),box2d.b2Color.prototype.r=.5,goog.exportProperty(box2d.b2Color.prototype,"r",box2d.b2Color.prototype.r),box2d.b2Color.prototype.g=.5,goog.exportProperty(box2d.b2Color.prototype,"g",box2d.b2Color.prototype.g),box2d.b2Color.prototype.b=.5,goog.exportProperty(box2d.b2Color.prototype,"b",box2d.b2Color.prototype.b),box2d.b2Color.prototype.a=1,goog.exportProperty(box2d.b2Color.prototype,"a",box2d.b2Color.prototype.a),box2d.b2Color.prototype.SetRGB=function(o,t,e){return this.r=o,this.g=t,this.b=e,this},goog.exportProperty(box2d.b2Color.prototype,"SetRGB",box2d.b2Color.prototype.SetRGB),box2d.b2Color.prototype.MakeStyleString=function(o){var t=Math.round(Math.max(0,Math.min(255,255*this.r))),e=Math.round(Math.max(0,Math.min(255,255*this.g))),r=Math.round(Math.max(0,Math.min(255,255*this.b)));return o=void 0===o?this.a:Math.max(0,Math.min(1,o)),box2d.b2Color.MakeStyleString(t,e,r,o)},goog.exportProperty(box2d.b2Color.prototype,"MakeStyleString",box2d.b2Color.prototype.MakeStyleString),box2d.b2Color.MakeStyleString=function(o,t,e,r){return 1>r?"rgba("+o+","+t+","+e+","+r+")":"rgb("+o+","+t+","+e+")"},goog.exportProperty(box2d.b2Color,"MakeStyleString",box2d.b2Color.MakeStyleString),box2d.b2Color.RED=new box2d.b2Color(1,0,0),goog.exportProperty(box2d.b2Color,"RED",box2d.b2Color.RED),box2d.b2Color.GREEN=new box2d.b2Color(0,1,0),goog.exportProperty(box2d.b2Color,"GREEN",box2d.b2Color.GREEN),box2d.b2Color.BLUE=new box2d.b2Color(0,0,1),goog.exportProperty(box2d.b2Color,"BLUE",box2d.b2Color.BLUE),box2d.b2DrawFlags={e_none:0,e_shapeBit:1,e_jointBit:2,e_aabbBit:4,e_pairBit:8,e_centerOfMassBit:16,e_controllerBit:32,e_particleBit:64,e_all:65535},goog.exportSymbol("box2d.b2DrawFlags",box2d.b2DrawFlags),goog.exportProperty(box2d.b2DrawFlags,"e_none",box2d.b2DrawFlags.e_none),goog.exportProperty(box2d.b2DrawFlags,"e_shapeBit",box2d.b2DrawFlags.e_shapeBit),goog.exportProperty(box2d.b2DrawFlags,"e_jointBit",box2d.b2DrawFlags.e_jointBit),goog.exportProperty(box2d.b2DrawFlags,"e_aabbBit",box2d.b2DrawFlags.e_aabbBit),goog.exportProperty(box2d.b2DrawFlags,"e_pairBit",box2d.b2DrawFlags.e_pairBit),goog.exportProperty(box2d.b2DrawFlags,"e_centerOfMassBit",box2d.b2DrawFlags.e_centerOfMassBit),goog.exportProperty(box2d.b2DrawFlags,"e_controllerBit",box2d.b2DrawFlags.e_controllerBit),goog.exportProperty(box2d.b2DrawFlags,"e_particleBit",box2d.b2DrawFlags.e_particleBit),goog.exportProperty(box2d.b2DrawFlags,"e_all",box2d.b2DrawFlags.e_all),box2d.b2Draw=function(){},goog.exportSymbol("box2d.b2Draw",box2d.b2Draw),box2d.b2Draw.prototype.m_drawFlags=box2d.b2DrawFlags.e_none,goog.exportProperty(box2d.b2Draw.prototype,"m_drawFlags",box2d.b2Draw.prototype.m_drawFlags),box2d.b2Draw.prototype.SetFlags=function(o){this.m_drawFlags=o},goog.exportProperty(box2d.b2Draw.prototype,"SetFlags",box2d.b2Draw.prototype.SetFlags),box2d.b2Draw.prototype.GetFlags=function(){return this.m_drawFlags},goog.exportProperty(box2d.b2Draw.prototype,"GetFlags",box2d.b2Draw.prototype.GetFlags),box2d.b2Draw.prototype.AppendFlags=function(o){this.m_drawFlags|=o},goog.exportProperty(box2d.b2Draw.prototype,"AppendFlags",box2d.b2Draw.prototype.AppendFlags),box2d.b2Draw.prototype.ClearFlags=function(o){this.m_drawFlags&=~o},goog.exportProperty(box2d.b2Draw.prototype,"ClearFlags",box2d.b2Draw.prototype.ClearFlags),box2d.b2Draw.prototype.PushTransform=function(o){},goog.exportProperty(box2d.b2Draw.prototype,"PushTransform",box2d.b2Draw.prototype.PushTransform),box2d.b2Draw.prototype.PopTransform=function(o){},goog.exportProperty(box2d.b2Draw.prototype,"PopTransform",box2d.b2Draw.prototype.PopTransform),box2d.b2Draw.prototype.DrawPolygon=function(o,t,e){},goog.exportProperty(box2d.b2Draw.prototype,"DrawPolygon",box2d.b2Draw.prototype.DrawPolygon),box2d.b2Draw.prototype.DrawSolidPolygon=function(o,t,e){},goog.exportProperty(box2d.b2Draw.prototype,"DrawSolidPolygon",box2d.b2Draw.prototype.DrawSolidPolygon),box2d.b2Draw.prototype.DrawCircle=function(o,t,e){},goog.exportProperty(box2d.b2Draw.prototype,"DrawCircle",box2d.b2Draw.prototype.DrawCircle),box2d.b2Draw.prototype.DrawSolidCircle=function(o,t,e,r){},goog.exportProperty(box2d.b2Draw.prototype,"DrawSolidCircle",box2d.b2Draw.prototype.DrawSolidCircle),box2d.b2Draw.prototype.DrawParticles=function(o,t,e,r){},goog.exportProperty(box2d.b2Draw.prototype,"DrawParticles",box2d.b2Draw.prototype.DrawParticles),box2d.b2Draw.prototype.DrawSegment=function(o,t,e){},goog.exportProperty(box2d.b2Draw.prototype,"DrawSegment",box2d.b2Draw.prototype.DrawSegment),box2d.b2Draw.prototype.DrawTransform=function(o){},goog.exportProperty(box2d.b2Draw.prototype,"DrawTransform",box2d.b2Draw.prototype.DrawTransform),box2d.b2GrowableStack=function(o){this.m_stack=Array(o)},goog.exportSymbol("box2d.b2GrowableStack",box2d.b2GrowableStack),box2d.b2GrowableStack.prototype.m_stack=null,goog.exportProperty(box2d.b2GrowableStack.prototype,"m_stack",box2d.b2GrowableStack.prototype.m_stack),box2d.b2GrowableStack.prototype.m_count=0,goog.exportProperty(box2d.b2GrowableStack.prototype,"m_count",box2d.b2GrowableStack.prototype.m_count),box2d.b2GrowableStack.prototype.Reset=function(){return this.m_count=0,this},goog.exportProperty(box2d.b2GrowableStack.prototype,"Reset",box2d.b2GrowableStack.prototype.Reset),box2d.b2GrowableStack.prototype.Push=function(o){this.m_stack[this.m_count]=o,++this.m_count},goog.exportProperty(box2d.b2GrowableStack.prototype,"Push",box2d.b2GrowableStack.prototype.Push),box2d.b2GrowableStack.prototype.Pop=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_count),--this.m_count;var o=this.m_stack[this.m_count];return this.m_stack[this.m_count]=null,o},goog.exportProperty(box2d.b2GrowableStack.prototype,"Pop",box2d.b2GrowableStack.prototype.Pop),box2d.b2GrowableStack.prototype.GetCount=function(){return this.m_count},goog.exportProperty(box2d.b2GrowableStack.prototype,"GetCount",box2d.b2GrowableStack.prototype.GetCount),box2d.b2Math={},box2d.b2_pi_over_180=box2d.b2_pi/180,goog.exportSymbol("box2d.b2_pi_over_180",box2d.b2_pi_over_180),box2d.b2_180_over_pi=180/box2d.b2_pi,goog.exportSymbol("box2d.b2_180_over_pi",box2d.b2_180_over_pi),box2d.b2_two_pi=2*box2d.b2_pi,goog.exportSymbol("box2d.b2_two_pi",box2d.b2_two_pi),box2d.b2Abs=Math.abs,goog.exportSymbol("box2d.b2Abs",box2d.b2Abs),box2d.b2Min=Math.min,goog.exportSymbol("box2d.b2Min",box2d.b2Min),box2d.b2Max=Math.max,goog.exportSymbol("box2d.b2Max",box2d.b2Max),box2d.b2Clamp=function(o,t,e){return Math.min(Math.max(o,t),e)},goog.exportSymbol("box2d.b2Clamp",box2d.b2Clamp),box2d.b2Wrap=function(o,t,e){return t<e?o<t?e-(t-o)%(e-t):t+(o-t)%(e-t):t===e?t:o},goog.exportSymbol("box2d.b2Wrap",box2d.b2Wrap),box2d.b2WrapAngle=function(o){return 0>o?(o-box2d.b2_pi)%box2d.b2_two_pi+box2d.b2_pi:(o+box2d.b2_pi)%box2d.b2_two_pi-box2d.b2_pi},goog.exportSymbol("box2d.b2WrapAngle",box2d.b2WrapAngle),box2d.b2Swap=function(o,t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1);var e=o[0];o[0]=t[0],t[0]=e},goog.exportSymbol("box2d.b2Swap",box2d.b2Swap),box2d.b2IsValid=function(o){return isFinite(o)},goog.exportSymbol("box2d.b2IsValid",box2d.b2IsValid),box2d.b2Sq=function(o){return o*o},goog.exportSymbol("box2d.b2Sq",box2d.b2Sq),box2d.b2InvSqrt=function(o){return 1/Math.sqrt(o)},goog.exportSymbol("box2d.b2InvSqrt",box2d.b2InvSqrt),box2d.b2Sqrt=function(o){return Math.sqrt(o)},goog.exportSymbol("box2d.b2Sqrt",box2d.b2Sqrt),box2d.b2Pow=function(o,t){return Math.pow(o,t)},goog.exportSymbol("box2d.b2Pow",box2d.b2Pow),box2d.b2DegToRad=function(o){return o*box2d.b2_pi_over_180},goog.exportSymbol("box2d.b2DegToRad",box2d.b2DegToRad),box2d.b2RadToDeg=function(o){return o*box2d.b2_180_over_pi},goog.exportSymbol("box2d.b2RadToDeg",box2d.b2RadToDeg),box2d.b2Cos=function(o){return Math.cos(o)},goog.exportSymbol("box2d.b2Cos",box2d.b2Cos),box2d.b2Sin=function(o){return Math.sin(o)},goog.exportSymbol("box2d.b2Sin",box2d.b2Sin),box2d.b2Acos=function(o){return Math.acos(o)},goog.exportSymbol("box2d.b2Acos",box2d.b2Acos),box2d.b2Asin=function(o){return Math.asin(o)},goog.exportSymbol("box2d.b2Asin",box2d.b2Asin),box2d.b2Atan2=function(o,t){return Math.atan2(o,t)},goog.exportSymbol("box2d.b2Atan2",box2d.b2Atan2),box2d.b2NextPowerOfTwo=function(o){return o|=o>>1&2147483647,o|=o>>2&1073741823,o|=o>>4&268435455,1+((o|=o>>8&16777215)|o>>16&65535)},goog.exportSymbol("box2d.b2NextPowerOfTwo",box2d.b2NextPowerOfTwo),box2d.b2IsPowerOfTwo=function(o){return 0<o&&0==(o&o-1)},goog.exportSymbol("box2d.b2IsPowerOfTwo",box2d.b2IsPowerOfTwo),box2d.b2Random=function(){return 2*Math.random()-1},goog.exportSymbol("box2d.b2Random",box2d.b2Random),box2d.b2RandomRange=function(o,t){return(t-o)*Math.random()+o},goog.exportSymbol("box2d.b2RandomRange",box2d.b2RandomRange),box2d.b2Vec2=function(o,t){this.x=o||0,this.y=t||0},goog.exportSymbol("box2d.b2Vec2",box2d.b2Vec2),box2d.b2Vec2.prototype.x=0,goog.exportProperty(box2d.b2Vec2.prototype,"x",box2d.b2Vec2.prototype.x),box2d.b2Vec2.prototype.y=0,goog.exportProperty(box2d.b2Vec2.prototype,"y",box2d.b2Vec2.prototype.y),box2d.b2Vec2_zero=new box2d.b2Vec2,goog.exportSymbol("box2d.b2Vec2_zero",box2d.b2Vec2_zero),box2d.b2Vec2.ZERO=new box2d.b2Vec2,goog.exportProperty(box2d.b2Vec2,"ZERO",box2d.b2Vec2.ZERO),box2d.b2Vec2.UNITX=new box2d.b2Vec2(1,0),goog.exportProperty(box2d.b2Vec2,"UNITX",box2d.b2Vec2.UNITX),box2d.b2Vec2.UNITY=new box2d.b2Vec2(0,1),goog.exportProperty(box2d.b2Vec2,"UNITY",box2d.b2Vec2.UNITY),box2d.b2Vec2.s_t0=new box2d.b2Vec2,goog.exportProperty(box2d.b2Vec2,"s_t0",box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t1=new box2d.b2Vec2,goog.exportProperty(box2d.b2Vec2,"s_t1",box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t2=new box2d.b2Vec2,goog.exportProperty(box2d.b2Vec2,"s_t2",box2d.b2Vec2.s_t2),box2d.b2Vec2.s_t3=new box2d.b2Vec2,goog.exportProperty(box2d.b2Vec2,"s_t3",box2d.b2Vec2.s_t3),box2d.b2Vec2.MakeArray=function(o){return box2d.b2MakeArray(o,function(o){return new box2d.b2Vec2})},goog.exportProperty(box2d.b2Vec2,"MakeArray",box2d.b2Vec2.MakeArray),box2d.b2Vec2.prototype.Clone=function(){return new box2d.b2Vec2(this.x,this.y)},goog.exportProperty(box2d.b2Vec2.prototype,"Clone",box2d.b2Vec2.prototype.Clone),box2d.b2Vec2.prototype.SetZero=function(){return this.y=this.x=0,this},goog.exportProperty(box2d.b2Vec2.prototype,"SetZero",box2d.b2Vec2.prototype.SetZero),box2d.b2Vec2.prototype.Set=function(o,t){return this.x=o,this.y=t,this},goog.exportProperty(box2d.b2Vec2.prototype,"Set",box2d.b2Vec2.prototype.Set),box2d.b2Vec2.prototype.Copy=function(o){return this.x=o.x,this.y=o.y,this},goog.exportProperty(box2d.b2Vec2.prototype,"Copy",box2d.b2Vec2.prototype.Copy),box2d.b2Vec2.prototype.SelfAdd=function(o){return this.x+=o.x,this.y+=o.y,this},goog.exportProperty(box2d.b2Vec2.prototype,"SelfAdd",box2d.b2Vec2.prototype.SelfAdd),box2d.b2Vec2.prototype.SelfAddXY=function(o,t){return this.x+=o,this.y+=t,this},goog.exportProperty(box2d.b2Vec2.prototype,"SelfAddXY",box2d.b2Vec2.prototype.SelfAddXY),box2d.b2Vec2.prototype.SelfSub=function(o){return this.x-=o.x,this.y-=o.y,this},goog.exportProperty(box2d.b2Vec2.prototype,"SelfSub",box2d.b2Vec2.prototype.SelfSub),box2d.b2Vec2.prototype.SelfSubXY=function(o,t){return this.x-=o,this.y-=t,this},goog.exportProperty(box2d.b2Vec2.prototype,"SelfSubXY",box2d.b2Vec2.prototype.SelfSubXY),box2d.b2Vec2.prototype.SelfMul=function(o){return this.x*=o,this.y*=o,this},goog.exportProperty(box2d.b2Vec2.prototype,"SelfMul",box2d.b2Vec2.prototype.SelfMul),box2d.b2Vec2.prototype.SelfMulAdd=function(o,t){return this.x+=o*t.x,this.y+=o*t.y,this},goog.exportProperty(box2d.b2Vec2.prototype,"SelfMulAdd",box2d.b2Vec2.prototype.SelfMulAdd),box2d.b2Vec2.prototype.SelfMulSub=function(o,t){return this.x-=o*t.x,this.y-=o*t.y,this},goog.exportProperty(box2d.b2Vec2.prototype,"SelfMulSub",box2d.b2Vec2.prototype.SelfMulSub),box2d.b2Vec2.prototype.Dot=function(o){return this.x*o.x+this.y*o.y},goog.exportProperty(box2d.b2Vec2.prototype,"Dot",box2d.b2Vec2.prototype.Dot),box2d.b2Vec2.prototype.Cross=function(o){return this.x*o.y-this.y*o.x},goog.exportProperty(box2d.b2Vec2.prototype,"Cross",box2d.b2Vec2.prototype.Cross),box2d.b2Vec2.prototype.Length=function(){var o=this.x,t=this.y;return Math.sqrt(o*o+t*t)},goog.exportProperty(box2d.b2Vec2.prototype,"Length",box2d.b2Vec2.prototype.Length),box2d.b2Vec2.prototype.LengthSquared=function(){var o=this.x,t=this.y;return o*o+t*t},goog.exportProperty(box2d.b2Vec2.prototype,"LengthSquared",box2d.b2Vec2.prototype.LengthSquared),box2d.b2Vec2.prototype.Normalize=function(){var o=this.Length();if(o>=box2d.b2_epsilon){var t=1/o;this.x*=t,this.y*=t}return o},goog.exportProperty(box2d.b2Vec2.prototype,"Normalize",box2d.b2Vec2.prototype.Normalize),box2d.b2Vec2.prototype.SelfNormalize=function(){return this.Normalize(),this},goog.exportProperty(box2d.b2Vec2.prototype,"SelfNormalize",box2d.b2Vec2.prototype.SelfNormalize),box2d.b2Vec2.prototype.SelfRotate=function(o,t){var e=this.x,r=this.y;return this.x=o*e-t*r,this.y=t*e+o*r,this},goog.exportProperty(box2d.b2Vec2.prototype,"SelfRotate",box2d.b2Vec2.prototype.SelfRotate),box2d.b2Vec2.prototype.SelfRotateAngle=function(o){return this.SelfRotate(Math.cos(o),Math.sin(o))},goog.exportProperty(box2d.b2Vec2.prototype,"SelfRotateAngle",box2d.b2Vec2.prototype.SelfRotateAngle),box2d.b2Vec2.prototype.IsValid=function(){return isFinite(this.x)&&isFinite(this.y)},goog.exportProperty(box2d.b2Vec2.prototype,"IsValid",box2d.b2Vec2.prototype.IsValid),box2d.b2Vec2.prototype.SelfMin=function(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this},goog.exportProperty(box2d.b2Vec2.prototype,"SelfMin",box2d.b2Vec2.prototype.SelfMin),box2d.b2Vec2.prototype.SelfMax=function(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this},goog.exportProperty(box2d.b2Vec2.prototype,"SelfMax",box2d.b2Vec2.prototype.SelfMax),box2d.b2Vec2.prototype.SelfAbs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},goog.exportProperty(box2d.b2Vec2.prototype,"SelfAbs",box2d.b2Vec2.prototype.SelfAbs),box2d.b2Vec2.prototype.SelfNeg=function(){return this.x=-this.x,this.y=-this.y,this},goog.exportProperty(box2d.b2Vec2.prototype,"SelfNeg",box2d.b2Vec2.prototype.SelfNeg),box2d.b2Vec2.prototype.SelfSkew=function(){var o=this.x;return this.x=-this.y,this.y=o,this},goog.exportProperty(box2d.b2Vec2.prototype,"SelfSkew",box2d.b2Vec2.prototype.SelfSkew),box2d.b2Abs_V2=function(o,t){return t.x=Math.abs(o.x),t.y=Math.abs(o.y),t},goog.exportSymbol("box2d.b2Abs_V2",box2d.b2Abs_V2),box2d.b2Min_V2_V2=function(o,t,e){return e.x=Math.min(o.x,t.x),e.y=Math.min(o.y,t.y),e},goog.exportSymbol("box2d.b2Min_V2_V2",box2d.b2Min_V2_V2),box2d.b2Max_V2_V2=function(o,t,e){return e.x=Math.max(o.x,t.x),e.y=Math.max(o.y,t.y),e},goog.exportSymbol("box2d.b2Max_V2_V2",box2d.b2Max_V2_V2),box2d.b2Clamp_V2_V2_V2=function(o,t,e,r){return r.x=Math.min(Math.max(o.x,t.x),e.x),r.y=Math.min(Math.max(o.y,t.y),e.y),r},goog.exportSymbol("box2d.b2Clamp_V2_V2_V2",box2d.b2Clamp_V2_V2_V2),box2d.b2Dot_V2_V2=function(o,t){return o.x*t.x+o.y*t.y},goog.exportSymbol("box2d.b2Dot_V2_V2",box2d.b2Dot_V2_V2),box2d.b2Cross_V2_V2=function(o,t){return o.x*t.y-o.y*t.x},goog.exportSymbol("box2d.b2Cross_V2_V2",box2d.b2Cross_V2_V2),box2d.b2Cross_V2_S=function(o,t,e){var r=o.x;return e.x=t*o.y,e.y=-t*r,e},goog.exportSymbol("box2d.b2Cross_V2_S",box2d.b2Cross_V2_S),box2d.b2Cross_S_V2=function(o,t,e){var r=t.x;return e.x=-o*t.y,e.y=o*r,e},goog.exportSymbol("box2d.b2Cross_S_V2",box2d.b2Cross_S_V2),box2d.b2Add_V2_V2=function(o,t,e){return e.x=o.x+t.x,e.y=o.y+t.y,e},goog.exportSymbol("box2d.b2Add_V2_V2",box2d.b2Add_V2_V2),box2d.b2Sub_V2_V2=function(o,t,e){return e.x=o.x-t.x,e.y=o.y-t.y,e},goog.exportSymbol("box2d.b2Sub_V2_V2",box2d.b2Sub_V2_V2),box2d.b2Add_V2_S=function(o,t,e){return e.x=o.x+t,e.y=o.y+t,e},goog.exportSymbol("box2d.b2Add_V2_S",box2d.b2Add_V2_S),box2d.b2Sub_V2_S=function(o,t,e){return e.x=o.x-t,e.y=o.y-t,e},goog.exportSymbol("box2d.b2Sub_V2_S",box2d.b2Sub_V2_S),box2d.b2Mul_S_V2=function(o,t,e){return e.x=t.x*o,e.y=t.y*o,e},goog.exportSymbol("box2d.b2Mul_S_V2",box2d.b2Mul_S_V2),box2d.b2Mul_V2_S=function(o,t,e){return e.x=o.x*t,e.y=o.y*t,e},goog.exportSymbol("box2d.b2Mul_V2_S",box2d.b2Mul_V2_S),box2d.b2Div_V2_S=function(o,t,e){return e.x=o.x/t,e.y=o.y/t,e},goog.exportSymbol("box2d.b2Div_V2_S",box2d.b2Div_V2_S),box2d.b2AddMul_V2_S_V2=function(o,t,e,r){return r.x=o.x+t*e.x,r.y=o.y+t*e.y,r},goog.exportSymbol("box2d.b2AddMul_V2_S_V2",box2d.b2AddMul_V2_S_V2),box2d.b2SubMul_V2_S_V2=function(o,t,e,r){return r.x=o.x-t*e.x,r.y=o.y-t*e.y,r},goog.exportSymbol("box2d.b2SubMul_V2_S_V2",box2d.b2SubMul_V2_S_V2),box2d.b2AddCross_V2_S_V2=function(o,t,e,r){var i=e.x;return r.x=o.x-t*e.y,r.y=o.y+t*i,r},goog.exportSymbol("box2d.b2AddCross_V2_S_V2",box2d.b2AddCross_V2_S_V2),box2d.b2Mid_V2_V2=function(o,t,e){return e.x=.5*(o.x+t.x),e.y=.5*(o.y+t.y),e},goog.exportSymbol("box2d.b2Mid_V2_V2",box2d.b2Mid_V2_V2),box2d.b2Ext_V2_V2=function(o,t,e){return e.x=.5*(t.x-o.x),e.y=.5*(t.y-o.y),e},goog.exportSymbol("box2d.b2Ext_V2_V2",box2d.b2Ext_V2_V2),box2d.b2Distance=function(o,t){var e=o.x-t.x,r=o.y-t.y;return Math.sqrt(e*e+r*r)},goog.exportSymbol("box2d.b2Distance",box2d.b2Distance),box2d.b2DistanceSquared=function(o,t){var e=o.x-t.x,r=o.y-t.y;return e*e+r*r},goog.exportSymbol("box2d.b2DistanceSquared",box2d.b2DistanceSquared),box2d.b2Vec3=function(o,t,e){this.x=o||0,this.y=t||0,this.z=e||0},goog.exportSymbol("box2d.b2Vec3",box2d.b2Vec3),box2d.b2Vec3.prototype.x=0,goog.exportProperty(box2d.b2Vec3.prototype,"x",box2d.b2Vec3.prototype.x),box2d.b2Vec3.prototype.y=0,goog.exportProperty(box2d.b2Vec3.prototype,"y",box2d.b2Vec3.prototype.y),box2d.b2Vec3.prototype.z=0,goog.exportProperty(box2d.b2Vec3.prototype,"z",box2d.b2Vec3.prototype.z),box2d.b2Vec3.ZERO=new box2d.b2Vec3,goog.exportProperty(box2d.b2Vec3,"ZERO",box2d.b2Vec3.ZERO),box2d.b2Vec3.s_t0=new box2d.b2Vec3,goog.exportProperty(box2d.b2Vec3,"s_t0",box2d.b2Vec3.s_t0),box2d.b2Vec3.prototype.Clone=function(){return new box2d.b2Vec3(this.x,this.y,this.z)},goog.exportProperty(box2d.b2Vec3.prototype,"Clone",box2d.b2Vec3.prototype.Clone),box2d.b2Vec3.prototype.SetZero=function(){return this.z=this.y=this.x=0,this},goog.exportProperty(box2d.b2Vec3.prototype,"SetZero",box2d.b2Vec3.prototype.SetZero),box2d.b2Vec3.prototype.Set=function(o,t,e){return this.x=o,this.y=t,this.z=e,this},goog.exportProperty(box2d.b2Vec3.prototype,"Set",box2d.b2Vec3.prototype.Set),box2d.b2Vec3.prototype.Copy=function(o){return this.x=o.x,this.y=o.y,this.z=o.z,this},goog.exportProperty(box2d.b2Vec3.prototype,"Copy",box2d.b2Vec3.prototype.Copy),box2d.b2Vec3.prototype.SelfNeg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},goog.exportProperty(box2d.b2Vec3.prototype,"SelfNeg",box2d.b2Vec3.prototype.SelfNeg),box2d.b2Vec3.prototype.SelfAdd=function(o){return this.x+=o.x,this.y+=o.y,this.z+=o.z,this},goog.exportProperty(box2d.b2Vec3.prototype,"SelfAdd",box2d.b2Vec3.prototype.SelfAdd),box2d.b2Vec3.prototype.SelfAddV2=function(o,t){return this.x+=o.x,this.y+=o.y,this.z+=t,this},goog.exportProperty(box2d.b2Vec3.prototype,"SelfAddV2",box2d.b2Vec3.prototype.SelfAddV2),box2d.b2Vec3.prototype.SelfAddXYZ=function(o,t,e){return this.x+=o,this.y+=t,this.z+=e,this},goog.exportProperty(box2d.b2Vec3.prototype,"SelfAddXYZ",box2d.b2Vec3.prototype.SelfAddXYZ),box2d.b2Vec3.prototype.SelfSub=function(o){return this.x-=o.x,this.y-=o.y,this.z-=o.z,this},goog.exportProperty(box2d.b2Vec3.prototype,"SelfSub",box2d.b2Vec3.prototype.SelfSub),box2d.b2Vec3.prototype.SelfSubV2=function(o,t){return this.x-=o.x,this.y-=o.y,this.z-=t,this},goog.exportProperty(box2d.b2Vec3.prototype,"SelfSubV2",box2d.b2Vec3.prototype.SelfSubV2),box2d.b2Vec3.prototype.SelfSubXYZ=function(o,t,e){return this.x-=o,this.y-=t,this.z-=e,this},goog.exportProperty(box2d.b2Vec3.prototype,"SelfSubXYZ",box2d.b2Vec3.prototype.SelfSubXYZ),box2d.b2Vec3.prototype.SelfMul=function(o){return this.x*=o.x,this.y*=o.y,this.z*=o.z,this},goog.exportProperty(box2d.b2Vec3.prototype,"SelfMul",box2d.b2Vec3.prototype.SelfMul),box2d.b2Vec3.prototype.SelfMulV2=function(o,t){return this.x*=o.x,this.y*=o.y,this.z*=t,this},goog.exportProperty(box2d.b2Vec3.prototype,"SelfMulV2",box2d.b2Vec3.prototype.SelfMulV2),box2d.b2Vec3.prototype.SelfMulXYZ=function(o,t,e){return this.x*=o,this.y*=t,this.z*=e,this},goog.exportProperty(box2d.b2Vec3.prototype,"SelfMulXYZ",box2d.b2Vec3.prototype.SelfMulXYZ),box2d.b2Vec3.prototype.SelfMulScalar=function(o){return this.x*=o,this.y*=o,this.z*=o,this},goog.exportProperty(box2d.b2Vec3.prototype,"SelfMulScalar",box2d.b2Vec3.prototype.SelfMulScalar),box2d.b2Vec3.prototype.Length=function(){var o=this.x,t=this.y,e=this.z;return Math.sqrt(o*o+t*t+e*e)},goog.exportProperty(box2d.b2Vec3.prototype,"Length",box2d.b2Vec3.prototype.Length),box2d.b2Vec3.prototype.LengthSquared=function(){var o=this.x,t=this.y,e=this.z;return o*o+t*t+e*e},goog.exportProperty(box2d.b2Vec3.prototype,"LengthSquared",box2d.b2Vec3.prototype.LengthSquared),box2d.b2Vec3.prototype.Normalize=function(){var o=this.Length();if(o>=box2d.b2_epsilon){var t=1/o;this.x*=t,this.y*=t,this.z*=t}return o},goog.exportProperty(box2d.b2Vec3.prototype,"Normalize",box2d.b2Vec3.prototype.Normalize),box2d.b2Vec3.prototype.SelfNormalize=function(){return this.Normalize(),this},goog.exportProperty(box2d.b2Vec3.prototype,"SelfNormalize",box2d.b2Vec3.prototype.SelfNormalize),box2d.b2Add_V3_V3=function(o,t,e){return e.x=o.x+t.x,e.y=o.y+t.y,e.z=o.z+t.z,e},goog.exportSymbol("box2d.b2Add_V3_V3",box2d.b2Add_V3_V3),box2d.b2Sub_V3_V3=function(o,t,e){return e.x=o.x+t.x,e.y=o.y+t.y,e.z=o.z+t.z,e},goog.exportSymbol("box2d.b2Sub_V3_V3",box2d.b2Sub_V3_V3),box2d.b2Dot_V3_V3=function(o,t){return o.x*t.x+o.y*t.y+o.z*t.z},goog.exportSymbol("box2d.b2Dot_V3_V3",box2d.b2Dot_V3_V3),box2d.b2Cross_V3_V3=function(o,t,e){var r=o.x,i=o.y;o=o.z;var b=t.x,p=t.y;return t=t.z,e.x=i*t-o*p,e.y=o*b-r*t,e.z=r*p-i*b,e},goog.exportSymbol("box2d.b2Cross_V3_V3",box2d.b2Cross_V3_V3),box2d.b2Vec4=function(o,t,e,r){this.x=o||0,this.y=t||0,this.z=e||0,this.w=r||0},goog.exportSymbol("box2d.b2Vec4",box2d.b2Vec4),box2d.b2Vec4.prototype.x=0,goog.exportProperty(box2d.b2Vec4.prototype,"x",box2d.b2Vec4.prototype.x),box2d.b2Vec4.prototype.y=0,goog.exportProperty(box2d.b2Vec4.prototype,"y",box2d.b2Vec4.prototype.y),box2d.b2Vec4.prototype.z=0,goog.exportProperty(box2d.b2Vec4.prototype,"z",box2d.b2Vec4.prototype.z),box2d.b2Vec4.prototype.w=0,goog.exportProperty(box2d.b2Vec4.prototype,"w",box2d.b2Vec4.prototype.w),box2d.b2Vec4.ZERO=new box2d.b2Vec4(0,0,0,0),goog.exportProperty(box2d.b2Vec4,"ZERO",box2d.b2Vec4.ZERO),box2d.b2Vec4.s_t0=new box2d.b2Vec4,goog.exportProperty(box2d.b2Vec4,"s_t0",box2d.b2Vec4.s_t0),box2d.b2Vec4.prototype.Clone=function(){return new box2d.b2Vec4(this.x,this.y,this.z,this.w)},goog.exportProperty(box2d.b2Vec4.prototype,"Clone",box2d.b2Vec4.prototype.Clone),box2d.b2Vec4.prototype.SetZero=function(){return this.w=this.z=this.y=this.x=0,this},goog.exportProperty(box2d.b2Vec4.prototype,"SetZero",box2d.b2Vec4.prototype.SetZero),box2d.b2Vec4.prototype.Set=function(o,t,e,r){return this.x=o,this.y=t,this.z=e,this.w=r,this},goog.exportProperty(box2d.b2Vec4.prototype,"Set",box2d.b2Vec4.prototype.Set),box2d.b2Vec4.prototype.Copy=function(o){return this.x=o.x,this.y=o.y,this.z=o.z,this.w=o.w,this},goog.exportProperty(box2d.b2Vec4.prototype,"Copy",box2d.b2Vec4.prototype.Copy),box2d.b2Mat22=function(){this.ex=new box2d.b2Vec2(1,0),this.ey=new box2d.b2Vec2(0,1)},goog.exportSymbol("box2d.b2Mat22",box2d.b2Mat22),box2d.b2Mat22.prototype.ex=null,goog.exportProperty(box2d.b2Mat22.prototype,"ex",box2d.b2Mat22.prototype.ex),box2d.b2Mat22.prototype.ey=null,goog.exportProperty(box2d.b2Mat22.prototype,"ey",box2d.b2Mat22.prototype.ey),box2d.b2Mat22.IDENTITY=new box2d.b2Mat22,goog.exportProperty(box2d.b2Mat22,"IDENTITY",box2d.b2Mat22.IDENTITY),box2d.b2Mat22.prototype.Clone=function(){return(new box2d.b2Mat22).Copy(this)},goog.exportProperty(box2d.b2Mat22.prototype,"Clone",box2d.b2Mat22.prototype.Clone),box2d.b2Mat22.prototype.SetAngle=function(o){var t=Math.cos(o);return o=Math.sin(o),this.ex.Set(t,o),this.ey.Set(-o,t),this},goog.exportProperty(box2d.b2Mat22.prototype,"SetAngle",box2d.b2Mat22.prototype.SetAngle),box2d.b2Mat22.prototype.Copy=function(o){return this.ex.Copy(o.ex),this.ey.Copy(o.ey),this},goog.exportProperty(box2d.b2Mat22.prototype,"Copy",box2d.b2Mat22.prototype.Copy),box2d.b2Mat22.prototype.SetIdentity=function(){return this.ex.Set(1,0),this.ey.Set(0,1),this},goog.exportProperty(box2d.b2Mat22.prototype,"SetIdentity",box2d.b2Mat22.prototype.SetIdentity),box2d.b2Mat22.prototype.SetZero=function(){return this.ex.SetZero(),this.ey.SetZero(),this},goog.exportProperty(box2d.b2Mat22.prototype,"SetZero",box2d.b2Mat22.prototype.SetZero),box2d.b2Mat22.prototype.GetAngle=function(){return Math.atan2(this.ex.y,this.ex.x)},goog.exportProperty(box2d.b2Mat22.prototype,"GetAngle",box2d.b2Mat22.prototype.GetAngle),box2d.b2Mat22.prototype.GetInverse=function(o){var t=this.ex.x,e=this.ey.x,r=this.ex.y,i=this.ey.y,b=t*i-e*r;return 0!==b&&(b=1/b),o.ex.x=b*i,o.ey.x=-b*e,o.ex.y=-b*r,o.ey.y=b*t,o},goog.exportProperty(box2d.b2Mat22.prototype,"GetInverse",box2d.b2Mat22.prototype.GetInverse),box2d.b2Mat22.prototype.Solve=function(o,t,e){var r=this.ex.x,i=this.ey.x,b=this.ex.y,p=this.ey.y,n=r*p-i*b;return 0!==n&&(n=1/n),e.x=n*(p*o-i*t),e.y=n*(r*t-b*o),e},goog.exportProperty(box2d.b2Mat22.prototype,"Solve",box2d.b2Mat22.prototype.Solve),box2d.b2Mat22.prototype.SelfAbs=function(){return this.ex.SelfAbs(),this.ey.SelfAbs(),this},goog.exportProperty(box2d.b2Mat22.prototype,"SelfAbs",box2d.b2Mat22.prototype.SelfAbs),box2d.b2Mat22.prototype.SelfInv=function(){return this.GetInverse(this)},goog.exportProperty(box2d.b2Mat22.prototype,"SelfInv",box2d.b2Mat22.prototype.SelfInv),box2d.b2Mat22.prototype.SelfAdd=function(o){return this.ex.SelfAdd(o.ex),this.ey.SelfAdd(o.ey),this},goog.exportProperty(box2d.b2Mat22.prototype,"SelfAdd",box2d.b2Mat22.prototype.SelfAdd),box2d.b2Mat22.prototype.SelfSub=function(o){return this.ex.SelfSub(o.ex),this.ey.SelfSub(o.ey),this},goog.exportProperty(box2d.b2Mat22.prototype,"SelfSub",box2d.b2Mat22.prototype.SelfSub),box2d.b2Abs_M22=function(o,t){var e=o.ex,r=o.ey;return t.ex.x=box2d.b2Abs(e.x),t.ex.y=box2d.b2Abs(e.y),t.ey.x=box2d.b2Abs(r.x),t.ey.y=box2d.b2Abs(r.y),t},goog.exportSymbol("box2d.b2Abs_M22",box2d.b2Abs_M22),box2d.b2Mul_M22_V2=function(o,t,e){var r=o.ex;o=o.ey;var i=t.x;return t=t.y,e.x=r.x*i+o.x*t,e.y=r.y*i+o.y*t,e},goog.exportSymbol("box2d.b2Mul_M22_V2",box2d.b2Mul_M22_V2),box2d.b2MulT_M22_V2=function(o,t,e){var r=o.ex;o=o.ey;var i=t.x;return t=t.y,e.x=r.x*i+r.y*t,e.y=o.x*i+o.y*t,e},goog.exportSymbol("box2d.b2MulT_M22_V2",box2d.b2MulT_M22_V2),box2d.b2Add_M22_M22=function(o,t,e){var r=o.ex;o=o.ey;var i=t.ex;return t=t.ey,e.ex.x=r.x+i.x,e.ex.y=r.y+i.y,e.ey.x=o.x+t.x,e.ey.y=o.y+t.y,e},goog.exportSymbol("box2d.b2Add_M22_M22",box2d.b2Add_M22_M22),box2d.b2Mul_M22_M22=function(o,t,e){var r=o.ex.x,i=o.ex.y,b=o.ey.x;o=o.ey.y;var p=t.ex.x,n=t.ex.y,a=t.ey.x;return t=t.ey.y,e.ex.x=r*p+b*n,e.ex.y=i*p+o*n,e.ey.x=r*a+b*t,e.ey.y=i*a+o*t,e},goog.exportSymbol("box2d.b2Mul_M22_M22",box2d.b2Mul_M22_M22),box2d.b2MulT_M22_M22=function(o,t,e){var r=o.ex.x,i=o.ex.y,b=o.ey.x;o=o.ey.y;var p=t.ex.x,n=t.ex.y,a=t.ey.x;return t=t.ey.y,e.ex.x=r*p+i*n,e.ex.y=b*p+o*n,e.ey.x=r*a+i*t,e.ey.y=b*a+o*t,e},goog.exportSymbol("box2d.b2MulT_M22_M22",box2d.b2MulT_M22_M22),box2d.b2Mat33=function(){this.ex=new box2d.b2Vec3(1,0,0),this.ey=new box2d.b2Vec3(0,1,0),this.ez=new box2d.b2Vec3(0,0,1)},goog.exportSymbol("box2d.b2Mat33",box2d.b2Mat33),box2d.b2Mat33.prototype.ex=null,goog.exportProperty(box2d.b2Mat33.prototype,"ex",box2d.b2Mat33.prototype.ex),box2d.b2Mat33.prototype.ey=null,goog.exportProperty(box2d.b2Mat33.prototype,"ey",box2d.b2Mat33.prototype.ey),box2d.b2Mat33.prototype.ez=null,goog.exportProperty(box2d.b2Mat33.prototype,"ez",box2d.b2Mat33.prototype.ez),box2d.b2Mat33.IDENTITY=new box2d.b2Mat33,goog.exportProperty(box2d.b2Mat33,"IDENTITY",box2d.b2Mat33.IDENTITY),box2d.b2Mat33.prototype.Clone=function(){return(new box2d.b2Mat33).Copy(this)},goog.exportProperty(box2d.b2Mat33.prototype,"Clone",box2d.b2Mat33.prototype.Clone),box2d.b2Mat33.prototype.Copy=function(o){return this.ex.Copy(o.ex),this.ey.Copy(o.ey),this.ez.Copy(o.ez),this},goog.exportProperty(box2d.b2Mat33.prototype,"Copy",box2d.b2Mat33.prototype.Copy),box2d.b2Mat33.prototype.SetIdentity=function(){return this.ex.Set(1,0,0),this.ey.Set(0,1,0),this.ez.Set(0,0,1),this},goog.exportProperty(box2d.b2Mat33.prototype,"SetIdentity",box2d.b2Mat33.prototype.SetIdentity),box2d.b2Mat33.prototype.SetZero=function(){return this.ex.SetZero(),this.ey.SetZero(),this.ez.SetZero(),this},goog.exportProperty(box2d.b2Mat33.prototype,"SetZero",box2d.b2Mat33.prototype.SetZero),box2d.b2Mat33.prototype.SelfAdd=function(o){return this.ex.SelfAdd(o.ex),this.ey.SelfAdd(o.ey),this.ez.SelfAdd(o.ez),this},goog.exportProperty(box2d.b2Mat33.prototype,"SelfAdd",box2d.b2Mat33.prototype.SelfAdd),box2d.b2Mat33.prototype.Solve33=function(o,t,e,r){var i=this.ex.x,b=this.ex.y,p=this.ex.z,n=this.ey.x,a=this.ey.y,s=this.ey.z,d=this.ez.x,x=this.ez.y,l=this.ez.z,y=i*(a*l-s*x)+b*(s*d-n*l)+p*(n*x-a*d);return 0!==y&&(y=1/y),r.x=y*(o*(a*l-s*x)+t*(s*d-n*l)+e*(n*x-a*d)),r.y=y*(i*(t*l-e*x)+b*(e*d-o*l)+p*(o*x-t*d)),r.z=y*(i*(a*e-s*t)+b*(s*o-n*e)+p*(n*t-a*o)),r},goog.exportProperty(box2d.b2Mat33.prototype,"Solve33",box2d.b2Mat33.prototype.Solve33),box2d.b2Mat33.prototype.Solve22=function(o,t,e){var r=this.ex.x,i=this.ey.x,b=this.ex.y,p=this.ey.y,n=r*p-i*b;return 0!==n&&(n=1/n),e.x=n*(p*o-i*t),e.y=n*(r*t-b*o),e},goog.exportProperty(box2d.b2Mat33.prototype,"Solve22",box2d.b2Mat33.prototype.Solve22),box2d.b2Mat33.prototype.GetInverse22=function(o){var t=this.ex.x,e=this.ey.x,r=this.ex.y,i=this.ey.y,b=t*i-e*r;0!==b&&(b=1/b),o.ex.x=b*i,o.ey.x=-b*e,o.ex.z=0,o.ex.y=-b*r,o.ey.y=b*t,o.ey.z=0,o.ez.x=0,o.ez.y=0,o.ez.z=0},goog.exportProperty(box2d.b2Mat33.prototype,"GetInverse22",box2d.b2Mat33.prototype.GetInverse22),box2d.b2Mat33.prototype.GetSymInverse33=function(o){var t=box2d.b2Dot_V3_V3(this.ex,box2d.b2Cross_V3_V3(this.ey,this.ez,box2d.b2Vec3.s_t0));0!==t&&(t=1/t);var e=this.ex.x,r=this.ey.x,i=this.ez.x,b=this.ey.y,p=this.ez.y,n=this.ez.z;o.ex.x=t*(b*n-p*p),o.ex.y=t*(i*p-r*n),o.ex.z=t*(r*p-i*b),o.ey.x=o.ex.y,o.ey.y=t*(e*n-i*i),o.ey.z=t*(i*r-e*p),o.ez.x=o.ex.z,o.ez.y=o.ey.z,o.ez.z=t*(e*b-r*r)},goog.exportProperty(box2d.b2Mat33.prototype,"GetSymInverse33",box2d.b2Mat33.prototype.GetSymInverse33),box2d.b2Mul_M33_V3=function(o,t,e){var r=t.x,i=t.y;return t=t.z,e.x=o.ex.x*r+o.ey.x*i+o.ez.x*t,e.y=o.ex.y*r+o.ey.y*i+o.ez.y*t,e.z=o.ex.z*r+o.ey.z*i+o.ez.z*t,e},goog.exportSymbol("box2d.b2Mul_M33_V3",box2d.b2Mul_M33_V3),box2d.b2Mul_M33_X_Y_Z=function(o,t,e,r,i){return i.x=o.ex.x*t+o.ey.x*e+o.ez.x*r,i.y=o.ex.y*t+o.ey.y*e+o.ez.y*r,i.z=o.ex.z*t+o.ey.z*e+o.ez.z*r,i},goog.exportSymbol("box2d.b2Mul_M33_X_Y_Z",box2d.b2Mul_M33_X_Y_Z),box2d.b2Mul22_M33_V2=function(o,t,e){var r=t.x;return t=t.y,e.x=o.ex.x*r+o.ey.x*t,e.y=o.ex.y*r+o.ey.y*t,e},goog.exportSymbol("box2d.b2Mul22_M33_V2",box2d.b2Mul22_M33_V2),box2d.b2Mul_M33_X_Y=function(o,t,e,r){return r.x=o.ex.x*t+o.ey.x*e,r.y=o.ex.y*t+o.ey.y*e,r},goog.exportSymbol("box2d.b2Mul_M33_X_Y",box2d.b2Mul_M33_X_Y),box2d.b2Rot=function(o){o&&(this.angle=o,this.s=Math.sin(o),this.c=Math.cos(o))},goog.exportSymbol("box2d.b2Rot",box2d.b2Rot),box2d.b2Rot.prototype.angle=0,goog.exportProperty(box2d.b2Rot.prototype,"angle",box2d.b2Rot.prototype.angle),box2d.b2Rot.prototype.s=0,goog.exportProperty(box2d.b2Rot.prototype,"s",box2d.b2Rot.prototype.s),box2d.b2Rot.prototype.c=1,goog.exportProperty(box2d.b2Rot.prototype,"c",box2d.b2Rot.prototype.c),box2d.b2Rot.IDENTITY=new box2d.b2Rot,goog.exportProperty(box2d.b2Rot,"IDENTITY",box2d.b2Rot.IDENTITY),box2d.b2Rot.prototype.Clone=function(){return(new box2d.b2Rot).Copy(this)},goog.exportProperty(box2d.b2Rot.prototype,"Clone",box2d.b2Rot.prototype.Clone),box2d.b2Rot.prototype.Copy=function(o){return this.angle=o.angle,this.s=o.s,this.c=o.c,this},goog.exportProperty(box2d.b2Rot.prototype,"Copy",box2d.b2Rot.prototype.Copy),box2d.b2Rot.prototype.Set=function(o){return Math.abs(this.angle-o)>=box2d.b2_epsilon&&(this.angle=o,this.s=Math.sin(o),this.c=Math.cos(o)),this},goog.exportProperty(box2d.b2Rot.prototype,"Set",box2d.b2Rot.prototype.Set),box2d.b2Rot.prototype.SetAngle=box2d.b2Rot.prototype.Set,goog.exportProperty(box2d.b2Rot.prototype,"SetAngle",box2d.b2Rot.prototype.SetAngle),box2d.b2Rot.prototype.SetIdentity=function(){return this.s=this.angle=0,this.c=1,this},goog.exportProperty(box2d.b2Rot.prototype,"SetIdentity",box2d.b2Rot.prototype.SetIdentity),box2d.b2Rot.prototype.GetAngle=function(){return this.angle},goog.exportProperty(box2d.b2Rot.prototype,"GetAngle",box2d.b2Rot.prototype.GetAngle),box2d.b2Rot.prototype.GetXAxis=function(o){return o.x=this.c,o.y=this.s,o},goog.exportProperty(box2d.b2Rot.prototype,"GetXAxis",box2d.b2Rot.prototype.GetXAxis),box2d.b2Rot.prototype.GetYAxis=function(o){return o.x=-this.s,o.y=this.c,o},goog.exportProperty(box2d.b2Rot.prototype,"GetYAxis",box2d.b2Rot.prototype.GetYAxis),box2d.b2Mul_R_R=function(o,t,e){var r=o.c,i=o.s,b=t.c,p=t.s;return e.s=i*b+r*p,e.c=r*b-i*p,e.angle=box2d.b2WrapAngle(o.angle+t.angle),e},goog.exportSymbol("box2d.b2Mul_R_R",box2d.b2Mul_R_R),box2d.b2MulT_R_R=function(o,t,e){var r=o.c,i=o.s,b=t.c,p=t.s;return e.s=r*p-i*b,e.c=r*b+i*p,e.angle=box2d.b2WrapAngle(o.angle-t.angle),e},goog.exportSymbol("box2d.b2MulT_R_R",box2d.b2MulT_R_R),box2d.b2Mul_R_V2=function(o,t,e){var r=o.c;o=o.s;var i=t.x;return t=t.y,e.x=r*i-o*t,e.y=o*i+r*t,e},goog.exportSymbol("box2d.b2Mul_R_V2",box2d.b2Mul_R_V2),box2d.b2MulT_R_V2=function(o,t,e){var r=o.c;o=o.s;var i=t.x;return t=t.y,e.x=r*i+o*t,e.y=-o*i+r*t,e},goog.exportSymbol("box2d.b2MulT_R_V2",box2d.b2MulT_R_V2),box2d.b2Transform=function(){this.p=new box2d.b2Vec2,this.q=new box2d.b2Rot},goog.exportSymbol("box2d.b2Transform",box2d.b2Transform),box2d.b2Transform.prototype.p=null,goog.exportProperty(box2d.b2Transform.prototype,"p",box2d.b2Transform.prototype.p),box2d.b2Transform.prototype.q=null,goog.exportProperty(box2d.b2Transform.prototype,"q",box2d.b2Transform.prototype.q),box2d.b2Transform.IDENTITY=new box2d.b2Transform,goog.exportProperty(box2d.b2Transform,"IDENTITY",box2d.b2Transform.IDENTITY),box2d.b2Transform.prototype.Clone=function(){return(new box2d.b2Transform).Copy(this)},goog.exportProperty(box2d.b2Transform.prototype,"Clone",box2d.b2Transform.prototype.Clone),box2d.b2Transform.prototype.Copy=function(o){return this.p.Copy(o.p),this.q.Copy(o.q),this},goog.exportProperty(box2d.b2Transform.prototype,"Copy",box2d.b2Transform.prototype.Copy),box2d.b2Transform.prototype.SetIdentity=function(){return this.p.SetZero(),this.q.SetIdentity(),this},goog.exportProperty(box2d.b2Transform.prototype,"SetIdentity",box2d.b2Transform.prototype.SetIdentity),box2d.b2Transform.prototype.Set=function(o,t){return this.SetPositionRotationAngle(o,t)},box2d.b2Transform.prototype.SetPositionRotation=function(o,t){return this.p.Copy(o),this.q.Copy(t),this},goog.exportProperty(box2d.b2Transform.prototype,"SetPositionRotation",box2d.b2Transform.prototype.SetPositionRotation),box2d.b2Transform.prototype.SetPositionRotationAngle=function(o,t){return this.p.Copy(o),this.q.SetAngle(t),this},goog.exportProperty(box2d.b2Transform.prototype,"SetPositionRotationAngle",box2d.b2Transform.prototype.SetPositionRotationAngle),box2d.b2Transform.prototype.SetPosition=function(o){return this.p.Copy(o),this},goog.exportProperty(box2d.b2Transform.prototype,"SetPosition",box2d.b2Transform.prototype.SetPosition),box2d.b2Transform.prototype.SetPositionXY=function(o,t){return this.p.Set(o,t),this},goog.exportProperty(box2d.b2Transform.prototype,"SetPositionXY",box2d.b2Transform.prototype.SetPositionXY),box2d.b2Transform.prototype.SetRotation=function(o){return this.q.Copy(o),this},goog.exportProperty(box2d.b2Transform.prototype,"SetRotation",box2d.b2Transform.prototype.SetRotation),box2d.b2Transform.prototype.SetRotationAngle=function(o){return this.q.SetAngle(o),this},goog.exportProperty(box2d.b2Transform.prototype,"SetRotationAngle",box2d.b2Transform.prototype.SetRotationAngle),box2d.b2Transform.prototype.GetPosition=function(){return this.p},goog.exportProperty(box2d.b2Transform.prototype,"GetPosition",box2d.b2Transform.prototype.GetPosition),box2d.b2Transform.prototype.GetRotation=function(){return this.q},goog.exportProperty(box2d.b2Transform.prototype,"GetRotation",box2d.b2Transform.prototype.GetRotation),box2d.b2Transform.prototype.GetRotationAngle=function(){return this.q.GetAngle()},goog.exportProperty(box2d.b2Transform.prototype,"GetRotationAngle",box2d.b2Transform.prototype.GetRotationAngle),box2d.b2Transform.prototype.GetAngle=function(){return this.q.GetAngle()},goog.exportProperty(box2d.b2Transform.prototype,"GetAngle",box2d.b2Transform.prototype.GetAngle),box2d.b2Mul_X_V2=function(o,t,e){var r=o.q.c,i=o.q.s,b=t.x;return t=t.y,e.x=r*b-i*t+o.p.x,e.y=i*b+r*t+o.p.y,e},goog.exportSymbol("box2d.b2Mul_X_V2",box2d.b2Mul_X_V2),box2d.b2MulT_X_V2=function(o,t,e){var r=o.q.c,i=o.q.s,b=t.x-o.p.x;return o=t.y-o.p.y,e.x=r*b+i*o,e.y=-i*b+r*o,e},goog.exportSymbol("box2d.b2MulT_X_V2",box2d.b2MulT_X_V2),box2d.b2Mul_X_X=function(o,t,e){return box2d.b2Mul_R_R(o.q,t.q,e.q),box2d.b2Add_V2_V2(box2d.b2Mul_R_V2(o.q,t.p,e.p),o.p,e.p),e},goog.exportSymbol("box2d.b2Mul_X_X",box2d.b2Mul_X_X),box2d.b2MulT_X_X=function(o,t,e){return box2d.b2MulT_R_R(o.q,t.q,e.q),box2d.b2MulT_R_V2(o.q,box2d.b2Sub_V2_V2(t.p,o.p,e.p),e.p),e},goog.exportSymbol("box2d.b2MulT_X_X",box2d.b2MulT_X_X),box2d.b2Sweep=function(){this.localCenter=new box2d.b2Vec2,this.c0=new box2d.b2Vec2,this.c=new box2d.b2Vec2},goog.exportSymbol("box2d.b2Sweep",box2d.b2Sweep),box2d.b2Sweep.prototype.localCenter=null,goog.exportProperty(box2d.b2Sweep.prototype,"localCenter",box2d.b2Sweep.prototype.localCenter),box2d.b2Sweep.prototype.c0=null,goog.exportProperty(box2d.b2Sweep.prototype,"c0",box2d.b2Sweep.prototype.c0),box2d.b2Sweep.prototype.c=null,goog.exportProperty(box2d.b2Sweep.prototype,"c",box2d.b2Sweep.prototype.c),box2d.b2Sweep.prototype.a0=0,goog.exportProperty(box2d.b2Sweep.prototype,"a0",box2d.b2Sweep.prototype.a0),box2d.b2Sweep.prototype.a=0,goog.exportProperty(box2d.b2Sweep.prototype,"a",box2d.b2Sweep.prototype.a),box2d.b2Sweep.prototype.alpha0=0,goog.exportProperty(box2d.b2Sweep.prototype,"alpha0",box2d.b2Sweep.prototype.alpha0),box2d.b2Sweep.prototype.Clone=function(){return(new box2d.b2Sweep).Copy(this)},goog.exportProperty(box2d.b2Sweep.prototype,"Clone",box2d.b2Sweep.prototype.Clone),box2d.b2Sweep.prototype.Copy=function(o){return this.localCenter.Copy(o.localCenter),this.c0.Copy(o.c0),this.c.Copy(o.c),this.a0=o.a0,this.a=o.a,this.alpha0=o.alpha0,this},goog.exportProperty(box2d.b2Sweep.prototype,"Copy",box2d.b2Sweep.prototype.Copy),box2d.b2Sweep.prototype.GetTransform=function(o,t){var e=1-t;return o.p.x=e*this.c0.x+t*this.c.x,o.p.y=e*this.c0.y+t*this.c.y,o.q.SetAngle(e*this.a0+t*this.a),o.p.SelfSub(box2d.b2Mul_R_V2(o.q,this.localCenter,box2d.b2Vec2.s_t0)),o},goog.exportProperty(box2d.b2Sweep.prototype,"GetTransform",box2d.b2Sweep.prototype.GetTransform),box2d.b2Sweep.prototype.Advance=function(o){box2d.ENABLE_ASSERTS&&box2d.b2Assert(1>this.alpha0);var t=(o-this.alpha0)/(1-this.alpha0);this.c0.x+=t*(this.c.x-this.c0.x),this.c0.y+=t*(this.c.y-this.c0.y),this.a0+=t*(this.a-this.a0),this.alpha0=o},goog.exportProperty(box2d.b2Sweep.prototype,"Advance",box2d.b2Sweep.prototype.Advance),box2d.b2Sweep.prototype.Normalize=function(){this.a0=box2d.b2WrapAngle(this.a0),this.a=box2d.b2WrapAngle(this.a)},goog.exportProperty(box2d.b2Sweep.prototype,"Normalize",box2d.b2Sweep.prototype.Normalize),box2d.b2Dot=function(o,t){if(o instanceof box2d.b2Vec2&&t instanceof box2d.b2Vec2)return box2d.b2Dot_V2_V2(o,t);if(o instanceof box2d.b2Vec3&&t instanceof box2d.b2Vec3)return box2d.b2Dot_V3_V3(o,t);throw Error()},goog.exportSymbol("box2d.b2Dot",box2d.b2Dot),box2d.b2Cross=function(o,t,e){if(o instanceof box2d.b2Vec2&&t instanceof box2d.b2Vec2)return box2d.b2Cross_V2_V2(o,t);if(o instanceof box2d.b2Vec2&&"number"==typeof t&&e instanceof box2d.b2Vec2)return box2d.b2Cross_V2_S(o,t,e);if("number"==typeof o&&t instanceof box2d.b2Vec2&&e instanceof box2d.b2Vec2)return box2d.b2Cross_S_V2(o,t,e);if(o instanceof box2d.b2Vec3&&t instanceof box2d.b2Vec3&&e instanceof box2d.b2Vec3)return box2d.b2Cross_V3_V3(o,t,e);throw Error()},goog.exportSymbol("box2d.b2Cross",box2d.b2Cross),box2d.b2Add=function(o,t,e){if(o instanceof box2d.b2Vec2&&t instanceof box2d.b2Vec2&&e instanceof box2d.b2Vec2)return box2d.b2Add_V2_V2(o,t,e);if(o instanceof box2d.b2Vec3&&t instanceof box2d.b2Vec3&&e instanceof box2d.b2Vec3)return box2d.b2Add_V3_V3(o,t,e);throw Error()},goog.exportSymbol("box2d.b2Add",box2d.b2Add),box2d.b2Sub=function(o,t,e){if(o instanceof box2d.b2Vec2&&t instanceof box2d.b2Vec2&&e instanceof box2d.b2Vec2)return box2d.b2Sub_V2_V2(o,t,e);if(o instanceof box2d.b2Vec3&&t instanceof box2d.b2Vec3&&e instanceof box2d.b2Vec3)return box2d.b2Sub_V3_V3(o,t,e);throw Error()},goog.exportSymbol("box2d.b2Sub",box2d.b2Sub),box2d.b2Mul=function(o,t,e){if(o instanceof box2d.b2Mat22&&t instanceof box2d.b2Vec2&&e instanceof box2d.b2Vec2)return box2d.b2Mul_M22_V2(o,t,e);if(o instanceof box2d.b2Mat22&&t instanceof box2d.b2Mat22&&e instanceof box2d.b2Mat22)return box2d.b2Mul_M22_M22(o,t,e);if(o instanceof box2d.b2Mat33&&t instanceof box2d.b2Vec3&&e instanceof box2d.b2Vec3)return box2d.b2Mul_M33_V3(o,t,e);if(o instanceof box2d.b2Rot&&t instanceof box2d.b2Rot&&e instanceof box2d.b2Rot)return box2d.b2Mul_R_R(o,t,e);if(o instanceof box2d.b2Rot&&t instanceof box2d.b2Vec2&&e instanceof box2d.b2Vec2)return box2d.b2Mul_R_V2(o,t,e);if(o instanceof box2d.b2Transform&&t instanceof box2d.b2Vec2&&e instanceof box2d.b2Vec2)return box2d.b2Mul_X_V2(o,t,e);if(o instanceof box2d.b2Transform&&t instanceof box2d.b2Transform&&e instanceof box2d.b2Transform)return box2d.b2Mul_X_X(o,t,e);throw Error()},goog.exportSymbol("box2d.b2Mul",box2d.b2Mul),box2d.b2Mul22=function(o,t,e){if(o instanceof box2d.b2Mat33&&t instanceof box2d.b2Vec2)return box2d.b2Mul22_M33_V2(o,t,e);throw Error()},goog.exportSymbol("box2d.b2Mul22",box2d.b2Mul22),box2d.b2MulT=function(o,t,e){if(o instanceof box2d.b2Mat22&&t instanceof box2d.b2Vec2&&e instanceof box2d.b2Vec2)return box2d.b2MulT_M22_V2(o,t,e);if(o instanceof box2d.b2Mat22&&t instanceof box2d.b2Mat22&&e instanceof box2d.b2Mat22)return box2d.b2MulT_M22_M22(o,t,e);if(o instanceof box2d.b2Rot&&t instanceof box2d.b2Rot&&e instanceof box2d.b2Rot)return box2d.b2MulT_R_R(o,t,e);if(o instanceof box2d.b2Rot&&t instanceof box2d.b2Vec2&&e instanceof box2d.b2Vec2)return box2d.b2MulT_R_V2(o,t,e);if(o instanceof box2d.b2Transform&&t instanceof box2d.b2Vec2&&e instanceof box2d.b2Vec2)return box2d.b2MulT_X_V2(o,t,e);if(o instanceof box2d.b2Transform&&t instanceof box2d.b2Transform&&e instanceof box2d.b2Transform)return box2d.b2MulT_X_X(o,t,e);throw Error()},goog.exportSymbol("box2d.b2MulT",box2d.b2MulT),box2d.b2ConstantAccelController=function(){box2d.b2Controller.call(this),this.A=new box2d.b2Vec2(0,0)},goog.inherits(box2d.b2ConstantAccelController,box2d.b2Controller),goog.exportSymbol("box2d.b2ConstantAccelController",box2d.b2ConstantAccelController),box2d.b2ConstantAccelController.prototype.A=null,goog.exportProperty(box2d.b2ConstantAccelController.prototype,"A",box2d.b2ConstantAccelController.prototype.A),box2d.b2ConstantAccelController.prototype.Step=function(o){o=box2d.b2Mul_S_V2(o.dt,this.A,box2d.b2ConstantAccelController.prototype.Step.s_dtA);for(var t=this.m_bodyList;t;t=t.nextBody){var e=t.body;e.IsAwake()&&e.SetLinearVelocity(box2d.b2Add_V2_V2(e.GetLinearVelocity(),o,box2d.b2Vec2.s_t0))}},goog.exportProperty(box2d.b2ConstantAccelController.prototype,"Step",box2d.b2ConstantAccelController.prototype.Step),box2d.b2ConstantAccelController.prototype.Step.s_dtA=new box2d.b2Vec2,box2d.b2ConstantForceController=function(){box2d.b2Controller.call(this),this.F=new box2d.b2Vec2(0,0)},goog.inherits(box2d.b2ConstantForceController,box2d.b2Controller),goog.exportSymbol("box2d.b2ConstantForceController",box2d.b2ConstantForceController),box2d.b2ConstantAccelController.prototype.F=null,goog.exportProperty(box2d.b2ConstantAccelController.prototype,"F",box2d.b2ConstantAccelController.prototype.F),box2d.b2ConstantForceController.prototype.Step=function(o){for(o=this.m_bodyList;o;o=o.nextBody){var t=o.body;t.IsAwake()&&t.ApplyForce(this.F,t.GetWorldCenter())}},goog.exportProperty(box2d.b2ConstantForceController.prototype,"Step",box2d.b2ConstantForceController.prototype.Step),box2d.b2GravityController=function(){box2d.b2Controller.call(this)},goog.inherits(box2d.b2GravityController,box2d.b2Controller),goog.exportSymbol("box2d.b2GravityController",box2d.b2GravityController),box2d.b2GravityController.prototype.G=1,goog.exportProperty(box2d.b2GravityController.prototype,"G",box2d.b2GravityController.prototype.G),box2d.b2GravityController.prototype.invSqr=!0,goog.exportProperty(box2d.b2GravityController.prototype,"invSqr",box2d.b2GravityController.prototype.invSqr),box2d.b2GravityController.prototype.Step=function(o){if(this.invSqr)for(o=this.m_bodyList;o;o=o.nextBody)for(var t=o.body,e=t.GetWorldCenter(),r=t.GetMass(),i=this.m_bodyList;i!==o;i=i.nextBody){var b=i.body,p=b.GetWorldCenter(),n=b.GetMass(),a=p.x-e.x,s=p.y-e.y,d=a*a+s*s;d<box2d.b2_epsilon||((a=box2d.b2GravityController.prototype.Step.s_f.Set(a,s)).SelfMul(this.G/d/box2d.b2Sqrt(d)*r*n),t.IsAwake()&&t.ApplyForce(a,e),b.IsAwake()&&b.ApplyForce(a.SelfMul(-1),p))}else for(o=this.m_bodyList;o;o=o.nextBody)for(e=(t=o.body).GetWorldCenter(),r=t.GetMass(),i=this.m_bodyList;i!==o;i=i.nextBody)p=(b=i.body).GetWorldCenter(),n=b.GetMass(),(d=(a=p.x-e.x)*a+(s=p.y-e.y)*s)<box2d.b2_epsilon||((a=box2d.b2GravityController.prototype.Step.s_f.Set(a,s)).SelfMul(this.G/d*r*n),t.IsAwake()&&t.ApplyForce(a,e),b.IsAwake()&&b.ApplyForce(a.SelfMul(-1),p))},goog.exportProperty(box2d.b2GravityController.prototype,"Step",box2d.b2GravityController.prototype.Step),box2d.b2GravityController.prototype.Step.s_f=new box2d.b2Vec2,box2d.b2TensorDampingController=function(){box2d.b2Controller.call(this),this.T=new box2d.b2Mat22,this.maxTimestep=0},goog.inherits(box2d.b2TensorDampingController,box2d.b2Controller),goog.exportSymbol("box2d.b2TensorDampingController",box2d.b2TensorDampingController),box2d.b2TensorDampingController.prototype.T=new box2d.b2Mat22,goog.exportProperty(box2d.b2TensorDampingController.prototype,"T",box2d.b2TensorDampingController.prototype.T),box2d.b2TensorDampingController.prototype.maxTimestep=0,goog.exportProperty(box2d.b2TensorDampingController.prototype,"maxTimestep",box2d.b2TensorDampingController.prototype.maxTimestep),box2d.b2TensorDampingController.prototype.Step=function(o){if(!((o=o.dt)<=box2d.b2_epsilon)){o>this.maxTimestep&&0<this.maxTimestep&&(o=this.maxTimestep);for(var t=this.m_bodyList;t;t=t.nextBody){var e=t.body;if(e.IsAwake()){var r=e.GetWorldVector(box2d.b2Mul_M22_V2(this.T,e.GetLocalVector(e.GetLinearVelocity(),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t1),box2d.b2TensorDampingController.prototype.Step.s_damping);e.SetLinearVelocity(box2d.b2Add_V2_V2(e.GetLinearVelocity(),box2d.b2Mul_S_V2(o,r,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t1))}}}},box2d.b2TensorDampingController.prototype.Step.s_damping=new box2d.b2Vec2,box2d.b2TensorDampingController.prototype.SetAxisAligned=function(o,t){this.T.ex.x=-o,this.T.ex.y=0,this.T.ey.x=0,this.T.ey.y=-t,this.maxTimestep=0<o||0<t?1/box2d.b2Max(o,t):0},box2d.b2DistanceProxy=function(){this.m_buffer=box2d.b2Vec2.MakeArray(2)},goog.exportSymbol("box2d.b2DistanceProxy",box2d.b2DistanceProxy),box2d.b2DistanceProxy.prototype.m_buffer=null,goog.exportProperty(box2d.b2DistanceProxy.prototype,"m_buffer",box2d.b2DistanceProxy.prototype.m_buffer),box2d.b2DistanceProxy.prototype.m_vertices=null,goog.exportProperty(box2d.b2DistanceProxy.prototype,"m_vertices",box2d.b2DistanceProxy.prototype.m_vertices),box2d.b2DistanceProxy.prototype.m_count=0,goog.exportProperty(box2d.b2DistanceProxy.prototype,"m_count",box2d.b2DistanceProxy.prototype.m_count),box2d.b2DistanceProxy.prototype.m_radius=0,goog.exportProperty(box2d.b2DistanceProxy.prototype,"m_radius",box2d.b2DistanceProxy.prototype.m_radius),box2d.b2DistanceProxy.prototype.Reset=function(){return this.m_vertices=null,this.m_radius=this.m_count=0,this},goog.exportProperty(box2d.b2DistanceProxy.prototype,"Reset",box2d.b2DistanceProxy.prototype.Reset),box2d.b2DistanceProxy.prototype.SetShape=function(o,t){o.SetupDistanceProxy(this,t)},goog.exportProperty(box2d.b2DistanceProxy.prototype,"SetShape",box2d.b2DistanceProxy.prototype.SetShape),box2d.b2DistanceProxy.prototype.GetSupport=function(o){for(var t=0,e=box2d.b2Dot_V2_V2(this.m_vertices[0],o),r=1;r<this.m_count;++r){var i=box2d.b2Dot_V2_V2(this.m_vertices[r],o);i>e&&(t=r,e=i)}return t},goog.exportProperty(box2d.b2DistanceProxy.prototype,"GetSupport",box2d.b2DistanceProxy.prototype.GetSupport),box2d.b2DistanceProxy.prototype.GetSupportVertex=function(o,t){for(var e=0,r=box2d.b2Dot_V2_V2(this.m_vertices[0],o),i=1;i<this.m_count;++i){var b=box2d.b2Dot_V2_V2(this.m_vertices[i],o);b>r&&(e=i,r=b)}return t.Copy(this.m_vertices[e])},goog.exportProperty(box2d.b2DistanceProxy.prototype,"GetSupportVertex",box2d.b2DistanceProxy.prototype.GetSupportVertex),box2d.b2DistanceProxy.prototype.GetVertexCount=function(){return this.m_count},goog.exportProperty(box2d.b2DistanceProxy.prototype,"GetVertexCount",box2d.b2DistanceProxy.prototype.GetVertexCount),box2d.b2DistanceProxy.prototype.GetVertex=function(o){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=o&&o<this.m_count),this.m_vertices[o]},goog.exportProperty(box2d.b2DistanceProxy.prototype,"GetVertex",box2d.b2DistanceProxy.prototype.GetVertex),box2d.b2SimplexCache=function(){this.indexA=box2d.b2MakeNumberArray(3),this.indexB=box2d.b2MakeNumberArray(3)},goog.exportSymbol("box2d.b2SimplexCache",box2d.b2SimplexCache),box2d.b2SimplexCache.prototype.metric=0,goog.exportProperty(box2d.b2SimplexCache.prototype,"metric",box2d.b2SimplexCache.prototype.metric),box2d.b2SimplexCache.prototype.count=0,goog.exportProperty(box2d.b2SimplexCache.prototype,"count",box2d.b2SimplexCache.prototype.count),box2d.b2SimplexCache.prototype.indexA=null,goog.exportProperty(box2d.b2SimplexCache.prototype,"indexA",box2d.b2SimplexCache.prototype.indexA),box2d.b2SimplexCache.prototype.indexB=null,goog.exportProperty(box2d.b2SimplexCache.prototype,"indexB",box2d.b2SimplexCache.prototype.indexB),box2d.b2SimplexCache.prototype.Reset=function(){return this.count=this.metric=0,this},goog.exportProperty(box2d.b2SimplexCache.prototype,"Reset",box2d.b2SimplexCache.prototype.Reset),box2d.b2DistanceInput=function(){this.proxyA=new box2d.b2DistanceProxy,this.proxyB=new box2d.b2DistanceProxy,this.transformA=new box2d.b2Transform,this.transformB=new box2d.b2Transform},goog.exportSymbol("box2d.b2DistanceInput",box2d.b2DistanceInput),box2d.b2DistanceInput.prototype.proxyA=null,goog.exportProperty(box2d.b2DistanceInput.prototype,"proxyA",box2d.b2DistanceInput.prototype.proxyA),box2d.b2DistanceInput.prototype.proxyB=null,goog.exportProperty(box2d.b2DistanceInput.prototype,"proxyB",box2d.b2DistanceInput.prototype.proxyB),box2d.b2DistanceInput.prototype.transformA=null,goog.exportProperty(box2d.b2DistanceInput.prototype,"transformA",box2d.b2DistanceInput.prototype.transformA),box2d.b2DistanceInput.prototype.transformB=null,goog.exportProperty(box2d.b2DistanceInput.prototype,"transformB",box2d.b2DistanceInput.prototype.transformB),box2d.b2DistanceInput.prototype.useRadii=!1,goog.exportProperty(box2d.b2DistanceInput.prototype,"useRadii",box2d.b2DistanceInput.prototype.useRadii),box2d.b2DistanceInput.prototype.Reset=function(){return this.proxyA.Reset(),this.proxyB.Reset(),this.transformA.SetIdentity(),this.transformB.SetIdentity(),this.useRadii=!1,this},goog.exportProperty(box2d.b2DistanceInput.prototype,"Reset",box2d.b2DistanceInput.prototype.Reset),box2d.b2DistanceOutput=function(){this.pointA=new box2d.b2Vec2,this.pointB=new box2d.b2Vec2},goog.exportSymbol("box2d.b2DistanceOutput",box2d.b2DistanceOutput),box2d.b2DistanceOutput.prototype.pointA=null,goog.exportProperty(box2d.b2DistanceOutput.prototype,"pointA",box2d.b2DistanceOutput.prototype.pointA),box2d.b2DistanceOutput.prototype.pointB=null,goog.exportProperty(box2d.b2DistanceOutput.prototype,"pointB",box2d.b2DistanceOutput.prototype.pointB),box2d.b2DistanceOutput.prototype.distance=0,goog.exportProperty(box2d.b2DistanceOutput.prototype,"distance",box2d.b2DistanceOutput.prototype.distance),box2d.b2DistanceOutput.prototype.iterations=0,goog.exportProperty(box2d.b2DistanceOutput.prototype,"iterations",box2d.b2DistanceOutput.prototype.iterations),box2d.b2DistanceOutput.prototype.Reset=function(){return this.pointA.SetZero(),this.pointB.SetZero(),this.iterations=this.distance=0,this},goog.exportProperty(box2d.b2DistanceOutput.prototype,"Reset",box2d.b2DistanceOutput.prototype.Reset),box2d.b2_gjkCalls=0,goog.exportSymbol("box2d.b2_gjkCalls",box2d.b2_gjkCalls),box2d.b2_gjkIters=0,goog.exportSymbol("box2d.b2_gjkIters",box2d.b2_gjkIters),box2d.b2_gjkMaxIters=0,goog.exportSymbol("box2d.b2_gjkMaxIters",box2d.b2_gjkMaxIters),box2d.b2SimplexVertex=function(){this.wA=new box2d.b2Vec2,this.wB=new box2d.b2Vec2,this.w=new box2d.b2Vec2},goog.exportSymbol("box2d.b2SimplexVertex",box2d.b2SimplexVertex),box2d.b2SimplexVertex.prototype.wA=null,goog.exportProperty(box2d.b2SimplexVertex.prototype,"wA",box2d.b2SimplexVertex.prototype.wA),box2d.b2SimplexVertex.prototype.wB=null,goog.exportProperty(box2d.b2SimplexVertex.prototype,"wB",box2d.b2SimplexVertex.prototype.wB),box2d.b2SimplexVertex.prototype.w=null,goog.exportProperty(box2d.b2SimplexVertex.prototype,"w",box2d.b2SimplexVertex.prototype.w),box2d.b2SimplexVertex.prototype.a=0,goog.exportProperty(box2d.b2SimplexVertex.prototype,"a",box2d.b2SimplexVertex.prototype.a),box2d.b2SimplexVertex.prototype.indexA=0,goog.exportProperty(box2d.b2SimplexVertex.prototype,"indexA",box2d.b2SimplexVertex.prototype.indexA),box2d.b2SimplexVertex.prototype.indexB=0,goog.exportProperty(box2d.b2SimplexVertex.prototype,"indexB",box2d.b2SimplexVertex.prototype.indexB),box2d.b2SimplexVertex.prototype.Copy=function(o){return this.wA.Copy(o.wA),this.wB.Copy(o.wB),this.w.Copy(o.w),this.a=o.a,this.indexA=o.indexA,this.indexB=o.indexB,this},goog.exportProperty(box2d.b2SimplexVertex.prototype,"Copy",box2d.b2SimplexVertex.prototype.Copy),box2d.b2Simplex=function(){this.m_v1=new box2d.b2SimplexVertex,this.m_v2=new box2d.b2SimplexVertex,this.m_v3=new box2d.b2SimplexVertex,this.m_vertices=Array(3),this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3},goog.exportSymbol("box2d.b2Simplex",box2d.b2Simplex),box2d.b2Simplex.prototype.m_v1=null,goog.exportProperty(box2d.b2Simplex.prototype,"m_v1",box2d.b2Simplex.prototype.m_v1),box2d.b2Simplex.prototype.m_v2=null,goog.exportProperty(box2d.b2Simplex.prototype,"m_v2",box2d.b2Simplex.prototype.m_v2),box2d.b2Simplex.prototype.m_v3=null,goog.exportProperty(box2d.b2Simplex.prototype,"m_v3",box2d.b2Simplex.prototype.m_v3),box2d.b2Simplex.prototype.m_vertices=null,goog.exportProperty(box2d.b2Simplex.prototype,"m_vertices",box2d.b2Simplex.prototype.m_vertices),box2d.b2Simplex.prototype.m_count=0;goog.exportProperty(box2d.b2Simplex.prototype,"m_count",box2d.b2Simplex.prototype.m_count),box2d.b2Simplex.prototype.ReadCache=function(o,t,e,r,i){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=o.count&&3>=o.count),this.m_count=o.count;for(var b=this.m_vertices,p=0;p<this.m_count;++p){var n=b[p];n.indexA=o.indexA[p],n.indexB=o.indexB[p];var a=t.GetVertex(n.indexA),s=r.GetVertex(n.indexB);box2d.b2Mul_X_V2(e,a,n.wA),box2d.b2Mul_X_V2(i,s,n.wB),box2d.b2Sub_V2_V2(n.wB,n.wA,n.w),n.a=0}1<this.m_count&&(o=o.metric,(p=this.GetMetric())<.5*o||2*o<p||p<box2d.b2_epsilon)&&(this.m_count=0),0===this.m_count&&((n=b[0]).indexA=0,n.indexB=0,a=t.GetVertex(0),s=r.GetVertex(0),box2d.b2Mul_X_V2(e,a,n.wA),box2d.b2Mul_X_V2(i,s,n.wB),box2d.b2Sub_V2_V2(n.wB,n.wA,n.w),this.m_count=n.a=1)},goog.exportProperty(box2d.b2Simplex.prototype,"ReadCache",box2d.b2Simplex.prototype.ReadCache),box2d.b2Simplex.prototype.WriteCache=function(o){o.metric=this.GetMetric(),o.count=this.m_count;for(var t=this.m_vertices,e=0;e<this.m_count;++e)o.indexA[e]=t[e].indexA,o.indexB[e]=t[e].indexB},goog.exportProperty(box2d.b2Simplex.prototype,"WriteCache",box2d.b2Simplex.prototype.WriteCache),box2d.b2Simplex.prototype.GetSearchDirection=function(o){switch(this.m_count){case 1:return o.Copy(this.m_v1.w).SelfNeg();case 2:var t=box2d.b2Sub_V2_V2(this.m_v2.w,this.m_v1.w,o);return 0<box2d.b2Cross_V2_V2(t,box2d.b2Vec2.s_t0.Copy(this.m_v1.w).SelfNeg())?box2d.b2Cross_S_V2(1,t,o):box2d.b2Cross_V2_S(t,1,o);default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),o.SetZero()}},goog.exportProperty(box2d.b2Simplex.prototype,"GetSearchDirection",box2d.b2Simplex.prototype.GetSearchDirection),box2d.b2Simplex.prototype.GetClosestPoint=function(o){switch(this.m_count){case 0:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),o.SetZero();case 1:return o.Copy(this.m_v1.w);case 2:return o.Set(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);case 3:return o.SetZero();default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),o.SetZero()}},goog.exportProperty(box2d.b2Simplex.prototype,"GetClosestPoint",box2d.b2Simplex.prototype.GetClosestPoint),box2d.b2Simplex.prototype.GetWitnessPoints=function(o,t){switch(this.m_count){case 0:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1);break;case 1:o.Copy(this.m_v1.wA),t.Copy(this.m_v1.wB);break;case 2:o.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,o.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,t.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,t.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:t.x=o.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,t.y=o.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}},goog.exportProperty(box2d.b2Simplex.prototype,"GetWitnessPoints",box2d.b2Simplex.prototype.GetWitnessPoints),box2d.b2Simplex.prototype.GetMetric=function(){switch(this.m_count){case 0:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),0;case 1:return 0;case 2:return box2d.b2Distance(this.m_v1.w,this.m_v2.w);case 3:return box2d.b2Cross_V2_V2(box2d.b2Sub_V2_V2(this.m_v2.w,this.m_v1.w,box2d.b2Vec2.s_t0),box2d.b2Sub_V2_V2(this.m_v3.w,this.m_v1.w,box2d.b2Vec2.s_t1));default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),0}},goog.exportProperty(box2d.b2Simplex.prototype,"GetMetric",box2d.b2Simplex.prototype.GetMetric),box2d.b2Simplex.prototype.Solve2=function(){var o=this.m_v1.w,t=this.m_v2.w,e=box2d.b2Sub_V2_V2(t,o,box2d.b2Simplex.s_e12);0>=(o=-box2d.b2Dot_V2_V2(o,e))?this.m_count=this.m_v1.a=1:0>=(t=box2d.b2Dot_V2_V2(t,e))?(this.m_count=this.m_v2.a=1,this.m_v1.Copy(this.m_v2)):(e=1/(t+o),this.m_v1.a=t*e,this.m_v2.a=o*e,this.m_count=2)},goog.exportProperty(box2d.b2Simplex.prototype,"Solve2",box2d.b2Simplex.prototype.Solve2),box2d.b2Simplex.prototype.Solve3=function(){var o=this.m_v1.w,t=this.m_v2.w,e=this.m_v3.w,r=box2d.b2Sub_V2_V2(t,o,box2d.b2Simplex.s_e12),i=box2d.b2Dot_V2_V2(o,r),b=box2d.b2Dot_V2_V2(t,r),p=(i=-i,box2d.b2Sub_V2_V2(e,o,box2d.b2Simplex.s_e13)),n=box2d.b2Dot_V2_V2(o,p),a=box2d.b2Dot_V2_V2(e,p),s=(n=-n,box2d.b2Sub_V2_V2(e,t,box2d.b2Simplex.s_e23)),d=box2d.b2Dot_V2_V2(t,s);s=box2d.b2Dot_V2_V2(e,s),d=-d,r=(p=box2d.b2Cross_V2_V2(r,p))*box2d.b2Cross_V2_V2(t,e),e=p*box2d.b2Cross_V2_V2(e,o),o=p*box2d.b2Cross_V2_V2(o,t);0>=i&&0>=n?this.m_count=this.m_v1.a=1:0<b&&0<i&&0>=o?(a=1/(b+i),this.m_v1.a=b*a,this.m_v2.a=i*a,this.m_count=2):0<a&&0<n&&0>=e?(b=1/(a+n),this.m_v1.a=a*b,this.m_v3.a=n*b,this.m_count=2,this.m_v2.Copy(this.m_v3)):0>=b&&0>=d?(this.m_count=this.m_v2.a=1,this.m_v1.Copy(this.m_v2)):0>=a&&0>=s?(this.m_count=this.m_v3.a=1,this.m_v1.Copy(this.m_v3)):0<s&&0<d&&0>=r?(b=1/(s+d),this.m_v2.a=s*b,this.m_v3.a=d*b,this.m_count=2,this.m_v1.Copy(this.m_v3)):(b=1/(r+e+o),this.m_v1.a=r*b,this.m_v2.a=e*b,this.m_v3.a=o*b,this.m_count=3)},goog.exportProperty(box2d.b2Simplex.prototype,"Solve3",box2d.b2Simplex.prototype.Solve3),box2d.b2Simplex.s_e12=new box2d.b2Vec2,box2d.b2Simplex.s_e13=new box2d.b2Vec2,box2d.b2Simplex.s_e23=new box2d.b2Vec2,box2d.b2ShapeDistance=function(o,t,e){++box2d.b2_gjkCalls;var r=e.proxyA,i=e.proxyB,b=e.transformA,p=e.transformB,n=box2d.b2Distance.s_simplex;n.ReadCache(t,r,b,i,p);for(var a=n.m_vertices,s=box2d.b2Distance.s_saveA,d=box2d.b2Distance.s_saveB,x=0,l=0;20>l;){x=n.m_count;for(var y=0;y<x;++y)s[y]=a[y].indexA,d[y]=a[y].indexB;switch(n.m_count){case 1:break;case 2:n.Solve2();break;case 3:n.Solve3();break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}if(3===n.m_count)break;var c=n.GetClosestPoint(box2d.b2Distance.s_p);if(c.LengthSquared(),(y=n.GetSearchDirection(box2d.b2Distance.s_d)).LengthSquared()<box2d.b2_epsilon_sq)break;(c=a[n.m_count]).indexA=r.GetSupport(box2d.b2MulT_R_V2(b.q,box2d.b2Vec2.s_t0.Copy(y).SelfNeg(),box2d.b2Distance.s_supportA)),box2d.b2Mul_X_V2(b,r.GetVertex(c.indexA),c.wA),c.indexB=i.GetSupport(box2d.b2MulT_R_V2(p.q,y,box2d.b2Distance.s_supportB)),box2d.b2Mul_X_V2(p,i.GetVertex(c.indexB),c.wB),box2d.b2Sub_V2_V2(c.wB,c.wA,c.w),++l,++box2d.b2_gjkIters;var m=!1;for(y=0;y<x;++y)if(c.indexA===s[y]&&c.indexB===d[y]){m=!0;break}if(m)break;++n.m_count}box2d.b2_gjkMaxIters=box2d.b2Max(box2d.b2_gjkMaxIters,l),n.GetWitnessPoints(o.pointA,o.pointB),o.distance=box2d.b2Distance(o.pointA,o.pointB),o.iterations=l,n.WriteCache(t),e.useRadii&&(t=r.m_radius,i=i.m_radius,o.distance>t+i&&o.distance>box2d.b2_epsilon?(o.distance-=t+i,(e=box2d.b2Sub_V2_V2(o.pointB,o.pointA,box2d.b2Distance.s_normal)).Normalize(),o.pointA.SelfMulAdd(t,e),o.pointB.SelfMulSub(i,e)):(c=box2d.b2Mid_V2_V2(o.pointA,o.pointB,box2d.b2Distance.s_p),o.pointA.Copy(c),o.pointB.Copy(c),o.distance=0))},goog.exportSymbol("box2d.b2ShapeDistance",box2d.b2ShapeDistance),box2d.b2Distance.s_simplex=new box2d.b2Simplex,box2d.b2Distance.s_saveA=box2d.b2MakeNumberArray(3),box2d.b2Distance.s_saveB=box2d.b2MakeNumberArray(3),box2d.b2Distance.s_p=new box2d.b2Vec2,box2d.b2Distance.s_d=new box2d.b2Vec2,box2d.b2Distance.s_normal=new box2d.b2Vec2,box2d.b2Distance.s_supportA=new box2d.b2Vec2,box2d.b2Distance.s_supportB=new box2d.b2Vec2,box2d.b2Collision={},box2d.b2ContactFeatureType={e_vertex:0,e_face:1},goog.exportSymbol("box2d.b2ContactFeatureType",box2d.b2ContactFeatureType),goog.exportProperty(box2d.b2ContactFeatureType,"e_vertex",box2d.b2ContactFeatureType.e_vertex),goog.exportProperty(box2d.b2ContactFeatureType,"e_face",box2d.b2ContactFeatureType.e_face),box2d.b2ContactFeature=function(o){this._id=o},goog.exportSymbol("box2d.b2ContactFeature",box2d.b2ContactFeature),box2d.b2ContactFeature.prototype._id=null,goog.exportProperty(box2d.b2ContactFeature.prototype,"_id",box2d.b2ContactFeature.prototype._id),box2d.b2ContactFeature.prototype._indexA=0,goog.exportProperty(box2d.b2ContactFeature.prototype,"_indexA",box2d.b2ContactFeature.prototype._indexA),box2d.b2ContactFeature.prototype._indexB=0,goog.exportProperty(box2d.b2ContactFeature.prototype,"_indexB",box2d.b2ContactFeature.prototype._indexB),box2d.b2ContactFeature.prototype._typeA=0,goog.exportProperty(box2d.b2ContactFeature.prototype,"_typeA",box2d.b2ContactFeature.prototype._typeA),box2d.b2ContactFeature.prototype._typeB=0,goog.exportProperty(box2d.b2ContactFeature.prototype,"_typeB",box2d.b2ContactFeature.prototype._typeB),Object.defineProperty(box2d.b2ContactFeature.prototype,"indexA",{enumerable:!1,configurable:!0,get:function(){return this._indexA},set:function(o){this._indexA=o,this._id._key=4294967040&this._id._key|255&this._indexA}}),Object.defineProperty(box2d.b2ContactFeature.prototype,"indexB",{enumerable:!1,configurable:!0,get:function(){return this._indexB},set:function(o){this._indexB=o,this._id._key=4294902015&this._id._key|this._indexB<<8&65280}}),Object.defineProperty(box2d.b2ContactFeature.prototype,"typeA",{enumerable:!1,configurable:!0,get:function(){return this._typeA},set:function(o){this._typeA=o,this._id._key=4278255615&this._id._key|this._typeA<<16&16711680}}),Object.defineProperty(box2d.b2ContactFeature.prototype,"typeB",{enumerable:!1,configurable:!0,get:function(){return this._typeB},set:function(o){this._typeB=o,this._id._key=16777215&this._id._key|this._typeB<<24&4278190080}}),box2d.b2ContactID=function(){this.cf=new box2d.b2ContactFeature(this)},goog.exportSymbol("box2d.b2ContactID",box2d.b2ContactID),box2d.b2ContactID.prototype.cf=null,goog.exportProperty(box2d.b2ContactID.prototype,"cf",box2d.b2ContactID.prototype.cf),box2d.b2ContactID.prototype.key=0,goog.exportProperty(box2d.b2ContactID.prototype,"key",box2d.b2ContactID.prototype.key),box2d.b2ContactID.prototype.Copy=function(o){return this.key=o.key,this},goog.exportProperty(box2d.b2ContactID.prototype,"Copy",box2d.b2ContactID.prototype.Copy),box2d.b2ContactID.prototype.Clone=function(){return(new box2d.b2ContactID).Copy(this)},goog.exportProperty(box2d.b2ContactID.prototype,"Clone",box2d.b2ContactID.prototype.Clone),Object.defineProperty(box2d.b2ContactID.prototype,"key",{enumerable:!1,configurable:!0,get:function(){return this._key},set:function(o){this._key=o,this.cf._indexA=255&this._key,this.cf._indexB=this._key>>8&255,this.cf._typeA=this._key>>16&255,this.cf._typeB=this._key>>24&255}}),box2d.b2ManifoldPoint=function(){this.localPoint=new box2d.b2Vec2,this.id=new box2d.b2ContactID},goog.exportSymbol("box2d.b2ManifoldPoint",box2d.b2ManifoldPoint),box2d.b2ManifoldPoint.prototype.localPoint=null,goog.exportProperty(box2d.b2ManifoldPoint.prototype,"localPoint",box2d.b2ManifoldPoint.prototype.localPoint),box2d.b2ManifoldPoint.prototype.normalImpulse=0,goog.exportProperty(box2d.b2ManifoldPoint.prototype,"normalImpulse",box2d.b2ManifoldPoint.prototype.normalImpulse),box2d.b2ManifoldPoint.prototype.tangentImpulse=0,goog.exportProperty(box2d.b2ManifoldPoint.prototype,"tangentImpulse",box2d.b2ManifoldPoint.prototype.tangentImpulse),box2d.b2ManifoldPoint.prototype.id=null,goog.exportProperty(box2d.b2ManifoldPoint.prototype,"id",box2d.b2ManifoldPoint.prototype.id),box2d.b2ManifoldPoint.MakeArray=function(o){return box2d.b2MakeArray(o,function(o){return new box2d.b2ManifoldPoint})},goog.exportProperty(box2d.b2ManifoldPoint,"MakeArray",box2d.b2ManifoldPoint.MakeArray),box2d.b2ManifoldPoint.prototype.Reset=function(){this.localPoint.SetZero(),this.tangentImpulse=this.normalImpulse=0,this.id.key=0},goog.exportProperty(box2d.b2ManifoldPoint.prototype,"Reset",box2d.b2ManifoldPoint.prototype.Reset),box2d.b2ManifoldPoint.prototype.Copy=function(o){return this.localPoint.Copy(o.localPoint),this.normalImpulse=o.normalImpulse,this.tangentImpulse=o.tangentImpulse,this.id.Copy(o.id),this},goog.exportProperty(box2d.b2ManifoldPoint.prototype,"Copy",box2d.b2ManifoldPoint.prototype.Copy),box2d.b2ManifoldType={e_unknown:-1,e_circles:0,e_faceA:1,e_faceB:2},goog.exportSymbol("box2d.b2ManifoldType",box2d.b2ManifoldType),goog.exportProperty(box2d.b2ManifoldType,"e_unknown",box2d.b2ManifoldType.e_unknown),goog.exportProperty(box2d.b2ManifoldType,"e_circles",box2d.b2ManifoldType.e_circles),goog.exportProperty(box2d.b2ManifoldType,"e_faceA",box2d.b2ManifoldType.e_faceA),goog.exportProperty(box2d.b2ManifoldType,"e_faceB",box2d.b2ManifoldType.e_faceB),box2d.b2Manifold=function(){this.points=box2d.b2ManifoldPoint.MakeArray(box2d.b2_maxManifoldPoints),this.localNormal=new box2d.b2Vec2,this.localPoint=new box2d.b2Vec2,this.type=box2d.b2ManifoldType.e_unknown,this.pointCount=0},goog.exportSymbol("box2d.b2Manifold",box2d.b2Manifold),box2d.b2Manifold.prototype.points=null,goog.exportProperty(box2d.b2Manifold.prototype,"points",box2d.b2Manifold.prototype.points),box2d.b2Manifold.prototype.localNormal=null,goog.exportProperty(box2d.b2Manifold.prototype,"localNormal",box2d.b2Manifold.prototype.localNormal),box2d.b2Manifold.prototype.localPoint=null,goog.exportProperty(box2d.b2Manifold.prototype,"localPoint",box2d.b2Manifold.prototype.localPoint),box2d.b2Manifold.prototype.type=box2d.b2ManifoldType.e_unknown,goog.exportProperty(box2d.b2Manifold.prototype,"type",box2d.b2Manifold.prototype.type),box2d.b2Manifold.prototype.pointCount=0,goog.exportProperty(box2d.b2Manifold.prototype,"pointCount",box2d.b2Manifold.prototype.pointCount),box2d.b2Manifold.prototype.Reset=function(){for(var o=0,t=box2d.b2_maxManifoldPoints;o<t;++o)this.points[o].Reset();this.localNormal.SetZero(),this.localPoint.SetZero(),this.type=box2d.b2ManifoldType.e_unknown,this.pointCount=0},goog.exportProperty(box2d.b2Manifold.prototype,"Reset",box2d.b2Manifold.prototype.Reset),box2d.b2Manifold.prototype.Copy=function(o){this.pointCount=o.pointCount;for(var t=0,e=box2d.b2_maxManifoldPoints;t<e;++t)this.points[t].Copy(o.points[t]);return this.localNormal.Copy(o.localNormal),this.localPoint.Copy(o.localPoint),this.type=o.type,this},goog.exportProperty(box2d.b2Manifold.prototype,"Copy",box2d.b2Manifold.prototype.Copy),box2d.b2Manifold.prototype.Clone=function(){return(new box2d.b2Manifold).Copy(this)},goog.exportProperty(box2d.b2Manifold.prototype,"Clone",box2d.b2Manifold.prototype.Clone),box2d.b2WorldManifold=function(){this.normal=new box2d.b2Vec2,this.points=box2d.b2Vec2.MakeArray(box2d.b2_maxManifoldPoints),this.separations=box2d.b2MakeNumberArray(box2d.b2_maxManifoldPoints)},goog.exportSymbol("box2d.b2WorldManifold",box2d.b2WorldManifold),box2d.b2WorldManifold.prototype.normal=null,goog.exportProperty(box2d.b2WorldManifold.prototype,"normal",box2d.b2WorldManifold.prototype.normal),box2d.b2WorldManifold.prototype.points=null,goog.exportProperty(box2d.b2WorldManifold.prototype,"points",box2d.b2WorldManifold.prototype.points),box2d.b2WorldManifold.prototype.separations=null,goog.exportProperty(box2d.b2WorldManifold.prototype,"separations",box2d.b2WorldManifold.prototype.separations),box2d.b2WorldManifold.prototype.Initialize=function(o,t,e,r,i){if(0!==o.pointCount)switch(o.type){case box2d.b2ManifoldType.e_circles:this.normal.Set(1,0),t=box2d.b2Mul_X_V2(t,o.localPoint,box2d.b2WorldManifold.prototype.Initialize.s_pointA),o=box2d.b2Mul_X_V2(r,o.points[0].localPoint,box2d.b2WorldManifold.prototype.Initialize.s_pointB),box2d.b2DistanceSquared(t,o)>box2d.b2_epsilon_sq&&box2d.b2Sub_V2_V2(o,t,this.normal).SelfNormalize();var b=box2d.b2AddMul_V2_S_V2(t,e,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cA),p=box2d.b2SubMul_V2_S_V2(o,i,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cB);box2d.b2Mid_V2_V2(b,p,this.points[0]),this.separations[0]=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(p,b,box2d.b2Vec2.s_t0),this.normal);break;case box2d.b2ManifoldType.e_faceA:box2d.b2Mul_R_V2(t.q,o.localNormal,this.normal);for(var n=box2d.b2Mul_X_V2(t,o.localPoint,box2d.b2WorldManifold.prototype.Initialize.s_planePoint),a=0,s=o.pointCount;a<s;++a){var d=box2d.b2Mul_X_V2(r,o.points[a].localPoint,box2d.b2WorldManifold.prototype.Initialize.s_clipPoint);b=e-box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(d,n,box2d.b2Vec2.s_t0),this.normal),b=box2d.b2AddMul_V2_S_V2(d,b,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cA),p=box2d.b2SubMul_V2_S_V2(d,i,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cB);box2d.b2Mid_V2_V2(b,p,this.points[a]),this.separations[a]=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(p,b,box2d.b2Vec2.s_t0),this.normal)}break;case box2d.b2ManifoldType.e_faceB:for(box2d.b2Mul_R_V2(r.q,o.localNormal,this.normal),n=box2d.b2Mul_X_V2(r,o.localPoint,box2d.b2WorldManifold.prototype.Initialize.s_planePoint),a=0,s=o.pointCount;a<s;++a)d=box2d.b2Mul_X_V2(t,o.points[a].localPoint,box2d.b2WorldManifold.prototype.Initialize.s_clipPoint),b=i-box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(d,n,box2d.b2Vec2.s_t0),this.normal),p=box2d.b2AddMul_V2_S_V2(d,b,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cB),b=box2d.b2SubMul_V2_S_V2(d,e,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cA),box2d.b2Mid_V2_V2(b,p,this.points[a]),this.separations[a]=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(b,p,box2d.b2Vec2.s_t0),this.normal);this.normal.SelfNeg()}},goog.exportProperty(box2d.b2WorldManifold.prototype,"Initialize",box2d.b2WorldManifold.prototype.Initialize),box2d.b2WorldManifold.prototype.Initialize.s_pointA=new box2d.b2Vec2,box2d.b2WorldManifold.prototype.Initialize.s_pointB=new box2d.b2Vec2,box2d.b2WorldManifold.prototype.Initialize.s_cA=new box2d.b2Vec2,box2d.b2WorldManifold.prototype.Initialize.s_cB=new box2d.b2Vec2,box2d.b2WorldManifold.prototype.Initialize.s_planePoint=new box2d.b2Vec2,box2d.b2WorldManifold.prototype.Initialize.s_clipPoint=new box2d.b2Vec2,box2d.b2PointState={b2_nullState:0,b2_addState:1,b2_persistState:2,b2_removeState:3},goog.exportSymbol("box2d.b2PointState",box2d.b2PointState),goog.exportProperty(box2d.b2PointState,"b2_nullState   ",box2d.b2PointState.b2_nullState),goog.exportProperty(box2d.b2PointState,"b2_addState    ",box2d.b2PointState.b2_addState),goog.exportProperty(box2d.b2PointState,"b2_persistState",box2d.b2PointState.b2_persistState),goog.exportProperty(box2d.b2PointState,"b2_removeState ",box2d.b2PointState.b2_removeState),box2d.b2GetPointStates=function(o,t,e,r){for(var i=0,b=e.pointCount;i<b;++i){var p=(p=e.points[i].id).key;o[i]=box2d.b2PointState.b2_removeState;for(var n=0,a=r.pointCount;n<a;++n)if(r.points[n].id.key===p){o[i]=box2d.b2PointState.b2_persistState;break}}for(b=box2d.b2_maxManifoldPoints;i<b;++i)o[i]=box2d.b2PointState.b2_nullState;for(i=0,b=r.pointCount;i<b;++i)for(p=(p=r.points[i].id).key,t[i]=box2d.b2PointState.b2_addState,n=0,a=e.pointCount;n<a;++n)if(e.points[n].id.key===p){t[i]=box2d.b2PointState.b2_persistState;break}for(b=box2d.b2_maxManifoldPoints;i<b;++i)t[i]=box2d.b2PointState.b2_nullState},goog.exportSymbol("box2d.b2GetPointStates",box2d.b2GetPointStates),box2d.b2ClipVertex=function(){this.v=new box2d.b2Vec2,this.id=new box2d.b2ContactID},goog.exportSymbol("box2d.b2ClipVertex",box2d.b2ClipVertex),box2d.b2ClipVertex.prototype.v=null,goog.exportProperty(box2d.b2ClipVertex.prototype,"v",box2d.b2ClipVertex.prototype.v),box2d.b2ClipVertex.prototype.id=null,goog.exportProperty(box2d.b2ClipVertex.prototype,"id",box2d.b2ClipVertex.prototype.id),box2d.b2ClipVertex.MakeArray=function(o){return box2d.b2MakeArray(o,function(o){return new box2d.b2ClipVertex})},goog.exportProperty(box2d.b2ClipVertex,"MakeArray",box2d.b2ClipVertex.MakeArray),box2d.b2ClipVertex.prototype.Copy=function(o){return this.v.Copy(o.v),this.id.Copy(o.id),this},goog.exportProperty(box2d.b2ClipVertex.prototype,"Copy",box2d.b2ClipVertex.prototype.Copy),box2d.b2RayCastInput=function(){this.p1=new box2d.b2Vec2,this.p2=new box2d.b2Vec2,this.maxFraction=1},goog.exportSymbol("box2d.b2RayCastInput",box2d.b2RayCastInput),box2d.b2RayCastInput.prototype.p1=null,goog.exportProperty(box2d.b2RayCastInput.prototype,"p1",box2d.b2RayCastInput.prototype.p1),box2d.b2RayCastInput.prototype.p2=null,goog.exportProperty(box2d.b2RayCastInput.prototype,"p2",box2d.b2RayCastInput.prototype.p2),box2d.b2RayCastInput.prototype.maxFraction=1,goog.exportProperty(box2d.b2RayCastInput.prototype,"maxFraction",box2d.b2RayCastInput.prototype.maxFraction),box2d.b2RayCastInput.prototype.Copy=function(o){return this.p1.Copy(o.p1),this.p2.Copy(o.p2),this.maxFraction=o.maxFraction,this},goog.exportProperty(box2d.b2RayCastInput.prototype,"Copy",box2d.b2RayCastInput.prototype.Copy),box2d.b2RayCastOutput=function(){this.normal=new box2d.b2Vec2,this.fraction=0},goog.exportSymbol("box2d.b2RayCastOutput",box2d.b2RayCastOutput),box2d.b2RayCastOutput.prototype.normal=null,goog.exportProperty(box2d.b2RayCastOutput.prototype,"normal",box2d.b2RayCastOutput.prototype.normal),box2d.b2RayCastOutput.prototype.fraction=0,goog.exportProperty(box2d.b2RayCastOutput.prototype,"fraction",box2d.b2RayCastOutput.prototype.fraction),box2d.b2RayCastOutput.prototype.Copy=function(o){return this.normal.Copy(o.normal),this.fraction=o.fraction,this},goog.exportProperty(box2d.b2RayCastOutput.prototype,"Copy",box2d.b2RayCastOutput.prototype.Copy),box2d.b2AABB=function(){this.lowerBound=new box2d.b2Vec2,this.upperBound=new box2d.b2Vec2,this.m_out_center=new box2d.b2Vec2,this.m_out_extent=new box2d.b2Vec2},goog.exportSymbol("box2d.b2AABB",box2d.b2AABB),box2d.b2AABB.prototype.lowerBound=null,goog.exportProperty(box2d.b2AABB.prototype,"lowerBound",box2d.b2AABB.prototype.lowerBound),box2d.b2AABB.prototype.upperBound=null,goog.exportProperty(box2d.b2AABB.prototype,"upperBound",box2d.b2AABB.prototype.upperBound),box2d.b2AABB.prototype.m_out_center=null,goog.exportProperty(box2d.b2AABB.prototype,"m_out_center",box2d.b2AABB.prototype.m_out_center),box2d.b2AABB.prototype.m_out_extent=null,goog.exportProperty(box2d.b2AABB.prototype,"m_out_extent",box2d.b2AABB.prototype.m_out_extent),box2d.b2AABB.prototype.Clone=function(){return(new box2d.b2AABB).Copy(this)},goog.exportProperty(box2d.b2AABB.prototype,"Clone",box2d.b2AABB.prototype.Clone),box2d.b2AABB.prototype.Copy=function(o){return this.lowerBound.Copy(o.lowerBound),this.upperBound.Copy(o.upperBound),this},goog.exportProperty(box2d.b2AABB.prototype,"Copy",box2d.b2AABB.prototype.Copy),box2d.b2AABB.prototype.IsValid=function(){var o=this.upperBound.y-this.lowerBound.y;return(o=0<=this.upperBound.x-this.lowerBound.x&&0<=o)&&this.lowerBound.IsValid()&&this.upperBound.IsValid()},goog.exportProperty(box2d.b2AABB.prototype,"IsValid",box2d.b2AABB.prototype.IsValid),box2d.b2AABB.prototype.GetCenter=function(){return box2d.b2Mid_V2_V2(this.lowerBound,this.upperBound,this.m_out_center)},goog.exportProperty(box2d.b2AABB.prototype,"GetCenter",box2d.b2AABB.prototype.GetCenter),box2d.b2AABB.prototype.GetExtents=function(){return box2d.b2Ext_V2_V2(this.lowerBound,this.upperBound,this.m_out_extent)},goog.exportProperty(box2d.b2AABB.prototype,"GetExtents",box2d.b2AABB.prototype.GetExtents),box2d.b2AABB.prototype.GetPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+(this.upperBound.y-this.lowerBound.y))},goog.exportProperty(box2d.b2AABB.prototype,"GetPerimeter",box2d.b2AABB.prototype.GetPerimeter),box2d.b2AABB.prototype.Combine=function(o,t){switch(arguments.length){case 1:return this.Combine1(o);case 2:return this.Combine2(o,t||new box2d.b2AABB);default:throw Error()}},box2d.b2AABB.prototype.Combine1=function(o){return this.lowerBound.x=box2d.b2Min(this.lowerBound.x,o.lowerBound.x),this.lowerBound.y=box2d.b2Min(this.lowerBound.y,o.lowerBound.y),this.upperBound.x=box2d.b2Max(this.upperBound.x,o.upperBound.x),this.upperBound.y=box2d.b2Max(this.upperBound.y,o.upperBound.y),this},goog.exportProperty(box2d.b2AABB.prototype,"Combine1",box2d.b2AABB.prototype.Combine1),box2d.b2AABB.prototype.Combine2=function(o,t){return this.lowerBound.x=box2d.b2Min(o.lowerBound.x,t.lowerBound.x),this.lowerBound.y=box2d.b2Min(o.lowerBound.y,t.lowerBound.y),this.upperBound.x=box2d.b2Max(o.upperBound.x,t.upperBound.x),this.upperBound.y=box2d.b2Max(o.upperBound.y,t.upperBound.y),this},goog.exportProperty(box2d.b2AABB.prototype,"Combine2",box2d.b2AABB.prototype.Combine2),box2d.b2AABB.Combine=function(o,t,e){return e.Combine2(o,t),e},goog.exportProperty(box2d.b2AABB,"Combine",box2d.b2AABB.Combine),box2d.b2AABB.prototype.Contains=function(o){return this.lowerBound.x<=o.lowerBound.x&&this.lowerBound.y<=o.lowerBound.y&&o.upperBound.x<=this.upperBound.x&&o.upperBound.y<=this.upperBound.y},goog.exportProperty(box2d.b2AABB.prototype,"Contains",box2d.b2AABB.prototype.Contains),box2d.b2AABB.prototype.RayCast=function(o,t){var e=-box2d.b2_maxFloat,r=box2d.b2_maxFloat,i=t.p1.x,b=t.p1.y,p=t.p2.x-t.p1.x,n=t.p2.y-t.p1.y,a=box2d.b2Abs(p),s=box2d.b2Abs(n),d=o.normal;if(a<box2d.b2_epsilon){if(i<this.lowerBound.x||this.upperBound.x<i)return!1}else if(a=1/p,p=(this.lowerBound.x-i)*a,i=(this.upperBound.x-i)*a,a=-1,p>i&&(a=p,p=i,i=a,a=1),p>e&&(d.x=a,d.y=0,e=p),e>(r=box2d.b2Min(r,i)))return!1;if(s<box2d.b2_epsilon){if(b<this.lowerBound.y||this.upperBound.y<b)return!1}else if(a=1/n,p=(this.lowerBound.y-b)*a,i=(this.upperBound.y-b)*a,a=-1,p>i&&(a=p,p=i,i=a,a=1),p>e&&(d.x=0,d.y=a,e=p),e>(r=box2d.b2Min(r,i)))return!1;return!(0>e||t.maxFraction<e)&&(o.fraction=e,!0)},goog.exportProperty(box2d.b2AABB.prototype,"RayCast",box2d.b2AABB.prototype.RayCast),box2d.b2AABB.prototype.TestOverlap=function(o){var t=o.lowerBound.y-this.upperBound.y,e=this.lowerBound.y-o.upperBound.y;return!(0<o.lowerBound.x-this.upperBound.x||0<t||0<this.lowerBound.x-o.upperBound.x||0<e)},goog.exportProperty(box2d.b2AABB.prototype,"TestOverlap",box2d.b2AABB.prototype.TestOverlap),box2d.b2TestOverlapAABB=function(o,t){var e=t.lowerBound.y-o.upperBound.y,r=o.lowerBound.y-t.upperBound.y;return!(0<t.lowerBound.x-o.upperBound.x||0<e||0<o.lowerBound.x-t.upperBound.x||0<r)},goog.exportSymbol("box2d.b2TestOverlapAABB",box2d.b2TestOverlapAABB),box2d.b2ClipSegmentToLine=function(o,t,e,r,i){var b=0,p=t[0];t=t[1];var n=box2d.b2Dot_V2_V2(e,p.v)-r;return e=box2d.b2Dot_V2_V2(e,t.v)-r,0>=n&&o[b++].Copy(p),0>=e&&o[b++].Copy(t),0>n*e&&(e=n/(n-e),(r=o[b].v).x=p.v.x+e*(t.v.x-p.v.x),r.y=p.v.y+e*(t.v.y-p.v.y),(o=o[b].id).cf.indexA=i,o.cf.indexB=p.id.cf.indexB,o.cf.typeA=box2d.b2ContactFeatureType.e_vertex,o.cf.typeB=box2d.b2ContactFeatureType.e_face,++b),b},goog.exportSymbol("box2d.b2ClipSegmentToLine",box2d.b2ClipSegmentToLine),box2d.b2TestOverlapShape=function(o,t,e,r,i,b){var p=box2d.b2TestOverlapShape.s_input.Reset();return p.proxyA.SetShape(o,t),p.proxyB.SetShape(e,r),p.transformA.Copy(i),p.transformB.Copy(b),p.useRadii=!0,(o=box2d.b2TestOverlapShape.s_simplexCache.Reset()).count=0,t=box2d.b2TestOverlapShape.s_output.Reset(),box2d.b2ShapeDistance(t,o,p),t.distance<10*box2d.b2_epsilon},goog.exportSymbol("box2d.b2TestOverlapShape",box2d.b2TestOverlapShape),box2d.b2TestOverlapShape.s_input=new box2d.b2DistanceInput,box2d.b2TestOverlapShape.s_simplexCache=new box2d.b2SimplexCache,box2d.b2TestOverlapShape.s_output=new box2d.b2DistanceOutput,box2d.b2CollideCircle={},box2d.b2CollideCircles=function(o,t,e,r,i){o.pointCount=0,e=box2d.b2Mul_X_V2(e,t.m_p,box2d.b2CollideCircles.s_pA),i=box2d.b2Mul_X_V2(i,r.m_p,box2d.b2CollideCircles.s_pB),(i=box2d.b2DistanceSquared(e,i))>(e=t.m_radius+r.m_radius)*e||(o.type=box2d.b2ManifoldType.e_circles,o.localPoint.Copy(t.m_p),o.localNormal.SetZero(),o.pointCount=1,o.points[0].localPoint.Copy(r.m_p),o.points[0].id.key=0)},goog.exportSymbol("box2d.b2CollideCircles",box2d.b2CollideCircles),box2d.b2CollideCircles.s_pA=new box2d.b2Vec2,box2d.b2CollideCircles.s_pB=new box2d.b2Vec2,box2d.b2CollidePolygonAndCircle=function(o,t,e,r,i){o.pointCount=0,i=box2d.b2Mul_X_V2(i,r.m_p,box2d.b2CollidePolygonAndCircle.s_c),e=box2d.b2MulT_X_V2(e,i,box2d.b2CollidePolygonAndCircle.s_cLocal);var b=0,p=-box2d.b2_maxFloat;i=t.m_radius+r.m_radius;var n=t.m_count,a=t.m_vertices;t=t.m_normals;for(var s=0;s<n;++s){var d=box2d.b2Dot_V2_V2(t[s],box2d.b2Sub_V2_V2(e,a[s],box2d.b2Vec2.s_t0));if(d>i)return;d>p&&(p=d,b=s)}d=a[s=b],n=a[(s+1)%n],p<box2d.b2_epsilon?(o.pointCount=1,o.type=box2d.b2ManifoldType.e_faceA,o.localNormal.Copy(t[b]),box2d.b2Mid_V2_V2(d,n,o.localPoint),o.points[0].localPoint.Copy(r.m_p),o.points[0].id.key=0):(p=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(e,d,box2d.b2Vec2.s_t0),box2d.b2Sub_V2_V2(n,d,box2d.b2Vec2.s_t1)),b=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(e,n,box2d.b2Vec2.s_t0),box2d.b2Sub_V2_V2(d,n,box2d.b2Vec2.s_t1)),0>=p?box2d.b2DistanceSquared(e,d)>i*i||(o.pointCount=1,o.type=box2d.b2ManifoldType.e_faceA,box2d.b2Sub_V2_V2(e,d,o.localNormal).SelfNormalize(),o.localPoint.Copy(d),o.points[0].localPoint.Copy(r.m_p),o.points[0].id.key=0):0>=b?box2d.b2DistanceSquared(e,n)>i*i||(o.pointCount=1,o.type=box2d.b2ManifoldType.e_faceA,box2d.b2Sub_V2_V2(e,n,o.localNormal).SelfNormalize(),o.localPoint.Copy(n),o.points[0].localPoint.Copy(r.m_p),o.points[0].id.key=0):(b=box2d.b2Mid_V2_V2(d,n,box2d.b2CollidePolygonAndCircle.s_faceCenter),(p=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(e,b,box2d.b2Vec2.s_t1),t[s]))>i||(o.pointCount=1,o.type=box2d.b2ManifoldType.e_faceA,o.localNormal.Copy(t[s]).SelfNormalize(),o.localPoint.Copy(b),o.points[0].localPoint.Copy(r.m_p),o.points[0].id.key=0)))},goog.exportSymbol("box2d.b2CollidePolygonAndCircle",box2d.b2CollidePolygonAndCircle),box2d.b2CollidePolygonAndCircle.s_c=new box2d.b2Vec2,box2d.b2CollidePolygonAndCircle.s_cLocal=new box2d.b2Vec2,box2d.b2CollidePolygonAndCircle.s_faceCenter=new box2d.b2Vec2,box2d.b2CollideEdge={},box2d.b2CollideEdgeAndCircle=function(o,t,e,r,i){o.pointCount=0,e=box2d.b2MulT_X_V2(e,box2d.b2Mul_X_V2(i,r.m_p,box2d.b2Vec2.s_t0),box2d.b2CollideEdgeAndCircle.s_Q);var b=t.m_vertex1,p=t.m_vertex2,n=box2d.b2Sub_V2_V2(p,b,box2d.b2CollideEdgeAndCircle.s_e),a=box2d.b2Dot_V2_V2(n,box2d.b2Sub_V2_V2(p,e,box2d.b2Vec2.s_t0)),s=box2d.b2Dot_V2_V2(n,box2d.b2Sub_V2_V2(e,b,box2d.b2Vec2.s_t0)),d=t.m_radius+r.m_radius;if((i=box2d.b2CollideEdgeAndCircle.s_id).cf.indexB=0,i.cf.typeB=box2d.b2ContactFeatureType.e_vertex,0>=s){var x=b;a=box2d.b2Sub_V2_V2(e,x,box2d.b2CollideEdgeAndCircle.s_d);if(!((a=box2d.b2Dot_V2_V2(a,a))>d*d)){if(t.m_hasVertex0&&(t=box2d.b2Sub_V2_V2(b,t.m_vertex0,box2d.b2CollideEdgeAndCircle.s_e1),0<box2d.b2Dot_V2_V2(t,box2d.b2Sub_V2_V2(b,e,box2d.b2Vec2.s_t0))))return;i.cf.indexA=0,i.cf.typeA=box2d.b2ContactFeatureType.e_vertex,o.pointCount=1,o.type=box2d.b2ManifoldType.e_circles,o.localNormal.SetZero(),o.localPoint.Copy(x),o.points[0].id.Copy(i),o.points[0].localPoint.Copy(r.m_p)}}else if(0>=a){if(x=p,a=box2d.b2Sub_V2_V2(e,x,box2d.b2CollideEdgeAndCircle.s_d),!((a=box2d.b2Dot_V2_V2(a,a))>d*d)){if(t.m_hasVertex3&&(b=box2d.b2Sub_V2_V2(t.m_vertex3,p,box2d.b2CollideEdgeAndCircle.s_e2),0<box2d.b2Dot_V2_V2(b,box2d.b2Sub_V2_V2(e,p,box2d.b2Vec2.s_t0))))return;i.cf.indexA=1,i.cf.typeA=box2d.b2ContactFeatureType.e_vertex,o.pointCount=1,o.type=box2d.b2ManifoldType.e_circles,o.localNormal.SetZero(),o.localPoint.Copy(x),o.points[0].id.Copy(i),o.points[0].localPoint.Copy(r.m_p)}}else t=box2d.b2Dot_V2_V2(n,n),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<t),(x=box2d.b2CollideEdgeAndCircle.s_P).x=1/t*(a*b.x+s*p.x),x.y=1/t*(a*b.y+s*p.y),a=box2d.b2Sub_V2_V2(e,x,box2d.b2CollideEdgeAndCircle.s_d),(a=box2d.b2Dot_V2_V2(a,a))>d*d||(x=box2d.b2CollideEdgeAndCircle.s_n.Set(-n.y,n.x),0>box2d.b2Dot_V2_V2(x,box2d.b2Sub_V2_V2(e,b,box2d.b2Vec2.s_t0))&&x.Set(-x.x,-x.y),x.Normalize(),i.cf.indexA=0,i.cf.typeA=box2d.b2ContactFeatureType.e_face,o.pointCount=1,o.type=box2d.b2ManifoldType.e_faceA,o.localNormal.Copy(x),o.localPoint.Copy(b),o.points[0].id.Copy(i),o.points[0].localPoint.Copy(r.m_p))},goog.exportSymbol("box2d.b2CollideEdgeAndCircle",box2d.b2CollideEdgeAndCircle),box2d.b2CollideEdgeAndCircle.s_Q=new box2d.b2Vec2,box2d.b2CollideEdgeAndCircle.s_e=new box2d.b2Vec2,box2d.b2CollideEdgeAndCircle.s_d=new box2d.b2Vec2,box2d.b2CollideEdgeAndCircle.s_e1=new box2d.b2Vec2,box2d.b2CollideEdgeAndCircle.s_e2=new box2d.b2Vec2,box2d.b2CollideEdgeAndCircle.s_P=new box2d.b2Vec2,box2d.b2CollideEdgeAndCircle.s_n=new box2d.b2Vec2,box2d.b2CollideEdgeAndCircle.s_id=new box2d.b2ContactID,box2d.b2EPAxisType={e_unknown:0,e_edgeA:1,e_edgeB:2},goog.exportSymbol("box2d.b2EPAxisType",box2d.b2EPAxisType),goog.exportProperty(box2d.b2EPAxisType,"e_unknown",box2d.b2EPAxisType.e_unknown),goog.exportProperty(box2d.b2EPAxisType,"e_edgeA",box2d.b2EPAxisType.e_edgeA),goog.exportProperty(box2d.b2EPAxisType,"e_edgeB",box2d.b2EPAxisType.e_edgeB),box2d.b2EPAxis=function(){},goog.exportSymbol("box2d.b2EPAxis",box2d.b2EPAxis),box2d.b2EPAxis.prototype.type=box2d.b2EPAxisType.e_unknown,goog.exportProperty(box2d.b2EPAxis.prototype,"type",box2d.b2EPAxis.prototype.type),box2d.b2EPAxis.prototype.index=0,goog.exportProperty(box2d.b2EPAxis.prototype,"index",box2d.b2EPAxis.prototype.index),box2d.b2EPAxis.prototype.separation=0,goog.exportProperty(box2d.b2EPAxis.prototype,"separation",box2d.b2EPAxis.prototype.separation),box2d.b2TempPolygon=function(){this.vertices=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices),this.normals=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices),this.count=0},goog.exportSymbol("box2d.b2TempPolygon",box2d.b2TempPolygon),box2d.b2TempPolygon.prototype.vertices=null,goog.exportProperty(box2d.b2TempPolygon.prototype,"vertices",box2d.b2TempPolygon.prototype.vertices),box2d.b2TempPolygon.prototype.normals=null,goog.exportProperty(box2d.b2TempPolygon.prototype,"normals",box2d.b2TempPolygon.prototype.normals),box2d.b2TempPolygon.prototype.count=0,goog.exportProperty(box2d.b2TempPolygon.prototype,"count",box2d.b2TempPolygon.prototype.count),box2d.b2ReferenceFace=function(){this.i2=this.i1=0,this.v1=new box2d.b2Vec2,this.v2=new box2d.b2Vec2,this.normal=new box2d.b2Vec2,this.sideNormal1=new box2d.b2Vec2,this.sideOffset1=0,this.sideNormal2=new box2d.b2Vec2,this.sideOffset2=0},goog.exportSymbol("box2d.b2ReferenceFace",box2d.b2ReferenceFace),box2d.b2ReferenceFace.prototype.i1=0,goog.exportProperty(box2d.b2ReferenceFace.prototype,"i1",box2d.b2ReferenceFace.prototype.i1),box2d.b2ReferenceFace.prototype.i2=0,goog.exportProperty(box2d.b2ReferenceFace.prototype,"i2",box2d.b2ReferenceFace.prototype.i2),box2d.b2ReferenceFace.prototype.v1=null,goog.exportProperty(box2d.b2ReferenceFace.prototype,"v1",box2d.b2ReferenceFace.prototype.v1),box2d.b2ReferenceFace.prototype.v2=null,goog.exportProperty(box2d.b2ReferenceFace.prototype,"v2",box2d.b2ReferenceFace.prototype.v2),box2d.b2ReferenceFace.prototype.normal=null,goog.exportProperty(box2d.b2ReferenceFace.prototype,"normal",box2d.b2ReferenceFace.prototype.normal),box2d.b2ReferenceFace.prototype.sideNormal1=null,goog.exportProperty(box2d.b2ReferenceFace.prototype,"sideNormal1",box2d.b2ReferenceFace.prototype.sideNormal1),box2d.b2ReferenceFace.prototype.sideOffset1=0,goog.exportProperty(box2d.b2ReferenceFace.prototype,"sideOffset1",box2d.b2ReferenceFace.prototype.sideOffset1),box2d.b2ReferenceFace.prototype.sideNormal2=null,goog.exportProperty(box2d.b2ReferenceFace.prototype,"sideNormal2",box2d.b2ReferenceFace.prototype.sideNormal2),box2d.b2ReferenceFace.prototype.sideOffset2=0,goog.exportProperty(box2d.b2ReferenceFace.prototype,"sideOffset2",box2d.b2ReferenceFace.prototype.sideOffset2),box2d.b2EPColliderVertexType={e_isolated:0,e_concave:1,e_convex:2},goog.exportSymbol("box2d.b2EPColliderVertexType",box2d.b2EPColliderVertexType),goog.exportProperty(box2d.b2EPColliderVertexType,"e_isolated",box2d.b2EPColliderVertexType.e_isolated),goog.exportProperty(box2d.b2EPColliderVertexType,"e_concave",box2d.b2EPColliderVertexType.e_concave),goog.exportProperty(box2d.b2EPColliderVertexType,"e_convex",box2d.b2EPColliderVertexType.e_convex),box2d.b2EPCollider=function(){this.m_polygonB=new box2d.b2TempPolygon,this.m_xf=new box2d.b2Transform,this.m_centroidB=new box2d.b2Vec2,this.m_v0=new box2d.b2Vec2,this.m_v1=new box2d.b2Vec2,this.m_v2=new box2d.b2Vec2,this.m_v3=new box2d.b2Vec2,this.m_normal0=new box2d.b2Vec2,this.m_normal1=new box2d.b2Vec2,this.m_normal2=new box2d.b2Vec2,this.m_normal=new box2d.b2Vec2,this.m_type2=this.m_type1=box2d.b2EPColliderVertexType.e_isolated,this.m_lowerLimit=new box2d.b2Vec2,this.m_upperLimit=new box2d.b2Vec2,this.m_radius=0,this.m_front=!1},goog.exportSymbol("box2d.b2EPCollider",box2d.b2EPCollider),box2d.b2EPCollider.prototype.m_polygonB=null,goog.exportProperty(box2d.b2EPCollider.prototype,"m_polygonB",box2d.b2EPCollider.prototype.m_polygonB),box2d.b2EPCollider.prototype.m_xf=null,goog.exportProperty(box2d.b2EPCollider.prototype,"m_xf",box2d.b2EPCollider.prototype.m_xf),box2d.b2EPCollider.prototype.m_centroidB=null,goog.exportProperty(box2d.b2EPCollider.prototype,"m_centroidB",box2d.b2EPCollider.prototype.m_centroidB),box2d.b2EPCollider.prototype.m_v0=null,goog.exportProperty(box2d.b2EPCollider.prototype,"m_v0",box2d.b2EPCollider.prototype.m_v0),box2d.b2EPCollider.prototype.m_v1=null,goog.exportProperty(box2d.b2EPCollider.prototype,"m_v1",box2d.b2EPCollider.prototype.m_v1),box2d.b2EPCollider.prototype.m_v2=null,goog.exportProperty(box2d.b2EPCollider.prototype,"m_v2",box2d.b2EPCollider.prototype.m_v2),box2d.b2EPCollider.prototype.m_v3=null,goog.exportProperty(box2d.b2EPCollider.prototype,"m_v3",box2d.b2EPCollider.prototype.m_v3),box2d.b2EPCollider.prototype.m_normal0=null,goog.exportProperty(box2d.b2EPCollider.prototype,"m_normal0",box2d.b2EPCollider.prototype.m_normal0),box2d.b2EPCollider.prototype.m_normal1=null,goog.exportProperty(box2d.b2EPCollider.prototype,"m_normal1",box2d.b2EPCollider.prototype.m_normal1),box2d.b2EPCollider.prototype.m_normal2=null,goog.exportProperty(box2d.b2EPCollider.prototype,"m_normal2",box2d.b2EPCollider.prototype.m_normal2),box2d.b2EPCollider.prototype.m_normal=null,goog.exportProperty(box2d.b2EPCollider.prototype,"m_normal",box2d.b2EPCollider.prototype.m_normal),box2d.b2EPCollider.prototype.m_type1=box2d.b2EPColliderVertexType.e_isolated,goog.exportProperty(box2d.b2EPCollider.prototype,"m_type1",box2d.b2EPCollider.prototype.m_type1),box2d.b2EPCollider.prototype.m_type2=box2d.b2EPColliderVertexType.e_isolated,goog.exportProperty(box2d.b2EPCollider.prototype,"m_type2",box2d.b2EPCollider.prototype.m_type2),box2d.b2EPCollider.prototype.m_lowerLimit=null,goog.exportProperty(box2d.b2EPCollider.prototype,"m_lowerLimit",box2d.b2EPCollider.prototype.m_lowerLimit),box2d.b2EPCollider.prototype.m_upperLimit=null,goog.exportProperty(box2d.b2EPCollider.prototype,"m_upperLimit",box2d.b2EPCollider.prototype.m_upperLimit),box2d.b2EPCollider.prototype.m_radius=0,goog.exportProperty(box2d.b2EPCollider.prototype,"m_radius",box2d.b2EPCollider.prototype.m_radius),box2d.b2EPCollider.prototype.m_front=!1,goog.exportProperty(box2d.b2EPCollider.prototype,"m_front",box2d.b2EPCollider.prototype.m_front),box2d.b2EPCollider.prototype.Collide=function(o,t,e,r,i){box2d.b2MulT_X_X(e,i,this.m_xf),box2d.b2Mul_X_V2(this.m_xf,r.m_centroid,this.m_centroidB),this.m_v0.Copy(t.m_vertex0),this.m_v1.Copy(t.m_vertex1),this.m_v2.Copy(t.m_vertex2),this.m_v3.Copy(t.m_vertex3),e=t.m_hasVertex0,t=t.m_hasVertex3,(i=box2d.b2Sub_V2_V2(this.m_v2,this.m_v1,box2d.b2EPCollider.s_edge1)).Normalize(),this.m_normal1.Set(i.y,-i.x);var b=box2d.b2Dot_V2_V2(this.m_normal1,box2d.b2Sub_V2_V2(this.m_centroidB,this.m_v1,box2d.b2Vec2.s_t0)),p=0,n=0,a=!1,s=!1;for(e&&((p=box2d.b2Sub_V2_V2(this.m_v1,this.m_v0,box2d.b2EPCollider.s_edge0)).Normalize(),this.m_normal0.Set(p.y,-p.x),a=0<=box2d.b2Cross_V2_V2(p,i),p=box2d.b2Dot_V2_V2(this.m_normal0,box2d.b2Sub_V2_V2(this.m_centroidB,this.m_v0,box2d.b2Vec2.s_t0))),t&&((n=box2d.b2Sub_V2_V2(this.m_v3,this.m_v2,box2d.b2EPCollider.s_edge2)).Normalize(),this.m_normal2.Set(n.y,-n.x),s=0<box2d.b2Cross_V2_V2(i,n),n=box2d.b2Dot_V2_V2(this.m_normal2,box2d.b2Sub_V2_V2(this.m_centroidB,this.m_v2,box2d.b2Vec2.s_t0))),e&&t?a&&s?(this.m_front=0<=p||0<=b||0<=n)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):a?(this.m_front=0<=p||0<=b&&0<=n)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):s?(this.m_front=0<=n||0<=p&&0<=b)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg()):(this.m_front=0<=p&&0<=b&&0<=n)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg()):e?a?((this.m_front=0<=p||0<=b)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1)),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_front=0<=p&&0<=b)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal0).SelfNeg()):t?s?(this.m_front=0<=b||0<=n)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1)):((this.m_front=0<=b&&0<=n)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg()),this.m_upperLimit.Copy(this.m_normal1)):(this.m_front=0<=b)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1)),this.m_polygonB.count=r.m_count,b=0,p=r.m_count;b<p;++b)box2d.b2Mul_X_V2(this.m_xf,r.m_vertices[b],this.m_polygonB.vertices[b]),box2d.b2Mul_R_V2(this.m_xf.q,r.m_normals[b],this.m_polygonB.normals[b]);if(this.m_radius=2*box2d.b2_polygonRadius,o.pointCount=0,!((e=this.ComputeEdgeSeparation(box2d.b2EPCollider.s_edgeAxis)).type===box2d.b2EPAxisType.e_unknown||e.separation>this.m_radius||(t=this.ComputePolygonSeparation(box2d.b2EPCollider.s_polygonAxis),t.type!==box2d.b2EPAxisType.e_unknown&&t.separation>this.m_radius))){if(e=t.type===box2d.b2EPAxisType.e_unknown?e:t.separation>.98*e.separation+.001?t:e,i=box2d.b2EPCollider.s_ie,t=box2d.b2EPCollider.s_rf,e.type===box2d.b2EPAxisType.e_edgeA){for(o.type=box2d.b2ManifoldType.e_faceA,n=0,a=box2d.b2Dot_V2_V2(this.m_normal,this.m_polygonB.normals[0]),b=1,p=this.m_polygonB.count;b<p;++b)(s=box2d.b2Dot_V2_V2(this.m_normal,this.m_polygonB.normals[b]))<a&&(a=s,n=b);b=((p=n)+1)%this.m_polygonB.count,(n=i[0]).v.Copy(this.m_polygonB.vertices[p]),n.id.cf.indexA=0,n.id.cf.indexB=p,n.id.cf.typeA=box2d.b2ContactFeatureType.e_face,n.id.cf.typeB=box2d.b2ContactFeatureType.e_vertex,(p=i[1]).v.Copy(this.m_polygonB.vertices[b]),p.id.cf.indexA=0,p.id.cf.indexB=b,p.id.cf.typeA=box2d.b2ContactFeatureType.e_face,p.id.cf.typeB=box2d.b2ContactFeatureType.e_vertex,this.m_front?(t.i1=0,t.i2=1,t.v1.Copy(this.m_v1),t.v2.Copy(this.m_v2),t.normal.Copy(this.m_normal1)):(t.i1=1,t.i2=0,t.v1.Copy(this.m_v2),t.v2.Copy(this.m_v1),t.normal.Copy(this.m_normal1).SelfNeg())}else o.type=box2d.b2ManifoldType.e_faceB,(n=i[0]).v.Copy(this.m_v1),n.id.cf.indexA=0,n.id.cf.indexB=e.index,n.id.cf.typeA=box2d.b2ContactFeatureType.e_vertex,n.id.cf.typeB=box2d.b2ContactFeatureType.e_face,(p=i[1]).v.Copy(this.m_v2),p.id.cf.indexA=0,p.id.cf.indexB=e.index,p.id.cf.typeA=box2d.b2ContactFeatureType.e_vertex,p.id.cf.typeB=box2d.b2ContactFeatureType.e_face,t.i1=e.index,t.i2=(t.i1+1)%this.m_polygonB.count,t.v1.Copy(this.m_polygonB.vertices[t.i1]),t.v2.Copy(this.m_polygonB.vertices[t.i2]),t.normal.Copy(this.m_polygonB.normals[t.i1]);if(t.sideNormal1.Set(t.normal.y,-t.normal.x),t.sideNormal2.Copy(t.sideNormal1).SelfNeg(),t.sideOffset1=box2d.b2Dot_V2_V2(t.sideNormal1,t.v1),t.sideOffset2=box2d.b2Dot_V2_V2(t.sideNormal2,t.v2),b=box2d.b2EPCollider.s_clipPoints1,n=box2d.b2EPCollider.s_clipPoints2,p=0,!((p=box2d.b2ClipSegmentToLine(b,i,t.sideNormal1,t.sideOffset1,t.i1))<box2d.b2_maxManifoldPoints||(p=box2d.b2ClipSegmentToLine(n,b,t.sideNormal2,t.sideOffset2,t.i2),p<box2d.b2_maxManifoldPoints))){for(e.type===box2d.b2EPAxisType.e_edgeA?(o.localNormal.Copy(t.normal),o.localPoint.Copy(t.v1)):(o.localNormal.Copy(r.m_normals[t.i1]),o.localPoint.Copy(r.m_vertices[t.i1])),b=r=0,p=box2d.b2_maxManifoldPoints;b<p;++b)box2d.b2Dot_V2_V2(t.normal,box2d.b2Sub_V2_V2(n[b].v,t.v1,box2d.b2Vec2.s_t0))<=this.m_radius&&(i=o.points[r],e.type===box2d.b2EPAxisType.e_edgeA?(box2d.b2MulT_X_V2(this.m_xf,n[b].v,i.localPoint),i.id=n[b].id):(i.localPoint.Copy(n[b].v),i.id.cf.typeA=n[b].id.cf.typeB,i.id.cf.typeB=n[b].id.cf.typeA,i.id.cf.indexA=n[b].id.cf.indexB,i.id.cf.indexB=n[b].id.cf.indexA),++r);o.pointCount=r}}},goog.exportProperty(box2d.b2EPCollider.prototype,"Collide",box2d.b2EPCollider.prototype.Collide),box2d.b2EPCollider.s_edge1=new box2d.b2Vec2,box2d.b2EPCollider.s_edge0=new box2d.b2Vec2,box2d.b2EPCollider.s_edge2=new box2d.b2Vec2,box2d.b2EPCollider.s_ie=box2d.b2ClipVertex.MakeArray(2),box2d.b2EPCollider.s_rf=new box2d.b2ReferenceFace,box2d.b2EPCollider.s_clipPoints1=box2d.b2ClipVertex.MakeArray(2),box2d.b2EPCollider.s_clipPoints2=box2d.b2ClipVertex.MakeArray(2),box2d.b2EPCollider.s_edgeAxis=new box2d.b2EPAxis,box2d.b2EPCollider.s_polygonAxis=new box2d.b2EPAxis,box2d.b2EPCollider.prototype.ComputeEdgeSeparation=function(o){o.type=box2d.b2EPAxisType.e_edgeA,o.index=this.m_front?0:1,o.separation=box2d.b2_maxFloat;for(var t=0,e=this.m_polygonB.count;t<e;++t){var r=box2d.b2Dot_V2_V2(this.m_normal,box2d.b2Sub_V2_V2(this.m_polygonB.vertices[t],this.m_v1,box2d.b2Vec2.s_t0));r<o.separation&&(o.separation=r)}return o},goog.exportProperty(box2d.b2EPCollider.prototype,"ComputeEdgeSeparation",box2d.b2EPCollider.prototype.ComputeEdgeSeparation),box2d.b2EPCollider.prototype.ComputePolygonSeparation=function(o){o.type=box2d.b2EPAxisType.e_unknown,o.index=-1,o.separation=-box2d.b2_maxFloat;for(var t=box2d.b2EPCollider.s_perp.Set(-this.m_normal.y,this.m_normal.x),e=0,r=this.m_polygonB.count;e<r;++e){var i=box2d.b2EPCollider.s_n.Copy(this.m_polygonB.normals[e]).SelfNeg(),b=box2d.b2Dot_V2_V2(i,box2d.b2Sub_V2_V2(this.m_polygonB.vertices[e],this.m_v1,box2d.b2Vec2.s_t0)),p=box2d.b2Dot_V2_V2(i,box2d.b2Sub_V2_V2(this.m_polygonB.vertices[e],this.m_v2,box2d.b2Vec2.s_t0));if((b=box2d.b2Min(b,p))>this.m_radius){o.type=box2d.b2EPAxisType.e_edgeB,o.index=e,o.separation=b;break}if(0<=box2d.b2Dot_V2_V2(i,t)){if(box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(i,this.m_upperLimit,box2d.b2Vec2.s_t0),this.m_normal)<-box2d.b2_angularSlop)continue}else if(box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(i,this.m_lowerLimit,box2d.b2Vec2.s_t0),this.m_normal)<-box2d.b2_angularSlop)continue;b>o.separation&&(o.type=box2d.b2EPAxisType.e_edgeB,o.index=e,o.separation=b)}return o},goog.exportProperty(box2d.b2EPCollider.prototype,"ComputePolygonSeparation",box2d.b2EPCollider.prototype.ComputePolygonSeparation),box2d.b2EPCollider.s_n=new box2d.b2Vec2,box2d.b2EPCollider.s_perp=new box2d.b2Vec2,box2d.b2CollideEdgeAndPolygon=function(o,t,e,r,i){box2d.b2CollideEdgeAndPolygon.s_collider.Collide(o,t,e,r,i)},goog.exportSymbol("box2d.b2CollideEdgeAndPolygon",box2d.b2CollideEdgeAndPolygon),box2d.b2CollideEdgeAndPolygon.s_collider=new box2d.b2EPCollider,box2d.b2CollidePolygon={},box2d.b2FindMaxSeparation=function(o,t,e,r,i){var b=t.m_count,p=r.m_count,n=t.m_normals;t=t.m_vertices,r=r.m_vertices,e=box2d.b2MulT_X_X(i,e,box2d.b2FindMaxSeparation.s_xf),i=0;for(var a=-box2d.b2_maxFloat,s=0;s<b;++s){for(var d=box2d.b2Mul_R_V2(e.q,n[s],box2d.b2FindMaxSeparation.s_n),x=box2d.b2Mul_X_V2(e,t[s],box2d.b2FindMaxSeparation.s_v1),l=box2d.b2_maxFloat,y=0;y<p;++y){var c=box2d.b2Dot_V2_V2(d,box2d.b2Sub_V2_V2(r[y],x,box2d.b2Vec2.s_t0));c<l&&(l=c)}l>a&&(a=l,i=s)}return o[0]=i,a},goog.exportSymbol("box2d.b2FindMaxSeparation",box2d.b2FindMaxSeparation),box2d.b2FindMaxSeparation.s_xf=new box2d.b2Transform,box2d.b2FindMaxSeparation.s_n=new box2d.b2Vec2,box2d.b2FindMaxSeparation.s_v1=new box2d.b2Vec2,box2d.b2FindIncidentEdge=function(o,t,e,r,i,b){var p=t.m_count,n=t.m_normals,a=i.m_count;t=i.m_vertices,i=i.m_normals,box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=r&&r<p),e=box2d.b2MulT_R_V2(b.q,box2d.b2Mul_R_V2(e.q,n[r],box2d.b2Vec2.s_t0),box2d.b2FindIncidentEdge.s_normal1);p=0,n=box2d.b2_maxFloat;for(var s=0;s<a;++s){var d=box2d.b2Dot_V2_V2(e,i[s]);d<n&&(n=d,p=s)}a=((i=p)+1)%a,e=o[0],box2d.b2Mul_X_V2(b,t[i],e.v),(e=e.id.cf).indexA=r,e.indexB=i,e.typeA=box2d.b2ContactFeatureType.e_face,e.typeB=box2d.b2ContactFeatureType.e_vertex,o=o[1],box2d.b2Mul_X_V2(b,t[a],o.v),(b=o.id.cf).indexA=r,b.indexB=a,b.typeA=box2d.b2ContactFeatureType.e_face,b.typeB=box2d.b2ContactFeatureType.e_vertex},goog.exportSymbol("box2d.b2FindIncidentEdge",box2d.b2FindIncidentEdge),box2d.b2FindIncidentEdge.s_normal1=new box2d.b2Vec2,box2d.b2CollidePolygons=function(o,t,e,r,i){o.pointCount=0;var b=t.m_radius+r.m_radius;if(((c=box2d.b2CollidePolygons.s_edgeA)[0]=0,!((s=box2d.b2FindMaxSeparation(c,t,e,r,i))>b))&&((a=box2d.b2CollidePolygons.s_edgeB)[0]=0,!((l=box2d.b2FindMaxSeparation(a,r,i,t,e))>b))){var p=0,n=0;l>.98*s+.001?(s=r,r=t,t=i,p=a[0],o.type=box2d.b2ManifoldType.e_faceB,n=1):(s=t,t=e,e=i,p=c[0],o.type=box2d.b2ManifoldType.e_faceA,n=0),c=box2d.b2CollidePolygons.s_incidentEdge,box2d.b2FindIncidentEdge(c,s,t,p,r,e),i=s.m_vertices;var a=p,s=(p+1)%s.m_count,d=i[a],x=i[s];(p=box2d.b2Sub_V2_V2(x,d,box2d.b2CollidePolygons.s_localTangent)).Normalize(),i=box2d.b2Cross_V2_S(p,1,box2d.b2CollidePolygons.s_localNormal),r=box2d.b2Mid_V2_V2(d,x,box2d.b2CollidePolygons.s_planePoint);var l=box2d.b2Mul_R_V2(t.q,p,box2d.b2CollidePolygons.s_tangent),y=(p=box2d.b2Cross_V2_S(l,1,box2d.b2CollidePolygons.s_normal),d=box2d.b2Mul_X_V2(t,d,box2d.b2CollidePolygons.s_v11),box2d.b2Mul_X_V2(t,x,box2d.b2CollidePolygons.s_v12));t=box2d.b2Dot_V2_V2(p,d);x=-box2d.b2Dot_V2_V2(l,d)+b,y=box2d.b2Dot_V2_V2(l,y)+b;var c,m=box2d.b2CollidePolygons.s_clipPoints1,_=(d=box2d.b2CollidePolygons.s_clipPoints2,box2d.b2CollidePolygons.s_ntangent.Copy(l).SelfNeg());if(!(2>(c=box2d.b2ClipSegmentToLine(m,c,_,x,a))||(c=box2d.b2ClipSegmentToLine(d,m,l,y,s),2>c))){for(o.localNormal.Copy(i),o.localPoint.Copy(r),a=c=0;a<box2d.b2_maxManifoldPoints;++a)i=d[a],box2d.b2Dot_V2_V2(p,i.v)-t<=b&&(s=o.points[c],box2d.b2MulT_X_V2(e,i.v,s.localPoint),s.id.Copy(i.id),n&&(i=s.id.cf,s.id.cf.indexA=i.indexB,s.id.cf.indexB=i.indexA,s.id.cf.typeA=i.typeB,s.id.cf.typeB=i.typeA),++c);o.pointCount=c}}},goog.exportSymbol("box2d.b2CollidePolygons",box2d.b2CollidePolygons),box2d.b2CollidePolygons.s_incidentEdge=box2d.b2ClipVertex.MakeArray(2),box2d.b2CollidePolygons.s_clipPoints1=box2d.b2ClipVertex.MakeArray(2),box2d.b2CollidePolygons.s_clipPoints2=box2d.b2ClipVertex.MakeArray(2),box2d.b2CollidePolygons.s_edgeA=box2d.b2MakeNumberArray(1),box2d.b2CollidePolygons.s_edgeB=box2d.b2MakeNumberArray(1),box2d.b2CollidePolygons.s_localTangent=new box2d.b2Vec2,box2d.b2CollidePolygons.s_localNormal=new box2d.b2Vec2,box2d.b2CollidePolygons.s_planePoint=new box2d.b2Vec2,box2d.b2CollidePolygons.s_normal=new box2d.b2Vec2,box2d.b2CollidePolygons.s_tangent=new box2d.b2Vec2,box2d.b2CollidePolygons.s_ntangent=new box2d.b2Vec2,box2d.b2CollidePolygons.s_v11=new box2d.b2Vec2,box2d.b2CollidePolygons.s_v12=new box2d.b2Vec2,box2d.b2TreeNode=function(o){this.m_id=o||0,this.aabb=new box2d.b2AABB},goog.exportSymbol("box2d.b2TreeNode",box2d.b2TreeNode),box2d.b2TreeNode.prototype.m_id=0,goog.exportProperty(box2d.b2TreeNode.prototype,"m_id",box2d.b2TreeNode.prototype.m_id),box2d.b2TreeNode.prototype.aabb=null,goog.exportProperty(box2d.b2TreeNode.prototype,"aabb",box2d.b2TreeNode.prototype.aabb),box2d.b2TreeNode.prototype.userData=null,goog.exportProperty(box2d.b2TreeNode.prototype,"userData",box2d.b2TreeNode.prototype.userData),box2d.b2TreeNode.prototype.parent=null,goog.exportProperty(box2d.b2TreeNode.prototype,"parent",box2d.b2TreeNode.prototype.parent),box2d.b2TreeNode.prototype.child1=null,goog.exportProperty(box2d.b2TreeNode.prototype,"child1",box2d.b2TreeNode.prototype.child1),box2d.b2TreeNode.prototype.child2=null,goog.exportProperty(box2d.b2TreeNode.prototype,"child2",box2d.b2TreeNode.prototype.child2),box2d.b2TreeNode.prototype.height=0,goog.exportProperty(box2d.b2TreeNode.prototype,"height",box2d.b2TreeNode.prototype.height),box2d.b2TreeNode.prototype.IsLeaf=function(){return null===this.child1},goog.exportProperty(box2d.b2TreeNode.prototype,"IsLeaf",box2d.b2TreeNode.prototype.IsLeaf),box2d.b2DynamicTree=function(){},goog.exportSymbol("box2d.b2DynamicTree",box2d.b2DynamicTree),box2d.b2DynamicTree.prototype.m_root=null,goog.exportProperty(box2d.b2DynamicTree.prototype,"m_root",box2d.b2DynamicTree.prototype.m_root),box2d.b2DynamicTree.prototype.m_freeList=null,goog.exportProperty(box2d.b2DynamicTree.prototype,"m_freeList",box2d.b2DynamicTree.prototype.m_freeList),box2d.b2DynamicTree.prototype.m_path=0,goog.exportProperty(box2d.b2DynamicTree.prototype,"m_path",box2d.b2DynamicTree.prototype.m_path),box2d.b2DynamicTree.prototype.m_insertionCount=0,goog.exportProperty(box2d.b2DynamicTree.prototype,"m_insertionCount",box2d.b2DynamicTree.prototype.m_insertionCount),box2d.b2DynamicTree.s_stack=new box2d.b2GrowableStack(256),box2d.b2DynamicTree.s_r=new box2d.b2Vec2,box2d.b2DynamicTree.s_v=new box2d.b2Vec2,box2d.b2DynamicTree.s_abs_v=new box2d.b2Vec2,box2d.b2DynamicTree.s_segmentAABB=new box2d.b2AABB,box2d.b2DynamicTree.s_subInput=new box2d.b2RayCastInput,box2d.b2DynamicTree.s_combinedAABB=new box2d.b2AABB,box2d.b2DynamicTree.s_aabb=new box2d.b2AABB,box2d.b2DynamicTree.prototype.GetUserData=function(o){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==o),o.userData},goog.exportProperty(box2d.b2DynamicTree.prototype,"GetUserData",box2d.b2DynamicTree.prototype.GetUserData),box2d.b2DynamicTree.prototype.GetFatAABB=function(o){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==o),o.aabb},goog.exportProperty(box2d.b2DynamicTree.prototype,"GetFatAABB",box2d.b2DynamicTree.prototype.GetFatAABB),box2d.b2DynamicTree.prototype.Query=function(o,t){if(null!==this.m_root){var e=box2d.b2DynamicTree.s_stack.Reset();for(e.Push(this.m_root);0<e.GetCount();){var r=e.Pop();if(null!==r&&r.aabb.TestOverlap(t))if(r.IsLeaf()){if(!o(r))break}else e.Push(r.child1),e.Push(r.child2)}}},goog.exportProperty(box2d.b2DynamicTree.prototype,"Query",box2d.b2DynamicTree.prototype.Query),box2d.b2DynamicTree.prototype.RayCast=function(o,t){if(null!==this.m_root){var e=t.p1,r=t.p2,i=box2d.b2Sub_V2_V2(r,e,box2d.b2DynamicTree.s_r);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<i.LengthSquared()),i.Normalize();i=box2d.b2Cross_S_V2(1,i,box2d.b2DynamicTree.s_v);var b=box2d.b2Abs_V2(i,box2d.b2DynamicTree.s_abs_v),p=t.maxFraction,n=box2d.b2DynamicTree.s_segmentAABB,a=e.x+p*(r.x-e.x),s=e.y+p*(r.y-e.y);n.lowerBound.x=box2d.b2Min(e.x,a),n.lowerBound.y=box2d.b2Min(e.y,s),n.upperBound.x=box2d.b2Max(e.x,a),n.upperBound.y=box2d.b2Max(e.y,s);var d=box2d.b2DynamicTree.s_stack.Reset();for(d.Push(this.m_root);0<d.GetCount();)if(null!==(a=d.Pop())&&box2d.b2TestOverlapAABB(a.aabb,n)){s=a.aabb.GetCenter();var x=a.aabb.GetExtents();if(!(0<box2d.b2Abs(box2d.b2Dot_V2_V2(i,box2d.b2Sub_V2_V2(e,s,box2d.b2Vec2.s_t0)))-box2d.b2Dot_V2_V2(b,x)))if(a.IsLeaf()){if((s=box2d.b2DynamicTree.s_subInput).p1.Copy(t.p1),s.p2.Copy(t.p2),s.maxFraction=p,0===(a=o(s,a)))break;0<a&&(p=a,a=e.x+p*(r.x-e.x),s=e.y+p*(r.y-e.y),n.lowerBound.x=box2d.b2Min(e.x,a),n.lowerBound.y=box2d.b2Min(e.y,s),n.upperBound.x=box2d.b2Max(e.x,a),n.upperBound.y=box2d.b2Max(e.y,s))}else d.Push(a.child1),d.Push(a.child2)}}},goog.exportProperty(box2d.b2DynamicTree.prototype,"RayCast",box2d.b2DynamicTree.prototype.RayCast),box2d.b2DynamicTree.prototype.AllocateNode=function(){if(this.m_freeList){var o=this.m_freeList;return this.m_freeList=o.parent,o.parent=null,o.child1=null,o.child2=null,o.height=0,o.userData=null,o}return new box2d.b2TreeNode(box2d.b2DynamicTree.prototype.s_node_id++)},goog.exportProperty(box2d.b2DynamicTree.prototype,"AllocateNode",box2d.b2DynamicTree.prototype.AllocateNode),box2d.b2DynamicTree.prototype.s_node_id=0,box2d.b2DynamicTree.prototype.FreeNode=function(o){o.parent=this.m_freeList,o.height=-1,this.m_freeList=o},goog.exportProperty(box2d.b2DynamicTree.prototype,"FreeNode",box2d.b2DynamicTree.prototype.FreeNode),box2d.b2DynamicTree.prototype.CreateProxy=function(o,t){var e=this.AllocateNode(),r=box2d.b2_aabbExtension,i=box2d.b2_aabbExtension;return e.aabb.lowerBound.x=o.lowerBound.x-r,e.aabb.lowerBound.y=o.lowerBound.y-i,e.aabb.upperBound.x=o.upperBound.x+r,e.aabb.upperBound.y=o.upperBound.y+i,e.userData=t,e.height=0,this.InsertLeaf(e),e},goog.exportProperty(box2d.b2DynamicTree.prototype,"CreateProxy",box2d.b2DynamicTree.prototype.CreateProxy),box2d.b2DynamicTree.prototype.DestroyProxy=function(o){box2d.ENABLE_ASSERTS&&box2d.b2Assert(o.IsLeaf()),this.RemoveLeaf(o),this.FreeNode(o)},goog.exportProperty(box2d.b2DynamicTree.prototype,"DestroyProxy",box2d.b2DynamicTree.prototype.DestroyProxy),box2d.b2DynamicTree.prototype.MoveProxy=function(o,t,e){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(o.IsLeaf()),o.aabb.Contains(t))return!1;this.RemoveLeaf(o);var r=box2d.b2_aabbExtension+box2d.b2_aabbMultiplier*(0<e.x?e.x:-e.x);return e=box2d.b2_aabbExtension+box2d.b2_aabbMultiplier*(0<e.y?e.y:-e.y),o.aabb.lowerBound.x=t.lowerBound.x-r,o.aabb.lowerBound.y=t.lowerBound.y-e,o.aabb.upperBound.x=t.upperBound.x+r,o.aabb.upperBound.y=t.upperBound.y+e,this.InsertLeaf(o),!0},goog.exportProperty(box2d.b2DynamicTree.prototype,"MoveProxy",box2d.b2DynamicTree.prototype.MoveProxy),box2d.b2DynamicTree.prototype.InsertLeaf=function(o){if(++this.m_insertionCount,null===this.m_root)this.m_root=o,this.m_root.parent=null;else{var t=o.aabb;t.GetCenter();for(var e,r,i=this.m_root;!i.IsLeaf();){e=i.child1,r=i.child2;var b=i.aabb.GetPerimeter();(n=box2d.b2DynamicTree.s_combinedAABB).Combine2(i.aabb,t);var p,n=2*(a=n.GetPerimeter()),a=2*(a-b),s=box2d.b2DynamicTree.s_aabb;if(e.IsLeaf()?(s.Combine2(t,e.aabb),b=s.GetPerimeter()+a):(s.Combine2(t,e.aabb),p=e.aabb.GetPerimeter(),b=s.GetPerimeter()-p+a),r.IsLeaf()?(s.Combine2(t,r.aabb),a=s.GetPerimeter()+a):(s.Combine2(t,r.aabb),p=r.aabb.GetPerimeter(),a=s.GetPerimeter()-p+a),n<b&&n<a)break;i=b<a?e:r}for(e=i.parent,(r=this.AllocateNode()).parent=e,r.userData=null,r.aabb.Combine2(t,i.aabb),r.height=i.height+1,e?(e.child1===i?e.child1=r:e.child2=r,r.child1=i,r.child2=o,i.parent=r,o.parent=r):(r.child1=i,r.child2=o,i.parent=r,this.m_root=o.parent=r),i=o.parent;null!==i;)e=(i=this.Balance(i)).child1,r=i.child2,box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==e),box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==r),i.height=1+box2d.b2Max(e.height,r.height),i.aabb.Combine2(e.aabb,r.aabb),i=i.parent}},goog.exportProperty(box2d.b2DynamicTree.prototype,"InsertLeaf",box2d.b2DynamicTree.prototype.InsertLeaf),box2d.b2DynamicTree.prototype.RemoveLeaf=function(o){if(o===this.m_root)this.m_root=null;else{var t=o.parent,e=t.parent;if(o=t.child1===o?t.child2:t.child1,e)for(e.child1===t?e.child1=o:e.child2=o,o.parent=e,this.FreeNode(t),t=e;t;)e=(t=this.Balance(t)).child1,o=t.child2,t.aabb.Combine2(e.aabb,o.aabb),t.height=1+box2d.b2Max(e.height,o.height),t=t.parent;else this.m_root=o,o.parent=null,this.FreeNode(t)}},goog.exportProperty(box2d.b2DynamicTree.prototype,"RemoveLeaf",box2d.b2DynamicTree.prototype.RemoveLeaf),box2d.b2DynamicTree.prototype.Balance=function(o){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==o),o.IsLeaf()||2>o.height)return o;var t=o.child1,e=o.child2;if(1<(r=e.height-t.height)){var r=e.child1,i=e.child2;return e.child1=o,e.parent=o.parent,o.parent=e,null!==e.parent?e.parent.child1===o?e.parent.child1=e:(box2d.ENABLE_ASSERTS&&box2d.b2Assert(e.parent.child2===o),e.parent.child2=e):this.m_root=e,r.height>i.height?(e.child2=r,o.child2=i,i.parent=o,o.aabb.Combine2(t.aabb,i.aabb),e.aabb.Combine2(o.aabb,r.aabb),o.height=1+box2d.b2Max(t.height,i.height),e.height=1+box2d.b2Max(o.height,r.height)):(e.child2=i,o.child2=r,r.parent=o,o.aabb.Combine2(t.aabb,r.aabb),e.aabb.Combine2(o.aabb,i.aabb),o.height=1+box2d.b2Max(t.height,r.height),e.height=1+box2d.b2Max(o.height,i.height)),e}return-1>r?(r=t.child1,i=t.child2,t.child1=o,t.parent=o.parent,o.parent=t,null!==t.parent?t.parent.child1===o?t.parent.child1=t:(box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.parent.child2===o),t.parent.child2=t):this.m_root=t,r.height>i.height?(t.child2=r,o.child1=i,i.parent=o,o.aabb.Combine2(e.aabb,i.aabb),t.aabb.Combine2(o.aabb,r.aabb),o.height=1+box2d.b2Max(e.height,i.height),t.height=1+box2d.b2Max(o.height,r.height)):(t.child2=i,o.child1=r,r.parent=o,o.aabb.Combine2(e.aabb,r.aabb),t.aabb.Combine2(o.aabb,i.aabb),o.height=1+box2d.b2Max(e.height,r.height),t.height=1+box2d.b2Max(o.height,i.height)),t):o},goog.exportProperty(box2d.b2DynamicTree.prototype,"Balance",box2d.b2DynamicTree.prototype.Balance),box2d.b2DynamicTree.prototype.GetHeight=function(){return null===this.m_root?0:this.m_root.height},goog.exportProperty(box2d.b2DynamicTree.prototype,"GetHeight",box2d.b2DynamicTree.prototype.GetHeight),box2d.b2DynamicTree.prototype.GetAreaRatio=function(){if(null===this.m_root)return 0;var o=this.m_root.aabb.GetPerimeter(),t=function(o){return null===o||o.IsLeaf()?0:o.aabb.GetPerimeter()+t(o.child1)+t(o.child2)};return t(this.m_root)/o},goog.exportProperty(box2d.b2DynamicTree.prototype,"GetAreaRatio",box2d.b2DynamicTree.prototype.GetAreaRatio),box2d.b2DynamicTree.prototype.ComputeHeightNode=function(o){if(o.IsLeaf())return 0;var t=this.ComputeHeightNode(o.child1);return o=this.ComputeHeightNode(o.child2),1+box2d.b2Max(t,o)},goog.exportProperty(box2d.b2DynamicTree.prototype,"ComputeHeightNode",box2d.b2DynamicTree.prototype.ComputeHeightNode),box2d.b2DynamicTree.prototype.ComputeHeight=function(){return this.ComputeHeightNode(this.m_root)},goog.exportProperty(box2d.b2DynamicTree.prototype,"ComputeHeight",box2d.b2DynamicTree.prototype.ComputeHeight),box2d.b2DynamicTree.prototype.ValidateStructure=function(o){if(null!==o){o===this.m_root&&box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===o.parent);var t=o.child1,e=o.child2;o.IsLeaf()?(box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===t),box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===e),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0===o.height)):(box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.parent===o),box2d.ENABLE_ASSERTS&&box2d.b2Assert(e.parent===o),this.ValidateStructure(t),this.ValidateStructure(e))}},goog.exportProperty(box2d.b2DynamicTree.prototype,"ValidateStructure",box2d.b2DynamicTree.prototype.ValidateStructure),box2d.b2DynamicTree.prototype.ValidateMetrics=function(o){if(null!==o){var t,e=o.child1,r=o.child2;if(o.IsLeaf())box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===e),box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===r),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0===o.height);else t=1+box2d.b2Max(e.height,r.height),box2d.ENABLE_ASSERTS&&box2d.b2Assert(o.height===t),(t=box2d.b2DynamicTree.s_aabb).Combine2(e.aabb,r.aabb),box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.lowerBound===o.aabb.lowerBound),box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.upperBound===o.aabb.upperBound),this.ValidateMetrics(e),this.ValidateMetrics(r)}},goog.exportProperty(box2d.b2DynamicTree.prototype,"ValidateMetrics",box2d.b2DynamicTree.prototype.ValidateMetrics),box2d.b2DynamicTree.prototype.Validate=function(){this.ValidateStructure(this.m_root),this.ValidateMetrics(this.m_root);for(var o=this.m_freeList;null!==o;)o=o.parent,0;box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.GetHeight()===this.ComputeHeight())},goog.exportProperty(box2d.b2DynamicTree.prototype,"Validate",box2d.b2DynamicTree.prototype.Validate),box2d.b2DynamicTree.prototype.GetMaxBalance=function(){var o;return null===(o=this.m_root)?o=0:1>=o.height?o=0:(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!o.IsLeaf()),o=box2d.b2Abs(o.child2.height-o.child1.height),o=box2d.b2Max(0,o)),o},goog.exportProperty(box2d.b2DynamicTree.prototype,"GetMaxBalance",box2d.b2DynamicTree.prototype.GetMaxBalance),box2d.b2DynamicTree.prototype.RebuildBottomUp=function(){this.Validate()},goog.exportProperty(box2d.b2DynamicTree.prototype,"RebuildBottomUp",box2d.b2DynamicTree.prototype.RebuildBottomUp),box2d.b2DynamicTree.prototype.ShiftOrigin=function(o){var t=function(o,e){if(null!==o&&!(1>=o.height)){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!o.IsLeaf());var r=o.child2;t(o.child1,e),t(r,e),o.aabb.lowerBound.SelfSub(e),o.aabb.upperBound.SelfSub(e)}};t(this.m_root,o)},goog.exportProperty(box2d.b2DynamicTree.prototype,"ShiftOrigin",box2d.b2DynamicTree.prototype.ShiftOrigin),box2d.b2Pair=function(){},goog.exportSymbol("box2d.b2Pair",box2d.b2Pair),box2d.b2Pair.prototype.proxyA=null,goog.exportProperty(box2d.b2Pair.prototype,"proxyA",box2d.b2Pair.prototype.proxyA),box2d.b2Pair.prototype.proxyB=null,goog.exportProperty(box2d.b2Pair.prototype,"proxyB",box2d.b2Pair.prototype.proxyB),box2d.b2BroadPhase=function(){this.m_tree=new box2d.b2DynamicTree,this.m_moveBuffer=[],this.m_pairBuffer=[]},goog.exportSymbol("box2d.b2BroadPhase",box2d.b2BroadPhase),box2d.b2BroadPhase.prototype.m_tree=null,goog.exportProperty(box2d.b2BroadPhase.prototype,"m_tree",box2d.b2BroadPhase.prototype.m_tree),box2d.b2BroadPhase.prototype.m_proxyCount=0,goog.exportProperty(box2d.b2BroadPhase.prototype,"m_proxyCount",box2d.b2BroadPhase.prototype.m_proxyCount),box2d.b2BroadPhase.prototype.m_moveCount=0,goog.exportProperty(box2d.b2BroadPhase.prototype,"m_moveCount",box2d.b2BroadPhase.prototype.m_moveCount),box2d.b2BroadPhase.prototype.m_moveBuffer=null,goog.exportProperty(box2d.b2BroadPhase.prototype,"m_moveBuffer",box2d.b2BroadPhase.prototype.m_moveBuffer),box2d.b2BroadPhase.prototype.m_pairCount=0,goog.exportProperty(box2d.b2BroadPhase.prototype,"m_pairCount",box2d.b2BroadPhase.prototype.m_pairCount),box2d.b2BroadPhase.prototype.m_pairBuffer=null,goog.exportProperty(box2d.b2BroadPhase.prototype,"m_pairBuffer",box2d.b2BroadPhase.prototype.m_pairBuffer),box2d.b2BroadPhase.prototype.CreateProxy=function(o,t){var e=this.m_tree.CreateProxy(o,t);return++this.m_proxyCount,this.BufferMove(e),e},goog.exportProperty(box2d.b2BroadPhase.prototype,"CreateProxy",box2d.b2BroadPhase.prototype.CreateProxy),box2d.b2BroadPhase.prototype.DestroyProxy=function(o){this.UnBufferMove(o),--this.m_proxyCount,this.m_tree.DestroyProxy(o)},goog.exportProperty(box2d.b2BroadPhase.prototype,"DestroyProxy",box2d.b2BroadPhase.prototype.DestroyProxy),box2d.b2BroadPhase.prototype.MoveProxy=function(o,t,e){this.m_tree.MoveProxy(o,t,e)&&this.BufferMove(o)},goog.exportProperty(box2d.b2BroadPhase.prototype,"MoveProxy",box2d.b2BroadPhase.prototype.MoveProxy),box2d.b2BroadPhase.prototype.TouchProxy=function(o){this.BufferMove(o)},goog.exportProperty(box2d.b2BroadPhase.prototype,"TouchProxy",box2d.b2BroadPhase.prototype.TouchProxy),box2d.b2BroadPhase.prototype.GetFatAABB=function(o){return this.m_tree.GetFatAABB(o)},goog.exportProperty(box2d.b2BroadPhase.prototype,"GetFatAABB",box2d.b2BroadPhase.prototype.GetFatAABB),box2d.b2BroadPhase.prototype.GetUserData=function(o){return this.m_tree.GetUserData(o)},goog.exportProperty(box2d.b2BroadPhase.prototype,"GetUserData",box2d.b2BroadPhase.prototype.GetUserData),box2d.b2BroadPhase.prototype.TestOverlap=function(o,t){var e=this.m_tree.GetFatAABB(o),r=this.m_tree.GetFatAABB(t);return box2d.b2TestOverlapAABB(e,r)},goog.exportProperty(box2d.b2BroadPhase.prototype,"TestOverlap",box2d.b2BroadPhase.prototype.TestOverlap),box2d.b2BroadPhase.prototype.GetProxyCount=function(){return this.m_proxyCount},goog.exportProperty(box2d.b2BroadPhase.prototype,"GetProxyCount",box2d.b2BroadPhase.prototype.GetProxyCount),box2d.b2BroadPhase.prototype.GetTreeHeight=function(){return this.m_tree.GetHeight()},goog.exportProperty(box2d.b2BroadPhase.prototype,"GetTreeHeight",box2d.b2BroadPhase.prototype.GetTreeHeight),box2d.b2BroadPhase.prototype.GetTreeBalance=function(){return this.m_tree.GetMaxBalance()},goog.exportProperty(box2d.b2BroadPhase.prototype,"GetTreeBalance",box2d.b2BroadPhase.prototype.GetTreeBalance),box2d.b2BroadPhase.prototype.GetTreeQuality=function(){return this.m_tree.GetAreaRatio()},goog.exportProperty(box2d.b2BroadPhase.prototype,"GetTreeQuality",box2d.b2BroadPhase.prototype.GetTreeQuality),box2d.b2BroadPhase.prototype.ShiftOrigin=function(o){this.m_tree.ShiftOrigin(o)},goog.exportProperty(box2d.b2BroadPhase.prototype,"ShiftOrigin",box2d.b2BroadPhase.prototype.ShiftOrigin),box2d.b2BroadPhase.prototype.UpdatePairs=function(o){for(var t=this.m_pairCount=0;t<this.m_moveCount;++t){var e=this.m_moveBuffer[t];if(null!==e){var r=this,i=this.m_tree.GetFatAABB(e);this.m_tree.Query(function(o){if(o.m_id===e.m_id)return!0;r.m_pairCount===r.m_pairBuffer.length&&(r.m_pairBuffer[r.m_pairCount]=new box2d.b2Pair);var t=r.m_pairBuffer[r.m_pairCount];return o.m_id<e.m_id?(t.proxyA=o,t.proxyB=e):(t.proxyA=e,t.proxyB=o),++r.m_pairCount,!0},i)}}for(this.m_moveCount=0,this.m_pairBuffer.length=this.m_pairCount,this.m_pairBuffer.sort(box2d.b2PairLessThan),t=0;t<this.m_pairCount;){i=this.m_pairBuffer[t];var b=this.m_tree.GetUserData(i.proxyA),p=this.m_tree.GetUserData(i.proxyB);for(o.AddPair(b,p),++t;t<this.m_pairCount&&((b=this.m_pairBuffer[t]).proxyA.m_id===i.proxyA.m_id&&b.proxyB.m_id===i.proxyB.m_id);)++t}},goog.exportProperty(box2d.b2BroadPhase.prototype,"UpdatePairs",box2d.b2BroadPhase.prototype.UpdatePairs),box2d.b2BroadPhase.prototype.Query=function(o,t){this.m_tree.Query(o,t)},goog.exportProperty(box2d.b2BroadPhase.prototype,"Query",box2d.b2BroadPhase.prototype.Query),box2d.b2BroadPhase.prototype.RayCast=function(o,t){this.m_tree.RayCast(o,t)},goog.exportProperty(box2d.b2BroadPhase.prototype,"RayCast",box2d.b2BroadPhase.prototype.RayCast),box2d.b2BroadPhase.prototype.BufferMove=function(o){this.m_moveBuffer[this.m_moveCount]=o,++this.m_moveCount},goog.exportProperty(box2d.b2BroadPhase.prototype,"BufferMove",box2d.b2BroadPhase.prototype.BufferMove),box2d.b2BroadPhase.prototype.UnBufferMove=function(o){o=this.m_moveBuffer.indexOf(o),this.m_moveBuffer[o]=null},goog.exportProperty(box2d.b2BroadPhase.prototype,"UnBufferMove",box2d.b2BroadPhase.prototype.UnBufferMove),box2d.b2PairLessThan=function(o,t){return o.proxyA.m_id===t.proxyA.m_id?o.proxyB.m_id-t.proxyB.m_id:o.proxyA.m_id-t.proxyA.m_id},box2d.b2MassData=function(){this.center=new box2d.b2Vec2(0,0)},goog.exportSymbol("box2d.b2MassData",box2d.b2MassData),box2d.b2MassData.prototype.mass=0,goog.exportProperty(box2d.b2MassData.prototype,"mass",box2d.b2MassData.prototype.mass),box2d.b2MassData.prototype.center=null,goog.exportProperty(box2d.b2MassData.prototype,"center",box2d.b2MassData.prototype.center),box2d.b2MassData.prototype.I=0,goog.exportProperty(box2d.b2MassData.prototype,"I",box2d.b2MassData.prototype.I),box2d.b2ShapeType={e_unknown:-1,e_circleShape:0,e_edgeShape:1,e_polygonShape:2,e_chainShape:3,e_shapeTypeCount:4},goog.exportSymbol("box2d.b2ShapeType",box2d.b2ShapeType),goog.exportProperty(box2d.b2ShapeType,"e_unknown",box2d.b2ShapeType.e_unknown),goog.exportProperty(box2d.b2ShapeType,"e_circleShape",box2d.b2ShapeType.e_circleShape),goog.exportProperty(box2d.b2ShapeType,"e_edgeShape",box2d.b2ShapeType.e_edgeShape),goog.exportProperty(box2d.b2ShapeType,"e_polygonShape",box2d.b2ShapeType.e_polygonShape),goog.exportProperty(box2d.b2ShapeType,"e_chainShape",box2d.b2ShapeType.e_chainShape),goog.exportProperty(box2d.b2ShapeType,"e_shapeTypeCount",box2d.b2ShapeType.e_shapeTypeCount),box2d.b2Shape=function(o,t){this.m_type=o,this.m_radius=t},goog.exportSymbol("box2d.b2Shape",box2d.b2Shape),box2d.b2Shape.prototype.m_type=box2d.b2ShapeType.e_unknown,goog.exportProperty(box2d.b2Shape.prototype,"m_type",box2d.b2Shape.prototype.m_type),box2d.b2Shape.prototype.m_radius=0,goog.exportProperty(box2d.b2Shape.prototype,"m_radius",box2d.b2Shape.prototype.m_radius),box2d.b2Shape.prototype.Clone=function(){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),null},goog.exportProperty(box2d.b2Shape.prototype,"Clone",box2d.b2Shape.prototype.Clone),box2d.b2Shape.prototype.Copy=function(o){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_type===o.m_type),this.m_radius=o.m_radius,this},goog.exportProperty(box2d.b2Shape.prototype,"Copy",box2d.b2Shape.prototype.Copy),box2d.b2Shape.prototype.GetType=function(){return this.m_type},goog.exportProperty(box2d.b2Shape.prototype,"GetType",box2d.b2Shape.prototype.GetType),box2d.b2Shape.prototype.GetChildCount=function(){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual"),0},goog.exportProperty(box2d.b2Shape.prototype,"GetChildCount",box2d.b2Shape.prototype.GetChildCount),box2d.b2Shape.prototype.TestPoint=function(o,t){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual"),!1},goog.exportProperty(box2d.b2Shape.prototype,"TestPoint",box2d.b2Shape.prototype.TestPoint),box2d.b2Shape.prototype.ComputeDistance=function(o,t,e,r){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual"),0},goog.exportProperty(box2d.b2Shape.prototype,"ComputeDistance",box2d.b2Shape.prototype.ComputeDistance),box2d.b2Shape.prototype.RayCast=function(o,t,e,r){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual"),!1},goog.exportProperty(box2d.b2Shape.prototype,"RayCast",box2d.b2Shape.prototype.RayCast),box2d.b2Shape.prototype.ComputeAABB=function(o,t,e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")},goog.exportProperty(box2d.b2Shape.prototype,"ComputeAABB",box2d.b2Shape.prototype.ComputeAABB),box2d.b2Shape.prototype.ComputeMass=function(o,t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")},goog.exportProperty(box2d.b2Shape.prototype,"ComputeMass",box2d.b2Shape.prototype.ComputeMass),box2d.b2Shape.prototype.SetupDistanceProxy=function(o,t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")},box2d.b2Shape.prototype.ComputeSubmergedArea=function(o,t,e,r){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual"),0},goog.exportProperty(box2d.b2Shape.prototype,"ComputeSubmergedArea",box2d.b2Shape.prototype.ComputeSubmergedArea),box2d.b2Shape.prototype.Dump=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")},goog.exportProperty(box2d.b2Shape.prototype,"Dump",box2d.b2Shape.prototype.Dump),box2d.b2CircleShape=function(o){box2d.b2Shape.call(this,box2d.b2ShapeType.e_circleShape,o||0),this.m_p=new box2d.b2Vec2},goog.inherits(box2d.b2CircleShape,box2d.b2Shape),goog.exportSymbol("box2d.b2CircleShape",box2d.b2CircleShape),box2d.b2CircleShape.prototype.m_p=null,goog.exportProperty(box2d.b2CircleShape.prototype,"m_p",box2d.b2CircleShape.prototype.m_p),box2d.b2CircleShape.prototype.Clone=function(){return(new box2d.b2CircleShape).Copy(this)},goog.exportProperty(box2d.b2CircleShape.prototype,"Clone",box2d.b2CircleShape.prototype.Clone),box2d.b2CircleShape.prototype.Copy=function(o){return box2d.b2Shape.prototype.Copy.call(this,o),box2d.ENABLE_ASSERTS&&box2d.b2Assert(o instanceof box2d.b2CircleShape),this.m_p.Copy(o.m_p),this},goog.exportProperty(box2d.b2CircleShape.prototype,"Copy",box2d.b2CircleShape.prototype.Copy),box2d.b2CircleShape.prototype.GetChildCount=function(){return 1},goog.exportProperty(box2d.b2CircleShape.prototype,"GetChildCount",box2d.b2CircleShape.prototype.GetChildCount),box2d.b2CircleShape.prototype.TestPoint=function(o,t){var e=box2d.b2Mul_X_V2(o,this.m_p,box2d.b2CircleShape.prototype.TestPoint.s_center);e=box2d.b2Sub_V2_V2(t,e,box2d.b2CircleShape.prototype.TestPoint.s_d);return box2d.b2Dot_V2_V2(e,e)<=box2d.b2Sq(this.m_radius)},goog.exportProperty(box2d.b2CircleShape.prototype,"TestPoint",box2d.b2CircleShape.prototype.TestPoint),box2d.b2CircleShape.prototype.TestPoint.s_center=new box2d.b2Vec2,box2d.b2CircleShape.prototype.TestPoint.s_d=new box2d.b2Vec2,box2d.b2CircleShape.prototype.ComputeDistance=function(o,t,e,r){return o=box2d.b2Mul_X_V2(o,this.m_p,box2d.b2CircleShape.prototype.ComputeDistance.s_center),box2d.b2Sub_V2_V2(t,o,e),e.Normalize()-this.m_radius},goog.exportProperty(box2d.b2CircleShape.prototype,"ComputeDistance",box2d.b2CircleShape.prototype.ComputeDistance),box2d.b2CircleShape.prototype.ComputeDistance.s_center=new box2d.b2Vec2,box2d.b2CircleShape.prototype.RayCast=function(o,t,e,r){e=box2d.b2Mul_X_V2(e,this.m_p,box2d.b2CircleShape.prototype.RayCast.s_position),e=box2d.b2Sub_V2_V2(t.p1,e,box2d.b2CircleShape.prototype.RayCast.s_s);var i=box2d.b2Dot_V2_V2(e,e)-box2d.b2Sq(this.m_radius);r=box2d.b2Sub_V2_V2(t.p2,t.p1,box2d.b2CircleShape.prototype.RayCast.s_r);var b=box2d.b2Dot_V2_V2(e,r),p=box2d.b2Dot_V2_V2(r,r);return!(0>(i=b*b-p*i)||p<box2d.b2_epsilon)&&(0<=(b=-(b+box2d.b2Sqrt(i)))&&b<=t.maxFraction*p&&(b/=p,o.fraction=b,box2d.b2AddMul_V2_S_V2(e,b,r,o.normal).SelfNormalize(),!0))},goog.exportProperty(box2d.b2CircleShape.prototype,"RayCast",box2d.b2CircleShape.prototype.RayCast),box2d.b2CircleShape.prototype.RayCast.s_position=new box2d.b2Vec2,box2d.b2CircleShape.prototype.RayCast.s_s=new box2d.b2Vec2,box2d.b2CircleShape.prototype.RayCast.s_r=new box2d.b2Vec2,box2d.b2CircleShape.prototype.ComputeAABB=function(o,t,e){t=box2d.b2Mul_X_V2(t,this.m_p,box2d.b2CircleShape.prototype.ComputeAABB.s_p),o.lowerBound.Set(t.x-this.m_radius,t.y-this.m_radius),o.upperBound.Set(t.x+this.m_radius,t.y+this.m_radius)},goog.exportProperty(box2d.b2CircleShape.prototype,"ComputeAABB",box2d.b2CircleShape.prototype.ComputeAABB),box2d.b2CircleShape.prototype.ComputeAABB.s_p=new box2d.b2Vec2,box2d.b2CircleShape.prototype.ComputeMass=function(o,t){var e=box2d.b2Sq(this.m_radius);o.mass=t*box2d.b2_pi*e,o.center.Copy(this.m_p),o.I=o.mass*(.5*e+box2d.b2Dot_V2_V2(this.m_p,this.m_p))},goog.exportProperty(box2d.b2CircleShape.prototype,"ComputeMass",box2d.b2CircleShape.prototype.ComputeMass),box2d.b2CircleShape.prototype.SetupDistanceProxy=function(o,t){o.m_vertices=o.m_buffer,o.m_vertices[0].Copy(this.m_p),o.m_count=1,o.m_radius=this.m_radius},box2d.b2CircleShape.prototype.ComputeSubmergedArea=function(o,t,e,r){if(e=box2d.b2Mul_X_V2(e,this.m_p,new box2d.b2Vec2),(b=-(box2d.b2Dot_V2_V2(o,e)-t))<-this.m_radius+box2d.b2_epsilon)return 0;if(b>this.m_radius)return r.Copy(e),box2d.b2_pi*this.m_radius*this.m_radius;var i=b*b,b=(t=this.m_radius*this.m_radius)*(box2d.b2Asin(b/this.m_radius)+box2d.b2_pi/2)+b*box2d.b2Sqrt(t-i);return t=-2/3*box2d.b2Pow(t-i,1.5)/b,r.x=e.x+o.x*t,r.y=e.y+o.y*t,b},goog.exportProperty(box2d.b2CircleShape.prototype,"ComputeSubmergedArea",box2d.b2CircleShape.prototype.ComputeSubmergedArea),box2d.b2CircleShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2CircleShape*/ var shape = new box2d.b2CircleShape();\n"),box2d.b2Log("    shape.m_radius = %.15f;\n",this.m_radius),box2d.b2Log("    shape.m_p.Set(%.15f, %.15f);\n",this.m_p.x,this.m_p.y)},goog.exportProperty(box2d.b2CircleShape.prototype,"Dump",box2d.b2CircleShape.prototype.Dump),box2d.b2EdgeShape=function(){box2d.b2Shape.call(this,box2d.b2ShapeType.e_edgeShape,box2d.b2_polygonRadius),this.m_vertex1=new box2d.b2Vec2,this.m_vertex2=new box2d.b2Vec2,this.m_vertex0=new box2d.b2Vec2,this.m_vertex3=new box2d.b2Vec2},goog.inherits(box2d.b2EdgeShape,box2d.b2Shape),goog.exportSymbol("box2d.b2EdgeShape",box2d.b2EdgeShape),box2d.b2EdgeShape.prototype.m_vertex1=null,goog.exportProperty(box2d.b2EdgeShape.prototype,"m_vertex1",box2d.b2EdgeShape.prototype.m_vertex1),box2d.b2EdgeShape.prototype.m_vertex2=null,goog.exportProperty(box2d.b2EdgeShape.prototype,"m_vertex2",box2d.b2EdgeShape.prototype.m_vertex2),box2d.b2EdgeShape.prototype.m_vertex0=null,goog.exportProperty(box2d.b2EdgeShape.prototype,"m_vertex0",box2d.b2EdgeShape.prototype.m_vertex0),box2d.b2EdgeShape.prototype.m_vertex3=null,goog.exportProperty(box2d.b2EdgeShape.prototype,"m_vertex3",box2d.b2EdgeShape.prototype.m_vertex3),box2d.b2EdgeShape.prototype.m_hasVertex0=!1,goog.exportProperty(box2d.b2EdgeShape.prototype,"m_hasVertex0",box2d.b2EdgeShape.prototype.m_hasVertex0),box2d.b2EdgeShape.prototype.m_hasVertex3=!1,goog.exportProperty(box2d.b2EdgeShape.prototype,"m_hasVertex3",box2d.b2EdgeShape.prototype.m_hasVertex3),box2d.b2EdgeShape.prototype.Set=function(o,t){return this.m_vertex1.Copy(o),this.m_vertex2.Copy(t),this.m_hasVertex3=this.m_hasVertex0=!1,this},goog.exportProperty(box2d.b2EdgeShape.prototype,"Set",box2d.b2EdgeShape.prototype.Set),box2d.b2EdgeShape.prototype.SetAsEdge=box2d.b2EdgeShape.prototype.Set,box2d.b2EdgeShape.prototype.Clone=function(){return(new box2d.b2EdgeShape).Copy(this)},goog.exportProperty(box2d.b2EdgeShape.prototype,"Clone",box2d.b2EdgeShape.prototype.Clone),box2d.b2EdgeShape.prototype.Copy=function(o){return box2d.b2Shape.prototype.Copy.call(this,o),box2d.ENABLE_ASSERTS&&box2d.b2Assert(o instanceof box2d.b2EdgeShape),this.m_vertex1.Copy(o.m_vertex1),this.m_vertex2.Copy(o.m_vertex2),this.m_vertex0.Copy(o.m_vertex0),this.m_vertex3.Copy(o.m_vertex3),this.m_hasVertex0=o.m_hasVertex0,this.m_hasVertex3=o.m_hasVertex3,this},goog.exportProperty(box2d.b2EdgeShape.prototype,"Copy",box2d.b2EdgeShape.prototype.Copy),box2d.b2EdgeShape.prototype.GetChildCount=function(){return 1},goog.exportProperty(box2d.b2EdgeShape.prototype,"GetChildCount",box2d.b2EdgeShape.prototype.GetChildCount),box2d.b2EdgeShape.prototype.TestPoint=function(o,t){return!1},goog.exportProperty(box2d.b2EdgeShape.prototype,"TestPoint",box2d.b2EdgeShape.prototype.TestPoint),box2d.b2EdgeShape.prototype.ComputeDistance=function(o,t,e,r){var i=box2d.b2Mul_X_V2(o,this.m_vertex1,box2d.b2EdgeShape.prototype.ComputeDistance.s_v1);o=box2d.b2Mul_X_V2(o,this.m_vertex2,box2d.b2EdgeShape.prototype.ComputeDistance.s_v2),r=box2d.b2Sub_V2_V2(t,i,box2d.b2EdgeShape.prototype.ComputeDistance.s_d);i=box2d.b2Sub_V2_V2(o,i,box2d.b2EdgeShape.prototype.ComputeDistance.s_s);var b=box2d.b2Dot_V2_V2(r,i);if(0<b){var p=box2d.b2Dot_V2_V2(i,i);b>p?box2d.b2Sub_V2_V2(t,o,r):r.SelfMulSub(b/p,i)}return e.Copy(r),e.Normalize()},goog.exportProperty(box2d.b2EdgeShape.prototype,"ComputeDistance",box2d.b2EdgeShape.prototype.ComputeDistance),box2d.b2EdgeShape.prototype.ComputeDistance.s_v1=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.ComputeDistance.s_v2=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.ComputeDistance.s_d=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.ComputeDistance.s_s=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.RayCast=function(o,t,e,r){var i=box2d.b2MulT_X_V2(e,t.p1,box2d.b2EdgeShape.prototype.RayCast.s_p1);r=box2d.b2MulT_X_V2(e,t.p2,box2d.b2EdgeShape.prototype.RayCast.s_p2);var b=box2d.b2Sub_V2_V2(r,i,box2d.b2EdgeShape.prototype.RayCast.s_d);r=this.m_vertex1;var p=this.m_vertex2,n=box2d.b2Sub_V2_V2(p,r,box2d.b2EdgeShape.prototype.RayCast.s_e),a=o.normal.Set(n.y,-n.x).SelfNormalize();n=box2d.b2Dot_V2_V2(a,box2d.b2Sub_V2_V2(r,i,box2d.b2Vec2.s_t0));return 0!==(a=box2d.b2Dot_V2_V2(a,b))&&(!(0>(a=n/a)||t.maxFraction<a)&&(t=box2d.b2AddMul_V2_S_V2(i,a,b,box2d.b2EdgeShape.prototype.RayCast.s_q),i=box2d.b2Sub_V2_V2(p,r,box2d.b2EdgeShape.prototype.RayCast.s_r),0!==(p=box2d.b2Dot_V2_V2(i,i))&&(!(0>(r=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(t,r,box2d.b2Vec2.s_t0),i)/p)||1<r)&&(o.fraction=a,box2d.b2Mul_R_V2(e.q,o.normal,o.normal),0<n&&o.normal.SelfNeg(),!0))))},goog.exportProperty(box2d.b2EdgeShape.prototype,"RayCast",box2d.b2EdgeShape.prototype.RayCast),box2d.b2EdgeShape.prototype.RayCast.s_p1=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.RayCast.s_p2=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.RayCast.s_d=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.RayCast.s_e=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.RayCast.s_q=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.RayCast.s_r=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.ComputeAABB=function(o,t,e){e=box2d.b2Mul_X_V2(t,this.m_vertex1,box2d.b2EdgeShape.prototype.ComputeAABB.s_v1),t=box2d.b2Mul_X_V2(t,this.m_vertex2,box2d.b2EdgeShape.prototype.ComputeAABB.s_v2),box2d.b2Min_V2_V2(e,t,o.lowerBound),box2d.b2Max_V2_V2(e,t,o.upperBound),t=this.m_radius,o.lowerBound.SelfSubXY(t,t),o.upperBound.SelfAddXY(t,t)},goog.exportProperty(box2d.b2EdgeShape.prototype,"ComputeAABB",box2d.b2EdgeShape.prototype.ComputeAABB),box2d.b2EdgeShape.prototype.ComputeAABB.s_v1=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.ComputeAABB.s_v2=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.ComputeMass=function(o,t){o.mass=0,box2d.b2Mid_V2_V2(this.m_vertex1,this.m_vertex2,o.center),o.I=0},goog.exportProperty(box2d.b2EdgeShape.prototype,"ComputeMass",box2d.b2EdgeShape.prototype.ComputeMass),box2d.b2EdgeShape.prototype.SetupDistanceProxy=function(o,t){o.m_vertices=o.m_buffer,o.m_vertices[0].Copy(this.m_vertex1),o.m_vertices[1].Copy(this.m_vertex2),o.m_count=2,o.m_radius=this.m_radius},box2d.b2EdgeShape.prototype.ComputeSubmergedArea=function(o,t,e,r){return r.SetZero(),0},goog.exportProperty(box2d.b2EdgeShape.prototype,"ComputeSubmergedArea",box2d.b2EdgeShape.prototype.ComputeSubmergedArea),box2d.b2EdgeShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2EdgeShape*/ var shape = new box2d.b2EdgeShape();\n"),box2d.b2Log("    shape.m_radius = %.15f;\n",this.m_radius),box2d.b2Log("    shape.m_vertex0.Set(%.15f, %.15f);\n",this.m_vertex0.x,this.m_vertex0.y),box2d.b2Log("    shape.m_vertex1.Set(%.15f, %.15f);\n",this.m_vertex1.x,this.m_vertex1.y),box2d.b2Log("    shape.m_vertex2.Set(%.15f, %.15f);\n",this.m_vertex2.x,this.m_vertex2.y),box2d.b2Log("    shape.m_vertex3.Set(%.15f, %.15f);\n",this.m_vertex3.x,this.m_vertex3.y),box2d.b2Log("    shape.m_hasVertex0 = %s;\n",this.m_hasVertex0),box2d.b2Log("    shape.m_hasVertex3 = %s;\n",this.m_hasVertex3)},goog.exportProperty(box2d.b2EdgeShape.prototype,"Dump",box2d.b2EdgeShape.prototype.Dump),box2d.b2ChainShape=function(){box2d.b2Shape.call(this,box2d.b2ShapeType.e_chainShape,box2d.b2_polygonRadius),this.m_prevVertex=new box2d.b2Vec2,this.m_nextVertex=new box2d.b2Vec2},goog.inherits(box2d.b2ChainShape,box2d.b2Shape),goog.exportSymbol("box2d.b2ChainShape",box2d.b2ChainShape),box2d.b2ChainShape.prototype.m_vertices=null,goog.exportProperty(box2d.b2ChainShape.prototype,"m_vertices",box2d.b2ChainShape.prototype.m_vertices),box2d.b2ChainShape.prototype.m_count=0,goog.exportProperty(box2d.b2ChainShape.prototype,"m_count",box2d.b2ChainShape.prototype.m_count),box2d.b2ChainShape.prototype.m_prevVertex=null,goog.exportProperty(box2d.b2ChainShape.prototype,"m_prevVertex",box2d.b2ChainShape.prototype.m_prevVertex),box2d.b2ChainShape.prototype.m_nextVertex=null,goog.exportProperty(box2d.b2ChainShape.prototype,"m_nextVertex",box2d.b2ChainShape.prototype.m_nextVertex),box2d.b2ChainShape.prototype.m_hasPrevVertex=!1,goog.exportProperty(box2d.b2ChainShape.prototype,"m_hasPrevVertex",box2d.b2ChainShape.prototype.m_hasPrevVertex),box2d.b2ChainShape.prototype.m_hasNextVertex=!1,goog.exportProperty(box2d.b2ChainShape.prototype,"m_hasNextVertex",box2d.b2ChainShape.prototype.m_hasNextVertex),box2d.b2ChainShape.prototype.Clear=function(){this.m_vertices=null,this.m_count=0},goog.exportProperty(box2d.b2ChainShape.prototype,"Clear",box2d.b2ChainShape.prototype.Clear),box2d.b2ChainShape.prototype.CreateLoop=function(o,t){if(t=t||o.length,box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===this.m_vertices&&0===this.m_count),box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=t),box2d.ENABLE_ASSERTS)for(var e=1;e<t;++e)box2d.b2Assert(box2d.b2DistanceSquared(o[e-1],o[e])>box2d.b2_linearSlop*box2d.b2_linearSlop);for(this.m_count=t+1,this.m_vertices=box2d.b2Vec2.MakeArray(this.m_count),e=0;e<t;++e)this.m_vertices[e].Copy(o[e]);return this.m_vertices[t].Copy(this.m_vertices[0]),this.m_prevVertex.Copy(this.m_vertices[this.m_count-2]),this.m_nextVertex.Copy(this.m_vertices[1]),this.m_hasNextVertex=this.m_hasPrevVertex=!0,this},goog.exportProperty(box2d.b2ChainShape.prototype,"CreateLoop",box2d.b2ChainShape.prototype.CreateLoop),box2d.b2ChainShape.prototype.CreateChain=function(o,t){if(t=t||o.length,box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===this.m_vertices&&0===this.m_count),box2d.ENABLE_ASSERTS&&box2d.b2Assert(2<=t),box2d.ENABLE_ASSERTS)for(var e=1;e<t;++e)box2d.b2Assert(box2d.b2DistanceSquared(o[e-1],o[e])>box2d.b2_linearSlop*box2d.b2_linearSlop);for(this.m_count=t,this.m_vertices=box2d.b2Vec2.MakeArray(t),e=0;e<t;++e)this.m_vertices[e].Copy(o[e]);return this.m_hasNextVertex=this.m_hasPrevVertex=!1,this.m_prevVertex.SetZero(),this.m_nextVertex.SetZero(),this},goog.exportProperty(box2d.b2ChainShape.prototype,"CreateChain",box2d.b2ChainShape.prototype.CreateChain),box2d.b2ChainShape.prototype.SetPrevVertex=function(o){return this.m_prevVertex.Copy(o),this.m_hasPrevVertex=!0,this},goog.exportProperty(box2d.b2ChainShape.prototype,"SetPrevVertex",box2d.b2ChainShape.prototype.SetPrevVertex),box2d.b2ChainShape.prototype.SetNextVertex=function(o){return this.m_nextVertex.Copy(o),this.m_hasNextVertex=!0,this},goog.exportProperty(box2d.b2ChainShape.prototype,"SetNextVertex",box2d.b2ChainShape.prototype.SetNextVertex),box2d.b2ChainShape.prototype.Clone=function(){return(new box2d.b2ChainShape).Copy(this)},goog.exportProperty(box2d.b2ChainShape.prototype,"Clone",box2d.b2ChainShape.prototype.Clone),box2d.b2ChainShape.prototype.Copy=function(o){return box2d.b2Shape.prototype.Copy.call(this,o),box2d.ENABLE_ASSERTS&&box2d.b2Assert(o instanceof box2d.b2ChainShape),this.CreateChain(o.m_vertices,o.m_count),this.m_prevVertex.Copy(o.m_prevVertex),this.m_nextVertex.Copy(o.m_nextVertex),this.m_hasPrevVertex=o.m_hasPrevVertex,this.m_hasNextVertex=o.m_hasNextVertex,this},goog.exportProperty(box2d.b2ChainShape.prototype,"Copy",box2d.b2ChainShape.prototype.Copy),box2d.b2ChainShape.prototype.GetChildCount=function(){return this.m_count-1},goog.exportProperty(box2d.b2ChainShape.prototype,"GetChildCount",box2d.b2ChainShape.prototype.GetChildCount),box2d.b2ChainShape.prototype.GetChildEdge=function(o,t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=t&&t<this.m_count-1),o.m_type=box2d.b2ShapeType.e_edgeShape,o.m_radius=this.m_radius,o.m_vertex1.Copy(this.m_vertices[t]),o.m_vertex2.Copy(this.m_vertices[t+1]),0<t?(o.m_vertex0.Copy(this.m_vertices[t-1]),o.m_hasVertex0=!0):(o.m_vertex0.Copy(this.m_prevVertex),o.m_hasVertex0=this.m_hasPrevVertex),t<this.m_count-2?(o.m_vertex3.Copy(this.m_vertices[t+2]),o.m_hasVertex3=!0):(o.m_vertex3.Copy(this.m_nextVertex),o.m_hasVertex3=this.m_hasNextVertex)},goog.exportProperty(box2d.b2ChainShape.prototype,"GetChildEdge",box2d.b2ChainShape.prototype.GetChildEdge),box2d.b2ChainShape.prototype.TestPoint=function(o,t){return!1},goog.exportProperty(box2d.b2ChainShape.prototype,"TestPoint",box2d.b2ChainShape.prototype.TestPoint),box2d.b2ChainShape.prototype.ComputeDistance=function(o,t,e,r){var i=box2d.b2ChainShape.prototype.ComputeDistance.s_edgeShape;return this.GetChildEdge(i,r),i.ComputeDistance(o,t,e,0)},goog.exportProperty(box2d.b2ChainShape.prototype,"ComputeDistance",box2d.b2ChainShape.prototype.ComputeDistance),box2d.b2ChainShape.prototype.ComputeDistance.s_edgeShape=new box2d.b2EdgeShape,box2d.b2ChainShape.prototype.RayCast=function(o,t,e,r){box2d.ENABLE_ASSERTS&&box2d.b2Assert(r<this.m_count);var i=box2d.b2ChainShape.prototype.RayCast.s_edgeShape;return i.m_vertex1.Copy(this.m_vertices[r]),i.m_vertex2.Copy(this.m_vertices[(r+1)%this.m_count]),i.RayCast(o,t,e,0)},goog.exportProperty(box2d.b2ChainShape.prototype,"RayCast",box2d.b2ChainShape.prototype.RayCast),box2d.b2ChainShape.prototype.RayCast.s_edgeShape=new box2d.b2EdgeShape,box2d.b2ChainShape.prototype.ComputeAABB=function(o,t,e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(e<this.m_count);var r=this.m_vertices[(e+1)%this.m_count];e=box2d.b2Mul_X_V2(t,this.m_vertices[e],box2d.b2ChainShape.prototype.ComputeAABB.s_v1),t=box2d.b2Mul_X_V2(t,r,box2d.b2ChainShape.prototype.ComputeAABB.s_v2),box2d.b2Min_V2_V2(e,t,o.lowerBound),box2d.b2Max_V2_V2(e,t,o.upperBound)},goog.exportProperty(box2d.b2ChainShape.prototype,"ComputeAABB",box2d.b2ChainShape.prototype.ComputeAABB),box2d.b2ChainShape.prototype.ComputeAABB.s_v1=new box2d.b2Vec2,goog.exportProperty(box2d.b2ChainShape.prototype.ComputeAABB,"s_v1",box2d.b2ChainShape.prototype.ComputeAABB.s_v1),box2d.b2ChainShape.prototype.ComputeAABB.s_v2=new box2d.b2Vec2,goog.exportProperty(box2d.b2ChainShape.prototype.ComputeAABB,"s_v2",box2d.b2ChainShape.prototype.ComputeAABB.s_v2),box2d.b2ChainShape.prototype.ComputeMass=function(o,t){o.mass=0,o.center.SetZero(),o.I=0},goog.exportProperty(box2d.b2ChainShape.prototype,"ComputeMass",box2d.b2ChainShape.prototype.ComputeMass),box2d.b2ChainShape.prototype.SetupDistanceProxy=function(o,t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=t&&t<this.m_count),o.m_buffer[0].Copy(this.m_vertices[t]),t+1<this.m_count?o.m_buffer[1].Copy(this.m_vertices[t+1]):o.m_buffer[1].Copy(this.m_vertices[0]),o.m_vertices=o.m_buffer,o.m_count=2,o.m_radius=this.m_radius},box2d.b2ChainShape.prototype.ComputeSubmergedArea=function(o,t,e,r){return r.SetZero(),0},goog.exportProperty(box2d.b2ChainShape.prototype,"ComputeSubmergedArea",box2d.b2ChainShape.prototype.ComputeSubmergedArea),box2d.b2ChainShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2ChainShape*/ var shape = new box2d.b2ChainShape();\n"),box2d.b2Log("    /*box2d.b2Vec2[]*/ var vs = box2d.b2Vec2.MakeArray(%d);\n",box2d.b2_maxPolygonVertices);for(var o=0;o<this.m_count;++o)box2d.b2Log("    vs[%d].Set(%.15f, %.15f);\n",o,this.m_vertices[o].x,this.m_vertices[o].y);box2d.b2Log("    shape.CreateChain(vs, %d);\n",this.m_count),box2d.b2Log("    shape.m_prevVertex.Set(%.15f, %.15f);\n",this.m_prevVertex.x,this.m_prevVertex.y),box2d.b2Log("    shape.m_nextVertex.Set(%.15f, %.15f);\n",this.m_nextVertex.x,this.m_nextVertex.y),box2d.b2Log("    shape.m_hasPrevVertex = %s;\n",this.m_hasPrevVertex?"true":"false"),box2d.b2Log("    shape.m_hasNextVertex = %s;\n",this.m_hasNextVertex?"true":"false")},goog.exportProperty(box2d.b2ChainShape.prototype,"Dump",box2d.b2ChainShape.prototype.Dump),box2d.b2PolygonShape=function(){box2d.b2Shape.call(this,box2d.b2ShapeType.e_polygonShape,box2d.b2_polygonRadius),this.m_centroid=new box2d.b2Vec2(0,0),this.m_vertices=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices),this.m_normals=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices)},goog.inherits(box2d.b2PolygonShape,box2d.b2Shape),goog.exportSymbol("box2d.b2PolygonShape",box2d.b2PolygonShape),box2d.b2PolygonShape.prototype.m_centroid=null,goog.exportProperty(box2d.b2PolygonShape.prototype,"m_centroid",box2d.b2PolygonShape.prototype.m_centroid),box2d.b2PolygonShape.prototype.m_vertices=null,goog.exportProperty(box2d.b2PolygonShape.prototype,"m_vertices",box2d.b2PolygonShape.prototype.m_vertices),box2d.b2PolygonShape.prototype.m_normals=null,goog.exportProperty(box2d.b2PolygonShape.prototype,"m_normals",box2d.b2PolygonShape.prototype.m_normals),box2d.b2PolygonShape.prototype.m_count=0,goog.exportProperty(box2d.b2PolygonShape.prototype,"m_count",box2d.b2PolygonShape.prototype.m_count),box2d.b2PolygonShape.prototype.Clone=function(){return(new box2d.b2PolygonShape).Copy(this)},goog.exportProperty(box2d.b2PolygonShape.prototype,"Clone",box2d.b2PolygonShape.prototype.Clone),box2d.b2PolygonShape.prototype.Copy=function(o){box2d.b2Shape.prototype.Copy.call(this,o),box2d.ENABLE_ASSERTS&&box2d.b2Assert(o instanceof box2d.b2PolygonShape),this.m_centroid.Copy(o.m_centroid),this.m_count=o.m_count;for(var t=0,e=this.m_count;t<e;++t)this.m_vertices[t].Copy(o.m_vertices[t]),this.m_normals[t].Copy(o.m_normals[t]);return this},goog.exportProperty(box2d.b2PolygonShape.prototype,"Copy",box2d.b2PolygonShape.prototype.Copy),box2d.b2PolygonShape.prototype.SetAsBox=function(o,t,e,r){if(this.m_count=4,this.m_vertices[0].Set(-o,-t),this.m_vertices[1].Set(o,-t),this.m_vertices[2].Set(o,t),this.m_vertices[3].Set(-o,t),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero(),e instanceof box2d.b2Vec2)for(r="number"==typeof r?r:0,this.m_centroid.Copy(e),(o=new box2d.b2Transform).SetPosition(e),o.SetRotationAngle(r),e=0,r=this.m_count;e<r;++e)box2d.b2Mul_X_V2(o,this.m_vertices[e],this.m_vertices[e]),box2d.b2Mul_R_V2(o.q,this.m_normals[e],this.m_normals[e]);return this},goog.exportProperty(box2d.b2PolygonShape.prototype,"SetAsBox",box2d.b2PolygonShape.prototype.SetAsBox),box2d.b2PolygonShape.prototype.Set=function(o,t,e){if(t="number"==typeof t?t:o.length,e="number"==typeof e?e:0,box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=t&&t<=box2d.b2_maxPolygonVertices),3>t)return this.SetAsBox(1,1);t=box2d.b2Min(t,box2d.b2_maxPolygonVertices);for(var r=box2d.b2PolygonShape.prototype.Set.s_ps,i=0,b=0;b<t;++b){for(var p=o[e+b],n=!0,a=0;a<i;++a)if(box2d.b2DistanceSquared(p,r[a])<.25*box2d.b2_linearSlop*box2d.b2_linearSlop){n=!1;break}n&&r[i++].Copy(p)}if(3>(t=i))return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),this.SetAsBox(1,1);for(o=0,p=r[0].x,b=1;b<t;++b)((a=r[b].x)>p||a===p&&r[b].y<r[o].y)&&(o=b,p=a);for(i=box2d.b2PolygonShape.prototype.Set.s_hull,e=0,b=o;;){for(i[e]=b,n=0,a=1;a<t;++a)if(n===b)n=a;else{var s=box2d.b2Sub_V2_V2(r[n],r[i[e]],box2d.b2PolygonShape.prototype.Set.s_r),d=(p=box2d.b2Sub_V2_V2(r[a],r[i[e]],box2d.b2PolygonShape.prototype.Set.s_v),box2d.b2Cross_V2_V2(s,p));0>d&&(n=a),0===d&&p.LengthSquared()>s.LengthSquared()&&(n=a)}if(++e,b=n,n===o)break}if(3>e)return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),this.SetAsBox(1,1);for(this.m_count=e,b=0;b<e;++b)this.m_vertices[b].Copy(r[i[b]]);for(b=0,t=e;b<t;++b)r=box2d.b2Sub_V2_V2(this.m_vertices[(b+1)%t],this.m_vertices[b],box2d.b2Vec2.s_t0),box2d.ENABLE_ASSERTS&&box2d.b2Assert(r.LengthSquared()>box2d.b2_epsilon_sq),box2d.b2Cross_V2_S(r,1,this.m_normals[b]).SelfNormalize();return box2d.b2PolygonShape.ComputeCentroid(this.m_vertices,e,this.m_centroid),this},goog.exportProperty(box2d.b2PolygonShape.prototype,"Set",box2d.b2PolygonShape.prototype.Set),box2d.b2PolygonShape.prototype.Set.s_ps=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices),box2d.b2PolygonShape.prototype.Set.s_hull=box2d.b2MakeNumberArray(box2d.b2_maxPolygonVertices),box2d.b2PolygonShape.prototype.Set.s_r=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.Set.s_v=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.GetChildCount=function(){return 1},goog.exportProperty(box2d.b2PolygonShape.prototype,"GetChildCount",box2d.b2PolygonShape.prototype.GetChildCount),box2d.b2PolygonShape.prototype.TestPoint=function(o,t){for(var e=box2d.b2MulT_X_V2(o,t,box2d.b2PolygonShape.prototype.TestPoint.s_pLocal),r=0,i=this.m_count;r<i;++r)if(0<box2d.b2Dot_V2_V2(this.m_normals[r],box2d.b2Sub_V2_V2(e,this.m_vertices[r],box2d.b2Vec2.s_t0)))return!1;return!0},goog.exportProperty(box2d.b2PolygonShape.prototype,"TestPoint",box2d.b2PolygonShape.prototype.TestPoint),box2d.b2PolygonShape.prototype.TestPoint.s_pLocal=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeDistance=function(o,t,e,r){t=box2d.b2MulT_X_V2(o,t,box2d.b2PolygonShape.prototype.ComputeDistance.s_pLocal);var i=-box2d.b2_maxFloat,b=box2d.b2PolygonShape.prototype.ComputeDistance.s_normalForMaxDistance.Copy(t);for(r=0;r<this.m_count;++r){(p=box2d.b2Dot_V2_V2(this.m_normals[r],box2d.b2Sub_V2_V2(t,this.m_vertices[r],box2d.b2Vec2.s_t0)))>i&&(i=p,b.Copy(this.m_normals[r]))}if(0<i){for(b=box2d.b2PolygonShape.prototype.ComputeDistance.s_minDistance.Copy(b),i*=i,r=0;r<this.m_count;++r){var p,n=(p=box2d.b2Sub_V2_V2(t,this.m_vertices[r],box2d.b2PolygonShape.prototype.ComputeDistance.s_distance)).LengthSquared();i>n&&(b.Copy(p),i=n)}return box2d.b2Mul_R_V2(o.q,b,e),e.Normalize(),Math.sqrt(i)}return box2d.b2Mul_R_V2(o.q,b,e),i},goog.exportProperty(box2d.b2PolygonShape.prototype,"ComputeDistance",box2d.b2PolygonShape.prototype.ComputeDistance),box2d.b2PolygonShape.prototype.ComputeDistance.s_pLocal=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeDistance.s_normalForMaxDistance=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeDistance.s_minDistance=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeDistance.s_distance=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.RayCast=function(o,t,e,r){r=box2d.b2MulT_X_V2(e,t.p1,box2d.b2PolygonShape.prototype.RayCast.s_p1);for(var i=box2d.b2MulT_X_V2(e,t.p2,box2d.b2PolygonShape.prototype.RayCast.s_p2),b=(i=box2d.b2Sub_V2_V2(i,r,box2d.b2PolygonShape.prototype.RayCast.s_d),0),p=t.maxFraction,n=-1,a=0,s=this.m_count;a<s;++a){var d=box2d.b2Dot_V2_V2(this.m_normals[a],box2d.b2Sub_V2_V2(this.m_vertices[a],r,box2d.b2Vec2.s_t0)),x=box2d.b2Dot_V2_V2(this.m_normals[a],i);if(0===x){if(0>d)return!1}else 0>x&&d<b*x?(b=d/x,n=a):0<x&&d<p*x&&(p=d/x);if(p<b)return!1}return box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=b&&b<=t.maxFraction),0<=n&&(o.fraction=b,box2d.b2Mul_R_V2(e.q,this.m_normals[n],o.normal),!0)},goog.exportProperty(box2d.b2PolygonShape.prototype,"RayCast",box2d.b2PolygonShape.prototype.RayCast),box2d.b2PolygonShape.prototype.RayCast.s_p1=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.RayCast.s_p2=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.RayCast.s_d=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeAABB=function(o,t,e){e=box2d.b2Mul_X_V2(t,this.m_vertices[0],o.lowerBound),o=o.upperBound.Copy(e);for(var r=0,i=this.m_count;r<i;++r){var b=box2d.b2Mul_X_V2(t,this.m_vertices[r],box2d.b2PolygonShape.prototype.ComputeAABB.s_v);box2d.b2Min_V2_V2(b,e,e),box2d.b2Max_V2_V2(b,o,o)}t=this.m_radius,e.SelfSubXY(t,t),o.SelfAddXY(t,t)},goog.exportProperty(box2d.b2PolygonShape.prototype,"ComputeAABB",box2d.b2PolygonShape.prototype.ComputeAABB),box2d.b2PolygonShape.prototype.ComputeAABB.s_v=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeMass=function(o,t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=this.m_count);for(var e=box2d.b2PolygonShape.prototype.ComputeMass.s_center.SetZero(),r=0,i=0,b=box2d.b2PolygonShape.prototype.ComputeMass.s_s.SetZero(),p=0,n=this.m_count;p<n;++p)b.SelfAdd(this.m_vertices[p]);b.SelfMul(1/this.m_count);for(p=0,n=this.m_count;p<n;++p){var a=box2d.b2Sub_V2_V2(this.m_vertices[p],b,box2d.b2PolygonShape.prototype.ComputeMass.s_e1),s=box2d.b2Sub_V2_V2(this.m_vertices[(p+1)%n],b,box2d.b2PolygonShape.prototype.ComputeMass.s_e2),d=box2d.b2Cross_V2_V2(a,s);r=r+(x=.5*d);e.SelfAdd(box2d.b2Mul_S_V2(x*(1/3),box2d.b2Add_V2_V2(a,s,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t1));var x=a.x,l=(a=a.y,s.x);i=i+1/3*.25*d*(x*x+l*x+l*l+(a*a+(s=s.y)*a+s*s))}o.mass=t*r,box2d.ENABLE_ASSERTS&&box2d.b2Assert(r>box2d.b2_epsilon),e.SelfMul(1/r),box2d.b2Add_V2_V2(e,b,o.center),o.I=t*i,o.I+=o.mass*(box2d.b2Dot_V2_V2(o.center,o.center)-box2d.b2Dot_V2_V2(e,e))},goog.exportProperty(box2d.b2PolygonShape.prototype,"ComputeMass",box2d.b2PolygonShape.prototype.ComputeMass),box2d.b2PolygonShape.prototype.ComputeMass.s_center=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeMass.s_s=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeMass.s_e1=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeMass.s_e2=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.Validate=function(){for(var o=0;o<this.m_count;++o)for(var t=o,e=(o+1)%this.m_count,r=this.m_vertices[t],i=box2d.b2Sub_V2_V2(this.m_vertices[e],r,box2d.b2PolygonShape.prototype.Validate.s_e),b=0;b<this.m_count;++b)if(b!==t&&b!==e){var p=box2d.b2Sub_V2_V2(this.m_vertices[b],r,box2d.b2PolygonShape.prototype.Validate.s_v);if(0>box2d.b2Cross_V2_V2(i,p))return!1}return!0},goog.exportProperty(box2d.b2PolygonShape.prototype,"Validate",box2d.b2PolygonShape.prototype.Validate),box2d.b2PolygonShape.prototype.Validate.s_e=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.Validate.s_v=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.SetupDistanceProxy=function(o,t){o.m_vertices=this.m_vertices,o.m_count=this.m_count,o.m_radius=this.m_radius},box2d.b2PolygonShape.prototype.ComputeSubmergedArea=function(o,t,e,r){var i=box2d.b2MulT_R_V2(e.q,o,box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_normalL),b=t-box2d.b2Dot_V2_V2(o,e.p),p=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_depths,n=0,a=-1;t=-1;var s=!1;o=0;for(var d=this.m_count;o<d;++o){p[o]=box2d.b2Dot_V2_V2(i,this.m_vertices[o])-b;var x=p[o]<-box2d.b2_epsilon;0<o&&(x?s||(a=o-1,n++):s&&(t=o-1,n++)),s=x}switch(n){case 0:return s?(o=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_md,this.ComputeMass(o,1),box2d.b2Mul_X_V2(e,o.center,r),o.mass):0;case 1:-1===a?a=this.m_count-1:t=this.m_count-1}for(o=(a+1)%this.m_count,i=(t+1)%this.m_count,b=(0-p[a])/(p[o]-p[a]),p=(0-p[t])/(p[i]-p[t]),a=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_intoVec.Set(this.m_vertices[a].x*(1-b)+this.m_vertices[o].x*b,this.m_vertices[a].y*(1-b)+this.m_vertices[o].y*b),t=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_outoVec.Set(this.m_vertices[t].x*(1-p)+this.m_vertices[i].x*p,this.m_vertices[t].y*(1-p)+this.m_vertices[i].y*p),p=0,b=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_center.SetZero(),n=this.m_vertices[o],s=null;o!==i;)s=(o=(o+1)%this.m_count)===i?t:this.m_vertices[o],p+=d=.5*((n.x-a.x)*(s.y-a.y)-(n.y-a.y)*(s.x-a.x)),b.x+=d*(a.x+n.x+s.x)/3,b.y+=d*(a.y+n.y+s.y)/3,n=s;return b.SelfMul(1/p),box2d.b2Mul_X_V2(e,b,r),p},goog.exportProperty(box2d.b2PolygonShape.prototype,"ComputeSubmergedArea",box2d.b2PolygonShape.prototype.ComputeSubmergedArea),box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_normalL=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_depths=box2d.b2MakeNumberArray(box2d.b2_maxPolygonVertices),box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_md=new box2d.b2MassData,box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_intoVec=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_outoVec=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_center=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2PolygonShape*/ var shape = new box2d.b2PolygonShape();\n"),box2d.b2Log("    /*box2d.b2Vec2[]*/ var vs = box2d.b2Vec2.MakeArray(%d);\n",box2d.b2_maxPolygonVertices);for(var o=0;o<this.m_count;++o)box2d.b2Log("    vs[%d].Set(%.15f, %.15f);\n",o,this.m_vertices[o].x,this.m_vertices[o].y);box2d.b2Log("    shape.Set(vs, %d);\n",this.m_count)},goog.exportProperty(box2d.b2PolygonShape.prototype,"Dump",box2d.b2PolygonShape.prototype.Dump),box2d.b2PolygonShape.ComputeCentroid=function(o,t,e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=t),e.SetZero();for(var r=0,i=box2d.b2PolygonShape.ComputeCentroid.s_pRef.SetZero(),b=0;b<t;++b){var p=i,n=o[b],a=o[(b+1)%t],s=box2d.b2Sub_V2_V2(n,p,box2d.b2PolygonShape.ComputeCentroid.s_e1),d=box2d.b2Sub_V2_V2(a,p,box2d.b2PolygonShape.ComputeCentroid.s_e2);r=r+(s=.5*box2d.b2Cross_V2_V2(s,d));e.x+=s*(1/3)*(p.x+n.x+a.x),e.y+=s*(1/3)*(p.y+n.y+a.y)}return box2d.ENABLE_ASSERTS&&box2d.b2Assert(r>box2d.b2_epsilon),e.SelfMul(1/r),e},goog.exportProperty(box2d.b2PolygonShape,"ComputeCentroid",box2d.b2PolygonShape.ComputeCentroid),box2d.b2PolygonShape.ComputeCentroid.s_pRef=new box2d.b2Vec2,box2d.b2PolygonShape.ComputeCentroid.s_e1=new box2d.b2Vec2,box2d.b2PolygonShape.ComputeCentroid.s_e2=new box2d.b2Vec2,box2d.b2Timer=function(){this.m_start=(new Date).getTime()},goog.exportSymbol("box2d.b2Timer",box2d.b2Timer),box2d.b2Timer.prototype.m_start=0,goog.exportProperty(box2d.b2Timer.prototype,"m_start",box2d.b2Timer.prototype.m_start),box2d.b2Timer.prototype.Reset=function(){return this.m_start=(new Date).getTime(),this},goog.exportProperty(box2d.b2Timer.prototype,"Reset",box2d.b2Timer.prototype.Reset),box2d.b2Timer.prototype.GetMilliseconds=function(){return(new Date).getTime()-this.m_start},goog.exportProperty(box2d.b2Timer.prototype,"GetMilliseconds",box2d.b2Timer.prototype.GetMilliseconds),box2d.b2Counter=function(){},goog.exportSymbol("box2d.b2Counter",box2d.b2Counter),box2d.b2Counter.prototype.m_count=0,goog.exportProperty(box2d.b2Counter.prototype,"m_count",box2d.b2Counter.prototype.m_count),box2d.b2Counter.prototype.m_min_count=0,goog.exportProperty(box2d.b2Counter.prototype,"m_min_count",box2d.b2Counter.prototype.m_min_count),box2d.b2Counter.prototype.m_max_count=0,goog.exportProperty(box2d.b2Counter.prototype,"m_max_count",box2d.b2Counter.prototype.m_max_count),box2d.b2Counter.prototype.GetCount=function(){return this.m_count},goog.exportProperty(box2d.b2Counter.prototype,"GetCount",box2d.b2Counter.prototype.GetCount),box2d.b2Counter.prototype.GetMinCount=function(){return this.m_min_count},goog.exportProperty(box2d.b2Counter.prototype,"GetMinCount",box2d.b2Counter.prototype.GetMinCount),box2d.b2Counter.prototype.GetMaxCount=function(){return this.m_max_count},goog.exportProperty(box2d.b2Counter.prototype,"GetMaxCount",box2d.b2Counter.prototype.GetMaxCount),box2d.b2Counter.prototype.ResetCount=function(){var o=this.m_count;return this.m_count=0,o},goog.exportProperty(box2d.b2Counter.prototype,"ResetCount",box2d.b2Counter.prototype.ResetCount),box2d.b2Counter.prototype.ResetMinCount=function(){this.m_min_count=0},goog.exportProperty(box2d.b2Counter.prototype,"ResetMinCount",box2d.b2Counter.prototype.ResetMinCount),box2d.b2Counter.prototype.ResetMaxCount=function(){this.m_max_count=0},goog.exportProperty(box2d.b2Counter.prototype,"ResetMaxCount",box2d.b2Counter.prototype.ResetMaxCount),box2d.b2Counter.prototype.Increment=function(){this.m_count++,this.m_max_count<this.m_count&&(this.m_max_count=this.m_count)},goog.exportProperty(box2d.b2Counter.prototype,"Increment",box2d.b2Counter.prototype.Increment),box2d.b2Counter.prototype.Decrement=function(){this.m_count--,this.m_min_count>this.m_count&&(this.m_min_count=this.m_count)},goog.exportProperty(box2d.b2Counter.prototype,"Decrement",box2d.b2Counter.prototype.Decrement),box2d.b2_toiTime=0,goog.exportSymbol("box2d.b2_toiTime",box2d.b2_toiTime),box2d.b2_toiMaxTime=0,goog.exportSymbol("box2d.b2_toiMaxTime",box2d.b2_toiMaxTime),box2d.b2_toiCalls=0,goog.exportSymbol("box2d.b2_toiCalls",box2d.b2_toiCalls),box2d.b2_toiIters=0,goog.exportSymbol("box2d.b2_toiIters",box2d.b2_toiIters),box2d.b2_toiMaxIters=0,goog.exportSymbol("box2d.b2_toiMaxIters",box2d.b2_toiMaxIters),box2d.b2_toiRootIters=0,goog.exportSymbol("box2d.b2_toiRootIters",box2d.b2_toiRootIters),box2d.b2_toiMaxRootIters=0,goog.exportSymbol("box2d.b2_toiMaxRootIters",box2d.b2_toiMaxRootIters),box2d.b2TOIInput=function(){this.proxyA=new box2d.b2DistanceProxy,this.proxyB=new box2d.b2DistanceProxy,this.sweepA=new box2d.b2Sweep,this.sweepB=new box2d.b2Sweep},goog.exportSymbol("box2d.b2TOIInput",box2d.b2TOIInput),box2d.b2TOIInput.prototype.proxyA=null,goog.exportProperty(box2d.b2TOIInput.prototype,"proxyA",box2d.b2TOIInput.prototype.proxyA),box2d.b2TOIInput.prototype.proxyB=null,goog.exportProperty(box2d.b2TOIInput.prototype,"proxyB",box2d.b2TOIInput.prototype.proxyB),box2d.b2TOIInput.prototype.sweepA=null,goog.exportProperty(box2d.b2TOIInput.prototype,"sweepA",box2d.b2TOIInput.prototype.sweepA),box2d.b2TOIInput.prototype.sweepB=null,goog.exportProperty(box2d.b2TOIInput.prototype,"sweepB",box2d.b2TOIInput.prototype.sweepB),box2d.b2TOIInput.prototype.tMax=0,goog.exportProperty(box2d.b2TOIInput.prototype,"tMax",box2d.b2TOIInput.prototype.tMax),box2d.b2TOIOutputState={e_unknown:0,e_failed:1,e_overlapped:2,e_touching:3,e_separated:4},goog.exportSymbol("box2d.b2TOIOutputState",box2d.b2TOIOutputState),goog.exportProperty(box2d.b2TOIOutputState,"e_unknown",box2d.b2TOIOutputState.e_unknown),goog.exportProperty(box2d.b2TOIOutputState,"e_failed",box2d.b2TOIOutputState.e_failed),goog.exportProperty(box2d.b2TOIOutputState,"e_overlapped",box2d.b2TOIOutputState.e_overlapped),goog.exportProperty(box2d.b2TOIOutputState,"e_touching",box2d.b2TOIOutputState.e_touching),goog.exportProperty(box2d.b2TOIOutputState,"e_separated",box2d.b2TOIOutputState.e_separated),box2d.b2TOIOutput=function(){},goog.exportSymbol("box2d.b2TOIOutput",box2d.b2TOIOutput),box2d.b2TOIOutput.prototype.state=box2d.b2TOIOutputState.e_unknown;goog.exportProperty(box2d.b2TOIOutput.prototype,"state",box2d.b2TOIOutput.prototype.state),box2d.b2TOIOutput.prototype.t=0,goog.exportProperty(box2d.b2TOIOutput.prototype,"t",box2d.b2TOIOutput.prototype.t),box2d.b2SeparationFunctionType={e_unknown:-1,e_points:0,e_faceA:1,e_faceB:2},goog.exportSymbol("box2d.b2SeparationFunctionType",box2d.b2SeparationFunctionType),goog.exportProperty(box2d.b2SeparationFunctionType,"e_unknown",box2d.b2SeparationFunctionType.e_unknown),goog.exportProperty(box2d.b2SeparationFunctionType,"e_points",box2d.b2SeparationFunctionType.e_points),goog.exportProperty(box2d.b2SeparationFunctionType,"e_faceA",box2d.b2SeparationFunctionType.e_faceA),goog.exportProperty(box2d.b2SeparationFunctionType,"e_faceB",box2d.b2SeparationFunctionType.e_faceB),box2d.b2SeparationFunction=function(){this.m_sweepA=new box2d.b2Sweep,this.m_sweepB=new box2d.b2Sweep,this.m_localPoint=new box2d.b2Vec2,this.m_axis=new box2d.b2Vec2},goog.exportSymbol("box2d.b2SeparationFunction",box2d.b2SeparationFunction),box2d.b2SeparationFunction.prototype.m_proxyA=null,goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_proxyA",box2d.b2SeparationFunction.prototype.m_proxyA),box2d.b2SeparationFunction.prototype.m_proxyB=null,goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_proxyB",box2d.b2SeparationFunction.prototype.m_proxyB),box2d.b2SeparationFunction.prototype.m_sweepA=null,goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_sweepA",box2d.b2SeparationFunction.prototype.m_sweepA),box2d.b2SeparationFunction.prototype.m_sweepB=null,goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_sweepB",box2d.b2SeparationFunction.prototype.m_sweepB),box2d.b2SeparationFunction.prototype.m_type=box2d.b2SeparationFunctionType.e_unknown,goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_type",box2d.b2SeparationFunction.prototype.m_type),box2d.b2SeparationFunction.prototype.m_localPoint=null,goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_localPoint",box2d.b2SeparationFunction.prototype.m_localPoint),box2d.b2SeparationFunction.prototype.m_axis=null,goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_axis",box2d.b2SeparationFunction.prototype.m_axis),box2d.b2SeparationFunction.prototype.Initialize=function(o,t,e,r,i,b){return this.m_proxyA=t,this.m_proxyB=r,t=o.count,box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<t&&3>t),this.m_sweepA.Copy(e),this.m_sweepB.Copy(i),e=box2d.b2TimeOfImpact.s_xfA,i=box2d.b2TimeOfImpact.s_xfB,this.m_sweepA.GetTransform(e,b),this.m_sweepB.GetTransform(i,b),1===t?(this.m_type=box2d.b2SeparationFunctionType.e_points,t=this.m_proxyA.GetVertex(o.indexA[0]),o=this.m_proxyB.GetVertex(o.indexB[0]),e=box2d.b2Mul_X_V2(e,t,box2d.b2TimeOfImpact.s_pointA),i=box2d.b2Mul_X_V2(i,o,box2d.b2TimeOfImpact.s_pointB),box2d.b2Sub_V2_V2(i,e,this.m_axis),o=this.m_axis.Normalize(),this.m_localPoint.SetZero()):(o.indexA[0]===o.indexA[1]?(this.m_type=box2d.b2SeparationFunctionType.e_faceB,t=this.m_proxyB.GetVertex(o.indexB[0]),r=this.m_proxyB.GetVertex(o.indexB[1]),box2d.b2Cross_V2_S(box2d.b2Sub_V2_V2(r,t,box2d.b2Vec2.s_t0),1,this.m_axis).SelfNormalize(),b=box2d.b2Mul_R_V2(i.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),box2d.b2Mid_V2_V2(t,r,this.m_localPoint),i=box2d.b2Mul_X_V2(i,this.m_localPoint,box2d.b2TimeOfImpact.s_pointB),t=this.m_proxyA.GetVertex(o.indexA[0]),e=box2d.b2Mul_X_V2(e,t,box2d.b2TimeOfImpact.s_pointA),o=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(e,i,box2d.b2Vec2.s_t0),b)):(this.m_type=box2d.b2SeparationFunctionType.e_faceA,t=this.m_proxyA.GetVertex(o.indexA[0]),r=this.m_proxyA.GetVertex(o.indexA[1]),box2d.b2Cross_V2_S(box2d.b2Sub_V2_V2(r,t,box2d.b2Vec2.s_t0),1,this.m_axis).SelfNormalize(),b=box2d.b2Mul_R_V2(e.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),box2d.b2Mid_V2_V2(t,r,this.m_localPoint),e=box2d.b2Mul_X_V2(e,this.m_localPoint,box2d.b2TimeOfImpact.s_pointA),o=this.m_proxyB.GetVertex(o.indexB[0]),i=box2d.b2Mul_X_V2(i,o,box2d.b2TimeOfImpact.s_pointB),o=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(i,e,box2d.b2Vec2.s_t0),b)),0>o&&(this.m_axis.SelfNeg(),o=-o)),o},goog.exportProperty(box2d.b2SeparationFunction.prototype,"Initialize",box2d.b2SeparationFunction.prototype.Initialize),box2d.b2SeparationFunction.prototype.FindMinSeparation=function(o,t,e){var r=box2d.b2TimeOfImpact.s_xfA,i=box2d.b2TimeOfImpact.s_xfB;switch(this.m_sweepA.GetTransform(r,e),this.m_sweepB.GetTransform(i,e),this.m_type){case box2d.b2SeparationFunctionType.e_points:var b=box2d.b2MulT_R_V2(r.q,this.m_axis,box2d.b2TimeOfImpact.s_axisA),p=box2d.b2MulT_R_V2(i.q,box2d.b2Vec2.s_t0.Copy(this.m_axis).SelfNeg(),box2d.b2TimeOfImpact.s_axisB);return o[0]=this.m_proxyA.GetSupport(b),t[0]=this.m_proxyB.GetSupport(p),o=this.m_proxyA.GetVertex(o[0]),t=this.m_proxyB.GetVertex(t[0]),r=box2d.b2Mul_X_V2(r,o,box2d.b2TimeOfImpact.s_pointA),i=box2d.b2Mul_X_V2(i,t,box2d.b2TimeOfImpact.s_pointB),box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(i,r,box2d.b2Vec2.s_t0),this.m_axis);case box2d.b2SeparationFunctionType.e_faceA:return e=box2d.b2Mul_R_V2(r.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),r=box2d.b2Mul_X_V2(r,this.m_localPoint,box2d.b2TimeOfImpact.s_pointA),p=box2d.b2MulT_R_V2(i.q,box2d.b2Vec2.s_t0.Copy(e).SelfNeg(),box2d.b2TimeOfImpact.s_axisB),o[0]=-1,t[0]=this.m_proxyB.GetSupport(p),t=this.m_proxyB.GetVertex(t[0]),i=box2d.b2Mul_X_V2(i,t,box2d.b2TimeOfImpact.s_pointB),box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(i,r,box2d.b2Vec2.s_t0),e);case box2d.b2SeparationFunctionType.e_faceB:return e=box2d.b2Mul_R_V2(i.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),i=box2d.b2Mul_X_V2(i,this.m_localPoint,box2d.b2TimeOfImpact.s_pointB),b=box2d.b2MulT_R_V2(r.q,box2d.b2Vec2.s_t0.Copy(e).SelfNeg(),box2d.b2TimeOfImpact.s_axisA),t[0]=-1,o[0]=this.m_proxyA.GetSupport(b),o=this.m_proxyA.GetVertex(o[0]),r=box2d.b2Mul_X_V2(r,o,box2d.b2TimeOfImpact.s_pointA),box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(r,i,box2d.b2Vec2.s_t0),e);default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),o[0]=-1,t[0]=-1,0}},goog.exportProperty(box2d.b2SeparationFunction.prototype,"FindMinSeparation",box2d.b2SeparationFunction.prototype.FindMinSeparation),box2d.b2SeparationFunction.prototype.Evaluate=function(o,t,e){var r=box2d.b2TimeOfImpact.s_xfA,i=box2d.b2TimeOfImpact.s_xfB;switch(this.m_sweepA.GetTransform(r,e),this.m_sweepB.GetTransform(i,e),this.m_type){case box2d.b2SeparationFunctionType.e_points:return o=this.m_proxyA.GetVertex(o),t=this.m_proxyB.GetVertex(t),r=box2d.b2Mul_X_V2(r,o,box2d.b2TimeOfImpact.s_pointA),i=box2d.b2Mul_X_V2(i,t,box2d.b2TimeOfImpact.s_pointB),box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(i,r,box2d.b2Vec2.s_t0),this.m_axis);case box2d.b2SeparationFunctionType.e_faceA:return e=box2d.b2Mul_R_V2(r.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),r=box2d.b2Mul_X_V2(r,this.m_localPoint,box2d.b2TimeOfImpact.s_pointA),t=this.m_proxyB.GetVertex(t),i=box2d.b2Mul_X_V2(i,t,box2d.b2TimeOfImpact.s_pointB),box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(i,r,box2d.b2Vec2.s_t0),e);case box2d.b2SeparationFunctionType.e_faceB:return e=box2d.b2Mul_R_V2(i.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),i=box2d.b2Mul_X_V2(i,this.m_localPoint,box2d.b2TimeOfImpact.s_pointB),o=this.m_proxyA.GetVertex(o),r=box2d.b2Mul_X_V2(r,o,box2d.b2TimeOfImpact.s_pointA),box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(r,i,box2d.b2Vec2.s_t0),e);default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),0}},goog.exportProperty(box2d.b2SeparationFunction.prototype,"Evaluate",box2d.b2SeparationFunction.prototype.Evaluate),box2d.b2TimeOfImpact=function(o,t){var e=box2d.b2TimeOfImpact.s_timer.Reset();++box2d.b2_toiCalls,o.state=box2d.b2TOIOutputState.e_unknown,o.t=t.tMax;var r=t.proxyA,i=t.proxyB,b=box2d.b2TimeOfImpact.s_sweepA.Copy(t.sweepA),p=box2d.b2TimeOfImpact.s_sweepB.Copy(t.sweepB);b.Normalize(),p.Normalize();var n=t.tMax,a=box2d.b2Max(box2d.b2_linearSlop,r.m_radius+i.m_radius-3*box2d.b2_linearSlop),s=.25*box2d.b2_linearSlop;box2d.ENABLE_ASSERTS&&box2d.b2Assert(a>s);var d=0,x=0,l=box2d.b2TimeOfImpact.s_cache;l.count=0;var y=box2d.b2TimeOfImpact.s_distanceInput;for(y.proxyA=t.proxyA,y.proxyB=t.proxyB,y.useRadii=!1;;){var c=box2d.b2TimeOfImpact.s_xfA,m=box2d.b2TimeOfImpact.s_xfB;if(b.GetTransform(c,d),p.GetTransform(m,d),y.transformA.Copy(c),y.transformB.Copy(m),c=box2d.b2TimeOfImpact.s_distanceOutput,box2d.b2ShapeDistance(c,l,y),0>=c.distance){o.state=box2d.b2TOIOutputState.e_overlapped,o.t=0;break}if(c.distance<a+s){o.state=box2d.b2TOIOutputState.e_touching,o.t=d;break}(c=box2d.b2TimeOfImpact.s_fcn).Initialize(l,r,b,i,p,d);m=!1;for(var _=n,u=0;;){var h=box2d.b2TimeOfImpact.s_indexA,g=box2d.b2TimeOfImpact.s_indexB,f=c.FindMinSeparation(h,g,_);if(f>a+s){o.state=box2d.b2TOIOutputState.e_separated,o.t=n,m=!0;break}if(f>a-s){d=_;break}var S=c.Evaluate(h[0],g[0],d);if(S<a-s){o.state=box2d.b2TOIOutputState.e_failed,o.t=d,m=!0;break}if(S<=a+s){o.state=box2d.b2TOIOutputState.e_touching,o.t=d,m=!0;break}for(var P=0,C=d,A=_;;){var B=1&P?C+(a-S)*(A-C)/(f-S):.5*(C+A);++P,++box2d.b2_toiRootIters;var v=c.Evaluate(h[0],g[0],B);if(box2d.b2Abs(v-a)<s){_=B;break}if(v>a?(C=B,S=v):(A=B,f=v),50===P)break}if(box2d.b2_toiMaxRootIters=box2d.b2Max(box2d.b2_toiMaxRootIters,P),++u===box2d.b2_maxPolygonVertices)break}if(++x,++box2d.b2_toiIters,m)break;if(20===x){o.state=box2d.b2TOIOutputState.e_failed,o.t=d;break}}box2d.b2_toiMaxIters=box2d.b2Max(box2d.b2_toiMaxIters,x),e=e.GetMilliseconds(),box2d.b2_toiMaxTime=box2d.b2Max(box2d.b2_toiMaxTime,e),box2d.b2_toiTime+=e},goog.exportSymbol("box2d.b2TimeOfImpact",box2d.b2TimeOfImpact),box2d.b2TimeOfImpact.s_timer=new box2d.b2Timer,box2d.b2TimeOfImpact.s_cache=new box2d.b2SimplexCache,box2d.b2TimeOfImpact.s_distanceInput=new box2d.b2DistanceInput,box2d.b2TimeOfImpact.s_distanceOutput=new box2d.b2DistanceOutput,box2d.b2TimeOfImpact.s_xfA=new box2d.b2Transform,box2d.b2TimeOfImpact.s_xfB=new box2d.b2Transform,box2d.b2TimeOfImpact.s_indexA=box2d.b2MakeNumberArray(1),box2d.b2TimeOfImpact.s_indexB=box2d.b2MakeNumberArray(1),box2d.b2TimeOfImpact.s_fcn=new box2d.b2SeparationFunction,box2d.b2TimeOfImpact.s_sweepA=new box2d.b2Sweep,box2d.b2TimeOfImpact.s_sweepB=new box2d.b2Sweep,box2d.b2TimeOfImpact.s_pointA=new box2d.b2Vec2,box2d.b2TimeOfImpact.s_pointB=new box2d.b2Vec2,box2d.b2TimeOfImpact.s_normal=new box2d.b2Vec2,box2d.b2TimeOfImpact.s_axisA=new box2d.b2Vec2,box2d.b2TimeOfImpact.s_axisB=new box2d.b2Vec2,box2d.b2Filter=function(){},goog.exportSymbol("box2d.b2Filter",box2d.b2Filter),box2d.b2Filter.prototype.categoryBits=1,goog.exportProperty(box2d.b2Filter.prototype,"categoryBits",box2d.b2Filter.prototype.categoryBits),box2d.b2Filter.prototype.maskBits=65535,goog.exportProperty(box2d.b2Filter.prototype,"maskBits",box2d.b2Filter.prototype.maskBits),box2d.b2Filter.prototype.groupIndex=0,goog.exportProperty(box2d.b2Filter.prototype,"groupIndex",box2d.b2Filter.prototype.groupIndex),box2d.b2Filter.prototype.Clone=function(){return(new box2d.b2Filter).Copy(this)},goog.exportProperty(box2d.b2Filter.prototype,"Clone",box2d.b2Filter.prototype.Clone),box2d.b2Filter.prototype.Copy=function(o){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(this!==o),this.categoryBits=o.categoryBits,this.maskBits=o.maskBits,this.groupIndex=o.groupIndex,this},goog.exportProperty(box2d.b2Filter.prototype,"Copy",box2d.b2Filter.prototype.Copy),box2d.b2FixtureDef=function(){this.filter=new box2d.b2Filter},goog.exportSymbol("box2d.b2FixtureDef",box2d.b2FixtureDef),box2d.b2FixtureDef.prototype.shape=null,goog.exportProperty(box2d.b2FixtureDef.prototype,"shape",box2d.b2FixtureDef.prototype.shape),box2d.b2FixtureDef.prototype.userData=null,goog.exportProperty(box2d.b2FixtureDef.prototype,"userData",box2d.b2FixtureDef.prototype.userData),box2d.b2FixtureDef.prototype.friction=.2,goog.exportProperty(box2d.b2FixtureDef.prototype,"friction",box2d.b2FixtureDef.prototype.friction),box2d.b2FixtureDef.prototype.restitution=0,goog.exportProperty(box2d.b2FixtureDef.prototype,"restitution",box2d.b2FixtureDef.prototype.restitution),box2d.b2FixtureDef.prototype.density=0,goog.exportProperty(box2d.b2FixtureDef.prototype,"density",box2d.b2FixtureDef.prototype.density),box2d.b2FixtureDef.prototype.isSensor=!1,goog.exportProperty(box2d.b2FixtureDef.prototype,"isSensor",box2d.b2FixtureDef.prototype.isSensor),box2d.b2FixtureDef.prototype.filter=null,goog.exportProperty(box2d.b2FixtureDef.prototype,"filter",box2d.b2FixtureDef.prototype.filter),box2d.b2FixtureProxy=function(){this.aabb=new box2d.b2AABB},goog.exportSymbol("box2d.b2FixtureProxy",box2d.b2FixtureProxy),box2d.b2FixtureProxy.prototype.aabb=null,goog.exportProperty(box2d.b2FixtureProxy.prototype,"aabb",box2d.b2FixtureProxy.prototype.aabb),box2d.b2FixtureProxy.prototype.fixture=null,goog.exportProperty(box2d.b2FixtureProxy.prototype,"fixture",box2d.b2FixtureProxy.prototype.fixture),box2d.b2FixtureProxy.prototype.childIndex=0,goog.exportProperty(box2d.b2FixtureProxy.prototype,"childIndex",box2d.b2FixtureProxy.prototype.childIndex),box2d.b2FixtureProxy.prototype.proxy=null,goog.exportProperty(box2d.b2FixtureProxy.prototype,"proxy",box2d.b2FixtureProxy.prototype.proxy),box2d.b2FixtureProxy.MakeArray=function(o){return box2d.b2MakeArray(o,function(o){return new box2d.b2FixtureProxy})},goog.exportProperty(box2d.b2FixtureProxy,"MakeArray",box2d.b2FixtureProxy.MakeArray),box2d.b2Fixture=function(){this.m_proxyCount=0,this.m_filter=new box2d.b2Filter},goog.exportSymbol("box2d.b2Fixture",box2d.b2Fixture),box2d.b2Fixture.prototype.m_density=0,goog.exportProperty(box2d.b2Fixture.prototype,"m_density",box2d.b2Fixture.prototype.m_density),box2d.b2Fixture.prototype.m_next=null,goog.exportProperty(box2d.b2Fixture.prototype,"m_next",box2d.b2Fixture.prototype.m_next),box2d.b2Fixture.prototype.m_body=null,goog.exportProperty(box2d.b2Fixture.prototype,"m_body",box2d.b2Fixture.prototype.m_body),box2d.b2Fixture.prototype.m_shape=null,goog.exportProperty(box2d.b2Fixture.prototype,"m_shape",box2d.b2Fixture.prototype.m_shape),box2d.b2Fixture.prototype.m_friction=0,goog.exportProperty(box2d.b2Fixture.prototype,"m_friction",box2d.b2Fixture.prototype.m_friction),box2d.b2Fixture.prototype.m_restitution=0,goog.exportProperty(box2d.b2Fixture.prototype,"m_restitution",box2d.b2Fixture.prototype.m_restitution),box2d.b2Fixture.prototype.m_proxies=null,goog.exportProperty(box2d.b2Fixture.prototype,"m_proxies",box2d.b2Fixture.prototype.m_proxies),box2d.b2Fixture.prototype.m_proxyCount=0,goog.exportProperty(box2d.b2Fixture.prototype,"m_proxyCount",box2d.b2Fixture.prototype.m_proxyCount),box2d.b2Fixture.prototype.m_filter=null,goog.exportProperty(box2d.b2Fixture.prototype,"m_filter",box2d.b2Fixture.prototype.m_filter),box2d.b2Fixture.prototype.m_isSensor=!1,goog.exportProperty(box2d.b2Fixture.prototype,"m_isSensor",box2d.b2Fixture.prototype.m_isSensor),box2d.b2Fixture.prototype.m_userData=null,goog.exportProperty(box2d.b2Fixture.prototype,"m_userData",box2d.b2Fixture.prototype.m_userData),box2d.b2Fixture.prototype.GetType=function(){return this.m_shape.GetType()},goog.exportProperty(box2d.b2Fixture.prototype,"GetType",box2d.b2Fixture.prototype.GetType),box2d.b2Fixture.prototype.GetShape=function(){return this.m_shape},goog.exportProperty(box2d.b2Fixture.prototype,"GetShape",box2d.b2Fixture.prototype.GetShape),box2d.b2Fixture.prototype.IsSensor=function(){return this.m_isSensor},goog.exportProperty(box2d.b2Fixture.prototype,"IsSensor",box2d.b2Fixture.prototype.IsSensor),box2d.b2Fixture.prototype.GetFilterData=function(o){return(o=o||new box2d.b2Filter).Copy(this.m_filter)},goog.exportProperty(box2d.b2Fixture.prototype,"GetFilterData",box2d.b2Fixture.prototype.GetFilterData),box2d.b2Fixture.prototype.GetUserData=function(){return this.m_userData},goog.exportProperty(box2d.b2Fixture.prototype,"GetUserData",box2d.b2Fixture.prototype.GetUserData),box2d.b2Fixture.prototype.SetUserData=function(o){this.m_userData=o},goog.exportProperty(box2d.b2Fixture.prototype,"SetUserData",box2d.b2Fixture.prototype.SetUserData),box2d.b2Fixture.prototype.GetBody=function(){return this.m_body},goog.exportProperty(box2d.b2Fixture.prototype,"GetBody",box2d.b2Fixture.prototype.GetBody),box2d.b2Fixture.prototype.GetNext=function(){return this.m_next},goog.exportProperty(box2d.b2Fixture.prototype,"GetNext",box2d.b2Fixture.prototype.GetNext),box2d.b2Fixture.prototype.SetDensity=function(o){this.m_density=o},goog.exportProperty(box2d.b2Fixture.prototype,"SetDensity",box2d.b2Fixture.prototype.SetDensity),box2d.b2Fixture.prototype.GetDensity=function(){return this.m_density},goog.exportProperty(box2d.b2Fixture.prototype,"GetDensity",box2d.b2Fixture.prototype.GetDensity),box2d.b2Fixture.prototype.GetFriction=function(){return this.m_friction},goog.exportProperty(box2d.b2Fixture.prototype,"GetFriction",box2d.b2Fixture.prototype.GetFriction),box2d.b2Fixture.prototype.SetFriction=function(o){this.m_friction=o},goog.exportProperty(box2d.b2Fixture.prototype,"SetFriction",box2d.b2Fixture.prototype.SetFriction),box2d.b2Fixture.prototype.GetRestitution=function(){return this.m_restitution},goog.exportProperty(box2d.b2Fixture.prototype,"GetRestitution",box2d.b2Fixture.prototype.GetRestitution),box2d.b2Fixture.prototype.SetRestitution=function(o){this.m_restitution=o},goog.exportProperty(box2d.b2Fixture.prototype,"SetRestitution",box2d.b2Fixture.prototype.SetRestitution),box2d.b2Fixture.prototype.TestPoint=function(o){return this.m_shape.TestPoint(this.m_body.GetTransform(),o)},goog.exportProperty(box2d.b2Fixture.prototype,"TestPoint",box2d.b2Fixture.prototype.TestPoint),box2d.b2Fixture.prototype.ComputeDistance=function(o,t,e){return this.m_shape.ComputeDistance(this.m_body.GetTransform(),o,t,e)},goog.exportProperty(box2d.b2Fixture.prototype,"ComputeDistance",box2d.b2Fixture.prototype.ComputeDistance),box2d.b2Fixture.prototype.RayCast=function(o,t,e){return this.m_shape.RayCast(o,t,this.m_body.GetTransform(),e)},goog.exportProperty(box2d.b2Fixture.prototype,"RayCast",box2d.b2Fixture.prototype.RayCast),box2d.b2Fixture.prototype.GetMassData=function(o){return o=o||new box2d.b2MassData,this.m_shape.ComputeMass(o,this.m_density),o},goog.exportProperty(box2d.b2Fixture.prototype,"GetMassData",box2d.b2Fixture.prototype.GetMassData),box2d.b2Fixture.prototype.GetAABB=function(o){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=o&&o<this.m_proxyCount),this.m_proxies[o].aabb},goog.exportProperty(box2d.b2Fixture.prototype,"GetAABB",box2d.b2Fixture.prototype.GetAABB),box2d.b2Fixture.prototype.Create=function(o,t){this.m_userData=t.userData,this.m_friction=t.friction,this.m_restitution=t.restitution,this.m_body=o,this.m_next=null,this.m_filter.Copy(t.filter),this.m_isSensor=t.isSensor,this.m_shape=t.shape.Clone(),this.m_proxies=box2d.b2FixtureProxy.MakeArray(this.m_shape.GetChildCount()),this.m_proxyCount=0,this.m_density=t.density},goog.exportProperty(box2d.b2Fixture.prototype,"Create",box2d.b2Fixture.prototype.Create),box2d.b2Fixture.prototype.Destroy=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0===this.m_proxyCount),this.m_shape=null},goog.exportProperty(box2d.b2Fixture.prototype,"Destroy",box2d.b2Fixture.prototype.Destroy),box2d.b2Fixture.prototype.CreateProxies=function(o,t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0===this.m_proxyCount),this.m_proxyCount=this.m_shape.GetChildCount();for(var e=0;e<this.m_proxyCount;++e){var r=this.m_proxies[e];this.m_shape.ComputeAABB(r.aabb,t,e),r.proxy=o.CreateProxy(r.aabb,r),r.fixture=this,r.childIndex=e}},goog.exportProperty(box2d.b2Fixture.prototype,"CreateProxies",box2d.b2Fixture.prototype.CreateProxies),box2d.b2Fixture.prototype.DestroyProxies=function(o){for(var t=0;t<this.m_proxyCount;++t){var e=this.m_proxies[t];o.DestroyProxy(e.proxy),e.proxy=null}this.m_proxyCount=0},goog.exportProperty(box2d.b2Fixture.prototype,"DestroyProxies",box2d.b2Fixture.prototype.DestroyProxies),box2d.b2Fixture.prototype.Synchronize=function(o,t,e){if(0!==this.m_proxyCount)for(var r=0;r<this.m_proxyCount;++r){var i=this.m_proxies[r],b=box2d.b2Fixture.prototype.Synchronize.s_aabb1,p=box2d.b2Fixture.prototype.Synchronize.s_aabb2;this.m_shape.ComputeAABB(b,t,r),this.m_shape.ComputeAABB(p,e,r),i.aabb.Combine2(b,p),b=box2d.b2Sub_V2_V2(e.p,t.p,box2d.b2Fixture.prototype.Synchronize.s_displacement),o.MoveProxy(i.proxy,i.aabb,b)}},goog.exportProperty(box2d.b2Fixture.prototype,"Synchronize",box2d.b2Fixture.prototype.Synchronize),box2d.b2Fixture.prototype.Synchronize.s_aabb1=new box2d.b2AABB,box2d.b2Fixture.prototype.Synchronize.s_aabb2=new box2d.b2AABB,box2d.b2Fixture.prototype.Synchronize.s_displacement=new box2d.b2Vec2,box2d.b2Fixture.prototype.SetFilterData=function(o){this.m_filter.Copy(o),this.Refilter()},goog.exportProperty(box2d.b2Fixture.prototype,"SetFilterData",box2d.b2Fixture.prototype.SetFilterData),box2d.b2Fixture.prototype.Refilter=function(){if(null!==this.m_body){for(var o=this.m_body.GetContactList();o;){var t=o.contact,e=t.GetFixtureA(),r=t.GetFixtureB();e!==this&&r!==this||t.FlagForFiltering(),o=o.next}if(null!==(o=this.m_body.GetWorld()))for(o=o.m_contactManager.m_broadPhase,t=0;t<this.m_proxyCount;++t)o.TouchProxy(this.m_proxies[t].proxy)}},goog.exportProperty(box2d.b2Fixture.prototype,"Refilter",box2d.b2Fixture.prototype.Refilter),box2d.b2Fixture.prototype.SetSensor=function(o){o!==this.m_isSensor&&(this.m_body.SetAwake(!0),this.m_isSensor=o)},goog.exportProperty(box2d.b2Fixture.prototype,"SetSensor",box2d.b2Fixture.prototype.SetSensor),box2d.b2Fixture.prototype.Dump=function(o){box2d.DEBUG&&(box2d.b2Log("    /*box2d.b2FixtureDef*/ var fd = new box2d.b2FixtureDef();\n"),box2d.b2Log("    fd.friction = %.15f;\n",this.m_friction),box2d.b2Log("    fd.restitution = %.15f;\n",this.m_restitution),box2d.b2Log("    fd.density = %.15f;\n",this.m_density),box2d.b2Log("    fd.isSensor = %s;\n",this.m_isSensor?"true":"false"),box2d.b2Log("    fd.filter.categoryBits = %d;\n",this.m_filter.categoryBits),box2d.b2Log("    fd.filter.maskBits = %d;\n",this.m_filter.maskBits),box2d.b2Log("    fd.filter.groupIndex = %d;\n",this.m_filter.groupIndex),this.m_shape.Dump(),box2d.b2Log("\n"),box2d.b2Log("    fd.shape = shape;\n"),box2d.b2Log("\n"),box2d.b2Log("    bodies[%d].CreateFixture(fd);\n",o))},goog.exportProperty(box2d.b2Fixture.prototype,"Dump",box2d.b2Fixture.prototype.Dump),box2d.b2BodyType={b2_unknown:-1,b2_staticBody:0,b2_kinematicBody:1,b2_dynamicBody:2,b2_bulletBody:3},goog.exportSymbol("box2d.b2BodyType",box2d.b2BodyType),goog.exportProperty(box2d.b2BodyType,"b2_unknown",box2d.b2BodyType.b2_unknown),goog.exportProperty(box2d.b2BodyType,"b2_staticBody",box2d.b2BodyType.b2_staticBody),goog.exportProperty(box2d.b2BodyType,"b2_kinematicBody",box2d.b2BodyType.b2_kinematicBody),goog.exportProperty(box2d.b2BodyType,"b2_dynamicBody",box2d.b2BodyType.b2_dynamicBody),goog.exportProperty(box2d.b2BodyType,"b2_bulletBody",box2d.b2BodyType.b2_bulletBody),box2d.b2BodyDef=function(){this.position=new box2d.b2Vec2(0,0),this.linearVelocity=new box2d.b2Vec2(0,0)},goog.exportSymbol("box2d.b2BodyDef",box2d.b2BodyDef),box2d.b2BodyDef.prototype.type=box2d.b2BodyType.b2_staticBody,goog.exportProperty(box2d.b2BodyDef.prototype,"type",box2d.b2BodyDef.prototype.type),box2d.b2BodyDef.prototype.position=null,goog.exportProperty(box2d.b2BodyDef.prototype,"position",box2d.b2BodyDef.prototype.position),box2d.b2BodyDef.prototype.angle=0,goog.exportProperty(box2d.b2BodyDef.prototype,"angle",box2d.b2BodyDef.prototype.angle),box2d.b2BodyDef.prototype.linearVelocity=null,goog.exportProperty(box2d.b2BodyDef.prototype,"linearVelocity",box2d.b2BodyDef.prototype.linearVelocity),box2d.b2BodyDef.prototype.angularVelocity=0,goog.exportProperty(box2d.b2BodyDef.prototype,"angularVelocity",box2d.b2BodyDef.prototype.angularVelocity),box2d.b2BodyDef.prototype.linearDamping=0,goog.exportProperty(box2d.b2BodyDef.prototype,"linearDamping",box2d.b2BodyDef.prototype.linearDamping),box2d.b2BodyDef.prototype.angularDamping=0,goog.exportProperty(box2d.b2BodyDef.prototype,"angularDamping",box2d.b2BodyDef.prototype.angularDamping),box2d.b2BodyDef.prototype.allowSleep=!0,goog.exportProperty(box2d.b2BodyDef.prototype,"allowSleep",box2d.b2BodyDef.prototype.allowSleep),box2d.b2BodyDef.prototype.awake=!0,goog.exportProperty(box2d.b2BodyDef.prototype,"awake",box2d.b2BodyDef.prototype.awake),box2d.b2BodyDef.prototype.fixedRotation=!1,goog.exportProperty(box2d.b2BodyDef.prototype,"fixedRotation",box2d.b2BodyDef.prototype.fixedRotation),box2d.b2BodyDef.prototype.bullet=!1,goog.exportProperty(box2d.b2BodyDef.prototype,"bullet",box2d.b2BodyDef.prototype.bullet),box2d.b2BodyDef.prototype.active=!0,goog.exportProperty(box2d.b2BodyDef.prototype,"active",box2d.b2BodyDef.prototype.active),box2d.b2BodyDef.prototype.userData=null,goog.exportProperty(box2d.b2BodyDef.prototype,"userData",box2d.b2BodyDef.prototype.userData),box2d.b2BodyDef.prototype.gravityScale=1,goog.exportProperty(box2d.b2BodyDef.prototype,"gravityScale",box2d.b2BodyDef.prototype.gravityScale),box2d.b2Body=function(o,t){this.m_xf=new box2d.b2Transform,this.m_out_xf=new box2d.b2Transform,this.m_xf0=new box2d.b2Transform,this.m_sweep=new box2d.b2Sweep,this.m_out_sweep=new box2d.b2Sweep,this.m_linearVelocity=new box2d.b2Vec2,this.m_out_linearVelocity=new box2d.b2Vec2,this.m_force=new box2d.b2Vec2,box2d.ENABLE_ASSERTS&&box2d.b2Assert(o.position.IsValid()),box2d.ENABLE_ASSERTS&&box2d.b2Assert(o.linearVelocity.IsValid()),box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(o.angle)),box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(o.angularVelocity)),box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(o.gravityScale)&&0<=o.gravityScale),box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(o.angularDamping)&&0<=o.angularDamping),box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(o.linearDamping)&&0<=o.linearDamping),o.bullet&&(this.m_flag_bulletFlag=!0),o.fixedRotation&&(this.m_flag_fixedRotationFlag=!0),o.allowSleep&&(this.m_flag_autoSleepFlag=!0),o.awake&&(this.m_flag_awakeFlag=!0),o.active&&(this.m_flag_activeFlag=!0),this.m_world=t,this.m_xf.p.Copy(o.position),this.m_xf.q.SetAngle(o.angle),this.m_xf0.Copy(this.m_xf),this.m_sweep.localCenter.SetZero(),this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=o.angle,this.m_sweep.a=o.angle,this.m_sweep.alpha0=0,this.m_linearVelocity.Copy(o.linearVelocity),this.m_angularVelocity=o.angularVelocity,this.m_linearDamping=o.linearDamping,this.m_angularDamping=o.angularDamping,this.m_gravityScale=o.gravityScale,this.m_force.SetZero(),this.m_sleepTime=this.m_torque=0,this.m_type=o.type,this.m_invMass=o.type===box2d.b2BodyType.b2_dynamicBody?this.m_mass=1:this.m_mass=0,this.m_invI=this.m_I=0,this.m_userData=o.userData,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_controllerList=null,this.m_controllerCount=0},goog.exportSymbol("box2d.b2Body",box2d.b2Body),box2d.b2Body.prototype.m_flag_islandFlag=!1,goog.exportProperty(box2d.b2Body.prototype,"m_flag_islandFlag",box2d.b2Body.prototype.m_flag_islandFlag),box2d.b2Body.prototype.m_flag_awakeFlag=!1,goog.exportProperty(box2d.b2Body.prototype,"m_flag_awakeFlag",box2d.b2Body.prototype.m_flag_awakeFlag),box2d.b2Body.prototype.m_flag_autoSleepFlag=!1,goog.exportProperty(box2d.b2Body.prototype,"m_flag_autoSleepFlag",box2d.b2Body.prototype.m_flag_autoSleepFlag),box2d.b2Body.prototype.m_flag_bulletFlag=!1,goog.exportProperty(box2d.b2Body.prototype,"m_flag_bulletFlag",box2d.b2Body.prototype.m_flag_bulletFlag),box2d.b2Body.prototype.m_flag_fixedRotationFlag=!1,goog.exportProperty(box2d.b2Body.prototype,"m_flag_fixedRotationFlag",box2d.b2Body.prototype.m_flag_fixedRotationFlag),box2d.b2Body.prototype.m_flag_activeFlag=!1,goog.exportProperty(box2d.b2Body.prototype,"m_flag_activeFlag",box2d.b2Body.prototype.m_flag_activeFlag),box2d.b2Body.prototype.m_flag_toiFlag=!1,goog.exportProperty(box2d.b2Body.prototype,"m_flag_toiFlag",box2d.b2Body.prototype.m_flag_toiFlag),box2d.b2Body.prototype.m_islandIndex=0,goog.exportProperty(box2d.b2Body.prototype,"m_islandIndex",box2d.b2Body.prototype.m_islandIndex),box2d.b2Body.prototype.m_world=null,goog.exportProperty(box2d.b2Body.prototype,"m_world",box2d.b2Body.prototype.m_world),box2d.b2Body.prototype.m_xf=null,goog.exportProperty(box2d.b2Body.prototype,"m_xf",box2d.b2Body.prototype.m_xf),box2d.b2Body.prototype.m_out_xf=null,goog.exportProperty(box2d.b2Body.prototype,"m_out_xf",box2d.b2Body.prototype.m_out_xf),box2d.b2Body.prototype.m_xf0=null,goog.exportProperty(box2d.b2Body.prototype,"m_xf0",box2d.b2Body.prototype.m_xf0),box2d.b2Body.prototype.m_sweep=null,goog.exportProperty(box2d.b2Body.prototype,"m_sweep",box2d.b2Body.prototype.m_sweep),box2d.b2Body.prototype.m_out_sweep=null,goog.exportProperty(box2d.b2Body.prototype,"m_out_sweep",box2d.b2Body.prototype.m_out_sweep),box2d.b2Body.prototype.m_jointList=null,goog.exportProperty(box2d.b2Body.prototype,"m_jointList",box2d.b2Body.prototype.m_jointList),box2d.b2Body.prototype.m_contactList=null,goog.exportProperty(box2d.b2Body.prototype,"m_contactList",box2d.b2Body.prototype.m_contactList),box2d.b2Body.prototype.m_prev=null,goog.exportProperty(box2d.b2Body.prototype,"m_prev",box2d.b2Body.prototype.m_prev),box2d.b2Body.prototype.m_next=null,goog.exportProperty(box2d.b2Body.prototype,"m_next",box2d.b2Body.prototype.m_next),box2d.b2Body.prototype.m_linearVelocity=null,goog.exportProperty(box2d.b2Body.prototype,"m_linearVelocity",box2d.b2Body.prototype.m_linearVelocity),box2d.b2Body.prototype.m_out_linearVelocity=null,goog.exportProperty(box2d.b2Body.prototype,"m_out_linearVelocity",box2d.b2Body.prototype.m_out_linearVelocity),box2d.b2Body.prototype.m_angularVelocity=0,goog.exportProperty(box2d.b2Body.prototype,"m_angularVelocity",box2d.b2Body.prototype.m_angularVelocity),box2d.b2Body.prototype.m_linearDamping=0,goog.exportProperty(box2d.b2Body.prototype,"m_linearDamping",box2d.b2Body.prototype.m_linearDamping),box2d.b2Body.prototype.m_angularDamping=0,goog.exportProperty(box2d.b2Body.prototype,"m_angularDamping",box2d.b2Body.prototype.m_angularDamping),box2d.b2Body.prototype.m_gravityScale=1,goog.exportProperty(box2d.b2Body.prototype,"m_gravityScale",box2d.b2Body.prototype.m_gravityScale),box2d.b2Body.prototype.m_force=null,goog.exportProperty(box2d.b2Body.prototype,"m_force",box2d.b2Body.prototype.m_force),box2d.b2Body.prototype.m_torque=0,goog.exportProperty(box2d.b2Body.prototype,"m_torque",box2d.b2Body.prototype.m_torque),box2d.b2Body.prototype.m_sleepTime=0,goog.exportProperty(box2d.b2Body.prototype,"m_sleepTime",box2d.b2Body.prototype.m_sleepTime),box2d.b2Body.prototype.m_type=box2d.b2BodyType.b2_staticBody,goog.exportProperty(box2d.b2Body.prototype,"m_type",box2d.b2Body.prototype.m_type),box2d.b2Body.prototype.m_mass=1,goog.exportProperty(box2d.b2Body.prototype,"m_mass",box2d.b2Body.prototype.m_mass),box2d.b2Body.prototype.m_invMass=1,goog.exportProperty(box2d.b2Body.prototype,"m_invMass",box2d.b2Body.prototype.m_invMass),box2d.b2Body.prototype.m_I=0,goog.exportProperty(box2d.b2Body.prototype,"m_I",box2d.b2Body.prototype.m_I),box2d.b2Body.prototype.m_invI=0,goog.exportProperty(box2d.b2Body.prototype,"m_invI",box2d.b2Body.prototype.m_invI),box2d.b2Body.prototype.m_userData=null,goog.exportProperty(box2d.b2Body.prototype,"m_userData",box2d.b2Body.prototype.m_userData),box2d.b2Body.prototype.m_fixtureList=null,goog.exportProperty(box2d.b2Body.prototype,"m_fixtureList",box2d.b2Body.prototype.m_fixtureList),box2d.b2Body.prototype.m_fixtureCount=0,goog.exportProperty(box2d.b2Body.prototype,"m_fixtureCount",box2d.b2Body.prototype.m_fixtureCount),box2d.b2Body.prototype.m_controllerList=null,goog.exportProperty(box2d.b2Body.prototype,"m_controllerList",box2d.b2Body.prototype.m_controllerList),box2d.b2Body.prototype.m_controllerCount=0,goog.exportProperty(box2d.b2Body.prototype,"m_controllerCount",box2d.b2Body.prototype.m_controllerCount),box2d.b2Body.prototype.CreateFixture=function(o,t){if(o instanceof box2d.b2FixtureDef)return this.CreateFixture_Def(o);if(o instanceof box2d.b2Shape&&"number"==typeof t)return this.CreateFixture_Shape_Density(o,t);throw Error()},goog.exportProperty(box2d.b2Body.prototype,"CreateFixture",box2d.b2Body.prototype.CreateFixture),box2d.b2Body.prototype.CreateFixture_Def=function(o){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.m_world.IsLocked()),this.m_world.IsLocked())return null;var t=new box2d.b2Fixture;return t.Create(this,o),this.m_flag_activeFlag&&t.CreateProxies(this.m_world.m_contactManager.m_broadPhase,this.m_xf),t.m_next=this.m_fixtureList,this.m_fixtureList=t,++this.m_fixtureCount,t.m_body=this,0<t.m_density&&this.ResetMassData(),this.m_world.m_flag_newFixture=!0,t},goog.exportProperty(box2d.b2Body.prototype,"CreateFixture_Def",box2d.b2Body.prototype.CreateFixture_Def),box2d.b2Body.prototype.CreateFixture_Shape_Density=function(o,t){var e=box2d.b2Body.prototype.CreateFixture_Shape_Density.s_def;return e.shape=o,e.density="number"==typeof t?t:0,this.CreateFixture_Def(e)},goog.exportProperty(box2d.b2Body.prototype,"CreateFixture_Shape_Density",box2d.b2Body.prototype.CreateFixture_Shape_Density),box2d.b2Body.prototype.CreateFixture_Shape_Density.s_def=new box2d.b2FixtureDef,box2d.b2Body.prototype.DestroyFixture=function(o){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.m_world.IsLocked()),!this.m_world.IsLocked()){box2d.ENABLE_ASSERTS&&box2d.b2Assert(o.m_body===this),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_fixtureCount);for(var t=this.m_fixtureList,e=null,r=!1;null!==t;){if(t===o){e?e.m_next=o.m_next:this.m_fixtureList=o.m_next,r=!0;break}e=t,t=t.m_next}for(box2d.ENABLE_ASSERTS&&box2d.b2Assert(r),t=this.m_contactList;t;){e=t.contact,t=t.next,r=e.GetFixtureA();var i=e.GetFixtureB();o!==r&&o!==i||this.m_world.m_contactManager.Destroy(e)}this.m_flag_activeFlag&&o.DestroyProxies(this.m_world.m_contactManager.m_broadPhase),o.Destroy(),o.m_body=null,o.m_next=null,--this.m_fixtureCount,this.ResetMassData()}},goog.exportProperty(box2d.b2Body.prototype,"DestroyFixture",box2d.b2Body.prototype.DestroyFixture),box2d.b2Body.prototype.SetTransform=function(o,t,e){if(o instanceof box2d.b2Vec2&&"number"==typeof t)this.SetTransform_X_Y_A(o.x,o.y,t);else if(o instanceof box2d.b2Transform)this.SetTransform_X_Y_A(o.p.x,o.p.y,o.GetAngle());else{if("number"!=typeof o||"number"!=typeof t||"number"!=typeof e)throw Error();this.SetTransform_X_Y_A(o,t,e)}},goog.exportProperty(box2d.b2Body.prototype,"SetTransform",box2d.b2Body.prototype.SetTransform),box2d.b2Body.prototype.SetTransform_V2_A=function(o,t){this.SetTransform_X_Y_A(o.x,o.y,t)},goog.exportProperty(box2d.b2Body.prototype,"SetTransform_V2_A",box2d.b2Body.prototype.SetTransform_V2_A),box2d.b2Body.prototype.SetTransform_X_Y_A=function(o,t,e){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.m_world.IsLocked()),!this.m_world.IsLocked()&&(this.m_xf.p.x!==o||this.m_xf.p.y!==t||this.m_xf.q.GetAngle()!==e))for(this.m_xf.q.SetAngle(e),this.m_xf.p.Set(o,t),this.m_xf0.Copy(this.m_xf),box2d.b2Mul_X_V2(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.a=e,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_sweep.a0=e,o=this.m_world.m_contactManager.m_broadPhase,t=this.m_fixtureList;t;t=t.m_next)t.Synchronize(o,this.m_xf,this.m_xf)},goog.exportProperty(box2d.b2Body.prototype,"SetTransform_X_Y_A",box2d.b2Body.prototype.SetTransform_X_Y_A),box2d.b2Body.prototype.SetTransform_X=function(o){this.SetTransform_X_Y_A(o.p.x,o.p.y,o.GetAngle())},goog.exportProperty(box2d.b2Body.prototype,"SetTransform_X",box2d.b2Body.prototype.SetTransform_X),box2d.b2Body.prototype.GetTransform=function(o){return(o=o||this.m_out_xf).Copy(this.m_xf)},goog.exportProperty(box2d.b2Body.prototype,"GetTransform",box2d.b2Body.prototype.GetTransform),box2d.b2Body.prototype.GetPosition=function(o){return(o=o||this.m_out_xf.p).Copy(this.m_xf.p)},goog.exportProperty(box2d.b2Body.prototype,"GetPosition",box2d.b2Body.prototype.GetPosition),box2d.b2Body.prototype.SetPosition=function(o){this.SetTransform_V2_A(o,this.GetAngle())},goog.exportProperty(box2d.b2Body.prototype,"SetPosition",box2d.b2Body.prototype.SetPosition),box2d.b2Body.prototype.SetPositionXY=function(o,t){this.SetTransform_X_Y_A(o,t,this.GetAngle())},goog.exportProperty(box2d.b2Body.prototype,"SetPositionXY",box2d.b2Body.prototype.SetPositionXY),box2d.b2Body.prototype.GetRotation=function(o){return(o=o||this.m_out_xf.q).Copy(this.m_xf.q)},goog.exportProperty(box2d.b2Body.prototype,"GetRotation",box2d.b2Body.prototype.GetRotation),box2d.b2Body.prototype.SetRotation=function(o){this.SetTransform_V2_A(this.GetPosition(),o.GetAngle())},goog.exportProperty(box2d.b2Body.prototype,"SetRotation",box2d.b2Body.prototype.SetRotation),box2d.b2Body.prototype.GetAngle=function(){return this.m_sweep.a},goog.exportProperty(box2d.b2Body.prototype,"GetAngle",box2d.b2Body.prototype.GetAngle),box2d.b2Body.prototype.SetAngle=function(o){this.SetTransform_V2_A(this.GetPosition(),o)},goog.exportProperty(box2d.b2Body.prototype,"SetAngle",box2d.b2Body.prototype.SetAngle),box2d.b2Body.prototype.GetWorldCenter=function(o){return(o=o||this.m_out_sweep.c).Copy(this.m_sweep.c)},goog.exportProperty(box2d.b2Body.prototype,"GetWorldCenter",box2d.b2Body.prototype.GetWorldCenter),box2d.b2Body.prototype.GetLocalCenter=function(o){return(o=o||this.m_out_sweep.localCenter).Copy(this.m_sweep.localCenter)},goog.exportProperty(box2d.b2Body.prototype,"GetLocalCenter",box2d.b2Body.prototype.GetLocalCenter),box2d.b2Body.prototype.SetLinearVelocity=function(o){this.m_type!==box2d.b2BodyType.b2_staticBody&&(0<box2d.b2Dot_V2_V2(o,o)&&this.SetAwake(!0),this.m_linearVelocity.Copy(o))},goog.exportProperty(box2d.b2Body.prototype,"SetLinearVelocity",box2d.b2Body.prototype.SetLinearVelocity),box2d.b2Body.prototype.GetLinearVelocity=function(o){return(o=o||this.m_out_linearVelocity).Copy(this.m_linearVelocity)},goog.exportProperty(box2d.b2Body.prototype,"GetLinearVelocity",box2d.b2Body.prototype.GetLinearVelocity),box2d.b2Body.prototype.SetAngularVelocity=function(o){this.m_type!==box2d.b2BodyType.b2_staticBody&&(0<o*o&&this.SetAwake(!0),this.m_angularVelocity=o)},goog.exportProperty(box2d.b2Body.prototype,"SetAngularVelocity",box2d.b2Body.prototype.SetAngularVelocity),box2d.b2Body.prototype.GetAngularVelocity=function(){return this.m_angularVelocity},goog.exportProperty(box2d.b2Body.prototype,"GetAngularVelocity",box2d.b2Body.prototype.GetAngularVelocity),box2d.b2Body.prototype.GetDefinition=function(o){return o.type=this.GetType(),o.allowSleep=this.m_flag_autoSleepFlag,o.angle=this.GetAngle(),o.angularDamping=this.m_angularDamping,o.gravityScale=this.m_gravityScale,o.angularVelocity=this.m_angularVelocity,o.fixedRotation=this.m_flag_fixedRotationFlag,o.bullet=this.m_flag_bulletFlag,o.awake=this.m_flag_awakeFlag,o.linearDamping=this.m_linearDamping,o.linearVelocity.Copy(this.GetLinearVelocity()),o.position.Copy(this.GetPosition()),o.userData=this.GetUserData(),o},goog.exportProperty(box2d.b2Body.prototype,"GetDefinition",box2d.b2Body.prototype.GetDefinition),box2d.b2Body.prototype.ApplyForce=function(o,t,e){this.m_type===box2d.b2BodyType.b2_dynamicBody&&(!this.m_flag_awakeFlag&&this.SetAwake(!0),this.m_flag_awakeFlag&&(this.m_force.x+=o.x,this.m_force.y+=o.y,this.m_torque+=(t.x-this.m_sweep.c.x)*o.y-(t.y-this.m_sweep.c.y)*o.x))},goog.exportProperty(box2d.b2Body.prototype,"ApplyForce",box2d.b2Body.prototype.ApplyForce),box2d.b2Body.prototype.ApplyForceToCenter=function(o,t){this.m_type===box2d.b2BodyType.b2_dynamicBody&&(("boolean"==typeof t?t:1)&&!this.m_flag_awakeFlag&&this.SetAwake(!0),this.m_flag_awakeFlag&&(this.m_force.x+=o.x,this.m_force.y+=o.y))},goog.exportProperty(box2d.b2Body.prototype,"ApplyForceToCenter",box2d.b2Body.prototype.ApplyForceToCenter),box2d.b2Body.prototype.ApplyTorque=function(o,t){this.m_type===box2d.b2BodyType.b2_dynamicBody&&(("boolean"==typeof t?t:1)&&!this.m_flag_awakeFlag&&this.SetAwake(!0),this.m_flag_awakeFlag&&(this.m_torque+=o))},goog.exportProperty(box2d.b2Body.prototype,"ApplyTorque",box2d.b2Body.prototype.ApplyTorque),box2d.b2Body.prototype.ApplyLinearImpulse=function(o,t,e){this.m_type===box2d.b2BodyType.b2_dynamicBody&&(("boolean"==typeof e?e:1)&&!this.m_flag_awakeFlag&&this.SetAwake(!0),this.m_flag_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*o.x,this.m_linearVelocity.y+=this.m_invMass*o.y,this.m_angularVelocity+=this.m_invI*((t.x-this.m_sweep.c.x)*o.y-(t.y-this.m_sweep.c.y)*o.x)))},goog.exportProperty(box2d.b2Body.prototype,"ApplyLinearImpulse",box2d.b2Body.prototype.ApplyLinearImpulse),box2d.b2Body.prototype.ApplyAngularImpulse=function(o,t){this.m_type===box2d.b2BodyType.b2_dynamicBody&&(("boolean"==typeof t?t:1)&&!this.m_flag_awakeFlag&&this.SetAwake(!0),this.m_flag_awakeFlag&&(this.m_angularVelocity+=this.m_invI*o))},goog.exportProperty(box2d.b2Body.prototype,"ApplyAngularImpulse",box2d.b2Body.prototype.ApplyAngularImpulse),box2d.b2Body.prototype.GetMass=function(){return this.m_mass},goog.exportProperty(box2d.b2Body.prototype,"GetMass",box2d.b2Body.prototype.GetMass),box2d.b2Body.prototype.GetInertia=function(){return this.m_I+this.m_mass*box2d.b2Dot_V2_V2(this.m_sweep.localCenter,this.m_sweep.localCenter)},goog.exportProperty(box2d.b2Body.prototype,"GetInertia",box2d.b2Body.prototype.GetInertia),box2d.b2Body.prototype.GetMassData=function(o){return o.mass=this.m_mass,o.I=this.m_I+this.m_mass*box2d.b2Dot_V2_V2(this.m_sweep.localCenter,this.m_sweep.localCenter),o.center.Copy(this.m_sweep.localCenter),o},goog.exportProperty(box2d.b2Body.prototype,"GetMassData",box2d.b2Body.prototype.GetMassData),box2d.b2Body.prototype.SetMassData=function(o){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.m_world.IsLocked()),!this.m_world.IsLocked()&&this.m_type===box2d.b2BodyType.b2_dynamicBody){this.m_invI=this.m_I=this.m_invMass=0,this.m_mass=o.mass,0>=this.m_mass&&(this.m_mass=1),this.m_invMass=1/this.m_mass,0<o.I&&!this.m_flag_fixedRotationFlag&&(this.m_I=o.I-this.m_mass*box2d.b2Dot_V2_V2(o.center,o.center),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_I),this.m_invI=1/this.m_I);var t=box2d.b2Body.prototype.SetMassData.s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(o.center),box2d.b2Mul_X_V2(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),box2d.b2AddCross_V2_S_V2(this.m_linearVelocity,this.m_angularVelocity,box2d.b2Sub_V2_V2(this.m_sweep.c,t,box2d.b2Vec2.s_t0),this.m_linearVelocity)}},goog.exportProperty(box2d.b2Body.prototype,"SetMassData",box2d.b2Body.prototype.SetMassData),box2d.b2Body.prototype.SetMassData.s_oldCenter=new box2d.b2Vec2,box2d.b2Body.prototype.ResetMassData=function(){if(this.m_invI=this.m_I=this.m_invMass=this.m_mass=0,this.m_sweep.localCenter.SetZero(),this.m_type===box2d.b2BodyType.b2_staticBody||this.m_type===box2d.b2BodyType.b2_kinematicBody)this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=this.m_sweep.a;else{box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_type===box2d.b2BodyType.b2_dynamicBody);for(var o=box2d.b2Body.prototype.ResetMassData.s_localCenter.SetZero(),t=this.m_fixtureList;t;t=t.m_next)if(0!==t.m_density){var e=t.GetMassData(box2d.b2Body.prototype.ResetMassData.s_massData);this.m_mass+=e.mass,o.x+=e.center.x*e.mass,o.y+=e.center.y*e.mass,this.m_I+=e.I}0<this.m_mass?(this.m_invMass=1/this.m_mass,o.x*=this.m_invMass,o.y*=this.m_invMass):this.m_invMass=this.m_mass=1,0<this.m_I&&!this.m_flag_fixedRotationFlag?(this.m_I-=this.m_mass*box2d.b2Dot_V2_V2(o,o),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_I),this.m_invI=1/this.m_I):this.m_invI=this.m_I=0,t=box2d.b2Body.prototype.ResetMassData.s_oldCenter.Copy(this.m_sweep.c),this.m_sweep.localCenter.Copy(o),box2d.b2Mul_X_V2(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),box2d.b2AddCross_V2_S_V2(this.m_linearVelocity,this.m_angularVelocity,box2d.b2Sub_V2_V2(this.m_sweep.c,t,box2d.b2Vec2.s_t0),this.m_linearVelocity)}},goog.exportProperty(box2d.b2Body.prototype,"ResetMassData",box2d.b2Body.prototype.ResetMassData),box2d.b2Body.prototype.ResetMassData.s_localCenter=new box2d.b2Vec2,box2d.b2Body.prototype.ResetMassData.s_oldCenter=new box2d.b2Vec2,box2d.b2Body.prototype.ResetMassData.s_massData=new box2d.b2MassData,box2d.b2Body.prototype.GetWorldPoint=function(o,t){return box2d.b2Mul_X_V2(this.m_xf,o,t)},goog.exportProperty(box2d.b2Body.prototype,"GetWorldPoint",box2d.b2Body.prototype.GetWorldPoint),box2d.b2Body.prototype.GetWorldVector=function(o,t){return box2d.b2Mul_R_V2(this.m_xf.q,o,t)},goog.exportProperty(box2d.b2Body.prototype,"GetWorldVector",box2d.b2Body.prototype.GetWorldVector),box2d.b2Body.prototype.GetLocalPoint=function(o,t){return box2d.b2MulT_X_V2(this.m_xf,o,t)},goog.exportProperty(box2d.b2Body.prototype,"GetLocalPoint",box2d.b2Body.prototype.GetLocalPoint),box2d.b2Body.prototype.GetLocalVector=function(o,t){return box2d.b2MulT_R_V2(this.m_xf.q,o,t)},goog.exportProperty(box2d.b2Body.prototype,"GetLocalVector",box2d.b2Body.prototype.GetLocalVector),box2d.b2Body.prototype.GetLinearVelocityFromWorldPoint=function(o,t){return box2d.b2AddCross_V2_S_V2(this.m_linearVelocity,this.m_angularVelocity,box2d.b2Sub_V2_V2(o,this.m_sweep.c,box2d.b2Vec2.s_t0),t)},goog.exportProperty(box2d.b2Body.prototype,"GetLinearVelocityFromWorldPoint",box2d.b2Body.prototype.GetLinearVelocityFromWorldPoint),box2d.b2Body.prototype.GetLinearVelocityFromLocalPoint=function(o,t){return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(o,t),t)},goog.exportProperty(box2d.b2Body.prototype,"GetLinearVelocityFromLocalPoint",box2d.b2Body.prototype.GetLinearVelocityFromLocalPoint),box2d.b2Body.prototype.GetLinearDamping=function(){return this.m_linearDamping},goog.exportProperty(box2d.b2Body.prototype,"GetLinearDamping",box2d.b2Body.prototype.GetLinearDamping),box2d.b2Body.prototype.SetLinearDamping=function(o){this.m_linearDamping=o},goog.exportProperty(box2d.b2Body.prototype,"SetLinearDamping",box2d.b2Body.prototype.SetLinearDamping),box2d.b2Body.prototype.GetAngularDamping=function(){return this.m_angularDamping},goog.exportProperty(box2d.b2Body.prototype,"GetAngularDamping",box2d.b2Body.prototype.GetAngularDamping),box2d.b2Body.prototype.SetAngularDamping=function(o){this.m_angularDamping=o},goog.exportProperty(box2d.b2Body.prototype,"SetAngularDamping",box2d.b2Body.prototype.SetAngularDamping),box2d.b2Body.prototype.GetGravityScale=function(){return this.m_gravityScale},goog.exportProperty(box2d.b2Body.prototype,"GetGravityScale",box2d.b2Body.prototype.GetGravityScale),box2d.b2Body.prototype.SetGravityScale=function(o){this.m_gravityScale=o},goog.exportProperty(box2d.b2Body.prototype,"SetGravityScale",box2d.b2Body.prototype.SetGravityScale),box2d.b2Body.prototype.SetType=function(o){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.m_world.IsLocked()),!this.m_world.IsLocked()&&this.m_type!==o){for(this.m_type=o,this.ResetMassData(),this.m_type===box2d.b2BodyType.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.SynchronizeFixtures()),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0,o=this.m_contactList;o;){var t=o;o=o.next,this.m_world.m_contactManager.Destroy(t.contact)}for(this.m_contactList=null,o=this.m_world.m_contactManager.m_broadPhase,t=this.m_fixtureList;t;t=t.m_next)for(var e=t.m_proxyCount,r=0;r<e;++r)o.TouchProxy(t.m_proxies[r].proxy)}},goog.exportProperty(box2d.b2Body.prototype,"SetType",box2d.b2Body.prototype.SetType),box2d.b2Body.prototype.GetType=function(){return this.m_type},goog.exportProperty(box2d.b2Body.prototype,"GetType",box2d.b2Body.prototype.GetType),box2d.b2Body.prototype.SetBullet=function(o){this.m_flag_bulletFlag=o},goog.exportProperty(box2d.b2Body.prototype,"SetBullet",box2d.b2Body.prototype.SetBullet),box2d.b2Body.prototype.IsBullet=function(){return this.m_flag_bulletFlag},goog.exportProperty(box2d.b2Body.prototype,"IsBullet",box2d.b2Body.prototype.IsBullet),box2d.b2Body.prototype.SetSleepingAllowed=function(o){o?this.m_flag_autoSleepFlag=!0:(this.m_flag_autoSleepFlag=!1,this.SetAwake(!0))},goog.exportProperty(box2d.b2Body.prototype,"SetSleepingAllowed",box2d.b2Body.prototype.SetSleepingAllowed),box2d.b2Body.prototype.IsSleepingAllowed=function(){return this.m_flag_autoSleepFlag},goog.exportProperty(box2d.b2Body.prototype,"IsSleepingAllowed",box2d.b2Body.prototype.IsSleepingAllowed),box2d.b2Body.prototype.SetAwake=function(o){o?this.m_flag_awakeFlag||(this.m_flag_awakeFlag=!0,this.m_sleepTime=0):(this.m_flag_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)},goog.exportProperty(box2d.b2Body.prototype,"SetAwake",box2d.b2Body.prototype.SetAwake),box2d.b2Body.prototype.IsAwake=function(){return this.m_flag_awakeFlag},goog.exportProperty(box2d.b2Body.prototype,"IsAwake",box2d.b2Body.prototype.IsAwake),box2d.b2Body.prototype.SetActive=function(o){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.m_world.IsLocked()),o!==this.IsActive())if(o){this.m_flag_activeFlag=!0,o=this.m_world.m_contactManager.m_broadPhase;for(var t=this.m_fixtureList;t;t=t.m_next)t.CreateProxies(o,this.m_xf)}else{for(this.m_flag_activeFlag=!1,o=this.m_world.m_contactManager.m_broadPhase,t=this.m_fixtureList;t;t=t.m_next)t.DestroyProxies(o);for(o=this.m_contactList;o;)t=o,o=o.next,this.m_world.m_contactManager.Destroy(t.contact);this.m_contactList=null}},goog.exportProperty(box2d.b2Body.prototype,"SetActive",box2d.b2Body.prototype.SetActive),box2d.b2Body.prototype.IsActive=function(){return this.m_flag_activeFlag},goog.exportProperty(box2d.b2Body.prototype,"IsActive",box2d.b2Body.prototype.IsActive),box2d.b2Body.prototype.SetFixedRotation=function(o){this.m_flag_fixedRotationFlag!==o&&(this.m_flag_fixedRotationFlag=o,this.m_angularVelocity=0,this.ResetMassData())},goog.exportProperty(box2d.b2Body.prototype,"SetFixedRotation",box2d.b2Body.prototype.SetFixedRotation),box2d.b2Body.prototype.IsFixedRotation=function(){return this.m_flag_fixedRotationFlag},goog.exportProperty(box2d.b2Body.prototype,"IsFixedRotation",box2d.b2Body.prototype.IsFixedRotation),box2d.b2Body.prototype.GetFixtureList=function(){return this.m_fixtureList},goog.exportProperty(box2d.b2Body.prototype,"GetFixtureList",box2d.b2Body.prototype.GetFixtureList),box2d.b2Body.prototype.GetJointList=function(){return this.m_jointList},goog.exportProperty(box2d.b2Body.prototype,"GetJointList",box2d.b2Body.prototype.GetJointList),box2d.b2Body.prototype.GetContactList=function(){return this.m_contactList},goog.exportProperty(box2d.b2Body.prototype,"GetContactList",box2d.b2Body.prototype.GetContactList),box2d.b2Body.prototype.GetNext=function(){return this.m_next},goog.exportProperty(box2d.b2Body.prototype,"GetNext",box2d.b2Body.prototype.GetNext),box2d.b2Body.prototype.GetUserData=function(){return this.m_userData},goog.exportProperty(box2d.b2Body.prototype,"GetUserData",box2d.b2Body.prototype.GetUserData),box2d.b2Body.prototype.SetUserData=function(o){this.m_userData=o},goog.exportProperty(box2d.b2Body.prototype,"SetUserData",box2d.b2Body.prototype.SetUserData),box2d.b2Body.prototype.GetWorld=function(){return this.m_world},goog.exportProperty(box2d.b2Body.prototype,"GetWorld",box2d.b2Body.prototype.GetWorld),box2d.b2Body.prototype.SynchronizeFixtures=function(){var o=box2d.b2Body.prototype.SynchronizeFixtures.s_xf1;o.q.SetAngle(this.m_sweep.a0),box2d.b2Mul_R_V2(o.q,this.m_sweep.localCenter,o.p),box2d.b2Sub_V2_V2(this.m_sweep.c0,o.p,o.p);for(var t=this.m_world.m_contactManager.m_broadPhase,e=this.m_fixtureList;e;e=e.m_next)e.Synchronize(t,o,this.m_xf)},goog.exportProperty(box2d.b2Body.prototype,"SynchronizeFixtures",box2d.b2Body.prototype.SynchronizeFixtures),box2d.b2Body.prototype.SynchronizeFixtures.s_xf1=new box2d.b2Transform,box2d.b2Body.prototype.SynchronizeTransform=function(){this.m_xf.q.SetAngle(this.m_sweep.a),box2d.b2Mul_R_V2(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),box2d.b2Sub_V2_V2(this.m_sweep.c,this.m_xf.p,this.m_xf.p)},goog.exportProperty(box2d.b2Body.prototype,"SynchronizeTransform",box2d.b2Body.prototype.SynchronizeTransform),box2d.b2Body.prototype.ShouldCollide=function(o){if(this.m_type!==box2d.b2BodyType.b2_dynamicBody&&o.m_type!==box2d.b2BodyType.b2_dynamicBody)return!1;for(var t=this.m_jointList;t;t=t.next)if(t.other===o&&!t.joint.m_collideConnected)return!1;return!0},goog.exportProperty(box2d.b2Body.prototype,"ShouldCollide",box2d.b2Body.prototype.ShouldCollide),box2d.b2Body.prototype.Advance=function(o){this.m_sweep.Advance(o),this.m_sweep.c.Copy(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_xf.q.SetAngle(this.m_sweep.a),box2d.b2Mul_R_V2(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),box2d.b2Sub_V2_V2(this.m_sweep.c,this.m_xf.p,this.m_xf.p)},goog.exportProperty(box2d.b2Body.prototype,"Advance",box2d.b2Body.prototype.Advance),box2d.b2Body.prototype.Dump=function(){if(box2d.DEBUG){var o=this.m_islandIndex;box2d.b2Log("{\n"),box2d.b2Log("  /*box2d.b2BodyDef*/ var bd = new box2d.b2BodyDef();\n");var t="";switch(this.m_type){case box2d.b2BodyType.b2_staticBody:t="box2d.b2BodyType.b2_staticBody";break;case box2d.b2BodyType.b2_kinematicBody:t="box2d.b2BodyType.b2_kinematicBody";break;case box2d.b2BodyType.b2_dynamicBody:t="box2d.b2BodyType.b2_dynamicBody";break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}for(box2d.b2Log("  bd.type = %s;\n",t),box2d.b2Log("  bd.position.Set(%.15f, %.15f);\n",this.m_xf.p.x,this.m_xf.p.y),box2d.b2Log("  bd.angle = %.15f;\n",this.m_sweep.a),box2d.b2Log("  bd.linearVelocity.Set(%.15f, %.15f);\n",this.m_linearVelocity.x,this.m_linearVelocity.y),box2d.b2Log("  bd.angularVelocity = %.15f;\n",this.m_angularVelocity),box2d.b2Log("  bd.linearDamping = %.15f;\n",this.m_linearDamping),box2d.b2Log("  bd.angularDamping = %.15f;\n",this.m_angularDamping),box2d.b2Log("  bd.allowSleep = %s;\n",this.m_flag_autoSleepFlag?"true":"false"),box2d.b2Log("  bd.awake = %s;\n",this.m_flag_awakeFlag?"true":"false"),box2d.b2Log("  bd.fixedRotation = %s;\n",this.m_flag_fixedRotationFlag?"true":"false"),box2d.b2Log("  bd.bullet = %s;\n",this.m_flag_bulletFlag?"true":"false"),box2d.b2Log("  bd.active = %s;\n",this.m_flag_activeFlag?"true":"false"),box2d.b2Log("  bd.gravityScale = %.15f;\n",this.m_gravityScale),box2d.b2Log("\n"),box2d.b2Log("  bodies[%d] = this.m_world.CreateBody(bd);\n",this.m_islandIndex),box2d.b2Log("\n"),t=this.m_fixtureList;t;t=t.m_next)box2d.b2Log("  {\n"),t.Dump(o),box2d.b2Log("  }\n");box2d.b2Log("}\n")}},goog.exportProperty(box2d.b2Body.prototype,"Dump",box2d.b2Body.prototype.Dump),box2d.b2Body.prototype.GetControllerList=function(){return this.m_controllerList},goog.exportProperty(box2d.b2Body.prototype,"GetControllerList",box2d.b2Body.prototype.GetControllerList),box2d.b2Body.prototype.GetControllerCount=function(){return this.m_controllerCount},goog.exportProperty(box2d.b2Body.prototype,"GetControllerCount",box2d.b2Body.prototype.GetControllerCount),box2d.b2Profile=function(){},goog.exportSymbol("box2d.b2Profile",box2d.b2Profile),box2d.b2Profile.prototype.step=0,goog.exportProperty(box2d.b2Profile.prototype,"step",box2d.b2Profile.prototype.step),box2d.b2Profile.prototype.collide=0,goog.exportProperty(box2d.b2Profile.prototype,"collide",box2d.b2Profile.prototype.collide),box2d.b2Profile.prototype.solve=0,goog.exportProperty(box2d.b2Profile.prototype,"solve",box2d.b2Profile.prototype.solve),box2d.b2Profile.prototype.solveInit=0,goog.exportProperty(box2d.b2Profile.prototype,"solveInit",box2d.b2Profile.prototype.solveInit),box2d.b2Profile.prototype.solveVelocity=0,goog.exportProperty(box2d.b2Profile.prototype,"solveVelocity",box2d.b2Profile.prototype.solveVelocity),box2d.b2Profile.prototype.solvePosition=0,goog.exportProperty(box2d.b2Profile.prototype,"solvePosition",box2d.b2Profile.prototype.solvePosition),box2d.b2Profile.prototype.broadphase=0,goog.exportProperty(box2d.b2Profile.prototype,"broadphase",box2d.b2Profile.prototype.broadphase),box2d.b2Profile.prototype.solveTOI=0,goog.exportProperty(box2d.b2Profile.prototype,"solveTOI",box2d.b2Profile.prototype.solveTOI),box2d.b2Profile.prototype.Reset=function(){return this.solveTOI=this.broadphase=this.solvePosition=this.solveVelocity=this.solveInit=this.solve=this.collide=this.step=0,this},goog.exportProperty(box2d.b2Profile.prototype,"Reset",box2d.b2Profile.prototype.Reset),box2d.b2TimeStep=function(){},goog.exportSymbol("box2d.b2TimeStep",box2d.b2TimeStep),box2d.b2TimeStep.prototype.dt=0,goog.exportProperty(box2d.b2TimeStep.prototype,"dt",box2d.b2TimeStep.prototype.dt),box2d.b2TimeStep.prototype.inv_dt=0,goog.exportProperty(box2d.b2TimeStep.prototype,"inv_dt",box2d.b2TimeStep.prototype.inv_dt),box2d.b2TimeStep.prototype.dtRatio=0,goog.exportProperty(box2d.b2TimeStep.prototype,"dtRatio",box2d.b2TimeStep.prototype.dtRatio),box2d.b2TimeStep.prototype.velocityIterations=0,goog.exportProperty(box2d.b2TimeStep.prototype,"velocityIterations",box2d.b2TimeStep.prototype.velocityIterations),box2d.b2TimeStep.prototype.positionIterations=0,goog.exportProperty(box2d.b2TimeStep.prototype,"positionIterations",box2d.b2TimeStep.prototype.positionIterations),box2d.b2TimeStep.prototype.particleIterations=0,goog.exportProperty(box2d.b2TimeStep.prototype,"particleIterations",box2d.b2TimeStep.prototype.particleIterations),box2d.b2TimeStep.prototype.warmStarting=!1,goog.exportProperty(box2d.b2TimeStep.prototype,"warmStarting",box2d.b2TimeStep.prototype.warmStarting),box2d.b2TimeStep.prototype.Copy=function(o){return this.dt=o.dt,this.inv_dt=o.inv_dt,this.dtRatio=o.dtRatio,this.positionIterations=o.positionIterations,this.velocityIterations=o.velocityIterations,this.particleIterations=o.particleIterations,this.warmStarting=o.warmStarting,this},goog.exportProperty(box2d.b2TimeStep.prototype,"Copy",box2d.b2TimeStep.prototype.Copy),box2d.b2Position=function(){this.c=new box2d.b2Vec2},goog.exportSymbol("box2d.b2Position",box2d.b2Position),box2d.b2Position.prototype.c=null,goog.exportProperty(box2d.b2Position.prototype,"c",box2d.b2Position.prototype.c),box2d.b2Position.prototype.a=0,goog.exportProperty(box2d.b2Position.prototype,"a",box2d.b2Position.prototype.a),box2d.b2Position.MakeArray=function(o){return box2d.b2MakeArray(o,function(o){return new box2d.b2Position})},goog.exportProperty(box2d.b2Position,"MakeArray",box2d.b2Position.MakeArray),box2d.b2Velocity=function(){this.v=new box2d.b2Vec2},goog.exportSymbol("box2d.b2Velocity",box2d.b2Velocity),box2d.b2Velocity.prototype.v=null,goog.exportProperty(box2d.b2Velocity.prototype,"v",box2d.b2Velocity.prototype.v),box2d.b2Velocity.prototype.w=0,goog.exportProperty(box2d.b2Velocity.prototype,"w",box2d.b2Velocity.prototype.w),box2d.b2Velocity.MakeArray=function(o){return box2d.b2MakeArray(o,function(o){return new box2d.b2Velocity})},goog.exportProperty(box2d.b2Velocity,"MakeArray",box2d.b2Velocity.MakeArray),box2d.b2SolverData=function(){this.step=new box2d.b2TimeStep},goog.exportSymbol("box2d.b2SolverData",box2d.b2SolverData),box2d.b2SolverData.prototype.step=null,goog.exportProperty(box2d.b2SolverData.prototype,"step",box2d.b2SolverData.prototype.step),box2d.b2SolverData.prototype.positions=null,goog.exportProperty(box2d.b2SolverData.prototype,"positions",box2d.b2SolverData.prototype.positions),box2d.b2SolverData.prototype.velocities=null,goog.exportProperty(box2d.b2SolverData.prototype,"velocities",box2d.b2SolverData.prototype.velocities),box2d.b2WorldCallbacks={},box2d.b2DestructionListener=function(){},goog.exportSymbol("box2d.b2DestructionListener",box2d.b2DestructionListener),box2d.b2DestructionListener.prototype.SayGoodbyeJoint=function(o){},goog.exportProperty(box2d.b2DestructionListener.prototype,"SayGoodbyeJoint",box2d.b2DestructionListener.prototype.SayGoodbyeJoint),box2d.b2DestructionListener.prototype.SayGoodbyeFixture=function(o){},goog.exportProperty(box2d.b2DestructionListener.prototype,"SayGoodbyeFixture",box2d.b2DestructionListener.prototype.SayGoodbyeFixture),box2d.b2DestructionListener.prototype.SayGoodbyeParticleGroup=function(o){},box2d.b2DestructionListener.prototype.SayGoodbyeParticle=function(o,t){},box2d.b2ContactFilter=function(){},goog.exportSymbol("box2d.b2ContactFilter",box2d.b2ContactFilter),box2d.b2ContactFilter.prototype.ShouldCollide=function(o,t){var e=o.GetFilterData(),r=t.GetFilterData();return e.groupIndex===r.groupIndex&&0!==e.groupIndex?0<e.groupIndex:0!=(e.maskBits&r.categoryBits)&&0!=(e.categoryBits&r.maskBits)},goog.exportProperty(box2d.b2ContactFilter.prototype,"ShouldCollide",box2d.b2ContactFilter.prototype.ShouldCollide),box2d.b2ContactFilter.prototype.ShouldCollideFixtureParticle=function(o,t,e){return!0},goog.exportProperty(box2d.b2ContactFilter.prototype,"ShouldCollideFixtureParticle",box2d.b2ContactFilter.prototype.ShouldCollideFixtureParticle),box2d.b2ContactFilter.prototype.ShouldCollideParticleParticle=function(o,t,e){return!0},goog.exportProperty(box2d.b2ContactFilter.prototype,"ShouldCollideParticleParticle",box2d.b2ContactFilter.prototype.ShouldCollideParticleParticle),box2d.b2ContactFilter.b2_defaultFilter=new box2d.b2ContactFilter,box2d.b2ContactImpulse=function(){this.normalImpulses=box2d.b2MakeNumberArray(box2d.b2_maxManifoldPoints),this.tangentImpulses=box2d.b2MakeNumberArray(box2d.b2_maxManifoldPoints)},goog.exportSymbol("box2d.b2ContactImpulse",box2d.b2ContactImpulse),box2d.b2ContactImpulse.prototype.normalImpulses=null,goog.exportProperty(box2d.b2ContactImpulse.prototype,"normalImpulses",box2d.b2ContactImpulse.prototype.normalImpulses),box2d.b2ContactImpulse.prototype.tangentImpulses=null,goog.exportProperty(box2d.b2ContactImpulse.prototype,"tangentImpulses",box2d.b2ContactImpulse.prototype.tangentImpulses),box2d.b2ContactImpulse.prototype.count=0,goog.exportProperty(box2d.b2ContactImpulse.prototype,"count",box2d.b2ContactImpulse.prototype.count),box2d.b2ContactListener=function(){},goog.exportSymbol("box2d.b2ContactListener",box2d.b2ContactListener),box2d.b2ContactListener.prototype.BeginContact=function(o){},goog.exportProperty(box2d.b2ContactListener.prototype,"BeginContact",box2d.b2ContactListener.prototype.BeginContact),box2d.b2ContactListener.prototype.EndContact=function(o){},goog.exportProperty(box2d.b2ContactListener.prototype,"EndContact",box2d.b2ContactListener.prototype.EndContact),box2d.b2ContactListener.prototype.BeginContactFixtureParticle=function(o,t){},goog.exportProperty(box2d.b2ContactListener.prototype,"BeginContactFixtureParticle",box2d.b2ContactListener.prototype.BeginContactFixtureParticle),box2d.b2ContactListener.prototype.EndContactFixtureParticle=function(o,t,e){},goog.exportProperty(box2d.b2ContactListener.prototype,"EndContactFixtureParticle",box2d.b2ContactListener.prototype.EndContactFixtureParticle),box2d.b2ContactListener.prototype.BeginContactParticleParticle=function(o,t){},goog.exportProperty(box2d.b2ContactListener.prototype,"BeginContactParticleParticle",box2d.b2ContactListener.prototype.BeginContactParticleParticle),box2d.b2ContactListener.prototype.EndContactParticleParticle=function(o,t,e){},goog.exportProperty(box2d.b2ContactListener.prototype,"EndContactParticleParticle",box2d.b2ContactListener.prototype.EndContactParticleParticle),box2d.b2ContactListener.prototype.PreSolve=function(o,t){},goog.exportProperty(box2d.b2ContactListener.prototype,"PreSolve",box2d.b2ContactListener.prototype.PreSolve),box2d.b2ContactListener.prototype.PostSolve=function(o,t){},goog.exportProperty(box2d.b2ContactListener.prototype,"PostSolve",box2d.b2ContactListener.prototype.PostSolve),box2d.b2ContactListener.b2_defaultListener=new box2d.b2ContactListener,goog.exportProperty(box2d.b2ContactListener,"b2_defaultListener",box2d.b2ContactListener.b2_defaultListener),box2d.b2QueryCallback=function(){},goog.exportSymbol("box2d.b2QueryCallback",box2d.b2QueryCallback),box2d.b2QueryCallback.prototype.ReportFixture=function(o){return!0},goog.exportProperty(box2d.b2QueryCallback.prototype,"ReportFixture",box2d.b2QueryCallback.prototype.ReportFixture),box2d.b2QueryCallback.prototype.ReportParticle=function(o,t){return!1},goog.exportProperty(box2d.b2QueryCallback.prototype,"ReportParticle",box2d.b2QueryCallback.prototype.ReportParticle),box2d.b2QueryCallback.prototype.ShouldQueryParticleSystem=function(o){return!0},goog.exportProperty(box2d.b2QueryCallback.prototype,"ShouldQueryParticleSystem",box2d.b2QueryCallback.prototype.ShouldQueryParticleSystem),box2d.b2RayCastCallback=function(){},goog.exportSymbol("box2d.b2RayCastCallback",box2d.b2RayCastCallback),box2d.b2RayCastCallback.prototype.ReportFixture=function(o,t,e,r){return r},goog.exportProperty(box2d.b2RayCastCallback.prototype,"ReportFixture",box2d.b2RayCastCallback.prototype.ReportFixture),box2d.b2RayCastCallback.prototype.ReportParticle=function(o,t,e,r,i){return 0},goog.exportProperty(box2d.b2RayCastCallback.prototype,"ReportParticle",box2d.b2RayCastCallback.prototype.ReportParticle),box2d.b2RayCastCallback.prototype.ShouldQueryParticleSystem=function(o){return!0},goog.exportProperty(box2d.b2RayCastCallback.prototype,"ShouldQueryParticleSystem",box2d.b2RayCastCallback.prototype.ShouldQueryParticleSystem),box2d.b2BuoyancyController=function(){box2d.b2Controller.call(this),this.normal=new box2d.b2Vec2(0,1),this.velocity=new box2d.b2Vec2(0,0),this.gravity=new box2d.b2Vec2(0,0)},goog.inherits(box2d.b2BuoyancyController,box2d.b2Controller),goog.exportSymbol("box2d.b2BuoyancyController",box2d.b2BuoyancyController),box2d.b2BuoyancyController.prototype.normal=null,goog.exportProperty(box2d.b2BuoyancyController.prototype,"normal",box2d.b2BuoyancyController.prototype.normal),box2d.b2BuoyancyController.prototype.offset=0,goog.exportProperty(box2d.b2BuoyancyController.prototype,"offset",box2d.b2BuoyancyController.prototype.offset),box2d.b2BuoyancyController.prototype.density=0,goog.exportProperty(box2d.b2BuoyancyController.prototype,"density",box2d.b2BuoyancyController.prototype.density),box2d.b2BuoyancyController.prototype.velocity=null,goog.exportProperty(box2d.b2BuoyancyController.prototype,"velocity",box2d.b2BuoyancyController.prototype.velocity),box2d.b2BuoyancyController.prototype.linearDrag=0,goog.exportProperty(box2d.b2BuoyancyController.prototype,"linearDrag",box2d.b2BuoyancyController.prototype.linearDrag),box2d.b2BuoyancyController.prototype.angularDrag=0,goog.exportProperty(box2d.b2BuoyancyController.prototype,"angularDrag",box2d.b2BuoyancyController.prototype.angularDrag),box2d.b2BuoyancyController.prototype.useDensity=!1,goog.exportProperty(box2d.b2BuoyancyController.prototype,"useDensity",box2d.b2BuoyancyController.prototype.useDensity),box2d.b2BuoyancyController.prototype.useWorldGravity=!0,goog.exportProperty(box2d.b2BuoyancyController.prototype,"useWorldGravity",box2d.b2BuoyancyController.prototype.useWorldGravity),box2d.b2BuoyancyController.prototype.gravity=null,goog.exportProperty(box2d.b2BuoyancyController.prototype,"gravity",box2d.b2BuoyancyController.prototype.gravity),box2d.b2BuoyancyController.prototype.Step=function(o){if(this.m_bodyList)for(this.useWorldGravity&&this.gravity.Copy(this.GetWorld().GetGravity()),o=this.m_bodyList;o;o=o.nextBody){var t=o.body;if(t.IsAwake()){for(var e=new box2d.b2Vec2,r=new box2d.b2Vec2,i=0,b=0,p=t.GetFixtureList();p;p=p.m_next){var n=new box2d.b2Vec2,a=p.GetShape().ComputeSubmergedArea(this.normal,this.offset,t.GetTransform(),n);i=i+a;e.x+=a*n.x,e.y+=a*n.y;var s=0;b=b+a*(s=this.useDensity?p.GetDensity():1);r.x+=a*n.x*s,r.y+=a*n.y*s}e.x/=i,e.y/=i,r.x/=b,r.y/=b,i<box2d.b2_epsilon||((b=this.gravity.Clone().SelfNeg()).SelfMul(this.density*i),t.ApplyForce(b,r),(r=t.GetLinearVelocityFromWorldPoint(e,new box2d.b2Vec2)).SelfSub(this.velocity),r.SelfMul(-this.linearDrag*i),t.ApplyForce(r,e),t.ApplyTorque(-t.GetInertia()/t.GetMass()*i*t.GetAngularVelocity()*this.angularDrag))}}},goog.exportProperty(box2d.b2BuoyancyController.prototype,"Step",box2d.b2BuoyancyController.prototype.Step),box2d.b2BuoyancyController.prototype.Draw=function(o){var t=new box2d.b2Vec2,e=new box2d.b2Vec2;t.x=this.normal.x*this.offset+100*this.normal.y,t.y=this.normal.y*this.offset-100*this.normal.x,e.x=this.normal.x*this.offset-100*this.normal.y,e.y=this.normal.y*this.offset+100*this.normal.x;var r=new box2d.b2Color(0,0,.8);o.DrawSegment(t,e,r)},goog.exportProperty(box2d.b2BuoyancyController.prototype,"Draw",box2d.b2BuoyancyController.prototype.Draw),box2d.b2MixFriction=function(o,t){return box2d.b2Sqrt(o*t)},goog.exportSymbol("box2d.b2MixFriction",box2d.b2MixFriction),box2d.b2MixRestitution=function(o,t){return o>t?o:t},goog.exportSymbol("box2d.b2MixRestitution",box2d.b2MixRestitution),box2d.b2ContactEdge=function(){},goog.exportSymbol("box2d.b2ContactEdge",box2d.b2ContactEdge),box2d.b2ContactEdge.prototype.other=null,goog.exportProperty(box2d.b2ContactEdge.prototype,"other",box2d.b2ContactEdge.prototype.other),box2d.b2ContactEdge.prototype.contact=null,goog.exportProperty(box2d.b2ContactEdge.prototype,"contact",box2d.b2ContactEdge.prototype.contact),box2d.b2ContactEdge.prototype.prev=null,goog.exportProperty(box2d.b2ContactEdge.prototype,"prev",box2d.b2ContactEdge.prototype.prev),box2d.b2ContactEdge.prototype.next=null,goog.exportProperty(box2d.b2ContactEdge.prototype,"next",box2d.b2ContactEdge.prototype.next),box2d.b2Contact=function(){this.m_nodeA=new box2d.b2ContactEdge,this.m_nodeB=new box2d.b2ContactEdge,this.m_manifold=new box2d.b2Manifold,this.m_oldManifold=new box2d.b2Manifold},goog.exportSymbol("box2d.b2Contact",box2d.b2Contact),box2d.b2Contact.prototype.m_flag_islandFlag=!1,goog.exportProperty(box2d.b2Contact.prototype,"m_flag_islandFlag",box2d.b2Contact.prototype.m_flag_islandFlag),box2d.b2Contact.prototype.m_flag_touchingFlag=!1,goog.exportProperty(box2d.b2Contact.prototype,"m_flag_touchingFlag",box2d.b2Contact.prototype.m_flag_touchingFlag),box2d.b2Contact.prototype.m_flag_enabledFlag=!1,goog.exportProperty(box2d.b2Contact.prototype,"m_flag_enabledFlag",box2d.b2Contact.prototype.m_flag_enabledFlag),box2d.b2Contact.prototype.m_flag_filterFlag=!1,goog.exportProperty(box2d.b2Contact.prototype,"m_flag_filterFlag",box2d.b2Contact.prototype.m_flag_filterFlag),box2d.b2Contact.prototype.m_flag_bulletHitFlag=!1,goog.exportProperty(box2d.b2Contact.prototype,"m_flag_bulletHitFlag",box2d.b2Contact.prototype.m_flag_bulletHitFlag),box2d.b2Contact.prototype.m_flag_toiFlag=!1,goog.exportProperty(box2d.b2Contact.prototype,"m_flag_toiFlag",box2d.b2Contact.prototype.m_flag_toiFlag),box2d.b2Contact.prototype.m_prev=null,goog.exportProperty(box2d.b2Contact.prototype,"m_prev",box2d.b2Contact.prototype.m_prev),box2d.b2Contact.prototype.m_next=null,goog.exportProperty(box2d.b2Contact.prototype,"m_next",box2d.b2Contact.prototype.m_next),box2d.b2Contact.prototype.m_nodeA=null,goog.exportProperty(box2d.b2Contact.prototype,"m_nodeA",box2d.b2Contact.prototype.m_nodeA),box2d.b2Contact.prototype.m_nodeB=null,goog.exportProperty(box2d.b2Contact.prototype,"m_nodeB",box2d.b2Contact.prototype.m_nodeB),box2d.b2Contact.prototype.m_fixtureA=null,goog.exportProperty(box2d.b2Contact.prototype,"m_fixtureA",box2d.b2Contact.prototype.m_fixtureA),box2d.b2Contact.prototype.m_fixtureB=null,goog.exportProperty(box2d.b2Contact.prototype,"m_fixtureB",box2d.b2Contact.prototype.m_fixtureB),box2d.b2Contact.prototype.m_indexA=0,goog.exportProperty(box2d.b2Contact.prototype,"m_indexA",box2d.b2Contact.prototype.m_indexA),box2d.b2Contact.prototype.m_indexB=0,goog.exportProperty(box2d.b2Contact.prototype,"m_indexB",box2d.b2Contact.prototype.m_indexB),box2d.b2Contact.prototype.m_manifold=null,goog.exportProperty(box2d.b2Contact.prototype,"m_manifold",box2d.b2Contact.prototype.m_manifold),box2d.b2Contact.prototype.m_toiCount=0,goog.exportProperty(box2d.b2Contact.prototype,"m_toiCount",box2d.b2Contact.prototype.m_toiCount),box2d.b2Contact.prototype.m_toi=0,goog.exportProperty(box2d.b2Contact.prototype,"m_toi",box2d.b2Contact.prototype.m_toi),box2d.b2Contact.prototype.m_friction=0,goog.exportProperty(box2d.b2Contact.prototype,"m_friction",box2d.b2Contact.prototype.m_friction),box2d.b2Contact.prototype.m_restitution=0,goog.exportProperty(box2d.b2Contact.prototype,"m_restitution",box2d.b2Contact.prototype.m_restitution),box2d.b2Contact.prototype.m_tangentSpeed=0,goog.exportProperty(box2d.b2Contact.prototype,"m_tangentSpeed",box2d.b2Contact.prototype.m_tangentSpeed),box2d.b2Contact.prototype.m_oldManifold=null,goog.exportProperty(box2d.b2Contact.prototype,"m_oldManifold",box2d.b2Contact.prototype.m_oldManifold),box2d.b2Contact.prototype.GetManifold=function(){return this.m_manifold},goog.exportProperty(box2d.b2Contact.prototype,"GetManifold",box2d.b2Contact.prototype.GetManifold),box2d.b2Contact.prototype.GetWorldManifold=function(o){var t=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody(),r=this.m_fixtureA.GetShape(),i=this.m_fixtureB.GetShape();o.Initialize(this.m_manifold,t.GetTransform(),r.m_radius,e.GetTransform(),i.m_radius)},goog.exportProperty(box2d.b2Contact.prototype,"GetWorldManifold",box2d.b2Contact.prototype.GetWorldManifold),box2d.b2Contact.prototype.IsTouching=function(){return this.m_flag_touchingFlag},goog.exportProperty(box2d.b2Contact.prototype,"IsTouching",box2d.b2Contact.prototype.IsTouching),box2d.b2Contact.prototype.SetEnabled=function(o){this.m_flag_enabledFlag=o},goog.exportProperty(box2d.b2Contact.prototype,"SetEnabled",box2d.b2Contact.prototype.SetEnabled),box2d.b2Contact.prototype.IsEnabled=function(){return this.m_flag_enabledFlag},goog.exportProperty(box2d.b2Contact.prototype,"IsEnabled",box2d.b2Contact.prototype.IsEnabled),box2d.b2Contact.prototype.GetNext=function(){return this.m_next},goog.exportProperty(box2d.b2Contact.prototype,"GetNext",box2d.b2Contact.prototype.GetNext),box2d.b2Contact.prototype.GetFixtureA=function(){return this.m_fixtureA},goog.exportProperty(box2d.b2Contact.prototype,"GetFixtureA",box2d.b2Contact.prototype.GetFixtureA),box2d.b2Contact.prototype.GetChildIndexA=function(){return this.m_indexA},goog.exportProperty(box2d.b2Contact.prototype,"GetChildIndexA",box2d.b2Contact.prototype.GetChildIndexA),box2d.b2Contact.prototype.GetFixtureB=function(){return this.m_fixtureB},goog.exportProperty(box2d.b2Contact.prototype,"GetFixtureB",box2d.b2Contact.prototype.GetFixtureB),box2d.b2Contact.prototype.GetChildIndexB=function(){return this.m_indexB},goog.exportProperty(box2d.b2Contact.prototype,"GetChildIndexB",box2d.b2Contact.prototype.GetChildIndexB),box2d.b2Contact.prototype.Evaluate=function(o,t,e){},goog.exportProperty(box2d.b2Contact.prototype,"Evaluate",box2d.b2Contact.prototype.Evaluate),box2d.b2Contact.prototype.FlagForFiltering=function(){this.m_flag_filterFlag=!0},goog.exportProperty(box2d.b2Contact.prototype,"FlagForFiltering",box2d.b2Contact.prototype.FlagForFiltering),box2d.b2Contact.prototype.SetFriction=function(o){this.m_friction=o},goog.exportProperty(box2d.b2Contact.prototype,"SetFriction",box2d.b2Contact.prototype.SetFriction),box2d.b2Contact.prototype.GetFriction=function(){return this.m_friction},goog.exportProperty(box2d.b2Contact.prototype,"GetFriction",box2d.b2Contact.prototype.GetFriction),box2d.b2Contact.prototype.ResetFriction=function(){this.m_friction=box2d.b2MixFriction(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)},goog.exportProperty(box2d.b2Contact.prototype,"ResetFriction",box2d.b2Contact.prototype.ResetFriction),box2d.b2Contact.prototype.SetRestitution=function(o){this.m_restitution=o},goog.exportProperty(box2d.b2Contact.prototype,"SetRestitution",box2d.b2Contact.prototype.SetRestitution),box2d.b2Contact.prototype.GetRestitution=function(){return this.m_restitution},goog.exportProperty(box2d.b2Contact.prototype,"GetRestitution",box2d.b2Contact.prototype.GetRestitution),box2d.b2Contact.prototype.ResetRestitution=function(){this.m_restitution=box2d.b2MixRestitution(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},goog.exportProperty(box2d.b2Contact.prototype,"ResetRestitution",box2d.b2Contact.prototype.ResetRestitution),box2d.b2Contact.prototype.SetTangentSpeed=function(o){this.m_tangentSpeed=o},goog.exportProperty(box2d.b2Contact.prototype,"SetTangentSpeed",box2d.b2Contact.prototype.SetTangentSpeed),box2d.b2Contact.prototype.GetTangentSpeed=function(){return this.m_tangentSpeed},goog.exportProperty(box2d.b2Contact.prototype,"GetTangentSpeed",box2d.b2Contact.prototype.GetTangentSpeed),box2d.b2Contact.prototype.Reset=function(o,t,e,r){this.m_flag_enabledFlag=!0,this.m_fixtureA=o,this.m_fixtureB=e,this.m_indexA=t,this.m_indexB=r,this.m_manifold.pointCount=0,this.m_next=this.m_prev=null,this.m_nodeA.contact=null,this.m_nodeA.prev=null,this.m_nodeA.next=null,this.m_nodeA.other=null,this.m_nodeB.contact=null,this.m_nodeB.prev=null,this.m_nodeB.next=null,this.m_nodeB.other=null,this.m_toiCount=0,this.m_friction=box2d.b2MixFriction(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=box2d.b2MixRestitution(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},goog.exportProperty(box2d.b2Contact.prototype,"Reset",box2d.b2Contact.prototype.Reset),box2d.b2Contact.prototype.Update=function(o){var t=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=t,this.m_flag_enabledFlag=!0;var e=!1,r=(t=this.m_flag_touchingFlag,this.m_fixtureA.IsSensor()),i=this.m_fixtureB.IsSensor(),b=(r=r||i,i=this.m_fixtureA.GetBody(),this.m_fixtureB.GetBody()),p=(e=i.GetTransform(),b.GetTransform());if(r)i=this.m_fixtureA.GetShape(),b=this.m_fixtureB.GetShape(),e=box2d.b2TestOverlapShape(i,this.m_indexA,b,this.m_indexB,e,p),this.m_manifold.pointCount=0;else{for(this.Evaluate(this.m_manifold,e,p),e=0<this.m_manifold.pointCount,p=0;p<this.m_manifold.pointCount;++p){var n=this.m_manifold.points[p];n.normalImpulse=0,n.tangentImpulse=0;for(var a=n.id,s=0;s<this.m_oldManifold.pointCount;++s){var d=this.m_oldManifold.points[s];if(d.id.key===a.key){n.normalImpulse=d.normalImpulse,n.tangentImpulse=d.tangentImpulse;break}}}e!==t&&(i.SetAwake(!0),b.SetAwake(!0))}this.m_flag_touchingFlag=e,!t&&e&&o&&o.BeginContact(this),t&&!e&&o&&o.EndContact(this),!r&&e&&o&&o.PreSolve(this,this.m_oldManifold)},goog.exportProperty(box2d.b2Contact.prototype,"Update",box2d.b2Contact.prototype.Update),box2d.b2Contact.prototype.ComputeTOI=function(o,t){var e=box2d.b2Contact.prototype.ComputeTOI.s_input;e.proxyA.SetShape(this.m_fixtureA.GetShape(),this.m_indexA),e.proxyB.SetShape(this.m_fixtureB.GetShape(),this.m_indexB),e.sweepA.Copy(o),e.sweepB.Copy(t),e.tMax=box2d.b2_linearSlop;var r=box2d.b2Contact.prototype.ComputeTOI.s_output;return box2d.b2TimeOfImpact(r,e),r.t},goog.exportProperty(box2d.b2Contact.prototype,"ComputeTOI",box2d.b2Contact.prototype.ComputeTOI),box2d.b2Contact.prototype.ComputeTOI.s_input=new box2d.b2TOIInput,box2d.b2Contact.prototype.ComputeTOI.s_output=new box2d.b2TOIOutput,box2d.b2ChainAndCircleContact=function(){box2d.b2Contact.call(this)},goog.inherits(box2d.b2ChainAndCircleContact,box2d.b2Contact),goog.exportSymbol("box2d.b2ChainAndCircleContact",box2d.b2ChainAndCircleContact),box2d.b2ChainAndCircleContact.Create=function(o){return new box2d.b2ChainAndCircleContact},goog.exportProperty(box2d.b2ChainAndCircleContact,"Create",box2d.b2ChainAndCircleContact.Create),box2d.b2ChainAndCircleContact.Destroy=function(o,t){},goog.exportProperty(box2d.b2ChainAndCircleContact,"Destroy",box2d.b2ChainAndCircleContact.Destroy),box2d.b2ChainAndCircleContact.prototype.Evaluate=function(o,t,e){var r=this.m_fixtureA.GetShape(),i=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(r instanceof box2d.b2ChainShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(i instanceof box2d.b2CircleShape);var b=box2d.b2ChainAndCircleContact.prototype.Evaluate.s_edge;(r instanceof box2d.b2ChainShape?r:null).GetChildEdge(b,this.m_indexA),box2d.b2CollideEdgeAndCircle(o,b,t,i instanceof box2d.b2CircleShape?i:null,e)},goog.exportProperty(box2d.b2ChainAndCircleContact.prototype,"Evaluate",box2d.b2ChainAndCircleContact.prototype.Evaluate),box2d.b2ChainAndCircleContact.prototype.Evaluate.s_edge=new box2d.b2EdgeShape,box2d.b2ChainAndPolygonContact=function(){box2d.b2Contact.call(this)},goog.inherits(box2d.b2ChainAndPolygonContact,box2d.b2Contact),goog.exportSymbol("box2d.b2ChainAndPolygonContact",box2d.b2ChainAndPolygonContact),box2d.b2ChainAndPolygonContact.Create=function(o){return new box2d.b2ChainAndPolygonContact},goog.exportProperty(box2d.b2ChainAndPolygonContact,"Create",box2d.b2ChainAndPolygonContact.Create),box2d.b2ChainAndPolygonContact.Destroy=function(o,t){},goog.exportProperty(box2d.b2ChainAndPolygonContact,"Destroy",box2d.b2ChainAndPolygonContact.Destroy),box2d.b2ChainAndPolygonContact.prototype.Evaluate=function(o,t,e){var r=this.m_fixtureA.GetShape(),i=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(r instanceof box2d.b2ChainShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(i instanceof box2d.b2PolygonShape);var b=box2d.b2ChainAndPolygonContact.prototype.Evaluate.s_edge;(r instanceof box2d.b2ChainShape?r:null).GetChildEdge(b,this.m_indexA),box2d.b2CollideEdgeAndPolygon(o,b,t,i instanceof box2d.b2PolygonShape?i:null,e)},goog.exportProperty(box2d.b2ChainAndPolygonContact.prototype,"Evaluate",box2d.b2ChainAndPolygonContact.prototype.Evaluate),box2d.b2ChainAndPolygonContact.prototype.Evaluate.s_edge=new box2d.b2EdgeShape,box2d.b2CircleContact=function(){box2d.b2Contact.call(this)},goog.inherits(box2d.b2CircleContact,box2d.b2Contact),goog.exportSymbol("box2d.b2CircleContact",box2d.b2CircleContact),box2d.b2CircleContact.Create=function(o){return new box2d.b2CircleContact},goog.exportProperty(box2d.b2CircleContact,"Create",box2d.b2CircleContact.Create),box2d.b2CircleContact.Destroy=function(o,t){},goog.exportProperty(box2d.b2CircleContact,"Destroy",box2d.b2CircleContact.Destroy),box2d.b2CircleContact.prototype.Evaluate=function(o,t,e){var r=this.m_fixtureA.GetShape(),i=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(r instanceof box2d.b2CircleShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(i instanceof box2d.b2CircleShape),box2d.b2CollideCircles(o,r instanceof box2d.b2CircleShape?r:null,t,i instanceof box2d.b2CircleShape?i:null,e)},goog.exportProperty(box2d.b2CircleContact.prototype,"Evaluate",box2d.b2CircleContact.prototype.Evaluate),box2d.b2ContactRegister=function(){},goog.exportSymbol("box2d.b2ContactRegister",box2d.b2ContactRegister),box2d.b2ContactRegister.prototype.createFcn=null,box2d.b2ContactRegister.prototype.destroyFcn=null,box2d.b2ContactRegister.prototype.primary=!1,box2d.b2ContactFactory=function(o){this.m_allocator=o,this.InitializeRegisters()},goog.exportSymbol("box2d.b2ContactFactory",box2d.b2ContactFactory),box2d.b2ContactFactory.prototype.m_allocator=null,box2d.b2ContactFactory.prototype.AddType=function(o,t,e,r){var i=box2d.b2MakeArray(256,function(t){return o()});t=function(t){return 0<i.length?i.pop():o(t)};var b=function(o,t){i.push(o)};this.m_registers[e][r].pool=i,this.m_registers[e][r].createFcn=t,this.m_registers[e][r].destroyFcn=b,this.m_registers[e][r].primary=!0,e!==r&&(this.m_registers[r][e].pool=i,this.m_registers[r][e].createFcn=t,this.m_registers[r][e].destroyFcn=b,this.m_registers[r][e].primary=!1)},goog.exportProperty(box2d.b2ContactFactory.prototype,"AddType",box2d.b2ContactFactory.prototype.AddType),box2d.b2ContactFactory.prototype.InitializeRegisters=function(){this.m_registers=Array(box2d.b2ShapeType.e_shapeTypeCount);for(var o=0;o<box2d.b2ShapeType.e_shapeTypeCount;o++){this.m_registers[o]=Array(box2d.b2ShapeType.e_shapeTypeCount);for(var t=0;t<box2d.b2ShapeType.e_shapeTypeCount;t++)this.m_registers[o][t]=new box2d.b2ContactRegister}this.AddType(box2d.b2CircleContact.Create,box2d.b2CircleContact.Destroy,box2d.b2ShapeType.e_circleShape,box2d.b2ShapeType.e_circleShape),this.AddType(box2d.b2PolygonAndCircleContact.Create,box2d.b2PolygonAndCircleContact.Destroy,box2d.b2ShapeType.e_polygonShape,box2d.b2ShapeType.e_circleShape),this.AddType(box2d.b2PolygonContact.Create,box2d.b2PolygonContact.Destroy,box2d.b2ShapeType.e_polygonShape,box2d.b2ShapeType.e_polygonShape),this.AddType(box2d.b2EdgeAndCircleContact.Create,box2d.b2EdgeAndCircleContact.Destroy,box2d.b2ShapeType.e_edgeShape,box2d.b2ShapeType.e_circleShape),this.AddType(box2d.b2EdgeAndPolygonContact.Create,box2d.b2EdgeAndPolygonContact.Destroy,box2d.b2ShapeType.e_edgeShape,box2d.b2ShapeType.e_polygonShape),this.AddType(box2d.b2ChainAndCircleContact.Create,box2d.b2ChainAndCircleContact.Destroy,box2d.b2ShapeType.e_chainShape,box2d.b2ShapeType.e_circleShape),this.AddType(box2d.b2ChainAndPolygonContact.Create,box2d.b2ChainAndPolygonContact.Destroy,box2d.b2ShapeType.e_chainShape,box2d.b2ShapeType.e_polygonShape)},goog.exportProperty(box2d.b2ContactFactory.prototype,"InitializeRegisters",box2d.b2ContactFactory.prototype.InitializeRegisters),box2d.b2ContactFactory.prototype.Create=function(o,t,e,r){var i=o.GetType(),b=e.GetType();return box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=i&&i<box2d.b2ShapeType.e_shapeTypeCount),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=b&&b<box2d.b2ShapeType.e_shapeTypeCount),null!==(b=(i=this.m_registers[i][b]).createFcn)?(i.primary?(i=b(this.m_allocator)).Reset(o,t,e,r):(i=b(this.m_allocator)).Reset(e,r,o,t),i):null},goog.exportProperty(box2d.b2ContactFactory.prototype,"Create",box2d.b2ContactFactory.prototype.Create),box2d.b2ContactFactory.prototype.Destroy=function(o){var t=o.m_fixtureA,e=o.m_fixtureB;0<o.m_manifold.pointCount&&!t.IsSensor()&&!e.IsSensor()&&(t.GetBody().SetAwake(!0),e.GetBody().SetAwake(!0)),t=t.GetType(),e=e.GetType(),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=t&&e<box2d.b2ShapeType.e_shapeTypeCount),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=t&&e<box2d.b2ShapeType.e_shapeTypeCount),(e=this.m_registers[t][e].destroyFcn)(o,this.m_allocator)},goog.exportProperty(box2d.b2ContactFactory.prototype,"Destroy",box2d.b2ContactFactory.prototype.Destroy),box2d.b2ContactManager=function(){this.m_broadPhase=new box2d.b2BroadPhase,this.m_contactFactory=new box2d.b2ContactFactory(this.m_allocator)},box2d.b2ContactManager.prototype.m_broadPhase=null,goog.exportSymbol("box2d.b2ContactManager.prototype.m_broadPhase",box2d.b2ContactManager.prototype.m_broadPhase),box2d.b2ContactManager.prototype.m_contactList=null,goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactList",box2d.b2ContactManager.prototype.m_contactList),box2d.b2ContactManager.prototype.m_contactCount=0,goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactCount",box2d.b2ContactManager.prototype.m_contactCount),box2d.b2ContactManager.prototype.m_contactFilter=box2d.b2ContactFilter.b2_defaultFilter,goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactFilter",box2d.b2ContactManager.prototype.m_contactFilter),box2d.b2ContactManager.prototype.m_contactListener=box2d.b2ContactListener.b2_defaultListener,goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactListener",box2d.b2ContactManager.prototype.m_contactListener),box2d.b2ContactManager.prototype.m_allocator=null,goog.exportSymbol("box2d.b2ContactManager.prototype.m_allocator",box2d.b2ContactManager.prototype.m_allocator),box2d.b2ContactManager.prototype.m_contactFactory=null,goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactFactory",box2d.b2ContactManager.prototype.m_contactFactory),box2d.b2ContactManager.prototype.Destroy=function(o){var t=o.GetFixtureA(),e=o.GetFixtureB();t=t.GetBody(),e=e.GetBody();this.m_contactListener&&o.IsTouching()&&this.m_contactListener.EndContact(o),o.m_prev&&(o.m_prev.m_next=o.m_next),o.m_next&&(o.m_next.m_prev=o.m_prev),o===this.m_contactList&&(this.m_contactList=o.m_next),o.m_nodeA.prev&&(o.m_nodeA.prev.next=o.m_nodeA.next),o.m_nodeA.next&&(o.m_nodeA.next.prev=o.m_nodeA.prev),o.m_nodeA===t.m_contactList&&(t.m_contactList=o.m_nodeA.next),o.m_nodeB.prev&&(o.m_nodeB.prev.next=o.m_nodeB.next),o.m_nodeB.next&&(o.m_nodeB.next.prev=o.m_nodeB.prev),o.m_nodeB===e.m_contactList&&(e.m_contactList=o.m_nodeB.next),this.m_contactFactory.Destroy(o),--this.m_contactCount},goog.exportSymbol("box2d.b2ContactManager.prototype.Destroy",box2d.b2ContactManager.prototype.Destroy),box2d.b2ContactManager.prototype.Collide=function(){for(var o=this.m_contactList;o;){var t=o.GetFixtureA(),e=o.GetFixtureB(),r=o.GetChildIndexA(),i=o.GetChildIndexB(),b=t.GetBody(),p=e.GetBody();if(o.m_flag_filterFlag){if(!p.ShouldCollide(b)){o=(t=o).m_next,this.Destroy(t);continue}if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(t,e)){o=(t=o).m_next,this.Destroy(t);continue}o.m_flag_filterFlag=!1}b=b.IsAwake()&&b.m_type!==box2d.b2BodyType.b2_staticBody,p=p.IsAwake()&&p.m_type!==box2d.b2BodyType.b2_staticBody,b||p?this.m_broadPhase.TestOverlap(t.m_proxies[r].proxy,e.m_proxies[i].proxy)?(o.Update(this.m_contactListener),o=o.m_next):(o=(t=o).m_next,this.Destroy(t)):o=o.m_next}},goog.exportSymbol("box2d.b2ContactManager.prototype.Collide",box2d.b2ContactManager.prototype.Collide),box2d.b2ContactManager.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(this)},goog.exportSymbol("box2d.b2ContactManager.prototype.FindNewContacts",box2d.b2ContactManager.prototype.FindNewContacts),box2d.b2ContactManager.prototype.AddPair=function(o,t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(o instanceof box2d.b2FixtureProxy),box2d.ENABLE_ASSERTS&&box2d.b2Assert(t instanceof box2d.b2FixtureProxy);var e=o.fixture,r=t.fixture,i=o.childIndex,b=t.childIndex,p=e.GetBody(),n=r.GetBody();if(p!==n){for(var a=n.GetContactList();a;){if(a.other===p){var s=a.contact.GetFixtureA(),d=a.contact.GetFixtureB(),x=a.contact.GetChildIndexA(),l=a.contact.GetChildIndexB();if(s===e&&d===r&&x===i&&l===b||s===r&&d===e&&x===b&&l===i)return}a=a.next}!n.ShouldCollide(p)||this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(e,r)||null!==(i=this.m_contactFactory.Create(e,i,r,b))&&(e=i.GetFixtureA(),r=i.GetFixtureB(),p=e.m_body,n=r.m_body,i.m_prev=null,i.m_next=this.m_contactList,null!==this.m_contactList&&(this.m_contactList.m_prev=i),this.m_contactList=i,i.m_nodeA.contact=i,i.m_nodeA.other=n,i.m_nodeA.prev=null,i.m_nodeA.next=p.m_contactList,null!==p.m_contactList&&(p.m_contactList.prev=i.m_nodeA),p.m_contactList=i.m_nodeA,i.m_nodeB.contact=i,i.m_nodeB.other=p,i.m_nodeB.prev=null,i.m_nodeB.next=n.m_contactList,null!==n.m_contactList&&(n.m_contactList.prev=i.m_nodeB),n.m_contactList=i.m_nodeB,e.IsSensor()||r.IsSensor()||(p.SetAwake(!0),n.SetAwake(!0)),++this.m_contactCount)}},goog.exportSymbol("box2d.b2ContactManager.prototype.AddPair",box2d.b2ContactManager.prototype.AddPair),box2d.b2EdgeAndCircleContact=function(){box2d.b2Contact.call(this)},goog.inherits(box2d.b2EdgeAndCircleContact,box2d.b2Contact),goog.exportSymbol("box2d.b2EdgeAndCircleContact",box2d.b2EdgeAndCircleContact),box2d.b2EdgeAndCircleContact.Create=function(o){return new box2d.b2EdgeAndCircleContact},goog.exportProperty(box2d.b2EdgeAndCircleContact,"Create",box2d.b2EdgeAndCircleContact.Create),box2d.b2EdgeAndCircleContact.Destroy=function(o,t){},goog.exportProperty(box2d.b2EdgeAndCircleContact,"Destroy",box2d.b2EdgeAndCircleContact.Destroy),box2d.b2EdgeAndCircleContact.prototype.Evaluate=function(o,t,e){var r=this.m_fixtureA.GetShape(),i=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(r instanceof box2d.b2EdgeShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(i instanceof box2d.b2CircleShape),box2d.b2CollideEdgeAndCircle(o,r instanceof box2d.b2EdgeShape?r:null,t,i instanceof box2d.b2CircleShape?i:null,e)},goog.exportProperty(box2d.b2EdgeAndCircleContact.prototype,"Evaluate",box2d.b2EdgeAndCircleContact.prototype.Evaluate),box2d.b2EdgeAndPolygonContact=function(){box2d.b2Contact.call(this)},goog.inherits(box2d.b2EdgeAndPolygonContact,box2d.b2Contact),goog.exportSymbol("box2d.b2EdgeAndPolygonContact",box2d.b2EdgeAndPolygonContact),box2d.b2EdgeAndPolygonContact.Create=function(o){return new box2d.b2EdgeAndPolygonContact},goog.exportProperty(box2d.b2EdgeAndPolygonContact,"Create",box2d.b2EdgeAndPolygonContact.Create),box2d.b2EdgeAndPolygonContact.Destroy=function(o,t){},goog.exportProperty(box2d.b2EdgeAndPolygonContact,"Destroy",box2d.b2EdgeAndPolygonContact.Destroy),box2d.b2EdgeAndPolygonContact.prototype.Evaluate=function(o,t,e){var r=this.m_fixtureA.GetShape(),i=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(r instanceof box2d.b2EdgeShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(i instanceof box2d.b2PolygonShape),box2d.b2CollideEdgeAndPolygon(o,r instanceof box2d.b2EdgeShape?r:null,t,i instanceof box2d.b2PolygonShape?i:null,e)},goog.exportProperty(box2d.b2EdgeAndPolygonContact.prototype,"Evaluate",box2d.b2EdgeAndPolygonContact.prototype.Evaluate),box2d.b2PolygonAndCircleContact=function(){box2d.b2Contact.call(this)},goog.inherits(box2d.b2PolygonAndCircleContact,box2d.b2Contact),goog.exportSymbol("box2d.b2PolygonAndCircleContact",box2d.b2PolygonAndCircleContact),box2d.b2PolygonAndCircleContact.Create=function(o){return new box2d.b2PolygonAndCircleContact},goog.exportProperty(box2d.b2PolygonAndCircleContact,"Create",box2d.b2PolygonAndCircleContact.Create),box2d.b2PolygonAndCircleContact.Destroy=function(o,t){},goog.exportProperty(box2d.b2PolygonAndCircleContact,"Destroy",box2d.b2PolygonAndCircleContact.Destroy),box2d.b2PolygonAndCircleContact.prototype.Evaluate=function(o,t,e){var r=this.m_fixtureA.GetShape(),i=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(r instanceof box2d.b2PolygonShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(i instanceof box2d.b2CircleShape),box2d.b2CollidePolygonAndCircle(o,r instanceof box2d.b2PolygonShape?r:null,t,i instanceof box2d.b2CircleShape?i:null,e)},goog.exportProperty(box2d.b2PolygonAndCircleContact.prototype,"Evaluate",box2d.b2PolygonAndCircleContact.prototype.Evaluate),box2d.b2PolygonContact=function(){box2d.b2Contact.call(this)},goog.inherits(box2d.b2PolygonContact,box2d.b2Contact),goog.exportSymbol("box2d.b2PolygonContact",box2d.b2PolygonContact),box2d.b2PolygonContact.Create=function(o){return new box2d.b2PolygonContact},goog.exportProperty(box2d.b2PolygonContact,"Create",box2d.b2PolygonContact.Create),box2d.b2PolygonContact.Destroy=function(o,t){},goog.exportProperty(box2d.b2PolygonContact,"Destroy",box2d.b2PolygonContact.Destroy),box2d.b2PolygonContact.prototype.Evaluate=function(o,t,e){var r=this.m_fixtureA.GetShape(),i=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(r instanceof box2d.b2PolygonShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(i instanceof box2d.b2PolygonShape),box2d.b2CollidePolygons(o,r instanceof box2d.b2PolygonShape?r:null,t,i instanceof box2d.b2PolygonShape?i:null,e)},goog.exportProperty(box2d.b2PolygonContact.prototype,"Evaluate",box2d.b2PolygonContact.prototype.Evaluate),box2d.g_blockSolve=!0,box2d.b2VelocityConstraintPoint=function(){this.rA=new box2d.b2Vec2,this.rB=new box2d.b2Vec2},goog.exportSymbol("box2d.b2VelocityConstraintPoint",box2d.b2VelocityConstraintPoint),box2d.b2VelocityConstraintPoint.prototype.rA=null,goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"rA",box2d.b2VelocityConstraintPoint.prototype.rA),box2d.b2VelocityConstraintPoint.prototype.rB=null,goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"rB",box2d.b2VelocityConstraintPoint.prototype.rB),box2d.b2VelocityConstraintPoint.prototype.normalImpulse=0;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"normalImpulse",box2d.b2VelocityConstraintPoint.prototype.normalImpulse),box2d.b2VelocityConstraintPoint.prototype.tangentImpulse=0,goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"tangentImpulse",box2d.b2VelocityConstraintPoint.prototype.tangentImpulse),box2d.b2VelocityConstraintPoint.prototype.normalMass=0,goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"normalMass",box2d.b2VelocityConstraintPoint.prototype.normalMass),box2d.b2VelocityConstraintPoint.prototype.tangentMass=0,goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"tangentMass",box2d.b2VelocityConstraintPoint.prototype.tangentMass),box2d.b2VelocityConstraintPoint.prototype.velocityBias=0,goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"velocityBias",box2d.b2VelocityConstraintPoint.prototype.velocityBias),box2d.b2VelocityConstraintPoint.MakeArray=function(o){return box2d.b2MakeArray(o,function(o){return new box2d.b2VelocityConstraintPoint})},goog.exportProperty(box2d.b2VelocityConstraintPoint,"MakeArray",box2d.b2VelocityConstraintPoint.MakeArray),box2d.b2ContactVelocityConstraint=function(){this.points=box2d.b2VelocityConstraintPoint.MakeArray(box2d.b2_maxManifoldPoints),this.normal=new box2d.b2Vec2,this.tangent=new box2d.b2Vec2,this.normalMass=new box2d.b2Mat22,this.K=new box2d.b2Mat22},goog.exportSymbol("box2d.b2ContactVelocityConstraint",box2d.b2ContactVelocityConstraint),box2d.b2ContactVelocityConstraint.prototype.points=null,goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"points",box2d.b2ContactVelocityConstraint.prototype.points),box2d.b2ContactVelocityConstraint.prototype.normal=null,goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"normal",box2d.b2ContactVelocityConstraint.prototype.normal),box2d.b2ContactVelocityConstraint.prototype.tangent=null,goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"tangent",box2d.b2ContactVelocityConstraint.prototype.tangent),box2d.b2ContactVelocityConstraint.prototype.normalMass=null,goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"normalMass",box2d.b2ContactVelocityConstraint.prototype.normalMass),box2d.b2ContactVelocityConstraint.prototype.K=null,goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"K",box2d.b2ContactVelocityConstraint.prototype.K),box2d.b2ContactVelocityConstraint.prototype.indexA=0,goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"indexA",box2d.b2ContactVelocityConstraint.prototype.indexA),box2d.b2ContactVelocityConstraint.prototype.indexB=0,goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"indexB",box2d.b2ContactVelocityConstraint.prototype.indexB),box2d.b2ContactVelocityConstraint.prototype.invMassA=0,goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"invMassA",box2d.b2ContactVelocityConstraint.prototype.invMassA),box2d.b2ContactVelocityConstraint.prototype.invMassB=0,goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"invMassB",box2d.b2ContactVelocityConstraint.prototype.invMassB),box2d.b2ContactVelocityConstraint.prototype.invIA=0,goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"invIA",box2d.b2ContactVelocityConstraint.prototype.invIA),box2d.b2ContactVelocityConstraint.prototype.invIB=0,goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"invIB",box2d.b2ContactVelocityConstraint.prototype.invIB),box2d.b2ContactVelocityConstraint.prototype.friction=0,goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"friction",box2d.b2ContactVelocityConstraint.prototype.friction),box2d.b2ContactVelocityConstraint.prototype.restitution=0,goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"restitution",box2d.b2ContactVelocityConstraint.prototype.restitution),box2d.b2ContactVelocityConstraint.prototype.tangentSpeed=0,goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"tangentSpeed",box2d.b2ContactVelocityConstraint.prototype.tangentSpeed),box2d.b2ContactVelocityConstraint.prototype.pointCount=0,goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"pointCount",box2d.b2ContactVelocityConstraint.prototype.pointCount),box2d.b2ContactVelocityConstraint.prototype.contactIndex=0,goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"contactIndex",box2d.b2ContactVelocityConstraint.prototype.contactIndex),box2d.b2ContactVelocityConstraint.MakeArray=function(o){return box2d.b2MakeArray(o,function(o){return new box2d.b2ContactVelocityConstraint})},goog.exportProperty(box2d.b2ContactVelocityConstraint,"MakeArray",box2d.b2ContactVelocityConstraint.MakeArray),box2d.b2ContactPositionConstraint=function(){this.localPoints=box2d.b2Vec2.MakeArray(box2d.b2_maxManifoldPoints),this.localNormal=new box2d.b2Vec2,this.localPoint=new box2d.b2Vec2,this.localCenterA=new box2d.b2Vec2,this.localCenterB=new box2d.b2Vec2},goog.exportSymbol("box2d.b2ContactPositionConstraint",box2d.b2ContactPositionConstraint),box2d.b2ContactPositionConstraint.prototype.localPoints=null,goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localPoints",box2d.b2ContactPositionConstraint.prototype.localPoints),box2d.b2ContactPositionConstraint.prototype.localNormal=null,goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localNormal",box2d.b2ContactPositionConstraint.prototype.localNormal),box2d.b2ContactPositionConstraint.prototype.localPoint=null,goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localPoint",box2d.b2ContactPositionConstraint.prototype.localPoint),box2d.b2ContactPositionConstraint.prototype.indexA=0,goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"indexA",box2d.b2ContactPositionConstraint.prototype.indexA),box2d.b2ContactPositionConstraint.prototype.indexB=0,goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"indexB",box2d.b2ContactPositionConstraint.prototype.indexB),box2d.b2ContactPositionConstraint.prototype.invMassA=0,goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"invMassA",box2d.b2ContactPositionConstraint.prototype.invMassA),box2d.b2ContactPositionConstraint.prototype.invMassB=0,goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"invMassB",box2d.b2ContactPositionConstraint.prototype.invMassB),box2d.b2ContactPositionConstraint.prototype.localCenterA=null,goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localCenterA",box2d.b2ContactPositionConstraint.prototype.localCenterA),box2d.b2ContactPositionConstraint.prototype.localCenterB=null,goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localCenterB",box2d.b2ContactPositionConstraint.prototype.localCenterB),box2d.b2ContactPositionConstraint.prototype.invIA=0,goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"invIA",box2d.b2ContactPositionConstraint.prototype.invIA),box2d.b2ContactPositionConstraint.prototype.invIB=0,goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"invIB",box2d.b2ContactPositionConstraint.prototype.invIB),box2d.b2ContactPositionConstraint.prototype.type=box2d.b2ManifoldType.e_unknown,goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"type",box2d.b2ContactPositionConstraint.prototype.type),box2d.b2ContactPositionConstraint.prototype.radiusA=0,goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"radiusA",box2d.b2ContactPositionConstraint.prototype.radiusA),box2d.b2ContactPositionConstraint.prototype.radiusB=0,goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"radiusB",box2d.b2ContactPositionConstraint.prototype.radiusB),box2d.b2ContactPositionConstraint.prototype.pointCount=0,goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"pointCount",box2d.b2ContactPositionConstraint.prototype.pointCount),box2d.b2ContactPositionConstraint.MakeArray=function(o){return box2d.b2MakeArray(o,function(o){return new box2d.b2ContactPositionConstraint})},goog.exportProperty(box2d.b2ContactPositionConstraint,"MakeArray",box2d.b2ContactPositionConstraint.MakeArray),box2d.b2ContactSolverDef=function(){this.step=new box2d.b2TimeStep},goog.exportSymbol("box2d.b2ContactSolverDef",box2d.b2ContactSolverDef),box2d.b2ContactSolverDef.prototype.step=null,goog.exportProperty(box2d.b2ContactSolverDef.prototype,"step",box2d.b2ContactSolverDef.prototype.step),box2d.b2ContactSolverDef.prototype.contacts=null,goog.exportProperty(box2d.b2ContactSolverDef.prototype,"contacts",box2d.b2ContactSolverDef.prototype.contacts),box2d.b2ContactSolverDef.prototype.count=0,goog.exportProperty(box2d.b2ContactSolverDef.prototype,"count",box2d.b2ContactSolverDef.prototype.count),box2d.b2ContactSolverDef.prototype.positions=null,goog.exportProperty(box2d.b2ContactSolverDef.prototype,"positions",box2d.b2ContactSolverDef.prototype.positions),box2d.b2ContactSolverDef.prototype.velocities=null,goog.exportProperty(box2d.b2ContactSolverDef.prototype,"velocities",box2d.b2ContactSolverDef.prototype.velocities),box2d.b2ContactSolverDef.prototype.allocator=null,goog.exportProperty(box2d.b2ContactSolverDef.prototype,"allocator",box2d.b2ContactSolverDef.prototype.allocator),box2d.b2ContactSolver=function(){this.m_step=new box2d.b2TimeStep,this.m_positionConstraints=box2d.b2ContactPositionConstraint.MakeArray(1024),this.m_velocityConstraints=box2d.b2ContactVelocityConstraint.MakeArray(1024)},goog.exportSymbol("box2d.b2ContactSolver",box2d.b2ContactSolver),box2d.b2ContactSolver.prototype.m_step=null,goog.exportProperty(box2d.b2ContactSolver.prototype,"m_step",box2d.b2ContactSolver.prototype.m_step),box2d.b2ContactSolver.prototype.m_positions=null,goog.exportProperty(box2d.b2ContactSolver.prototype,"m_positions",box2d.b2ContactSolver.prototype.m_positions),box2d.b2ContactSolver.prototype.m_velocities=null,goog.exportProperty(box2d.b2ContactSolver.prototype,"m_velocities",box2d.b2ContactSolver.prototype.m_velocities),box2d.b2ContactSolver.prototype.m_allocator=null,goog.exportProperty(box2d.b2ContactSolver.prototype,"m_allocator",box2d.b2ContactSolver.prototype.m_allocator),box2d.b2ContactSolver.prototype.m_positionConstraints=null,goog.exportProperty(box2d.b2ContactSolver.prototype,"m_positionConstraints",box2d.b2ContactSolver.prototype.m_positionConstraints),box2d.b2ContactSolver.prototype.m_velocityConstraints=null,goog.exportProperty(box2d.b2ContactSolver.prototype,"m_velocityConstraints",box2d.b2ContactSolver.prototype.m_velocityConstraints),box2d.b2ContactSolver.prototype.m_contacts=null,goog.exportProperty(box2d.b2ContactSolver.prototype,"m_contacts",box2d.b2ContactSolver.prototype.m_contacts),box2d.b2ContactSolver.prototype.m_count=0,goog.exportProperty(box2d.b2ContactSolver.prototype,"m_count",box2d.b2ContactSolver.prototype.m_count),box2d.b2ContactSolver.prototype.Initialize=function(o){if(this.m_step.Copy(o.step),this.m_allocator=o.allocator,this.m_count=o.count,this.m_positionConstraints.length<this.m_count){var t=box2d.b2Max(2*this.m_positionConstraints.length,this.m_count);for(box2d.DEBUG&&window.console.log("box2d.b2ContactSolver.m_positionConstraints: "+t);this.m_positionConstraints.length<t;)this.m_positionConstraints[this.m_positionConstraints.length]=new box2d.b2ContactPositionConstraint}if(this.m_velocityConstraints.length<this.m_count)for(t=box2d.b2Max(2*this.m_velocityConstraints.length,this.m_count),box2d.DEBUG&&window.console.log("box2d.b2ContactSolver.m_velocityConstraints: "+t);this.m_velocityConstraints.length<t;)this.m_velocityConstraints[this.m_velocityConstraints.length]=new box2d.b2ContactVelocityConstraint;var e,r,i,b,p,n,a,s;for(this.m_positions=o.positions,this.m_velocities=o.velocities,this.m_contacts=o.contacts,o=0,t=this.m_count;o<t;++o)for(b=(i=this.m_contacts[o]).m_fixtureA,p=i.m_fixtureB,e=b.GetShape(),r=p.GetShape(),e=e.m_radius,r=r.m_radius,n=b.GetBody(),a=p.GetBody(),s=(p=i.GetManifold()).pointCount,box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<s),(b=this.m_velocityConstraints[o]).friction=i.m_friction,b.restitution=i.m_restitution,b.tangentSpeed=i.m_tangentSpeed,b.indexA=n.m_islandIndex,b.indexB=a.m_islandIndex,b.invMassA=n.m_invMass,b.invMassB=a.m_invMass,b.invIA=n.m_invI,b.invIB=a.m_invI,b.contactIndex=o,b.pointCount=s,b.K.SetZero(),b.normalMass.SetZero(),(i=this.m_positionConstraints[o]).indexA=n.m_islandIndex,i.indexB=a.m_islandIndex,i.invMassA=n.m_invMass,i.invMassB=a.m_invMass,i.localCenterA.Copy(n.m_sweep.localCenter),i.localCenterB.Copy(a.m_sweep.localCenter),i.invIA=n.m_invI,i.invIB=a.m_invI,i.localNormal.Copy(p.localNormal),i.localPoint.Copy(p.localPoint),i.pointCount=s,i.radiusA=e,i.radiusB=r,i.type=p.type,e=0,r=s;e<r;++e)n=p.points[e],s=b.points[e],this.m_step.warmStarting?(s.normalImpulse=this.m_step.dtRatio*n.normalImpulse,s.tangentImpulse=this.m_step.dtRatio*n.tangentImpulse):(s.normalImpulse=0,s.tangentImpulse=0),s.rA.SetZero(),s.rB.SetZero(),s.normalMass=0,s.tangentMass=0,s.velocityBias=0,i.localPoints[e].Copy(n.localPoint);return this},goog.exportProperty(box2d.b2ContactSolver.prototype,"Initialize",box2d.b2ContactSolver.prototype.Initialize),box2d.b2ContactSolver.prototype.InitializeVelocityConstraints=function(){var o,t,e,r,i,b,p,n,a,s,d,x,l,y,c,m,_,u,h,g,f=box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfA,S=box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfB,P=box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_worldManifold;for(o=0,t=this.m_count;o<t;++o){for(i=this.m_velocityConstraints[o],e=(b=this.m_positionConstraints[o]).radiusA,r=b.radiusB,p=this.m_contacts[i.contactIndex].GetManifold(),n=i.indexA,a=i.indexB,s=i.invMassA,d=i.invMassB,x=i.invIA,l=i.invIB,y=b.localCenterA,c=b.localCenterB,b=this.m_positions[n].c,m=this.m_positions[n].a,_=this.m_velocities[n].v,n=this.m_velocities[n].w,u=this.m_positions[a].c,h=this.m_positions[a].a,g=this.m_velocities[a].v,a=this.m_velocities[a].w,box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<p.pointCount),f.q.SetAngle(m),S.q.SetAngle(h),box2d.b2Sub_V2_V2(b,box2d.b2Mul_R_V2(f.q,y,box2d.b2Vec2.s_t0),f.p),box2d.b2Sub_V2_V2(u,box2d.b2Mul_R_V2(S.q,c,box2d.b2Vec2.s_t0),S.p),P.Initialize(p,f,e,S,r),i.normal.Copy(P.normal),box2d.b2Cross_V2_S(i.normal,1,i.tangent),r=i.pointCount,e=0;e<r;++e)p=i.points[e],box2d.b2Sub_V2_V2(P.points[e],b,p.rA),box2d.b2Sub_V2_V2(P.points[e],u,p.rB),y=s+d+x*(y=box2d.b2Cross_V2_V2(p.rA,i.normal))*y+l*(c=box2d.b2Cross_V2_V2(p.rB,i.normal))*c,p.normalMass=0<y?1/y:0,c=i.tangent,y=s+d+x*(y=box2d.b2Cross_V2_V2(p.rA,c))*y+l*(c=box2d.b2Cross_V2_V2(p.rB,c))*c,p.tangentMass=0<y?1/y:0,p.velocityBias=0,(y=box2d.b2Dot_V2_V2(i.normal,box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(g,a,p.rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(_,n,p.rA,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0)))<-box2d.b2_velocityThreshold&&(p.velocityBias+=-i.restitution*y);2===i.pointCount&&box2d.g_blockSolve&&(_=i.points[0],u=i.points[1],b=box2d.b2Cross_V2_V2(_.rA,i.normal),_=box2d.b2Cross_V2_V2(_.rB,i.normal),n=box2d.b2Cross_V2_V2(u.rA,i.normal),a=box2d.b2Cross_V2_V2(u.rB,i.normal),(u=s+d+x*b*b+l*_*_)*u<1e3*(u*(g=s+d+x*n*n+l*a*a)-(s=s+d+x*b*n+l*_*a)*s)?(i.K.ex.Set(u,s),i.K.ey.Set(s,g),i.K.GetInverse(i.normalMass)):i.pointCount=1)}},goog.exportProperty(box2d.b2ContactSolver.prototype,"InitializeVelocityConstraints",box2d.b2ContactSolver.prototype.InitializeVelocityConstraints),box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfA=new box2d.b2Transform,box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfB=new box2d.b2Transform,box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_worldManifold=new box2d.b2WorldManifold,box2d.b2ContactSolver.prototype.WarmStart=function(){var o,t,e,r,i,b,p,n,a,s,d,x,l,y,c,m,_,u,h=box2d.b2ContactSolver.prototype.WarmStart.s_P;for(o=0,t=this.m_count;o<t;++o){for(b=(i=this.m_velocityConstraints[o]).indexA,p=i.indexB,n=i.invMassA,a=i.invIA,s=i.invMassB,d=i.invIB,r=i.pointCount,x=this.m_velocities[b].v,l=this.m_velocities[b].w,y=this.m_velocities[p].v,c=this.m_velocities[p].w,m=i.normal,_=i.tangent,e=0;e<r;++e)u=i.points[e],box2d.b2Add_V2_V2(box2d.b2Mul_S_V2(u.normalImpulse,m,box2d.b2Vec2.s_t0),box2d.b2Mul_S_V2(u.tangentImpulse,_,box2d.b2Vec2.s_t1),h),l-=a*box2d.b2Cross_V2_V2(u.rA,h),x.SelfMulSub(n,h),c+=d*box2d.b2Cross_V2_V2(u.rB,h),y.SelfMulAdd(s,h);this.m_velocities[b].w=l,this.m_velocities[p].w=c}},goog.exportProperty(box2d.b2ContactSolver.prototype,"WarmStart",box2d.b2ContactSolver.prototype.WarmStart),box2d.b2ContactSolver.prototype.WarmStart.s_P=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints=function(){var o,t,e,r,i,b,p,n,a,s,d,x,l,y,c,m,_,u,h,g,f,S,P=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv,C=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv1,A=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv2,B=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P,v=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_a,V=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_b,J=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_x,M=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_d,D=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1,w=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P2,G=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1P2;for(o=0,t=this.m_count;o<t;++o){for(b=(i=this.m_velocityConstraints[o]).indexA,p=i.indexB,n=i.invMassA,a=i.invIA,s=i.invMassB,d=i.invIB,x=i.pointCount,l=this.m_velocities[b].v,y=this.m_velocities[b].w,c=this.m_velocities[p].v,m=this.m_velocities[p].w,_=i.normal,u=i.tangent,h=i.friction,box2d.ENABLE_ASSERTS&&box2d.b2Assert(1===x||2===x),e=0,r=x;e<r;++e)g=i.points[e],box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(c,m,g.rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(l,y,g.rA,box2d.b2Vec2.s_t1),P),f=box2d.b2Dot_V2_V2(P,u)-i.tangentSpeed,f=g.tangentMass*-f,S=h*g.normalImpulse,f=(S=box2d.b2Clamp(g.tangentImpulse+f,-S,S))-g.tangentImpulse,g.tangentImpulse=S,box2d.b2Mul_S_V2(f,u,B),l.SelfMulSub(n,B),y-=a*box2d.b2Cross_V2_V2(g.rA,B),c.SelfMulAdd(s,B),m+=d*box2d.b2Cross_V2_V2(g.rB,B);if(1!==i.pointCount&&box2d.g_blockSolve)for(x=i.points[0],g=i.points[1],v.Set(x.normalImpulse,g.normalImpulse),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=v.x&&0<=v.y),box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(c,m,x.rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(l,y,x.rA,box2d.b2Vec2.s_t1),C),box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(c,m,g.rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(l,y,g.rA,box2d.b2Vec2.s_t1),A),e=box2d.b2Dot_V2_V2(C,_),r=box2d.b2Dot_V2_V2(A,_),V.x=e-x.velocityBias,V.y=r-g.velocityBias,V.SelfSub(box2d.b2Mul_M22_V2(i.K,v,box2d.b2Vec2.s_t0));;){if(box2d.b2Mul_M22_V2(i.normalMass,V,J).SelfNeg(),0<=J.x&&0<=J.y){box2d.b2Sub_V2_V2(J,v,M),box2d.b2Mul_S_V2(M.x,_,D),box2d.b2Mul_S_V2(M.y,_,w),box2d.b2Add_V2_V2(D,w,G),l.SelfMulSub(n,G),y-=a*(box2d.b2Cross_V2_V2(x.rA,D)+box2d.b2Cross_V2_V2(g.rA,w)),c.SelfMulAdd(s,G),m+=d*(box2d.b2Cross_V2_V2(x.rB,D)+box2d.b2Cross_V2_V2(g.rB,w)),x.normalImpulse=J.x,g.normalImpulse=J.y;break}if(J.x=-x.normalMass*V.x,J.y=0,r=i.K.ex.y*J.x+V.y,0<=J.x&&0<=r){box2d.b2Sub_V2_V2(J,v,M),box2d.b2Mul_S_V2(M.x,_,D),box2d.b2Mul_S_V2(M.y,_,w),box2d.b2Add_V2_V2(D,w,G),l.SelfMulSub(n,G),y-=a*(box2d.b2Cross_V2_V2(x.rA,D)+box2d.b2Cross_V2_V2(g.rA,w)),c.SelfMulAdd(s,G),m+=d*(box2d.b2Cross_V2_V2(x.rB,D)+box2d.b2Cross_V2_V2(g.rB,w)),x.normalImpulse=J.x,g.normalImpulse=J.y;break}if(J.x=0,J.y=-g.normalMass*V.y,e=i.K.ey.x*J.y+V.x,0<=J.y&&0<=e){box2d.b2Sub_V2_V2(J,v,M),box2d.b2Mul_S_V2(M.x,_,D),box2d.b2Mul_S_V2(M.y,_,w),box2d.b2Add_V2_V2(D,w,G),l.SelfMulSub(n,G),y-=a*(box2d.b2Cross_V2_V2(x.rA,D)+box2d.b2Cross_V2_V2(g.rA,w)),c.SelfMulAdd(s,G),m+=d*(box2d.b2Cross_V2_V2(x.rB,D)+box2d.b2Cross_V2_V2(g.rB,w)),x.normalImpulse=J.x,g.normalImpulse=J.y;break}if(J.x=0,J.y=0,e=V.x,r=V.y,0<=e&&0<=r){box2d.b2Sub_V2_V2(J,v,M),box2d.b2Mul_S_V2(M.x,_,D),box2d.b2Mul_S_V2(M.y,_,w),box2d.b2Add_V2_V2(D,w,G),l.SelfMulSub(n,G),y-=a*(box2d.b2Cross_V2_V2(x.rA,D)+box2d.b2Cross_V2_V2(g.rA,w)),c.SelfMulAdd(s,G),m+=d*(box2d.b2Cross_V2_V2(x.rB,D)+box2d.b2Cross_V2_V2(g.rB,w)),x.normalImpulse=J.x,g.normalImpulse=J.y;break}break}else for(e=0;e<x;++e)g=i.points[e],box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(c,m,g.rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(l,y,g.rA,box2d.b2Vec2.s_t1),P),r=box2d.b2Dot_V2_V2(P,_),f=-g.normalMass*(r-g.velocityBias),f=(S=box2d.b2Max(g.normalImpulse+f,0))-g.normalImpulse,g.normalImpulse=S,box2d.b2Mul_S_V2(f,_,B),l.SelfMulSub(n,B),y-=a*box2d.b2Cross_V2_V2(g.rA,B),c.SelfMulAdd(s,B),m+=d*box2d.b2Cross_V2_V2(g.rB,B);this.m_velocities[b].w=y,this.m_velocities[p].w=m}},goog.exportProperty(box2d.b2ContactSolver.prototype,"SolveVelocityConstraints",box2d.b2ContactSolver.prototype.SolveVelocityConstraints),box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv1=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv2=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_a=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_b=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_x=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_d=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P2=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1P2=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.StoreImpulses=function(){var o,t,e,r,i,b;for(o=0,t=this.m_count;o<t;++o)for(i=this.m_velocityConstraints[o],b=this.m_contacts[i.contactIndex].GetManifold(),e=0,r=i.pointCount;e<r;++e)b.points[e].normalImpulse=i.points[e].normalImpulse,b.points[e].tangentImpulse=i.points[e].tangentImpulse},goog.exportProperty(box2d.b2ContactSolver.prototype,"StoreImpulses",box2d.b2ContactSolver.prototype.StoreImpulses),box2d.b2PositionSolverManifold=function(){this.normal=new box2d.b2Vec2,this.point=new box2d.b2Vec2},goog.exportSymbol("box2d.b2PositionSolverManifold",box2d.b2PositionSolverManifold),box2d.b2PositionSolverManifold.prototype.normal=null,goog.exportProperty(box2d.b2PositionSolverManifold.prototype,"normal",box2d.b2PositionSolverManifold.prototype.normal),box2d.b2PositionSolverManifold.prototype.point=null,goog.exportProperty(box2d.b2PositionSolverManifold.prototype,"point",box2d.b2PositionSolverManifold.prototype.point),box2d.b2PositionSolverManifold.prototype.separation=0,goog.exportProperty(box2d.b2PositionSolverManifold.prototype,"separation",box2d.b2PositionSolverManifold.prototype.separation),box2d.b2PositionSolverManifold.prototype.Initialize=function(o,t,e,r){var i=box2d.b2PositionSolverManifold.prototype.Initialize.s_pointA,b=box2d.b2PositionSolverManifold.prototype.Initialize.s_pointB,p=box2d.b2PositionSolverManifold.prototype.Initialize.s_planePoint,n=box2d.b2PositionSolverManifold.prototype.Initialize.s_clipPoint;switch(box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<o.pointCount),o.type){case box2d.b2ManifoldType.e_circles:box2d.b2Mul_X_V2(t,o.localPoint,i),box2d.b2Mul_X_V2(e,o.localPoints[0],b),box2d.b2Sub_V2_V2(b,i,this.normal).SelfNormalize(),box2d.b2Mid_V2_V2(i,b,this.point),this.separation=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(b,i,box2d.b2Vec2.s_t0),this.normal)-o.radiusA-o.radiusB;break;case box2d.b2ManifoldType.e_faceA:box2d.b2Mul_R_V2(t.q,o.localNormal,this.normal),box2d.b2Mul_X_V2(t,o.localPoint,p),box2d.b2Mul_X_V2(e,o.localPoints[r],n),this.separation=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(n,p,box2d.b2Vec2.s_t0),this.normal)-o.radiusA-o.radiusB,this.point.Copy(n);break;case box2d.b2ManifoldType.e_faceB:box2d.b2Mul_R_V2(e.q,o.localNormal,this.normal),box2d.b2Mul_X_V2(e,o.localPoint,p),box2d.b2Mul_X_V2(t,o.localPoints[r],n),this.separation=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(n,p,box2d.b2Vec2.s_t0),this.normal)-o.radiusA-o.radiusB,this.point.Copy(n),this.normal.SelfNeg()}},goog.exportProperty(box2d.b2PositionSolverManifold.prototype,"Initialize",box2d.b2PositionSolverManifold.prototype.Initialize),box2d.b2PositionSolverManifold.prototype.Initialize.s_pointA=new box2d.b2Vec2,box2d.b2PositionSolverManifold.prototype.Initialize.s_pointB=new box2d.b2Vec2,box2d.b2PositionSolverManifold.prototype.Initialize.s_planePoint=new box2d.b2Vec2,box2d.b2PositionSolverManifold.prototype.Initialize.s_clipPoint=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolvePositionConstraints=function(){var o,t,e,r,i,b,p,n,a,s,d,x,l,y,c,m,_,u,h,g,f,S=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfA,P=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfB,C=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_psm,A=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rA,B=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rB,v=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_P,V=0;for(o=0,t=this.m_count;o<t;++o){for(b=(i=this.m_positionConstraints[o]).indexA,p=i.indexB,n=i.localCenterA,a=i.invMassA,s=i.invIA,d=i.localCenterB,x=i.invMassB,l=i.invIB,r=i.pointCount,y=this.m_positions[b].c,c=this.m_positions[b].a,m=this.m_positions[p].c,_=this.m_positions[p].a,e=0;e<r;++e)S.q.SetAngle(c),P.q.SetAngle(_),box2d.b2Sub_V2_V2(y,box2d.b2Mul_R_V2(S.q,n,box2d.b2Vec2.s_t0),S.p),box2d.b2Sub_V2_V2(m,box2d.b2Mul_R_V2(P.q,d,box2d.b2Vec2.s_t0),P.p),C.Initialize(i,S,P,e),u=C.normal,h=C.point,g=C.separation,box2d.b2Sub_V2_V2(h,y,A),box2d.b2Sub_V2_V2(h,m,B),V=box2d.b2Min(V,g),h=box2d.b2Clamp(box2d.b2_baumgarte*(g+box2d.b2_linearSlop),-box2d.b2_maxLinearCorrection,0),h=0<(g=a+x+s*(g=box2d.b2Cross_V2_V2(A,u))*g+l*(f=box2d.b2Cross_V2_V2(B,u))*f)?-h/g:0,box2d.b2Mul_S_V2(h,u,v),y.SelfMulSub(a,v),c-=s*box2d.b2Cross_V2_V2(A,v),m.SelfMulAdd(x,v),_+=l*box2d.b2Cross_V2_V2(B,v);this.m_positions[b].a=c,this.m_positions[p].a=_}return V>-3*box2d.b2_linearSlop},goog.exportProperty(box2d.b2ContactSolver.prototype,"SolvePositionConstraints",box2d.b2ContactSolver.prototype.SolvePositionConstraints),box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfA=new box2d.b2Transform,box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfB=new box2d.b2Transform,box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_psm=new box2d.b2PositionSolverManifold,box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rA=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rB=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints=function(o,t){var e,r,i,b,p,n,a,s,d,x,l,y,c,m,_,u,h,g,f,S,P,C=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfA,A=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfB,B=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_psm,v=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rA,V=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rB,J=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_P,M=0;for(e=0,r=this.m_count;e<r;++e){for(n=(p=this.m_positionConstraints[e]).indexA,a=p.indexB,s=p.localCenterA,d=p.localCenterB,b=p.pointCount,l=x=0,n!==o&&n!==t||(x=p.invMassA,l=p.invIA),c=y=0,a!==o&&a!==t||(y=p.invMassB,c=p.invIB),m=this.m_positions[n].c,_=this.m_positions[n].a,u=this.m_positions[a].c,h=this.m_positions[a].a,i=0;i<b;++i)C.q.SetAngle(_),A.q.SetAngle(h),box2d.b2Sub_V2_V2(m,box2d.b2Mul_R_V2(C.q,s,box2d.b2Vec2.s_t0),C.p),box2d.b2Sub_V2_V2(u,box2d.b2Mul_R_V2(A.q,d,box2d.b2Vec2.s_t0),A.p),B.Initialize(p,C,A,i),g=B.normal,f=B.point,S=B.separation,box2d.b2Sub_V2_V2(f,m,v),box2d.b2Sub_V2_V2(f,u,V),M=box2d.b2Min(M,S),f=box2d.b2Clamp(box2d.b2_toiBaumgarte*(S+box2d.b2_linearSlop),-box2d.b2_maxLinearCorrection,0),f=0<(S=x+y+l*(S=box2d.b2Cross_V2_V2(v,g))*S+c*(P=box2d.b2Cross_V2_V2(V,g))*P)?-f/S:0,box2d.b2Mul_S_V2(f,g,J),m.SelfMulSub(x,J),_-=l*box2d.b2Cross_V2_V2(v,J),u.SelfMulAdd(y,J),h+=c*box2d.b2Cross_V2_V2(V,J);this.m_positions[n].a=_,this.m_positions[a].a=h}return M>=-1.5*box2d.b2_linearSlop},goog.exportProperty(box2d.b2ContactSolver.prototype,"SolveTOIPositionConstraints",box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints),box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfA=new box2d.b2Transform,box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfB=new box2d.b2Transform,box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_psm=new box2d.b2PositionSolverManifold,box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rA=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rB=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_P=new box2d.b2Vec2,box2d.b2Island=function(){this.m_bodies=Array(1024),this.m_contacts=Array(1024),this.m_joints=Array(1024),this.m_positions=box2d.b2Position.MakeArray(1024),this.m_velocities=box2d.b2Velocity.MakeArray(1024)},goog.exportSymbol("box2d.b2Island",box2d.b2Island),box2d.b2Island.prototype.m_allocator=null,goog.exportProperty(box2d.b2Island.prototype,"m_allocator",box2d.b2Island.prototype.m_allocator),box2d.b2Island.prototype.m_listener=null,goog.exportProperty(box2d.b2Island.prototype,"m_listener",box2d.b2Island.prototype.m_listener),box2d.b2Island.prototype.m_bodies=null,goog.exportProperty(box2d.b2Island.prototype,"m_bodies",box2d.b2Island.prototype.m_bodies),box2d.b2Island.prototype.m_contacts=null,goog.exportProperty(box2d.b2Island.prototype,"m_contacts",box2d.b2Island.prototype.m_contacts),box2d.b2Island.prototype.m_joints=null,goog.exportProperty(box2d.b2Island.prototype,"m_joints",box2d.b2Island.prototype.m_joints),box2d.b2Island.prototype.m_positions=null,goog.exportProperty(box2d.b2Island.prototype,"m_positions",box2d.b2Island.prototype.m_positions),box2d.b2Island.prototype.m_velocities=null,goog.exportProperty(box2d.b2Island.prototype,"m_velocities",box2d.b2Island.prototype.m_velocities),box2d.b2Island.prototype.m_bodyCount=0,goog.exportProperty(box2d.b2Island.prototype,"m_bodyCount",box2d.b2Island.prototype.m_bodyCount),box2d.b2Island.prototype.m_jointCount=0,goog.exportProperty(box2d.b2Island.prototype,"m_jointCount",box2d.b2Island.prototype.m_jointCount),box2d.b2Island.prototype.m_contactCount=0,goog.exportProperty(box2d.b2Island.prototype,"m_contactCount",box2d.b2Island.prototype.m_contactCount),box2d.b2Island.prototype.m_bodyCapacity=0,goog.exportProperty(box2d.b2Island.prototype,"m_bodyCapacity",box2d.b2Island.prototype.m_bodyCapacity),box2d.b2Island.prototype.m_contactCapacity=0,goog.exportProperty(box2d.b2Island.prototype,"m_contactCapacity",box2d.b2Island.prototype.m_contactCapacity),box2d.b2Island.prototype.m_jointCapacity=0,goog.exportProperty(box2d.b2Island.prototype,"m_jointCapacity",box2d.b2Island.prototype.m_jointCapacity),box2d.b2Island.prototype.Initialize=function(o,t,e,r,i){for(this.m_bodyCapacity=o,this.m_contactCapacity=t,this.m_jointCapacity=e,this.m_jointCount=this.m_contactCount=this.m_bodyCount=0,this.m_allocator=r,this.m_listener=i;this.m_bodies.length<o;)this.m_bodies[this.m_bodies.length]=null;for(;this.m_contacts.length<t;)this.m_contacts[this.m_contacts.length]=null;for(;this.m_joints.length<e;)this.m_joints[this.m_joints.length]=null;if(this.m_positions.length<o)for(t=box2d.b2Max(2*this.m_positions.length,o),box2d.DEBUG&&window.console.log("box2d.b2Island.m_positions: "+t);this.m_positions.length<t;)this.m_positions[this.m_positions.length]=new box2d.b2Position;if(this.m_velocities.length<o)for(t=box2d.b2Max(2*this.m_velocities.length,o),box2d.DEBUG&&window.console.log("box2d.b2Island.m_velocities: "+t);this.m_velocities.length<t;)this.m_velocities[this.m_velocities.length]=new box2d.b2Velocity},goog.exportProperty(box2d.b2Island.prototype,"Initialize",box2d.b2Island.prototype.Initialize),box2d.b2Island.prototype.Clear=function(){this.m_jointCount=this.m_contactCount=this.m_bodyCount=0},goog.exportProperty(box2d.b2Island.prototype,"Clear",box2d.b2Island.prototype.Clear),box2d.b2Island.prototype.AddBody=function(o){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_bodyCount<this.m_bodyCapacity),o.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=o},goog.exportProperty(box2d.b2Island.prototype,"AddBody",box2d.b2Island.prototype.AddBody),box2d.b2Island.prototype.AddContact=function(o){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_contactCount<this.m_contactCapacity),this.m_contacts[this.m_contactCount++]=o},goog.exportProperty(box2d.b2Island.prototype,"AddContact",box2d.b2Island.prototype.AddContact),box2d.b2Island.prototype.AddJoint=function(o){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_jointCount<this.m_jointCapacity),this.m_joints[this.m_jointCount++]=o},goog.exportProperty(box2d.b2Island.prototype,"AddJoint",box2d.b2Island.prototype.AddJoint),box2d.b2Island.prototype.Solve=function(o,t,e,r){for(var i=box2d.b2Island.s_timer.Reset(),b=t.dt,p=0;p<this.m_bodyCount;++p){var n=this.m_bodies[p],a=this.m_positions[p].c.Copy(n.m_sweep.c),s=n.m_sweep.a,d=this.m_velocities[p].v.Copy(n.m_linearVelocity),x=n.m_angularVelocity;n.m_sweep.c0.Copy(n.m_sweep.c),n.m_sweep.a0=n.m_sweep.a,n.m_type===box2d.b2BodyType.b2_dynamicBody&&(d.x+=b*(n.m_gravityScale*e.x+n.m_invMass*n.m_force.x),d.y+=b*(n.m_gravityScale*e.y+n.m_invMass*n.m_force.y),x+=b*n.m_invI*n.m_torque,d.SelfMul(1/(1+b*n.m_linearDamping)),x*=1/(1+b*n.m_angularDamping)),this.m_positions[p].a=s,this.m_velocities[p].w=x}for(i.Reset(),(n=box2d.b2Island.s_solverData).step.Copy(t),n.positions=this.m_positions,n.velocities=this.m_velocities,(p=box2d.b2Island.s_contactSolverDef).step.Copy(t),p.contacts=this.m_contacts,p.count=this.m_contactCount,p.positions=this.m_positions,p.velocities=this.m_velocities,p.allocator=this.m_allocator,(e=box2d.b2Island.s_contactSolver.Initialize(p)).InitializeVelocityConstraints(),t.warmStarting&&e.WarmStart(),p=0;p<this.m_jointCount;++p)this.m_joints[p].InitVelocityConstraints(n);for(o.solveInit=i.GetMilliseconds(),i.Reset(),p=0;p<t.velocityIterations;++p){for(s=0;s<this.m_jointCount;++s)this.m_joints[s].SolveVelocityConstraints(n);e.SolveVelocityConstraints()}for(e.StoreImpulses(),o.solveVelocity=i.GetMilliseconds(),p=0;p<this.m_bodyCount;++p){a=this.m_positions[p].c,s=this.m_positions[p].a,d=this.m_velocities[p].v,x=this.m_velocities[p].w;var l=box2d.b2Mul_S_V2(b,d,box2d.b2Island.s_translation);box2d.b2Dot_V2_V2(l,l)>box2d.b2_maxTranslationSquared&&(l=box2d.b2_maxTranslation/l.Length(),d.SelfMul(l)),(l=b*x)*l>box2d.b2_maxRotationSquared&&(x*=l=box2d.b2_maxRotation/box2d.b2Abs(l)),a.x+=b*d.x,a.y+=b*d.y,s+=b*x,this.m_positions[p].a=s,this.m_velocities[p].w=x}for(i.Reset(),a=!1,p=0;p<t.positionIterations;++p){for(d=e.SolvePositionConstraints(),x=!0,s=0;s<this.m_jointCount;++s)l=this.m_joints[s].SolvePositionConstraints(n),x=x&&l;if(d&&x){a=!0;break}}for(p=0;p<this.m_bodyCount;++p)(t=this.m_bodies[p]).m_sweep.c.Copy(this.m_positions[p].c),t.m_sweep.a=this.m_positions[p].a,t.m_linearVelocity.Copy(this.m_velocities[p].v),t.m_angularVelocity=this.m_velocities[p].w,t.SynchronizeTransform();if(o.solvePosition=i.GetMilliseconds(),this.Report(e.m_velocityConstraints),r){for(o=box2d.b2_maxFloat,r=box2d.b2_linearSleepTolerance*box2d.b2_linearSleepTolerance,i=box2d.b2_angularSleepTolerance*box2d.b2_angularSleepTolerance,p=0;p<this.m_bodyCount;++p)(n=this.m_bodies[p]).GetType()!==box2d.b2BodyType.b2_staticBody&&(!n.m_flag_autoSleepFlag||n.m_angularVelocity*n.m_angularVelocity>i||box2d.b2Dot_V2_V2(n.m_linearVelocity,n.m_linearVelocity)>r?o=n.m_sleepTime=0:(n.m_sleepTime+=b,o=box2d.b2Min(o,n.m_sleepTime)));if(o>=box2d.b2_timeToSleep&&a)for(p=0;p<this.m_bodyCount;++p)(n=this.m_bodies[p]).SetAwake(!1)}},goog.exportProperty(box2d.b2Island.prototype,"Solve",box2d.b2Island.prototype.Solve),box2d.b2Island.prototype.SolveTOI=function(o,t,e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(t<this.m_bodyCount),box2d.ENABLE_ASSERTS&&box2d.b2Assert(e<this.m_bodyCount);for(var r=0;r<this.m_bodyCount;++r){var i=this.m_bodies[r];this.m_positions[r].c.Copy(i.m_sweep.c),this.m_positions[r].a=i.m_sweep.a,this.m_velocities[r].v.Copy(i.m_linearVelocity),this.m_velocities[r].w=i.m_angularVelocity}for((r=box2d.b2Island.s_contactSolverDef).contacts=this.m_contacts,r.count=this.m_contactCount,r.allocator=this.m_allocator,r.step.Copy(o),r.positions=this.m_positions,r.velocities=this.m_velocities,i=box2d.b2Island.s_contactSolver.Initialize(r),r=0;r<o.positionIterations&&!i.SolveTOIPositionConstraints(t,e);++r);for(this.m_bodies[t].m_sweep.c0.Copy(this.m_positions[t].c),this.m_bodies[t].m_sweep.a0=this.m_positions[t].a,this.m_bodies[e].m_sweep.c0.Copy(this.m_positions[e].c),this.m_bodies[e].m_sweep.a0=this.m_positions[e].a,i.InitializeVelocityConstraints(),r=0;r<o.velocityIterations;++r)i.SolveVelocityConstraints();for(o=o.dt,r=0;r<this.m_bodyCount;++r){t=this.m_positions[r].c,e=this.m_positions[r].a;var b=this.m_velocities[r].v,p=this.m_velocities[r].w,n=box2d.b2Mul_S_V2(o,b,box2d.b2Island.s_translation);box2d.b2Dot_V2_V2(n,n)>box2d.b2_maxTranslationSquared&&(n=box2d.b2_maxTranslation/n.Length(),b.SelfMul(n)),(n=o*p)*n>box2d.b2_maxRotationSquared&&(p*=n=box2d.b2_maxRotation/box2d.b2Abs(n)),t.SelfMulAdd(o,b),e+=o*p,this.m_positions[r].a=e,this.m_velocities[r].w=p,(n=this.m_bodies[r]).m_sweep.c.Copy(t),n.m_sweep.a=e,n.m_linearVelocity.Copy(b),n.m_angularVelocity=p,n.SynchronizeTransform()}this.Report(i.m_velocityConstraints)},goog.exportProperty(box2d.b2Island.prototype,"SolveTOI",box2d.b2Island.prototype.SolveTOI),box2d.b2Island.prototype.Report=function(o){if(null!==this.m_listener)for(var t=0;t<this.m_contactCount;++t){var e=this.m_contacts[t];if(e){var r=o[t],i=box2d.b2Island.s_impulse;i.count=r.pointCount;for(var b=0;b<r.pointCount;++b)i.normalImpulses[b]=r.points[b].normalImpulse,i.tangentImpulses[b]=r.points[b].tangentImpulse;this.m_listener.PostSolve(e,i)}}},goog.exportProperty(box2d.b2Island.prototype,"Report",box2d.b2Island.prototype.Report),box2d.b2Island.s_timer=new box2d.b2Timer,box2d.b2Island.s_solverData=new box2d.b2SolverData,box2d.b2Island.s_contactSolverDef=new box2d.b2ContactSolverDef,box2d.b2Island.s_contactSolver=new box2d.b2ContactSolver,box2d.b2Island.s_translation=new box2d.b2Vec2,box2d.b2Island.s_impulse=new box2d.b2ContactImpulse,box2d.b2JointType={e_unknownJoint:0,e_revoluteJoint:1,e_prismaticJoint:2,e_distanceJoint:3,e_pulleyJoint:4,e_mouseJoint:5,e_gearJoint:6,e_wheelJoint:7,e_weldJoint:8,e_frictionJoint:9,e_ropeJoint:10,e_motorJoint:11,e_areaJoint:12},goog.exportSymbol("box2d.b2JointType",box2d.b2JointType),goog.exportProperty(box2d.b2JointType,"e_unknownJoint",box2d.b2JointType.e_unknownJoint),goog.exportProperty(box2d.b2JointType,"e_revoluteJoint",box2d.b2JointType.e_revoluteJoint),goog.exportProperty(box2d.b2JointType,"e_prismaticJoint",box2d.b2JointType.e_prismaticJoint),goog.exportProperty(box2d.b2JointType,"e_distanceJoint",box2d.b2JointType.e_distanceJoint),goog.exportProperty(box2d.b2JointType,"e_pulleyJoint",box2d.b2JointType.e_pulleyJoint),goog.exportProperty(box2d.b2JointType,"e_mouseJoint",box2d.b2JointType.e_mouseJoint),goog.exportProperty(box2d.b2JointType,"e_gearJoint",box2d.b2JointType.e_gearJoint),goog.exportProperty(box2d.b2JointType,"e_wheelJoint",box2d.b2JointType.e_wheelJoint),goog.exportProperty(box2d.b2JointType,"e_weldJoint",box2d.b2JointType.e_weldJoint),goog.exportProperty(box2d.b2JointType,"e_frictionJoint",box2d.b2JointType.e_frictionJoint),goog.exportProperty(box2d.b2JointType,"e_ropeJoint",box2d.b2JointType.e_ropeJoint),goog.exportProperty(box2d.b2JointType,"e_motorJoint",box2d.b2JointType.e_motorJoint),goog.exportProperty(box2d.b2JointType,"e_areaJoint",box2d.b2JointType.e_areaJoint),box2d.b2LimitState={e_inactiveLimit:0,e_atLowerLimit:1,e_atUpperLimit:2,e_equalLimits:3},goog.exportSymbol("box2d.b2LimitState",box2d.b2LimitState),goog.exportProperty(box2d.b2LimitState,"e_inactiveLimit",box2d.b2LimitState.e_inactiveLimit),goog.exportProperty(box2d.b2LimitState,"e_atLowerLimit",box2d.b2LimitState.e_atLowerLimit),goog.exportProperty(box2d.b2LimitState,"e_atUpperLimit",box2d.b2LimitState.e_atUpperLimit),goog.exportProperty(box2d.b2LimitState,"e_equalLimits",box2d.b2LimitState.e_equalLimits),box2d.b2Jacobian=function(){this.linear=new box2d.b2Vec2},goog.exportSymbol("box2d.b2Jacobian",box2d.b2Jacobian),box2d.b2Jacobian.prototype.linear=null,goog.exportProperty(box2d.b2Jacobian.prototype,"linear",box2d.b2Jacobian.prototype.linear),box2d.b2Jacobian.prototype.angularA=0,goog.exportProperty(box2d.b2Jacobian.prototype,"angularA",box2d.b2Jacobian.prototype.angularA),box2d.b2Jacobian.prototype.angularB=0,goog.exportProperty(box2d.b2Jacobian.prototype,"angularB",box2d.b2Jacobian.prototype.angularB),box2d.b2Jacobian.prototype.SetZero=function(){return this.linear.SetZero(),this.angularB=this.angularA=0,this},goog.exportProperty(box2d.b2Jacobian.prototype,"SetZero",box2d.b2Jacobian.prototype.SetZero),box2d.b2Jacobian.prototype.Set=function(o,t,e){return this.linear.Copy(o),this.angularA=t,this.angularB=e,this},goog.exportProperty(box2d.b2Jacobian.prototype,"Set",box2d.b2Jacobian.prototype.Set),box2d.b2JointEdge=function(){},goog.exportSymbol("box2d.b2JointEdge",box2d.b2JointEdge),box2d.b2JointEdge.prototype.other=null,goog.exportProperty(box2d.b2JointEdge.prototype,"other",box2d.b2JointEdge.prototype.other),box2d.b2JointEdge.prototype.joint=null,goog.exportProperty(box2d.b2JointEdge.prototype,"joint",box2d.b2JointEdge.prototype.joint),box2d.b2JointEdge.prototype.prev=null,goog.exportProperty(box2d.b2JointEdge.prototype,"prev",box2d.b2JointEdge.prototype.prev),box2d.b2JointEdge.prototype.next=null,goog.exportProperty(box2d.b2JointEdge.prototype,"next",box2d.b2JointEdge.prototype.next),box2d.b2JointDef=function(o){this.type=o},goog.exportSymbol("box2d.b2JointDef",box2d.b2JointDef),box2d.b2JointDef.prototype.type=box2d.b2JointType.e_unknownJoint,goog.exportProperty(box2d.b2JointDef.prototype,"type",box2d.b2JointDef.prototype.type),box2d.b2JointDef.prototype.userData=null,goog.exportProperty(box2d.b2JointDef.prototype,"userData",box2d.b2JointDef.prototype.userData),box2d.b2JointDef.prototype.bodyA=null,goog.exportProperty(box2d.b2JointDef.prototype,"bodyA",box2d.b2JointDef.prototype.bodyA),box2d.b2JointDef.prototype.bodyB=null,goog.exportProperty(box2d.b2JointDef.prototype,"bodyB",box2d.b2JointDef.prototype.bodyB),box2d.b2JointDef.prototype.collideConnected=!1,goog.exportProperty(box2d.b2JointDef.prototype,"collideConnected",box2d.b2JointDef.prototype.collideConnected),box2d.b2Joint=function(o){box2d.ENABLE_ASSERTS&&box2d.b2Assert(o.bodyA!==o.bodyB),this.m_type=o.type,this.m_edgeA=new box2d.b2JointEdge,this.m_edgeB=new box2d.b2JointEdge,this.m_bodyA=o.bodyA,this.m_bodyB=o.bodyB,this.m_collideConnected=o.collideConnected,this.m_userData=o.userData},goog.exportSymbol("box2d.b2Joint",box2d.b2Joint),box2d.b2Joint.prototype.m_type=box2d.b2JointType.e_unknownJoint,goog.exportProperty(box2d.b2Joint.prototype,"m_type",box2d.b2Joint.prototype.m_type),box2d.b2Joint.prototype.m_prev=null,goog.exportProperty(box2d.b2Joint.prototype,"m_prev",box2d.b2Joint.prototype.m_prev),box2d.b2Joint.prototype.m_next=null,goog.exportProperty(box2d.b2Joint.prototype,"m_next",box2d.b2Joint.prototype.m_next),box2d.b2Joint.prototype.m_edgeA=null,goog.exportProperty(box2d.b2Joint.prototype,"m_edgeA",box2d.b2Joint.prototype.m_edgeA),box2d.b2Joint.prototype.m_edgeB=null,goog.exportProperty(box2d.b2Joint.prototype,"m_edgeB",box2d.b2Joint.prototype.m_edgeB),box2d.b2Joint.prototype.m_bodyA=null,goog.exportProperty(box2d.b2Joint.prototype,"m_bodyA",box2d.b2Joint.prototype.m_bodyA),box2d.b2Joint.prototype.m_bodyB=null,goog.exportProperty(box2d.b2Joint.prototype,"m_bodyB",box2d.b2Joint.prototype.m_bodyB),box2d.b2Joint.prototype.m_index=0,goog.exportProperty(box2d.b2Joint.prototype,"m_index",box2d.b2Joint.prototype.m_index),box2d.b2Joint.prototype.m_islandFlag=!1,goog.exportProperty(box2d.b2Joint.prototype,"m_islandFlag",box2d.b2Joint.prototype.m_islandFlag),box2d.b2Joint.prototype.m_collideConnected=!1,goog.exportProperty(box2d.b2Joint.prototype,"m_collideConnected",box2d.b2Joint.prototype.m_collideConnected),box2d.b2Joint.prototype.m_userData=null,goog.exportProperty(box2d.b2Joint.prototype,"m_userData",box2d.b2Joint.prototype.m_userData),box2d.b2Joint.prototype.GetAnchorA=function(o){return o.SetZero()},goog.exportProperty(box2d.b2Joint.prototype,"GetAnchorA",box2d.b2Joint.prototype.GetAnchorA),box2d.b2Joint.prototype.GetAnchorB=function(o){return o.SetZero()},goog.exportProperty(box2d.b2Joint.prototype,"GetAnchorB",box2d.b2Joint.prototype.GetAnchorB),box2d.b2Joint.prototype.GetReactionForce=function(o,t){return t.SetZero()},goog.exportProperty(box2d.b2Joint.prototype,"GetReactionForce",box2d.b2Joint.prototype.GetReactionForce),box2d.b2Joint.prototype.GetReactionTorque=function(o){return 0},goog.exportProperty(box2d.b2Joint.prototype,"GetReactionTorque",box2d.b2Joint.prototype.GetReactionTorque),box2d.b2Joint.prototype.InitVelocityConstraints=function(o){},goog.exportProperty(box2d.b2Joint.prototype,"InitVelocityConstraints",box2d.b2Joint.prototype.InitVelocityConstraints),box2d.b2Joint.prototype.SolveVelocityConstraints=function(o){},goog.exportProperty(box2d.b2Joint.prototype,"SolveVelocityConstraints",box2d.b2Joint.prototype.SolveVelocityConstraints),box2d.b2Joint.prototype.SolvePositionConstraints=function(o){return!1},goog.exportProperty(box2d.b2Joint.prototype,"SolvePositionConstraints",box2d.b2Joint.prototype.SolvePositionConstraints),box2d.b2Joint.prototype.GetType=function(){return this.m_type},goog.exportProperty(box2d.b2Joint.prototype,"GetType",box2d.b2Joint.prototype.GetType),box2d.b2Joint.prototype.GetBodyA=function(){return this.m_bodyA},goog.exportProperty(box2d.b2Joint.prototype,"GetBodyA",box2d.b2Joint.prototype.GetBodyA),box2d.b2Joint.prototype.GetBodyB=function(){return this.m_bodyB},goog.exportProperty(box2d.b2Joint.prototype,"GetBodyB",box2d.b2Joint.prototype.GetBodyB),box2d.b2Joint.prototype.GetNext=function(){return this.m_next},goog.exportProperty(box2d.b2Joint.prototype,"GetNext",box2d.b2Joint.prototype.GetNext),box2d.b2Joint.prototype.GetUserData=function(){return this.m_userData},goog.exportProperty(box2d.b2Joint.prototype,"GetUserData",box2d.b2Joint.prototype.GetUserData),box2d.b2Joint.prototype.SetUserData=function(o){this.m_userData=o},goog.exportProperty(box2d.b2Joint.prototype,"SetUserData",box2d.b2Joint.prototype.SetUserData),box2d.b2Joint.prototype.GetCollideConnected=function(){return this.m_collideConnected},goog.exportProperty(box2d.b2Joint.prototype,"GetCollideConnected",box2d.b2Joint.prototype.GetCollideConnected),box2d.b2Joint.prototype.Dump=function(){box2d.DEBUG&&box2d.b2Log("// Dump is not supported for this joint type.\n")},goog.exportProperty(box2d.b2Joint.prototype,"Dump",box2d.b2Joint.prototype.Dump),box2d.b2Joint.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()},goog.exportProperty(box2d.b2Joint.prototype,"IsActive",box2d.b2Joint.prototype.IsActive),box2d.b2Joint.prototype.ShiftOrigin=function(o){},goog.exportProperty(box2d.b2Joint.prototype,"ShiftOrigin",box2d.b2Joint.prototype.ShiftOrigin),box2d.b2AreaJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_areaJoint),this.bodies=[]},goog.inherits(box2d.b2AreaJointDef,box2d.b2JointDef),goog.exportSymbol("box2d.b2AreaJointDef",box2d.b2AreaJointDef),box2d.b2AreaJointDef.prototype.world=null,goog.exportProperty(box2d.b2AreaJointDef.prototype,"world",box2d.b2AreaJointDef.prototype.world),box2d.b2AreaJointDef.prototype.bodies=null,goog.exportProperty(box2d.b2AreaJointDef.prototype,"bodies",box2d.b2AreaJointDef.prototype.bodies),box2d.b2AreaJointDef.prototype.frequencyHz=0,goog.exportProperty(box2d.b2AreaJointDef.prototype,"frequencyHz",box2d.b2AreaJointDef.prototype.frequencyHz),box2d.b2AreaJointDef.prototype.dampingRatio=0,goog.exportProperty(box2d.b2AreaJointDef.prototype,"dampingRatio",box2d.b2AreaJointDef.prototype.dampingRatio),box2d.b2AreaJointDef.prototype.AddBody=function(o){this.bodies.push(o),1===this.bodies.length?this.bodyA=o:2===this.bodies.length&&(this.bodyB=o)},goog.exportProperty(box2d.b2AreaJointDef.prototype,"AddBody",box2d.b2AreaJointDef.prototype.AddBody),box2d.b2AreaJoint=function(o){box2d.b2Joint.call(this,o),box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=o.bodies.length,"You cannot create an area joint with less than three bodies."),this.m_bodies=o.bodies,this.m_frequencyHz=o.frequencyHz,this.m_dampingRatio=o.dampingRatio,this.m_targetLengths=box2d.b2MakeNumberArray(o.bodies.length),this.m_normals=box2d.b2Vec2.MakeArray(o.bodies.length),this.m_joints=Array(o.bodies.length),this.m_deltas=box2d.b2Vec2.MakeArray(o.bodies.length),this.m_delta=new box2d.b2Vec2;var t=new box2d.b2DistanceJointDef;t.frequencyHz=o.frequencyHz,t.dampingRatio=o.dampingRatio;for(var e=this.m_targetArea=0,r=this.m_bodies.length;e<r;++e){var i=this.m_bodies[e],b=this.m_bodies[(e+1)%r],p=i.GetWorldCenter(),n=b.GetWorldCenter();this.m_targetLengths[e]=box2d.b2Distance(p,n),this.m_targetArea+=box2d.b2Cross_V2_V2(p,n),t.Initialize(i,b,p,n),this.m_joints[e]=o.world.CreateJoint(t)}this.m_targetArea*=.5},goog.inherits(box2d.b2AreaJoint,box2d.b2Joint),goog.exportSymbol("box2d.b2AreaJoint",box2d.b2AreaJoint),box2d.b2AreaJoint.prototype.m_bodies=null,goog.exportProperty(box2d.b2AreaJoint.prototype,"m_bodies",box2d.b2AreaJoint.prototype.m_bodies),box2d.b2AreaJoint.prototype.m_frequencyHz=0,goog.exportProperty(box2d.b2AreaJoint.prototype,"m_frequencyHz",box2d.b2AreaJoint.prototype.m_frequencyHz),box2d.b2AreaJoint.prototype.m_dampingRatio=0,goog.exportProperty(box2d.b2AreaJoint.prototype,"m_dampingRatio",box2d.b2AreaJoint.prototype.m_dampingRatio),box2d.b2AreaJoint.prototype.m_impulse=0,goog.exportProperty(box2d.b2AreaJoint.prototype,"m_impulse",box2d.b2AreaJoint.prototype.m_impulse),box2d.b2AreaJoint.prototype.m_targetLengths=null,box2d.b2AreaJoint.prototype.m_targetArea=0,box2d.b2AreaJoint.prototype.m_normals=null,box2d.b2AreaJoint.prototype.m_joints=null,box2d.b2AreaJoint.prototype.m_deltas=null,box2d.b2AreaJoint.prototype.m_delta=null,box2d.b2AreaJoint.prototype.GetAnchorA=function(o){return o.SetZero()},goog.exportProperty(box2d.b2AreaJoint.prototype,"GetAnchorA",box2d.b2AreaJoint.prototype.GetAnchorA),box2d.b2AreaJoint.prototype.GetAnchorB=function(o){return o.SetZero()},goog.exportProperty(box2d.b2AreaJoint.prototype,"GetAnchorB",box2d.b2AreaJoint.prototype.GetAnchorB),box2d.b2AreaJoint.prototype.GetReactionForce=function(o,t){return t.SetZero()},goog.exportProperty(box2d.b2AreaJoint.prototype,"GetReactionForce",box2d.b2AreaJoint.prototype.GetReactionForce),box2d.b2AreaJoint.prototype.GetReactionTorque=function(o){return 0},goog.exportProperty(box2d.b2AreaJoint.prototype,"GetReactionTorque",box2d.b2AreaJoint.prototype.GetReactionTorque),box2d.b2AreaJoint.prototype.SetFrequency=function(o){this.m_frequencyHz=o;for(var t=0,e=this.m_joints.length;t<e;++t)this.m_joints[t].SetFrequency(o)},goog.exportProperty(box2d.b2AreaJoint.prototype,"SetFrequency",box2d.b2AreaJoint.prototype.SetFrequency),box2d.b2AreaJoint.prototype.GetFrequency=function(){return this.m_frequencyHz},goog.exportProperty(box2d.b2AreaJoint.prototype,"GetFrequency",box2d.b2AreaJoint.prototype.GetFrequency),box2d.b2AreaJoint.prototype.SetDampingRatio=function(o){this.m_dampingRatio=o;for(var t=0,e=this.m_joints.length;t<e;++t)this.m_joints[t].SetDampingRatio(o)},goog.exportProperty(box2d.b2AreaJoint.prototype,"SetDampingRatio",box2d.b2AreaJoint.prototype.SetDampingRatio),box2d.b2AreaJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio},goog.exportProperty(box2d.b2AreaJoint.prototype,"GetDampingRatio",box2d.b2AreaJoint.prototype.GetDampingRatio),box2d.b2AreaJoint.prototype.Dump=function(){box2d.DEBUG&&box2d.b2Log("Area joint dumping is not supported.\n")},goog.exportProperty(box2d.b2AreaJoint.prototype,"Dump",box2d.b2AreaJoint.prototype.Dump),box2d.b2AreaJoint.prototype.InitVelocityConstraints=function(o){for(var t=0,e=this.m_bodies.length;t<e;++t){var r=this.m_deltas[t];box2d.b2Sub_V2_V2(o.positions[this.m_bodies[(t+1)%e].m_islandIndex].c,o.positions[this.m_bodies[(t+e-1)%e].m_islandIndex].c,r)}if(o.step.warmStarting)for(this.m_impulse*=o.step.dtRatio,t=0,e=this.m_bodies.length;t<e;++t){var i=this.m_bodies[t],b=o.velocities[i.m_islandIndex].v;r=this.m_deltas[t];b.x+=i.m_invMass*r.y*.5*this.m_impulse,b.y+=i.m_invMass*-r.x*.5*this.m_impulse}else this.m_impulse=0},goog.exportProperty(box2d.b2AreaJoint.prototype,"InitVelocityConstraints",box2d.b2AreaJoint.prototype.InitVelocityConstraints),box2d.b2AreaJoint.prototype.SolveVelocityConstraints=function(o){for(var t=0,e=0,r=0,i=this.m_bodies.length;r<i;++r){var b=this.m_bodies[r],p=o.velocities[b.m_islandIndex].v,n=this.m_deltas[r];t=t+n.LengthSquared()/b.GetMass(),e=e+box2d.b2Cross_V2_V2(p,n)}for(t=-2*e/t,this.m_impulse+=t,r=0,i=this.m_bodies.length;r<i;++r)b=this.m_bodies[r],p=o.velocities[b.m_islandIndex].v,n=this.m_deltas[r],p.x+=b.m_invMass*n.y*.5*t,p.y+=b.m_invMass*-n.x*.5*t},goog.exportProperty(box2d.b2AreaJoint.prototype,"SolveVelocityConstraints",box2d.b2AreaJoint.prototype.SolveVelocityConstraints),box2d.b2AreaJoint.prototype.SolvePositionConstraints=function(o){for(var t=0,e=0,r=0,i=this.m_bodies.length;r<i;++r){var b=this.m_bodies[r],p=(b=o.positions[b.m_islandIndex].c,o.positions[this.m_bodies[(r+1)%i].m_islandIndex].c),n=box2d.b2Sub_V2_V2(p,b,this.m_delta),a=n.Length();a<box2d.b2_epsilon&&(a=1),this.m_normals[r].x=n.y/a,this.m_normals[r].y=-n.x/a,t+=a,e+=box2d.b2Cross_V2_V2(b,p)}for(t=.5*(this.m_targetArea-.5*e)/t,e=!0,r=0,i=this.m_bodies.length;r<i;++r)b=this.m_bodies[r],b=o.positions[b.m_islandIndex].c,(n=box2d.b2Add_V2_V2(this.m_normals[r],this.m_normals[(r+1)%i],this.m_delta)).SelfMul(t),(p=n.LengthSquared())>box2d.b2Sq(box2d.b2_maxLinearCorrection)&&n.SelfMul(box2d.b2_maxLinearCorrection/box2d.b2Sqrt(p)),p>box2d.b2Sq(box2d.b2_linearSlop)&&(e=!1),b.x+=n.x,b.y+=n.y;return e},goog.exportProperty(box2d.b2AreaJoint.prototype,"SolvePositionConstraints",box2d.b2AreaJoint.prototype.SolvePositionConstraints),box2d.b2DistanceJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_distanceJoint),this.localAnchorA=new box2d.b2Vec2,this.localAnchorB=new box2d.b2Vec2},goog.inherits(box2d.b2DistanceJointDef,box2d.b2JointDef),goog.exportSymbol("box2d.b2DistanceJointDef",box2d.b2DistanceJointDef),box2d.b2DistanceJointDef.prototype.localAnchorA=null,goog.exportProperty(box2d.b2DistanceJointDef.prototype,"localAnchorA",box2d.b2DistanceJointDef.prototype.localAnchorA),box2d.b2DistanceJointDef.prototype.localAnchorB=null,goog.exportProperty(box2d.b2DistanceJointDef.prototype,"localAnchorB",box2d.b2DistanceJointDef.prototype.localAnchorB),box2d.b2DistanceJointDef.prototype.length=1,goog.exportProperty(box2d.b2DistanceJointDef.prototype,"length",box2d.b2DistanceJointDef.prototype.length),box2d.b2DistanceJointDef.prototype.frequencyHz=0,goog.exportProperty(box2d.b2DistanceJointDef.prototype,"frequencyHz",box2d.b2DistanceJointDef.prototype.frequencyHz),box2d.b2DistanceJointDef.prototype.dampingRatio=0,goog.exportProperty(box2d.b2DistanceJointDef.prototype,"dampingRatio",box2d.b2DistanceJointDef.prototype.dampingRatio),box2d.b2DistanceJointDef.prototype.Initialize=function(o,t,e,r){this.bodyA=o,this.bodyB=t,this.bodyA.GetLocalPoint(e,this.localAnchorA),this.bodyB.GetLocalPoint(r,this.localAnchorB),this.length=box2d.b2Distance(e,r),this.dampingRatio=this.frequencyHz=0},goog.exportProperty(box2d.b2DistanceJointDef.prototype,"Initialize",box2d.b2DistanceJointDef.prototype.Initialize),box2d.b2DistanceJoint=function(o){box2d.b2Joint.call(this,o),this.m_u=new box2d.b2Vec2,this.m_rA=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2,this.m_localCenterA=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2,this.m_frequencyHz=o.frequencyHz,this.m_dampingRatio=o.dampingRatio,this.m_localAnchorA=o.localAnchorA.Clone(),this.m_localAnchorB=o.localAnchorB.Clone(),this.m_length=o.length},goog.inherits(box2d.b2DistanceJoint,box2d.b2Joint),goog.exportSymbol("box2d.b2DistanceJoint",box2d.b2DistanceJoint),box2d.b2DistanceJoint.prototype.m_frequencyHz=0,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_frequencyHz",box2d.b2DistanceJoint.prototype.m_frequencyHz),box2d.b2DistanceJoint.prototype.m_dampingRatio=0,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_dampingRatio",box2d.b2DistanceJoint.prototype.m_dampingRatio),box2d.b2DistanceJoint.prototype.m_bias=0,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_bias",box2d.b2DistanceJoint.prototype.m_bias),box2d.b2DistanceJoint.prototype.m_localAnchorA=null,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_localAnchorA",box2d.b2DistanceJoint.prototype.m_localAnchorA),box2d.b2DistanceJoint.prototype.m_localAnchorB=null,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_localAnchorB",box2d.b2DistanceJoint.prototype.m_localAnchorB),box2d.b2DistanceJoint.prototype.m_gamma=0,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_gamma",box2d.b2DistanceJoint.prototype.m_gamma),box2d.b2DistanceJoint.prototype.m_impulse=0,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_impulse",box2d.b2DistanceJoint.prototype.m_impulse),box2d.b2DistanceJoint.prototype.m_length=0,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_length",box2d.b2DistanceJoint.prototype.m_length),box2d.b2DistanceJoint.prototype.m_indexA=0,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_indexA",box2d.b2DistanceJoint.prototype.m_indexA),box2d.b2DistanceJoint.prototype.m_indexB=0,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_indexB",box2d.b2DistanceJoint.prototype.m_indexB),box2d.b2DistanceJoint.prototype.m_u=null,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_u",box2d.b2DistanceJoint.prototype.m_u),box2d.b2DistanceJoint.prototype.m_rA=null,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_rA",box2d.b2DistanceJoint.prototype.m_rA),box2d.b2DistanceJoint.prototype.m_rB=null,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_rB",box2d.b2DistanceJoint.prototype.m_rB),box2d.b2DistanceJoint.prototype.m_localCenterA=null,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_localCenterA",box2d.b2DistanceJoint.prototype.m_localCenterA),box2d.b2DistanceJoint.prototype.m_localCenterB=null,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_localCenterB",box2d.b2DistanceJoint.prototype.m_localCenterB),box2d.b2DistanceJoint.prototype.m_invMassA=0,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_invMassA",box2d.b2DistanceJoint.prototype.m_invMassA),box2d.b2DistanceJoint.prototype.m_invMassB=0,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_invMassB",box2d.b2DistanceJoint.prototype.m_invMassB),box2d.b2DistanceJoint.prototype.m_invIA=0,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_invIA",box2d.b2DistanceJoint.prototype.m_invIA),box2d.b2DistanceJoint.prototype.m_invIB=0,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_invIB",box2d.b2DistanceJoint.prototype.m_invIB),box2d.b2DistanceJoint.prototype.m_mass=0,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_mass",box2d.b2DistanceJoint.prototype.m_mass),box2d.b2DistanceJoint.prototype.m_qA=null,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_qA",box2d.b2DistanceJoint.prototype.m_qA),box2d.b2DistanceJoint.prototype.m_qB=null,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_qB",box2d.b2DistanceJoint.prototype.m_qB),box2d.b2DistanceJoint.prototype.m_lalcA=null,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_lalcA",box2d.b2DistanceJoint.prototype.m_lalcA),box2d.b2DistanceJoint.prototype.m_lalcB=null,goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_lalcB",box2d.b2DistanceJoint.prototype.m_lalcB),box2d.b2DistanceJoint.prototype.GetAnchorA=function(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)},goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetAnchorA",box2d.b2DistanceJoint.prototype.GetAnchorA),box2d.b2DistanceJoint.prototype.GetAnchorB=function(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)},goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetAnchorB",box2d.b2DistanceJoint.prototype.GetAnchorB),box2d.b2DistanceJoint.prototype.GetReactionForce=function(o,t){return t.Set(o*this.m_impulse*this.m_u.x,o*this.m_impulse*this.m_u.y)},goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetReactionForce",box2d.b2DistanceJoint.prototype.GetReactionForce),box2d.b2DistanceJoint.prototype.GetReactionTorque=function(o){return 0},goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetReactionTorque",box2d.b2DistanceJoint.prototype.GetReactionTorque),box2d.b2DistanceJoint.prototype.GetLocalAnchorA=function(o){return o.Copy(this.m_localAnchorA)},goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetLocalAnchorA",box2d.b2DistanceJoint.prototype.GetLocalAnchorA),box2d.b2DistanceJoint.prototype.GetLocalAnchorB=function(o){return o.Copy(this.m_localAnchorB)},goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetLocalAnchorB",box2d.b2DistanceJoint.prototype.GetLocalAnchorB),box2d.b2DistanceJoint.prototype.SetLength=function(o){this.m_length=o},goog.exportProperty(box2d.b2DistanceJoint.prototype,"SetLength",box2d.b2DistanceJoint.prototype.SetLength),box2d.b2DistanceJoint.prototype.GetLength=function(){return this.m_length},goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetLength",box2d.b2DistanceJoint.prototype.GetLength),box2d.b2DistanceJoint.prototype.SetFrequency=function(o){this.m_frequencyHz=o},goog.exportProperty(box2d.b2DistanceJoint.prototype,"SetFrequency",box2d.b2DistanceJoint.prototype.SetFrequency),box2d.b2DistanceJoint.prototype.GetFrequency=function(){return this.m_frequencyHz},goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetFrequency",box2d.b2DistanceJoint.prototype.GetFrequency),box2d.b2DistanceJoint.prototype.SetDampingRatio=function(o){this.m_dampingRatio=o},goog.exportProperty(box2d.b2DistanceJoint.prototype,"SetDampingRatio",box2d.b2DistanceJoint.prototype.SetDampingRatio),box2d.b2DistanceJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio},goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetDampingRatio",box2d.b2DistanceJoint.prototype.GetDampingRatio),box2d.b2DistanceJoint.prototype.Dump=function(){if(box2d.DEBUG){var o=this.m_bodyA.m_islandIndex,t=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2DistanceJointDef*/ var jd = new box2d.b2DistanceJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",o),box2d.b2Log("  jd.bodyB = bodies[%d];\n",t),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),box2d.b2Log("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),box2d.b2Log("  jd.length = %.15f;\n",this.m_length),box2d.b2Log("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),box2d.b2Log("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}},goog.exportProperty(box2d.b2DistanceJoint.prototype,"Dump",box2d.b2DistanceJoint.prototype.Dump),box2d.b2DistanceJoint.prototype.InitVelocityConstraints=function(o){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var t=o.positions[this.m_indexA].c,e=o.velocities[this.m_indexA].v,r=o.velocities[this.m_indexA].w,i=o.positions[this.m_indexB].c,b=o.positions[this.m_indexB].a,p=o.velocities[this.m_indexB].v,n=o.velocities[this.m_indexB].w,a=this.m_qA.SetAngle(o.positions[this.m_indexA].a);b=this.m_qB.SetAngle(b);if(box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2Mul_R_V2(a,this.m_lalcA,this.m_rA),box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2Mul_R_V2(b,this.m_lalcB,this.m_rB),this.m_u.x=i.x+this.m_rB.x-t.x-this.m_rA.x,this.m_u.y=i.y+this.m_rB.y-t.y-this.m_rA.y,(i=this.m_u.Length())>box2d.b2_linearSlop?this.m_u.SelfMul(1/i):this.m_u.SetZero(),t=box2d.b2Cross_V2_V2(this.m_rA,this.m_u),a=box2d.b2Cross_V2_V2(this.m_rB,this.m_u),t=this.m_invMassA+this.m_invIA*t*t+this.m_invMassB+this.m_invIB*a*a,this.m_mass=0!==t?1/t:0,0<this.m_frequencyHz){i=i-this.m_length,a=2*box2d.b2_pi*this.m_frequencyHz,b=this.m_mass*a*a;var s=o.step.dt;this.m_gamma=s*(2*this.m_mass*this.m_dampingRatio*a+s*b),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=i*s*b*this.m_gamma,t+=this.m_gamma,this.m_mass=0!==t?1/t:0}else this.m_bias=this.m_gamma=0;o.step.warmStarting?(this.m_impulse*=o.step.dtRatio,t=box2d.b2Mul_S_V2(this.m_impulse,this.m_u,box2d.b2DistanceJoint.prototype.InitVelocityConstraints.s_P),e.SelfMulSub(this.m_invMassA,t),r-=this.m_invIA*box2d.b2Cross_V2_V2(this.m_rA,t),p.SelfMulAdd(this.m_invMassB,t),n+=this.m_invIB*box2d.b2Cross_V2_V2(this.m_rB,t)):this.m_impulse=0,o.velocities[this.m_indexA].w=r,o.velocities[this.m_indexB].w=n},goog.exportProperty(box2d.b2DistanceJoint.prototype,"InitVelocityConstraints",box2d.b2DistanceJoint.prototype.InitVelocityConstraints),box2d.b2DistanceJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints=function(o){var t=o.velocities[this.m_indexA].v,e=o.velocities[this.m_indexA].w,r=o.velocities[this.m_indexB].v,i=o.velocities[this.m_indexB].w,b=box2d.b2AddCross_V2_S_V2(t,e,this.m_rA,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpA),p=box2d.b2AddCross_V2_S_V2(r,i,this.m_rB,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpB);b=box2d.b2Dot_V2_V2(this.m_u,box2d.b2Sub_V2_V2(p,b,box2d.b2Vec2.s_t0)),b=-this.m_mass*(b+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=b,b=box2d.b2Mul_S_V2(b,this.m_u,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_P),t.SelfMulSub(this.m_invMassA,b),e-=this.m_invIA*box2d.b2Cross_V2_V2(this.m_rA,b),r.SelfMulAdd(this.m_invMassB,b),i+=this.m_invIB*box2d.b2Cross_V2_V2(this.m_rB,b),o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=i},goog.exportProperty(box2d.b2DistanceJoint.prototype,"SolveVelocityConstraints",box2d.b2DistanceJoint.prototype.SolveVelocityConstraints),box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpA=new box2d.b2Vec2,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpB=new box2d.b2Vec2,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2DistanceJoint.prototype.SolvePositionConstraints=function(o){if(0<this.m_frequencyHz)return!0;var t=o.positions[this.m_indexA].c,e=o.positions[this.m_indexA].a,r=o.positions[this.m_indexB].c,i=o.positions[this.m_indexB].a;this.m_qA.SetAngle(e),this.m_qB.SetAngle(i);var b=box2d.b2Mul_R_V2(this.m_qA,this.m_lalcA,this.m_rA),p=box2d.b2Mul_R_V2(this.m_qB,this.m_lalcB,this.m_rB);(a=this.m_u).x=r.x+p.x-t.x-b.x,a.y=r.y+p.y-t.y-b.y;var n=this.m_u.Normalize()-this.m_length,a=(n=box2d.b2Clamp(n,-box2d.b2_maxLinearCorrection,box2d.b2_maxLinearCorrection),box2d.b2Mul_S_V2(-this.m_mass*n,a,box2d.b2DistanceJoint.prototype.SolvePositionConstraints.s_P));return t.SelfMulSub(this.m_invMassA,a),e-=this.m_invIA*box2d.b2Cross_V2_V2(b,a),r.SelfMulAdd(this.m_invMassB,a),i+=this.m_invIB*box2d.b2Cross_V2_V2(p,a),o.positions[this.m_indexA].a=e,o.positions[this.m_indexB].a=i,box2d.b2Abs(n)<box2d.b2_linearSlop},goog.exportProperty(box2d.b2DistanceJoint.prototype,"SolvePositionConstraints",box2d.b2DistanceJoint.prototype.SolvePositionConstraints),box2d.b2DistanceJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2,box2d.b2FrictionJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_frictionJoint),this.localAnchorA=new box2d.b2Vec2,this.localAnchorB=new box2d.b2Vec2},goog.inherits(box2d.b2FrictionJointDef,box2d.b2JointDef),goog.exportSymbol("box2d.b2FrictionJointDef",box2d.b2FrictionJointDef),box2d.b2FrictionJointDef.prototype.localAnchorA=null,goog.exportProperty(box2d.b2FrictionJointDef.prototype,"localAnchorA",box2d.b2FrictionJointDef.prototype.localAnchorA),box2d.b2FrictionJointDef.prototype.localAnchorB=null,goog.exportProperty(box2d.b2FrictionJointDef.prototype,"localAnchorB",box2d.b2FrictionJointDef.prototype.localAnchorB),box2d.b2FrictionJointDef.prototype.maxForce=0,goog.exportProperty(box2d.b2FrictionJointDef.prototype,"maxForce",box2d.b2FrictionJointDef.prototype.maxForce),box2d.b2FrictionJointDef.prototype.maxTorque=0,goog.exportProperty(box2d.b2FrictionJointDef.prototype,"maxTorque",box2d.b2FrictionJointDef.prototype.maxTorque),box2d.b2FrictionJointDef.prototype.Initialize=function(o,t,e){this.bodyA=o,this.bodyB=t,this.bodyA.GetLocalPoint(e,this.localAnchorA),this.bodyB.GetLocalPoint(e,this.localAnchorB)},goog.exportProperty(box2d.b2FrictionJointDef.prototype,"Initialize",box2d.b2FrictionJointDef.prototype.Initialize),box2d.b2FrictionJoint=function(o){box2d.b2Joint.call(this,o),this.m_localAnchorA=o.localAnchorA.Clone(),this.m_localAnchorB=o.localAnchorB.Clone(),this.m_linearImpulse=(new box2d.b2Vec2).SetZero(),this.m_maxForce=o.maxForce,this.m_maxTorque=o.maxTorque,this.m_rA=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2,this.m_localCenterA=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_linearMass=(new box2d.b2Mat22).SetZero(),this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2,this.m_K=new box2d.b2Mat22},goog.inherits(box2d.b2FrictionJoint,box2d.b2Joint),goog.exportSymbol("box2d.b2FrictionJoint",box2d.b2FrictionJoint),box2d.b2FrictionJoint.prototype.m_localAnchorA=null,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_localAnchorA",box2d.b2FrictionJoint.prototype.m_localAnchorA),box2d.b2FrictionJoint.prototype.m_localAnchorB=null,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_localAnchorB",box2d.b2FrictionJoint.prototype.m_localAnchorB),box2d.b2FrictionJoint.prototype.m_linearImpulse=null,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_linearImpulse",box2d.b2FrictionJoint.prototype.m_linearImpulse),box2d.b2FrictionJoint.prototype.m_angularImpulse=0,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_angularImpulse",box2d.b2FrictionJoint.prototype.m_angularImpulse),box2d.b2FrictionJoint.prototype.m_maxForce=0,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_maxForce",box2d.b2FrictionJoint.prototype.m_maxForce),box2d.b2FrictionJoint.prototype.m_maxTorque=0,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_maxTorque",box2d.b2FrictionJoint.prototype.m_maxTorque),box2d.b2FrictionJoint.prototype.m_indexA=0,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_indexA",box2d.b2FrictionJoint.prototype.m_indexA),box2d.b2FrictionJoint.prototype.m_indexB=0,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_indexB",box2d.b2FrictionJoint.prototype.m_indexB),box2d.b2FrictionJoint.prototype.m_rA=null,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_rA",box2d.b2FrictionJoint.prototype.m_rA),box2d.b2FrictionJoint.prototype.m_rB=null,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_rB",box2d.b2FrictionJoint.prototype.m_rB),box2d.b2FrictionJoint.prototype.m_localCenterA=null,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_localCenterA",box2d.b2FrictionJoint.prototype.m_localCenterA),box2d.b2FrictionJoint.prototype.m_localCenterB=null,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_localCenterB",box2d.b2FrictionJoint.prototype.m_localCenterB),box2d.b2FrictionJoint.prototype.m_invMassA=0,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_invMassA",box2d.b2FrictionJoint.prototype.m_invMassA),box2d.b2FrictionJoint.prototype.m_invMassB=0,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_invMassB",box2d.b2FrictionJoint.prototype.m_invMassB),box2d.b2FrictionJoint.prototype.m_invIA=0,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_invIA",box2d.b2FrictionJoint.prototype.m_invIA),box2d.b2FrictionJoint.prototype.m_invIB=0,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_invIB",box2d.b2FrictionJoint.prototype.m_invIB),box2d.b2FrictionJoint.prototype.m_linearMass=null,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_linearMass",box2d.b2FrictionJoint.prototype.m_linearMass),box2d.b2FrictionJoint.prototype.m_angularMass=0,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_angularMass",box2d.b2FrictionJoint.prototype.m_angularMass),box2d.b2FrictionJoint.prototype.m_qA=null,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_qA",box2d.b2FrictionJoint.prototype.m_qA),box2d.b2FrictionJoint.prototype.m_qB=null,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_qB",box2d.b2FrictionJoint.prototype.m_qB),box2d.b2FrictionJoint.prototype.m_lalcA=null,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_lalcA",box2d.b2FrictionJoint.prototype.m_lalcA),box2d.b2FrictionJoint.prototype.m_lalcB=null,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_lalcB",box2d.b2FrictionJoint.prototype.m_lalcB),box2d.b2FrictionJoint.prototype.m_K=null,goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_K",box2d.b2FrictionJoint.prototype.m_K),box2d.b2FrictionJoint.prototype.InitVelocityConstraints=function(o){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var t=o.velocities[this.m_indexA].v,e=o.velocities[this.m_indexA].w,r=o.positions[this.m_indexB].a,i=o.velocities[this.m_indexB].v,b=o.velocities[this.m_indexB].w,p=this.m_qA.SetAngle(o.positions[this.m_indexA].a);r=this.m_qB.SetAngle(r);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),p=box2d.b2Mul_R_V2(p,this.m_lalcA,this.m_rA),box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var n=box2d.b2Mul_R_V2(r,this.m_lalcB,this.m_rB),a=(r=this.m_invMassA,this.m_invMassB),s=this.m_invIA,d=this.m_invIB,x=this.m_K;x.ex.x=r+a+s*p.y*p.y+d*n.y*n.y,x.ex.y=-s*p.x*p.y-d*n.x*n.y,x.ey.x=x.ex.y,x.ey.y=r+a+s*p.x*p.x+d*n.x*n.x,x.GetInverse(this.m_linearMass),this.m_angularMass=s+d,0<this.m_angularMass&&(this.m_angularMass=1/this.m_angularMass),o.step.warmStarting?(this.m_linearImpulse.SelfMul(o.step.dtRatio),this.m_angularImpulse*=o.step.dtRatio,p=this.m_linearImpulse,t.SelfMulSub(r,p),e-=s*(box2d.b2Cross_V2_V2(this.m_rA,p)+this.m_angularImpulse),i.SelfMulAdd(a,p),b+=d*(box2d.b2Cross_V2_V2(this.m_rB,p)+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0),o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=b},goog.exportProperty(box2d.b2FrictionJoint.prototype,"InitVelocityConstraints",box2d.b2FrictionJoint.prototype.InitVelocityConstraints),box2d.b2FrictionJoint.prototype.SolveVelocityConstraints=function(o){var t,e=o.velocities[this.m_indexA].v,r=o.velocities[this.m_indexA].w,i=o.velocities[this.m_indexB].v,b=o.velocities[this.m_indexB].w,p=this.m_invMassA,n=this.m_invMassB,a=this.m_invIA,s=this.m_invIB,d=o.step.dt,x=-this.m_angularMass*(b-r),l=this.m_angularImpulse;t=d*this.m_maxTorque,this.m_angularImpulse=box2d.b2Clamp(this.m_angularImpulse+x,-t,t),r-=a*(x=this.m_angularImpulse-l),b+=s*x,t=box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(i,b,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(e,r,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_Cdot),x=box2d.b2Mul_M22_V2(this.m_linearMass,t,box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_impulseV).SelfNeg(),l=box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_oldImpulseV.Copy(this.m_linearImpulse),this.m_linearImpulse.SelfAdd(x),t=d*this.m_maxForce,this.m_linearImpulse.LengthSquared()>t*t&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(t)),box2d.b2Sub_V2_V2(this.m_linearImpulse,l,x),e.SelfMulSub(p,x),r-=a*box2d.b2Cross_V2_V2(this.m_rA,x),i.SelfMulAdd(n,x),b+=s*box2d.b2Cross_V2_V2(this.m_rB,x),o.velocities[this.m_indexA].w=r,o.velocities[this.m_indexB].w=b},goog.exportProperty(box2d.b2FrictionJoint.prototype,"SolveVelocityConstraints",box2d.b2FrictionJoint.prototype.SolveVelocityConstraints),box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2,box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_impulseV=new box2d.b2Vec2,box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_oldImpulseV=new box2d.b2Vec2,box2d.b2FrictionJoint.prototype.SolvePositionConstraints=function(o){return!0},goog.exportProperty(box2d.b2FrictionJoint.prototype,"SolvePositionConstraints",box2d.b2FrictionJoint.prototype.SolvePositionConstraints),box2d.b2FrictionJoint.prototype.GetAnchorA=function(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)},goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetAnchorA",box2d.b2FrictionJoint.prototype.GetAnchorA),box2d.b2FrictionJoint.prototype.GetAnchorB=function(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)},goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetAnchorB",box2d.b2FrictionJoint.prototype.GetAnchorB),box2d.b2FrictionJoint.prototype.GetReactionForce=function(o,t){return t.Set(o*this.m_linearImpulse.x,o*this.m_linearImpulse.y)},goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetReactionForce",box2d.b2FrictionJoint.prototype.GetReactionForce),box2d.b2FrictionJoint.prototype.GetReactionTorque=function(o){return o*this.m_angularImpulse},goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetReactionTorque",box2d.b2FrictionJoint.prototype.GetReactionTorque),box2d.b2FrictionJoint.prototype.GetLocalAnchorA=function(o){return o.Copy(this.m_localAnchorA)},goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetLocalAnchorA",box2d.b2FrictionJoint.prototype.GetLocalAnchorA),box2d.b2FrictionJoint.prototype.GetLocalAnchorB=function(o){return o.Copy(this.m_localAnchorB)},goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetLocalAnchorB",box2d.b2FrictionJoint.prototype.GetLocalAnchorB),box2d.b2FrictionJoint.prototype.SetMaxForce=function(o){this.m_maxForce=o},goog.exportProperty(box2d.b2FrictionJoint.prototype,"SetMaxForce",box2d.b2FrictionJoint.prototype.SetMaxForce),box2d.b2FrictionJoint.prototype.GetMaxForce=function(){return this.m_maxForce},goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetMaxForce",box2d.b2FrictionJoint.prototype.GetMaxForce),box2d.b2FrictionJoint.prototype.SetMaxTorque=function(o){this.m_maxTorque=o},goog.exportProperty(box2d.b2FrictionJoint.prototype,"SetMaxTorque",box2d.b2FrictionJoint.prototype.SetMaxTorque),box2d.b2FrictionJoint.prototype.GetMaxTorque=function(){return this.m_maxTorque},goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetMaxTorque",box2d.b2FrictionJoint.prototype.GetMaxTorque),box2d.b2FrictionJoint.prototype.Dump=function(){if(box2d.DEBUG){var o=this.m_bodyA.m_islandIndex,t=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2FrictionJointDef*/ var jd = new box2d.b2FrictionJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",o),box2d.b2Log("  jd.bodyB = bodies[%d];\n",t),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),box2d.b2Log("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),box2d.b2Log("  jd.maxForce = %.15f;\n",this.m_maxForce),box2d.b2Log("  jd.maxTorque = %.15f;\n",this.m_maxTorque),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}},goog.exportProperty(box2d.b2FrictionJoint.prototype,"Dump",box2d.b2FrictionJoint.prototype.Dump),box2d.b2JointFactory={},box2d.b2JointFactory.Create=function(o,t){var e=null;switch(o.type){case box2d.b2JointType.e_distanceJoint:e=new box2d.b2DistanceJoint(o instanceof box2d.b2DistanceJointDef?o:null);break;case box2d.b2JointType.e_mouseJoint:e=new box2d.b2MouseJoint(o instanceof box2d.b2MouseJointDef?o:null);break;case box2d.b2JointType.e_prismaticJoint:e=new box2d.b2PrismaticJoint(o instanceof box2d.b2PrismaticJointDef?o:null);break;case box2d.b2JointType.e_revoluteJoint:e=new box2d.b2RevoluteJoint(o instanceof box2d.b2RevoluteJointDef?o:null);break;case box2d.b2JointType.e_pulleyJoint:e=new box2d.b2PulleyJoint(o instanceof box2d.b2PulleyJointDef?o:null);break;case box2d.b2JointType.e_gearJoint:e=new box2d.b2GearJoint(o instanceof box2d.b2GearJointDef?o:null);break;case box2d.b2JointType.e_wheelJoint:e=new box2d.b2WheelJoint(o instanceof box2d.b2WheelJointDef?o:null);break;case box2d.b2JointType.e_weldJoint:e=new box2d.b2WeldJoint(o instanceof box2d.b2WeldJointDef?o:null);break;case box2d.b2JointType.e_frictionJoint:e=new box2d.b2FrictionJoint(o instanceof box2d.b2FrictionJointDef?o:null);break;case box2d.b2JointType.e_ropeJoint:e=new box2d.b2RopeJoint(o instanceof box2d.b2RopeJointDef?o:null);break;case box2d.b2JointType.e_motorJoint:e=new box2d.b2MotorJoint(o instanceof box2d.b2MotorJointDef?o:null);break;case box2d.b2JointType.e_areaJoint:e=new box2d.b2AreaJoint(o instanceof box2d.b2AreaJointDef?o:null);break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}return e},goog.exportSymbol("box2d.b2JointFactory.Create",box2d.b2JointFactory.Create),box2d.b2JointFactory.Destroy=function(o,t){},goog.exportSymbol("box2d.b2JointFactory.Destroy",box2d.b2JointFactory.Destroy),box2d.b2World=function(o){this.m_flag_clearForces=!0,this.m_contactManager=new box2d.b2ContactManager,this.m_gravity=o.Clone(),this.m_out_gravity=new box2d.b2Vec2,this.m_allowSleep=!0,this.m_debugDraw=this.m_destructionListener=null,this.m_continuousPhysics=this.m_warmStarting=!0,this.m_subStepping=!1,this.m_stepComplete=!0,this.m_profile=new box2d.b2Profile,this.m_island=new box2d.b2Island,this.s_stack=[]},goog.exportSymbol("box2d.b2World",box2d.b2World),box2d.b2World.prototype.m_flag_newFixture=!1,goog.exportProperty(box2d.b2World.prototype,"m_flag_newFixture",box2d.b2World.prototype.m_flag_newFixture),box2d.b2World.prototype.m_flag_locked=!1,goog.exportProperty(box2d.b2World.prototype,"m_flag_locked",box2d.b2World.prototype.m_flag_locked),box2d.b2World.prototype.m_flag_clearForces=!1,goog.exportProperty(box2d.b2World.prototype,"m_flag_clearForces",box2d.b2World.prototype.m_flag_clearForces),box2d.b2World.prototype.m_contactManager=null,goog.exportProperty(box2d.b2World.prototype,"m_contactManager",box2d.b2World.prototype.m_contactManager),box2d.b2World.prototype.m_bodyList=null,goog.exportProperty(box2d.b2World.prototype,"m_bodyList",box2d.b2World.prototype.m_bodyList),box2d.b2World.prototype.m_jointList=null,goog.exportProperty(box2d.b2World.prototype,"m_jointList",box2d.b2World.prototype.m_jointList),box2d.b2World.prototype.m_particleSystemList=null,goog.exportProperty(box2d.b2World.prototype,"m_particleSystemList",box2d.b2World.prototype.m_particleSystemList),box2d.b2World.prototype.m_bodyCount=0,goog.exportProperty(box2d.b2World.prototype,"m_bodyCount",box2d.b2World.prototype.m_bodyCount),box2d.b2World.prototype.m_jointCount=0,goog.exportProperty(box2d.b2World.prototype,"m_jointCount",box2d.b2World.prototype.m_jointCount),box2d.b2World.prototype.m_gravity=null,goog.exportProperty(box2d.b2World.prototype,"m_gravity",box2d.b2World.prototype.m_gravity),box2d.b2World.prototype.m_out_gravity=null,goog.exportProperty(box2d.b2World.prototype,"m_out_gravity",box2d.b2World.prototype.m_out_gravity),box2d.b2World.prototype.m_allowSleep=!0,goog.exportProperty(box2d.b2World.prototype,"m_allowSleep",box2d.b2World.prototype.m_allowSleep),box2d.b2World.prototype.m_destructionListener=null,goog.exportProperty(box2d.b2World.prototype,"m_destructionListener",box2d.b2World.prototype.m_destructionListener),box2d.b2World.prototype.m_debugDraw=null,goog.exportProperty(box2d.b2World.prototype,"m_debugDraw",box2d.b2World.prototype.m_debugDraw),box2d.b2World.prototype.m_inv_dt0=0,goog.exportProperty(box2d.b2World.prototype,"m_inv_dt0",box2d.b2World.prototype.m_inv_dt0),box2d.b2World.prototype.m_warmStarting=!0,goog.exportProperty(box2d.b2World.prototype,"m_warmStarting",box2d.b2World.prototype.m_warmStarting),box2d.b2World.prototype.m_continuousPhysics=!0,goog.exportProperty(box2d.b2World.prototype,"m_continuousPhysics",box2d.b2World.prototype.m_continuousPhysics),box2d.b2World.prototype.m_subStepping=!1,goog.exportProperty(box2d.b2World.prototype,"m_subStepping",box2d.b2World.prototype.m_subStepping),box2d.b2World.prototype.m_stepComplete=!0,goog.exportProperty(box2d.b2World.prototype,"m_stepComplete",box2d.b2World.prototype.m_stepComplete),box2d.b2World.prototype.m_profile=null,goog.exportProperty(box2d.b2World.prototype,"m_profile",box2d.b2World.prototype.m_profile),box2d.b2World.prototype.m_island=null,goog.exportProperty(box2d.b2World.prototype,"m_island",box2d.b2World.prototype.m_island),box2d.b2World.prototype.s_stack=null,goog.exportProperty(box2d.b2World.prototype,"s_stack",box2d.b2World.prototype.s_stack),box2d.b2World.prototype.m_controllerList=null,goog.exportProperty(box2d.b2World.prototype,"m_controllerList",box2d.b2World.prototype.m_controllerList),box2d.b2World.prototype.m_controllerCount=0,goog.exportProperty(box2d.b2World.prototype,"m_controllerCount",box2d.b2World.prototype.m_controllerCount),box2d.b2World.prototype.SetAllowSleeping=function(o){if(o!==this.m_allowSleep&&(this.m_allowSleep=o,!this.m_allowSleep))for(o=this.m_bodyList;o;o=o.m_next)o.SetAwake(!0)},goog.exportProperty(box2d.b2World.prototype,"SetAllowSleeping",box2d.b2World.prototype.SetAllowSleeping),box2d.b2World.prototype.GetAllowSleeping=function(){return this.m_allowSleep},goog.exportProperty(box2d.b2World.prototype,"GetAllowSleeping",box2d.b2World.prototype.GetAllowSleeping),box2d.b2World.prototype.SetWarmStarting=function(o){this.m_warmStarting=o},goog.exportProperty(box2d.b2World.prototype,"SetWarmStarting",box2d.b2World.prototype.SetWarmStarting),box2d.b2World.prototype.GetWarmStarting=function(){return this.m_warmStarting},goog.exportProperty(box2d.b2World.prototype,"GetWarmStarting",box2d.b2World.prototype.GetWarmStarting),box2d.b2World.prototype.SetContinuousPhysics=function(o){this.m_continuousPhysics=o},goog.exportProperty(box2d.b2World.prototype,"SetContinuousPhysics",box2d.b2World.prototype.SetContinuousPhysics),box2d.b2World.prototype.GetContinuousPhysics=function(){return this.m_continuousPhysics},goog.exportProperty(box2d.b2World.prototype,"GetContinuousPhysics",box2d.b2World.prototype.GetContinuousPhysics),box2d.b2World.prototype.SetSubStepping=function(o){this.m_subStepping=o},goog.exportProperty(box2d.b2World.prototype,"SetSubStepping",box2d.b2World.prototype.SetSubStepping),box2d.b2World.prototype.GetSubStepping=function(){return this.m_subStepping},goog.exportProperty(box2d.b2World.prototype,"GetSubStepping",box2d.b2World.prototype.GetSubStepping),box2d.b2World.prototype.GetBodyList=function(){return this.m_bodyList},goog.exportProperty(box2d.b2World.prototype,"GetBodyList",box2d.b2World.prototype.GetBodyList),box2d.b2World.prototype.GetJointList=function(){return this.m_jointList},goog.exportProperty(box2d.b2World.prototype,"GetJointList",box2d.b2World.prototype.GetJointList),box2d.b2World.prototype.GetParticleSystemList=function(){return this.m_particleSystemList},goog.exportProperty(box2d.b2World.prototype,"GetParticleSystemList",box2d.b2World.prototype.GetParticleSystemList),box2d.b2World.prototype.GetContactList=function(){return this.m_contactManager.m_contactList},goog.exportProperty(box2d.b2World.prototype,"GetContactList",box2d.b2World.prototype.GetContactList),box2d.b2World.prototype.GetBodyCount=function(){return this.m_bodyCount},goog.exportProperty(box2d.b2World.prototype,"GetBodyCount",box2d.b2World.prototype.GetBodyCount),box2d.b2World.prototype.GetJointCount=function(){return this.m_jointCount},goog.exportProperty(box2d.b2World.prototype,"GetJointCount",box2d.b2World.prototype.GetJointCount),box2d.b2World.prototype.GetContactCount=function(){return this.m_contactManager.m_contactCount},goog.exportProperty(box2d.b2World.prototype,"GetContactCount",box2d.b2World.prototype.GetContactCount),box2d.b2World.prototype.SetGravity=function(o,t){if(t=t||!0,(this.m_gravity.x!==o.x||this.m_gravity.y!==o.y)&&(this.m_gravity.Copy(o),t))for(var e=this.m_bodyList;e;e=e.m_next)e.SetAwake(!0)},goog.exportProperty(box2d.b2World.prototype,"SetGravity",box2d.b2World.prototype.SetGravity),box2d.b2World.prototype.GetGravity=function(o){return(o=o||this.m_out_gravity).Copy(this.m_gravity)},goog.exportProperty(box2d.b2World.prototype,"GetGravity",box2d.b2World.prototype.GetGravity),box2d.b2World.prototype.IsLocked=function(){return this.m_flag_locked},goog.exportProperty(box2d.b2World.prototype,"IsLocked",box2d.b2World.prototype.IsLocked),box2d.b2World.prototype.SetAutoClearForces=function(o){this.m_flag_clearForces=o},goog.exportProperty(box2d.b2World.prototype,"SetAutoClearForces",box2d.b2World.prototype.SetAutoClearForces),box2d.b2World.prototype.GetAutoClearForces=function(){return this.m_flag_clearForces},goog.exportProperty(box2d.b2World.prototype,"GetAutoClearForces",box2d.b2World.prototype.GetAutoClearForces),box2d.b2World.prototype.GetContactManager=function(){return this.m_contactManager},goog.exportProperty(box2d.b2World.prototype,"GetContactManager",box2d.b2World.prototype.GetContactManager),box2d.b2World.prototype.GetProfile=function(){return this.m_profile},goog.exportProperty(box2d.b2World.prototype,"GetProfile",box2d.b2World.prototype.GetProfile),box2d.b2World.prototype.SetDestructionListener=function(o){this.m_destructionListener=o},goog.exportProperty(box2d.b2World.prototype,"SetDestructionListener",box2d.b2World.prototype.SetDestructionListener),box2d.b2World.prototype.SetContactFilter=function(o){this.m_contactManager.m_contactFilter=o},goog.exportProperty(box2d.b2World.prototype,"SetContactFilter",box2d.b2World.prototype.SetContactFilter),box2d.b2World.prototype.SetContactListener=function(o){this.m_contactManager.m_contactListener=o},goog.exportProperty(box2d.b2World.prototype,"SetContactListener",box2d.b2World.prototype.SetContactListener),box2d.b2World.prototype.SetDebugDraw=function(o){this.m_debugDraw=o},goog.exportProperty(box2d.b2World.prototype,"SetDebugDraw",box2d.b2World.prototype.SetDebugDraw),box2d.b2World.prototype.CreateBody=function(o){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.IsLocked()),this.IsLocked()?null:((o=new box2d.b2Body(o,this)).m_prev=null,(o.m_next=this.m_bodyList)&&(this.m_bodyList.m_prev=o),this.m_bodyList=o,++this.m_bodyCount,o)},goog.exportProperty(box2d.b2World.prototype,"CreateBody",box2d.b2World.prototype.CreateBody),box2d.b2World.prototype.DestroyBody=function(o){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_bodyCount),box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.IsLocked()),!this.IsLocked()){for(var t=o.m_jointList;t;){var e=t;t=t.next;this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(e.joint),this.DestroyJoint(e.joint),o.m_jointList=t}for(o.m_jointList=null,t=o.m_controllerList;t;)e=t,t=t.nextController,e.controller.RemoveBody(o);for(t=o.m_contactList;t;)e=t,t=t.next,this.m_contactManager.Destroy(e.contact);for(o.m_contactList=null,t=o.m_fixtureList;t;)e=t,t=t.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(e),e.DestroyProxies(this.m_contactManager.m_broadPhase),e.Destroy(),o.m_fixtureList=t,--o.m_fixtureCount;o.m_fixtureList=null,o.m_fixtureCount=0,o.m_prev&&(o.m_prev.m_next=o.m_next),o.m_next&&(o.m_next.m_prev=o.m_prev),o===this.m_bodyList&&(this.m_bodyList=o.m_next),--this.m_bodyCount}},goog.exportProperty(box2d.b2World.prototype,"DestroyBody",box2d.b2World.prototype.DestroyBody),box2d.b2World.prototype.CreateJoint=function(o){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.IsLocked()),this.IsLocked())return null;var t=box2d.b2JointFactory.Create(o,null);t.m_prev=null,(t.m_next=this.m_jointList)&&(this.m_jointList.m_prev=t),this.m_jointList=t,++this.m_jointCount,t.m_edgeA.joint=t,t.m_edgeA.other=t.m_bodyB,t.m_edgeA.prev=null,(t.m_edgeA.next=t.m_bodyA.m_jointList)&&(t.m_bodyA.m_jointList.prev=t.m_edgeA),t.m_bodyA.m_jointList=t.m_edgeA,t.m_edgeB.joint=t,t.m_edgeB.other=t.m_bodyA,t.m_edgeB.prev=null,(t.m_edgeB.next=t.m_bodyB.m_jointList)&&(t.m_bodyB.m_jointList.prev=t.m_edgeB),t.m_bodyB.m_jointList=t.m_edgeB;var e=o.bodyA,r=o.bodyB;if(!o.collideConnected)for(o=r.GetContactList();o;)o.other===e&&o.contact.FlagForFiltering(),o=o.next;return t},goog.exportProperty(box2d.b2World.prototype,"CreateJoint",box2d.b2World.prototype.CreateJoint),box2d.b2World.prototype.DestroyJoint=function(o){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.IsLocked()),!this.IsLocked()){var t=o.m_collideConnected;o.m_prev&&(o.m_prev.m_next=o.m_next),o.m_next&&(o.m_next.m_prev=o.m_prev),o===this.m_jointList&&(this.m_jointList=o.m_next);var e=o.m_bodyA,r=o.m_bodyB;if(e.SetAwake(!0),r.SetAwake(!0),o.m_edgeA.prev&&(o.m_edgeA.prev.next=o.m_edgeA.next),o.m_edgeA.next&&(o.m_edgeA.next.prev=o.m_edgeA.prev),o.m_edgeA===e.m_jointList&&(e.m_jointList=o.m_edgeA.next),o.m_edgeA.prev=null,o.m_edgeA.next=null,o.m_edgeB.prev&&(o.m_edgeB.prev.next=o.m_edgeB.next),o.m_edgeB.next&&(o.m_edgeB.next.prev=o.m_edgeB.prev),o.m_edgeB===r.m_jointList&&(r.m_jointList=o.m_edgeB.next),o.m_edgeB.prev=null,o.m_edgeB.next=null,box2d.b2JointFactory.Destroy(o,null),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_jointCount),--this.m_jointCount,!t)for(o=r.GetContactList();o;)o.other===e&&o.contact.FlagForFiltering(),o=o.next}},goog.exportProperty(box2d.b2World.prototype,"DestroyJoint",box2d.b2World.prototype.DestroyJoint),box2d.b2World.prototype.CreateParticleSystem=function(o){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.IsLocked()),this.IsLocked()?null:((o=new box2d.b2ParticleSystem(o,this)).m_prev=null,(o.m_next=this.m_particleSystemList)&&(this.m_particleSystemList.m_prev=o),this.m_particleSystemList=o)},goog.exportProperty(box2d.b2World.prototype,"CreateParticleSystem",box2d.b2World.prototype.CreateParticleSystem),box2d.b2World.prototype.DestroyParticleSystem=function(o){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.IsLocked()),this.IsLocked()||(o.m_prev&&(o.m_prev.m_next=o.m_next),o.m_next&&(o.m_next.m_prev=o.m_prev),o===this.m_particleSystemList&&(this.m_particleSystemList=o.m_next))},goog.exportProperty(box2d.b2World.prototype,"DestroyParticleSystem",box2d.b2World.prototype.DestroyParticleSystem),box2d.b2World.prototype.Solve=function(o){for(var t=this.m_bodyList;t;t=t.m_next)t.m_xf0.Copy(t.m_xf);for(var e=this.m_controllerList;e;e=e.m_next)e.Step(o);for(this.m_profile.solveInit=0,this.m_profile.solveVelocity=0,this.m_profile.solvePosition=0,(e=this.m_island).Initialize(this.m_bodyCount,this.m_contactManager.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener),t=this.m_bodyList;t;t=t.m_next)t.m_flag_islandFlag=!1;for(var r=this.m_contactManager.m_contactList;r;r=r.m_next)r.m_flag_islandFlag=!1;for(r=this.m_jointList;r;r=r.m_next)r.m_islandFlag=!1;r=this.m_bodyCount;for(var i=this.s_stack,b=this.m_bodyList;b;b=b.m_next)if(!b.m_flag_islandFlag&&b.IsAwake()&&b.IsActive()&&b.GetType()!==box2d.b2BodyType.b2_staticBody){e.Clear();var p=0;for(i[p++]=b,b.m_flag_islandFlag=!0;0<p;)if(t=i[--p],box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.IsActive()),e.AddBody(t),t.SetAwake(!0),t.GetType()!==box2d.b2BodyType.b2_staticBody){for(var n=t.m_contactList;n;n=n.next){var a=n.contact;if(!a.m_flag_islandFlag&&a.IsEnabled()&&a.IsTouching()){var s=a.m_fixtureB.m_isSensor;a.m_fixtureA.m_isSensor||s||(e.AddContact(a),a.m_flag_islandFlag=!0,(a=n.other).m_flag_islandFlag||(box2d.ENABLE_ASSERTS&&box2d.b2Assert(p<r),i[p++]=a,a.m_flag_islandFlag=!0))}}for(t=t.m_jointList;t;t=t.next)t.joint.m_islandFlag||(a=t.other).IsActive()&&(e.AddJoint(t.joint),t.joint.m_islandFlag=!0,a.m_flag_islandFlag||(box2d.ENABLE_ASSERTS&&box2d.b2Assert(p<r),i[p++]=a,a.m_flag_islandFlag=!0))}for(t=new box2d.b2Profile,e.Solve(t,o,this.m_gravity,this.m_allowSleep),this.m_profile.solveInit+=t.solveInit,this.m_profile.solveVelocity+=t.solveVelocity,this.m_profile.solvePosition+=t.solvePosition,p=0;p<e.m_bodyCount;++p)(t=e.m_bodies[p]).GetType()===box2d.b2BodyType.b2_staticBody&&(t.m_flag_islandFlag=!1)}for(p=0;p<i.length&&i[p];++p)i[p]=null;for(o=new box2d.b2Timer,t=this.m_bodyList;t;t=t.m_next)t.m_flag_islandFlag&&t.GetType()!==box2d.b2BodyType.b2_staticBody&&t.SynchronizeFixtures();this.m_contactManager.FindNewContacts(),this.m_profile.broadphase=o.GetMilliseconds()},goog.exportProperty(box2d.b2World.prototype,"Solve",box2d.b2World.prototype.Solve),box2d.b2World.prototype.SolveTOI=function(o){var t=this.m_island;if(t.Initialize(2*box2d.b2_maxTOIContacts,box2d.b2_maxTOIContacts,0,null,this.m_contactManager.m_contactListener),this.m_stepComplete){for(var e=this.m_bodyList;e;e=e.m_next)e.m_flag_islandFlag=!1,e.m_sweep.alpha0=0;for(var r=this.m_contactManager.m_contactList;r;r=r.m_next)r.m_flag_toiFlag=r.m_flag_islandFlag=!1,r.m_toiCount=0,r.m_toi=1}for(;;){var i=null;for(e=1,r=this.m_contactManager.m_contactList;r;r=r.m_next)if(r.IsEnabled()&&!(r.m_toiCount>box2d.b2_maxSubSteps)){var b=1;if(r.m_flag_toiFlag)b=r.m_toi;else{var p=r.GetFixtureA(),n=r.GetFixtureB();if(p.IsSensor()||n.IsSensor())continue;b=p.GetBody();var a=n.GetBody(),s=b.m_type,d=a.m_type;box2d.ENABLE_ASSERTS&&box2d.b2Assert(s===box2d.b2BodyType.b2_dynamicBody||d===box2d.b2BodyType.b2_dynamicBody);var x=b.IsAwake()&&s!==box2d.b2BodyType.b2_staticBody,l=a.IsAwake()&&d!==box2d.b2BodyType.b2_staticBody;if(!x&&!l)continue;if(s=b.IsBullet()||s!==box2d.b2BodyType.b2_dynamicBody,d=a.IsBullet()||d!==box2d.b2BodyType.b2_dynamicBody,!s&&!d)continue;d=b.m_sweep.alpha0,b.m_sweep.alpha0<a.m_sweep.alpha0?(d=a.m_sweep.alpha0,b.m_sweep.Advance(d)):a.m_sweep.alpha0<b.m_sweep.alpha0&&(d=b.m_sweep.alpha0,a.m_sweep.Advance(d)),box2d.ENABLE_ASSERTS&&box2d.b2Assert(1>d),x=r.GetChildIndexA(),l=r.GetChildIndexB(),(s=box2d.b2World.prototype.SolveTOI.s_toi_input).proxyA.SetShape(p.GetShape(),x),s.proxyB.SetShape(n.GetShape(),l),s.sweepA.Copy(b.m_sweep),s.sweepB.Copy(a.m_sweep),s.tMax=1,b=box2d.b2World.prototype.SolveTOI.s_toi_output,box2d.b2TimeOfImpact(b,s),a=b.t,b=b.state===box2d.b2TOIOutputState.e_touching?box2d.b2Min(d+(1-d)*a,1):1,r.m_toi=b,r.m_flag_toiFlag=!0}b<e&&(i=r,e=b)}if(null===i||1-10*box2d.b2_epsilon<e){this.m_stepComplete=!0;break}if(p=i.GetFixtureA(),n=i.GetFixtureB(),b=p.GetBody(),a=n.GetBody(),r=box2d.b2World.prototype.SolveTOI.s_backup1.Copy(b.m_sweep),p=box2d.b2World.prototype.SolveTOI.s_backup2.Copy(a.m_sweep),b.Advance(e),a.Advance(e),i.Update(this.m_contactManager.m_contactListener),i.m_flag_toiFlag=!1,++i.m_toiCount,i.IsEnabled()&&i.IsTouching()){for(b.SetAwake(!0),a.SetAwake(!0),t.Clear(),t.AddBody(b),t.AddBody(a),t.AddContact(i),b.m_flag_islandFlag=!0,a.m_flag_islandFlag=!0,i.m_flag_islandFlag=!0,i=0;2>i;++i)if((r=0===i?b:a).m_type===box2d.b2BodyType.b2_dynamicBody)for(p=r.m_contactList;p&&t.m_bodyCount!==t.m_bodyCapacity&&t.m_contactCount!==t.m_contactCapacity;p=p.next)!(n=p.contact).m_flag_islandFlag&&((d=p.other).m_type!==box2d.b2BodyType.b2_dynamicBody||r.IsBullet()||d.IsBullet())&&(s=n.m_fixtureB.m_isSensor,n.m_fixtureA.m_isSensor||s||(s=box2d.b2World.prototype.SolveTOI.s_backup.Copy(d.m_sweep),d.m_flag_islandFlag||d.Advance(e),n.Update(this.m_contactManager.m_contactListener),n.IsEnabled()&&n.IsTouching()?(n.m_flag_islandFlag=!0,t.AddContact(n),d.m_flag_islandFlag||(d.m_flag_islandFlag=!0,d.m_type!==box2d.b2BodyType.b2_staticBody&&d.SetAwake(!0),t.AddBody(d))):(d.m_sweep.Copy(s),d.SynchronizeTransform())));for((i=box2d.b2World.prototype.SolveTOI.s_subStep).dt=(1-e)*o.dt,i.inv_dt=1/i.dt,i.dtRatio=1,i.positionIterations=20,i.velocityIterations=o.velocityIterations,i.particleIterations=o.particleIterations,i.warmStarting=!1,t.SolveTOI(i,b.m_islandIndex,a.m_islandIndex),i=0;i<t.m_bodyCount;++i)if((r=t.m_bodies[i]).m_flag_islandFlag=!1,r.m_type===box2d.b2BodyType.b2_dynamicBody)for(r.SynchronizeFixtures(),p=r.m_contactList;p;p=p.next)p.contact.m_flag_toiFlag=p.contact.m_flag_islandFlag=!1;if(this.m_contactManager.FindNewContacts(),this.m_subStepping){this.m_stepComplete=!1;break}}else i.SetEnabled(!1),b.m_sweep.Copy(r),a.m_sweep.Copy(p),b.SynchronizeTransform(),a.SynchronizeTransform()}},goog.exportProperty(box2d.b2World.prototype,"SolveTOI",box2d.b2World.prototype.SolveTOI),box2d.b2World.prototype.SolveTOI.s_subStep=new box2d.b2TimeStep,box2d.b2World.prototype.SolveTOI.s_backup=new box2d.b2Sweep,box2d.b2World.prototype.SolveTOI.s_backup1=new box2d.b2Sweep,box2d.b2World.prototype.SolveTOI.s_backup2=new box2d.b2Sweep,box2d.b2World.prototype.SolveTOI.s_toi_input=new box2d.b2TOIInput,box2d.b2World.prototype.SolveTOI.s_toi_output=new box2d.b2TOIOutput,box2d.b2World.prototype.Step=function(o,t,e,r){r=r||this.CalculateReasonableParticleIterations(o);var i=new box2d.b2Timer;this.m_flag_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_flag_newFixture=!1),this.m_flag_locked=!0;var b=box2d.b2World.prototype.Step.s_step;if(b.dt=o,b.velocityIterations=t,b.positionIterations=e,b.particleIterations=r,b.inv_dt=0<o?1/o:0,b.dtRatio=this.m_inv_dt0*o,b.warmStarting=this.m_warmStarting,o=new box2d.b2Timer,this.m_contactManager.Collide(),this.m_profile.collide=o.GetMilliseconds(),this.m_stepComplete&&0<b.dt){for(o=new box2d.b2Timer,t=this.m_particleSystemList;t;t=t.m_next)t.Solve(b);this.Solve(b),this.m_profile.solve=o.GetMilliseconds()}this.m_continuousPhysics&&0<b.dt&&(o=new box2d.b2Timer,this.SolveTOI(b),this.m_profile.solveTOI=o.GetMilliseconds()),0<b.dt&&(this.m_inv_dt0=b.inv_dt),this.m_flag_clearForces&&this.ClearForces(),this.m_flag_locked=!1,this.m_profile.step=i.GetMilliseconds()},goog.exportProperty(box2d.b2World.prototype,"Step",box2d.b2World.prototype.Step),box2d.b2World.prototype.Step.s_step=new box2d.b2TimeStep,box2d.b2World.prototype.ClearForces=function(){for(var o=this.m_bodyList;o;o=o.m_next)o.m_force.SetZero(),o.m_torque=0},goog.exportProperty(box2d.b2World.prototype,"ClearForces",box2d.b2World.prototype.ClearForces),box2d.b2World.prototype.QueryAABB=function(o,t){var e=this.m_contactManager.m_broadPhase;if(e.Query(function(t){return t=e.GetUserData(t),box2d.ENABLE_ASSERTS&&box2d.b2Assert(t instanceof box2d.b2FixtureProxy),t=t.fixture,o instanceof box2d.b2QueryCallback?o.ReportFixture(t):o(t)},t),o instanceof box2d.b2QueryCallback)for(var r=this.m_particleSystemList;r;r=r.m_next)o.ShouldQueryParticleSystem(r)&&r.QueryAABB(o,t)},goog.exportProperty(box2d.b2World.prototype,"QueryAABB",box2d.b2World.prototype.QueryAABB),box2d.b2World.prototype.QueryShape=function(o,t,e,r){var i=this.m_contactManager.m_broadPhase,b=box2d.b2World.prototype.QueryShape.s_aabb;if(t.ComputeAABB(b,e,r||0),i.Query(function(r){return r=i.GetUserData(r),box2d.ENABLE_ASSERTS&&box2d.b2Assert(r instanceof box2d.b2FixtureProxy),r=r.fixture,!box2d.b2TestOverlapShape(t,0,r.GetShape(),0,e,r.GetBody().GetTransform())||(o instanceof box2d.b2QueryCallback?o.ReportFixture(r):o(r))},b),o instanceof box2d.b2QueryCallback)for(r=this.m_particleSystemList;r;r=r.m_next)o.ShouldQueryParticleSystem(r)&&r.QueryAABB(o,b)},goog.exportProperty(box2d.b2World.prototype,"QueryShape",box2d.b2World.prototype.QueryShape),box2d.b2World.prototype.QueryShape.s_aabb=new box2d.b2AABB,box2d.b2World.prototype.QueryPoint=function(o,t,e){var r=this.m_contactManager.m_broadPhase;e="number"==typeof e?e:box2d.b2_linearSlop;var i=box2d.b2World.prototype.QueryPoint.s_aabb;if(i.lowerBound.Set(t.x-e,t.y-e),i.upperBound.Set(t.x+e,t.y+e),r.Query(function(e){return e=r.GetUserData(e),box2d.ENABLE_ASSERTS&&box2d.b2Assert(e instanceof box2d.b2FixtureProxy),!(e=e.fixture).TestPoint(t)||(o instanceof box2d.b2QueryCallback?o.ReportFixture(e):o(e))},i),o instanceof box2d.b2QueryCallback)for(e=this.m_particleSystemList;e;e=e.m_next)o.ShouldQueryParticleSystem(e)&&e.QueryAABB(o,i)},goog.exportProperty(box2d.b2World.prototype,"QueryPoint",box2d.b2World.prototype.QueryPoint),box2d.b2World.prototype.QueryPoint.s_aabb=new box2d.b2AABB,box2d.b2World.prototype.RayCast=function(o,t,e){var r=this.m_contactManager.m_broadPhase,i=box2d.b2World.prototype.RayCast.s_input;if(i.maxFraction=1,i.p1.Copy(t),i.p2.Copy(e),r.RayCast(function(i,b){var p=r.GetUserData(b);box2d.ENABLE_ASSERTS&&box2d.b2Assert(p instanceof box2d.b2FixtureProxy);var n=p.fixture,a=box2d.b2World.prototype.RayCast.s_output;if(n.RayCast(a,i,p.childIndex)){p=a.fraction;var s=box2d.b2World.prototype.RayCast.s_point;return s.Set((1-p)*t.x+p*e.x,(1-p)*t.y+p*e.y),o instanceof box2d.b2RayCastCallback?o.ReportFixture(n,s,a.normal,p):o(n,s,a.normal,p)}return i.maxFraction},i),o instanceof box2d.b2RayCastCallback)for(i=this.m_particleSystemList;i;i=i.m_next)o.ShouldQueryParticleSystem(i)&&i.RayCast(o,t,e)},goog.exportProperty(box2d.b2World.prototype,"RayCast",box2d.b2World.prototype.RayCast),box2d.b2World.prototype.RayCast.s_input=new box2d.b2RayCastInput,box2d.b2World.prototype.RayCast.s_output=new box2d.b2RayCastOutput,box2d.b2World.prototype.RayCast.s_point=new box2d.b2Vec2,box2d.b2World.prototype.RayCastOne=function(o,t){var e=null,r=1;return this.RayCast(function(o,t,i,b){return b<r&&(r=b,e=o),r},o,t),e},goog.exportProperty(box2d.b2World.prototype,"RayCastOne",box2d.b2World.prototype.RayCastOne),box2d.b2World.prototype.RayCastAll=function(o,t,e){return e.length=0,this.RayCast(function(o,t,r,i){return e.push(o),1},o,t),e},goog.exportProperty(box2d.b2World.prototype,"RayCastAll",box2d.b2World.prototype.RayCastAll),box2d.b2World.prototype.DrawShape=function(o,t){switch((e=o.GetShape()).m_type){case box2d.b2ShapeType.e_circleShape:e=e instanceof box2d.b2CircleShape?e:null,this.m_debugDraw.DrawSolidCircle(e.m_p,e.m_radius,box2d.b2Vec2.UNITX,t);break;case box2d.b2ShapeType.e_edgeShape:var e=(i=e instanceof box2d.b2EdgeShape?e:null).m_vertex1,r=i.m_vertex2;this.m_debugDraw.DrawSegment(e,r,t);break;case box2d.b2ShapeType.e_chainShape:var i=(e=e instanceof box2d.b2ChainShape?e:null).m_count,b=e.m_vertices;e=b[0];this.m_debugDraw.DrawCircle(e,.05,t);for(var p=1;p<i;++p)r=b[p],this.m_debugDraw.DrawSegment(e,r,t),this.m_debugDraw.DrawCircle(r,.05,t),e=r;break;case box2d.b2ShapeType.e_polygonShape:e=(i=e instanceof box2d.b2PolygonShape?e:null).m_count,b=i.m_vertices,this.m_debugDraw.DrawSolidPolygon(b,e,t)}},goog.exportProperty(box2d.b2World.prototype,"DrawShape",box2d.b2World.prototype.DrawShape),box2d.b2World.prototype.DrawJoint=function(o){var t=o.GetBodyA(),e=o.GetBodyB(),r=t.m_xf.p,i=e.m_xf.p,b=(e=o.GetAnchorA(box2d.b2World.prototype.DrawJoint.s_p1),t=o.GetAnchorB(box2d.b2World.prototype.DrawJoint.s_p2),box2d.b2World.prototype.DrawJoint.s_color.SetRGB(.5,.8,.8));switch(o.m_type){case box2d.b2JointType.e_distanceJoint:this.m_debugDraw.DrawSegment(e,t,b);break;case box2d.b2JointType.e_pulleyJoint:o=(r=o instanceof box2d.b2PulleyJoint?o:null).GetGroundAnchorA(box2d.b2World.prototype.DrawJoint.s_s1),r=r.GetGroundAnchorB(box2d.b2World.prototype.DrawJoint.s_s2),this.m_debugDraw.DrawSegment(o,e,b),this.m_debugDraw.DrawSegment(r,t,b),this.m_debugDraw.DrawSegment(o,r,b);break;case box2d.b2JointType.e_mouseJoint:this.m_debugDraw.DrawSegment(e,t,b);break;default:this.m_debugDraw.DrawSegment(r,e,b),this.m_debugDraw.DrawSegment(e,t,b),this.m_debugDraw.DrawSegment(i,t,b)}},goog.exportProperty(box2d.b2World.prototype,"DrawJoint",box2d.b2World.prototype.DrawJoint),box2d.b2World.prototype.DrawJoint.s_p1=new box2d.b2Vec2,box2d.b2World.prototype.DrawJoint.s_p2=new box2d.b2Vec2,box2d.b2World.prototype.DrawJoint.s_color=new box2d.b2Color(.5,.8,.8),box2d.b2World.prototype.DrawJoint.s_s1=new box2d.b2Vec2,box2d.b2World.prototype.DrawJoint.s_s2=new box2d.b2Vec2,box2d.b2World.prototype.DrawParticleSystem=function(o){var t=o.GetParticleCount();if(t){var e=o.GetRadius(),r=o.GetPositionBuffer();o.m_colorBuffer.data?(o=o.GetColorBuffer(),this.m_debugDraw.DrawParticles(r,e,o,t)):this.m_debugDraw.DrawParticles(r,e,null,t)}},goog.exportProperty(box2d.b2World.prototype,"DrawParticleSystem",box2d.b2World.prototype.DrawParticleSystem),box2d.b2World.prototype.DrawDebugData=function(){if(null!==this.m_debugDraw){var o=this.m_debugDraw.GetFlags(),t=box2d.b2World.prototype.DrawDebugData.s_color.SetRGB(0,0,0);if(o&box2d.b2DrawFlags.e_shapeBit)for(var e=this.m_bodyList;e;e=e.m_next){var r=e.m_xf;this.m_debugDraw.PushTransform(r);for(var i=e.GetFixtureList();i;i=i.m_next)e.IsActive()?e.GetType()===box2d.b2BodyType.b2_staticBody?t.SetRGB(.5,.9,.5):e.GetType()===box2d.b2BodyType.b2_kinematicBody?t.SetRGB(.5,.5,.9):e.IsAwake()?t.SetRGB(.9,.7,.7):t.SetRGB(.6,.6,.6):t.SetRGB(.5,.5,.3),this.DrawShape(i,t);this.m_debugDraw.PopTransform(r)}if(o&box2d.b2DrawFlags.e_particleBit)for(e=this.m_particleSystemList;e;e=e.m_next)this.DrawParticleSystem(e);if(o&box2d.b2DrawFlags.e_jointBit)for(e=this.m_jointList;e;e=e.m_next)this.DrawJoint(e);if(o&box2d.b2DrawFlags.e_aabbBit){t.SetRGB(.9,.3,.9);r=this.m_contactManager.m_broadPhase;var b=box2d.b2World.prototype.DrawDebugData.s_vs;for(e=this.m_bodyList;e;e=e.m_next)if(e.IsActive())for(i=e.GetFixtureList();i;i=i.m_next)for(var p=0;p<i.m_proxyCount;++p){var n=r.GetFatAABB(i.m_proxies[p].proxy);b[0].Set(n.lowerBound.x,n.lowerBound.y),b[1].Set(n.upperBound.x,n.lowerBound.y),b[2].Set(n.upperBound.x,n.upperBound.y),b[3].Set(n.lowerBound.x,n.upperBound.y),this.m_debugDraw.DrawPolygon(b,4,t)}}if(o&box2d.b2DrawFlags.e_centerOfMassBit)for(e=this.m_bodyList;e;e=e.m_next)(r=box2d.b2World.prototype.DrawDebugData.s_xf).q.Copy(e.m_xf.q),r.p.Copy(e.GetWorldCenter()),this.m_debugDraw.DrawTransform(r);if(o&box2d.b2DrawFlags.e_controllerBit)for(o=this.m_controllerList;o;o=o.m_next)o.Draw(this.m_debugDraw)}},goog.exportProperty(box2d.b2World.prototype,"DrawDebugData",box2d.b2World.prototype.DrawDebugData),box2d.b2World.prototype.DrawDebugData.s_color=new box2d.b2Color(0,0,0),box2d.b2World.prototype.DrawDebugData.s_vs=box2d.b2Vec2.MakeArray(4),box2d.b2World.prototype.DrawDebugData.s_xf=new box2d.b2Transform,box2d.b2World.prototype.SetBroadPhase=function(o){var t=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=o;for(var e=this.m_bodyList;e;e=e.m_next)for(var r=e.m_fixtureList;r;r=r.m_next)r.m_proxy=o.CreateProxy(t.GetFatAABB(r.m_proxy),r)},goog.exportProperty(box2d.b2World.prototype,"SetBroadPhase",box2d.b2World.prototype.SetBroadPhase),box2d.b2World.prototype.CalculateReasonableParticleIterations=function(o){return null===this.m_particleSystemList?1:box2d.b2CalculateParticleIterations(this.m_gravity.Length(),function(o){var t=box2d.b2_maxFloat;for(o=o.GetParticleSystemList();null!==o;o=o.m_next)t=box2d.b2Min(t,o.GetRadius());return t}(this),o)},goog.exportProperty(box2d.b2World.prototype,"CalculateReasonableParticleIterations",box2d.b2World.prototype.CalculateReasonableParticleIterations),box2d.b2World.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()},goog.exportProperty(box2d.b2World.prototype,"GetProxyCount",box2d.b2World.prototype.GetProxyCount),box2d.b2World.prototype.GetTreeHeight=function(){return this.m_contactManager.m_broadPhase.GetTreeHeight()},goog.exportProperty(box2d.b2World.prototype,"GetTreeHeight",box2d.b2World.prototype.GetTreeHeight),box2d.b2World.prototype.GetTreeBalance=function(){return this.m_contactManager.m_broadPhase.GetTreeBalance()},goog.exportProperty(box2d.b2World.prototype,"GetTreeBalance",box2d.b2World.prototype.GetTreeBalance),box2d.b2World.prototype.GetTreeQuality=function(){return this.m_contactManager.m_broadPhase.GetTreeQuality()},goog.exportProperty(box2d.b2World.prototype,"GetTreeQuality",box2d.b2World.prototype.GetTreeQuality),box2d.b2World.prototype.ShiftOrigin=function(o){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!this.IsLocked()),!this.IsLocked()){for(var t=this.m_bodyList;t;t=t.m_next)t.m_xf.p.SelfSub(o),t.m_sweep.c0.SelfSub(o),t.m_sweep.c.SelfSub(o);for(t=this.m_jointList;t;t=t.m_next)t.ShiftOrigin(o);this.m_contactManager.m_broadPhase.ShiftOrigin(o)}},goog.exportProperty(box2d.b2World.prototype,"ShiftOrigin",box2d.b2World.prototype.ShiftOrigin),box2d.b2World.prototype.Dump=function(){if(box2d.DEBUG&&!this.m_flag_locked){box2d.b2Log("/** @type {box2d.b2Vec2} */ var g = new box2d.b2Vec2(%.15f, %.15f);\n",this.m_gravity.x,this.m_gravity.y),box2d.b2Log("this.m_world.SetGravity(g);\n"),box2d.b2Log("/** @type {Array.<box2d.b2Body>} */ var bodies = new Array(%d);\n",this.m_bodyCount),box2d.b2Log("/** @type {Array.<box2d.b2Joint>} */ var joints = new Array(%d);\n",this.m_jointCount);for(var o=0,t=this.m_bodyList;t;t=t.m_next)t.m_islandIndex=o,t.Dump(),++o;for(o=0,t=this.m_jointList;t;t=t.m_next)t.m_index=o,++o;for(t=this.m_jointList;t;t=t.m_next)t.m_type!==box2d.b2JointType.e_gearJoint&&(box2d.b2Log("{\n"),t.Dump(),box2d.b2Log("}\n"));for(t=this.m_jointList;t;t=t.m_next)t.m_type===box2d.b2JointType.e_gearJoint&&(box2d.b2Log("{\n"),t.Dump(),box2d.b2Log("}\n"))}},goog.exportProperty(box2d.b2World.prototype,"Dump",box2d.b2World.prototype.Dump),box2d.b2World.prototype.AddController=function(o){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===o.m_world,"Controller can only be a member of one world"),o.m_world=this,o.m_next=this.m_controllerList,o.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=o),this.m_controllerList=o,++this.m_controllerCount,o},goog.exportProperty(box2d.b2World.prototype,"AddController",box2d.b2World.prototype.AddController),box2d.b2World.prototype.RemoveController=function(o){box2d.ENABLE_ASSERTS&&box2d.b2Assert(o.m_world===this,"Controller is not a member of this world"),o.m_prev&&(o.m_prev.m_next=o.m_next),o.m_next&&(o.m_next.m_prev=o.m_prev),this.m_controllerList===o&&(this.m_controllerList=o.m_next),--this.m_controllerCount,o.m_prev=null,o.m_next=null,o.m_world=null},goog.exportProperty(box2d.b2World.prototype,"RemoveController",box2d.b2World.prototype.RemoveController),box2d.b2MotorJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_motorJoint),this.linearOffset=new box2d.b2Vec2(0,0)},goog.inherits(box2d.b2MotorJointDef,box2d.b2JointDef),goog.exportSymbol("box2d.b2MotorJointDef",box2d.b2MotorJointDef),box2d.b2MotorJointDef.prototype.linearOffset=null,goog.exportProperty(box2d.b2MotorJointDef.prototype,"linearOffset",box2d.b2MotorJointDef.prototype.linearOffset),box2d.b2MotorJointDef.prototype.angularOffset=0,goog.exportProperty(box2d.b2MotorJointDef.prototype,"angularOffset",box2d.b2MotorJointDef.prototype.angularOffset),box2d.b2MotorJointDef.prototype.maxForce=1,goog.exportProperty(box2d.b2MotorJointDef.prototype,"maxForce",box2d.b2MotorJointDef.prototype.maxForce),box2d.b2MotorJointDef.prototype.maxTorque=1,goog.exportProperty(box2d.b2MotorJointDef.prototype,"maxTorque",box2d.b2MotorJointDef.prototype.maxTorque),box2d.b2MotorJointDef.prototype.correctionFactor=.3,goog.exportProperty(box2d.b2MotorJointDef.prototype,"correctionFactor",box2d.b2MotorJointDef.prototype.correctionFactor),box2d.b2MotorJointDef.prototype.Initialize=function(o,t){this.bodyA=o,this.bodyB=t,this.bodyA.GetLocalPoint(this.bodyB.GetPosition(),this.linearOffset);var e=this.bodyA.GetAngle();this.angularOffset=this.bodyB.GetAngle()-e},goog.exportProperty(box2d.b2MotorJointDef.prototype,"Initialize",box2d.b2MotorJointDef.prototype.Initialize),box2d.b2MotorJoint=function(o){box2d.b2Joint.call(this,o),this.m_linearOffset=o.linearOffset.Clone(),this.m_linearImpulse=new box2d.b2Vec2(0,0),this.m_maxForce=o.maxForce,this.m_maxTorque=o.maxTorque,this.m_correctionFactor=o.correctionFactor,this.m_rA=new box2d.b2Vec2(0,0),this.m_rB=new box2d.b2Vec2(0,0),this.m_localCenterA=new box2d.b2Vec2(0,0),this.m_localCenterB=new box2d.b2Vec2(0,0),this.m_linearError=new box2d.b2Vec2(0,0),this.m_linearMass=new box2d.b2Mat22,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_K=new box2d.b2Mat22},goog.inherits(box2d.b2MotorJoint,box2d.b2Joint),goog.exportSymbol("box2d.b2MotorJoint",box2d.b2MotorJoint),box2d.b2MotorJoint.prototype.m_linearOffset=null,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_linearOffset",box2d.b2MotorJoint.prototype.m_linearOffset),box2d.b2MotorJoint.prototype.m_angularOffset=0,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_angularOffset",box2d.b2MotorJoint.prototype.m_angularOffset),box2d.b2MotorJoint.prototype.m_linearImpulse=null,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_linearImpulse",box2d.b2MotorJoint.prototype.m_linearImpulse),box2d.b2MotorJoint.prototype.m_angularImpulse=0,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_angularImpulse",box2d.b2MotorJoint.prototype.m_angularImpulse),box2d.b2MotorJoint.prototype.m_maxForce=0,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_maxForce",box2d.b2MotorJoint.prototype.m_maxForce),box2d.b2MotorJoint.prototype.m_maxTorque=0,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_maxTorque",box2d.b2MotorJoint.prototype.m_maxTorque),box2d.b2MotorJoint.prototype.m_correctionFactor=.3,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_correctionFactor",box2d.b2MotorJoint.prototype.m_correctionFactor);box2d.b2MotorJoint.prototype.m_indexA=0,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_indexA",box2d.b2MotorJoint.prototype.m_indexA),box2d.b2MotorJoint.prototype.m_indexB=0,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_indexB",box2d.b2MotorJoint.prototype.m_indexB),box2d.b2MotorJoint.prototype.m_rA=null,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_rA",box2d.b2MotorJoint.prototype.m_rA),box2d.b2MotorJoint.prototype.m_rB=null,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_rB",box2d.b2MotorJoint.prototype.m_rB),box2d.b2MotorJoint.prototype.m_localCenterA=null,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_localCenterA",box2d.b2MotorJoint.prototype.m_localCenterA),box2d.b2MotorJoint.prototype.m_localCenterB=null,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_localCenterB",box2d.b2MotorJoint.prototype.m_localCenterB),box2d.b2MotorJoint.prototype.m_linearError=null,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_linearError",box2d.b2MotorJoint.prototype.m_linearError),box2d.b2MotorJoint.prototype.m_angularError=0,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_angularError",box2d.b2MotorJoint.prototype.m_angularError),box2d.b2MotorJoint.prototype.m_invMassA=0,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_invMassA",box2d.b2MotorJoint.prototype.m_invMassA),box2d.b2MotorJoint.prototype.m_invMassB=0,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_invMassB",box2d.b2MotorJoint.prototype.m_invMassB),box2d.b2MotorJoint.prototype.m_invIA=0,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_invIA",box2d.b2MotorJoint.prototype.m_invIA),box2d.b2MotorJoint.prototype.m_invIB=0,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_invIB",box2d.b2MotorJoint.prototype.m_invIB),box2d.b2MotorJoint.prototype.m_linearMass=null,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_linearMass",box2d.b2MotorJoint.prototype.m_linearMass),box2d.b2MotorJoint.prototype.m_angularMass=0,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_angularMass",box2d.b2MotorJoint.prototype.m_angularMass),box2d.b2MotorJoint.prototype.m_qA=null,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_qA",box2d.b2MotorJoint.prototype.m_qA),box2d.b2MotorJoint.prototype.m_qB=null,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_qB",box2d.b2MotorJoint.prototype.m_qB),box2d.b2MotorJoint.prototype.m_K=null,goog.exportProperty(box2d.b2MotorJoint.prototype,"m_K",box2d.b2MotorJoint.prototype.m_K),box2d.b2MotorJoint.prototype.GetAnchorA=function(o){return this.m_bodyA.GetPosition(o)},goog.exportProperty(box2d.b2MotorJoint.prototype,"GetAnchorA",box2d.b2MotorJoint.prototype.GetAnchorA),box2d.b2MotorJoint.prototype.GetAnchorB=function(o){return this.m_bodyB.GetPosition(o)},goog.exportProperty(box2d.b2MotorJoint.prototype,"GetAnchorB",box2d.b2MotorJoint.prototype.GetAnchorB),box2d.b2MotorJoint.prototype.GetReactionForce=function(o,t){return box2d.b2Mul_S_V2(o,this.m_linearImpulse,t)},goog.exportProperty(box2d.b2MotorJoint.prototype,"GetReactionForce",box2d.b2MotorJoint.prototype.GetReactionForce),box2d.b2MotorJoint.prototype.GetReactionTorque=function(o){return o*this.m_angularImpulse},goog.exportProperty(box2d.b2MotorJoint.prototype,"GetReactionTorque",box2d.b2MotorJoint.prototype.GetReactionTorque),box2d.b2MotorJoint.prototype.SetCorrectionFactor=function(o){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(o)&&0<=o&&1>=o),this._correctionFactor=o},box2d.b2MotorJoint.prototype.GetCorrectionFactor=function(){return this.m_correctionFactor},box2d.b2MotorJoint.prototype.SetLinearOffset=function(o){o.x==this.m_linearOffset.x&&o.y==this.m_linearOffset.y||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_linearOffset.Copy(o))},goog.exportProperty(box2d.b2MotorJoint.prototype,"SetLinearOffset",box2d.b2MotorJoint.prototype.SetLinearOffset),box2d.b2MotorJoint.prototype.GetLinearOffset=function(o){return o.Copy(this.m_linearOffset)},goog.exportProperty(box2d.b2MotorJoint.prototype,"GetLinearOffset",box2d.b2MotorJoint.prototype.GetLinearOffset),box2d.b2MotorJoint.prototype.SetAngularOffset=function(o){o!==this.m_angularOffset&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_angularOffset=o)},goog.exportProperty(box2d.b2MotorJoint.prototype,"SetAngularOffset",box2d.b2MotorJoint.prototype.SetAngularOffset),box2d.b2MotorJoint.prototype.GetAngularOffset=function(){return this.m_angularOffset},goog.exportProperty(box2d.b2MotorJoint.prototype,"GetAngularOffset",box2d.b2MotorJoint.prototype.GetAngularOffset),box2d.b2MotorJoint.prototype.SetMaxForce=function(o){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(o)&&0<=o),this.m_maxForce=o},goog.exportProperty(box2d.b2MotorJoint.prototype,"SetMaxForce",box2d.b2MotorJoint.prototype.SetMaxForce),box2d.b2MotorJoint.prototype.GetMaxForce=function(){return this.m_maxForce},goog.exportProperty(box2d.b2MotorJoint.prototype,"GetMaxForce",box2d.b2MotorJoint.prototype.GetMaxForce),box2d.b2MotorJoint.prototype.SetMaxTorque=function(o){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(o)&&0<=o),this.m_maxTorque=o},goog.exportProperty(box2d.b2MotorJoint.prototype,"SetMaxTorque",box2d.b2MotorJoint.prototype.SetMaxTorque),box2d.b2MotorJoint.prototype.GetMaxTorque=function(){return this.m_maxTorque},goog.exportProperty(box2d.b2MotorJoint.prototype,"GetMaxTorque",box2d.b2MotorJoint.prototype.GetMaxTorque),box2d.b2MotorJoint.prototype.InitVelocityConstraints=function(o){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var t=o.positions[this.m_indexA].c,e=o.positions[this.m_indexA].a,r=o.velocities[this.m_indexA].v,i=o.velocities[this.m_indexA].w,b=o.positions[this.m_indexB].c,p=o.positions[this.m_indexB].a,n=o.velocities[this.m_indexB].v,a=o.velocities[this.m_indexB].w,s=this.m_qA.SetAngle(e),d=this.m_qB.SetAngle(p),x=box2d.b2Mul_R_V2(s,box2d.b2Vec2.s_t0.Copy(this.m_localCenterA).SelfNeg(),this.m_rA),l=(d=box2d.b2Mul_R_V2(d,box2d.b2Vec2.s_t0.Copy(this.m_localCenterB).SelfNeg(),this.m_rB),this.m_invMassA),y=this.m_invMassB,c=this.m_invIA,m=this.m_invIB,_=this.m_K;_.ex.x=l+y+c*x.y*x.y+m*d.y*d.y,_.ex.y=-c*x.x*x.y-m*d.x*d.y,_.ey.x=_.ex.y,_.ey.y=l+y+c*x.x*x.x+m*d.x*d.x,_.GetInverse(this.m_linearMass),this.m_angularMass=c+m,0<this.m_angularMass&&(this.m_angularMass=1/this.m_angularMass),box2d.b2Sub_V2_V2(box2d.b2Sub_V2_V2(box2d.b2Add_V2_V2(b,d,box2d.b2Vec2.s_t0),box2d.b2Add_V2_V2(t,x,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t2),box2d.b2Mul_R_V2(s,this.m_linearOffset,box2d.b2Vec2.s_t3),this.m_linearError),this.m_angularError=p-e-this.m_angularOffset,o.step.warmStarting?(this.m_linearImpulse.SelfMul(o.step.dtRatio),this.m_angularImpulse*=o.step.dtRatio,t=this.m_linearImpulse,r.SelfMulSub(l,t),i-=c*(box2d.b2Cross_V2_V2(x,t)+this.m_angularImpulse),n.SelfMulAdd(y,t),a+=m*(box2d.b2Cross_V2_V2(d,t)+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0),o.velocities[this.m_indexA].w=i,o.velocities[this.m_indexB].w=a},goog.exportProperty(box2d.b2MotorJoint.prototype,"InitVelocityConstraints",box2d.b2MotorJoint.prototype.InitVelocityConstraints),box2d.b2MotorJoint.prototype.SolveVelocityConstraints=function(o){var t=o.velocities[this.m_indexA].v,e=o.velocities[this.m_indexA].w,r=o.velocities[this.m_indexB].v,i=o.velocities[this.m_indexB].w,b=this.m_invMassA,p=this.m_invMassB,n=this.m_invIA,a=this.m_invIB,s=o.step.dt,d=o.step.inv_dt,x=i-e+d*this.m_correctionFactor*this.m_angularError,l=(x=-this.m_angularMass*x,this.m_angularImpulse),y=s*this.m_maxTorque;this.m_angularImpulse=box2d.b2Clamp(this.m_angularImpulse+x,-y,y);e-=n*(x=this.m_angularImpulse-l),i+=a*x;var c=this.m_rA,m=this.m_rB;x=box2d.b2Add_V2_V2(box2d.b2Sub_V2_V2(box2d.b2Add_V2_V2(r,box2d.b2Cross_S_V2(i,m,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Add_V2_V2(t,box2d.b2Cross_S_V2(e,c,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t2),box2d.b2Mul_S_V2(d*this.m_correctionFactor,this.m_linearError,box2d.b2Vec2.s_t3),box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_Cdot),x=box2d.b2Mul_M22_V2(this.m_linearMass,x,box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_impulse).SelfNeg(),l=box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_oldImpulse.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(x),y=s*this.m_maxForce,this.m_linearImpulse.LengthSquared()>y*y&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(y)),box2d.b2Sub_V2_V2(this.m_linearImpulse,l,x),t.SelfMulSub(b,x),e-=n*box2d.b2Cross_V2_V2(c,x),r.SelfMulAdd(p,x),i+=a*box2d.b2Cross_V2_V2(m,x),o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=i},goog.exportProperty(box2d.b2MotorJoint.prototype,"SolveVelocityConstraints",box2d.b2MotorJoint.prototype.SolveVelocityConstraints),box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2,box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_impulse=new box2d.b2Vec2,box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_oldImpulse=new box2d.b2Vec2,box2d.b2MotorJoint.prototype.SolvePositionConstraints=function(o){return!0},goog.exportProperty(box2d.b2MotorJoint.prototype,"SolvePositionConstraints",box2d.b2MotorJoint.prototype.SolvePositionConstraints),box2d.b2MotorJoint.prototype.Dump=function(){if(box2d.DEBUG){var o=this.m_bodyA.m_islandIndex,t=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2MotorJointDef*/ var jd = new box2d.b2MotorJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",o),box2d.b2Log("  jd.bodyB = bodies[%d];\n",t),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.linearOffset.Set(%.15f, %.15f);\n",this.m_linearOffset.x,this.m_linearOffset.y),box2d.b2Log("  jd.angularOffset = %.15f;\n",this.m_angularOffset),box2d.b2Log("  jd.maxForce = %.15f;\n",this.m_maxForce),box2d.b2Log("  jd.maxTorque = %.15f;\n",this.m_maxTorque),box2d.b2Log("  jd.correctionFactor = %.15f;\n",this.m_correctionFactor),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}},goog.exportProperty(box2d.b2MotorJoint.prototype,"Dump",box2d.b2MotorJoint.prototype.Dump),box2d.b2MouseJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_mouseJoint),this.target=new box2d.b2Vec2},goog.inherits(box2d.b2MouseJointDef,box2d.b2JointDef),goog.exportSymbol("box2d.b2MouseJointDef",box2d.b2MouseJointDef),box2d.b2MouseJointDef.prototype.target=null,goog.exportProperty(box2d.b2MouseJointDef.prototype,"target",box2d.b2MouseJointDef.prototype.target),box2d.b2MouseJointDef.prototype.maxForce=0,goog.exportProperty(box2d.b2MouseJointDef.prototype,"maxForce",box2d.b2MouseJointDef.prototype.maxForce),box2d.b2MouseJointDef.prototype.frequencyHz=5,goog.exportProperty(box2d.b2MouseJointDef.prototype,"frequencyHz",box2d.b2MouseJointDef.prototype.frequencyHz),box2d.b2MouseJointDef.prototype.dampingRatio=.7,goog.exportProperty(box2d.b2MouseJointDef.prototype,"dampingRatio",box2d.b2MouseJointDef.prototype.dampingRatio),box2d.b2MouseJoint=function(o){box2d.b2Joint.call(this,o),this.m_localAnchorB=new box2d.b2Vec2,this.m_targetA=new box2d.b2Vec2,this.m_impulse=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_mass=new box2d.b2Mat22,this.m_C=new box2d.b2Vec2,this.m_qB=new box2d.b2Rot,this.m_lalcB=new box2d.b2Vec2,this.m_K=new box2d.b2Mat22,box2d.ENABLE_ASSERTS&&box2d.b2Assert(o.target.IsValid()),box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(o.maxForce)&&0<=o.maxForce),box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(o.frequencyHz)&&0<=o.frequencyHz),box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(o.dampingRatio)&&0<=o.dampingRatio),this.m_targetA.Copy(o.target),box2d.b2MulT_X_V2(this.m_bodyB.GetTransform(),this.m_targetA,this.m_localAnchorB),this.m_maxForce=o.maxForce,this.m_impulse.SetZero(),this.m_frequencyHz=o.frequencyHz,this.m_dampingRatio=o.dampingRatio,this.m_gamma=this.m_beta=0},goog.inherits(box2d.b2MouseJoint,box2d.b2Joint),goog.exportSymbol("box2d.b2MouseJoint",box2d.b2MouseJoint),box2d.b2MouseJoint.prototype.m_localAnchorB=null,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_localAnchorB",box2d.b2MouseJoint.prototype.m_localAnchorB),box2d.b2MouseJoint.prototype.m_targetA=null,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_targetA",box2d.b2MouseJoint.prototype.m_targetA),box2d.b2MouseJoint.prototype.m_frequencyHz=0,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_frequencyHz",box2d.b2MouseJoint.prototype.m_frequencyHz),box2d.b2MouseJoint.prototype.m_dampingRatio=0,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_dampingRatio",box2d.b2MouseJoint.prototype.m_dampingRatio),box2d.b2MouseJoint.prototype.m_beta=0,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_beta",box2d.b2MouseJoint.prototype.m_beta),box2d.b2MouseJoint.prototype.m_impulse=null,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_impulse",box2d.b2MouseJoint.prototype.m_impulse),box2d.b2MouseJoint.prototype.m_maxForce=0,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_maxForce",box2d.b2MouseJoint.prototype.m_maxForce),box2d.b2MouseJoint.prototype.m_gamma=0,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_gamma",box2d.b2MouseJoint.prototype.m_gamma),box2d.b2MouseJoint.prototype.m_indexA=0,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_indexA",box2d.b2MouseJoint.prototype.m_indexA),box2d.b2MouseJoint.prototype.m_indexB=0,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_indexB",box2d.b2MouseJoint.prototype.m_indexB),box2d.b2MouseJoint.prototype.m_rB=null,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_rB",box2d.b2MouseJoint.prototype.m_rB),box2d.b2MouseJoint.prototype.m_localCenterB=null,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_localCenterB",box2d.b2MouseJoint.prototype.m_localCenterB),box2d.b2MouseJoint.prototype.m_invMassB=0,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_invMassB",box2d.b2MouseJoint.prototype.m_invMassB),box2d.b2MouseJoint.prototype.m_invIB=0,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_invIB",box2d.b2MouseJoint.prototype.m_invIB),box2d.b2MouseJoint.prototype.m_mass=null,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_mass",box2d.b2MouseJoint.prototype.m_mass),box2d.b2MouseJoint.prototype.m_C=null,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_C",box2d.b2MouseJoint.prototype.m_C),box2d.b2MouseJoint.prototype.m_qB=null,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_qB",box2d.b2MouseJoint.prototype.m_qB),box2d.b2MouseJoint.prototype.m_lalcB=null,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_lalcB",box2d.b2MouseJoint.prototype.m_lalcB),box2d.b2MouseJoint.prototype.m_K=null,goog.exportProperty(box2d.b2MouseJoint.prototype,"m_K",box2d.b2MouseJoint.prototype.m_K),box2d.b2MouseJoint.prototype.SetTarget=function(o){this.m_bodyB.IsAwake()||this.m_bodyB.SetAwake(!0),this.m_targetA.Copy(o)},goog.exportProperty(box2d.b2MouseJoint.prototype,"SetTarget",box2d.b2MouseJoint.prototype.SetTarget),box2d.b2MouseJoint.prototype.GetTarget=function(o){return o.Copy(this.m_targetA)},goog.exportProperty(box2d.b2MouseJoint.prototype,"GetTarget",box2d.b2MouseJoint.prototype.GetTarget),box2d.b2MouseJoint.prototype.SetMaxForce=function(o){this.m_maxForce=o},goog.exportProperty(box2d.b2MouseJoint.prototype,"SetMaxForce",box2d.b2MouseJoint.prototype.SetMaxForce),box2d.b2MouseJoint.prototype.GetMaxForce=function(){return this.m_maxForce},goog.exportProperty(box2d.b2MouseJoint.prototype,"GetMaxForce",box2d.b2MouseJoint.prototype.GetMaxForce),box2d.b2MouseJoint.prototype.SetFrequency=function(o){this.m_frequencyHz=o},goog.exportProperty(box2d.b2MouseJoint.prototype,"SetFrequency",box2d.b2MouseJoint.prototype.SetFrequency),box2d.b2MouseJoint.prototype.GetFrequency=function(){return this.m_frequencyHz},goog.exportProperty(box2d.b2MouseJoint.prototype,"GetFrequency",box2d.b2MouseJoint.prototype.GetFrequency),box2d.b2MouseJoint.prototype.SetDampingRatio=function(o){this.m_dampingRatio=o},goog.exportProperty(box2d.b2MouseJoint.prototype,"SetDampingRatio",box2d.b2MouseJoint.prototype.SetDampingRatio),box2d.b2MouseJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio},goog.exportProperty(box2d.b2MouseJoint.prototype,"GetDampingRatio",box2d.b2MouseJoint.prototype.GetDampingRatio),box2d.b2MouseJoint.prototype.InitVelocityConstraints=function(o){this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var t=o.positions[this.m_indexB].c,e=o.velocities[this.m_indexB].v,r=o.velocities[this.m_indexB].w,i=this.m_qB.SetAngle(o.positions[this.m_indexB].a),b=this.m_bodyB.GetMass(),p=2*box2d.b2_pi*this.m_frequencyHz,n=2*b*this.m_dampingRatio*p;b=b*p*p,p=o.step.dt;box2d.ENABLE_ASSERTS&&box2d.b2Assert(n+p*b>box2d.b2_epsilon),this.m_gamma=p*(n+p*b),0!==this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=p*b*this.m_gamma,box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2Mul_R_V2(i,this.m_lalcB,this.m_rB),(i=this.m_K).ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,i.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,i.ey.x=i.ex.y,i.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,i.GetInverse(this.m_mass),this.m_C.x=t.x+this.m_rB.x-this.m_targetA.x,this.m_C.y=t.y+this.m_rB.y-this.m_targetA.y,this.m_C.SelfMul(this.m_beta),r*=.98,o.step.warmStarting?(this.m_impulse.SelfMul(o.step.dtRatio),e.x+=this.m_invMassB*this.m_impulse.x,e.y+=this.m_invMassB*this.m_impulse.y,r+=this.m_invIB*box2d.b2Cross_V2_V2(this.m_rB,this.m_impulse)):this.m_impulse.SetZero(),o.velocities[this.m_indexB].w=r},goog.exportProperty(box2d.b2MouseJoint.prototype,"InitVelocityConstraints",box2d.b2MouseJoint.prototype.InitVelocityConstraints),box2d.b2MouseJoint.prototype.SolveVelocityConstraints=function(o){var t=o.velocities[this.m_indexB].v,e=o.velocities[this.m_indexB].w,r=box2d.b2AddCross_V2_S_V2(t,e,this.m_rB,box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_Cdot),i=(r=box2d.b2Mul_M22_V2(this.m_mass,box2d.b2Add_V2_V2(r,box2d.b2Add_V2_V2(this.m_C,box2d.b2Mul_S_V2(this.m_gamma,this.m_impulse,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0).SelfNeg(),box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_impulse),box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_oldImpulse.Copy(this.m_impulse));this.m_impulse.SelfAdd(r);var b=o.step.dt*this.m_maxForce;this.m_impulse.LengthSquared()>b*b&&this.m_impulse.SelfMul(b/this.m_impulse.Length()),box2d.b2Sub_V2_V2(this.m_impulse,i,r),t.SelfMulAdd(this.m_invMassB,r),e+=this.m_invIB*box2d.b2Cross_V2_V2(this.m_rB,r),o.velocities[this.m_indexB].w=e},goog.exportProperty(box2d.b2MouseJoint.prototype,"SolveVelocityConstraints",box2d.b2MouseJoint.prototype.SolveVelocityConstraints),box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2,box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_impulse=new box2d.b2Vec2,box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_oldImpulse=new box2d.b2Vec2,box2d.b2MouseJoint.prototype.SolvePositionConstraints=function(o){return!0},goog.exportProperty(box2d.b2MouseJoint.prototype,"SolvePositionConstraints",box2d.b2MouseJoint.prototype.SolvePositionConstraints),box2d.b2MouseJoint.prototype.GetAnchorA=function(o){return o.Copy(this.m_targetA)},goog.exportProperty(box2d.b2MouseJoint.prototype,"GetAnchorA",box2d.b2MouseJoint.prototype.GetAnchorA),box2d.b2MouseJoint.prototype.GetAnchorB=function(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)},goog.exportProperty(box2d.b2MouseJoint.prototype,"GetAnchorB",box2d.b2MouseJoint.prototype.GetAnchorB),box2d.b2MouseJoint.prototype.GetReactionForce=function(o,t){return box2d.b2Mul_S_V2(o,this.m_impulse,t)},goog.exportProperty(box2d.b2MouseJoint.prototype,"GetReactionForce",box2d.b2MouseJoint.prototype.GetReactionForce),box2d.b2MouseJoint.prototype.GetReactionTorque=function(o){return 0},goog.exportProperty(box2d.b2MouseJoint.prototype,"GetReactionTorque",box2d.b2MouseJoint.prototype.GetReactionTorque),box2d.b2MouseJoint.prototype.Dump=function(){box2d.DEBUG&&box2d.b2Log("Mouse joint dumping is not supported.\n")},goog.exportProperty(box2d.b2MouseJoint.prototype,"Dump",box2d.b2MouseJoint.prototype.Dump),box2d.b2MouseJoint.prototype.ShiftOrigin=function(o){this.m_targetA.SelfSub(o)},goog.exportProperty(box2d.b2MouseJoint.prototype,"ShiftOrigin",box2d.b2MouseJoint.prototype.ShiftOrigin),box2d.b2PrismaticJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_prismaticJoint),this.localAnchorA=new box2d.b2Vec2,this.localAnchorB=new box2d.b2Vec2,this.localAxisA=new box2d.b2Vec2(1,0)},goog.inherits(box2d.b2PrismaticJointDef,box2d.b2JointDef),goog.exportSymbol("box2d.b2PrismaticJointDef",box2d.b2PrismaticJointDef),box2d.b2PrismaticJointDef.prototype.localAnchorA=null,goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"localAnchorA",box2d.b2PrismaticJointDef.prototype.localAnchorA),box2d.b2PrismaticJointDef.prototype.localAnchorB=null,goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"localAnchorB",box2d.b2PrismaticJointDef.prototype.localAnchorB),box2d.b2PrismaticJointDef.prototype.localAxisA=null,goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"localAxisA",box2d.b2PrismaticJointDef.prototype.localAxisA),box2d.b2PrismaticJointDef.prototype.referenceAngle=0,goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"referenceAngle",box2d.b2PrismaticJointDef.prototype.referenceAngle),box2d.b2PrismaticJointDef.prototype.enableLimit=!1,goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"enableLimit",box2d.b2PrismaticJointDef.prototype.enableLimit),box2d.b2PrismaticJointDef.prototype.lowerTranslation=0,goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"lowerTranslation",box2d.b2PrismaticJointDef.prototype.lowerTranslation),box2d.b2PrismaticJointDef.prototype.upperTranslation=0,goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"upperTranslation",box2d.b2PrismaticJointDef.prototype.upperTranslation),box2d.b2PrismaticJointDef.prototype.enableMotor=!1,goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"enableMotor",box2d.b2PrismaticJointDef.prototype.enableMotor),box2d.b2PrismaticJointDef.prototype.maxMotorForce=0,goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"maxMotorForce",box2d.b2PrismaticJointDef.prototype.maxMotorForce),box2d.b2PrismaticJointDef.prototype.motorSpeed=0,goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"motorSpeed",box2d.b2PrismaticJointDef.prototype.motorSpeed),box2d.b2PrismaticJointDef.prototype.Initialize=function(o,t,e,r){this.bodyA=o,this.bodyB=t,this.bodyA.GetLocalPoint(e,this.localAnchorA),this.bodyB.GetLocalPoint(e,this.localAnchorB),this.bodyA.GetLocalVector(r,this.localAxisA),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"Initialize",box2d.b2PrismaticJointDef.prototype.Initialize),box2d.b2PrismaticJoint=function(o){box2d.b2Joint.call(this,o),this.m_localAnchorA=o.localAnchorA.Clone(),this.m_localAnchorB=o.localAnchorB.Clone(),this.m_localXAxisA=o.localAxisA.Clone().SelfNormalize(),this.m_localYAxisA=box2d.b2Cross_S_V2(1,this.m_localXAxisA,new box2d.b2Vec2),this.m_referenceAngle=o.referenceAngle,this.m_impulse=new box2d.b2Vec3(0,0,0),this.m_lowerTranslation=o.lowerTranslation,this.m_upperTranslation=o.upperTranslation,this.m_maxMotorForce=o.maxMotorForce,this.m_motorSpeed=o.motorSpeed,this.m_enableLimit=o.enableLimit,this.m_enableMotor=o.enableMotor,this.m_localCenterA=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_axis=new box2d.b2Vec2(0,0),this.m_perp=new box2d.b2Vec2(0,0),this.m_K=new box2d.b2Mat33,this.m_K3=new box2d.b2Mat33,this.m_K2=new box2d.b2Mat22,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2,this.m_rA=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2},goog.inherits(box2d.b2PrismaticJoint,box2d.b2Joint),goog.exportSymbol("box2d.b2PrismaticJoint",box2d.b2PrismaticJoint),box2d.b2PrismaticJoint.prototype.m_localAnchorA=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localAnchorA",box2d.b2PrismaticJoint.prototype.m_localAnchorA),box2d.b2PrismaticJoint.prototype.m_localAnchorB=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localAnchorB",box2d.b2PrismaticJoint.prototype.m_localAnchorB),box2d.b2PrismaticJoint.prototype.m_localXAxisA=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localXAxisA",box2d.b2PrismaticJoint.prototype.m_localXAxisA),box2d.b2PrismaticJoint.prototype.m_localYAxisA=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localYAxisA",box2d.b2PrismaticJoint.prototype.m_localYAxisA),box2d.b2PrismaticJoint.prototype.m_referenceAngle=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_referenceAngle",box2d.b2PrismaticJoint.prototype.m_referenceAngle),box2d.b2PrismaticJoint.prototype.m_impulse=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_impulse",box2d.b2PrismaticJoint.prototype.m_impulse),box2d.b2PrismaticJoint.prototype.m_motorImpulse=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_motorImpulse",box2d.b2PrismaticJoint.prototype.m_motorImpulse),box2d.b2PrismaticJoint.prototype.m_lowerTranslation=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_lowerTranslation",box2d.b2PrismaticJoint.prototype.m_lowerTranslation),box2d.b2PrismaticJoint.prototype.m_upperTranslation=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_upperTranslation",box2d.b2PrismaticJoint.prototype.m_upperTranslation),box2d.b2PrismaticJoint.prototype.m_maxMotorForce=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_maxMotorForce",box2d.b2PrismaticJoint.prototype.m_maxMotorForce),box2d.b2PrismaticJoint.prototype.m_motorSpeed=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_motorSpeed",box2d.b2PrismaticJoint.prototype.m_motorSpeed),box2d.b2PrismaticJoint.prototype.m_enableLimit=!1,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_enableLimit",box2d.b2PrismaticJoint.prototype.m_enableLimit),box2d.b2PrismaticJoint.prototype.m_enableMotor=!1,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_enableMotor",box2d.b2PrismaticJoint.prototype.m_enableMotor),box2d.b2PrismaticJoint.prototype.m_limitState=box2d.b2LimitState.e_inactiveLimit,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_limitState",box2d.b2PrismaticJoint.prototype.m_limitState),box2d.b2PrismaticJoint.prototype.m_indexA=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_indexA",box2d.b2PrismaticJoint.prototype.m_indexA),box2d.b2PrismaticJoint.prototype.m_indexB=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_indexB",box2d.b2PrismaticJoint.prototype.m_indexB),box2d.b2PrismaticJoint.prototype.m_localCenterA=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localCenterA",box2d.b2PrismaticJoint.prototype.m_localCenterA),box2d.b2PrismaticJoint.prototype.m_localCenterB=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localCenterB",box2d.b2PrismaticJoint.prototype.m_localCenterB),box2d.b2PrismaticJoint.prototype.m_invMassA=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_invMassA",box2d.b2PrismaticJoint.prototype.m_invMassA),box2d.b2PrismaticJoint.prototype.m_invMassB=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_invMassB",box2d.b2PrismaticJoint.prototype.m_invMassB),box2d.b2PrismaticJoint.prototype.m_invIA=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_invIA",box2d.b2PrismaticJoint.prototype.m_invIA),box2d.b2PrismaticJoint.prototype.m_invIB=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_invIB",box2d.b2PrismaticJoint.prototype.m_invIB),box2d.b2PrismaticJoint.prototype.m_axis=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_axis",box2d.b2PrismaticJoint.prototype.m_axis),box2d.b2PrismaticJoint.prototype.m_perp=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_perp",box2d.b2PrismaticJoint.prototype.m_perp),box2d.b2PrismaticJoint.prototype.m_s1=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_s1",box2d.b2PrismaticJoint.prototype.m_s1),box2d.b2PrismaticJoint.prototype.m_s2=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_s2",box2d.b2PrismaticJoint.prototype.m_s2),box2d.b2PrismaticJoint.prototype.m_a1=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_a1",box2d.b2PrismaticJoint.prototype.m_a1),box2d.b2PrismaticJoint.prototype.m_a2=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_a2",box2d.b2PrismaticJoint.prototype.m_a2),box2d.b2PrismaticJoint.prototype.m_K=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_K",box2d.b2PrismaticJoint.prototype.m_K),box2d.b2PrismaticJoint.prototype.m_K3=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_K3",box2d.b2PrismaticJoint.prototype.m_K3),box2d.b2PrismaticJoint.prototype.m_K2=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_K2",box2d.b2PrismaticJoint.prototype.m_K2),box2d.b2PrismaticJoint.prototype.m_motorMass=0,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_motorMass",box2d.b2PrismaticJoint.prototype.m_motorMass),box2d.b2PrismaticJoint.prototype.m_qA=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_qA",box2d.b2PrismaticJoint.prototype.m_qA),box2d.b2PrismaticJoint.prototype.m_qB=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_qB",box2d.b2PrismaticJoint.prototype.m_qB),box2d.b2PrismaticJoint.prototype.m_lalcA=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_lalcA",box2d.b2PrismaticJoint.prototype.m_lalcA),box2d.b2PrismaticJoint.prototype.m_lalcB=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_lalcB",box2d.b2PrismaticJoint.prototype.m_lalcB),box2d.b2PrismaticJoint.prototype.m_rA=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_rA",box2d.b2PrismaticJoint.prototype.m_rA),box2d.b2PrismaticJoint.prototype.m_rB=null,goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_rB",box2d.b2PrismaticJoint.prototype.m_rB),box2d.b2PrismaticJoint.prototype.InitVelocityConstraints=function(o){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var t=o.positions[this.m_indexA].c,e=o.velocities[this.m_indexA].v,r=o.velocities[this.m_indexA].w,i=o.positions[this.m_indexB].c,b=o.positions[this.m_indexB].a,p=o.velocities[this.m_indexB].v,n=o.velocities[this.m_indexB].w,a=this.m_qA.SetAngle(o.positions[this.m_indexA].a);b=this.m_qB.SetAngle(b);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);var s=box2d.b2Mul_R_V2(a,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var d=box2d.b2Mul_R_V2(b,this.m_lalcB,this.m_rB),x=box2d.b2Add_V2_V2(box2d.b2Sub_V2_V2(i,t,box2d.b2Vec2.s_t0),box2d.b2Sub_V2_V2(d,s,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_d),l=(t=this.m_invMassA,i=this.m_invMassB,b=this.m_invIA,this.m_invIB);box2d.b2Mul_R_V2(a,this.m_localXAxisA,this.m_axis),this.m_a1=box2d.b2Cross_V2_V2(box2d.b2Add_V2_V2(x,s,box2d.b2Vec2.s_t0),this.m_axis),this.m_a2=box2d.b2Cross_V2_V2(d,this.m_axis),this.m_motorMass=t+i+b*this.m_a1*this.m_a1+l*this.m_a2*this.m_a2,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass),box2d.b2Mul_R_V2(a,this.m_localYAxisA,this.m_perp),this.m_s1=box2d.b2Cross_V2_V2(box2d.b2Add_V2_V2(x,s,box2d.b2Vec2.s_t0),this.m_perp),this.m_s2=box2d.b2Cross_V2_V2(d,this.m_perp),this.m_K.ex.x=t+i+b*this.m_s1*this.m_s1+l*this.m_s2*this.m_s2,this.m_K.ex.y=b*this.m_s1+l*this.m_s2,this.m_K.ex.z=b*this.m_s1*this.m_a1+l*this.m_s2*this.m_a2,this.m_K.ey.x=this.m_K.ex.y,this.m_K.ey.y=b+l,0===this.m_K.ey.y&&(this.m_K.ey.y=1),this.m_K.ey.z=b*this.m_a1+l*this.m_a2,this.m_K.ez.x=this.m_K.ex.z,this.m_K.ez.y=this.m_K.ey.z,this.m_K.ez.z=t+i+b*this.m_a1*this.m_a1+l*this.m_a2*this.m_a2,this.m_enableLimit?(a=box2d.b2Dot_V2_V2(this.m_axis,x),box2d.b2Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*box2d.b2_linearSlop?this.m_limitState=box2d.b2LimitState.e_equalLimits:a<=this.m_lowerTranslation?this.m_limitState!==box2d.b2LimitState.e_atLowerLimit&&(this.m_limitState=box2d.b2LimitState.e_atLowerLimit,this.m_impulse.z=0):a>=this.m_upperTranslation?this.m_limitState!==box2d.b2LimitState.e_atUpperLimit&&(this.m_limitState=box2d.b2LimitState.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=box2d.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)):(this.m_limitState=box2d.b2LimitState.e_inactiveLimit,this.m_impulse.z=0),this.m_enableMotor||(this.m_motorImpulse=0),o.step.warmStarting?(this.m_impulse.SelfMulScalar(o.step.dtRatio),this.m_motorImpulse*=o.step.dtRatio,a=box2d.b2Add_V2_V2(box2d.b2Mul_S_V2(this.m_impulse.x,this.m_perp,box2d.b2Vec2.s_t0),box2d.b2Mul_S_V2(this.m_motorImpulse+this.m_impulse.z,this.m_axis,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_P),s=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,d=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2,e.SelfMulSub(t,a),r-=b*s,p.SelfMulAdd(i,a),n+=l*d):(this.m_impulse.SetZero(),this.m_motorImpulse=0),o.velocities[this.m_indexA].w=r,o.velocities[this.m_indexB].w=n},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"InitVelocityConstraints",box2d.b2PrismaticJoint.prototype.InitVelocityConstraints),box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_d=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints=function(o){var t=o.velocities[this.m_indexA].v,e=o.velocities[this.m_indexA].w,r=o.velocities[this.m_indexB].v,i=o.velocities[this.m_indexB].w,b=this.m_invMassA,p=this.m_invMassB,n=this.m_invIA,a=this.m_invIB;if(this.m_enableMotor&&this.m_limitState!==box2d.b2LimitState.e_equalLimits){var s=box2d.b2Dot_V2_V2(this.m_axis,box2d.b2Sub_V2_V2(r,t,box2d.b2Vec2.s_t0))+this.m_a2*i-this.m_a1*e,d=(s=this.m_motorMass*(this.m_motorSpeed-s),this.m_motorImpulse),x=o.step.dt*this.m_maxMotorForce;this.m_motorImpulse=box2d.b2Clamp(this.m_motorImpulse+s,-x,x),s=this.m_motorImpulse-d,d=box2d.b2Mul_S_V2(s,this.m_axis,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P),x=s*this.m_a1,s*=this.m_a2,t.SelfMulSub(b,d),e-=n*x,r.SelfMulAdd(p,d),i+=a*s}x=box2d.b2Dot_V2_V2(this.m_perp,box2d.b2Sub_V2_V2(r,t,box2d.b2Vec2.s_t0))+this.m_s2*i-this.m_s1*e;var l=i-e;this.m_enableLimit&&this.m_limitState!==box2d.b2LimitState.e_inactiveLimit?(s=box2d.b2Dot_V2_V2(this.m_axis,box2d.b2Sub_V2_V2(r,t,box2d.b2Vec2.s_t0))+this.m_a2*i-this.m_a1*e,d=box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f1.Copy(this.m_impulse),s=this.m_K.Solve33(-x,-l,-s,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df3),this.m_impulse.SelfAdd(s),this.m_limitState===box2d.b2LimitState.e_atLowerLimit?this.m_impulse.z=box2d.b2Max(this.m_impulse.z,0):this.m_limitState===box2d.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=box2d.b2Min(this.m_impulse.z,0)),(x=this.m_K.Solve22(-x-(this.m_impulse.z-d.z)*this.m_K.ez.x,-l-(this.m_impulse.z-d.z)*this.m_K.ez.y,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f2r)).x+=d.x,x.y+=d.y,this.m_impulse.x=x.x,this.m_impulse.y=x.y,s.x=this.m_impulse.x-d.x,s.y=this.m_impulse.y-d.y,s.z=this.m_impulse.z-d.z,d=box2d.b2Add_V2_V2(box2d.b2Mul_S_V2(s.x,this.m_perp,box2d.b2Vec2.s_t0),box2d.b2Mul_S_V2(s.z,this.m_axis,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P),x=s.x*this.m_s1+s.y+s.z*this.m_a1,s=s.x*this.m_s2+s.y+s.z*this.m_a2):(s=this.m_K.Solve22(-x,-l,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df2),this.m_impulse.x+=s.x,this.m_impulse.y+=s.y,d=box2d.b2Mul_S_V2(s.x,this.m_perp,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P),x=s.x*this.m_s1+s.y,s=s.x*this.m_s2+s.y),t.SelfMulSub(b,d),e-=n*x,r.SelfMulAdd(p,d),o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=i+a*s},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SolveVelocityConstraints",box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints),box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f2r=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f1=new box2d.b2Vec3,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df3=new box2d.b2Vec3,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df2=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.SolvePositionConstraints=function(o){var t=o.positions[this.m_indexA].c,e=o.positions[this.m_indexA].a,r=o.positions[this.m_indexB].c,i=o.positions[this.m_indexB].a,b=this.m_qA.SetAngle(e),p=this.m_qB.SetAngle(i),n=this.m_invMassA,a=this.m_invMassB,s=this.m_invIA,d=this.m_invIB,x=box2d.b2Mul_R_V2(b,this.m_lalcA,this.m_rA),l=box2d.b2Mul_R_V2(p,this.m_lalcB,this.m_rB),y=box2d.b2Sub_V2_V2(box2d.b2Add_V2_V2(r,l,box2d.b2Vec2.s_t0),box2d.b2Add_V2_V2(t,x,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_d),c=box2d.b2Mul_R_V2(b,this.m_localXAxisA,this.m_axis),m=box2d.b2Cross_V2_V2(box2d.b2Add_V2_V2(y,x,box2d.b2Vec2.s_t0),c),_=(p=box2d.b2Cross_V2_V2(l,c),b=box2d.b2Mul_R_V2(b,this.m_localYAxisA,this.m_perp),box2d.b2Cross_V2_V2(box2d.b2Add_V2_V2(y,x,box2d.b2Vec2.s_t0),b)),u=box2d.b2Cross_V2_V2(l,b),h=box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse,g=box2d.b2Dot_V2_V2(b,y),f=i-e-this.m_referenceAngle,S=(x=box2d.b2Abs(g),l=box2d.b2Abs(f),!1),P=0;if(this.m_enableLimit&&(y=box2d.b2Dot_V2_V2(c,y),box2d.b2Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*box2d.b2_linearSlop?(P=box2d.b2Clamp(y,-box2d.b2_maxLinearCorrection,box2d.b2_maxLinearCorrection),x=box2d.b2Max(x,box2d.b2Abs(y)),S=!0):y<=this.m_lowerTranslation?(P=box2d.b2Clamp(y-this.m_lowerTranslation+box2d.b2_linearSlop,-box2d.b2_maxLinearCorrection,0),x=box2d.b2Max(x,this.m_lowerTranslation-y),S=!0):y>=this.m_upperTranslation&&(P=box2d.b2Clamp(y-this.m_upperTranslation-box2d.b2_linearSlop,0,box2d.b2_maxLinearCorrection),x=box2d.b2Max(x,y-this.m_upperTranslation),S=!0)),S){y=s*_+d*u;var C=s*_*m+d*u*p;0===(S=s+d)&&(S=1);var A=s*m+d*p,B=n+a+s*m*m+d*p*p,v=this.m_K3;v.ex.Set(n+a+s*_*_+d*u*u,y,C),v.ey.Set(y,S,A),v.ez.Set(C,A,B),h=v.Solve33(-g,-f,-P,h)}else y=s*_+d*u,0===(S=s+d)&&(S=1),(P=this.m_K2).ex.Set(n+a+s*_*_+d*u*u,y),P.ey.Set(y,S),g=P.Solve(-g,-f,box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse1),h.x=g.x,h.y=g.y,h.z=0;return c=box2d.b2Add_V2_V2(box2d.b2Mul_S_V2(h.x,b,box2d.b2Vec2.s_t0),box2d.b2Mul_S_V2(h.z,c,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_P),m=h.x*_+h.y+h.z*m,p=h.x*u+h.y+h.z*p,t.SelfMulSub(n,c),e-=s*m,r.SelfMulAdd(a,c),o.positions[this.m_indexA].a=e,o.positions[this.m_indexB].a=i+d*p,x<=box2d.b2_linearSlop&&l<=box2d.b2_angularSlop},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SolvePositionConstraints",box2d.b2PrismaticJoint.prototype.SolvePositionConstraints),box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_d=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse=new box2d.b2Vec3,box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse1=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.GetAnchorA=function(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetAnchorA",box2d.b2PrismaticJoint.prototype.GetAnchorA),box2d.b2PrismaticJoint.prototype.GetAnchorB=function(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetAnchorB",box2d.b2PrismaticJoint.prototype.GetAnchorB),box2d.b2PrismaticJoint.prototype.GetReactionForce=function(o,t){return t.Set(o*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),o*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetReactionForce",box2d.b2PrismaticJoint.prototype.GetReactionForce),box2d.b2PrismaticJoint.prototype.GetReactionTorque=function(o){return o*this.m_impulse.y},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetReactionTorque",box2d.b2PrismaticJoint.prototype.GetReactionTorque),box2d.b2PrismaticJoint.prototype.GetLocalAnchorA=function(o){return o.Copy(this.m_localAnchorA)},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetLocalAnchorA",box2d.b2PrismaticJoint.prototype.GetLocalAnchorA),box2d.b2PrismaticJoint.prototype.GetLocalAnchorB=function(o){return o.Copy(this.m_localAnchorB)},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetLocalAnchorB",box2d.b2PrismaticJoint.prototype.GetLocalAnchorB),box2d.b2PrismaticJoint.prototype.GetLocalAxisA=function(o){return o.Copy(this.m_localXAxisA)},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetLocalAxisA",box2d.b2PrismaticJoint.prototype.GetLocalAxisA),box2d.b2PrismaticJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetReferenceAngle",box2d.b2PrismaticJoint.prototype.GetReferenceAngle),box2d.b2PrismaticJoint.prototype.GetJointTranslation=function(){var o=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pA),t=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pB);o=box2d.b2Sub_V2_V2(t,o,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_d),t=this.m_bodyA.GetWorldVector(this.m_localXAxisA,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_axis);return box2d.b2Dot_V2_V2(o,t)},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetJointTranslation",box2d.b2PrismaticJoint.prototype.GetJointTranslation),box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pA=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pB=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_d=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_axis=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.GetJointSpeed=function(){var o=this.m_bodyA,t=this.m_bodyB;box2d.b2Sub_V2_V2(this.m_localAnchorA,o.m_sweep.localCenter,this.m_lalcA);var e=box2d.b2Mul_R_V2(o.m_xf.q,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,t.m_sweep.localCenter,this.m_lalcB);var r=box2d.b2Mul_R_V2(t.m_xf.q,this.m_lalcB,this.m_rB),i=box2d.b2Add_V2_V2(o.m_sweep.c,e,box2d.b2Vec2.s_t0),b=box2d.b2Add_V2_V2(t.m_sweep.c,r,box2d.b2Vec2.s_t1),p=(i=box2d.b2Sub_V2_V2(b,i,box2d.b2Vec2.s_t2),b=o.GetWorldVector(this.m_localXAxisA,this.m_axis),o.m_linearVelocity),n=t.m_linearVelocity;o=o.m_angularVelocity,t=t.m_angularVelocity;return box2d.b2Dot_V2_V2(i,box2d.b2Cross_S_V2(o,b,box2d.b2Vec2.s_t0))+box2d.b2Dot_V2_V2(b,box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(n,t,r,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(p,o,e,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0))},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetJointSpeed",box2d.b2PrismaticJoint.prototype.GetJointSpeed),box2d.b2PrismaticJoint.prototype.IsLimitEnabled=function(){return this.m_enableLimit},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"IsLimitEnabled",box2d.b2PrismaticJoint.prototype.IsLimitEnabled),box2d.b2PrismaticJoint.prototype.EnableLimit=function(o){o!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=o,this.m_impulse.z=0)},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"EnableLimit",box2d.b2PrismaticJoint.prototype.EnableLimit),box2d.b2PrismaticJoint.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetLowerLimit",box2d.b2PrismaticJoint.prototype.GetLowerLimit),box2d.b2PrismaticJoint.prototype.GetUpperLimit=function(){return this.m_upperTranslation},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetUpperLimit",box2d.b2PrismaticJoint.prototype.GetUpperLimit),box2d.b2PrismaticJoint.prototype.SetLimits=function(o,t){o===this.m_lowerTranslation&&t===this.m_upperTranslation||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=o,this.m_upperTranslation=t,this.m_impulse.z=0)},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SetLimits",box2d.b2PrismaticJoint.prototype.SetLimits),box2d.b2PrismaticJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"IsMotorEnabled",box2d.b2PrismaticJoint.prototype.IsMotorEnabled),box2d.b2PrismaticJoint.prototype.EnableMotor=function(o){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=o},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"EnableMotor",box2d.b2PrismaticJoint.prototype.EnableMotor),box2d.b2PrismaticJoint.prototype.SetMotorSpeed=function(o){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=o},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SetMotorSpeed",box2d.b2PrismaticJoint.prototype.SetMotorSpeed),box2d.b2PrismaticJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetMotorSpeed",box2d.b2PrismaticJoint.prototype.GetMotorSpeed),box2d.b2PrismaticJoint.prototype.SetMaxMotorForce=function(o){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=o},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SetMaxMotorForce",box2d.b2PrismaticJoint.prototype.SetMaxMotorForce),box2d.b2PrismaticJoint.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetMaxMotorForce",box2d.b2PrismaticJoint.prototype.GetMaxMotorForce),box2d.b2PrismaticJoint.prototype.GetMotorForce=function(o){return o*this.m_motorImpulse},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetMotorForce",box2d.b2PrismaticJoint.prototype.GetMotorForce),box2d.b2PrismaticJoint.prototype.Dump=function(){if(box2d.DEBUG){var o=this.m_bodyA.m_islandIndex,t=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2PrismaticJointDef*/ var jd = new box2d.b2PrismaticJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",o),box2d.b2Log("  jd.bodyB = bodies[%d];\n",t),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),box2d.b2Log("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),box2d.b2Log("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),box2d.b2Log("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),box2d.b2Log("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),box2d.b2Log("  jd.lowerTranslation = %.15f;\n",this.m_lowerTranslation),box2d.b2Log("  jd.upperTranslation = %.15f;\n",this.m_upperTranslation),box2d.b2Log("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),box2d.b2Log("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),box2d.b2Log("  jd.maxMotorForce = %.15f;\n",this.m_maxMotorForce),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}},goog.exportProperty(box2d.b2PrismaticJoint.prototype,"Dump",box2d.b2PrismaticJoint.prototype.Dump),box2d.b2_minPulleyLength=2,goog.exportSymbol("box2d.b2_minPulleyLength",box2d.b2_minPulleyLength),box2d.b2PulleyJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_pulleyJoint),this.collideConnected=!0,this.groundAnchorA=new box2d.b2Vec2(-1,1),this.groundAnchorB=new box2d.b2Vec2(1,1),this.localAnchorA=new box2d.b2Vec2(-1,0),this.localAnchorB=new box2d.b2Vec2(1,0)},goog.inherits(box2d.b2PulleyJointDef,box2d.b2JointDef),goog.exportSymbol("box2d.b2PulleyJointDef",box2d.b2PulleyJointDef),box2d.b2PulleyJointDef.prototype.groundAnchorA=null,goog.exportProperty(box2d.b2PulleyJointDef.prototype,"groundAnchorA",box2d.b2PulleyJointDef.prototype.groundAnchorA),box2d.b2PulleyJointDef.prototype.groundAnchorB=null,goog.exportProperty(box2d.b2PulleyJointDef.prototype,"groundAnchorB",box2d.b2PulleyJointDef.prototype.groundAnchorB),box2d.b2PulleyJointDef.prototype.localAnchorA=null,goog.exportProperty(box2d.b2PulleyJointDef.prototype,"localAnchorA",box2d.b2PulleyJointDef.prototype.localAnchorA),box2d.b2PulleyJointDef.prototype.localAnchorB=null,goog.exportProperty(box2d.b2PulleyJointDef.prototype,"localAnchorB",box2d.b2PulleyJointDef.prototype.localAnchorB),box2d.b2PulleyJointDef.prototype.lengthA=0,goog.exportProperty(box2d.b2PulleyJointDef.prototype,"lengthA",box2d.b2PulleyJointDef.prototype.lengthA),box2d.b2PulleyJointDef.prototype.lengthB=0,goog.exportProperty(box2d.b2PulleyJointDef.prototype,"lengthB",box2d.b2PulleyJointDef.prototype.lengthB),box2d.b2PulleyJointDef.prototype.ratio=1,goog.exportProperty(box2d.b2PulleyJointDef.prototype,"ratio",box2d.b2PulleyJointDef.prototype.ratio),box2d.b2PulleyJointDef.prototype.Initialize=function(o,t,e,r,i,b,p){this.bodyA=o,this.bodyB=t,this.groundAnchorA.Copy(e),this.groundAnchorB.Copy(r),this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(b,this.localAnchorB),this.lengthA=box2d.b2Distance(i,e),this.lengthB=box2d.b2Distance(b,r),this.ratio=p,box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.ratio>box2d.b2_epsilon)},goog.exportProperty(box2d.b2PulleyJointDef.prototype,"Initialize",box2d.b2PulleyJointDef.prototype.Initialize),box2d.b2PulleyJoint=function(o){box2d.b2Joint.call(this,o),this.m_groundAnchorA=new box2d.b2Vec2,this.m_groundAnchorB=new box2d.b2Vec2,this.m_localAnchorA=new box2d.b2Vec2,this.m_localAnchorB=new box2d.b2Vec2,this.m_uA=new box2d.b2Vec2,this.m_uB=new box2d.b2Vec2,this.m_rA=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2,this.m_localCenterA=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2,this.m_groundAnchorA.Copy(o.groundAnchorA),this.m_groundAnchorB.Copy(o.groundAnchorB),this.m_localAnchorA.Copy(o.localAnchorA),this.m_localAnchorB.Copy(o.localAnchorB),this.m_lengthA=o.lengthA,this.m_lengthB=o.lengthB,box2d.ENABLE_ASSERTS&&box2d.b2Assert(0!==o.ratio),this.m_ratio=o.ratio,this.m_constant=o.lengthA+this.m_ratio*o.lengthB,this.m_impulse=0},goog.inherits(box2d.b2PulleyJoint,box2d.b2Joint),goog.exportSymbol("box2d.b2PulleyJoint",box2d.b2PulleyJoint),box2d.b2PulleyJoint.prototype.m_groundAnchorA=null,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_groundAnchorA",box2d.b2PulleyJoint.prototype.m_groundAnchorA),box2d.b2PulleyJoint.prototype.m_groundAnchorB=null,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_groundAnchorB",box2d.b2PulleyJoint.prototype.m_groundAnchorB),box2d.b2PulleyJoint.prototype.m_lengthA=0,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_lengthA",box2d.b2PulleyJoint.prototype.m_lengthA),box2d.b2PulleyJoint.prototype.m_lengthB=0,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_lengthB",box2d.b2PulleyJoint.prototype.m_lengthB),box2d.b2PulleyJoint.prototype.m_localAnchorA=null,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_localAnchorA",box2d.b2PulleyJoint.prototype.m_localAnchorA),box2d.b2PulleyJoint.prototype.m_localAnchorB=null,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_localAnchorB",box2d.b2PulleyJoint.prototype.m_localAnchorB),box2d.b2PulleyJoint.prototype.m_constant=0,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_constant",box2d.b2PulleyJoint.prototype.m_constant),box2d.b2PulleyJoint.prototype.m_ratio=0,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_ratio",box2d.b2PulleyJoint.prototype.m_ratio),box2d.b2PulleyJoint.prototype.m_impulse=0,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_impulse",box2d.b2PulleyJoint.prototype.m_impulse),box2d.b2PulleyJoint.prototype.m_indexA=0,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_indexA",box2d.b2PulleyJoint.prototype.m_indexA),box2d.b2PulleyJoint.prototype.m_indexB=0,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_indexB",box2d.b2PulleyJoint.prototype.m_indexB),box2d.b2PulleyJoint.prototype.m_uA=null,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_uA",box2d.b2PulleyJoint.prototype.m_uA),box2d.b2PulleyJoint.prototype.m_uB=null,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_uB",box2d.b2PulleyJoint.prototype.m_uB),box2d.b2PulleyJoint.prototype.m_rA=null,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_rA",box2d.b2PulleyJoint.prototype.m_rA),box2d.b2PulleyJoint.prototype.m_rB=null,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_rB",box2d.b2PulleyJoint.prototype.m_rB),box2d.b2PulleyJoint.prototype.m_localCenterA=null,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_localCenterA",box2d.b2PulleyJoint.prototype.m_localCenterA),box2d.b2PulleyJoint.prototype.m_localCenterB=null,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_localCenterB",box2d.b2PulleyJoint.prototype.m_localCenterB),box2d.b2PulleyJoint.prototype.m_invMassA=0,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_invMassA",box2d.b2PulleyJoint.prototype.m_invMassA),box2d.b2PulleyJoint.prototype.m_invMassB=0,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_invMassB",box2d.b2PulleyJoint.prototype.m_invMassB),box2d.b2PulleyJoint.prototype.m_invIA=0,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_invIA",box2d.b2PulleyJoint.prototype.m_invIA),box2d.b2PulleyJoint.prototype.m_invIB=0,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_invIB",box2d.b2PulleyJoint.prototype.m_invIB),box2d.b2PulleyJoint.prototype.m_mass=0,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_mass",box2d.b2PulleyJoint.prototype.m_mass),box2d.b2PulleyJoint.prototype.m_qA=null,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_qA",box2d.b2PulleyJoint.prototype.m_qA),box2d.b2PulleyJoint.prototype.m_qB=null,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_qB",box2d.b2PulleyJoint.prototype.m_qB),box2d.b2PulleyJoint.prototype.m_lalcA=null,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_lalcA",box2d.b2PulleyJoint.prototype.m_lalcA),box2d.b2PulleyJoint.prototype.m_lalcB=null,goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_lalcB",box2d.b2PulleyJoint.prototype.m_lalcB),box2d.b2PulleyJoint.prototype.InitVelocityConstraints=function(o){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var t=o.positions[this.m_indexA].c,e=o.velocities[this.m_indexA].v,r=o.velocities[this.m_indexA].w,i=o.positions[this.m_indexB].c,b=o.positions[this.m_indexB].a,p=o.velocities[this.m_indexB].v,n=o.velocities[this.m_indexB].w,a=this.m_qA.SetAngle(o.positions[this.m_indexA].a);b=this.m_qB.SetAngle(b);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2Mul_R_V2(a,this.m_lalcA,this.m_rA),box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2Mul_R_V2(b,this.m_lalcB,this.m_rB),this.m_uA.Copy(t).SelfAdd(this.m_rA).SelfSub(this.m_groundAnchorA),this.m_uB.Copy(i).SelfAdd(this.m_rB).SelfSub(this.m_groundAnchorB),t=this.m_uA.Length(),i=this.m_uB.Length(),t>10*box2d.b2_linearSlop?this.m_uA.SelfMul(1/t):this.m_uA.SetZero(),i>10*box2d.b2_linearSlop?this.m_uB.SelfMul(1/i):this.m_uB.SetZero(),t=box2d.b2Cross_V2_V2(this.m_rA,this.m_uA),i=box2d.b2Cross_V2_V2(this.m_rB,this.m_uB),this.m_mass=this.m_invMassA+this.m_invIA*t*t+this.m_ratio*this.m_ratio*(this.m_invMassB+this.m_invIB*i*i),0<this.m_mass&&(this.m_mass=1/this.m_mass),o.step.warmStarting?(this.m_impulse*=o.step.dtRatio,t=box2d.b2Mul_S_V2(-this.m_impulse,this.m_uA,box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PA),i=box2d.b2Mul_S_V2(-this.m_ratio*this.m_impulse,this.m_uB,box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PB),e.SelfMulAdd(this.m_invMassA,t),r+=this.m_invIA*box2d.b2Cross_V2_V2(this.m_rA,t),p.SelfMulAdd(this.m_invMassB,i),n+=this.m_invIB*box2d.b2Cross_V2_V2(this.m_rB,i)):this.m_impulse=0,o.velocities[this.m_indexA].w=r,o.velocities[this.m_indexB].w=n},goog.exportProperty(box2d.b2PulleyJoint.prototype,"InitVelocityConstraints",box2d.b2PulleyJoint.prototype.InitVelocityConstraints),box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PA=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PB=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints=function(o){var t=o.velocities[this.m_indexA].v,e=o.velocities[this.m_indexA].w,r=o.velocities[this.m_indexB].v,i=o.velocities[this.m_indexB].w,b=box2d.b2AddCross_V2_S_V2(t,e,this.m_rA,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpA),p=box2d.b2AddCross_V2_S_V2(r,i,this.m_rB,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpB);b=-box2d.b2Dot_V2_V2(this.m_uA,b)-this.m_ratio*box2d.b2Dot_V2_V2(this.m_uB,p),p=-this.m_mass*b;this.m_impulse+=p,b=box2d.b2Mul_S_V2(-p,this.m_uA,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PA),p=box2d.b2Mul_S_V2(-this.m_ratio*p,this.m_uB,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PB),t.SelfMulAdd(this.m_invMassA,b),e+=this.m_invIA*box2d.b2Cross_V2_V2(this.m_rA,b),r.SelfMulAdd(this.m_invMassB,p),i+=this.m_invIB*box2d.b2Cross_V2_V2(this.m_rB,p),o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=i},goog.exportProperty(box2d.b2PulleyJoint.prototype,"SolveVelocityConstraints",box2d.b2PulleyJoint.prototype.SolveVelocityConstraints),box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpA=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpB=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PA=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PB=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.SolvePositionConstraints=function(o){var t=o.positions[this.m_indexA].c,e=o.positions[this.m_indexA].a,r=o.positions[this.m_indexB].c,i=o.positions[this.m_indexB].a,b=this.m_qA.SetAngle(e),p=this.m_qB.SetAngle(i);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),b=box2d.b2Mul_R_V2(b,this.m_lalcA,this.m_rA),box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);p=box2d.b2Mul_R_V2(p,this.m_lalcB,this.m_rB);var n=this.m_uA.Copy(t).SelfAdd(b).SelfSub(this.m_groundAnchorA),a=this.m_uB.Copy(r).SelfAdd(p).SelfSub(this.m_groundAnchorB),s=n.Length(),d=a.Length();s>10*box2d.b2_linearSlop?n.SelfMul(1/s):n.SetZero(),d>10*box2d.b2_linearSlop?a.SelfMul(1/d):a.SetZero();var x=box2d.b2Cross_V2_V2(b,n),l=box2d.b2Cross_V2_V2(p,a);return 0<(x=this.m_invMassA+this.m_invIA*x*x+this.m_ratio*this.m_ratio*(this.m_invMassB+this.m_invIB*l*l))&&(x=1/x),d=this.m_constant-s-this.m_ratio*d,s=box2d.b2Abs(d),d*=-x,n=box2d.b2Mul_S_V2(-d,n,box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PA),a=box2d.b2Mul_S_V2(-this.m_ratio*d,a,box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PB),t.SelfMulAdd(this.m_invMassA,n),e+=this.m_invIA*box2d.b2Cross_V2_V2(b,n),r.SelfMulAdd(this.m_invMassB,a),i+=this.m_invIB*box2d.b2Cross_V2_V2(p,a),o.positions[this.m_indexA].a=e,o.positions[this.m_indexB].a=i,s<box2d.b2_linearSlop},goog.exportProperty(box2d.b2PulleyJoint.prototype,"SolvePositionConstraints",box2d.b2PulleyJoint.prototype.SolvePositionConstraints),box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PA=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PB=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.GetAnchorA=function(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)},goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetAnchorA",box2d.b2PulleyJoint.prototype.GetAnchorA),box2d.b2PulleyJoint.prototype.GetAnchorB=function(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)},goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetAnchorB",box2d.b2PulleyJoint.prototype.GetAnchorB),box2d.b2PulleyJoint.prototype.GetReactionForce=function(o,t){return t.Set(o*this.m_impulse*this.m_uB.x,o*this.m_impulse*this.m_uB.y)},goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetReactionForce",box2d.b2PulleyJoint.prototype.GetReactionForce),box2d.b2PulleyJoint.prototype.GetReactionTorque=function(o){return 0},goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetReactionTorque",box2d.b2PulleyJoint.prototype.GetReactionTorque),box2d.b2PulleyJoint.prototype.GetGroundAnchorA=function(o){return o.Copy(this.m_groundAnchorA)},goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetGroundAnchorA",box2d.b2PulleyJoint.prototype.GetGroundAnchorA),box2d.b2PulleyJoint.prototype.GetGroundAnchorB=function(o){return o.Copy(this.m_groundAnchorB)},goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetGroundAnchorB",box2d.b2PulleyJoint.prototype.GetGroundAnchorB),box2d.b2PulleyJoint.prototype.GetLengthA=function(){return this.m_lengthA},goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetLengthA",box2d.b2PulleyJoint.prototype.GetLengthA),box2d.b2PulleyJoint.prototype.GetLengthB=function(){return this.m_lengthB},goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetLengthB",box2d.b2PulleyJoint.prototype.GetLengthB),box2d.b2PulleyJoint.prototype.GetRatio=function(){return this.m_ratio},goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetRatio",box2d.b2PulleyJoint.prototype.GetRatio),box2d.b2PulleyJoint.prototype.GetCurrentLengthA=function(){var o=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,box2d.b2PulleyJoint.prototype.GetCurrentLengthA.s_p);return box2d.b2Distance(o,this.m_groundAnchorA)},goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetCurrentLengthA",box2d.b2PulleyJoint.prototype.GetCurrentLengthA),box2d.b2PulleyJoint.prototype.GetCurrentLengthA.s_p=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.GetCurrentLengthB=function(){var o=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,box2d.b2PulleyJoint.prototype.GetCurrentLengthB.s_p);return box2d.b2Distance(o,this.m_groundAnchorB)},goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetCurrentLengthB",box2d.b2PulleyJoint.prototype.GetCurrentLengthB),box2d.b2PulleyJoint.prototype.GetCurrentLengthB.s_p=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.Dump=function(){if(box2d.DEBUG){var o=this.m_bodyA.m_islandIndex,t=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2PulleyJointDef*/ var jd = new box2d.b2PulleyJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",o),box2d.b2Log("  jd.bodyB = bodies[%d];\n",t),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.groundAnchorA.Set(%.15f, %.15f);\n",this.m_groundAnchorA.x,this.m_groundAnchorA.y),box2d.b2Log("  jd.groundAnchorB.Set(%.15f, %.15f);\n",this.m_groundAnchorB.x,this.m_groundAnchorB.y),box2d.b2Log("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),box2d.b2Log("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),box2d.b2Log("  jd.lengthA = %.15f;\n",this.m_lengthA),box2d.b2Log("  jd.lengthB = %.15f;\n",this.m_lengthB),box2d.b2Log("  jd.ratio = %.15f;\n",this.m_ratio),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}},goog.exportProperty(box2d.b2PulleyJoint.prototype,"Dump",box2d.b2PulleyJoint.prototype.Dump),box2d.b2PulleyJoint.prototype.ShiftOrigin=function(o){this.m_groundAnchorA.SelfSub(o),this.m_groundAnchorB.SelfSub(o)},goog.exportProperty(box2d.b2PulleyJoint.prototype,"ShiftOrigin",box2d.b2PulleyJoint.prototype.ShiftOrigin),box2d.b2RevoluteJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_revoluteJoint),this.localAnchorA=new box2d.b2Vec2(0,0),this.localAnchorB=new box2d.b2Vec2(0,0)},goog.inherits(box2d.b2RevoluteJointDef,box2d.b2JointDef),goog.exportSymbol("box2d.b2RevoluteJointDef",box2d.b2RevoluteJointDef),box2d.b2RevoluteJointDef.prototype.localAnchorA=null,goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"localAnchorA",box2d.b2RevoluteJointDef.prototype.localAnchorA),box2d.b2RevoluteJointDef.prototype.localAnchorB=null,goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"localAnchorB",box2d.b2RevoluteJointDef.prototype.localAnchorB),box2d.b2RevoluteJointDef.prototype.referenceAngle=0,goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"referenceAngle",box2d.b2RevoluteJointDef.prototype.referenceAngle),box2d.b2RevoluteJointDef.prototype.enableLimit=!1,goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"enableLimit",box2d.b2RevoluteJointDef.prototype.enableLimit),box2d.b2RevoluteJointDef.prototype.lowerAngle=0,goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"lowerAngle",box2d.b2RevoluteJointDef.prototype.lowerAngle),box2d.b2RevoluteJointDef.prototype.upperAngle=0,goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"upperAngle",box2d.b2RevoluteJointDef.prototype.upperAngle),box2d.b2RevoluteJointDef.prototype.enableMotor=!1,goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"enableMotor",box2d.b2RevoluteJointDef.prototype.enableMotor),box2d.b2RevoluteJointDef.prototype.motorSpeed=0,goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"motorSpeed",box2d.b2RevoluteJointDef.prototype.motorSpeed),box2d.b2RevoluteJointDef.prototype.maxMotorTorque=0,goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"maxMotorTorque",box2d.b2RevoluteJointDef.prototype.maxMotorTorque),box2d.b2RevoluteJointDef.prototype.Initialize=function(o,t,e){this.bodyA=o,this.bodyB=t,this.bodyA.GetLocalPoint(e,this.localAnchorA),this.bodyB.GetLocalPoint(e,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"Initialize",box2d.b2RevoluteJointDef.prototype.Initialize),box2d.b2RevoluteJoint=function(o){box2d.b2Joint.call(this,o),this.m_localAnchorA=new box2d.b2Vec2,this.m_localAnchorB=new box2d.b2Vec2,this.m_impulse=new box2d.b2Vec3,this.m_rA=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2,this.m_localCenterA=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_mass=new box2d.b2Mat33,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2,this.m_K=new box2d.b2Mat22,this.m_localAnchorA.Copy(o.localAnchorA),this.m_localAnchorB.Copy(o.localAnchorB),this.m_referenceAngle=o.referenceAngle,this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerAngle=o.lowerAngle,this.m_upperAngle=o.upperAngle,this.m_maxMotorTorque=o.maxMotorTorque,this.m_motorSpeed=o.motorSpeed,this.m_enableLimit=o.enableLimit,this.m_enableMotor=o.enableMotor,this.m_limitState=box2d.b2LimitState.e_inactiveLimit},goog.inherits(box2d.b2RevoluteJoint,box2d.b2Joint),goog.exportSymbol("box2d.b2RevoluteJoint",box2d.b2RevoluteJoint),box2d.b2RevoluteJoint.prototype.m_localAnchorA=null,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_localAnchorA",box2d.b2RevoluteJoint.prototype.m_localAnchorA),box2d.b2RevoluteJoint.prototype.m_localAnchorB=null,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_localAnchorB",box2d.b2RevoluteJoint.prototype.m_localAnchorB),box2d.b2RevoluteJoint.prototype.m_impulse=null,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_impulse",box2d.b2RevoluteJoint.prototype.m_impulse),box2d.b2RevoluteJoint.prototype.m_motorImpulse=0,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_motorImpulse",box2d.b2RevoluteJoint.prototype.m_motorImpulse),box2d.b2RevoluteJoint.prototype.m_enableMotor=!1,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_enableMotor",box2d.b2RevoluteJoint.prototype.m_enableMotor),box2d.b2RevoluteJoint.prototype.m_maxMotorTorque=0,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_maxMotorTorque",box2d.b2RevoluteJoint.prototype.m_maxMotorTorque),box2d.b2RevoluteJoint.prototype.m_motorSpeed=0,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_motorSpeed",box2d.b2RevoluteJoint.prototype.m_motorSpeed),box2d.b2RevoluteJoint.prototype.m_enableLimit=!1,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_enableLimit",box2d.b2RevoluteJoint.prototype.m_enableLimit),box2d.b2RevoluteJoint.prototype.m_referenceAngle=0,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_referenceAngle",box2d.b2RevoluteJoint.prototype.m_referenceAngle),box2d.b2RevoluteJoint.prototype.m_lowerAngle=0,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_lowerAngle",box2d.b2RevoluteJoint.prototype.m_lowerAngle),box2d.b2RevoluteJoint.prototype.m_upperAngle=0,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_upperAngle",box2d.b2RevoluteJoint.prototype.m_upperAngle),box2d.b2RevoluteJoint.prototype.m_indexA=0,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_indexA",box2d.b2RevoluteJoint.prototype.m_indexA),box2d.b2RevoluteJoint.prototype.m_indexB=0,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_indexB",box2d.b2RevoluteJoint.prototype.m_indexB),box2d.b2RevoluteJoint.prototype.m_rA=null,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_rA",box2d.b2RevoluteJoint.prototype.m_rA),box2d.b2RevoluteJoint.prototype.m_rB=null,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_rB",box2d.b2RevoluteJoint.prototype.m_rB),box2d.b2RevoluteJoint.prototype.m_localCenterA=null,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_localCenterA",box2d.b2RevoluteJoint.prototype.m_localCenterA),box2d.b2RevoluteJoint.prototype.m_localCenterB=null,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_localCenterB",box2d.b2RevoluteJoint.prototype.m_localCenterB),box2d.b2RevoluteJoint.prototype.m_invMassA=0,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_invMassA",box2d.b2RevoluteJoint.prototype.m_invMassA),box2d.b2RevoluteJoint.prototype.m_invMassB=0,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_invMassB",box2d.b2RevoluteJoint.prototype.m_invMassB),box2d.b2RevoluteJoint.prototype.m_invIA=0,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_invIA",box2d.b2RevoluteJoint.prototype.m_invIA),box2d.b2RevoluteJoint.prototype.m_invIB=0,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_invIB",box2d.b2RevoluteJoint.prototype.m_invIB),box2d.b2RevoluteJoint.prototype.m_mass=null,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_mass",box2d.b2RevoluteJoint.prototype.m_mass),box2d.b2RevoluteJoint.prototype.m_motorMass=0,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_motorMass",box2d.b2RevoluteJoint.prototype.m_motorMass),box2d.b2RevoluteJoint.prototype.m_limitState=box2d.b2LimitState.e_inactiveLimit,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_limitState",box2d.b2RevoluteJoint.prototype.m_limitState),box2d.b2RevoluteJoint.prototype.m_qA=null,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_qA",box2d.b2RevoluteJoint.prototype.m_qA),box2d.b2RevoluteJoint.prototype.m_qB=null,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_qB",box2d.b2RevoluteJoint.prototype.m_qB),box2d.b2RevoluteJoint.prototype.m_lalcA=null,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_lalcA",box2d.b2RevoluteJoint.prototype.m_lalcA),box2d.b2RevoluteJoint.prototype.m_lalcB=null,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_lalcB",box2d.b2RevoluteJoint.prototype.m_lalcB),box2d.b2RevoluteJoint.prototype.m_K=null,goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_K",box2d.b2RevoluteJoint.prototype.m_K),box2d.b2RevoluteJoint.prototype.InitVelocityConstraints=function(o){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var t=o.positions[this.m_indexA].a,e=o.velocities[this.m_indexA].v,r=o.velocities[this.m_indexA].w,i=o.positions[this.m_indexB].a,b=o.velocities[this.m_indexB].v,p=o.velocities[this.m_indexB].w,n=this.m_qA.SetAngle(t),a=this.m_qB.SetAngle(i);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2Mul_R_V2(n,this.m_lalcA,this.m_rA),box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2Mul_R_V2(a,this.m_lalcB,this.m_rB);n=this.m_invMassA,a=this.m_invMassB;var s=this.m_invIA,d=this.m_invIB,x=0===s+d;this.m_mass.ex.x=n+a+this.m_rA.y*this.m_rA.y*s+this.m_rB.y*this.m_rB.y*d,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*s-this.m_rB.y*this.m_rB.x*d,this.m_mass.ez.x=-this.m_rA.y*s-this.m_rB.y*d,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=n+a+this.m_rA.x*this.m_rA.x*s+this.m_rB.x*this.m_rB.x*d,this.m_mass.ez.y=this.m_rA.x*s+this.m_rB.x*d,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=s+d,this.m_motorMass=s+d,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass),this.m_enableMotor&&!x||(this.m_motorImpulse=0),this.m_enableLimit&&!x?(t=i-t-this.m_referenceAngle,box2d.b2Abs(this.m_upperAngle-this.m_lowerAngle)<2*box2d.b2_angularSlop?this.m_limitState=box2d.b2LimitState.e_equalLimits:t<=this.m_lowerAngle?(this.m_limitState!==box2d.b2LimitState.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=box2d.b2LimitState.e_atLowerLimit):t>=this.m_upperAngle?(this.m_limitState!==box2d.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=box2d.b2LimitState.e_atUpperLimit):(this.m_limitState=box2d.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)):this.m_limitState=box2d.b2LimitState.e_inactiveLimit,o.step.warmStarting?(this.m_impulse.SelfMulScalar(o.step.dtRatio),this.m_motorImpulse*=o.step.dtRatio,t=box2d.b2RevoluteJoint.prototype.InitVelocityConstraints.s_P.Set(this.m_impulse.x,this.m_impulse.y),e.SelfMulSub(n,t),r-=s*(box2d.b2Cross_V2_V2(this.m_rA,t)+this.m_motorImpulse+this.m_impulse.z),b.SelfMulAdd(a,t),p+=d*(box2d.b2Cross_V2_V2(this.m_rB,t)+this.m_motorImpulse+this.m_impulse.z)):(this.m_impulse.SetZero(),this.m_motorImpulse=0),o.velocities[this.m_indexA].w=r,o.velocities[this.m_indexB].w=p},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"InitVelocityConstraints",box2d.b2RevoluteJoint.prototype.InitVelocityConstraints),box2d.b2RevoluteJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints=function(o){var t=o.velocities[this.m_indexA].v,e=o.velocities[this.m_indexA].w,r=o.velocities[this.m_indexB].v,i=o.velocities[this.m_indexB].w,b=this.m_invMassA,p=this.m_invMassB,n=this.m_invIA,a=this.m_invIB,s=0===n+a;if(this.m_enableMotor&&this.m_limitState!==box2d.b2LimitState.e_equalLimits&&!s){var d=i-e-this.m_motorSpeed,x=(d=-this.m_motorMass*d,this.m_motorImpulse),l=o.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=box2d.b2Clamp(this.m_motorImpulse+d,-l,l),e-=n*(d=this.m_motorImpulse-x),i+=a*d}this.m_enableLimit&&this.m_limitState!==box2d.b2LimitState.e_inactiveLimit&&!s?(s=box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(r,i,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(t,e,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot1),d=this.m_mass.Solve33(s.x,s.y,i-e,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse3).SelfNeg(),this.m_limitState===box2d.b2LimitState.e_equalLimits?this.m_impulse.SelfAdd(d):this.m_limitState===box2d.b2LimitState.e_atLowerLimit?0>(x=this.m_impulse.z+d.z)?(x=-s.x+this.m_impulse.z*this.m_mass.ez.x,s=-s.y+this.m_impulse.z*this.m_mass.ez.y,s=this.m_mass.Solve22(x,s,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced),d.x=s.x,d.y=s.y,d.z=-this.m_impulse.z,this.m_impulse.x+=s.x,this.m_impulse.y+=s.y,this.m_impulse.z=0):this.m_impulse.SelfAdd(d):this.m_limitState===box2d.b2LimitState.e_atUpperLimit&&(0<(x=this.m_impulse.z+d.z)?(x=-s.x+this.m_impulse.z*this.m_mass.ez.x,s=-s.y+this.m_impulse.z*this.m_mass.ez.y,s=this.m_mass.Solve22(x,s,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced),d.x=s.x,d.y=s.y,d.z=-this.m_impulse.z,this.m_impulse.x+=s.x,this.m_impulse.y+=s.y,this.m_impulse.z=0):this.m_impulse.SelfAdd(d)),s=box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_P.Set(d.x,d.y),t.SelfMulSub(b,s),e-=n*(box2d.b2Cross_V2_V2(this.m_rA,s)+d.z),r.SelfMulAdd(p,s),i+=a*(box2d.b2Cross_V2_V2(this.m_rB,s)+d.z)):(d=box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(r,i,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(t,e,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot),d=this.m_mass.Solve22(-d.x,-d.y,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse2),this.m_impulse.x+=d.x,this.m_impulse.y+=d.y,t.SelfMulSub(b,d),e-=n*box2d.b2Cross_V2_V2(this.m_rA,d),r.SelfMulAdd(p,d),i+=a*box2d.b2Cross_V2_V2(this.m_rB,d)),o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=i},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SolveVelocityConstraints",box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints),box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot1=new box2d.b2Vec2,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse3=new box2d.b2Vec3,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced=new box2d.b2Vec2,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse2=new box2d.b2Vec2,box2d.b2RevoluteJoint.prototype.SolvePositionConstraints=function(o){var t=o.positions[this.m_indexA].c,e=o.positions[this.m_indexA].a,r=o.positions[this.m_indexB].c,i=o.positions[this.m_indexB].a,b=this.m_qA.SetAngle(e),p=this.m_qB.SetAngle(i),n=0,a=0;a=0===this.m_invIA+this.m_invIB;if(this.m_enableLimit&&this.m_limitState!==box2d.b2LimitState.e_inactiveLimit&&!a){var s=i-e-this.m_referenceAngle;a=0;this.m_limitState===box2d.b2LimitState.e_equalLimits?(s=box2d.b2Clamp(s-this.m_lowerAngle,-box2d.b2_maxAngularCorrection,box2d.b2_maxAngularCorrection),a=-this.m_motorMass*s,n=box2d.b2Abs(s)):this.m_limitState===box2d.b2LimitState.e_atLowerLimit?(n=-(s-=this.m_lowerAngle),s=box2d.b2Clamp(s+box2d.b2_angularSlop,-box2d.b2_maxAngularCorrection,0),a=-this.m_motorMass*s):this.m_limitState===box2d.b2LimitState.e_atUpperLimit&&(n=s-=this.m_upperAngle,s=box2d.b2Clamp(s-box2d.b2_angularSlop,0,box2d.b2_maxAngularCorrection),a=-this.m_motorMass*s),e-=this.m_invIA*a,i+=this.m_invIB*a}b.SetAngle(e),p.SetAngle(i),box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),b=box2d.b2Mul_R_V2(b,this.m_lalcA,this.m_rA),box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);p=box2d.b2Mul_R_V2(p,this.m_lalcB,this.m_rB),a=(s=box2d.b2Sub_V2_V2(box2d.b2Add_V2_V2(r,p,box2d.b2Vec2.s_t0),box2d.b2Add_V2_V2(t,b,box2d.b2Vec2.s_t1),box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_C)).Length();var d=this.m_invMassA,x=this.m_invMassB,l=this.m_invIA,y=this.m_invIB,c=this.m_K;return c.ex.x=d+x+l*b.y*b.y+y*p.y*p.y,c.ex.y=-l*b.x*b.y-y*p.x*p.y,c.ey.x=c.ex.y,c.ey.y=d+x+l*b.x*b.x+y*p.x*p.x,s=c.Solve(s.x,s.y,box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_impulse).SelfNeg(),t.SelfMulSub(d,s),e-=l*box2d.b2Cross_V2_V2(b,s),r.SelfMulAdd(x,s),i+=y*box2d.b2Cross_V2_V2(p,s),o.positions[this.m_indexA].a=e,o.positions[this.m_indexB].a=i,a<=box2d.b2_linearSlop&&n<=box2d.b2_angularSlop},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SolvePositionConstraints",box2d.b2RevoluteJoint.prototype.SolvePositionConstraints),box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_C=new box2d.b2Vec2,box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_impulse=new box2d.b2Vec2,box2d.b2RevoluteJoint.prototype.GetAnchorA=function(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetAnchorA",box2d.b2RevoluteJoint.prototype.GetAnchorA),box2d.b2RevoluteJoint.prototype.GetAnchorB=function(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetAnchorB",box2d.b2RevoluteJoint.prototype.GetAnchorB),box2d.b2RevoluteJoint.prototype.GetReactionForce=function(o,t){return t.Set(o*this.m_impulse.x,o*this.m_impulse.y)},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetReactionForce",box2d.b2RevoluteJoint.prototype.GetReactionForce),box2d.b2RevoluteJoint.prototype.GetReactionTorque=function(o){return o*this.m_impulse.z},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetReactionTorque",box2d.b2RevoluteJoint.prototype.GetReactionTorque),box2d.b2RevoluteJoint.prototype.GetLocalAnchorA=function(o){return o.Copy(this.m_localAnchorA)},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetLocalAnchorA",box2d.b2RevoluteJoint.prototype.GetLocalAnchorA),box2d.b2RevoluteJoint.prototype.GetLocalAnchorB=function(o){return o.Copy(this.m_localAnchorB)},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetLocalAnchorB",box2d.b2RevoluteJoint.prototype.GetLocalAnchorB),box2d.b2RevoluteJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetReferenceAngle",box2d.b2RevoluteJoint.prototype.GetReferenceAngle),box2d.b2RevoluteJoint.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetJointAngle",box2d.b2RevoluteJoint.prototype.GetJointAngle),box2d.b2RevoluteJoint.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetJointSpeed",box2d.b2RevoluteJoint.prototype.GetJointSpeed),box2d.b2RevoluteJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"IsMotorEnabled",box2d.b2RevoluteJoint.prototype.IsMotorEnabled),box2d.b2RevoluteJoint.prototype.EnableMotor=function(o){this.m_enableMotor!==o&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=o)},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"EnableMotor",box2d.b2RevoluteJoint.prototype.EnableMotor),box2d.b2RevoluteJoint.prototype.GetMotorTorque=function(o){return o*this.m_motorImpulse},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetMotorTorque",box2d.b2RevoluteJoint.prototype.GetMotorTorque),box2d.b2RevoluteJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetMotorSpeed",box2d.b2RevoluteJoint.prototype.GetMotorSpeed),box2d.b2RevoluteJoint.prototype.SetMaxMotorTorque=function(o){this.m_maxMotorTorque=o},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SetMaxMotorTorque",box2d.b2RevoluteJoint.prototype.SetMaxMotorTorque),box2d.b2RevoluteJoint.prototype.GetMaxMotorTorque=function(){return this.m_maxMotorTorque},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetMaxMotorTorque",box2d.b2RevoluteJoint.prototype.GetMaxMotorTorque),box2d.b2RevoluteJoint.prototype.IsLimitEnabled=function(){return this.m_enableLimit},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"IsLimitEnabled",box2d.b2RevoluteJoint.prototype.IsLimitEnabled),box2d.b2RevoluteJoint.prototype.EnableLimit=function(o){o!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=o,this.m_impulse.z=0)},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"EnableLimit",box2d.b2RevoluteJoint.prototype.EnableLimit),box2d.b2RevoluteJoint.prototype.GetLowerLimit=function(){return this.m_lowerAngle},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetLowerLimit",box2d.b2RevoluteJoint.prototype.GetLowerLimit),box2d.b2RevoluteJoint.prototype.GetUpperLimit=function(){return this.m_upperAngle},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetUpperLimit",box2d.b2RevoluteJoint.prototype.GetUpperLimit),box2d.b2RevoluteJoint.prototype.SetLimits=function(o,t){o===this.m_lowerAngle&&t===this.m_upperAngle||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=o,this.m_upperAngle=t)},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SetLimits",box2d.b2RevoluteJoint.prototype.SetLimits),box2d.b2RevoluteJoint.prototype.SetMotorSpeed=function(o){this.m_motorSpeed!==o&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=o)},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SetMotorSpeed",box2d.b2RevoluteJoint.prototype.SetMotorSpeed),box2d.b2RevoluteJoint.prototype.Dump=function(){if(box2d.DEBUG){var o=this.m_bodyA.m_islandIndex,t=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2RevoluteJointDef*/ var jd = new box2d.b2RevoluteJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",o),box2d.b2Log("  jd.bodyB = bodies[%d];\n",t),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),box2d.b2Log("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),box2d.b2Log("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),box2d.b2Log("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),box2d.b2Log("  jd.lowerAngle = %.15f;\n",this.m_lowerAngle),box2d.b2Log("  jd.upperAngle = %.15f;\n",this.m_upperAngle),box2d.b2Log("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),box2d.b2Log("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),box2d.b2Log("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}},goog.exportProperty(box2d.b2RevoluteJoint.prototype,"Dump",box2d.b2RevoluteJoint.prototype.Dump),box2d.b2GearJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_gearJoint)},goog.inherits(box2d.b2GearJointDef,box2d.b2JointDef),goog.exportSymbol("box2d.b2GearJointDef",box2d.b2GearJointDef),box2d.b2GearJointDef.prototype.joint1=null,goog.exportProperty(box2d.b2GearJointDef.prototype,"joint1",box2d.b2GearJointDef.prototype.joint1),box2d.b2GearJointDef.prototype.joint2=null,goog.exportProperty(box2d.b2GearJointDef.prototype,"joint2",box2d.b2GearJointDef.prototype.joint2),box2d.b2GearJointDef.prototype.ratio=1,goog.exportProperty(box2d.b2GearJointDef.prototype,"ratio",box2d.b2GearJointDef.prototype.ratio),box2d.b2GearJoint=function(o){var t,e;box2d.b2Joint.call(this,o),this.m_joint1=o.joint1,this.m_joint2=o.joint2,this.m_localAnchorA=new box2d.b2Vec2,this.m_localAnchorB=new box2d.b2Vec2,this.m_localAnchorC=new box2d.b2Vec2,this.m_localAnchorD=new box2d.b2Vec2,this.m_localAxisC=new box2d.b2Vec2,this.m_localAxisD=new box2d.b2Vec2,this.m_lcA=new box2d.b2Vec2,this.m_lcB=new box2d.b2Vec2,this.m_lcC=new box2d.b2Vec2,this.m_lcD=new box2d.b2Vec2,this.m_JvAC=new box2d.b2Vec2,this.m_JvBD=new box2d.b2Vec2,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_qC=new box2d.b2Rot,this.m_qD=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2,this.m_lalcC=new box2d.b2Vec2,this.m_lalcD=new box2d.b2Vec2,this.m_typeA=this.m_joint1.GetType(),this.m_typeB=this.m_joint2.GetType(),box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_typeA===box2d.b2JointType.e_revoluteJoint||this.m_typeA===box2d.b2JointType.e_prismaticJoint),box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_typeB===box2d.b2JointType.e_revoluteJoint||this.m_typeB===box2d.b2JointType.e_prismaticJoint),this.m_bodyC=this.m_joint1.GetBodyA(),this.m_bodyA=this.m_joint1.GetBodyB(),t=this.m_bodyA.m_xf;var r=this.m_bodyA.m_sweep.a;e=this.m_bodyC.m_xf;var i=this.m_bodyC.m_sweep.a;this.m_typeA===box2d.b2JointType.e_revoluteJoint?(e=o.joint1,this.m_localAnchorC.Copy(e.m_localAnchorA),this.m_localAnchorA.Copy(e.m_localAnchorB),this.m_referenceAngleA=e.m_referenceAngle,this.m_localAxisC.SetZero(),t=r-i-this.m_referenceAngleA):(i=o.joint1,this.m_localAnchorC.Copy(i.m_localAnchorA),this.m_localAnchorA.Copy(i.m_localAnchorB),this.m_referenceAngleA=i.m_referenceAngle,this.m_localAxisC.Copy(i.m_localXAxisA),r=this.m_localAnchorC,t=box2d.b2MulT_R_V2(e.q,box2d.b2Add_V2_V2(box2d.b2Mul_R_V2(t.q,this.m_localAnchorA,box2d.b2Vec2.s_t0),box2d.b2Sub_V2_V2(t.p,e.p,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),t=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(t,r,box2d.b2Vec2.s_t0),this.m_localAxisC)),this.m_bodyD=this.m_joint2.GetBodyA(),this.m_bodyB=this.m_joint2.GetBodyB(),e=this.m_bodyB.m_xf;i=this.m_bodyB.m_sweep.a,r=this.m_bodyD.m_xf;var b=this.m_bodyD.m_sweep.a;this.m_typeB===box2d.b2JointType.e_revoluteJoint?(e=o.joint2,this.m_localAnchorD.Copy(e.m_localAnchorA),this.m_localAnchorB.Copy(e.m_localAnchorB),this.m_referenceAngleB=e.m_referenceAngle,this.m_localAxisD.SetZero(),e=i-b-this.m_referenceAngleB):(i=o.joint2,this.m_localAnchorD.Copy(i.m_localAnchorA),this.m_localAnchorB.Copy(i.m_localAnchorB),this.m_referenceAngleB=i.m_referenceAngle,this.m_localAxisD.Copy(i.m_localXAxisA),i=this.m_localAnchorD,e=box2d.b2MulT_R_V2(r.q,box2d.b2Add_V2_V2(box2d.b2Mul_R_V2(e.q,this.m_localAnchorB,box2d.b2Vec2.s_t0),box2d.b2Sub_V2_V2(e.p,r.p,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),e=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(e,i,box2d.b2Vec2.s_t0),this.m_localAxisD)),this.m_ratio=o.ratio,this.m_constant=t+this.m_ratio*e,this.m_impulse=0},goog.inherits(box2d.b2GearJoint,box2d.b2Joint),goog.exportSymbol("box2d.b2GearJoint",box2d.b2GearJoint),box2d.b2GearJoint.prototype.m_joint1=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_joint1",box2d.b2GearJoint.prototype.m_joint1),box2d.b2GearJoint.prototype.m_joint2=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_joint2",box2d.b2GearJoint.prototype.m_joint2),box2d.b2GearJoint.prototype.m_typeA=box2d.b2JointType.e_unknownJoint,goog.exportProperty(box2d.b2GearJoint.prototype,"m_typeA",box2d.b2GearJoint.prototype.m_typeA),box2d.b2GearJoint.prototype.m_typeB=box2d.b2JointType.e_unknownJoint,goog.exportProperty(box2d.b2GearJoint.prototype,"m_typeB",box2d.b2GearJoint.prototype.m_typeB),box2d.b2GearJoint.prototype.m_bodyC=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_bodyC",box2d.b2GearJoint.prototype.m_bodyC),box2d.b2GearJoint.prototype.m_bodyD=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_bodyD",box2d.b2GearJoint.prototype.m_bodyD),box2d.b2GearJoint.prototype.m_localAnchorA=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAnchorA",box2d.b2GearJoint.prototype.m_localAnchorA),box2d.b2GearJoint.prototype.m_localAnchorB=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAnchorB",box2d.b2GearJoint.prototype.m_localAnchorB),box2d.b2GearJoint.prototype.m_localAnchorC=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAnchorC",box2d.b2GearJoint.prototype.m_localAnchorC),box2d.b2GearJoint.prototype.m_localAnchorD=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAnchorD",box2d.b2GearJoint.prototype.m_localAnchorD),box2d.b2GearJoint.prototype.m_localAxisC=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAxisC",box2d.b2GearJoint.prototype.m_localAxisC),box2d.b2GearJoint.prototype.m_localAxisD=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAxisD",box2d.b2GearJoint.prototype.m_localAxisD),box2d.b2GearJoint.prototype.m_referenceAngleA=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_referenceAngleA",box2d.b2GearJoint.prototype.m_referenceAngleA),box2d.b2GearJoint.prototype.m_referenceAngleB=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_referenceAngleB",box2d.b2GearJoint.prototype.m_referenceAngleB),box2d.b2GearJoint.prototype.m_constant=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_constant",box2d.b2GearJoint.prototype.m_constant),box2d.b2GearJoint.prototype.m_ratio=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_ratio",box2d.b2GearJoint.prototype.m_ratio),box2d.b2GearJoint.prototype.m_impulse=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_impulse",box2d.b2GearJoint.prototype.m_impulse),box2d.b2GearJoint.prototype.m_indexA=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_indexA",box2d.b2GearJoint.prototype.m_indexA),box2d.b2GearJoint.prototype.m_indexB=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_indexB",box2d.b2GearJoint.prototype.m_indexB),box2d.b2GearJoint.prototype.m_indexC=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_indexC",box2d.b2GearJoint.prototype.m_indexC),box2d.b2GearJoint.prototype.m_indexD=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_indexD",box2d.b2GearJoint.prototype.m_indexD),box2d.b2GearJoint.prototype.m_lcA=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_lcA",box2d.b2GearJoint.prototype.m_lcA),box2d.b2GearJoint.prototype.m_lcB=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_lcB",box2d.b2GearJoint.prototype.m_lcB),box2d.b2GearJoint.prototype.m_lcC=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_lcC",box2d.b2GearJoint.prototype.m_lcC),box2d.b2GearJoint.prototype.m_lcD=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_lcD",box2d.b2GearJoint.prototype.m_lcD),box2d.b2GearJoint.prototype.m_mA=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_mA",box2d.b2GearJoint.prototype.m_mA),box2d.b2GearJoint.prototype.m_mB=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_mB",box2d.b2GearJoint.prototype.m_mB),box2d.b2GearJoint.prototype.m_mC=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_mC",box2d.b2GearJoint.prototype.m_mC),box2d.b2GearJoint.prototype.m_mD=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_mD",box2d.b2GearJoint.prototype.m_mD),box2d.b2GearJoint.prototype.m_iA=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_iA",box2d.b2GearJoint.prototype.m_iA),box2d.b2GearJoint.prototype.m_iB=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_iB",box2d.b2GearJoint.prototype.m_iB),box2d.b2GearJoint.prototype.m_iC=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_iC",box2d.b2GearJoint.prototype.m_iC),box2d.b2GearJoint.prototype.m_iD=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_iD",box2d.b2GearJoint.prototype.m_iD),box2d.b2GearJoint.prototype.m_JvAC=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_JvAC",box2d.b2GearJoint.prototype.m_JvAC),box2d.b2GearJoint.prototype.m_JvBD=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_JvBD",box2d.b2GearJoint.prototype.m_JvBD),box2d.b2GearJoint.prototype.m_JwA=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_JwA",box2d.b2GearJoint.prototype.m_JwA),box2d.b2GearJoint.prototype.m_JwB=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_JwB",box2d.b2GearJoint.prototype.m_JwB),box2d.b2GearJoint.prototype.m_JwC=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_JwC",box2d.b2GearJoint.prototype.m_JwC),box2d.b2GearJoint.prototype.m_JwD=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_JwD",box2d.b2GearJoint.prototype.m_JwD),box2d.b2GearJoint.prototype.m_mass=0,goog.exportProperty(box2d.b2GearJoint.prototype,"m_mass",box2d.b2GearJoint.prototype.m_mass),box2d.b2GearJoint.prototype.m_qA=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_qA",box2d.b2GearJoint.prototype.m_qA),box2d.b2GearJoint.prototype.m_qB=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_qB",box2d.b2GearJoint.prototype.m_qB),box2d.b2GearJoint.prototype.m_qC=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_qC",box2d.b2GearJoint.prototype.m_qC),box2d.b2GearJoint.prototype.m_qD=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_qD",box2d.b2GearJoint.prototype.m_qD),box2d.b2GearJoint.prototype.m_lalcA=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_lalcA",box2d.b2GearJoint.prototype.m_lalcA),box2d.b2GearJoint.prototype.m_lalcB=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_lalcB",box2d.b2GearJoint.prototype.m_lalcB),box2d.b2GearJoint.prototype.m_lalcC=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_lalcC",box2d.b2GearJoint.prototype.m_lalcC),box2d.b2GearJoint.prototype.m_lalcD=null,goog.exportProperty(box2d.b2GearJoint.prototype,"m_lalcD",box2d.b2GearJoint.prototype.m_lalcD),box2d.b2GearJoint.prototype.InitVelocityConstraints=function(o){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_indexC=this.m_bodyC.m_islandIndex,this.m_indexD=this.m_bodyD.m_islandIndex,this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter),this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter),this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var t=o.velocities[this.m_indexA].v,e=o.velocities[this.m_indexA].w,r=o.positions[this.m_indexB].a,i=o.velocities[this.m_indexB].v,b=o.velocities[this.m_indexB].w,p=o.positions[this.m_indexC].a,n=o.velocities[this.m_indexC].v,a=o.velocities[this.m_indexC].w,s=o.positions[this.m_indexD].a,d=o.velocities[this.m_indexD].v,x=o.velocities[this.m_indexD].w,l=this.m_qA.SetAngle(o.positions[this.m_indexA].a),y=(r=this.m_qB.SetAngle(r),this.m_qC.SetAngle(p));p=this.m_qD.SetAngle(s);this.m_mass=0,this.m_typeA===box2d.b2JointType.e_revoluteJoint?(this.m_JvAC.SetZero(),this.m_JwC=this.m_JwA=1,this.m_mass+=this.m_iA+this.m_iC):(s=box2d.b2Mul_R_V2(y,this.m_localAxisC,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u),box2d.b2Sub_V2_V2(this.m_localAnchorC,this.m_lcC,this.m_lalcC),y=box2d.b2Mul_R_V2(y,this.m_lalcC,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rC),box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_lcA,this.m_lalcA),l=box2d.b2Mul_R_V2(l,this.m_lalcA,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rA),this.m_JvAC.Copy(s),this.m_JwC=box2d.b2Cross_V2_V2(y,s),this.m_JwA=box2d.b2Cross_V2_V2(l,s),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA),this.m_typeB===box2d.b2JointType.e_revoluteJoint?(this.m_JvBD.SetZero(),this.m_JwD=this.m_JwB=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD)):(s=box2d.b2Mul_R_V2(p,this.m_localAxisD,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u),box2d.b2Sub_V2_V2(this.m_localAnchorD,this.m_lcD,this.m_lalcD),l=box2d.b2Mul_R_V2(p,this.m_lalcD,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rD),box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_lcB,this.m_lalcB),r=box2d.b2Mul_R_V2(r,this.m_lalcB,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rB),box2d.b2Mul_S_V2(this.m_ratio,s,this.m_JvBD),this.m_JwD=this.m_ratio*box2d.b2Cross_V2_V2(l,s),this.m_JwB=this.m_ratio*box2d.b2Cross_V2_V2(r,s),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB),this.m_mass=0<this.m_mass?1/this.m_mass:0,o.step.warmStarting?(t.SelfMulAdd(this.m_mA*this.m_impulse,this.m_JvAC),e+=this.m_iA*this.m_impulse*this.m_JwA,i.SelfMulAdd(this.m_mB*this.m_impulse,this.m_JvBD),b+=this.m_iB*this.m_impulse*this.m_JwB,n.SelfMulSub(this.m_mC*this.m_impulse,this.m_JvAC),a-=this.m_iC*this.m_impulse*this.m_JwC,d.SelfMulSub(this.m_mD*this.m_impulse,this.m_JvBD),x-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=b,o.velocities[this.m_indexC].w=a,o.velocities[this.m_indexD].w=x},box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u=new box2d.b2Vec2,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rA=new box2d.b2Vec2,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rB=new box2d.b2Vec2,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rC=new box2d.b2Vec2,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rD=new box2d.b2Vec2,box2d.b2GearJoint.prototype.SolveVelocityConstraints=function(o){var t=o.velocities[this.m_indexA].v,e=o.velocities[this.m_indexA].w,r=o.velocities[this.m_indexB].v,i=o.velocities[this.m_indexB].w,b=o.velocities[this.m_indexC].v,p=o.velocities[this.m_indexC].w,n=o.velocities[this.m_indexD].v,a=o.velocities[this.m_indexD].w,s=(s=box2d.b2Dot_V2_V2(this.m_JvAC,box2d.b2Sub_V2_V2(t,b,box2d.b2Vec2.s_t0))+box2d.b2Dot_V2_V2(this.m_JvBD,box2d.b2Sub_V2_V2(r,n,box2d.b2Vec2.s_t0)))+(this.m_JwA*e-this.m_JwC*p+(this.m_JwB*i-this.m_JwD*a));s=-this.m_mass*s;this.m_impulse+=s,t.SelfMulAdd(this.m_mA*s,this.m_JvAC),e+=this.m_iA*s*this.m_JwA,r.SelfMulAdd(this.m_mB*s,this.m_JvBD),i+=this.m_iB*s*this.m_JwB,b.SelfMulSub(this.m_mC*s,this.m_JvAC),p-=this.m_iC*s*this.m_JwC,n.SelfMulSub(this.m_mD*s,this.m_JvBD),a-=this.m_iD*s*this.m_JwD,o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=i,o.velocities[this.m_indexC].w=p,o.velocities[this.m_indexD].w=a},box2d.b2GearJoint.prototype.SolvePositionConstraints=function(o){var t,e,r=o.positions[this.m_indexA].c,i=o.positions[this.m_indexA].a,b=o.positions[this.m_indexB].c,p=o.positions[this.m_indexB].a,n=o.positions[this.m_indexC].c,a=o.positions[this.m_indexC].a,s=o.positions[this.m_indexD].c,d=o.positions[this.m_indexD].a,x=this.m_qA.SetAngle(i),l=this.m_qB.SetAngle(p),y=this.m_qC.SetAngle(a),c=this.m_qD.SetAngle(d),m=this.m_JvAC,_=this.m_JvBD,u=0;if(this.m_typeA===box2d.b2JointType.e_revoluteJoint)m.SetZero(),x=t=1,u+=this.m_iA+this.m_iC,y=i-a-this.m_referenceAngleA;else{e=box2d.b2Mul_R_V2(y,this.m_localAxisC,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u),t=box2d.b2Mul_R_V2(y,this.m_lalcC,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rC);var h=box2d.b2Mul_R_V2(x,this.m_lalcA,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rA);m.Copy(e),x=box2d.b2Cross_V2_V2(t,e),t=box2d.b2Cross_V2_V2(h,e),u+=this.m_mC+this.m_mA+this.m_iC*x*x+this.m_iA*t*t,e=this.m_lalcC,y=box2d.b2MulT_R_V2(y,box2d.b2Add_V2_V2(h,box2d.b2Sub_V2_V2(r,n,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),y=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(y,e,box2d.b2Vec2.s_t0),this.m_localAxisC)}if(this.m_typeB===box2d.b2JointType.e_revoluteJoint)_.SetZero(),l=e=this.m_ratio,u+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),c=p-d-this.m_referenceAngleB;else{e=box2d.b2Mul_R_V2(c,this.m_localAxisD,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u);var g=box2d.b2Mul_R_V2(c,this.m_lalcD,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rD);h=box2d.b2Mul_R_V2(l,this.m_lalcB,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rB);box2d.b2Mul_S_V2(this.m_ratio,e,_),l=this.m_ratio*box2d.b2Cross_V2_V2(g,e),e=this.m_ratio*box2d.b2Cross_V2_V2(h,e),u+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*l*l+this.m_iB*e*e,g=this.m_lalcD,c=box2d.b2MulT_R_V2(c,box2d.b2Add_V2_V2(h,box2d.b2Sub_V2_V2(b,s,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),c=box2d.b2Dot_V2_V2(box2d.b2Sub_V2_V2(c,g,box2d.b2Vec2.s_t0),this.m_localAxisD)}return c=y+this.m_ratio*c-this.m_constant,y=0,0<u&&(y=-c/u),r.SelfMulAdd(this.m_mA*y,m),i+=this.m_iA*y*t,b.SelfMulAdd(this.m_mB*y,_),p+=this.m_iB*y*e,n.SelfMulSub(this.m_mC*y,m),a-=this.m_iC*y*x,s.SelfMulSub(this.m_mD*y,_),d-=this.m_iD*y*l,o.positions[this.m_indexA].a=i,o.positions[this.m_indexB].a=p,o.positions[this.m_indexC].a=a,o.positions[this.m_indexD].a=d,0<box2d.b2_linearSlop},goog.exportProperty(box2d.b2GearJoint.prototype,"SolvePositionConstraints",box2d.b2GearJoint.prototype.SolvePositionConstraints),box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u=new box2d.b2Vec2,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rA=new box2d.b2Vec2,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rB=new box2d.b2Vec2,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rC=new box2d.b2Vec2,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rD=new box2d.b2Vec2,box2d.b2GearJoint.prototype.GetAnchorA=function(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)},goog.exportProperty(box2d.b2GearJoint.prototype,"GetAnchorA",box2d.b2GearJoint.prototype.GetAnchorA),box2d.b2GearJoint.prototype.GetAnchorB=function(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)},goog.exportProperty(box2d.b2GearJoint.prototype,"GetAnchorB",box2d.b2GearJoint.prototype.GetAnchorB),box2d.b2GearJoint.prototype.GetReactionForce=function(o,t){return box2d.b2Mul_S_V2(o*this.m_impulse,this.m_JvAC,t)},goog.exportProperty(box2d.b2GearJoint.prototype,"GetReactionForce",box2d.b2GearJoint.prototype.GetReactionForce),box2d.b2GearJoint.prototype.GetReactionTorque=function(o){return o*this.m_impulse*this.m_JwA},goog.exportProperty(box2d.b2GearJoint.prototype,"GetReactionTorque",box2d.b2GearJoint.prototype.GetReactionTorque),box2d.b2GearJoint.prototype.GetJoint1=function(){return this.m_joint1},goog.exportProperty(box2d.b2GearJoint.prototype,"GetJoint1",box2d.b2GearJoint.prototype.GetJoint1),box2d.b2GearJoint.prototype.GetJoint2=function(){return this.m_joint2},goog.exportProperty(box2d.b2GearJoint.prototype,"GetJoint2",box2d.b2GearJoint.prototype.GetJoint2),box2d.b2GearJoint.prototype.GetRatio=function(){return this.m_ratio},goog.exportProperty(box2d.b2GearJoint.prototype,"GetRatio",box2d.b2GearJoint.prototype.GetRatio),box2d.b2GearJoint.prototype.SetRatio=function(o){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(o)),this.m_ratio=o},goog.exportProperty(box2d.b2GearJoint.prototype,"SetRatio",box2d.b2GearJoint.prototype.SetRatio),box2d.b2GearJoint.prototype.Dump=function(){if(box2d.DEBUG){var o=this.m_bodyA.m_islandIndex,t=this.m_bodyB.m_islandIndex,e=this.m_joint1.m_index,r=this.m_joint2.m_index;box2d.b2Log("  /*box2d.b2GearJointDef*/ var jd = new box2d.b2GearJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",o),box2d.b2Log("  jd.bodyB = bodies[%d];\n",t),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.joint1 = joints[%d];\n",e),box2d.b2Log("  jd.joint2 = joints[%d];\n",r),box2d.b2Log("  jd.ratio = %.15f;\n",this.m_ratio),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}},goog.exportProperty(box2d.b2GearJoint.prototype,"Dump",box2d.b2GearJoint.prototype.Dump),box2d.b2RopeJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_ropeJoint),this.localAnchorA=new box2d.b2Vec2(-1,0),this.localAnchorB=new box2d.b2Vec2(1,0)},goog.inherits(box2d.b2RopeJointDef,box2d.b2JointDef),goog.exportSymbol("box2d.b2RopeJointDef",box2d.b2RopeJointDef),box2d.b2RopeJointDef.prototype.localAnchorA=null,goog.exportProperty(box2d.b2RopeJointDef.prototype,"localAnchorA",box2d.b2RopeJointDef.prototype.localAnchorA),box2d.b2RopeJointDef.prototype.localAnchorB=null,goog.exportProperty(box2d.b2RopeJointDef.prototype,"localAnchorB",box2d.b2RopeJointDef.prototype.localAnchorB),box2d.b2RopeJointDef.prototype.maxLength=0,goog.exportProperty(box2d.b2RopeJointDef.prototype,"maxLength",box2d.b2RopeJointDef.prototype.maxLength),box2d.b2RopeJoint=function(o){box2d.b2Joint.call(this,o),this.m_localAnchorA=o.localAnchorA.Clone(),this.m_localAnchorB=o.localAnchorB.Clone(),this.m_maxLength=o.maxLength,this.m_u=new box2d.b2Vec2,this.m_rA=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2,this.m_localCenterA=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2},goog.inherits(box2d.b2RopeJoint,box2d.b2Joint),goog.exportSymbol("box2d.b2RopeJoint",box2d.b2RopeJoint),box2d.b2RopeJoint.prototype.m_localAnchorA=null,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_localAnchorA",box2d.b2RopeJoint.prototype.m_localAnchorA),box2d.b2RopeJoint.prototype.m_localAnchorB=null,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_localAnchorB",box2d.b2RopeJoint.prototype.m_localAnchorB),box2d.b2RopeJoint.prototype.m_maxLength=0,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_maxLength",box2d.b2RopeJoint.prototype.m_maxLength),box2d.b2RopeJoint.prototype.m_length=0,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_length",box2d.b2RopeJoint.prototype.m_length),box2d.b2RopeJoint.prototype.m_impulse=0,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_impulse",box2d.b2RopeJoint.prototype.m_impulse),box2d.b2RopeJoint.prototype.m_indexA=0,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_indexA",box2d.b2RopeJoint.prototype.m_indexA),box2d.b2RopeJoint.prototype.m_indexB=0,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_indexB",box2d.b2RopeJoint.prototype.m_indexB),box2d.b2RopeJoint.prototype.m_u=null,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_u",box2d.b2RopeJoint.prototype.m_u),box2d.b2RopeJoint.prototype.m_rA=null,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_rA",box2d.b2RopeJoint.prototype.m_rA),box2d.b2RopeJoint.prototype.m_rB=null,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_rB",box2d.b2RopeJoint.prototype.m_rB),box2d.b2RopeJoint.prototype.m_localCenterA=null,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_localCenterA",box2d.b2RopeJoint.prototype.m_localCenterA),box2d.b2RopeJoint.prototype.m_localCenterB=null,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_localCenterB",box2d.b2RopeJoint.prototype.m_localCenterB),box2d.b2RopeJoint.prototype.m_invMassA=0,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_invMassA",box2d.b2RopeJoint.prototype.m_invMassA),box2d.b2RopeJoint.prototype.m_invMassB=0,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_invMassB",box2d.b2RopeJoint.prototype.m_invMassB),box2d.b2RopeJoint.prototype.m_invIA=0,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_invIA",box2d.b2RopeJoint.prototype.m_invIA),box2d.b2RopeJoint.prototype.m_invIB=0,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_invIB",box2d.b2RopeJoint.prototype.m_invIB),box2d.b2RopeJoint.prototype.m_mass=0,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_mass",box2d.b2RopeJoint.prototype.m_mass),box2d.b2RopeJoint.prototype.m_state=box2d.b2LimitState.e_inactiveLimit,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_state",box2d.b2RopeJoint.prototype.m_state),box2d.b2RopeJoint.prototype.m_qA=null,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_qA",box2d.b2RopeJoint.prototype.m_qA),box2d.b2RopeJoint.prototype.m_qB=null,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_qB",box2d.b2RopeJoint.prototype.m_qB),box2d.b2RopeJoint.prototype.m_lalcA=null,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_lalcA",box2d.b2RopeJoint.prototype.m_lalcA),box2d.b2RopeJoint.prototype.m_lalcB=null,goog.exportProperty(box2d.b2RopeJoint.prototype,"m_lalcB",box2d.b2RopeJoint.prototype.m_lalcB),box2d.b2RopeJoint.prototype.InitVelocityConstraints=function(o){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var t=o.positions[this.m_indexA].c,e=o.velocities[this.m_indexA].v,r=o.velocities[this.m_indexA].w,i=o.positions[this.m_indexB].c,b=o.positions[this.m_indexB].a,p=o.velocities[this.m_indexB].v,n=o.velocities[this.m_indexB].w,a=this.m_qA.SetAngle(o.positions[this.m_indexA].a);b=this.m_qB.SetAngle(b);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2Mul_R_V2(a,this.m_lalcA,this.m_rA),box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2Mul_R_V2(b,this.m_lalcB,this.m_rB),this.m_u.Copy(i).SelfAdd(this.m_rB).SelfSub(t).SelfSub(this.m_rA),this.m_length=this.m_u.Length(),this.m_state=0<this.m_length-this.m_maxLength?box2d.b2LimitState.e_atUpperLimit:box2d.b2LimitState.e_inactiveLimit,this.m_length>box2d.b2_linearSlop?(this.m_u.SelfMul(1/this.m_length),t=box2d.b2Cross_V2_V2(this.m_rA,this.m_u),i=box2d.b2Cross_V2_V2(this.m_rB,this.m_u),t=this.m_invMassA+this.m_invIA*t*t+this.m_invMassB+this.m_invIB*i*i,this.m_mass=0!==t?1/t:0,o.step.warmStarting?(this.m_impulse*=o.step.dtRatio,t=box2d.b2Mul_S_V2(this.m_impulse,this.m_u,box2d.b2RopeJoint.prototype.InitVelocityConstraints.s_P),e.SelfMulSub(this.m_invMassA,t),r-=this.m_invIA*box2d.b2Cross_V2_V2(this.m_rA,t),p.SelfMulAdd(this.m_invMassB,t),n+=this.m_invIB*box2d.b2Cross_V2_V2(this.m_rB,t)):this.m_impulse=0,o.velocities[this.m_indexA].w=r,o.velocities[this.m_indexB].w=n):(this.m_u.SetZero(),this.m_impulse=this.m_mass=0)},goog.exportProperty(box2d.b2RopeJoint.prototype,"InitVelocityConstraints",box2d.b2RopeJoint.prototype.InitVelocityConstraints),box2d.b2RopeJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2RopeJoint.prototype.SolveVelocityConstraints=function(o){var t=o.velocities[this.m_indexA].v,e=o.velocities[this.m_indexA].w,r=o.velocities[this.m_indexB].v,i=o.velocities[this.m_indexB].w,b=box2d.b2AddCross_V2_S_V2(t,e,this.m_rA,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpA),p=box2d.b2AddCross_V2_S_V2(r,i,this.m_rB,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpB),n=this.m_length-this.m_maxLength;b=box2d.b2Dot_V2_V2(this.m_u,box2d.b2Sub_V2_V2(p,b,box2d.b2Vec2.s_t0));0>n&&(b+=o.step.inv_dt*n),n=-this.m_mass*b,b=this.m_impulse,this.m_impulse=box2d.b2Min(0,this.m_impulse+n),n=this.m_impulse-b,n=box2d.b2Mul_S_V2(n,this.m_u,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_P),t.SelfMulSub(this.m_invMassA,n),e-=this.m_invIA*box2d.b2Cross_V2_V2(this.m_rA,n),r.SelfMulAdd(this.m_invMassB,n),i+=this.m_invIB*box2d.b2Cross_V2_V2(this.m_rB,n),o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=i},goog.exportProperty(box2d.b2RopeJoint.prototype,"SolveVelocityConstraints",box2d.b2RopeJoint.prototype.SolveVelocityConstraints),box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpA=new box2d.b2Vec2,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpB=new box2d.b2Vec2,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2RopeJoint.prototype.SolvePositionConstraints=function(o){var t=o.positions[this.m_indexA].c,e=o.positions[this.m_indexA].a,r=o.positions[this.m_indexB].c,i=o.positions[this.m_indexB].a,b=this.m_qA.SetAngle(e),p=this.m_qB.SetAngle(i);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),b=box2d.b2Mul_R_V2(b,this.m_lalcA,this.m_rA),box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);p=box2d.b2Mul_R_V2(p,this.m_lalcB,this.m_rB);var n=(s=this.m_u.Copy(r).SelfAdd(p).SelfSub(t).SelfSub(b)).Normalize(),a=n-this.m_maxLength,s=(a=box2d.b2Clamp(a,0,box2d.b2_maxLinearCorrection),box2d.b2Mul_S_V2(-this.m_mass*a,s,box2d.b2RopeJoint.prototype.SolvePositionConstraints.s_P));return t.SelfMulSub(this.m_invMassA,s),e-=this.m_invIA*box2d.b2Cross_V2_V2(b,s),r.SelfMulAdd(this.m_invMassB,s),i+=this.m_invIB*box2d.b2Cross_V2_V2(p,s),o.positions[this.m_indexA].a=e,o.positions[this.m_indexB].a=i,n-this.m_maxLength<box2d.b2_linearSlop},goog.exportProperty(box2d.b2RopeJoint.prototype,"SolvePositionConstraints",box2d.b2RopeJoint.prototype.SolvePositionConstraints),box2d.b2RopeJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2,box2d.b2RopeJoint.prototype.GetAnchorA=function(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetAnchorA",box2d.b2RopeJoint.prototype.GetAnchorA),box2d.b2RopeJoint.prototype.GetAnchorB=function(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)},goog.exportProperty(box2d.b2RopeJoint.prototype,"GetAnchorB",box2d.b2RopeJoint.prototype.GetAnchorB),box2d.b2RopeJoint.prototype.GetReactionForce=function(o,t){return box2d.b2Mul_S_V2(o*this.m_impulse,this.m_u,t)},goog.exportProperty(box2d.b2RopeJoint.prototype,"GetReactionForce",box2d.b2RopeJoint.prototype.GetReactionForce),box2d.b2RopeJoint.prototype.GetReactionTorque=function(o){return 0},goog.exportProperty(box2d.b2RopeJoint.prototype,"GetReactionTorque",box2d.b2RopeJoint.prototype.GetReactionTorque),box2d.b2RopeJoint.prototype.GetLocalAnchorA=function(o){return o.Copy(this.m_localAnchorA)},goog.exportProperty(box2d.b2RopeJoint.prototype,"GetLocalAnchorA",box2d.b2RopeJoint.prototype.GetLocalAnchorA),box2d.b2RopeJoint.prototype.GetLocalAnchorB=function(o){return o.Copy(this.m_localAnchorB)},goog.exportProperty(box2d.b2RopeJoint.prototype,"GetLocalAnchorB",box2d.b2RopeJoint.prototype.GetLocalAnchorB),box2d.b2RopeJoint.prototype.SetMaxLength=function(o){this.m_maxLength=o},goog.exportProperty(box2d.b2RopeJoint.prototype,"SetMaxLength",box2d.b2RopeJoint.prototype.SetMaxLength),box2d.b2RopeJoint.prototype.GetMaxLength=function(){return this.m_maxLength},goog.exportProperty(box2d.b2RopeJoint.prototype,"GetMaxLength",box2d.b2RopeJoint.prototype.GetMaxLength),box2d.b2RopeJoint.prototype.GetLimitState=function(){return this.m_state},goog.exportProperty(box2d.b2RopeJoint.prototype,"GetLimitState",box2d.b2RopeJoint.prototype.GetLimitState),box2d.b2RopeJoint.prototype.Dump=function(){if(box2d.DEBUG){var o=this.m_bodyA.m_islandIndex,t=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2RopeJointDef*/ var jd = new box2d.b2RopeJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",o),box2d.b2Log("  jd.bodyB = bodies[%d];\n",t),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),box2d.b2Log("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),box2d.b2Log("  jd.maxLength = %.15f;\n",this.m_maxLength),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}},goog.exportProperty(box2d.b2RopeJoint.prototype,"Dump",box2d.b2RopeJoint.prototype.Dump),box2d.b2WeldJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_weldJoint),this.localAnchorA=new box2d.b2Vec2,this.localAnchorB=new box2d.b2Vec2},goog.inherits(box2d.b2WeldJointDef,box2d.b2JointDef),goog.exportSymbol("box2d.b2WeldJointDef",box2d.b2WeldJointDef),box2d.b2WeldJointDef.prototype.localAnchorA=null,goog.exportProperty(box2d.b2WeldJointDef.prototype,"localAnchorA",box2d.b2WeldJointDef.prototype.localAnchorA),box2d.b2WeldJointDef.prototype.localAnchorB=null,goog.exportProperty(box2d.b2WeldJointDef.prototype,"localAnchorB",box2d.b2WeldJointDef.prototype.localAnchorB),box2d.b2WeldJointDef.prototype.referenceAngle=0,goog.exportProperty(box2d.b2WeldJointDef.prototype,"referenceAngle",box2d.b2WeldJointDef.prototype.referenceAngle),box2d.b2WeldJointDef.prototype.frequencyHz=0,goog.exportProperty(box2d.b2WeldJointDef.prototype,"frequencyHz",box2d.b2WeldJointDef.prototype.frequencyHz),box2d.b2WeldJointDef.prototype.dampingRatio=0,goog.exportProperty(box2d.b2WeldJointDef.prototype,"dampingRatio",box2d.b2WeldJointDef.prototype.dampingRatio),box2d.b2WeldJointDef.prototype.Initialize=function(o,t,e){this.bodyA=o,this.bodyB=t,this.bodyA.GetLocalPoint(e,this.localAnchorA),this.bodyB.GetLocalPoint(e,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},goog.exportProperty(box2d.b2WeldJointDef.prototype,"Initialize",box2d.b2WeldJointDef.prototype.Initialize),box2d.b2WeldJoint=function(o){box2d.b2Joint.call(this,o),this.m_frequencyHz=o.frequencyHz,this.m_dampingRatio=o.dampingRatio,this.m_localAnchorA=o.localAnchorA.Clone(),this.m_localAnchorB=o.localAnchorB.Clone(),this.m_referenceAngle=o.referenceAngle,this.m_impulse=new box2d.b2Vec3(0,0,0),this.m_rA=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2,this.m_localCenterA=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_mass=new box2d.b2Mat33,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2,this.m_K=new box2d.b2Mat33},goog.inherits(box2d.b2WeldJoint,box2d.b2Joint),goog.exportSymbol("box2d.b2WeldJoint",box2d.b2WeldJoint),box2d.b2WeldJoint.prototype.m_frequencyHz=0,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_frequencyHz",box2d.b2WeldJoint.prototype.m_frequencyHz),box2d.b2WeldJoint.prototype.m_dampingRatio=0,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_dampingRatio",box2d.b2WeldJoint.prototype.m_dampingRatio),box2d.b2WeldJoint.prototype.m_bias=0,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_bias",box2d.b2WeldJoint.prototype.m_bias),box2d.b2WeldJoint.prototype.m_localAnchorA=null,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_localAnchorA",box2d.b2WeldJoint.prototype.m_localAnchorA),box2d.b2WeldJoint.prototype.m_localAnchorB=null,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_localAnchorB",box2d.b2WeldJoint.prototype.m_localAnchorB),box2d.b2WeldJoint.prototype.m_referenceAngle=0,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_referenceAngle",box2d.b2WeldJoint.prototype.m_referenceAngle),box2d.b2WeldJoint.prototype.m_gamma=0,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_gamma",box2d.b2WeldJoint.prototype.m_gamma),box2d.b2WeldJoint.prototype.m_impulse=null,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_impulse",box2d.b2WeldJoint.prototype.m_impulse),box2d.b2WeldJoint.prototype.m_indexA=0,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_indexA",box2d.b2WeldJoint.prototype.m_indexA),box2d.b2WeldJoint.prototype.m_indexB=0,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_indexB",box2d.b2WeldJoint.prototype.m_indexB),box2d.b2WeldJoint.prototype.m_rA=null,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_rA",box2d.b2WeldJoint.prototype.m_rA),box2d.b2WeldJoint.prototype.m_rB=null,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_rB",box2d.b2WeldJoint.prototype.m_rB),box2d.b2WeldJoint.prototype.m_localCenterA=null,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_localCenterA",box2d.b2WeldJoint.prototype.m_localCenterA),box2d.b2WeldJoint.prototype.m_localCenterB=null,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_localCenterB",box2d.b2WeldJoint.prototype.m_localCenterB),box2d.b2WeldJoint.prototype.m_invMassA=0,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_invMassA",box2d.b2WeldJoint.prototype.m_invMassA),box2d.b2WeldJoint.prototype.m_invMassB=0,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_invMassB",box2d.b2WeldJoint.prototype.m_invMassB),box2d.b2WeldJoint.prototype.m_invIA=0,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_invIA",box2d.b2WeldJoint.prototype.m_invIA),box2d.b2WeldJoint.prototype.m_invIB=0,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_invIB",box2d.b2WeldJoint.prototype.m_invIB),box2d.b2WeldJoint.prototype.m_mass=null,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_mass",box2d.b2WeldJoint.prototype.m_mass),box2d.b2WeldJoint.prototype.m_qA=null,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_qA",box2d.b2WeldJoint.prototype.m_qA),box2d.b2WeldJoint.prototype.m_qB=null,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_qB",box2d.b2WeldJoint.prototype.m_qB),box2d.b2WeldJoint.prototype.m_lalcA=null,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_lalcA",box2d.b2WeldJoint.prototype.m_lalcA),box2d.b2WeldJoint.prototype.m_lalcB=null,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_lalcB",box2d.b2WeldJoint.prototype.m_lalcB),box2d.b2WeldJoint.prototype.m_K=null,goog.exportProperty(box2d.b2WeldJoint.prototype,"m_K",box2d.b2WeldJoint.prototype.m_K),box2d.b2WeldJoint.prototype.InitVelocityConstraints=function(o){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var t=o.positions[this.m_indexA].a,e=o.velocities[this.m_indexA].v,r=o.velocities[this.m_indexA].w,i=o.positions[this.m_indexB].a,b=o.velocities[this.m_indexB].v,p=o.velocities[this.m_indexB].w,n=this.m_qA.SetAngle(t),a=this.m_qB.SetAngle(i);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2Mul_R_V2(n,this.m_lalcA,this.m_rA),box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2Mul_R_V2(a,this.m_lalcB,this.m_rB);n=this.m_invMassA,a=this.m_invMassB;var s=this.m_invIA,d=this.m_invIB;if((x=this.m_K).ex.x=n+a+this.m_rA.y*this.m_rA.y*s+this.m_rB.y*this.m_rB.y*d,x.ey.x=-this.m_rA.y*this.m_rA.x*s-this.m_rB.y*this.m_rB.x*d,x.ez.x=-this.m_rA.y*s-this.m_rB.y*d,x.ex.y=x.ey.x,x.ey.y=n+a+this.m_rA.x*this.m_rA.x*s+this.m_rB.x*this.m_rB.x*d,x.ez.y=this.m_rA.x*s+this.m_rB.x*d,x.ex.z=x.ez.x,x.ey.z=x.ez.y,x.ez.z=s+d,0<this.m_frequencyHz){x.GetInverse22(this.m_mass);var x,l=0<(x=s+d)?1/x:0,y=(t=i-t-this.m_referenceAngle,l*(i=2*box2d.b2_pi*this.m_frequencyHz)*i),c=o.step.dt;this.m_gamma=c*(2*l*this.m_dampingRatio*i+c*y),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=t*c*y*this.m_gamma,x+=this.m_gamma,this.m_mass.ez.z=0!==x?1/x:0}else 0===x.ez.z?x.GetInverse22(this.m_mass):x.GetSymInverse33(this.m_mass),this.m_bias=this.m_gamma=0;o.step.warmStarting?(this.m_impulse.SelfMulScalar(o.step.dtRatio),x=box2d.b2WeldJoint.prototype.InitVelocityConstraints.s_P.Set(this.m_impulse.x,this.m_impulse.y),e.SelfMulSub(n,x),r-=s*(box2d.b2Cross_V2_V2(this.m_rA,x)+this.m_impulse.z),b.SelfMulAdd(a,x),p+=d*(box2d.b2Cross_V2_V2(this.m_rB,x)+this.m_impulse.z)):this.m_impulse.SetZero(),o.velocities[this.m_indexA].w=r,o.velocities[this.m_indexB].w=p},box2d.b2WeldJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2WeldJoint.prototype.SolveVelocityConstraints=function(o){var t=o.velocities[this.m_indexA].v,e=o.velocities[this.m_indexA].w,r=o.velocities[this.m_indexB].v,i=o.velocities[this.m_indexB].w,b=this.m_invMassA,p=this.m_invMassB,n=this.m_invIA,a=this.m_invIB;if(0<this.m_frequencyHz){var s=-this.m_mass.ez.z*(i-e+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=s,e-=n*s,i+=a*s,s=box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(r,i,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(t,e,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1),s=box2d.b2Mul_M33_X_Y(this.m_mass,s.x,s.y,box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse1).SelfNeg(),this.m_impulse.x+=s.x,this.m_impulse.y+=s.y,t.SelfMulSub(b,s),e-=n*box2d.b2Cross_V2_V2(this.m_rA,s),r.SelfMulAdd(p,s),i+=a*box2d.b2Cross_V2_V2(this.m_rB,s)}else{s=box2d.b2Sub_V2_V2(box2d.b2AddCross_V2_S_V2(r,i,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddCross_V2_S_V2(t,e,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1);var d=box2d.b2Mul_M33_X_Y_Z(this.m_mass,s.x,s.y,i-e,box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse).SelfNeg();this.m_impulse.SelfAdd(d),s=box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_P.Set(d.x,d.y),t.SelfMulSub(b,s),e-=n*(box2d.b2Cross_V2_V2(this.m_rA,s)+d.z),r.SelfMulAdd(p,s),i+=a*(box2d.b2Cross_V2_V2(this.m_rB,s)+d.z)}o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=i},goog.exportProperty(box2d.b2WeldJoint.prototype,"SolveVelocityConstraints",box2d.b2WeldJoint.prototype.SolveVelocityConstraints),box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1=new box2d.b2Vec2,box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse1=new box2d.b2Vec2,box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse=new box2d.b2Vec3,box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2WeldJoint.prototype.SolvePositionConstraints=function(o){var t=o.positions[this.m_indexA].c,e=o.positions[this.m_indexA].a,r=o.positions[this.m_indexB].c,i=o.positions[this.m_indexB].a,b=this.m_qA.SetAngle(e),p=this.m_qB.SetAngle(i),n=this.m_invMassA,a=this.m_invMassB,s=this.m_invIA,d=this.m_invIB;box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);var x=box2d.b2Mul_R_V2(b,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var l=box2d.b2Mul_R_V2(p,this.m_lalcB,this.m_rB);if((c=this.m_K).ex.x=n+a+x.y*x.y*s+l.y*l.y*d,c.ey.x=-x.y*x.x*s-l.y*l.x*d,c.ez.x=-x.y*s-l.y*d,c.ex.y=c.ey.x,c.ey.y=n+a+x.x*x.x*s+l.x*l.x*d,c.ez.y=x.x*s+l.x*d,c.ex.z=c.ez.x,c.ey.z=c.ez.y,c.ez.z=s+d,0<this.m_frequencyHz){var y=box2d.b2Sub_V2_V2(box2d.b2Add_V2_V2(r,l,box2d.b2Vec2.s_t0),box2d.b2Add_V2_V2(t,x,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1),c=(p=y.Length(),b=0,c.Solve22(y.x,y.y,box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P).SelfNeg());t.SelfMulSub(n,c),e-=s*box2d.b2Cross_V2_V2(x,c),r.SelfMulAdd(a,c),i+=d*box2d.b2Cross_V2_V2(l,c)}else y=box2d.b2Sub_V2_V2(box2d.b2Add_V2_V2(r,l,box2d.b2Vec2.s_t0),box2d.b2Add_V2_V2(t,x,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1),l=i-e-this.m_referenceAngle,p=y.Length(),b=box2d.b2Abs(l),x=box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_impulse,0<c.ez.z?c.Solve33(y.x,y.y,l,x).SelfNeg():(c=c.Solve22(y.x,y.y,box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_impulse2).SelfNeg(),x.x=c.x,x.y=c.y,x.z=0),c=box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P.Set(x.x,x.y),t.SelfMulSub(n,c),e-=s*(box2d.b2Cross_V2_V2(this.m_rA,c)+x.z),r.SelfMulAdd(a,c),i+=d*(box2d.b2Cross_V2_V2(this.m_rB,c)+x.z);return o.positions[this.m_indexA].a=e,o.positions[this.m_indexB].a=i,p<=box2d.b2_linearSlop&&b<=box2d.b2_angularSlop},goog.exportProperty(box2d.b2WeldJoint.prototype,"SolvePositionConstraints",box2d.b2WeldJoint.prototype.SolvePositionConstraints),box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1=new box2d.b2Vec2,box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2,box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_impulse=new box2d.b2Vec3,box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_impulse2=new box2d.b2Vec2,box2d.b2WeldJoint.prototype.GetAnchorA=function(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)},goog.exportProperty(box2d.b2WeldJoint.prototype,"GetAnchorA",box2d.b2WeldJoint.prototype.GetAnchorA),box2d.b2WeldJoint.prototype.GetAnchorB=function(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)},goog.exportProperty(box2d.b2WeldJoint.prototype,"GetAnchorB",box2d.b2WeldJoint.prototype.GetAnchorB),box2d.b2WeldJoint.prototype.GetReactionForce=function(o,t){return t.Set(o*this.m_impulse.x,o*this.m_impulse.y)},goog.exportProperty(box2d.b2WeldJoint.prototype,"GetReactionForce",box2d.b2WeldJoint.prototype.GetReactionForce),box2d.b2WeldJoint.prototype.GetReactionTorque=function(o){return o*this.m_impulse.z},goog.exportProperty(box2d.b2WeldJoint.prototype,"GetReactionTorque",box2d.b2WeldJoint.prototype.GetReactionTorque),box2d.b2WeldJoint.prototype.GetLocalAnchorA=function(o){return o.Copy(this.m_localAnchorA)},goog.exportProperty(box2d.b2WeldJoint.prototype,"GetLocalAnchorA",box2d.b2WeldJoint.prototype.GetLocalAnchorA),box2d.b2WeldJoint.prototype.GetLocalAnchorB=function(o){return o.Copy(this.m_localAnchorB)},goog.exportProperty(box2d.b2WeldJoint.prototype,"GetLocalAnchorB",box2d.b2WeldJoint.prototype.GetLocalAnchorB),box2d.b2WeldJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle},goog.exportProperty(box2d.b2WeldJoint.prototype,"GetReferenceAngle",box2d.b2WeldJoint.prototype.GetReferenceAngle),box2d.b2WeldJoint.prototype.SetFrequency=function(o){this.m_frequencyHz=o},box2d.b2WeldJoint.prototype.GetFrequency=function(){return this.m_frequencyHz},goog.exportProperty(box2d.b2WeldJoint.prototype,"GetFrequency",box2d.b2WeldJoint.prototype.GetFrequency),box2d.b2WeldJoint.prototype.SetDampingRatio=function(o){this.m_dampingRatio=o},box2d.b2WeldJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio},goog.exportProperty(box2d.b2WeldJoint.prototype,"GetDampingRatio",box2d.b2WeldJoint.prototype.GetDampingRatio),box2d.b2WeldJoint.prototype.Dump=function(){if(box2d.DEBUG){var o=this.m_bodyA.m_islandIndex,t=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2WeldJointDef*/ var jd = new box2d.b2WeldJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",o),box2d.b2Log("  jd.bodyB = bodies[%d];\n",t),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),box2d.b2Log("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),box2d.b2Log("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),box2d.b2Log("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),box2d.b2Log("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}},goog.exportProperty(box2d.b2WeldJoint.prototype,"Dump",box2d.b2WeldJoint.prototype.Dump),box2d.b2WheelJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_wheelJoint),this.localAnchorA=new box2d.b2Vec2(0,0),this.localAnchorB=new box2d.b2Vec2(0,0),this.localAxisA=new box2d.b2Vec2(1,0)},goog.inherits(box2d.b2WheelJointDef,box2d.b2JointDef),goog.exportSymbol("box2d.b2WheelJointDef",box2d.b2WheelJointDef),box2d.b2WheelJointDef.prototype.localAnchorA=null,goog.exportProperty(box2d.b2WheelJointDef.prototype,"localAnchorA",box2d.b2WheelJointDef.prototype.localAnchorA),box2d.b2WheelJointDef.prototype.localAnchorB=null,goog.exportProperty(box2d.b2WheelJointDef.prototype,"localAnchorB",box2d.b2WheelJointDef.prototype.localAnchorB),box2d.b2WheelJointDef.prototype.localAxisA=null,goog.exportProperty(box2d.b2WheelJointDef.prototype,"localAxisA",box2d.b2WheelJointDef.prototype.localAxisA),box2d.b2WheelJointDef.prototype.enableMotor=!1,goog.exportProperty(box2d.b2WheelJointDef.prototype,"enableMotor",box2d.b2WheelJointDef.prototype.enableMotor),box2d.b2WheelJointDef.prototype.maxMotorTorque=0,goog.exportProperty(box2d.b2WheelJointDef.prototype,"maxMotorTorque",box2d.b2WheelJointDef.prototype.maxMotorTorque),box2d.b2WheelJointDef.prototype.motorSpeed=0,goog.exportProperty(box2d.b2WheelJointDef.prototype,"motorSpeed",box2d.b2WheelJointDef.prototype.motorSpeed),box2d.b2WheelJointDef.prototype.frequencyHz=2,goog.exportProperty(box2d.b2WheelJointDef.prototype,"frequencyHz",box2d.b2WheelJointDef.prototype.frequencyHz),box2d.b2WheelJointDef.prototype.dampingRatio=.7,goog.exportProperty(box2d.b2WheelJointDef.prototype,"dampingRatio",box2d.b2WheelJointDef.prototype.dampingRatio),box2d.b2WheelJointDef.prototype.Initialize=function(o,t,e,r){this.bodyA=o,this.bodyB=t,this.bodyA.GetLocalPoint(e,this.localAnchorA),this.bodyB.GetLocalPoint(e,this.localAnchorB),this.bodyA.GetLocalVector(r,this.localAxisA)},goog.exportProperty(box2d.b2WheelJointDef.prototype,"Initialize",box2d.b2WheelJointDef.prototype.Initialize),box2d.b2WheelJoint=function(o){box2d.b2Joint.call(this,o),this.m_frequencyHz=o.frequencyHz,this.m_dampingRatio=o.dampingRatio,this.m_localAnchorA=o.localAnchorA.Clone(),this.m_localAnchorB=o.localAnchorB.Clone(),this.m_localXAxisA=o.localAxisA.Clone(),this.m_localYAxisA=box2d.b2Cross_S_V2(1,this.m_localXAxisA,new box2d.b2Vec2),this.m_maxMotorTorque=o.maxMotorTorque,this.m_motorSpeed=o.motorSpeed,this.m_enableMotor=o.enableMotor,this.m_localCenterA=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_ax=new box2d.b2Vec2,this.m_ay=new box2d.b2Vec2,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2,this.m_rA=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2,this.m_ax.SetZero(),this.m_ay.SetZero()},goog.inherits(box2d.b2WheelJoint,box2d.b2Joint),goog.exportSymbol("box2d.b2WheelJoint",box2d.b2WheelJoint),box2d.b2WheelJoint.prototype.m_frequencyHz=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_frequencyHz",box2d.b2WheelJoint.prototype.m_frequencyHz),box2d.b2WheelJoint.prototype.m_dampingRatio=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_dampingRatio",box2d.b2WheelJoint.prototype.m_dampingRatio),box2d.b2WheelJoint.prototype.m_localAnchorA=null,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localAnchorA",box2d.b2WheelJoint.prototype.m_localAnchorA),box2d.b2WheelJoint.prototype.m_localAnchorB=null,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localAnchorB",box2d.b2WheelJoint.prototype.m_localAnchorB),box2d.b2WheelJoint.prototype.m_localXAxisA=null,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localXAxisA",box2d.b2WheelJoint.prototype.m_localXAxisA),box2d.b2WheelJoint.prototype.m_localYAxisA=null,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localYAxisA",box2d.b2WheelJoint.prototype.m_localYAxisA),box2d.b2WheelJoint.prototype.m_impulse=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_impulse",box2d.b2WheelJoint.prototype.m_impulse),box2d.b2WheelJoint.prototype.m_motorImpulse=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_motorImpulse",box2d.b2WheelJoint.prototype.m_motorImpulse),box2d.b2WheelJoint.prototype.m_springImpulse=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_springImpulse",box2d.b2WheelJoint.prototype.m_springImpulse),box2d.b2WheelJoint.prototype.m_maxMotorTorque=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_maxMotorTorque",box2d.b2WheelJoint.prototype.m_maxMotorTorque),box2d.b2WheelJoint.prototype.m_motorSpeed=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_motorSpeed",box2d.b2WheelJoint.prototype.m_motorSpeed),box2d.b2WheelJoint.prototype.m_enableMotor=!1,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_enableMotor",box2d.b2WheelJoint.prototype.m_enableMotor),box2d.b2WheelJoint.prototype.m_indexA=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_indexA",box2d.b2WheelJoint.prototype.m_indexA),box2d.b2WheelJoint.prototype.m_indexB=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_indexB",box2d.b2WheelJoint.prototype.m_indexB),box2d.b2WheelJoint.prototype.m_localCenterA=null,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localCenterA",box2d.b2WheelJoint.prototype.m_localCenterA),box2d.b2WheelJoint.prototype.m_localCenterB=null,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localCenterB",box2d.b2WheelJoint.prototype.m_localCenterB),box2d.b2WheelJoint.prototype.m_invMassA=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_invMassA",box2d.b2WheelJoint.prototype.m_invMassA),box2d.b2WheelJoint.prototype.m_invMassB=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_invMassB",box2d.b2WheelJoint.prototype.m_invMassB),box2d.b2WheelJoint.prototype.m_invIA=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_invIA",box2d.b2WheelJoint.prototype.m_invIA),box2d.b2WheelJoint.prototype.m_invIB=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_invIB",box2d.b2WheelJoint.prototype.m_invIB),box2d.b2WheelJoint.prototype.m_ax=null,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_ax",box2d.b2WheelJoint.prototype.m_ax),box2d.b2WheelJoint.prototype.m_ay=null,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_ay",box2d.b2WheelJoint.prototype.m_ay),box2d.b2WheelJoint.prototype.m_sAx=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_sAx",box2d.b2WheelJoint.prototype.m_sAx),box2d.b2WheelJoint.prototype.m_sBx=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_sBx",box2d.b2WheelJoint.prototype.m_sBx),box2d.b2WheelJoint.prototype.m_sAy=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_sAy",box2d.b2WheelJoint.prototype.m_sAy),box2d.b2WheelJoint.prototype.m_sBy=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_sBy",box2d.b2WheelJoint.prototype.m_sBy),box2d.b2WheelJoint.prototype.m_mass=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_mass",box2d.b2WheelJoint.prototype.m_mass),box2d.b2WheelJoint.prototype.m_motorMass=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_motorMass",box2d.b2WheelJoint.prototype.m_motorMass),box2d.b2WheelJoint.prototype.m_springMass=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_springMass",box2d.b2WheelJoint.prototype.m_springMass),box2d.b2WheelJoint.prototype.m_bias=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_bias",box2d.b2WheelJoint.prototype.m_bias),box2d.b2WheelJoint.prototype.m_gamma=0,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_gamma",box2d.b2WheelJoint.prototype.m_gamma),box2d.b2WheelJoint.prototype.m_qA=null,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_qA",box2d.b2WheelJoint.prototype.m_qA),box2d.b2WheelJoint.prototype.m_qB=null,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_qB",box2d.b2WheelJoint.prototype.m_qB),box2d.b2WheelJoint.prototype.m_lalcA=null,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_lalcA",box2d.b2WheelJoint.prototype.m_lalcA),box2d.b2WheelJoint.prototype.m_lalcB=null,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_lalcB",box2d.b2WheelJoint.prototype.m_lalcB),box2d.b2WheelJoint.prototype.m_rA=null,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_rA",box2d.b2WheelJoint.prototype.m_rA),box2d.b2WheelJoint.prototype.m_rB=null,goog.exportProperty(box2d.b2WheelJoint.prototype,"m_rB",box2d.b2WheelJoint.prototype.m_rB),box2d.b2WheelJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},goog.exportProperty(box2d.b2WheelJoint.prototype,"GetMotorSpeed",box2d.b2WheelJoint.prototype.GetMotorSpeed),box2d.b2WheelJoint.prototype.GetMaxMotorTorque=function(){return this.m_maxMotorTorque},goog.exportProperty(box2d.b2WheelJoint.prototype,"GetMaxMotorTorque",box2d.b2WheelJoint.prototype.GetMaxMotorTorque),box2d.b2WheelJoint.prototype.SetSpringFrequencyHz=function(o){this.m_frequencyHz=o},goog.exportProperty(box2d.b2WheelJoint.prototype,"SetSpringFrequencyHz",box2d.b2WheelJoint.prototype.SetSpringFrequencyHz),box2d.b2WheelJoint.prototype.GetSpringFrequencyHz=function(){return this.m_frequencyHz},goog.exportProperty(box2d.b2WheelJoint.prototype,"GetSpringFrequencyHz",box2d.b2WheelJoint.prototype.GetSpringFrequencyHz),box2d.b2WheelJoint.prototype.SetSpringDampingRatio=function(o){this.m_dampingRatio=o},goog.exportProperty(box2d.b2WheelJoint.prototype,"SetSpringDampingRatio",box2d.b2WheelJoint.prototype.SetSpringDampingRatio),box2d.b2WheelJoint.prototype.GetSpringDampingRatio=function(){return this.m_dampingRatio},goog.exportProperty(box2d.b2WheelJoint.prototype,"GetSpringDampingRatio",box2d.b2WheelJoint.prototype.GetSpringDampingRatio),box2d.b2WheelJoint.prototype.InitVelocityConstraints=function(o){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var t=this.m_invMassA,e=this.m_invMassB,r=this.m_invIA,i=this.m_invIB,b=o.positions[this.m_indexA].c,p=o.velocities[this.m_indexA].v,n=o.velocities[this.m_indexA].w,a=o.positions[this.m_indexB].c,s=o.positions[this.m_indexB].a,d=o.velocities[this.m_indexB].v,x=o.velocities[this.m_indexB].w,l=this.m_qA.SetAngle(o.positions[this.m_indexA].a),y=this.m_qB.SetAngle(s);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),s=box2d.b2Mul_R_V2(l,this.m_lalcA,this.m_rA),box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),y=box2d.b2Mul_R_V2(y,this.m_lalcB,this.m_rB),b=box2d.b2Sub_V2_V2(box2d.b2Add_V2_V2(a,y,box2d.b2Vec2.s_t0),box2d.b2Add_V2_V2(b,s,box2d.b2Vec2.s_t1),box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_d),box2d.b2Mul_R_V2(l,this.m_localYAxisA,this.m_ay),this.m_sAy=box2d.b2Cross_V2_V2(box2d.b2Add_V2_V2(b,s,box2d.b2Vec2.s_t0),this.m_ay),this.m_sBy=box2d.b2Cross_V2_V2(y,this.m_ay),this.m_mass=t+e+r*this.m_sAy*this.m_sAy+i*this.m_sBy*this.m_sBy,0<this.m_mass&&(this.m_mass=1/this.m_mass),this.m_gamma=this.m_bias=this.m_springMass=0,0<this.m_frequencyHz?(box2d.b2Mul_R_V2(l,this.m_localXAxisA,this.m_ax),this.m_sAx=box2d.b2Cross_V2_V2(box2d.b2Add_V2_V2(b,s,box2d.b2Vec2.s_t0),this.m_ax),this.m_sBx=box2d.b2Cross_V2_V2(y,this.m_ax),0<(t=t+e+r*this.m_sAx*this.m_sAx+i*this.m_sBx*this.m_sBx)&&(this.m_springMass=1/t,e=box2d.b2Dot_V2_V2(b,this.m_ax),l=2*box2d.b2_pi*this.m_frequencyHz,b=this.m_springMass*l*l,a=o.step.dt,this.m_gamma=a*(2*this.m_springMass*this.m_dampingRatio*l+a*b),0<this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_bias=e*a*b*this.m_gamma,this.m_springMass=t+this.m_gamma,0<this.m_springMass&&(this.m_springMass=1/this.m_springMass))):this.m_springImpulse=0,this.m_enableMotor?(this.m_motorMass=r+i,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass)):this.m_motorImpulse=this.m_motorMass=0,o.step.warmStarting?(this.m_impulse*=o.step.dtRatio,this.m_springImpulse*=o.step.dtRatio,this.m_motorImpulse*=o.step.dtRatio,r=box2d.b2Add_V2_V2(box2d.b2Mul_S_V2(this.m_impulse,this.m_ay,box2d.b2Vec2.s_t0),box2d.b2Mul_S_V2(this.m_springImpulse,this.m_ax,box2d.b2Vec2.s_t1),box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_P),i=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,t=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse,p.SelfMulSub(this.m_invMassA,r),n-=this.m_invIA*i,d.SelfMulAdd(this.m_invMassB,r),x+=this.m_invIB*t):this.m_motorImpulse=this.m_springImpulse=this.m_impulse=0,o.velocities[this.m_indexA].w=n,o.velocities[this.m_indexB].w=x},goog.exportProperty(box2d.b2WheelJoint.prototype,"InitVelocityConstraints",box2d.b2WheelJoint.prototype.InitVelocityConstraints),box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_d=new box2d.b2Vec2,box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2WheelJoint.prototype.SolveVelocityConstraints=function(o){var t=this.m_invMassA,e=this.m_invMassB,r=this.m_invIA,i=this.m_invIB,b=o.velocities[this.m_indexA].v,p=o.velocities[this.m_indexA].w,n=o.velocities[this.m_indexB].v,a=o.velocities[this.m_indexB].w,s=box2d.b2Dot_V2_V2(this.m_ax,box2d.b2Sub_V2_V2(n,b,box2d.b2Vec2.s_t0))+this.m_sBx*a-this.m_sAx*p;s=-this.m_springMass*(s+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=s;var d=box2d.b2Mul_S_V2(s,this.m_ax,box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P),x=s*this.m_sAx;s*=this.m_sBx;b.SelfMulSub(t,d),p-=r*x,n.SelfMulAdd(e,d),s=(a+=i*s)-p-this.m_motorSpeed,s*=-this.m_motorMass,d=this.m_motorImpulse,x=o.step.dt*this.m_maxMotorTorque,this.m_motorImpulse=box2d.b2Clamp(this.m_motorImpulse+s,-x,x),p-=r*(s=this.m_motorImpulse-d),a+=i*s,s=box2d.b2Dot_V2_V2(this.m_ay,box2d.b2Sub_V2_V2(n,b,box2d.b2Vec2.s_t0))+this.m_sBy*a-this.m_sAy*p,s*=-this.m_mass,this.m_impulse+=s,d=box2d.b2Mul_S_V2(s,this.m_ay,box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P),x=s*this.m_sAy,s*=this.m_sBy,b.SelfMulSub(t,d),p-=r*x,n.SelfMulAdd(e,d),o.velocities[this.m_indexA].w=p,o.velocities[this.m_indexB].w=a+i*s},goog.exportProperty(box2d.b2WheelJoint.prototype,"SolveVelocityConstraints",box2d.b2WheelJoint.prototype.SolveVelocityConstraints),box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2WheelJoint.prototype.SolvePositionConstraints=function(o){var t=o.positions[this.m_indexA].c,e=o.positions[this.m_indexA].a,r=o.positions[this.m_indexB].c,i=o.positions[this.m_indexB].a,b=this.m_qA.SetAngle(e),p=this.m_qB.SetAngle(i);box2d.b2Sub_V2_V2(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);var n=box2d.b2Mul_R_V2(b,this.m_lalcA,this.m_rA);box2d.b2Sub_V2_V2(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);p=box2d.b2Mul_R_V2(p,this.m_lalcB,this.m_rB);var a=box2d.b2Add_V2_V2(box2d.b2Sub_V2_V2(r,t,box2d.b2Vec2.s_t0),box2d.b2Sub_V2_V2(p,n,box2d.b2Vec2.s_t1),box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_d),s=(b=box2d.b2Mul_R_V2(b,this.m_localYAxisA,this.m_ay),n=box2d.b2Cross_V2_V2(box2d.b2Add_V2_V2(a,n,box2d.b2Vec2.s_t0),b),p=box2d.b2Cross_V2_V2(p,b),a=box2d.b2Dot_V2_V2(a,this.m_ay),0!==(s=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy)?-a/s:0);b=box2d.b2Mul_S_V2(s,b,box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_P),n*=s,p*=s;return t.SelfMulSub(this.m_invMassA,b),e-=this.m_invIA*n,r.SelfMulAdd(this.m_invMassB,b),i+=this.m_invIB*p,o.positions[this.m_indexA].a=e,o.positions[this.m_indexB].a=i,box2d.b2Abs(a)<=box2d.b2_linearSlop},goog.exportProperty(box2d.b2WheelJoint.prototype,"SolvePositionConstraints",box2d.b2WheelJoint.prototype.SolvePositionConstraints),box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_d=new box2d.b2Vec2,box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2,box2d.b2WheelJoint.prototype.GetDefinition=function(o){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),o},goog.exportProperty(box2d.b2WheelJoint.prototype,"GetDefinition",box2d.b2WheelJoint.prototype.GetDefinition),box2d.b2WheelJoint.prototype.GetAnchorA=function(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)},goog.exportProperty(box2d.b2WheelJoint.prototype,"GetAnchorA",box2d.b2WheelJoint.prototype.GetAnchorA),box2d.b2WheelJoint.prototype.GetAnchorB=function(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)},goog.exportProperty(box2d.b2WheelJoint.prototype,"GetAnchorB",box2d.b2WheelJoint.prototype.GetAnchorB),box2d.b2WheelJoint.prototype.GetReactionForce=function(o,t){return t.x=o*(this.m_impulse*this.m_ay.x+this.m_springImpulse*this.m_ax.x),t.y=o*(this.m_impulse*this.m_ay.y+this.m_springImpulse*this.m_ax.y),t},goog.exportProperty(box2d.b2WheelJoint.prototype,"GetReactionForce",box2d.b2WheelJoint.prototype.GetReactionForce),box2d.b2WheelJoint.prototype.GetReactionTorque=function(o){return o*this.m_motorImpulse},goog.exportProperty(box2d.b2WheelJoint.prototype,"GetReactionTorque",box2d.b2WheelJoint.prototype.GetReactionTorque),box2d.b2WheelJoint.prototype.GetLocalAnchorA=function(o){return o.Copy(this.m_localAnchorA)},goog.exportProperty(box2d.b2WheelJoint.prototype,"GetLocalAnchorA",box2d.b2WheelJoint.prototype.GetLocalAnchorA),box2d.b2WheelJoint.prototype.GetLocalAnchorB=function(o){return o.Copy(this.m_localAnchorB)},goog.exportProperty(box2d.b2WheelJoint.prototype,"GetLocalAnchorB",box2d.b2WheelJoint.prototype.GetLocalAnchorB),box2d.b2WheelJoint.prototype.GetLocalAxisA=function(o){return o.Copy(this.m_localXAxisA)},goog.exportProperty(box2d.b2WheelJoint.prototype,"GetLocalAxisA",box2d.b2WheelJoint.prototype.GetLocalAxisA),box2d.b2WheelJoint.prototype.GetJointTranslation=function(){var o=this.m_bodyA,t=this.m_bodyB,e=o.GetWorldPoint(this.m_localAnchorA,new box2d.b2Vec2);t=t.GetWorldPoint(this.m_localAnchorB,new box2d.b2Vec2),e=box2d.b2Sub_V2_V2(t,e,new box2d.b2Vec2),o=o.GetWorldVector(this.m_localXAxisA,new box2d.b2Vec2);return box2d.b2Dot_V2_V2(e,o)},goog.exportProperty(box2d.b2WheelJoint.prototype,"GetJointTranslation",box2d.b2WheelJoint.prototype.GetJointTranslation),box2d.b2WheelJoint.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},goog.exportProperty(box2d.b2WheelJoint.prototype,"GetJointSpeed",box2d.b2WheelJoint.prototype.GetJointSpeed),box2d.b2WheelJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor},goog.exportProperty(box2d.b2WheelJoint.prototype,"IsMotorEnabled",box2d.b2WheelJoint.prototype.IsMotorEnabled),box2d.b2WheelJoint.prototype.EnableMotor=function(o){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=o},goog.exportProperty(box2d.b2WheelJoint.prototype,"EnableMotor",box2d.b2WheelJoint.prototype.EnableMotor),box2d.b2WheelJoint.prototype.SetMotorSpeed=function(o){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=o},goog.exportProperty(box2d.b2WheelJoint.prototype,"SetMotorSpeed",box2d.b2WheelJoint.prototype.SetMotorSpeed),box2d.b2WheelJoint.prototype.SetMaxMotorTorque=function(o){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=o},goog.exportProperty(box2d.b2WheelJoint.prototype,"SetMaxMotorTorque",box2d.b2WheelJoint.prototype.SetMaxMotorTorque),box2d.b2WheelJoint.prototype.GetMotorTorque=function(o){return o*this.m_motorImpulse},goog.exportProperty(box2d.b2WheelJoint.prototype,"GetMotorTorque",box2d.b2WheelJoint.prototype.GetMotorTorque),box2d.b2WheelJoint.prototype.Dump=function(){if(box2d.DEBUG){var o=this.m_bodyA.m_islandIndex,t=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2WheelJointDef*/ var jd = new box2d.b2WheelJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",o),box2d.b2Log("  jd.bodyB = bodies[%d];\n",t),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),box2d.b2Log("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),box2d.b2Log("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),box2d.b2Log("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),box2d.b2Log("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),box2d.b2Log("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),box2d.b2Log("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),box2d.b2Log("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}},goog.exportProperty(box2d.b2WheelJoint.prototype,"Dump",box2d.b2WheelJoint.prototype.Dump),box2d.b2Particle={},box2d.b2ParticleFlag={b2_waterParticle:0,b2_zombieParticle:2,b2_wallParticle:4,b2_springParticle:8,b2_elasticParticle:16,b2_viscousParticle:32,b2_powderParticle:64,b2_tensileParticle:128,b2_colorMixingParticle:256,b2_destructionListenerParticle:512,b2_barrierParticle:1024,b2_staticPressureParticle:2048,b2_reactiveParticle:4096,b2_repulsiveParticle:8192,b2_fixtureContactListenerParticle:16384,b2_particleContactListenerParticle:32768,b2_fixtureContactFilterParticle:65536,b2_particleContactFilterParticle:131072},goog.exportSymbol("box2d.b2ParticleFlag",box2d.b2ParticleFlag),goog.exportProperty(box2d.b2ParticleFlag,"b2_waterParticle",box2d.b2ParticleFlag.b2_waterParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_zombieParticle",box2d.b2ParticleFlag.b2_zombieParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_wallParticle",box2d.b2ParticleFlag.b2_wallParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_springParticle",box2d.b2ParticleFlag.b2_springParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_elasticParticle",box2d.b2ParticleFlag.b2_elasticParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_viscousParticle",box2d.b2ParticleFlag.b2_viscousParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_powderParticle",box2d.b2ParticleFlag.b2_powderParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_tensileParticle",box2d.b2ParticleFlag.b2_tensileParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_colorMixingParticle",box2d.b2ParticleFlag.b2_colorMixingParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_destructionListenerParticle",box2d.b2ParticleFlag.b2_destructionListenerParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_barrierParticle",box2d.b2ParticleFlag.b2_barrierParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_staticPressureParticle",box2d.b2ParticleFlag.b2_staticPressureParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_reactiveParticle",box2d.b2ParticleFlag.b2_reactiveParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_repulsiveParticle",box2d.b2ParticleFlag.b2_repulsiveParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_fixtureContactListenerParticle",box2d.b2ParticleFlag.b2_fixtureContactListenerParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_particleContactListenerParticle",box2d.b2ParticleFlag.b2_particleContactListenerParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_fixtureContactFilterParticle",box2d.b2ParticleFlag.b2_fixtureContactFilterParticle),goog.exportProperty(box2d.b2ParticleFlag,"b2_particleContactFilterParticle",box2d.b2ParticleFlag.b2_particleContactFilterParticle),box2d.b2ParticleColor=function(o,t,e,r){if(0!==arguments.length)if(o instanceof box2d.b2Color)this.r=0|255*o.r,this.g=0|255*o.g,this.b=0|255*o.b,this.a=0|255*o.a;else{if(!(3<=arguments.length))throw Error();this.r=0|o||0,this.g=0|t||0,this.b=0|e||0,this.a=0|r||0}},goog.exportSymbol("box2d.b2ParticleColor",box2d.b2ParticleColor),box2d.b2ParticleColor.prototype.r=0,goog.exportProperty(box2d.b2ParticleColor.prototype,"r",box2d.b2ParticleColor.prototype.r),box2d.b2ParticleColor.prototype.g=0,goog.exportProperty(box2d.b2ParticleColor.prototype,"g",box2d.b2ParticleColor.prototype.g),box2d.b2ParticleColor.prototype.b=0,goog.exportProperty(box2d.b2ParticleColor.prototype,"b",box2d.b2ParticleColor.prototype.b),box2d.b2ParticleColor.prototype.a=0,goog.exportProperty(box2d.b2ParticleColor.prototype,"a",box2d.b2ParticleColor.prototype.a),box2d.b2ParticleColor.prototype.IsZero=function(){return 0===this.r&&0===this.g&&0===this.b&&0===this.a},goog.exportProperty(box2d.b2ParticleColor.prototype,"IsZero",box2d.b2ParticleColor.prototype.IsZero),box2d.b2ParticleColor.prototype.GetColor=function(o){return o.r=this.r/255,o.g=this.g/255,o.b=this.b/255,o.a=this.a/255,o},goog.exportProperty(box2d.b2ParticleColor.prototype,"GetColor",box2d.b2ParticleColor.prototype.GetColor),box2d.b2ParticleColor.prototype.Set=function(o,t,e,r){if(o instanceof box2d.b2Color)this.SetColor(o);else{if(!(3<=arguments.length))throw Error();this.SetRGBA(o||0,t||0,e||0,r)}},goog.exportProperty(box2d.b2ParticleColor.prototype,"Set",box2d.b2ParticleColor.prototype.Set),box2d.b2ParticleColor.prototype.SetRGBA=function(o,t,e,r){this.r=o,this.g=t,this.b=e,this.a="number"==typeof r?r:255},goog.exportProperty(box2d.b2ParticleColor.prototype,"SetRGBA",box2d.b2ParticleColor.prototype.SetRGBA),box2d.b2ParticleColor.prototype.SetColor=function(o){this.r=255*o.r,this.g=255*o.g,this.b=255*o.b,this.a=255*o.a},goog.exportProperty(box2d.b2ParticleColor.prototype,"SetColor",box2d.b2ParticleColor.prototype.SetColor),box2d.b2ParticleColor.prototype.Copy=function(o){return this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this},goog.exportProperty(box2d.b2ParticleColor.prototype,"Copy",box2d.b2ParticleColor.prototype.Copy),box2d.b2ParticleColor.prototype.Clone=function(){return new box2d.b2ParticleColor(this.r,this.g,this.b,this.a)},box2d.b2ParticleColor.prototype.SelfMul_0_1=function(o){return this.r*=o,this.g*=o,this.b*=o,this.a*=o,this},goog.exportProperty(box2d.b2ParticleColor.prototype,"SelfMul_0_1",box2d.b2ParticleColor.prototype.SelfMul_0_1),box2d.b2ParticleColor.prototype.SelfMul_0_255=function(o){return o+=1,this.r=this.r*o>>box2d.b2ParticleColor.k_bitsPerComponent,this.g=this.g*o>>box2d.b2ParticleColor.k_bitsPerComponent,this.b=this.b*o>>box2d.b2ParticleColor.k_bitsPerComponent,this.a=this.a*o>>box2d.b2ParticleColor.k_bitsPerComponent,this},goog.exportProperty(box2d.b2ParticleColor.prototype,"SelfMul_0_255",box2d.b2ParticleColor.prototype.SelfMul_0_255),box2d.b2ParticleColor.prototype.Mul_0_1=function(o,t){return t.Copy(this).SelfMul_0_1(o)},goog.exportProperty(box2d.b2ParticleColor.prototype,"Mul_0_1",box2d.b2ParticleColor.prototype.Mul_0_1),box2d.b2ParticleColor.prototype.Mul_0_255=function(o,t){return t.Copy(this).SelfMul_0_255(o)},goog.exportProperty(box2d.b2ParticleColor.prototype,"Mul_0_255",box2d.b2ParticleColor.prototype.Mul_0_255),box2d.b2ParticleColor.prototype.SelfAdd=function(o){return this.r+=o.r,this.g+=o.g,this.b+=o.b,this.a+=o.a,this},goog.exportProperty(box2d.b2ParticleColor.prototype,"SelfAdd",box2d.b2ParticleColor.prototype.SelfAdd),box2d.b2ParticleColor.prototype.Add=function(o,t){return t.r=this.r+o.r,t.g=this.g+o.g,t.b=this.b+o.b,t.a=this.a+o.a,t},goog.exportProperty(box2d.b2ParticleColor.prototype,"Add",box2d.b2ParticleColor.prototype.Add),box2d.b2ParticleColor.prototype.SelfSub=function(o){return this.r-=o.r,this.g-=o.g,this.b-=o.b,this.a-=o.a,this},goog.exportProperty(box2d.b2ParticleColor.prototype,"SelfSub",box2d.b2ParticleColor.prototype.SelfSub),box2d.b2ParticleColor.prototype.Sub=function(o,t){return t.r=this.r-o.r,t.g=this.g-o.g,t.b=this.b-o.b,t.a=this.a-o.a,t},goog.exportProperty(box2d.b2ParticleColor.prototype,"Sub",box2d.b2ParticleColor.prototype.Sub),box2d.b2ParticleColor.prototype.IsEqual=function(o){return this.r===o.r&&this.g===o.g&&this.b===o.b&&this.a===o.a},goog.exportProperty(box2d.b2ParticleColor.prototype,"IsEqual",box2d.b2ParticleColor.prototype.IsEqual),box2d.b2ParticleColor.prototype.Mix=function(o,t){box2d.b2ParticleColor.MixColors(this,o,t)},goog.exportProperty(box2d.b2ParticleColor.prototype,"Mix",box2d.b2ParticleColor.prototype.Mix),box2d.b2ParticleColor.MixColors=function(o,t,e){var r=e*(t.r-o.r)>>box2d.b2ParticleColor.k_bitsPerComponent,i=e*(t.g-o.g)>>box2d.b2ParticleColor.k_bitsPerComponent,b=e*(t.b-o.b)>>box2d.b2ParticleColor.k_bitsPerComponent;e=e*(t.a-o.a)>>box2d.b2ParticleColor.k_bitsPerComponent,o.r+=r,o.g+=i,o.b+=b,o.a+=e,t.r-=r,t.g-=i,t.b-=b,t.a-=e},goog.exportProperty(box2d.b2ParticleColor,"MixColors",box2d.b2ParticleColor.MixColors),box2d.B2PARTICLECOLOR_BITS_PER_COMPONENT=8,box2d.B2PARTICLECOLOR_MAX_VALUE=(1<<box2d.B2PARTICLECOLOR_BITS_PER_COMPONENT)-1,box2d.b2ParticleColor.k_maxValue=+box2d.B2PARTICLECOLOR_MAX_VALUE,goog.exportProperty(box2d.b2ParticleColor,"k_maxValue",box2d.b2ParticleColor.k_maxValue),box2d.b2ParticleColor.k_inverseMaxValue=1/+box2d.B2PARTICLECOLOR_MAX_VALUE,goog.exportProperty(box2d.b2ParticleColor,"k_inverseMaxValue",box2d.b2ParticleColor.k_inverseMaxValue),box2d.b2ParticleColor.k_bitsPerComponent=box2d.B2PARTICLECOLOR_BITS_PER_COMPONENT,goog.exportProperty(box2d.b2ParticleColor,"k_bitsPerComponent",box2d.b2ParticleColor.k_bitsPerComponent),box2d.b2ParticleColor_zero=new box2d.b2ParticleColor,box2d.b2ParticleDef=function(){this.position=box2d.b2Vec2_zero.Clone(),this.velocity=box2d.b2Vec2_zero.Clone(),this.color=box2d.b2ParticleColor_zero.Clone()},goog.exportSymbol("box2d.b2ParticleDef",box2d.b2ParticleDef),box2d.b2ParticleDef.prototype.flags=0,goog.exportProperty(box2d.b2ParticleDef.prototype,"flags",box2d.b2ParticleDef.prototype.flags),box2d.b2ParticleDef.prototype.position=null,goog.exportProperty(box2d.b2ParticleDef.prototype,"position",box2d.b2ParticleDef.prototype.position),box2d.b2ParticleDef.prototype.velocity=null,goog.exportProperty(box2d.b2ParticleDef.prototype,"velocity",box2d.b2ParticleDef.prototype.velocity),box2d.b2ParticleDef.prototype.color=null,goog.exportProperty(box2d.b2ParticleDef.prototype,"color",box2d.b2ParticleDef.prototype.color),box2d.b2ParticleDef.prototype.lifetime=0,goog.exportProperty(box2d.b2ParticleDef.prototype,"lifetime",box2d.b2ParticleDef.prototype.lifetime),box2d.b2ParticleDef.prototype.userData=null,goog.exportProperty(box2d.b2ParticleDef.prototype,"userData",box2d.b2ParticleDef.prototype.userData),box2d.b2ParticleDef.prototype.group=null,goog.exportProperty(box2d.b2ParticleDef.prototype,"group",box2d.b2ParticleDef.prototype.group),box2d.b2CalculateParticleIterations=function(o,t,e){return o=Math.ceil(Math.sqrt(o/(.01*t))*e),box2d.b2Clamp(o,1,8)},goog.exportSymbol("box2d.b2CalculateParticleIterations",box2d.b2CalculateParticleIterations),box2d.b2ParticleHandle=function(){},goog.exportSymbol("box2d.b2ParticleHandle",box2d.b2ParticleHandle),box2d.b2ParticleHandle.prototype.m_index=box2d.b2_invalidParticleIndex,box2d.b2ParticleHandle.prototype.GetIndex=function(){return this.m_index},goog.exportProperty(box2d.b2ParticleHandle.prototype,"GetIndex",box2d.b2ParticleHandle.prototype.GetIndex),box2d.b2ParticleHandle.prototype.SetIndex=function(o){this.m_index=o},box2d.b2ParticleGroupFlag={b2_solidParticleGroup:1,b2_rigidParticleGroup:2,b2_particleGroupCanBeEmpty:4,b2_particleGroupWillBeDestroyed:8,b2_particleGroupNeedsUpdateDepth:16},goog.exportSymbol("box2d.b2ParticleGroupFlag",box2d.b2ParticleGroupFlag),goog.exportProperty(box2d.b2ParticleGroupFlag,"b2_solidParticleGroup",box2d.b2ParticleGroupFlag.b2_solidParticleGroup),goog.exportProperty(box2d.b2ParticleGroupFlag,"b2_rigidParticleGroup",box2d.b2ParticleGroupFlag.b2_rigidParticleGroup),goog.exportProperty(box2d.b2ParticleGroupFlag,"b2_particleGroupCanBeEmpty",box2d.b2ParticleGroupFlag.b2_particleGroupCanBeEmpty),goog.exportProperty(box2d.b2ParticleGroupFlag,"b2_particleGroupWillBeDestroyed",box2d.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed),goog.exportProperty(box2d.b2ParticleGroupFlag,"b2_particleGroupNeedsUpdateDepth",box2d.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth),box2d.b2ParticleGroupFlag.b2_particleGroupInternalMask=box2d.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed|box2d.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth,box2d.b2ParticleGroupDef=function(){this.position=box2d.b2Vec2_zero.Clone(),this.linearVelocity=box2d.b2Vec2_zero.Clone(),this.color=box2d.b2ParticleColor_zero.Clone()},goog.exportSymbol("box2d.b2ParticleGroupDef",box2d.b2ParticleGroupDef),box2d.b2ParticleGroupDef.prototype.flags=0,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"flags",box2d.b2ParticleGroupDef.prototype.flags),box2d.b2ParticleGroupDef.prototype.groupFlags=0,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"groupFlags",box2d.b2ParticleGroupDef.prototype.groupFlags),box2d.b2ParticleGroupDef.prototype.position=null,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"position",box2d.b2ParticleGroupDef.prototype.position),box2d.b2ParticleGroupDef.prototype.angle=0,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"angle",box2d.b2ParticleGroupDef.prototype.angle),box2d.b2ParticleGroupDef.prototype.linearVelocity=null,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"linearVelocity",box2d.b2ParticleGroupDef.prototype.linearVelocity),box2d.b2ParticleGroupDef.prototype.angularVelocity=0,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"angularVelocity",box2d.b2ParticleGroupDef.prototype.angularVelocity),box2d.b2ParticleGroupDef.prototype.color=null,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"color",box2d.b2ParticleGroupDef.prototype.color),box2d.b2ParticleGroupDef.prototype.strength=1,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"strength",box2d.b2ParticleGroupDef.prototype.strength),box2d.b2ParticleGroupDef.prototype.shape=null,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"shape",box2d.b2ParticleGroupDef.prototype.shape),box2d.b2ParticleGroupDef.prototype.shapes=null,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"shapes",box2d.b2ParticleGroupDef.prototype.shapes),box2d.b2ParticleGroupDef.prototype.shapeCount=0,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"shapeCount",box2d.b2ParticleGroupDef.prototype.shapeCount),box2d.b2ParticleGroupDef.prototype.stride=0,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"stride",box2d.b2ParticleGroupDef.prototype.stride),box2d.b2ParticleGroupDef.prototype.particleCount=0,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"particleCount",box2d.b2ParticleGroupDef.prototype.particleCount),box2d.b2ParticleGroupDef.prototype.positionData=null,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"positionData",box2d.b2ParticleGroupDef.prototype.positionData),box2d.b2ParticleGroupDef.prototype.lifetime=0,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"lifetime",box2d.b2ParticleGroupDef.prototype.lifetime),box2d.b2ParticleGroupDef.prototype.userData=null,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"userData",box2d.b2ParticleGroupDef.prototype.userData),box2d.b2ParticleGroupDef.prototype.group=null,goog.exportProperty(box2d.b2ParticleGroupDef.prototype,"group",box2d.b2ParticleGroupDef.prototype.group),box2d.b2ParticleGroup=function(){this.m_center=new box2d.b2Vec2,this.m_linearVelocity=new box2d.b2Vec2,this.m_transform=new box2d.b2Transform,this.m_transform.SetIdentity()},goog.exportSymbol("box2d.b2ParticleGroup",box2d.b2ParticleGroup),box2d.b2ParticleGroup.prototype.m_system=null,box2d.b2ParticleGroup.prototype.m_firstIndex=0,box2d.b2ParticleGroup.prototype.m_lastIndex=0,box2d.b2ParticleGroup.prototype.m_groupFlags=0,box2d.b2ParticleGroup.prototype.m_strength=1,box2d.b2ParticleGroup.prototype.m_prev=null,box2d.b2ParticleGroup.prototype.m_next=null,box2d.b2ParticleGroup.prototype.m_timestamp=-1,box2d.b2ParticleGroup.prototype.m_mass=0,box2d.b2ParticleGroup.prototype.m_inertia=0,box2d.b2ParticleGroup.prototype.m_center=null,box2d.b2ParticleGroup.prototype.m_linearVelocity=null,box2d.b2ParticleGroup.prototype.m_angularVelocity=0,box2d.b2ParticleGroup.prototype.m_transform=null,box2d.b2ParticleGroup.prototype.m_userData=null,box2d.b2ParticleGroup.prototype.GetNext=function(){return this.m_next},goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetNext",box2d.b2ParticleGroup.prototype.GetNext),box2d.b2ParticleGroup.prototype.GetParticleSystem=function(){return this.m_system},goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetParticleSystem",box2d.b2ParticleGroup.prototype.GetParticleSystem),box2d.b2ParticleGroup.prototype.GetParticleCount=function(){return this.m_lastIndex-this.m_firstIndex},goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetParticleCount",box2d.b2ParticleGroup.prototype.GetParticleCount),box2d.b2ParticleGroup.prototype.GetBufferIndex=function(){return this.m_firstIndex},goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetBufferIndex",box2d.b2ParticleGroup.prototype.GetBufferIndex),box2d.b2ParticleGroup.prototype.ContainsParticle=function(o){return this.m_firstIndex<=o&&o<this.m_lastIndex},box2d.b2ParticleGroup.prototype.GetAllParticleFlags=function(){for(var o=0,t=this.m_firstIndex;t<this.m_lastIndex;t++)o|=this.m_system.m_flagsBuffer.data[t];return o},goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetAllParticleFlags",box2d.b2ParticleGroup.prototype.GetAllParticleFlags),box2d.b2ParticleGroup.prototype.GetGroupFlags=function(){return this.m_groupFlags},goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetGroupFlags",box2d.b2ParticleGroup.prototype.GetGroupFlags),box2d.b2ParticleGroup.prototype.SetGroupFlags=function(o){box2d.b2Assert(0==(o&box2d.b2ParticleGroupFlag.b2_particleGroupInternalMask)),o|=this.m_groupFlags&box2d.b2ParticleGroupFlag.b2_particleGroupInternalMask,this.m_system.SetGroupFlags(this,o)},goog.exportProperty(box2d.b2ParticleGroup.prototype,"SetGroupFlags",box2d.b2ParticleGroup.prototype.SetGroupFlags),box2d.b2ParticleGroup.prototype.GetMass=function(){return this.UpdateStatistics(),this.m_mass},goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetMass",box2d.b2ParticleGroup.prototype.GetMass),box2d.b2ParticleGroup.prototype.GetInertia=function(){return this.UpdateStatistics(),this.m_inertia},goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetInertia",box2d.b2ParticleGroup.prototype.GetInertia),box2d.b2ParticleGroup.prototype.GetCenter=function(){return this.UpdateStatistics(),this.m_center},goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetCenter",box2d.b2ParticleGroup.prototype.GetCenter),box2d.b2ParticleGroup.prototype.GetLinearVelocity=function(){return this.UpdateStatistics(),this.m_linearVelocity},goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetLinearVelocity",box2d.b2ParticleGroup.prototype.GetLinearVelocity),box2d.b2ParticleGroup.prototype.GetAngularVelocity=function(){return this.UpdateStatistics(),this.m_angularVelocity},goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetAngularVelocity",box2d.b2ParticleGroup.prototype.GetAngularVelocity),box2d.b2ParticleGroup.prototype.GetTransform=function(){return this.m_transform},goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetTransform",box2d.b2ParticleGroup.prototype.GetTransform),box2d.b2ParticleGroup.prototype.GetPosition=function(){return this.m_transform.p},goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetPosition",box2d.b2ParticleGroup.prototype.GetPosition),box2d.b2ParticleGroup.prototype.GetAngle=function(){return this.m_transform.q.GetAngle()},goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetAngle",box2d.b2ParticleGroup.prototype.GetAngle),box2d.b2ParticleGroup.prototype.GetLinearVelocityFromWorldPoint=function(o,t){var e=box2d.b2ParticleGroup.prototype.GetLinearVelocityFromWorldPoint.s_t0;return this.UpdateStatistics(),box2d.b2AddCross_V2_S_V2(this.m_linearVelocity,this.m_angularVelocity,box2d.b2Sub_V2_V2(o,this.m_center,e),t)},goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetLinearVelocityFromWorldPoint",box2d.b2ParticleGroup.prototype.GetLinearVelocityFromWorldPoint),box2d.b2ParticleGroup.prototype.GetLinearVelocityFromWorldPoint.s_t0=new box2d.b2Vec2,box2d.b2ParticleGroup.prototype.GetUserData=function(){return this.m_userData},goog.exportProperty(box2d.b2ParticleGroup.prototype,"GetUserData",box2d.b2ParticleGroup.prototype.GetUserData),box2d.b2ParticleGroup.prototype.SetUserData=function(o){this.m_userData=o},goog.exportProperty(box2d.b2ParticleGroup.prototype,"SetUserData",box2d.b2ParticleGroup.prototype.SetUserData),box2d.b2ParticleGroup.prototype.ApplyForce=function(o){this.m_system.ApplyForce(this.m_firstIndex,this.m_lastIndex,o)},goog.exportProperty(box2d.b2ParticleGroup.prototype,"ApplyForce",box2d.b2ParticleGroup.prototype.ApplyForce),box2d.b2ParticleGroup.prototype.ApplyLinearImpulse=function(o){this.m_system.ApplyLinearImpulse(this.m_firstIndex,this.m_lastIndex,o)},goog.exportProperty(box2d.b2ParticleGroup.prototype,"ApplyLinearImpulse",box2d.b2ParticleGroup.prototype.ApplyLinearImpulse),box2d.b2ParticleGroup.prototype.DestroyParticles=function(o){if(box2d.b2Assert(!1===this.m_system.m_world.IsLocked()),!this.m_system.m_world.IsLocked())for(var t=this.m_firstIndex;t<this.m_lastIndex;t++)this.m_system.DestroyParticle(t,o)},goog.exportProperty(box2d.b2ParticleGroup.prototype,"DestroyParticles",box2d.b2ParticleGroup.prototype.DestroyParticles),box2d.b2ParticleGroup.prototype.UpdateStatistics=function(){var o=new box2d.b2Vec2,t=new box2d.b2Vec2;if(this.m_timestamp!=this.m_system.m_timestamp){var e=this.m_system.GetParticleMass();this.m_mass=e*(this.m_lastIndex-this.m_firstIndex),this.m_center.SetZero(),this.m_linearVelocity.SetZero();for(var r=this.m_firstIndex;r<this.m_lastIndex;r++)this.m_center.SelfMulAdd(e,this.m_system.m_positionBuffer.data[r]),this.m_linearVelocity.SelfMulAdd(e,this.m_system.m_velocityBuffer.data[r]);for(0<this.m_mass&&(r=1/this.m_mass,this.m_center.SelfMul(r),this.m_linearVelocity.SelfMul(r)),this.m_angularVelocity=this.m_inertia=0,r=this.m_firstIndex;r<this.m_lastIndex;r++)box2d.b2Sub_V2_V2(this.m_system.m_positionBuffer.data[r],this.m_center,o),box2d.b2Sub_V2_V2(this.m_system.m_velocityBuffer.data[r],this.m_linearVelocity,t),this.m_inertia+=e*box2d.b2Dot_V2_V2(o,o),this.m_angularVelocity+=e*box2d.b2Cross_V2_V2(o,t);0<this.m_inertia&&(this.m_angularVelocity*=1/this.m_inertia),this.m_timestamp=this.m_system.m_timestamp}},goog.exportProperty(box2d.b2ParticleGroup.prototype,"UpdateStatistics",box2d.b2ParticleGroup.prototype.UpdateStatistics),box2d.std_iter_swap=function(o,t,e){var r=o[t];o[t]=o[e],o[e]=r},box2d.std_sort=function(o,t,e,r){"number"!=typeof t&&(t=0),"number"!=typeof e&&(e=o.length-t),"function"!=typeof r&&(r=function(o,t){return o<t});for(var i=[],b=0;;){for(;t+1<e;e++){var p=o[t+Math.floor(Math.random()*(e-t))];i[b++]=e;for(var n=t-1;;){for(;r(o[++n],p););for(;r(p,o[--e]););if(n>=e)break;box2d.std_iter_swap(o,n,e)}}if(0===b)break;t=e,e=i[--b]}return o},box2d.std_stable_sort=function(o,t,e,r){return box2d.std_sort(o,t,e,r)},box2d.std_remove_if=function(o,t,e){"number"!=typeof e&&(e=o.length);for(var r=0,i=0;i<e;++i)t(o[i])||(i===r?++r:box2d.std_iter_swap(o,r++,i));return r},box2d.std_lower_bound=function(o,t,e,r,i){for("function"!=typeof i&&(i=function(o,t){return o<t}),e-=t;0<e;){var b=Math.floor(e/2),p=t+b;i(o[p],r)?(t=++p,e-=b+1):e=b}return t},box2d.std_upper_bound=function(o,t,e,r,i){for("function"!=typeof i&&(i=function(o,t){return o<t}),e-=t;0<e;){var b=Math.floor(e/2),p=t+b;i(r,o[p])?e=b:(t=++p,e-=b+1)}return t},box2d.std_rotate=function(o,t,e,r){for(var i=e;t!==i;)box2d.std_iter_swap(o,t++,i++),i===r?i=e:t===e&&(e=i)},box2d.std_unique=function(o,t,e,r){if(t===e)return e;for(var i=t;++t!==e;)r(o[i],o[t])||box2d.std_iter_swap(o,++i,t);return++i},box2d.b2GrowableBuffer=function(o){this.data=[],this.capacity=this.count=0,this.allocator=o},box2d.b2GrowableBuffer.prototype.data=null,box2d.b2GrowableBuffer.prototype.count=0,box2d.b2GrowableBuffer.prototype.capacity=0,box2d.b2GrowableBuffer.prototype.allocator=function(){return null},box2d.b2GrowableBuffer.prototype.Append=function(){return this.count>=this.capacity&&this.Grow(),this.count++},box2d.b2GrowableBuffer.prototype.Reserve=function(o){if(!(this.capacity>=o)){box2d.b2Assert(this.capacity===this.data.length);for(var t=this.capacity;t<o;++t)this.data[t]=this.allocator();this.capacity=o}},box2d.b2GrowableBuffer.prototype.Grow=function(){var o=this.capacity?2*this.capacity:box2d.b2_minParticleSystemBufferCapacity;box2d.b2Assert(o>this.capacity),this.Reserve(o)},box2d.b2GrowableBuffer.prototype.Free=function(){0!==this.data.length&&(this.data=[],this.count=this.capacity=0)},box2d.b2GrowableBuffer.prototype.Shorten=function(o){box2d.b2Assert(!1)},box2d.b2GrowableBuffer.prototype.Data=function(){return this.data},box2d.b2GrowableBuffer.prototype.GetCount=function(){return this.count},box2d.b2GrowableBuffer.prototype.SetCount=function(o){box2d.b2Assert(0<=o&&o<=this.capacity),this.count=o},box2d.b2GrowableBuffer.prototype.GetCapacity=function(){return this.capacity},box2d.b2GrowableBuffer.prototype.RemoveIf=function(o){for(var t=0,e=0;e<this.count;++e)o(this.data[e])||t++;this.count=box2d.std_remove_if(this.data,o,this.count),box2d.b2Assert(t===this.count)},box2d.b2GrowableBuffer.prototype.Unique=function(o){this.count=box2d.std_unique(this.data,0,this.count,o)},box2d.b2FixtureParticleQueryCallback=function(o){this.m_system=o},goog.inherits(box2d.b2FixtureParticleQueryCallback,box2d.b2QueryCallback),box2d.b2FixtureParticleQueryCallback.prototype.m_system=null,box2d.b2FixtureParticleQueryCallback.prototype.ShouldQueryParticleSystem=function(o){return!1},box2d.b2FixtureParticleQueryCallback.prototype.ReportFixture=function(o){if(o.IsSensor())return!0;for(var t=o.GetShape().GetChildCount(),e=0;e<t;e++){var r,i=o.GetAABB(e);for(i=this.m_system.GetInsideBoundsEnumerator(i);0<=(r=i.GetNext());)this.ReportFixtureAndParticle(o,e,r)}return!0},goog.exportSymbol("box2d.b2FixtureParticleQueryCallback.prototype.ReportFixture",box2d.b2FixtureParticleQueryCallback.prototype.ReportFixture),box2d.b2FixtureParticleQueryCallback.prototype.ReportParticle=function(o,t){return!1},goog.exportSymbol("box2d.b2FixtureParticleQueryCallback.prototype.ReportParticle",box2d.b2FixtureParticleQueryCallback.prototype.ReportParticle),box2d.b2FixtureParticleQueryCallback.prototype.ReportFixtureAndParticle=function(o,t,e){box2d.b2Assert(!1)},goog.exportSymbol("box2d.b2FixtureParticleQueryCallback.prototype.ReportFixtureAndParticle",box2d.b2FixtureParticleQueryCallback.prototype.ReportFixtureAndParticle),box2d.b2ParticleContact=function(){this.normal=new box2d.b2Vec2},goog.exportSymbol("box2d.b2ParticleContact",box2d.b2ParticleContact),box2d.b2ParticleContact.prototype.indexA=0,goog.exportProperty(box2d.b2ParticleContact.prototype,"indexA",box2d.b2ParticleContact.prototype.indexA),box2d.b2ParticleContact.prototype.indexB=0,goog.exportProperty(box2d.b2ParticleContact.prototype,"indexB",box2d.b2ParticleContact.prototype.indexB),box2d.b2ParticleContact.prototype.weight=0,goog.exportProperty(box2d.b2ParticleContact.prototype,"weight",box2d.b2ParticleContact.prototype.weight),box2d.b2ParticleContact.prototype.normal=null,goog.exportProperty(box2d.b2ParticleContact.prototype,"normal",box2d.b2ParticleContact.prototype.normal),box2d.b2ParticleContact.prototype.flags=0,goog.exportProperty(box2d.b2ParticleContact.prototype,"flags",box2d.b2ParticleContact.prototype.flags),box2d.b2ParticleContact.prototype.SetIndices=function(o,t){box2d.b2Assert(o<=box2d.b2_maxParticleIndex&&t<=box2d.b2_maxParticleIndex),this.indexA=o,this.indexB=t},goog.exportProperty(box2d.b2ParticleContact.prototype,"SetIndices",box2d.b2ParticleContact.prototype.SetIndices),box2d.b2ParticleContact.prototype.SetWeight=function(o){this.weight=o},goog.exportProperty(box2d.b2ParticleContact.prototype,"SetWeight",box2d.b2ParticleContact.prototype.SetWeight),box2d.b2ParticleContact.prototype.SetNormal=function(o){this.normal.Copy(o)},goog.exportProperty(box2d.b2ParticleContact.prototype,"SetNormal",box2d.b2ParticleContact.prototype.SetNormal),box2d.b2ParticleContact.prototype.SetFlags=function(o){this.flags=o},goog.exportProperty(box2d.b2ParticleContact.prototype,"SetFlags",box2d.b2ParticleContact.prototype.SetFlags),box2d.b2ParticleContact.prototype.GetIndexA=function(){return this.indexA},goog.exportProperty(box2d.b2ParticleContact.prototype,"GetIndexA",box2d.b2ParticleContact.prototype.GetIndexA),box2d.b2ParticleContact.prototype.GetIndexB=function(){return this.indexB},goog.exportProperty(box2d.b2ParticleContact.prototype,"GetIndexB",box2d.b2ParticleContact.prototype.GetIndexB),box2d.b2ParticleContact.prototype.GetWeight=function(){return this.weight},goog.exportProperty(box2d.b2ParticleContact.prototype,"GetWeight",box2d.b2ParticleContact.prototype.GetWeight),box2d.b2ParticleContact.prototype.GetNormal=function(){return this.normal},goog.exportProperty(box2d.b2ParticleContact.prototype,"GetNormal",box2d.b2ParticleContact.prototype.GetNormal),box2d.b2ParticleContact.prototype.GetFlags=function(){return this.flags},goog.exportProperty(box2d.b2ParticleContact.prototype,"GetFlags",box2d.b2ParticleContact.prototype.GetFlags),box2d.b2ParticleContact.prototype.IsEqual=function(o){return this.indexA===o.indexA&&this.indexB===o.indexB&&this.flags===o.flags&&this.weight===o.weight&&this.normal.x===o.normal.x&&this.normal.y===o.normal.y},goog.exportProperty(box2d.b2ParticleContact.prototype,"IsEqual",box2d.b2ParticleContact.prototype.IsEqual),box2d.b2ParticleContact.prototype.IsNotEqual=function(o){return!this.IsEqual(o)},goog.exportProperty(box2d.b2ParticleContact.prototype,"IsNotEqual",box2d.b2ParticleContact.prototype.IsNotEqual),box2d.b2ParticleContact.prototype.ApproximatelyEqual=function(o){return this.indexA===o.indexA&&this.indexB===o.indexB&&this.flags===o.flags&&.01>box2d.b2Abs(this.weight-o.weight)&&1e-4>box2d.b2DistanceSquared(this.normal,o.normal)},goog.exportProperty(box2d.b2ParticleContact.prototype,"ApproximatelyEqual",box2d.b2ParticleContact.prototype.ApproximatelyEqual),box2d.b2ParticleBodyContact=function(){this.normal=new box2d.b2Vec2},goog.exportSymbol("box2d.b2ParticleBodyContact",box2d.b2ParticleBodyContact),box2d.b2ParticleBodyContact.prototype.index=0,goog.exportProperty(box2d.b2ParticleBodyContact.prototype,"index",box2d.b2ParticleBodyContact.prototype.index),box2d.b2ParticleBodyContact.prototype.body=null,goog.exportProperty(box2d.b2ParticleBodyContact.prototype,"body",box2d.b2ParticleBodyContact.prototype.body),box2d.b2ParticleBodyContact.prototype.fixture=null,goog.exportProperty(box2d.b2ParticleBodyContact.prototype,"fixture",box2d.b2ParticleBodyContact.prototype.fixture),box2d.b2ParticleBodyContact.prototype.weight=0,goog.exportProperty(box2d.b2ParticleBodyContact.prototype,"weight",box2d.b2ParticleBodyContact.prototype.weight),box2d.b2ParticleBodyContact.prototype.normal=null,goog.exportProperty(box2d.b2ParticleBodyContact.prototype,"normal",box2d.b2ParticleBodyContact.prototype.normal),box2d.b2ParticleBodyContact.prototype.mass=0,goog.exportProperty(box2d.b2ParticleBodyContact.prototype,"mass",box2d.b2ParticleBodyContact.prototype.mass),box2d.b2ParticlePair=function(){},goog.exportSymbol("box2d.b2ParticlePair",box2d.b2ParticlePair),box2d.b2ParticlePair.prototype.indexA=0,goog.exportProperty(box2d.b2ParticlePair.prototype,"indexA",box2d.b2ParticlePair.prototype.indexA),box2d.b2ParticlePair.prototype.indexB=0,goog.exportProperty(box2d.b2ParticlePair.prototype,"indexB",box2d.b2ParticlePair.prototype.indexB),box2d.b2ParticlePair.prototype.flags=0,goog.exportProperty(box2d.b2ParticlePair.prototype,"flags",box2d.b2ParticlePair.prototype.flags),box2d.b2ParticlePair.prototype.strength=0,goog.exportProperty(box2d.b2ParticlePair.prototype,"strength",box2d.b2ParticlePair.prototype.strength),box2d.b2ParticlePair.prototype.distance=0,goog.exportProperty(box2d.b2ParticlePair.prototype,"distance",box2d.b2ParticlePair.prototype.distance),box2d.b2ParticleTriad=function(){this.pa=new box2d.b2Vec2(0,0),this.pb=new box2d.b2Vec2(0,0),this.pc=new box2d.b2Vec2(0,0)},goog.exportSymbol("box2d.b2ParticleTriad",box2d.b2ParticleTriad),box2d.b2ParticleTriad.prototype.indexA=0,goog.exportProperty(box2d.b2ParticleTriad.prototype,"indexA",box2d.b2ParticleTriad.prototype.indexA),box2d.b2ParticleTriad.prototype.indexB=0,goog.exportProperty(box2d.b2ParticleTriad.prototype,"indexB",box2d.b2ParticleTriad.prototype.indexB),box2d.b2ParticleTriad.prototype.indexC=0,goog.exportProperty(box2d.b2ParticleTriad.prototype,"indexC",box2d.b2ParticleTriad.prototype.indexC),box2d.b2ParticleTriad.prototype.flags=0,goog.exportProperty(box2d.b2ParticleTriad.prototype,"flags",box2d.b2ParticleTriad.prototype.flags),box2d.b2ParticleTriad.prototype.strength=0,goog.exportProperty(box2d.b2ParticleTriad.prototype,"strength",box2d.b2ParticleTriad.prototype.strength),box2d.b2ParticleTriad.prototype.pa=null,goog.exportProperty(box2d.b2ParticleTriad.prototype,"pa",box2d.b2ParticleTriad.prototype.pa),box2d.b2ParticleTriad.prototype.pb=null,goog.exportProperty(box2d.b2ParticleTriad.prototype,"pb",box2d.b2ParticleTriad.prototype.pb),box2d.b2ParticleTriad.prototype.pc=null,goog.exportProperty(box2d.b2ParticleTriad.prototype,"pc",box2d.b2ParticleTriad.prototype.pc),box2d.b2ParticleTriad.prototype.ka=0,goog.exportProperty(box2d.b2ParticleTriad.prototype,"ka",box2d.b2ParticleTriad.prototype.ka),box2d.b2ParticleTriad.prototype.kb=0,goog.exportProperty(box2d.b2ParticleTriad.prototype,"kb",box2d.b2ParticleTriad.prototype.kb),box2d.b2ParticleTriad.prototype.kc=0,goog.exportProperty(box2d.b2ParticleTriad.prototype,"kc",box2d.b2ParticleTriad.prototype.kc),box2d.b2ParticleTriad.prototype.s=0,goog.exportProperty(box2d.b2ParticleTriad.prototype,"s",box2d.b2ParticleTriad.prototype.s),box2d.b2ParticleSystemDef=function(){},goog.exportSymbol("box2d.b2ParticleSystemDef",box2d.b2ParticleSystemDef),box2d.b2ParticleSystemDef.prototype.strictContactCheck=!1,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"strictContactCheck",box2d.b2ParticleSystemDef.prototype.strictContactCheck),box2d.b2ParticleSystemDef.prototype.density=1,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"density",box2d.b2ParticleSystemDef.prototype.density),box2d.b2ParticleSystemDef.prototype.gravityScale=1,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"gravityScale",box2d.b2ParticleSystemDef.prototype.gravityScale),box2d.b2ParticleSystemDef.prototype.radius=1,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"radius",box2d.b2ParticleSystemDef.prototype.radius),box2d.b2ParticleSystemDef.prototype.maxCount=0,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"maxCount",box2d.b2ParticleSystemDef.prototype.maxCount),box2d.b2ParticleSystemDef.prototype.pressureStrength=.005,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"pressureStrength",box2d.b2ParticleSystemDef.prototype.pressureStrength),box2d.b2ParticleSystemDef.prototype.dampingStrength=1,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"dampingStrength",box2d.b2ParticleSystemDef.prototype.dampingStrength),box2d.b2ParticleSystemDef.prototype.elasticStrength=.25,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"elasticStrength",box2d.b2ParticleSystemDef.prototype.elasticStrength),box2d.b2ParticleSystemDef.prototype.springStrength=.25,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"springStrength",box2d.b2ParticleSystemDef.prototype.springStrength),box2d.b2ParticleSystemDef.prototype.viscousStrength=.25,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"viscousStrength",box2d.b2ParticleSystemDef.prototype.viscousStrength),box2d.b2ParticleSystemDef.prototype.surfaceTensionPressureStrength=.2,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"surfaceTensionPressureStrength",box2d.b2ParticleSystemDef.prototype.surfaceTensionPressureStrength),box2d.b2ParticleSystemDef.prototype.surfaceTensionNormalStrength=.2,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"surfaceTensionNormalStrength",box2d.b2ParticleSystemDef.prototype.surfaceTensionNormalStrength),box2d.b2ParticleSystemDef.prototype.repulsiveStrength=1,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"repulsiveStrength",box2d.b2ParticleSystemDef.prototype.repulsiveStrength),box2d.b2ParticleSystemDef.prototype.powderStrength=.5,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"powderStrength",box2d.b2ParticleSystemDef.prototype.powderStrength),box2d.b2ParticleSystemDef.prototype.ejectionStrength=.5,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"ejectionStrength",box2d.b2ParticleSystemDef.prototype.ejectionStrength),box2d.b2ParticleSystemDef.prototype.staticPressureStrength=.2,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"staticPressureStrength",box2d.b2ParticleSystemDef.prototype.staticPressureStrength),box2d.b2ParticleSystemDef.prototype.staticPressureRelaxation=.2,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"staticPressureRelaxation",box2d.b2ParticleSystemDef.prototype.staticPressureRelaxation),box2d.b2ParticleSystemDef.prototype.staticPressureIterations=8,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"staticPressureIterations",box2d.b2ParticleSystemDef.prototype.staticPressureIterations),box2d.b2ParticleSystemDef.prototype.colorMixingStrength=.5,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"colorMixingStrength",box2d.b2ParticleSystemDef.prototype.colorMixingStrength),box2d.b2ParticleSystemDef.prototype.destroyByAge=!0,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"destroyByAge",box2d.b2ParticleSystemDef.prototype.destroyByAge),box2d.b2ParticleSystemDef.prototype.lifetimeGranularity=1/60,goog.exportProperty(box2d.b2ParticleSystemDef.prototype,"lifetimeGranularity",box2d.b2ParticleSystemDef.prototype.lifetimeGranularity),box2d.b2ParticleSystemDef.prototype.Copy=function(o){return this.strictContactCheck=o.strictContactCheck,this.density=o.density,this.gravityScale=o.gravityScale,this.radius=o.radius,this.maxCount=o.maxCount,this.pressureStrength=o.pressureStrength,this.dampingStrength=o.dampingStrength,this.elasticStrength=o.elasticStrength,this.springStrength=o.springStrength,this.viscousStrength=o.viscousStrength,this.surfaceTensionPressureStrength=o.surfaceTensionPressureStrength,this.surfaceTensionNormalStrength=o.surfaceTensionNormalStrength,this.repulsiveStrength=o.repulsiveStrength,this.powderStrength=o.powderStrength,this.ejectionStrength=o.ejectionStrength,this.staticPressureStrength=o.staticPressureStrength,this.staticPressureRelaxation=o.staticPressureRelaxation,this.staticPressureIterations=o.staticPressureIterations,this.colorMixingStrength=o.colorMixingStrength,this.destroyByAge=o.destroyByAge,this.lifetimeGranularity=o.lifetimeGranularity,this},box2d.b2ParticleSystemDef.prototype.Clone=function(){return(new box2d.b2ParticleSystemDef).Copy(this)},box2d.b2ParticleSystem=function(o,t){this._ctor_(o,t)},goog.exportSymbol("box2d.b2ParticleSystem",box2d.b2ParticleSystem),box2d.b2ParticleSystem.prototype.m_paused=!1,box2d.b2ParticleSystem.prototype.m_timestamp=0,box2d.b2ParticleSystem.prototype.m_allParticleFlags=0,box2d.b2ParticleSystem.prototype.m_needsUpdateAllParticleFlags=!1,box2d.b2ParticleSystem.prototype.m_allGroupFlags=0,box2d.b2ParticleSystem.prototype.m_needsUpdateAllGroupFlags=!1,box2d.b2ParticleSystem.prototype.m_hasForce=!1,box2d.b2ParticleSystem.prototype.m_iterationIndex=0,box2d.b2ParticleSystem.prototype.m_inverseDensity=0,box2d.b2ParticleSystem.prototype.m_particleDiameter=0,box2d.b2ParticleSystem.prototype.m_inverseDiameter=0,box2d.b2ParticleSystem.prototype.m_squaredDiameter=0,box2d.b2ParticleSystem.prototype.m_count=0,box2d.b2ParticleSystem.prototype.m_internalAllocatedCapacity=0,box2d.b2ParticleSystem.prototype.m_handleAllocator=null,box2d.b2ParticleSystem.prototype.m_handleIndexBuffer=null,box2d.b2ParticleSystem.prototype.m_flagsBuffer=null,box2d.b2ParticleSystem.prototype.m_positionBuffer=null,box2d.b2ParticleSystem.prototype.m_velocityBuffer=null,box2d.b2ParticleSystem.prototype.m_forceBuffer=null,box2d.b2ParticleSystem.prototype.m_weightBuffer=null,box2d.b2ParticleSystem.prototype.m_staticPressureBuffer=null,box2d.b2ParticleSystem.prototype.m_accumulationBuffer=null,box2d.b2ParticleSystem.prototype.m_accumulation2Buffer=null,box2d.b2ParticleSystem.prototype.m_depthBuffer=null,box2d.b2ParticleSystem.prototype.m_colorBuffer=null,box2d.b2ParticleSystem.prototype.m_groupBuffer=null,box2d.b2ParticleSystem.prototype.m_userDataBuffer=null,box2d.b2ParticleSystem.prototype.m_stuckThreshold=0,box2d.b2ParticleSystem.prototype.m_lastBodyContactStepBuffer=null,box2d.b2ParticleSystem.prototype.m_bodyContactCountBuffer=null,box2d.b2ParticleSystem.prototype.m_consecutiveContactStepsBuffer=null,box2d.b2ParticleSystem.prototype.m_stuckParticleBuffer=null,box2d.b2ParticleSystem.prototype.m_proxyBuffer=null,box2d.b2ParticleSystem.prototype.m_contactBuffer=null,box2d.b2ParticleSystem.prototype.m_bodyContactBuffer=null,box2d.b2ParticleSystem.prototype.m_pairBuffer=null,box2d.b2ParticleSystem.prototype.m_triadBuffer=null,box2d.b2ParticleSystem.prototype.m_expirationTimeBuffer=null,box2d.b2ParticleSystem.prototype.m_indexByExpirationTimeBuffer=null,box2d.b2ParticleSystem.prototype.m_timeElapsed=0,box2d.b2ParticleSystem.prototype.m_expirationTimeBufferRequiresSorting=!1,box2d.b2ParticleSystem.prototype.m_groupCount=0,box2d.b2ParticleSystem.prototype.m_groupList=null,box2d.b2ParticleSystem.prototype.m_def=null,box2d.b2ParticleSystem.prototype.m_world=null,box2d.b2ParticleSystem.prototype.m_prev=null,box2d.b2ParticleSystem.prototype.m_next=null,box2d.b2ParticleSystem.xTruncBits=12,box2d.b2ParticleSystem.yTruncBits=12,box2d.b2ParticleSystem.tagBits=32,box2d.b2ParticleSystem.yOffset=1<<box2d.b2ParticleSystem.yTruncBits-1,box2d.b2ParticleSystem.yShift=box2d.b2ParticleSystem.tagBits-box2d.b2ParticleSystem.yTruncBits,box2d.b2ParticleSystem.xShift=box2d.b2ParticleSystem.tagBits-box2d.b2ParticleSystem.yTruncBits-box2d.b2ParticleSystem.xTruncBits,box2d.b2ParticleSystem.xScale=1<<box2d.b2ParticleSystem.xShift,box2d.b2ParticleSystem.xOffset=box2d.b2ParticleSystem.xScale*(1<<box2d.b2ParticleSystem.xTruncBits-1),box2d.b2ParticleSystem.yMask=(1<<box2d.b2ParticleSystem.yTruncBits)-1<<box2d.b2ParticleSystem.yShift,box2d.b2ParticleSystem.xMask=~box2d.b2ParticleSystem.yMask,box2d.b2ParticleSystem.computeTag=function(o,t){return(t+box2d.b2ParticleSystem.yOffset>>>0<<box2d.b2ParticleSystem.yShift)+(box2d.b2ParticleSystem.xScale*o+box2d.b2ParticleSystem.xOffset>>>0)>>>0},box2d.b2ParticleSystem.computeRelativeTag=function(o,t,e){return o+(e<<box2d.b2ParticleSystem.yShift)+(t<<box2d.b2ParticleSystem.xShift)>>>0},box2d.b2ParticleSystem.FixedSetAllocator=function(){},box2d.b2ParticleSystem.FixedSetAllocator.prototype.Invalidate=function(o){},box2d.b2ParticleSystem.FixtureParticle=function(o,t){this.first=o,this.second=t},box2d.b2ParticleSystem.FixtureParticle.prototype.first=null,box2d.b2ParticleSystem.FixtureParticle.prototype.second=box2d.b2_invalidParticleIndex,box2d.b2ParticleSystem.FixtureParticleSet=function(){},goog.inherits(box2d.b2ParticleSystem.FixtureParticleSet,box2d.b2ParticleSystem.FixedSetAllocator),box2d.b2ParticleSystem.FixtureParticleSet.prototype.Initialize=function(o,t){},box2d.b2ParticleSystem.FixtureParticleSet.prototype.Find=function(o){},box2d.b2ParticleSystem.ParticlePair=function(o,t){},box2d.b2ParticleSystem.ParticlePair.prototype.first=box2d.b2_invalidParticleIndex,box2d.b2ParticleSystem.ParticlePair.prototype.second=box2d.b2_invalidParticleIndex,box2d.b2ParticleSystem.b2ParticlePairSet=function(){},goog.inherits(box2d.b2ParticleSystem.b2ParticlePairSet,box2d.b2ParticleSystem.FixedSetAllocator),box2d.b2ParticleSystem.b2ParticlePairSet.prototype.Initialize=function(o,t){},box2d.b2ParticleSystem.b2ParticlePairSet.prototype.Find=function(o){},box2d.b2ParticleSystem.ConnectionFilter=function(){},box2d.b2ParticleSystem.ConnectionFilter.prototype.IsNecessary=function(o){return!0},box2d.b2ParticleSystem.ConnectionFilter.prototype.ShouldCreatePair=function(o,t){return!0},box2d.b2ParticleSystem.ConnectionFilter.prototype.ShouldCreateTriad=function(o,t,e){return!0},box2d.b2ParticleSystem.prototype._ctor_=function(o,t){this.m_handleIndexBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer,this.m_flagsBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer,this.m_positionBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer,this.m_velocityBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer,this.m_forceBuffer=[],this.m_weightBuffer=[],this.m_staticPressureBuffer=[],this.m_accumulationBuffer=[],this.m_accumulation2Buffer=[],this.m_depthBuffer=[],this.m_colorBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer,this.m_groupBuffer=[],this.m_userDataBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer,this.m_lastBodyContactStepBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer,this.m_bodyContactCountBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer,this.m_consecutiveContactStepsBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer,this.m_stuckParticleBuffer=new box2d.b2GrowableBuffer(function(){return 0}),this.m_proxyBuffer=new box2d.b2GrowableBuffer(function(){return new box2d.b2ParticleSystem.Proxy}),this.m_contactBuffer=new box2d.b2GrowableBuffer(function(){return new box2d.b2ParticleContact}),this.m_bodyContactBuffer=new box2d.b2GrowableBuffer(function(){return new box2d.b2ParticleBodyContact}),this.m_pairBuffer=new box2d.b2GrowableBuffer(function(){return new box2d.b2ParticlePair}),this.m_triadBuffer=new box2d.b2GrowableBuffer(function(){return new box2d.b2ParticleTriad}),this.m_expirationTimeBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer,this.m_indexByExpirationTimeBuffer=new box2d.b2ParticleSystem.UserOverridableBuffer,this.m_def=new box2d.b2ParticleSystemDef,box2d.b2Assert(null!==o),this.SetStrictContactCheck(o.strictContactCheck),this.SetDensity(o.density),this.SetGravityScale(o.gravityScale),this.SetRadius(o.radius),this.SetMaxParticleCount(o.maxCount),box2d.b2Assert(0<o.lifetimeGranularity),this.m_def=o.Clone(),this.m_world=t,this.SetDestructionByAge(this.m_def.destroyByAge)},box2d.b2ParticleSystem.prototype._dtor_=function(){for(;this.m_groupList;)this.DestroyParticleGroup(this.m_groupList);this.FreeUserOverridableBuffer(this.m_handleIndexBuffer),this.FreeUserOverridableBuffer(this.m_flagsBuffer),this.FreeUserOverridableBuffer(this.m_lastBodyContactStepBuffer),this.FreeUserOverridableBuffer(this.m_bodyContactCountBuffer),this.FreeUserOverridableBuffer(this.m_consecutiveContactStepsBuffer),this.FreeUserOverridableBuffer(this.m_positionBuffer),this.FreeUserOverridableBuffer(this.m_velocityBuffer),this.FreeUserOverridableBuffer(this.m_colorBuffer),this.FreeUserOverridableBuffer(this.m_userDataBuffer),this.FreeUserOverridableBuffer(this.m_expirationTimeBuffer),this.FreeUserOverridableBuffer(this.m_indexByExpirationTimeBuffer),this.FreeBuffer(this.m_forceBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_weightBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_staticPressureBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulationBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulation2Buffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_depthBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_groupBuffer,this.m_internalAllocatedCapacity)},box2d.b2ParticleSystem.prototype.Drop=function(){this._dtor_()},box2d.b2ParticleSystem.prototype.CreateParticle=function(o){if(box2d.b2Assert(!1===this.m_world.IsLocked()),this.m_world.IsLocked())return 0;if(this.m_count>=this.m_internalAllocatedCapacity&&this.ReallocateInternalAllocatedBuffers(this.m_count?2*this.m_count:box2d.b2_minParticleSystemBufferCapacity),this.m_count>=this.m_internalAllocatedCapacity){if(!this.m_def.destroyByAge)return box2d.b2_invalidParticleIndex;this.DestroyOldestParticle(0,!1),this.SolveZombie()}var t=this.m_count++;this.m_flagsBuffer.data[t]=0,this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[t]=0),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[t]=0),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[t]=0),this.m_positionBuffer.data[t]=o.position.Clone(),this.m_velocityBuffer.data[t]=o.velocity.Clone(),this.m_weightBuffer[t]=0,this.m_forceBuffer[t]=box2d.b2Vec2_zero.Clone(),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[t]=0),this.m_depthBuffer&&(this.m_depthBuffer[t]=0),!this.m_colorBuffer.data&&o.color.IsZero()||(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data[t]=o.color.Clone()),(this.m_userDataBuffer.data||o.userData)&&(this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data[t]=o.userData),this.m_handleIndexBuffer.data&&(this.m_handleIndexBuffer.data[t]=null);var e=this.m_proxyBuffer.data[this.m_proxyBuffer.Append()],r=0<o.lifetime;return(this.m_expirationTimeBuffer.data||r)&&(this.SetParticleLifetime(t,r?o.lifetime:this.ExpirationTimeToLifetime(-this.GetQuantizedTimeElapsed())),this.m_indexByExpirationTimeBuffer.data[t]=t),e.index=t,e=o.group,(this.m_groupBuffer[t]=e)&&(e.m_firstIndex<e.m_lastIndex?(this.RotateBuffer(e.m_firstIndex,e.m_lastIndex,t),box2d.b2Assert(e.m_lastIndex===t)):e.m_firstIndex=t,e.m_lastIndex=t+1),this.SetParticleFlags(t,o.flags),t},goog.exportProperty(box2d.b2ParticleSystem.prototype,"CreateParticle",box2d.b2ParticleSystem.prototype.CreateParticle),box2d.b2ParticleSystem.prototype.GetParticleHandleFromIndex=function(o){box2d.b2Assert(0<=o&&o<this.GetParticleCount()&&o!==box2d.b2_invalidParticleIndex),this.m_handleIndexBuffer.data=this.RequestBuffer(this.m_handleIndexBuffer.data);var t=this.m_handleIndexBuffer.data[o];return t||(t=new box2d.b2ParticleHandle,box2d.b2Assert(null!==t),t.SetIndex(o),this.m_handleIndexBuffer.data[o]=t)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetParticleHandleFromIndex",box2d.b2ParticleSystem.prototype.GetParticleHandleFromIndex),box2d.b2ParticleSystem.prototype.DestroyParticle=function(o,t){var e=box2d.b2ParticleFlag.b2_zombieParticle;t&&(e|=box2d.b2ParticleFlag.b2_destructionListenerParticle),this.SetParticleFlags(o,this.m_flagsBuffer.data[o]|e)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"DestroyParticle",box2d.b2ParticleSystem.prototype.DestroyParticle),box2d.b2ParticleSystem.prototype.DestroyOldestParticle=function(o,t){var e=this.GetParticleCount();box2d.b2Assert(0<=o&&o<e),box2d.b2Assert(null!==this.m_indexByExpirationTimeBuffer.data);e=this.m_indexByExpirationTimeBuffer.data[e-(o+1)];var r=this.m_indexByExpirationTimeBuffer.data[o];this.DestroyParticle(0<this.m_expirationTimeBuffer.data[e]?e:r,t)},box2d.b2ParticleSystem.DestroyParticlesInShapeCallback=function(o,t,e,r){this.m_system=o,this.m_shape=t,this.m_xf=e,this.m_callDestructionListener=r,this.m_destroyed=0},goog.inherits(box2d.b2ParticleSystem.DestroyParticlesInShapeCallback,box2d.b2QueryCallback),box2d.b2ParticleSystem.DestroyParticlesInShapeCallback.prototype.m_system=null,box2d.b2ParticleSystem.DestroyParticlesInShapeCallback.prototype.m_shape=null,box2d.b2ParticleSystem.DestroyParticlesInShapeCallback.prototype.m_xf=null,box2d.b2ParticleSystem.DestroyParticlesInShapeCallback.prototype.m_callDestructionListener=!1,box2d.b2ParticleSystem.DestroyParticlesInShapeCallback.prototype.m_destroyed=0,box2d.b2ParticleSystem.DestroyParticlesInShapeCallback.prototype.ReportFixture=function(o){return!1},box2d.b2ParticleSystem.DestroyParticlesInShapeCallback.prototype.ReportParticle=function(o,t){return o===this.m_system&&(box2d.b2Assert(0<=t&&t<this.m_system.m_count),this.m_shape.TestPoint(this.m_xf,this.m_system.m_positionBuffer.data[t])&&(this.m_system.DestroyParticle(t,this.m_callDestructionListener),this.m_destroyed++),!0)},box2d.b2ParticleSystem.DestroyParticlesInShapeCallback.prototype.Destroyed=function(){return this.m_destroyed},box2d.b2ParticleSystem.prototype.DestroyParticlesInShape=function(o,t,e){var r=box2d.b2ParticleSystem.prototype.DestroyParticlesInShape.s_aabb;return box2d.b2Assert(!1===this.m_world.IsLocked()),this.m_world.IsLocked()?0:(e=new box2d.b2ParticleSystem.DestroyParticlesInShapeCallback(this,o,t,e),o.ComputeAABB(r,t,0),this.m_world.QueryAABB(e,r),e.Destroyed())},goog.exportProperty(box2d.b2ParticleSystem.prototype,"DestroyParticlesInShape",box2d.b2ParticleSystem.prototype.DestroyParticlesInShape),box2d.b2ParticleSystem.prototype.DestroyParticlesInShape.s_aabb=new box2d.b2AABB,box2d.b2ParticleSystem.prototype.CreateParticleGroup=function(o){var t=box2d.b2ParticleSystem.prototype.CreateParticleGroup.s_transform;if(box2d.b2Assert(!1===this.m_world.IsLocked()),this.m_world.IsLocked())return null;t.Set(o.position,o.angle);var e=this.m_count;if(o.shape&&this.CreateParticlesWithShapeForGroup(o.shape,o,t),o.shapes&&this.CreateParticlesWithShapesForGroup(o.shapes,o.shapeCount,o,t),o.particleCount){box2d.b2Assert(null!==o.positionData);for(var r=0;r<o.particleCount;r++)this.CreateParticleForGroup(o,t,o.positionData[r])}var i=this.m_count,b=new box2d.b2ParticleGroup;for(b.m_system=this,b.m_firstIndex=e,b.m_lastIndex=i,b.m_strength=o.strength,b.m_userData=o.userData,b.m_transform.Copy(t),b.m_prev=null,(b.m_next=this.m_groupList)&&(this.m_groupList.m_prev=b),this.m_groupList=b,++this.m_groupCount,r=e;r<i;r++)this.m_groupBuffer[r]=b;return this.SetGroupFlags(b,o.groupFlags),t=new box2d.b2ParticleSystem.ConnectionFilter,this.UpdateContacts(!0),this.UpdatePairsAndTriads(e,i,t),o.group&&(this.JoinParticleGroups(o.group,b),b=o.group),b},goog.exportProperty(box2d.b2ParticleSystem.prototype,"CreateParticleGroup",box2d.b2ParticleSystem.prototype.CreateParticleGroup),box2d.b2ParticleSystem.prototype.CreateParticleGroup.s_transform=new box2d.b2Transform,box2d.b2ParticleSystem.JoinParticleGroupsFilter=function(o){this.m_threshold=o},goog.inherits(box2d.b2ParticleSystem.JoinParticleGroupsFilter,box2d.b2ParticleSystem.ConnectionFilter),box2d.b2ParticleSystem.JoinParticleGroupsFilter.prototype.m_threshold=0,box2d.b2ParticleSystem.JoinParticleGroupsFilter.prototype.ShouldCreatePair=function(o,t){return o<this.m_threshold&&this.m_threshold<=t||t<this.m_threshold&&this.m_threshold<=o},box2d.b2ParticleSystem.JoinParticleGroupsFilter.prototype.ShouldCreateTriad=function(o,t,e){return(o<this.m_threshold||t<this.m_threshold||e<this.m_threshold)&&(this.m_threshold<=o||this.m_threshold<=t||this.m_threshold<=e)},box2d.b2ParticleSystem.prototype.JoinParticleGroups=function(o,t){if(box2d.b2Assert(!1===this.m_world.IsLocked()),!this.m_world.IsLocked()){box2d.b2Assert(o!==t),this.RotateBuffer(t.m_firstIndex,t.m_lastIndex,this.m_count),box2d.b2Assert(t.m_lastIndex===this.m_count),this.RotateBuffer(o.m_firstIndex,o.m_lastIndex,t.m_firstIndex),box2d.b2Assert(o.m_lastIndex===t.m_firstIndex);var e=new box2d.b2ParticleSystem.JoinParticleGroupsFilter(t.m_firstIndex);for(this.UpdateContacts(!0),this.UpdatePairsAndTriads(o.m_firstIndex,t.m_lastIndex,e),e=t.m_firstIndex;e<t.m_lastIndex;e++)this.m_groupBuffer[e]=o;this.SetGroupFlags(o,o.m_groupFlags|t.m_groupFlags),o.m_lastIndex=t.m_lastIndex,t.m_firstIndex=t.m_lastIndex,this.DestroyParticleGroup(t)}},goog.exportProperty(box2d.b2ParticleSystem.prototype,"JoinParticleGroups",box2d.b2ParticleSystem.prototype.JoinParticleGroups),box2d.b2ParticleSystem.prototype.SplitParticleGroup=function(o){this.UpdateContacts(!0);var t=o.GetParticleCount();t=box2d.b2MakeArray(t,function(o){return new box2d.b2ParticleSystem.ParticleListNode});box2d.b2ParticleSystem.InitializeParticleLists(o,t),this.MergeParticleListsInContact(o,t);var e=box2d.b2ParticleSystem.FindLongestParticleList(o,t);this.MergeZombieParticleListNodes(o,t,e),this.CreateParticleGroupsFromParticleList(o,t,e),this.UpdatePairsAndTriadsWithParticleList(o,t)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"SplitParticleGroup",box2d.b2ParticleSystem.prototype.SplitParticleGroup),box2d.b2ParticleSystem.prototype.GetParticleGroupList=function(){return this.m_groupList},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetParticleGroupList",box2d.b2ParticleSystem.prototype.GetParticleGroupList),box2d.b2ParticleSystem.prototype.GetParticleGroupCount=function(){return this.m_groupCount},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetParticleGroupCount",box2d.b2ParticleSystem.prototype.GetParticleGroupCount),box2d.b2ParticleSystem.prototype.GetParticleCount=function(){return this.m_count},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetParticleCount",box2d.b2ParticleSystem.prototype.GetParticleCount),box2d.b2ParticleSystem.prototype.GetMaxParticleCount=function(){return this.m_def.maxCount},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetMaxParticleCount",box2d.b2ParticleSystem.prototype.GetMaxParticleCount),box2d.b2ParticleSystem.prototype.SetMaxParticleCount=function(o){box2d.b2Assert(this.m_count<=o),this.m_def.maxCount=o},goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetMaxParticleCount",box2d.b2ParticleSystem.prototype.SetMaxParticleCount),box2d.b2ParticleSystem.prototype.GetAllParticleFlags=function(){return this.m_allParticleFlags},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetAllParticleFlags",box2d.b2ParticleSystem.prototype.GetAllParticleFlags),box2d.b2ParticleSystem.prototype.GetAllGroupFlags=function(){return this.m_allGroupFlags},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetAllGroupFlags",box2d.b2ParticleSystem.prototype.GetAllGroupFlags),box2d.b2ParticleSystem.prototype.SetPaused=function(o){this.m_paused=o},goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetPaused",box2d.b2ParticleSystem.prototype.SetPaused),box2d.b2ParticleSystem.prototype.GetPaused=function(){return this.m_paused},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetPaused",box2d.b2ParticleSystem.prototype.GetPaused),box2d.b2ParticleSystem.prototype.SetDensity=function(o){this.m_def.density=o,this.m_inverseDensity=1/this.m_def.density},goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetDensity",box2d.b2ParticleSystem.prototype.SetDensity),box2d.b2ParticleSystem.prototype.GetDensity=function(){return this.m_def.density},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetDensity",box2d.b2ParticleSystem.prototype.GetDensity),box2d.b2ParticleSystem.prototype.SetGravityScale=function(o){this.m_def.gravityScale=o},goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetGravityScale",box2d.b2ParticleSystem.prototype.SetGravityScale),box2d.b2ParticleSystem.prototype.GetGravityScale=function(){return this.m_def.gravityScale},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetGravityScale",box2d.b2ParticleSystem.prototype.GetGravityScale),box2d.b2ParticleSystem.prototype.SetDamping=function(o){this.m_def.dampingStrength=o},goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetDamping",box2d.b2ParticleSystem.prototype.SetDamping),box2d.b2ParticleSystem.prototype.GetDamping=function(){return this.m_def.dampingStrength},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetDamping",box2d.b2ParticleSystem.prototype.GetDamping),box2d.b2ParticleSystem.prototype.SetStaticPressureIterations=function(o){this.m_def.staticPressureIterations=o},goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetStaticPressureIterations",box2d.b2ParticleSystem.prototype.SetStaticPressureIterations),box2d.b2ParticleSystem.prototype.GetStaticPressureIterations=function(){return this.m_def.staticPressureIterations},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetStaticPressureIterations",box2d.b2ParticleSystem.prototype.GetStaticPressureIterations),box2d.b2ParticleSystem.prototype.SetRadius=function(o){this.m_particleDiameter=2*o,this.m_squaredDiameter=this.m_particleDiameter*this.m_particleDiameter,this.m_inverseDiameter=1/this.m_particleDiameter};goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetRadius",box2d.b2ParticleSystem.prototype.SetRadius),box2d.b2ParticleSystem.prototype.GetRadius=function(){return this.m_particleDiameter/2},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetRadius",box2d.b2ParticleSystem.prototype.GetRadius),box2d.b2ParticleSystem.prototype.GetPositionBuffer=function(){return this.m_positionBuffer.data},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetPositionBuffer",box2d.b2ParticleSystem.prototype.GetPositionBuffer),box2d.b2ParticleSystem.prototype.GetVelocityBuffer=function(){return this.m_velocityBuffer.data},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetVelocityBuffer",box2d.b2ParticleSystem.prototype.GetVelocityBuffer),box2d.b2ParticleSystem.prototype.GetColorBuffer=function(){return this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetColorBuffer",box2d.b2ParticleSystem.prototype.GetColorBuffer),box2d.b2ParticleSystem.prototype.GetGroupBuffer=function(){return this.m_groupBuffer},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetGroupBuffer",box2d.b2ParticleSystem.prototype.GetGroupBuffer),box2d.b2ParticleSystem.prototype.GetWeightBuffer=function(){return this.m_weightBuffer},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetWeightBuffer",box2d.b2ParticleSystem.prototype.GetWeightBuffer),box2d.b2ParticleSystem.prototype.GetUserDataBuffer=function(){return this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetUserDataBuffer",box2d.b2ParticleSystem.prototype.GetUserDataBuffer),box2d.b2ParticleSystem.prototype.GetFlagsBuffer=function(){return this.m_flagsBuffer.data},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetFlagsBuffer",box2d.b2ParticleSystem.prototype.GetFlagsBuffer),box2d.b2ParticleSystem.prototype.SetParticleFlags=function(o,t){this.m_flagsBuffer.data[o]&~t&&(this.m_needsUpdateAllParticleFlags=!0),~this.m_allParticleFlags&t&&(t&box2d.b2ParticleFlag.b2_tensileParticle&&(this.m_accumulation2Buffer=this.RequestBuffer(this.m_accumulation2Buffer)),t&box2d.b2ParticleFlag.b2_colorMixingParticle&&(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data)),this.m_allParticleFlags|=t),this.m_flagsBuffer.data[o]=t},goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetParticleFlags",box2d.b2ParticleSystem.prototype.SetParticleFlags),box2d.b2ParticleSystem.prototype.GetParticleFlags=function(o){return this.m_flagsBuffer.data[o]},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetParticleFlags",box2d.b2ParticleSystem.prototype.GetParticleFlags),box2d.b2ParticleSystem.prototype.SetFlagsBuffer=function(o,t){this.SetUserOverridableBuffer(this.m_flagsBuffer,o,t)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetFlagsBuffer",box2d.b2ParticleSystem.prototype.SetFlagsBuffer),box2d.b2ParticleSystem.prototype.SetPositionBuffer=function(o,t){this.SetUserOverridableBuffer(this.m_positionBuffer,o,t)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetPositionBuffer",box2d.b2ParticleSystem.prototype.SetPositionBuffer),box2d.b2ParticleSystem.prototype.SetVelocityBuffer=function(o,t){this.SetUserOverridableBuffer(this.m_velocityBuffer,o,t)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetVelocityBuffer",box2d.b2ParticleSystem.prototype.SetVelocityBuffer),box2d.b2ParticleSystem.prototype.SetColorBuffer=function(o,t){this.SetUserOverridableBuffer(this.m_colorBuffer,o,t)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetColorBuffer",box2d.b2ParticleSystem.prototype.SetColorBuffer),box2d.b2ParticleSystem.prototype.SetUserDataBuffer=function(o,t){this.SetUserOverridableBuffer(this.m_userDataBuffer,o,t)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetUserDataBuffer",box2d.b2ParticleSystem.prototype.SetUserDataBuffer),box2d.b2ParticleSystem.prototype.GetContacts=function(){return this.m_contactBuffer.data},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetContacts",box2d.b2ParticleSystem.prototype.GetContacts),box2d.b2ParticleSystem.prototype.GetContactCount=function(){return this.m_contactBuffer.count},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetContactCount",box2d.b2ParticleSystem.prototype.GetContactCount),box2d.b2ParticleSystem.prototype.GetBodyContacts=function(){return this.m_bodyContactBuffer.data},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetBodyContacts",box2d.b2ParticleSystem.prototype.GetBodyContacts),box2d.b2ParticleSystem.prototype.GetBodyContactCount=function(){return this.m_bodyContactBuffer.count},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetBodyContactCount",box2d.b2ParticleSystem.prototype.GetBodyContactCount),box2d.b2ParticleSystem.prototype.GetPairs=function(){return this.m_pairBuffer.data},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetPairs",box2d.b2ParticleSystem.prototype.GetPairs),box2d.b2ParticleSystem.prototype.GetPairCount=function(){return this.m_pairBuffer.count},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetPairCount",box2d.b2ParticleSystem.prototype.GetPairCount),box2d.b2ParticleSystem.prototype.GetTriads=function(){return this.m_triadBuffer.data},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetTriads",box2d.b2ParticleSystem.prototype.GetTriads),box2d.b2ParticleSystem.prototype.GetTriadCount=function(){return this.m_triadBuffer.count},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetTriadCount",box2d.b2ParticleSystem.prototype.GetTriadCount),box2d.b2ParticleSystem.prototype.SetStuckThreshold=function(o){this.m_stuckThreshold=o,0<o&&(this.m_lastBodyContactStepBuffer.data=this.RequestBuffer(this.m_lastBodyContactStepBuffer.data),this.m_bodyContactCountBuffer.data=this.RequestBuffer(this.m_bodyContactCountBuffer.data),this.m_consecutiveContactStepsBuffer.data=this.RequestBuffer(this.m_consecutiveContactStepsBuffer.data))},box2d.b2ParticleSystem.prototype.GetStuckCandidates=function(){return this.m_stuckParticleBuffer.Data()},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetStuckCandidates",box2d.b2ParticleSystem.prototype.GetStuckCandidates),box2d.b2ParticleSystem.prototype.GetStuckCandidateCount=function(){return this.m_stuckParticleBuffer.GetCount()},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetStuckCandidateCount",box2d.b2ParticleSystem.prototype.GetStuckCandidateCount),box2d.b2ParticleSystem.prototype.ComputeCollisionEnergy=function(){for(var o=box2d.b2ParticleSystem.prototype.ComputeCollisionEnergy.s_v,t=this.m_velocityBuffer.data,e=0,r=0;r<this.m_contactBuffer.count;r++){var i=(b=this.m_contactBuffer.data[r]).normal,b=box2d.b2Sub_V2_V2(t[b.indexB],t[b.indexA],o);0>(i=box2d.b2Dot_V2_V2(b,i))&&(e+=i*i)}return.5*this.GetParticleMass()*e},goog.exportProperty(box2d.b2ParticleSystem.prototype,"ComputeCollisionEnergy",box2d.b2ParticleSystem.prototype.ComputeCollisionEnergy),box2d.b2ParticleSystem.prototype.ComputeCollisionEnergy.s_v=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SetStrictContactCheck=function(o){this.m_def.strictContactCheck=o},goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetStrictContactCheck",box2d.b2ParticleSystem.prototype.SetStrictContactCheck),box2d.b2ParticleSystem.prototype.GetStrictContactCheck=function(){return this.m_def.strictContactCheck},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetStrictContactCheck",box2d.b2ParticleSystem.prototype.GetStrictContactCheck),box2d.b2ParticleSystem.prototype.SetParticleLifetime=function(o,t){box2d.b2Assert(this.ValidateParticleIndex(o));var e=null===this.m_indexByExpirationTimeBuffer.data;if(this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),e){e=this.GetParticleCount();for(var r=0;r<e;++r)this.m_indexByExpirationTimeBuffer.data[r]=r}(e=0<(e=t/this.m_def.lifetimeGranularity)?this.GetQuantizedTimeElapsed()+e:e)!==this.m_expirationTimeBuffer.data[o]&&(this.m_expirationTimeBuffer.data[o]=e,this.m_expirationTimeBufferRequiresSorting=!0)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetParticleLifetime",box2d.b2ParticleSystem.prototype.SetParticleLifetime),box2d.b2ParticleSystem.prototype.GetParticleLifetime=function(o){return box2d.b2Assert(this.ValidateParticleIndex(o)),this.ExpirationTimeToLifetime(this.GetExpirationTimeBuffer()[o])},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetParticleLifetime",box2d.b2ParticleSystem.prototype.GetParticleLifetime),box2d.b2ParticleSystem.prototype.SetDestructionByAge=function(o){o&&this.GetExpirationTimeBuffer(),this.m_def.destroyByAge=o},goog.exportProperty(box2d.b2ParticleSystem.prototype,"SetDestructionByAge",box2d.b2ParticleSystem.prototype.SetDestructionByAge),box2d.b2ParticleSystem.prototype.GetDestructionByAge=function(){return this.m_def.destroyByAge},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetDestructionByAge",box2d.b2ParticleSystem.prototype.GetDestructionByAge),box2d.b2ParticleSystem.prototype.GetExpirationTimeBuffer=function(){return this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_expirationTimeBuffer.data},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetExpirationTimeBuffer",box2d.b2ParticleSystem.prototype.GetExpirationTimeBuffer),box2d.b2ParticleSystem.prototype.ExpirationTimeToLifetime=function(o){return(0<o?o-this.GetQuantizedTimeElapsed():o)*this.m_def.lifetimeGranularity},goog.exportProperty(box2d.b2ParticleSystem.prototype,"ExpirationTimeToLifetime",box2d.b2ParticleSystem.prototype.ExpirationTimeToLifetime),box2d.b2ParticleSystem.prototype.GetIndexByExpirationTimeBuffer=function(){return this.GetParticleCount()?this.SetParticleLifetime(0,this.GetParticleLifetime(0)):this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),this.m_indexByExpirationTimeBuffer.data},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetIndexByExpirationTimeBuffer",box2d.b2ParticleSystem.prototype.GetIndexByExpirationTimeBuffer),box2d.b2ParticleSystem.prototype.ParticleApplyLinearImpulse=function(o,t){this.ApplyLinearImpulse(o,o+1,t)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"ParticleApplyLinearImpulse",box2d.b2ParticleSystem.prototype.ParticleApplyLinearImpulse),box2d.b2ParticleSystem.prototype.ApplyLinearImpulse=function(o,t,e){var r=this.m_velocityBuffer.data,i=(t-o)*this.GetParticleMass();for(e=e.Clone().SelfMul(1/i);o<t;o++)r[o].SelfAdd(e)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"ApplyLinearImpulse",box2d.b2ParticleSystem.prototype.ApplyLinearImpulse),box2d.b2ParticleSystem.IsSignificantForce=function(o){return 0!==o.x||0!==o.y},box2d.b2ParticleSystem.prototype.ParticleApplyForce=function(o,t){box2d.b2ParticleSystem.IsSignificantForce(t)&&this.ForceCanBeApplied(this.m_flagsBuffer.data[o])&&(this.PrepareForceBuffer(),this.m_forceBuffer[o].SelfAdd(t))},goog.exportProperty(box2d.b2ParticleSystem.prototype,"ParticleApplyForce",box2d.b2ParticleSystem.prototype.ParticleApplyForce),box2d.b2ParticleSystem.prototype.ApplyForce=function(o,t,e){for(var r=0,i=o;i<t;i++)r|=this.m_flagsBuffer.data[i];if(box2d.b2Assert(this.ForceCanBeApplied(r)),e=e.Clone().SelfMul(1/(t-o)),box2d.b2ParticleSystem.IsSignificantForce(e))for(this.PrepareForceBuffer(),i=o;i<t;i++)this.m_forceBuffer[i].SelfAdd(e)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"ApplyForce",box2d.b2ParticleSystem.prototype.ApplyForce),box2d.b2ParticleSystem.prototype.GetNext=function(){return this.m_next},goog.exportProperty(box2d.b2ParticleSystem.prototype,"GetNext",box2d.b2ParticleSystem.prototype.GetNext),box2d.b2ParticleSystem.prototype.QueryAABB=function(o,t){if(0!==this.m_proxyBuffer.count)for(var e=this.m_proxyBuffer.count,r=box2d.std_lower_bound(this.m_proxyBuffer.data,0,e,box2d.b2ParticleSystem.computeTag(this.m_inverseDiameter*t.lowerBound.x,this.m_inverseDiameter*t.lowerBound.y),box2d.b2ParticleSystem.Proxy.CompareProxyTag),i=(e=box2d.std_upper_bound(this.m_proxyBuffer.data,r,e,box2d.b2ParticleSystem.computeTag(this.m_inverseDiameter*t.upperBound.x,this.m_inverseDiameter*t.upperBound.y),box2d.b2ParticleSystem.Proxy.CompareTagProxy),this.m_positionBuffer.data);r<e;++r){var b=this.m_proxyBuffer.data[r].index,p=i[b];if(t.lowerBound.x<p.x&&p.x<t.upperBound.x&&t.lowerBound.y<p.y&&p.y<t.upperBound.y&&!o.ReportParticle(this,b))break}},goog.exportProperty(box2d.b2ParticleSystem.prototype,"QueryAABB",box2d.b2ParticleSystem.prototype.QueryAABB),box2d.b2ParticleSystem.prototype.QueryShapeAABB=function(o,t,e,r){var i=box2d.b2ParticleSystem.prototype.QueryShapeAABB.s_aabb;t.ComputeAABB(i,e,r||0),this.QueryAABB(o,i)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"QueryShapeAABB",box2d.b2ParticleSystem.prototype.QueryShapeAABB),box2d.b2ParticleSystem.prototype.QueryShapeAABB.s_aabb=new box2d.b2AABB,box2d.b2ParticleSystem.prototype.QueryPointAABB=function(o,t,e){var r=box2d.b2ParticleSystem.prototype.QueryPointAABB.s_aabb;e="number"==typeof e?e:box2d.b2_linearSlop,r.lowerBound.Set(t.x-e,t.y-e),r.upperBound.Set(t.x+e,t.y+e),this.QueryAABB(o,r)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"QueryPointAABB",box2d.b2ParticleSystem.prototype.QueryPointAABB),box2d.b2ParticleSystem.prototype.QueryPointAABB.s_aabb=new box2d.b2AABB,box2d.b2ParticleSystem.prototype.RayCast=function(o,t,e){var r=box2d.b2ParticleSystem.prototype.RayCast.s_aabb,i=box2d.b2ParticleSystem.prototype.RayCast.s_p,b=box2d.b2ParticleSystem.prototype.RayCast.s_v,p=box2d.b2ParticleSystem.prototype.RayCast.s_n,n=box2d.b2ParticleSystem.prototype.RayCast.s_point;if(0!==this.m_proxyBuffer.count){var a=this.m_positionBuffer.data;box2d.b2Min_V2_V2(t,e,r.lowerBound),box2d.b2Max_V2_V2(t,e,r.upperBound);var s=1;e=box2d.b2Sub_V2_V2(e,t,b);var d;for(b=box2d.b2Dot_V2_V2(e,e),r=this.GetInsideBoundsEnumerator(r);0<=(d=r.GetNext());){var x=box2d.b2Sub_V2_V2(t,a[d],i),l=box2d.b2Dot_V2_V2(x,e);if(0<=(y=l*l-b*((y=box2d.b2Dot_V2_V2(x,x))-this.m_squaredDiameter))){var y,c=box2d.b2Sqrt(y);if(!((y=(-l-c)/b)>s)){if(0>y&&(0>(y=(-l+c)/b)||y>s))continue;if((x=box2d.b2AddMul_V2_S_V2(x,y,e,p)).Normalize(),d=o.ReportParticle(this,d,box2d.b2AddMul_V2_S_V2(t,y,e,n),x,y),0>=(s=box2d.b2Min(s,d)))break}}}}},goog.exportProperty(box2d.b2ParticleSystem.prototype,"RayCast",box2d.b2ParticleSystem.prototype.RayCast),box2d.b2ParticleSystem.prototype.RayCast.s_aabb=new box2d.b2AABB,box2d.b2ParticleSystem.prototype.RayCast.s_p=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.RayCast.s_v=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.RayCast.s_n=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.RayCast.s_point=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.ComputeAABB=function(o){var t=this.GetParticleCount();box2d.b2Assert(null!==o),o.lowerBound.x=+box2d.b2_maxFloat,o.lowerBound.y=+box2d.b2_maxFloat,o.upperBound.x=-box2d.b2_maxFloat,o.upperBound.y=-box2d.b2_maxFloat;for(var e=this.m_positionBuffer.data,r=0;r<t;r++){var i=e[r];box2d.b2Min_V2_V2(o.lowerBound,i,o.lowerBound),box2d.b2Max_V2_V2(o.upperBound,i,o.upperBound)}o.lowerBound.x-=this.m_particleDiameter,o.lowerBound.y-=this.m_particleDiameter,o.upperBound.x+=this.m_particleDiameter,o.upperBound.y+=this.m_particleDiameter},goog.exportProperty(box2d.b2ParticleSystem.prototype,"ComputeAABB",box2d.b2ParticleSystem.prototype.ComputeAABB),box2d.b2ParticleSystem.UserOverridableBuffer=function(){},box2d.b2ParticleSystem.UserOverridableBuffer.prototype.data=null,box2d.b2ParticleSystem.UserOverridableBuffer.prototype.userSuppliedCapacity=0,box2d.b2ParticleSystem.Proxy=function(){},box2d.b2ParticleSystem.Proxy.prototype.index=box2d.b2_invalidParticleIndex,box2d.b2ParticleSystem.Proxy.prototype.tag=0,box2d.b2ParticleSystem.Proxy.CompareProxyProxy=function(o,t){return o.tag<t.tag},box2d.b2ParticleSystem.Proxy.CompareTagProxy=function(o,t){return o<t.tag},box2d.b2ParticleSystem.Proxy.CompareProxyTag=function(o,t){return o.tag<t},box2d.b2ParticleSystem.InsideBoundsEnumerator=function(o,t,e,r,i){this.m_system=o,this.m_xLower=(t&box2d.b2ParticleSystem.xMask)>>>0,this.m_xUpper=(e&box2d.b2ParticleSystem.xMask)>>>0,this.m_yLower=(t&box2d.b2ParticleSystem.yMask)>>>0,this.m_yUpper=(e&box2d.b2ParticleSystem.yMask)>>>0,this.m_first=r,this.m_last=i,box2d.b2Assert(this.m_first<=this.m_last)},box2d.b2ParticleSystem.InsideBoundsEnumerator.prototype.GetNext=function(){for(;this.m_first<this.m_last;){var o=(this.m_system.m_proxyBuffer.data[this.m_first].tag&box2d.b2ParticleSystem.xMask)>>>0,t=(this.m_system.m_proxyBuffer.data[this.m_first].tag&box2d.b2ParticleSystem.yMask)>>>0;if(box2d.b2Assert(t>=this.m_yLower),box2d.b2Assert(t<=this.m_yUpper),o>=this.m_xLower&&o<=this.m_xUpper)return this.m_system.m_proxyBuffer.data[this.m_first++].index;this.m_first++}return box2d.b2_invalidParticleIndex},box2d.b2ParticleSystem.ParticleListNode=function(){},box2d.b2ParticleSystem.ParticleListNode.prototype.list=null,box2d.b2ParticleSystem.ParticleListNode.prototype.next=null,box2d.b2ParticleSystem.ParticleListNode.prototype.count=0,box2d.b2ParticleSystem.ParticleListNode.prototype.index=0,box2d.b2ParticleSystem.k_pairFlags=box2d.b2ParticleFlag.b2_springParticle,box2d.b2ParticleSystem.k_triadFlags=box2d.b2ParticleFlag.b2_elasticParticle,box2d.b2ParticleSystem.k_noPressureFlags=box2d.b2ParticleFlag.b2_powderParticle|box2d.b2ParticleFlag.b2_tensileParticle,box2d.b2ParticleSystem.k_extraDampingFlags=box2d.b2ParticleFlag.b2_staticPressureParticle,box2d.b2ParticleSystem.k_barrierWallFlags=box2d.b2ParticleFlag.b2_barrierParticle|box2d.b2ParticleFlag.b2_wallParticle,box2d.b2ParticleSystem.prototype.FreeBuffer=function(o,t){null!==o&&(o.length=0)},box2d.b2ParticleSystem.prototype.FreeUserOverridableBuffer=function(o){0==o.userSuppliedCapacity&&this.FreeBuffer(o.data,this.m_internalAllocatedCapacity)},box2d.b2ParticleSystem.prototype.ReallocateBuffer3=function(o,t,e){return box2d.b2Assert(e>t),(o=o?o.slice():[]).length=e,o},box2d.b2ParticleSystem.prototype.ReallocateBuffer5=function(o,t,e,r,i){return box2d.b2Assert(r>e),box2d.b2Assert(!t||r<=t),i&&!o||t||(o=this.ReallocateBuffer3(o,e,r)),o},box2d.b2ParticleSystem.prototype.ReallocateBuffer4=function(o,t,e,r){return box2d.b2Assert(e>t),this.ReallocateBuffer5(o.data,o.userSuppliedCapacity,t,e,r)},box2d.b2ParticleSystem.prototype.RequestBuffer=function(o){return o||(0===this.m_internalAllocatedCapacity&&this.ReallocateInternalAllocatedBuffers(box2d.b2_minParticleSystemBufferCapacity),(o=[]).length=this.m_internalAllocatedCapacity),o},box2d.b2ParticleSystem.prototype.ReallocateHandleBuffers=function(o){box2d.b2Assert(o>this.m_internalAllocatedCapacity),this.m_handleIndexBuffer.data=this.ReallocateBuffer4(this.m_handleIndexBuffer,this.m_internalAllocatedCapacity,o,!0)},box2d.b2ParticleSystem.prototype.ReallocateInternalAllocatedBuffers=function(o){function t(o,t){return t&&o>t?t:o}if(o=t(o,this.m_def.maxCount),o=t(o,this.m_flagsBuffer.userSuppliedCapacity),o=t(o,this.m_positionBuffer.userSuppliedCapacity),o=t(o,this.m_velocityBuffer.userSuppliedCapacity),o=t(o,this.m_colorBuffer.userSuppliedCapacity),o=t(o,this.m_userDataBuffer.userSuppliedCapacity),this.m_internalAllocatedCapacity<o){this.ReallocateHandleBuffers(o),this.m_flagsBuffer.data=this.ReallocateBuffer4(this.m_flagsBuffer,this.m_internalAllocatedCapacity,o,!1);var e=0<this.m_stuckThreshold;this.m_lastBodyContactStepBuffer.data=this.ReallocateBuffer4(this.m_lastBodyContactStepBuffer,this.m_internalAllocatedCapacity,o,e),this.m_bodyContactCountBuffer.data=this.ReallocateBuffer4(this.m_bodyContactCountBuffer,this.m_internalAllocatedCapacity,o,e),this.m_consecutiveContactStepsBuffer.data=this.ReallocateBuffer4(this.m_consecutiveContactStepsBuffer,this.m_internalAllocatedCapacity,o,e),this.m_positionBuffer.data=this.ReallocateBuffer4(this.m_positionBuffer,this.m_internalAllocatedCapacity,o,!1),this.m_velocityBuffer.data=this.ReallocateBuffer4(this.m_velocityBuffer,this.m_internalAllocatedCapacity,o,!1),this.m_forceBuffer=this.ReallocateBuffer5(this.m_forceBuffer,0,this.m_internalAllocatedCapacity,o,!1),this.m_weightBuffer=this.ReallocateBuffer5(this.m_weightBuffer,0,this.m_internalAllocatedCapacity,o,!1),this.m_staticPressureBuffer=this.ReallocateBuffer5(this.m_staticPressureBuffer,0,this.m_internalAllocatedCapacity,o,!0),this.m_accumulationBuffer=this.ReallocateBuffer5(this.m_accumulationBuffer,0,this.m_internalAllocatedCapacity,o,!1),this.m_accumulation2Buffer=this.ReallocateBuffer5(this.m_accumulation2Buffer,0,this.m_internalAllocatedCapacity,o,!0),this.m_depthBuffer=this.ReallocateBuffer5(this.m_depthBuffer,0,this.m_internalAllocatedCapacity,o,!0),this.m_colorBuffer.data=this.ReallocateBuffer4(this.m_colorBuffer,this.m_internalAllocatedCapacity,o,!0),this.m_groupBuffer=this.ReallocateBuffer5(this.m_groupBuffer,0,this.m_internalAllocatedCapacity,o,!1),this.m_userDataBuffer.data=this.ReallocateBuffer4(this.m_userDataBuffer,this.m_internalAllocatedCapacity,o,!0),this.m_expirationTimeBuffer.data=this.ReallocateBuffer4(this.m_expirationTimeBuffer,this.m_internalAllocatedCapacity,o,!0),this.m_indexByExpirationTimeBuffer.data=this.ReallocateBuffer4(this.m_indexByExpirationTimeBuffer,this.m_internalAllocatedCapacity,o,!1),this.m_internalAllocatedCapacity=o}},box2d.b2ParticleSystem.prototype.CreateParticleForGroup=function(o,t,e){var r=new box2d.b2ParticleDef;r.flags=o.flags,box2d.b2Mul_X_V2(t,e,r.position),box2d.b2Add_V2_V2(o.linearVelocity,box2d.b2Cross_S_V2(o.angularVelocity,box2d.b2Sub_V2_V2(r.position,o.position,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),r.velocity),r.color.Copy(o.color),r.lifetime=o.lifetime,r.userData=o.userData,this.CreateParticle(r)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"CreateParticleForGroup",box2d.b2ParticleSystem.prototype.CreateParticleForGroup),box2d.b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup=function(o,t,e){var r=box2d.b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup.s_edge,i=box2d.b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup.s_d,b=box2d.b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup.s_p,p=t.stride;0===p&&(p=this.GetParticleStride());for(var n=0,a=o.GetChildCount(),s=0;s<a;s++){var d=null;o.GetType()===box2d.b2ShapeType.e_edgeShape?d=o:(box2d.b2Assert(o.GetType()===box2d.b2ShapeType.e_chainShape),d=r,o.GetChildEdge(d,s));for(var x=box2d.b2Sub_V2_V2(d.m_vertex2,d.m_vertex1,i),l=x.Length();n<l;){var y=box2d.b2AddMul_V2_S_V2(d.m_vertex1,n/l,x,b);this.CreateParticleForGroup(t,e,y),n+=p}n-=l}},goog.exportProperty(box2d.b2ParticleSystem.prototype,"CreateParticlesStrokeShapeForGroup",box2d.b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup),box2d.b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup.s_edge=new box2d.b2EdgeShape,box2d.b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup.s_d=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup.s_p=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.CreateParticlesFillShapeForGroup=function(o,t,e){var r=box2d.b2ParticleSystem.prototype.CreateParticlesFillShapeForGroup.s_aabb,i=box2d.b2ParticleSystem.prototype.CreateParticlesFillShapeForGroup.s_p,b=t.stride;0===b&&(b=this.GetParticleStride());var p=box2d.b2Transform.IDENTITY;box2d.b2Assert(1===o.GetChildCount()),o.ComputeAABB(r,p,0);for(var n=Math.floor(r.lowerBound.y/b)*b;n<r.upperBound.y;n+=b)for(var a=Math.floor(r.lowerBound.x/b)*b;a<r.upperBound.x;a+=b){var s=i.Set(a,n);o.TestPoint(p,s)&&this.CreateParticleForGroup(t,e,s)}},goog.exportProperty(box2d.b2ParticleSystem.prototype,"CreateParticlesFillShapeForGroup",box2d.b2ParticleSystem.prototype.CreateParticlesFillShapeForGroup),box2d.b2ParticleSystem.prototype.CreateParticlesFillShapeForGroup.s_aabb=new box2d.b2AABB,box2d.b2ParticleSystem.prototype.CreateParticlesFillShapeForGroup.s_p=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.CreateParticlesWithShapeForGroup=function(o,t,e){switch(o.GetType()){case box2d.b2ShapeType.e_edgeShape:case box2d.b2ShapeType.e_chainShape:this.CreateParticlesStrokeShapeForGroup(o,t,e);break;case box2d.b2ShapeType.e_polygonShape:case box2d.b2ShapeType.e_circleShape:this.CreateParticlesFillShapeForGroup(o,t,e);break;default:box2d.b2Assert(!1)}},goog.exportProperty(box2d.b2ParticleSystem.prototype,"CreateParticlesWithShapeForGroup",box2d.b2ParticleSystem.prototype.CreateParticlesWithShapeForGroup),box2d.b2ParticleSystem.CompositeShape=function(o,t){this.m_shapes=o,this.m_shapeCount=t},goog.inherits(box2d.b2ParticleSystem.CompositeShape,box2d.b2Shape),box2d.b2ParticleSystem.CompositeShape.prototype.m_shapes=null,box2d.b2ParticleSystem.CompositeShape.prototype.m_shapeCount=0,box2d.b2ParticleSystem.CompositeShape.prototype.Clone=function(){return box2d.b2Assert(!1),null},box2d.b2ParticleSystem.CompositeShape.prototype.GetChildCount=function(){return 1},box2d.b2ParticleSystem.CompositeShape.prototype.TestPoint=function(o,t){for(var e=0;e<this.m_shapeCount;e++)if(this.m_shapes[e].TestPoint(o,t))return!0;return!1},goog.exportSymbol("box2d.b2ParticleSystem.CompositeShape.prototype.TestPoint",box2d.b2ParticleSystem.CompositeShape.prototype.TestPoint),box2d.b2ParticleSystem.CompositeShape.prototype.ComputeDistance=function(o,t,e,r){box2d.b2Assert(!1)},goog.exportSymbol("box2d.b2ParticleSystem.CompositeShape.prototype.ComputeDistance",box2d.b2ParticleSystem.CompositeShape.prototype.ComputeDistance),box2d.b2ParticleSystem.CompositeShape.prototype.RayCast=function(o,t,e,r){return box2d.b2Assert(!1),!1},goog.exportSymbol("box2d.b2ParticleSystem.CompositeShape.prototype.RayCast",box2d.b2ParticleSystem.CompositeShape.prototype.RayCast),box2d.b2ParticleSystem.CompositeShape.prototype.ComputeAABB=function(o,t,e){var r=new box2d.b2AABB;for(o.lowerBound.x=+box2d.b2_maxFloat,o.lowerBound.y=+box2d.b2_maxFloat,o.upperBound.x=-box2d.b2_maxFloat,o.upperBound.y=-box2d.b2_maxFloat,box2d.b2Assert(0===e),e=0;e<this.m_shapeCount;e++)for(var i=this.m_shapes[e].GetChildCount(),b=0;b<i;b++){var p=r;this.m_shapes[e].ComputeAABB(p,t,b),o.Combine1(p)}},goog.exportSymbol("box2d.b2ParticleSystem.CompositeShape.prototype.ComputeAABB",box2d.b2ParticleSystem.CompositeShape.prototype.ComputeAABB),box2d.b2ParticleSystem.CompositeShape.prototype.ComputeMass=function(o,t){box2d.b2Assert(!1)},goog.exportSymbol("box2d.b2ParticleSystem.CompositeShape.prototype.ComputeMass",box2d.b2ParticleSystem.CompositeShape.prototype.ComputeMass),box2d.b2ParticleSystem.prototype.CreateParticlesWithShapesForGroup=function(o,t,e,r){o=new box2d.b2ParticleSystem.CompositeShape(o,t),this.CreateParticlesFillShapeForGroup(o,e,r)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"CreateParticlesWithShapesForGroup",box2d.b2ParticleSystem.prototype.CreateParticlesWithShapesForGroup),box2d.b2ParticleSystem.prototype.CloneParticle=function(o,t){var e=new box2d.b2ParticleDef;if(e.flags=this.m_flagsBuffer.data[o],e.position.Copy(this.m_positionBuffer.data[o]),e.velocity.Copy(this.m_velocityBuffer.data[o]),this.m_colorBuffer.data&&e.color.Copy(this.m_colorBuffer.data[o]),this.m_userDataBuffer.data&&(e.userData=this.m_userDataBuffer.data[o]),e.group=t,e=this.CreateParticle(e),this.m_handleIndexBuffer.data){var r=this.m_handleIndexBuffer.data[o];r&&r.SetIndex(e),this.m_handleIndexBuffer.data[e]=r,this.m_handleIndexBuffer.data[o]=null}return this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[e]=this.m_lastBodyContactStepBuffer.data[o]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[e]=this.m_bodyContactCountBuffer.data[o]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[e]=this.m_consecutiveContactStepsBuffer.data[o]),this.m_hasForce&&(this.m_forceBuffer[e]=this.m_forceBuffer[o]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[e]=this.m_staticPressureBuffer[o]),this.m_depthBuffer&&(this.m_depthBuffer[e]=this.m_depthBuffer[o]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[e]=this.m_expirationTimeBuffer.data[o]),e},goog.exportProperty(box2d.b2ParticleSystem.prototype,"CloneParticle",box2d.b2ParticleSystem.prototype.CloneParticle),box2d.b2ParticleSystem.prototype.DestroyParticlesInGroup=function(o,t){for(var e=o.m_firstIndex;e<o.m_lastIndex;e++)this.DestroyParticle(e,t)},goog.exportProperty(box2d.b2ParticleSystem.prototype,"DestroyParticlesInGroup",box2d.b2ParticleSystem.prototype.DestroyParticlesInGroup),box2d.b2ParticleSystem.prototype.DestroyParticleGroup=function(o){box2d.b2Assert(0<this.m_groupCount),box2d.b2Assert(null!==o),this.m_world.m_destructionListener&&this.m_world.m_destructionListener.SayGoodbyeParticleGroup(o),this.SetGroupFlags(o,0);for(var t=o.m_firstIndex;t<o.m_lastIndex;t++)this.m_groupBuffer[t]=null;o.m_prev&&(o.m_prev.m_next=o.m_next),o.m_next&&(o.m_next.m_prev=o.m_prev),o===this.m_groupList&&(this.m_groupList=o.m_next),--this.m_groupCount},goog.exportProperty(box2d.b2ParticleSystem.prototype,"DestroyParticleGroup",box2d.b2ParticleSystem.prototype.DestroyParticleGroup),box2d.b2ParticleSystem.ParticleCanBeConnected=function(o,t){return 0!=(o&(box2d.b2ParticleFlag.b2_wallParticle|box2d.b2ParticleFlag.b2_springParticle|box2d.b2ParticleFlag.b2_elasticParticle))||null!==t&&0!=(t.GetGroupFlags()&box2d.b2ParticleGroupFlag.b2_rigidParticleGroup)},box2d.b2ParticleSystem.prototype.UpdatePairsAndTriads=function(o,t,e){var r=box2d.b2ParticleSystem.prototype.UpdatePairsAndTriads.s_dab,i=box2d.b2ParticleSystem.prototype.UpdatePairsAndTriads.s_dbc,b=box2d.b2ParticleSystem.prototype.UpdatePairsAndTriads.s_dca,p=this.m_positionBuffer.data;box2d.b2Assert(o<=t);for(var n=0,a=o;a<t;a++)n|=this.m_flagsBuffer.data[a];if(n&box2d.b2ParticleSystem.k_pairFlags)for(a=0;a<this.m_contactBuffer.count;a++){var s=this.m_contactBuffer.data[a],d=s.indexA,x=s.indexB,l=this.m_flagsBuffer.data[d],y=this.m_flagsBuffer.data[x],c=this.m_groupBuffer[d],m=this.m_groupBuffer[x];d>=o&&d<t&&x>=o&&x<t&&!((l|y)&box2d.b2ParticleFlag.b2_zombieParticle)&&(l|y)&box2d.b2ParticleSystem.k_pairFlags&&(e.IsNecessary(d)||e.IsNecessary(x))&&box2d.b2ParticleSystem.ParticleCanBeConnected(l,c)&&box2d.b2ParticleSystem.ParticleCanBeConnected(y,m)&&e.ShouldCreatePair(d,x)&&((l=this.m_pairBuffer.data[this.m_pairBuffer.Append()]).indexA=d,l.indexB=x,l.flags=s.flags,l.strength=box2d.b2Min(c?c.m_strength:1,m?m.m_strength:1),l.distance=box2d.b2Distance(p[d],p[x])),box2d.std_stable_sort(this.m_pairBuffer.data,0,this.m_pairBuffer.count,box2d.b2ParticleSystem.ComparePairIndices),this.m_pairBuffer.Unique(box2d.b2ParticleSystem.MatchPairIndices)}if(n&box2d.b2ParticleSystem.k_triadFlags){for(n=new box2d.b2VoronoiDiagram(t-o),s=0,a=o;a<t;a++)d=this.m_flagsBuffer.data[a],x=this.m_groupBuffer[a],d&box2d.b2ParticleFlag.b2_zombieParticle||!box2d.b2ParticleSystem.ParticleCanBeConnected(d,x)||(e.IsNecessary(a)&&++s,n.AddGenerator(p[a],a,e.IsNecessary(a)));if(0===s)for(a=o;a<t;a++)e.IsNecessary(a);o=this.GetParticleStride(),n.Generate(o/2,2*o);var _=this;n.GetNodes(function(o,t,n){var a=_.m_flagsBuffer.data[o],s=_.m_flagsBuffer.data[t],d=_.m_flagsBuffer.data[n];if((a|s|d)&box2d.b2ParticleSystem.k_triadFlags&&e.ShouldCreateTriad(o,t,n)){var x=p[o],l=p[t],y=p[n],c=box2d.b2Sub_V2_V2(x,l,r),m=box2d.b2Sub_V2_V2(l,y,i),u=box2d.b2Sub_V2_V2(y,x,b),h=box2d.b2_maxTriadDistanceSquared*_.m_squaredDiameter;if(!(box2d.b2Dot_V2_V2(c,c)>h||box2d.b2Dot_V2_V2(m,m)>h||box2d.b2Dot_V2_V2(u,u)>h)){var g=_.m_groupBuffer[o],f=_.m_groupBuffer[t],S=_.m_groupBuffer[n];(h=_.m_triadBuffer.data[_.m_triadBuffer.Append()]).indexA=o,h.indexB=t,h.indexC=n,h.flags=a|s|d,h.strength=box2d.b2Min(box2d.b2Min(g?g.m_strength:1,f?f.m_strength:1),S?S.m_strength:1),o=(x.x+l.x+y.x)/3,t=(x.y+l.y+y.y)/3,h.pa.x=x.x-o,h.pa.y=x.y-t,h.pb.x=l.x-o,h.pb.y=l.y-t,h.pc.x=y.x-o,h.pc.y=y.y-t,h.ka=-box2d.b2Dot_V2_V2(u,c),h.kb=-box2d.b2Dot_V2_V2(c,m),h.kc=-box2d.b2Dot_V2_V2(m,u),h.s=box2d.b2Cross_V2_V2(x,l)+box2d.b2Cross_V2_V2(l,y)+box2d.b2Cross_V2_V2(y,x)}}}),box2d.std_stable_sort(this.m_triadBuffer.data,0,this.m_triadBuffer.count,box2d.b2ParticleSystem.CompareTriadIndices),this.m_triadBuffer.Unique(box2d.b2ParticleSystem.MatchTriadIndices)}},box2d.b2ParticleSystem.prototype.UpdatePairsAndTriads.s_dab=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.UpdatePairsAndTriads.s_dbc=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.UpdatePairsAndTriads.s_dca=new box2d.b2Vec2,box2d.b2ParticleSystem.ReactiveFilter=function(o){this.m_flagsBuffer=o},goog.inherits(box2d.b2ParticleSystem.ReactiveFilter,box2d.b2ParticleSystem.ConnectionFilter),box2d.b2ParticleSystem.ReactiveFilter.prototype.m_flagsBuffer=null,box2d.b2ParticleSystem.ReactiveFilter.prototype.IsNecessary=function(o){return 0!=(this.m_flagsBuffer[o]&box2d.b2ParticleFlag.b2_reactiveParticle)},box2d.b2ParticleSystem.prototype.UpdatePairsAndTriadsWithReactiveParticles=function(){var o=new box2d.b2ParticleSystem.ReactiveFilter(this.m_flagsBuffer);for(this.UpdatePairsAndTriads(0,this.m_count,o),o=0;o<this.m_count;o++)this.m_flagsBuffer.data[o]&=~box2d.b2ParticleFlag.b2_reactiveParticle;this.m_allParticleFlags&=~box2d.b2ParticleFlag.b2_reactiveParticle},box2d.b2ParticleSystem.ComparePairIndices=function(o,t){var e=o.indexA-t.indexA;return 0!==e?0>e:o.indexB<t.indexB},box2d.b2ParticleSystem.MatchPairIndices=function(o,t){return o.indexA===t.indexA&&o.indexB===t.indexB},box2d.b2ParticleSystem.CompareTriadIndices=function(o,t){var e=o.indexA-t.indexA;return 0!==e?0>e:0!==(e=o.indexB-t.indexB)?0>e:o.indexC<t.indexC},box2d.b2ParticleSystem.MatchTriadIndices=function(o,t){return o.indexA===t.indexA&&o.indexB===t.indexB&&o.indexC===t.indexC},box2d.b2ParticleSystem.InitializeParticleLists=function(o,t){for(var e=o.GetBufferIndex(),r=o.GetParticleCount(),i=0;i<r;i++){var b=t[i];b.list=b,b.next=null,b.count=1,b.index=i+e}},box2d.b2ParticleSystem.prototype.MergeParticleListsInContact=function(o,t){for(var e=o.GetBufferIndex(),r=0;r<this.m_contactBuffer.count;r++){var i=(b=this.m_contactBuffer.data[r]).indexA,b=b.indexB;if(o.ContainsParticle(i)&&o.ContainsParticle(b)&&(i=t[i-e].list)!==(b=t[b-e].list)){if(i.count<b.count){var p=i;i=b,b=p}box2d.b2Assert(i.count>=b.count),box2d.b2ParticleSystem.MergeParticleLists(i,b)}}},box2d.b2ParticleSystem.MergeParticleLists=function(o,t){box2d.b2Assert(o!==t);for(var e=t;;){e.list=o;var r=e.next;if(!r){e.next=o.next;break}e=r}o.next=t,o.count+=t.count,t.count=0},box2d.b2ParticleSystem.FindLongestParticleList=function(o,t){for(var e=o.GetParticleCount(),r=t[0],i=0;i<e;i++){var b=t[i];r.count<b.count&&(r=b)}return r},box2d.b2ParticleSystem.prototype.MergeZombieParticleListNodes=function(o,t,e){o=o.GetParticleCount();for(var r=0;r<o;r++){var i=t[r];i!==e&&this.m_flagsBuffer.data[i.index]&box2d.b2ParticleFlag.b2_zombieParticle&&box2d.b2ParticleSystem.MergeParticleListAndNode(e,i)}},box2d.b2ParticleSystem.MergeParticleListAndNode=function(o,t){box2d.b2Assert(t!==o),box2d.b2Assert(t.list===t),box2d.b2Assert(1===t.count),t.list=o,t.next=o.next,o.next=t,o.count++,t.count=0},box2d.b2ParticleSystem.prototype.CreateParticleGroupsFromParticleList=function(o,t,e){var r=o.GetParticleCount(),i=new box2d.b2ParticleGroupDef;for(i.groupFlags=o.GetGroupFlags(),i.userData=o.GetUserData(),o=0;o<r;o++){var b=t[o];if(b.count&&b!==e){box2d.b2Assert(b.list===b);for(var p=this.CreateParticleGroup(i);b;b=b.next){var n=b.index;box2d.b2Assert(!(this.m_flagsBuffer.data[n]&box2d.b2ParticleFlag.b2_zombieParticle));var a=this.CloneParticle(n,p);this.m_flagsBuffer.data[n]|=box2d.b2ParticleFlag.b2_zombieParticle,b.index=a}}}},box2d.b2ParticleSystem.prototype.UpdatePairsAndTriadsWithParticleList=function(o,t){for(var e=o.GetBufferIndex(),r=0;r<this.m_pairBuffer.count;r++){var i=(p=this.m_pairBuffer.data[r]).indexA,b=p.indexB;o.ContainsParticle(i)&&(p.indexA=t[i-e].index),o.ContainsParticle(b)&&(p.indexB=t[b-e].index)}for(r=0;r<this.m_triadBuffer.count;r++){i=(p=this.m_triadBuffer.data[r]).indexA,b=p.indexB;var p,n=p.indexC;o.ContainsParticle(i)&&(p.indexA=t[i-e].index),o.ContainsParticle(b)&&(p.indexB=t[b-e].index),o.ContainsParticle(n)&&(p.indexC=t[n-e].index)}},box2d.b2ParticleSystem.prototype.ComputeDepth=function(){for(var o=[],t=0,e=0;e<this.m_contactBuffer.count;e++){var r=(x=this.m_contactBuffer.data[e]).indexA,i=x.indexB,b=this.m_groupBuffer[r],p=this.m_groupBuffer[i];b&&b===p&&b.m_groupFlags&box2d.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&(o[t++]=x)}for(b=[],p=0,e=this.m_groupList;e;e=e.GetNext())if(e.m_groupFlags&box2d.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth)for(b[p++]=e,this.SetGroupFlags(e,e.m_groupFlags&~box2d.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth),i=e.m_firstIndex;i<e.m_lastIndex;i++)this.m_accumulationBuffer[i]=0;for(e=0;e<t;e++){r=(x=o[e]).indexA,i=x.indexB;var n=x.weight;this.m_accumulationBuffer[r]+=n,this.m_accumulationBuffer[i]+=n}for(box2d.b2Assert(null!==this.m_depthBuffer),i=0;i<p;i++)for(i=(e=b[i]).m_firstIndex;i<e.m_lastIndex;i++)n=this.m_accumulationBuffer[i],this.m_depthBuffer[i]=.8>n?0:box2d.b2_maxFloat;n=box2d.b2Sqrt(this.m_count)>>0;for(var a=0;a<n;a++){var s=!1;for(e=0;e<t;e++){r=(x=o[e]).indexA,i=x.indexB;var d=1-x.weight,x=this.m_depthBuffer[r],l=this.m_depthBuffer[i],y=l+d;d=x+d;x>y&&(this.m_depthBuffer[r]=y,s=!0),l>d&&(this.m_depthBuffer[i]=d,s=!0)}if(!s)break}for(i=0;i<p;i++)for(i=(e=b[i]).m_firstIndex;i<e.m_lastIndex;i++)this.m_depthBuffer[i]=this.m_depthBuffer[i]<box2d.b2_maxFloat?this.m_depthBuffer[i]*this.m_particleDiameter:0},box2d.b2ParticleSystem.prototype.GetInsideBoundsEnumerator=function(o){var t=box2d.b2ParticleSystem.computeTag(this.m_inverseDiameter*o.lowerBound.x-1,this.m_inverseDiameter*o.lowerBound.y-1);o=box2d.b2ParticleSystem.computeTag(this.m_inverseDiameter*o.upperBound.x+1,this.m_inverseDiameter*o.upperBound.y+1);var e=this.m_proxyBuffer.count,r=box2d.std_lower_bound(this.m_proxyBuffer.data,0,e,t,box2d.b2ParticleSystem.Proxy.CompareProxyTag),i=box2d.std_upper_bound(this.m_proxyBuffer.data,0,e,o,box2d.b2ParticleSystem.Proxy.CompareTagProxy);return box2d.b2Assert(0<=r),box2d.b2Assert(r<=i),box2d.b2Assert(i<=e),new box2d.b2ParticleSystem.InsideBoundsEnumerator(this,t,o,r,i)},box2d.b2ParticleSystem.prototype.UpdateAllParticleFlags=function(){for(var o=this.m_allParticleFlags=0;o<this.m_count;o++)this.m_allParticleFlags|=this.m_flagsBuffer.data[o];this.m_needsUpdateAllParticleFlags=!1},box2d.b2ParticleSystem.prototype.UpdateAllGroupFlags=function(){this.m_allGroupFlags=0;for(var o=this.m_groupList;o;o=o.GetNext())this.m_allGroupFlags|=o.m_groupFlags;this.m_needsUpdateAllGroupFlags=!1},box2d.b2ParticleSystem.prototype.AddContact=function(o,t,e){var r=box2d.b2ParticleSystem.prototype.AddContact.s_d,i=this.m_positionBuffer.data;if(box2d.b2Assert(e===this.m_contactBuffer),e=box2d.b2Sub_V2_V2(i[t],i[o],r),(r=box2d.b2Dot_V2_V2(e,e))<this.m_squaredDiameter){i=box2d.b2InvSqrt(r),isFinite(i)||(i=198177537e11);var b=this.m_contactBuffer.data[this.m_contactBuffer.Append()];b.indexA=o,b.indexB=t,b.flags=this.m_flagsBuffer.data[o]|this.m_flagsBuffer.data[t],b.weight=1-r*i*this.m_inverseDiameter,box2d.b2Mul_S_V2(i,e,b.normal)}},box2d.b2ParticleSystem.prototype.AddContact.s_d=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.FindContacts_Reference=function(o){box2d.b2Assert(o===this.m_contactBuffer),o=this.m_proxyBuffer.count;for(var t=this.m_contactBuffer.count=0,e=0;t<o;t++){for(var r=box2d.b2ParticleSystem.computeRelativeTag(this.m_proxyBuffer.data[t].tag,1,0),i=t+1;i<o&&!(r<this.m_proxyBuffer.data[i].tag);i++)this.AddContact(this.m_proxyBuffer.data[t].index,this.m_proxyBuffer.data[i].index,this.m_contactBuffer);for(i=box2d.b2ParticleSystem.computeRelativeTag(this.m_proxyBuffer.data[t].tag,-1,1);e<o&&!(i<=this.m_proxyBuffer.data[e].tag);e++);for(r=box2d.b2ParticleSystem.computeRelativeTag(this.m_proxyBuffer.data[t].tag,1,1),i=e;i<o&&!(r<this.m_proxyBuffer.data[i].tag);i++)this.AddContact(this.m_proxyBuffer.data[t].index,this.m_proxyBuffer.data[i].index,this.m_contactBuffer)}},box2d.b2ParticleSystem.prototype.FindContacts=function(o){this.FindContacts_Reference(o)},box2d.b2ParticleSystem.prototype.UpdateProxies_Reference=function(o){box2d.b2Assert(o===this.m_proxyBuffer),o=this.m_positionBuffer.data;for(var t=this.m_inverseDiameter,e=0;e<this.m_proxyBuffer.count;++e){var r=this.m_proxyBuffer.data[e],i=o[r.index];r.tag=box2d.b2ParticleSystem.computeTag(t*i.x,t*i.y)}},box2d.b2ParticleSystem.prototype.UpdateProxies=function(o){this.UpdateProxies_Reference(o)},box2d.b2ParticleSystem.prototype.SortProxies=function(o){box2d.b2Assert(o===this.m_proxyBuffer),box2d.std_sort(this.m_proxyBuffer.data,0,this.m_proxyBuffer.count,box2d.b2ParticleSystem.Proxy.CompareProxyProxy)},box2d.b2ParticleSystem.prototype.FilterContacts=function(o){var t=this.GetParticleContactFilter();if(null!==t){box2d.b2Assert(o===this.m_contactBuffer);var e=this;this.m_contactBuffer.RemoveIf(function(o){return o.flags&box2d.b2ParticleFlag.b2_particleContactFilterParticle&&!t.ShouldCollideParticleParticle(e,o.indexA,o.indexB)})}},box2d.b2ParticleSystem.prototype.NotifyContactListenerPreContact=function(o){null!==this.GetParticleContactListener()&&o.Initialize(this.m_contactBuffer,this.m_flagsBuffer)},box2d.b2ParticleSystem.prototype.NotifyContactListenerPostContact=function(o){if(null!==(o=this.GetParticleContactListener()))for(var t=0;t<this.m_contactBuffer.count;++t)o.BeginContactParticleParticle(this,this.m_contactBuffer.data[t])},box2d.b2ParticleSystem.b2ParticleContactIsZombie=function(o){return(o.flags&box2d.b2ParticleFlag.b2_zombieParticle)===box2d.b2ParticleFlag.b2_zombieParticle},box2d.b2ParticleSystem.prototype.UpdateContacts=function(o){this.UpdateProxies(this.m_proxyBuffer),this.SortProxies(this.m_proxyBuffer);var t=new box2d.b2ParticleSystem.b2ParticlePairSet;this.NotifyContactListenerPreContact(t),this.FindContacts(this.m_contactBuffer),this.FilterContacts(this.m_contactBuffer),this.NotifyContactListenerPostContact(t),o&&this.m_contactBuffer.RemoveIf(box2d.b2ParticleSystem.b2ParticleContactIsZombie)},box2d.b2ParticleSystem.prototype.NotifyBodyContactListenerPreContact=function(o){null!==this.GetFixtureContactListener()&&o.Initialize(this.m_bodyContactBuffer,this.m_flagsBuffer)},box2d.b2ParticleSystem.prototype.NotifyBodyContactListenerPostContact=function(o){if(null!==(o=this.GetFixtureContactListener()))for(var t=0;t<this.m_bodyContactBuffer.count;t++){var e=this.m_bodyContactBuffer.data[t];box2d.b2Assert(null!==e),o.BeginContactFixtureParticle(this,e)}},box2d.b2ParticleSystem.UpdateBodyContactsCallback=function(o,t){box2d.b2FixtureParticleQueryCallback.call(this,o),this.m_contactFilter=t},goog.inherits(box2d.b2ParticleSystem.UpdateBodyContactsCallback,box2d.b2FixtureParticleQueryCallback),box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ShouldCollideFixtureParticle=function(o,t,e){return!(this.m_contactFilter&&this.m_system.GetFlagsBuffer()[e]&box2d.b2ParticleFlag.b2_fixtureContactFilterParticle)||this.m_contactFilter.ShouldCollideFixtureParticle(o,this.m_system,e)},goog.exportSymbol("box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ShouldCollideFixtureParticle",box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ShouldCollideFixtureParticle),box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ReportFixtureAndParticle=function(o,t,e){var r=box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ReportFixtureAndParticle.s_rp,i=this.m_system.m_positionBuffer.data[e],b=box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ReportFixtureAndParticle.s_n;if((t=o.ComputeDistance(i,b,t))<this.m_system.m_particleDiameter&&this.ShouldCollideFixtureParticle(o,this.m_system,e)){var p=o.GetBody(),n=p.GetWorldCenter(),a=p.GetMass(),s=p.GetInertia()-a*p.GetLocalCenter().LengthSquared(),d=(a=0<a?1/a:0,s=0<s?1/s:0,this.m_system.m_flagsBuffer.data[e]&box2d.b2ParticleFlag.b2_wallParticle?0:this.m_system.GetParticleInvMass());r=box2d.b2Sub_V2_V2(i,n,r),r=d+a+s*(r=box2d.b2Cross_V2_V2(r,b))*r;(i=this.m_system.m_bodyContactBuffer.data[this.m_system.m_bodyContactBuffer.Append()]).index=e,i.body=p,i.fixture=o,i.weight=1-t*this.m_system.m_inverseDiameter,i.normal.Copy(b.SelfNeg()),i.mass=0<r?1/r:0,this.m_system.DetectStuckParticle(e)}},goog.exportSymbol("box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ReportFixtureAndParticle",box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ReportFixtureAndParticle),box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ReportFixtureAndParticle.s_n=new box2d.b2Vec2,box2d.b2ParticleSystem.UpdateBodyContactsCallback.prototype.ReportFixtureAndParticle.s_rp=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.UpdateBodyContacts=function(){var o=box2d.b2ParticleSystem.prototype.UpdateBodyContacts.s_aabb,t=new box2d.b2ParticleSystem.FixtureParticleSet;if(this.NotifyBodyContactListenerPreContact(t),0<this.m_stuckThreshold)for(var e=this.GetParticleCount(),r=0;r<e;r++)this.m_bodyContactCountBuffer.data[r]=0,this.m_timestamp>this.m_lastBodyContactStepBuffer.data[r]+1&&(this.m_consecutiveContactStepsBuffer.data[r]=0);this.m_bodyContactBuffer.SetCount(0),this.m_stuckParticleBuffer.SetCount(0),this.ComputeAABB(o),e=new box2d.b2ParticleSystem.UpdateBodyContactsCallback(this,this.GetFixtureContactFilter()),this.m_world.QueryAABB(e,o),this.m_def.strictContactCheck&&this.RemoveSpuriousBodyContacts(),this.NotifyBodyContactListenerPostContact(t)},box2d.b2ParticleSystem.prototype.UpdateBodyContacts.s_aabb=new box2d.b2AABB,box2d.b2ParticleSystem.prototype.Solve=function(o){var t=box2d.b2ParticleSystem.prototype.Solve.s_subStep;if(0!==this.m_count&&(this.m_expirationTimeBuffer.data&&this.SolveLifetimes(o),this.m_allParticleFlags&box2d.b2ParticleFlag.b2_zombieParticle&&this.SolveZombie(),this.m_needsUpdateAllParticleFlags&&this.UpdateAllParticleFlags(),this.m_needsUpdateAllGroupFlags&&this.UpdateAllGroupFlags(),!this.m_paused))for(this.m_iterationIndex=0;this.m_iterationIndex<o.particleIterations;this.m_iterationIndex++){++this.m_timestamp;var e=t.Copy(o);e.dt/=o.particleIterations,e.inv_dt*=o.particleIterations,this.UpdateContacts(!1),this.UpdateBodyContacts(),this.ComputeWeight(),this.m_allGroupFlags&box2d.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&this.ComputeDepth(),this.m_allParticleFlags&box2d.b2ParticleFlag.b2_reactiveParticle&&this.UpdatePairsAndTriadsWithReactiveParticles(),this.m_hasForce&&this.SolveForce(e),this.m_allParticleFlags&box2d.b2ParticleFlag.b2_viscousParticle&&this.SolveViscous(),this.m_allParticleFlags&box2d.b2ParticleFlag.b2_repulsiveParticle&&this.SolveRepulsive(e),this.m_allParticleFlags&box2d.b2ParticleFlag.b2_powderParticle&&this.SolvePowder(e),this.m_allParticleFlags&box2d.b2ParticleFlag.b2_tensileParticle&&this.SolveTensile(e),this.m_allGroupFlags&box2d.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SolveSolid(e),this.m_allParticleFlags&box2d.b2ParticleFlag.b2_colorMixingParticle&&this.SolveColorMixing(),this.SolveGravity(e),this.m_allParticleFlags&box2d.b2ParticleFlag.b2_staticPressureParticle&&this.SolveStaticPressure(e),this.SolvePressure(e),this.SolveDamping(e),this.m_allParticleFlags&box2d.b2ParticleSystem.k_extraDampingFlags&&this.SolveExtraDamping(),this.m_allParticleFlags&box2d.b2ParticleFlag.b2_elasticParticle&&this.SolveElastic(e),this.m_allParticleFlags&box2d.b2ParticleFlag.b2_springParticle&&this.SolveSpring(e),this.LimitVelocity(e),this.m_allGroupFlags&box2d.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigidDamping(),this.m_allParticleFlags&box2d.b2ParticleFlag.b2_barrierParticle&&this.SolveBarrier(e),this.SolveCollision(e),this.m_allGroupFlags&box2d.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigid(e),this.m_allParticleFlags&box2d.b2ParticleFlag.b2_wallParticle&&this.SolveWall();for(var r=0;r<this.m_count;r++)this.m_positionBuffer.data[r].SelfMulAdd(e.dt,this.m_velocityBuffer.data[r])}},goog.exportProperty(box2d.b2ParticleSystem.prototype,"Solve",box2d.b2ParticleSystem.prototype.Solve),box2d.b2ParticleSystem.prototype.Solve.s_subStep=new box2d.b2TimeStep,box2d.b2ParticleSystem.SolveCollisionCallback=function(o,t){box2d.b2FixtureParticleQueryCallback.call(this,o),this.m_step=t},goog.inherits(box2d.b2ParticleSystem.SolveCollisionCallback,box2d.b2FixtureParticleQueryCallback),box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle=function(o,t,e){var r=box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_p1,i=box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_output,b=box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_input,p=box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_p,n=box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_v,a=box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_f,s=o.GetBody(),d=this.m_system.m_positionBuffer.data[e],x=this.m_system.m_velocityBuffer.data[e];0===this.m_system.m_iterationIndex?(r=box2d.b2MulT_X_V2(s.m_xf0,d,r),o.GetShape().GetType()===box2d.b2ShapeType.e_circleShape&&(r.SelfSub(s.GetLocalCenter()),box2d.b2Mul_R_V2(s.m_xf0.q,r,r),box2d.b2MulT_R_V2(s.m_xf.q,r,r),r.SelfAdd(s.GetLocalCenter())),box2d.b2Mul_X_V2(s.m_xf,r,b.p1)):b.p1.Copy(d),box2d.b2AddMul_V2_S_V2(d,this.m_step.dt,x,b.p2),b.maxFraction=1,o.RayCast(i,b,t)&&(o=i.normal,p.x=(1-i.fraction)*b.p1.x+i.fraction*b.p2.x+box2d.b2_linearSlop*o.x,p.y=(1-i.fraction)*b.p1.y+i.fraction*b.p2.y+box2d.b2_linearSlop*o.y,n.x=this.m_step.inv_dt*(p.x-d.x),n.y=this.m_step.inv_dt*(p.y-d.y),this.m_system.m_velocityBuffer.data[e].Copy(n),a.x=this.m_step.inv_dt*this.m_system.GetParticleMass()*(x.x-n.x),a.y=this.m_step.inv_dt*this.m_system.GetParticleMass()*(x.y-n.y),this.m_system.ParticleApplyForce(e,a))},goog.exportSymbol("box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle",box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle),box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_p1=new box2d.b2Vec2,box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_output=new box2d.b2RayCastOutput,box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_input=new box2d.b2RayCastInput,box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_p=new box2d.b2Vec2,box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_v=new box2d.b2Vec2,box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportFixtureAndParticle.s_f=new box2d.b2Vec2,box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportParticle=function(o,t){return!1},goog.exportSymbol("box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportParticle",box2d.b2ParticleSystem.SolveCollisionCallback.prototype.ReportParticle),box2d.b2ParticleSystem.prototype.SolveCollision=function(o){var t=this.m_positionBuffer.data,e=this.m_velocityBuffer.data,r=box2d.b2ParticleSystem.prototype.SolveCollision.s_aabb;r.lowerBound.x=+box2d.b2_maxFloat,r.lowerBound.y=+box2d.b2_maxFloat,r.upperBound.x=-box2d.b2_maxFloat,r.upperBound.y=-box2d.b2_maxFloat;for(var i=0;i<this.m_count;i++){var b=e[i],p=t[i],n=p.x+o.dt*b.x;b=p.y+o.dt*b.y;r.lowerBound.x=box2d.b2Min(r.lowerBound.x,box2d.b2Min(p.x,n)),r.lowerBound.y=box2d.b2Min(r.lowerBound.y,box2d.b2Min(p.y,b)),r.upperBound.x=box2d.b2Max(r.upperBound.x,box2d.b2Max(p.x,n)),r.upperBound.y=box2d.b2Max(r.upperBound.y,box2d.b2Max(p.y,b))}o=new box2d.b2ParticleSystem.SolveCollisionCallback(this,o),this.m_world.QueryAABB(o,r)},box2d.b2ParticleSystem.prototype.SolveCollision.s_aabb=new box2d.b2AABB,box2d.b2ParticleSystem.prototype.LimitVelocity=function(o){var t=this.m_velocityBuffer.data;o=this.GetCriticalVelocitySquared(o);for(var e=0;e<this.m_count;e++){var r=t[e],i=box2d.b2Dot_V2_V2(r,r);i>o&&r.SelfMul(box2d.b2Sqrt(o/i))}},box2d.b2ParticleSystem.prototype.SolveGravity=function(o){var t=box2d.b2ParticleSystem.prototype.SolveGravity.s_gravity,e=this.m_velocityBuffer.data;for(o=box2d.b2Mul_S_V2(o.dt*this.m_def.gravityScale,this.m_world.GetGravity(),t),t=0;t<this.m_count;t++)e[t].SelfAdd(o)},box2d.b2ParticleSystem.prototype.SolveGravity.s_gravity=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveBarrier=function(o){for(var t=box2d.b2ParticleSystem.prototype.SolveBarrier.s_aabb,e=box2d.b2ParticleSystem.prototype.SolveBarrier.s_va,r=box2d.b2ParticleSystem.prototype.SolveBarrier.s_vb,i=box2d.b2ParticleSystem.prototype.SolveBarrier.s_pba,b=box2d.b2ParticleSystem.prototype.SolveBarrier.s_vba,p=box2d.b2ParticleSystem.prototype.SolveBarrier.s_vc,n=box2d.b2ParticleSystem.prototype.SolveBarrier.s_pca,a=box2d.b2ParticleSystem.prototype.SolveBarrier.s_vca,s=box2d.b2ParticleSystem.prototype.SolveBarrier.s_qba,d=box2d.b2ParticleSystem.prototype.SolveBarrier.s_qca,x=box2d.b2ParticleSystem.prototype.SolveBarrier.s_dv,l=box2d.b2ParticleSystem.prototype.SolveBarrier.s_f,y=this.m_positionBuffer.data,c=this.m_velocityBuffer.data,m=0;m<this.m_count;m++)0!=(this.m_flagsBuffer.data[m]&box2d.b2ParticleSystem.k_barrierWallFlags)&&c[m].SetZero();m=box2d.b2_barrierCollisionTime*o.dt;for(var _=this.GetParticleMass(),u=0;u<this.m_pairBuffer.count;u++){if((f=this.m_pairBuffer.data[u]).flags&box2d.b2ParticleFlag.b2_barrierParticle){var h=f.indexA,g=f.indexB,f=y[h],S=y[g],P=t;box2d.b2Min_V2_V2(f,S,P.lowerBound),box2d.b2Max_V2_V2(f,S,P.upperBound);var C,A=this.m_groupBuffer[h],B=this.m_groupBuffer[g];for(h=this.GetLinearVelocity(A,h,f,e),g=this.GetLinearVelocity(B,g,S,r),S=box2d.b2Sub_V2_V2(S,f,i),g=box2d.b2Sub_V2_V2(g,h,b),P=this.GetInsideBoundsEnumerator(P);0<=(C=P.GetNext());){var v=y[C],V=this.m_groupBuffer[C];if(A!==V&&B!==V){var J=this.GetLinearVelocity(V,C,v,p),M=box2d.b2Sub_V2_V2(v,f,n),D=box2d.b2Sub_V2_V2(J,h,a),w=box2d.b2Cross_V2_V2(g,D),G=box2d.b2Cross_V2_V2(S,D)-box2d.b2Cross_V2_V2(M,g),T=box2d.b2Cross_V2_V2(S,M),I=s,R=d;if(0===w){if(0===G)continue;if(!(0<=(T=-T/G)&&T<m))continue;if(box2d.b2AddMul_V2_S_V2(S,T,g,I),box2d.b2AddMul_V2_S_V2(M,T,D,R),!(0<=(G=box2d.b2Dot_V2_V2(I,R)/box2d.b2Dot_V2_V2(I,I))&&1>=G))continue}else{if(0>(T=G*G-4*T*w))continue;var F=box2d.b2Sqrt(T);if((T=(-G-F)/(2*w))>(w=(-G+F)/(2*w))&&(G=T,T=w,w=G),box2d.b2AddMul_V2_S_V2(S,T,g,I),box2d.b2AddMul_V2_S_V2(M,T,D,R),G=box2d.b2Dot_V2_V2(I,R)/box2d.b2Dot_V2_V2(I,I),!(0<=T&&T<m&&0<=G&&1>=G)){if(!(0<=(T=w)&&T<m))continue;if(box2d.b2AddMul_V2_S_V2(S,T,g,I),box2d.b2AddMul_V2_S_V2(M,T,D,R),!(0<=(G=box2d.b2Dot_V2_V2(I,R)/box2d.b2Dot_V2_V2(I,I))&&1>=G))continue}}(M=x).x=h.x+G*g.x-J.x,M.y=h.y+G*g.y-J.y,J=box2d.b2Mul_S_V2(_,M,l),this.IsRigidGroup(V)?(_=V.GetMass(),M=V.GetInertia(),0<_&&V.m_linearVelocity.SelfMulAdd(1/_,J),0<M&&(V.m_angularVelocity+=box2d.b2Cross_V2_V2(box2d.b2Sub_V2_V2(v,V.GetCenter(),box2d.b2Vec2.s_t0),J)/M)):c[C].SelfAdd(M),this.ParticleApplyForce(C,J.SelfMul(-o.inv_dt))}}}}},box2d.b2ParticleSystem.prototype.SolveBarrier.s_aabb=new box2d.b2AABB,box2d.b2ParticleSystem.prototype.SolveBarrier.s_va=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveBarrier.s_vb=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveBarrier.s_pba=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveBarrier.s_vba=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveBarrier.s_vc=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveBarrier.s_pca=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveBarrier.s_vca=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveBarrier.s_qba=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveBarrier.s_qca=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveBarrier.s_dv=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveBarrier.s_f=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveStaticPressure=function(o){this.m_staticPressureBuffer=this.RequestBuffer(this.m_staticPressureBuffer);var t=this.GetCriticalPressure(o);o=this.m_def.staticPressureStrength*t;t=box2d.b2_maxParticlePressure*t;for(var e=this.m_def.staticPressureRelaxation,r=0;r<this.m_def.staticPressureIterations;r++){for(var i=0;i<this.m_count;i++)this.m_accumulationBuffer[i]=0;for(i=0;i<this.m_contactBuffer.count;i++){if((n=this.m_contactBuffer.data[i]).flags&box2d.b2ParticleFlag.b2_staticPressureParticle){var b=n.indexA,p=n.indexB,n=n.weight;this.m_accumulationBuffer[b]+=n*this.m_staticPressureBuffer[p],this.m_accumulationBuffer[p]+=n*this.m_staticPressureBuffer[b]}}for(i=0;i<this.m_count;i++)n=this.m_weightBuffer[i],this.m_staticPressureBuffer[i]=this.m_flagsBuffer.data[i]&box2d.b2ParticleFlag.b2_staticPressureParticle?box2d.b2Clamp((this.m_accumulationBuffer[i]+o*(n-box2d.b2_minParticleWeight))/(n+e),0,t):0}},box2d.b2ParticleSystem.prototype.ComputeWeight=function(){for(var o=0;o<this.m_count;o++)this.m_weightBuffer[o]=0;for(o=0;o<this.m_bodyContactBuffer.count;o++){var t=(e=this.m_bodyContactBuffer.data[o]).index,e=e.weight;this.m_weightBuffer[t]+=e}for(o=0;o<this.m_contactBuffer.count;o++){t=(e=this.m_contactBuffer.data[o]).indexA;var r=e.indexB;e=e.weight;this.m_weightBuffer[t]+=e,this.m_weightBuffer[r]+=e}},box2d.b2ParticleSystem.prototype.SolvePressure=function(o){for(var t=box2d.b2ParticleSystem.prototype.SolvePressure.s_f,e=this.m_positionBuffer.data,r=this.m_velocityBuffer.data,i=this.GetCriticalPressure(o),b=this.m_def.pressureStrength*i,p=box2d.b2_maxParticlePressure*i,n=0;n<this.m_count;n++){i=this.m_weightBuffer[n];var a=b*box2d.b2Max(0,i-box2d.b2_minParticleWeight);this.m_accumulationBuffer[n]=box2d.b2Min(a,p)}if(this.m_allParticleFlags&box2d.b2ParticleSystem.k_noPressureFlags)for(n=0;n<this.m_count;n++)this.m_flagsBuffer.data[n]&box2d.b2ParticleSystem.k_noPressureFlags&&(this.m_accumulationBuffer[n]=0);if(this.m_allParticleFlags&box2d.b2ParticleFlag.b2_staticPressureParticle)for(box2d.b2Assert(null!==this.m_staticPressureBuffer),n=0;n<this.m_count;n++)this.m_flagsBuffer.data[n]&box2d.b2ParticleFlag.b2_staticPressureParticle&&(this.m_accumulationBuffer[n]+=this.m_staticPressureBuffer[n]);for(o=o.dt/(this.m_def.density*this.m_particleDiameter),p=this.GetParticleInvMass(),n=0;n<this.m_bodyContactBuffer.count;n++){var s=(a=this.m_bodyContactBuffer.data[n]).index,d=a.body,x=(i=a.weight,a.mass),l=a.normal,y=e[s];a=this.m_accumulationBuffer[s]+b*i,i=box2d.b2Mul_S_V2(o*i*x*a,l,t);r[s].SelfMulSub(p,i),d.ApplyLinearImpulse(i,y,!0)}for(n=0;n<this.m_contactBuffer.count;n++)s=(a=this.m_contactBuffer.data[n]).indexA,d=a.indexB,i=a.weight,l=a.normal,a=this.m_accumulationBuffer[s]+this.m_accumulationBuffer[d],i=box2d.b2Mul_S_V2(o*i*a,l,t),r[s].SelfSub(i),r[d].SelfAdd(i)},box2d.b2ParticleSystem.prototype.SolvePressure.s_f=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveDamping=function(o){var t=box2d.b2ParticleSystem.prototype.SolveDamping.s_v,e=box2d.b2ParticleSystem.prototype.SolveDamping.s_f,r=this.m_positionBuffer.data,i=this.m_velocityBuffer.data,b=this.m_def.dampingStrength;o=1/this.GetCriticalVelocity(o);for(var p=this.GetParticleInvMass(),n=0;n<this.m_bodyContactBuffer.count;n++){var a=(y=this.m_bodyContactBuffer.data[n]).index,s=y.body,d=y.weight,x=y.mass,l=y.normal,y=r[a],c=box2d.b2Sub_V2_V2(s.GetLinearVelocityFromWorldPoint(y,box2d.b2Vec2.s_t0),i[a],t);0>(c=box2d.b2Dot_V2_V2(c,l))&&(d=box2d.b2Max(b*d,box2d.b2Min(-o*c,.5)),x=box2d.b2Mul_S_V2(d*x*c,l,e),i[a].SelfMulAdd(p,x),s.ApplyLinearImpulse(x.SelfNeg(),y,!0))}for(n=0;n<this.m_contactBuffer.count;n++)a=(y=this.m_contactBuffer.data[n]).indexA,s=y.indexB,d=y.weight,l=y.normal,c=box2d.b2Sub_V2_V2(i[s],i[a],t),0>(c=box2d.b2Dot_V2_V2(c,l))&&(d=box2d.b2Max(b*d,box2d.b2Min(-o*c,.5)),x=box2d.b2Mul_S_V2(d*c,l,e),i[a].SelfAdd(x),i[s].SelfSub(x))},box2d.b2ParticleSystem.prototype.SolveDamping.s_v=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveDamping.s_f=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveRigidDamping=function(){for(var o=box2d.b2ParticleSystem.prototype.SolveRigidDamping.s_t0,t=box2d.b2ParticleSystem.prototype.SolveRigidDamping.s_t1,e=box2d.b2ParticleSystem.prototype.SolveRigidDamping.s_p,r=box2d.b2ParticleSystem.prototype.SolveRigidDamping.s_v,i=[0],b=[0],p=[0],n=[0],a=[0],s=[0],d=this.m_positionBuffer.data,x=this.m_def.dampingStrength,l=0;l<this.m_bodyContactBuffer.count;l++){var y=(h=this.m_bodyContactBuffer.data[l]).index,c=this.m_groupBuffer[y];if(this.IsRigidGroup(c)){var m=h.body,_=h.normal,u=h.weight,h=d[y],g=box2d.b2Sub_V2_V2(m.GetLinearVelocityFromWorldPoint(h,o),c.GetLinearVelocityFromWorldPoint(h,t),r);0>(g=box2d.b2Dot_V2_V2(g,_))&&(this.InitDampingParameterWithRigidGroupOrParticle(i,b,p,!0,c,y,h,_),this.InitDampingParameter(n,a,s,m.GetMass(),m.GetInertia()-m.GetMass()*m.GetLocalCenter().LengthSquared(),m.GetWorldCenter(),h,_),u=x*box2d.b2Min(u,1)*this.ComputeDampingImpulse(i[0],b[0],p[0],n[0],a[0],s[0],g),this.ApplyDamping(i[0],b[0],p[0],!0,c,y,u,_),m.ApplyLinearImpulse(box2d.b2Mul_S_V2(-u,_,box2d.b2Vec2.s_t0),h,!0))}}for(l=0;l<this.m_contactBuffer.count;l++){y=(h=this.m_contactBuffer.data[l]).indexA,m=h.indexB,_=h.normal,u=h.weight,c=this.m_groupBuffer[y];var f=this.m_groupBuffer[m],S=this.IsRigidGroup(c),P=this.IsRigidGroup(f);c!==f&&(S||P)&&(h=box2d.b2Mid_V2_V2(d[y],d[m],e),g=box2d.b2Sub_V2_V2(this.GetLinearVelocity(f,m,h,o),this.GetLinearVelocity(c,y,h,t),r),0>(g=box2d.b2Dot_V2_V2(g,_))&&(this.InitDampingParameterWithRigidGroupOrParticle(i,b,p,S,c,y,h,_),this.InitDampingParameterWithRigidGroupOrParticle(n,a,s,P,f,m,h,_),u=x*u*this.ComputeDampingImpulse(i[0],b[0],p[0],n[0],a[0],s[0],g),this.ApplyDamping(i[0],b[0],p[0],S,c,y,u,_),this.ApplyDamping(n[0],a[0],s[0],P,f,m,-u,_)))}},box2d.b2ParticleSystem.prototype.SolveRigidDamping.s_t0=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveRigidDamping.s_t1=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveRigidDamping.s_p=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveRigidDamping.s_v=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveExtraDamping=function(){for(var o=box2d.b2ParticleSystem.prototype.SolveExtraDamping.s_v,t=box2d.b2ParticleSystem.prototype.SolveExtraDamping.s_f,e=this.m_velocityBuffer.data,r=this.m_positionBuffer.data,i=this.GetParticleInvMass(),b=0;b<this.m_bodyContactBuffer.count;b++){var p=(d=this.m_bodyContactBuffer.data[b]).index;if(this.m_flagsBuffer.data[p]&box2d.b2ParticleSystem.k_extraDampingFlags){var n=d.body,a=d.mass,s=d.normal,d=r[p],x=box2d.b2Sub_V2_V2(n.GetLinearVelocityFromWorldPoint(d,box2d.b2Vec2.s_t0),e[p],o);0>(x=box2d.b2Dot_V2_V2(x,s))&&(a=box2d.b2Mul_S_V2(.5*a*x,s,t),e[p].SelfMulAdd(i,a),n.ApplyLinearImpulse(a.SelfNeg(),d,!0))}}},box2d.b2ParticleSystem.prototype.SolveExtraDamping.s_v=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveExtraDamping.s_f=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveWall=function(){for(var o=this.m_velocityBuffer.data,t=0;t<this.m_count;t++)this.m_flagsBuffer.data[t]&box2d.b2ParticleFlag.b2_wallParticle&&o[t].SetZero()},box2d.b2ParticleSystem.prototype.SolveRigid=function(o){for(var t=box2d.b2ParticleSystem.prototype.SolveRigid.s_position,e=box2d.b2ParticleSystem.prototype.SolveRigid.s_rotation,r=box2d.b2ParticleSystem.prototype.SolveRigid.s_transform,i=box2d.b2ParticleSystem.prototype.SolveRigid.s_velocityTransform,b=this.m_positionBuffer.data,p=this.m_velocityBuffer.data,n=this.m_groupList;n;n=n.GetNext())if(n.m_groupFlags&box2d.b2ParticleGroupFlag.b2_rigidParticleGroup){n.UpdateStatistics();var a=e;a.SetAngle(o.dt*n.m_angularVelocity);var s=box2d.b2Add_V2_V2(n.m_center,box2d.b2Sub_V2_V2(box2d.b2Mul_S_V2(o.dt,n.m_linearVelocity,box2d.b2Vec2.s_t0),box2d.b2Mul_R_V2(a,n.m_center,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0),t),d=r;for(d.SetPositionRotation(s,a),box2d.b2Mul_X_X(d,n.m_transform,n.m_transform),(a=i).p.x=o.inv_dt*d.p.x,a.p.y=o.inv_dt*d.p.y,a.q.s=o.inv_dt*d.q.s,a.q.c=o.inv_dt*(d.q.c-1),d=n.m_firstIndex;d<n.m_lastIndex;d++)box2d.b2Mul_X_V2(a,b[d],p[d])}},box2d.b2ParticleSystem.prototype.SolveRigid.s_position=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveRigid.s_rotation=new box2d.b2Rot,box2d.b2ParticleSystem.prototype.SolveRigid.s_transform=new box2d.b2Transform,box2d.b2ParticleSystem.prototype.SolveRigid.s_velocityTransform=new box2d.b2Transform,box2d.b2ParticleSystem.prototype.SolveElastic=function(o){for(var t=box2d.b2ParticleSystem.prototype.SolveElastic.s_pa,e=box2d.b2ParticleSystem.prototype.SolveElastic.s_pb,r=box2d.b2ParticleSystem.prototype.SolveElastic.s_pc,i=box2d.b2ParticleSystem.prototype.SolveElastic.s_r,b=box2d.b2ParticleSystem.prototype.SolveElastic.s_t0,p=this.m_positionBuffer.data,n=this.m_velocityBuffer.data,a=o.inv_dt*this.m_def.elasticStrength,s=0;s<this.m_triadBuffer.count;s++){var d=this.m_triadBuffer.data[s];if(d.flags&box2d.b2ParticleFlag.b2_elasticParticle){var x=d.indexA,l=d.indexB,y=d.indexC,c=d.pa,m=d.pb,_=d.pc,u=t.Copy(p[x]),h=e.Copy(p[l]),g=r.Copy(p[y]);x=n[x],l=n[l],y=n[y];u.SelfMulAdd(o.dt,x),h.SelfMulAdd(o.dt,l),g.SelfMulAdd(o.dt,y);var f=(u.x+h.x+g.x)/3,S=(u.y+h.y+g.y)/3;u.x-=f,u.y-=S,h.x-=f,h.y-=S,g.x-=f,g.y-=S,(f=i).s=box2d.b2Cross_V2_V2(c,u)+box2d.b2Cross_V2_V2(m,h)+box2d.b2Cross_V2_V2(_,g),f.c=box2d.b2Dot_V2_V2(c,u)+box2d.b2Dot_V2_V2(m,h)+box2d.b2Dot_V2_V2(_,g),S=box2d.b2InvSqrt(f.s*f.s+f.c*f.c),isFinite(S)||(S=198177537e11),f.s*=S,f.c*=S,f.angle=Math.atan2(f.s,f.c),d=a*d.strength,box2d.b2Mul_R_V2(f,c,b),box2d.b2Sub_V2_V2(b,u,b),box2d.b2Mul_S_V2(d,b,b),x.SelfAdd(b),box2d.b2Mul_R_V2(f,m,b),box2d.b2Sub_V2_V2(b,h,b),box2d.b2Mul_S_V2(d,b,b),l.SelfAdd(b),box2d.b2Mul_R_V2(f,_,b),box2d.b2Sub_V2_V2(b,g,b),box2d.b2Mul_S_V2(d,b,b),y.SelfAdd(b)}}},box2d.b2ParticleSystem.prototype.SolveElastic.s_pa=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveElastic.s_pb=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveElastic.s_pc=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveElastic.s_r=new box2d.b2Rot,box2d.b2ParticleSystem.prototype.SolveElastic.s_t0=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveSpring=function(o){for(var t=box2d.b2ParticleSystem.prototype.SolveSpring.s_pa,e=box2d.b2ParticleSystem.prototype.SolveSpring.s_pb,r=box2d.b2ParticleSystem.prototype.SolveSpring.s_d,i=box2d.b2ParticleSystem.prototype.SolveSpring.s_f,b=this.m_positionBuffer.data,p=this.m_velocityBuffer.data,n=o.inv_dt*this.m_def.springStrength,a=0;a<this.m_pairBuffer.count;a++){if((c=this.m_pairBuffer.data[a]).flags&box2d.b2ParticleFlag.b2_springParticle){var s=c.indexA,d=c.indexB,x=t.Copy(b[s]),l=e.Copy(b[d]);s=p[s],d=p[d];x.SelfMulAdd(o.dt,s),l.SelfMulAdd(o.dt,d);x=box2d.b2Sub_V2_V2(l,x,r),l=c.distance;var y=x.Length(),c=box2d.b2Mul_S_V2(n*c.strength*(l-y)/y,x,i);s.SelfSub(c),d.SelfAdd(c)}}},box2d.b2ParticleSystem.prototype.SolveSpring.s_pa=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveSpring.s_pb=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveSpring.s_d=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveSpring.s_f=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveTensile=function(o){var t=box2d.b2ParticleSystem.prototype.SolveTensile.s_weightedNormal,e=box2d.b2ParticleSystem.prototype.SolveTensile.s_s,r=box2d.b2ParticleSystem.prototype.SolveTensile.s_f,i=this.m_velocityBuffer.data;box2d.b2Assert(null!==this.m_accumulation2Buffer);for(var b=0;b<this.m_count;b++)this.m_accumulation2Buffer[b]=box2d.b2Vec2_zero.Clone(),this.m_accumulation2Buffer[b].SetZero();for(b=0;b<this.m_contactBuffer.count;b++){if((s=this.m_contactBuffer.data[b]).flags&box2d.b2ParticleFlag.b2_tensileParticle){var p=s.indexA,n=s.indexB,a=s.weight,s=s.normal;a=box2d.b2Mul_S_V2((1-a)*a,s,t);this.m_accumulation2Buffer[p].SelfSub(a),this.m_accumulation2Buffer[n].SelfAdd(a)}}b=this.GetCriticalVelocity(o),o=this.m_def.surfaceTensionPressureStrength*b;t=this.m_def.surfaceTensionNormalStrength*b;var d=box2d.b2_maxParticleForce*b;for(b=0;b<this.m_contactBuffer.count;b++)if((s=this.m_contactBuffer.data[b]).flags&box2d.b2ParticleFlag.b2_tensileParticle){p=s.indexA,n=s.indexB,a=s.weight,s=s.normal;var x=this.m_weightBuffer[p]+this.m_weightBuffer[n],l=box2d.b2Sub_V2_V2(this.m_accumulation2Buffer[n],this.m_accumulation2Buffer[p],e);a=box2d.b2Min(o*(x-2)+t*box2d.b2Dot_V2_V2(l,s),d)*a,a=box2d.b2Mul_S_V2(a,s,r);i[p].SelfSub(a),i[n].SelfAdd(a)}},box2d.b2ParticleSystem.prototype.SolveTensile.s_weightedNormal=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveTensile.s_s=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveTensile.s_f=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveViscous=function(){for(var o=box2d.b2ParticleSystem.prototype.SolveViscous.s_v,t=box2d.b2ParticleSystem.prototype.SolveViscous.s_f,e=this.m_positionBuffer.data,r=this.m_velocityBuffer.data,i=this.m_def.viscousStrength,b=this.GetParticleInvMass(),p=0;p<this.m_bodyContactBuffer.count;p++){var n=(x=this.m_bodyContactBuffer.data[p]).index;if(this.m_flagsBuffer.data[n]&box2d.b2ParticleFlag.b2_viscousParticle){var a=x.body,s=x.weight,d=x.mass,x=e[n],l=box2d.b2Sub_V2_V2(a.GetLinearVelocityFromWorldPoint(x,box2d.b2Vec2.s_t0),r[n],o);s=box2d.b2Mul_S_V2(i*d*s,l,t);r[n].SelfMulAdd(b,s),a.ApplyLinearImpulse(s.SelfNeg(),x,!0)}}for(p=0;p<this.m_contactBuffer.count;p++)(x=this.m_contactBuffer.data[p]).flags&box2d.b2ParticleFlag.b2_viscousParticle&&(n=x.indexA,a=x.indexB,s=x.weight,l=box2d.b2Sub_V2_V2(r[a],r[n],o),s=box2d.b2Mul_S_V2(i*s,l,t),r[n].SelfAdd(s),r[a].SelfSub(s))},box2d.b2ParticleSystem.prototype.SolveViscous.s_v=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveViscous.s_f=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveRepulsive=function(o){var t=box2d.b2ParticleSystem.prototype.SolveRepulsive.s_f,e=this.m_velocityBuffer.data;o=this.m_def.repulsiveStrength*this.GetCriticalVelocity(o);for(var r=0;r<this.m_contactBuffer.count;r++){var i=this.m_contactBuffer.data[r];if(i.flags&box2d.b2ParticleFlag.b2_repulsiveParticle){var b=i.indexA,p=i.indexB;this.m_groupBuffer[b]!==this.m_groupBuffer[p]&&(i=box2d.b2Mul_S_V2(o*i.weight,i.normal,t),e[b].SelfSub(i),e[p].SelfAdd(i))}}},box2d.b2ParticleSystem.prototype.SolveRepulsive.s_f=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolvePowder=function(o){var t=box2d.b2ParticleSystem.prototype.SolvePowder.s_f,e=this.m_positionBuffer.data,r=this.m_velocityBuffer.data;o=this.m_def.powderStrength*this.GetCriticalVelocity(o);for(var i=1-box2d.b2_particleStride,b=this.GetParticleInvMass(),p=0;p<this.m_bodyContactBuffer.count;p++){var n=(l=this.m_bodyContactBuffer.data[p]).index;if(this.m_flagsBuffer.data[n]&box2d.b2ParticleFlag.b2_powderParticle){var a=l.weight;if(a>i){var s=l.body,d=e[n],x=l.normal,l=box2d.b2Mul_S_V2(o*l.mass*(a-i),x,t);r[n].SelfMulSub(b,l),s.ApplyLinearImpulse(l,d,!0)}}}for(p=0;p<this.m_contactBuffer.count;p++)(l=this.m_contactBuffer.data[p]).flags&box2d.b2ParticleFlag.b2_powderParticle&&((a=l.weight)>i&&(n=l.indexA,s=l.indexB,x=l.normal,l=box2d.b2Mul_S_V2(o*(a-i),x,t),r[n].SelfSub(l),r[s].SelfAdd(l)))},box2d.b2ParticleSystem.prototype.SolvePowder.s_f=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveSolid=function(o){var t=box2d.b2ParticleSystem.prototype.SolveSolid.s_f,e=this.m_velocityBuffer.data;this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer),o=o.inv_dt*this.m_def.ejectionStrength;for(var r=0;r<this.m_contactBuffer.count;r++){var i=this.m_contactBuffer.data[r],b=i.indexA,p=i.indexB;this.m_groupBuffer[b]!==this.m_groupBuffer[p]&&(i=box2d.b2Mul_S_V2(o*(this.m_depthBuffer[b]+this.m_depthBuffer[p])*i.weight,i.normal,t),e[b].SelfSub(i),e[p].SelfAdd(i))}},box2d.b2ParticleSystem.prototype.SolveSolid.s_f=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.SolveForce=function(o){var t=this.m_velocityBuffer.data;o=o.dt*this.GetParticleInvMass();for(var e=0;e<this.m_count;e++)t[e].SelfMulAdd(o,this.m_forceBuffer[e]);this.m_hasForce=!1},box2d.b2ParticleSystem.prototype.SolveColorMixing=function(){box2d.b2Assert(null!==this.m_colorBuffer.data);var o=Math.floor(128*this.m_def.colorMixingStrength);if(o)for(var t=0;t<this.m_contactBuffer.count;t++){var e=(r=this.m_contactBuffer.data[t]).indexA,r=r.indexB;this.m_flagsBuffer.data[e]&this.m_flagsBuffer.data[r]&box2d.b2ParticleFlag.b2_colorMixingParticle&&box2d.b2ParticleColor.MixColors(this.m_colorBuffer.data[e],this.m_colorBuffer.data[r],o)}},box2d.b2ParticleSystem.prototype.SolveZombie=function(){for(var o=0,t=[],e=0;e<this.m_count;e++)t[e]=box2d.b2_invalidParticleIndex;box2d.b2Assert(t.length===this.m_count);var r=0;for(e=0;e<this.m_count;e++){var i=this.m_flagsBuffer.data[e];if(i&box2d.b2ParticleFlag.b2_zombieParticle){var b=this.m_world.m_destructionListener;i&box2d.b2ParticleFlag.b2_destructionListenerParticle&&b&&b.SayGoodbyeParticle(this,e),this.m_handleIndexBuffer.data&&(b=this.m_handleIndexBuffer.data[e])&&(b.SetIndex(box2d.b2_invalidParticleIndex),this.m_handleIndexBuffer.data[e]=null),t[e]=box2d.b2_invalidParticleIndex}else t[e]=o,e!==o&&(this.m_handleIndexBuffer.data&&((b=this.m_handleIndexBuffer.data[e])&&b.SetIndex(o),this.m_handleIndexBuffer.data[o]=b),this.m_flagsBuffer.data[o]=this.m_flagsBuffer.data[e],this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[o]=this.m_lastBodyContactStepBuffer.data[e]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[o]=this.m_bodyContactCountBuffer.data[e]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[o]=this.m_consecutiveContactStepsBuffer.data[e]),this.m_positionBuffer.data[o].Copy(this.m_positionBuffer.data[e]),this.m_velocityBuffer.data[o].Copy(this.m_velocityBuffer.data[e]),this.m_groupBuffer[o]=this.m_groupBuffer[e],this.m_hasForce&&this.m_forceBuffer[o].Copy(this.m_forceBuffer[e]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[o]=this.m_staticPressureBuffer[e]),this.m_depthBuffer&&(this.m_depthBuffer[o]=this.m_depthBuffer[e]),this.m_colorBuffer.data&&this.m_colorBuffer.data[o].Copy(this.m_colorBuffer.data[e]),this.m_userDataBuffer.data&&(this.m_userDataBuffer.data[o]=this.m_userDataBuffer.data[e]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[o]=this.m_expirationTimeBuffer.data[e])),o++,r|=i}for(e=0;e<this.m_proxyBuffer.count;e++)(i=this.m_proxyBuffer.data[e]).index=t[i.index];for(this.m_proxyBuffer.RemoveIf(function(o){return 0>o.index}),e=0;e<this.m_contactBuffer.count;e++)(i=this.m_contactBuffer.data[e]).indexA=t[i.indexA],i.indexB=t[i.indexB];for(this.m_contactBuffer.RemoveIf(function(o){return 0>o.indexA||0>o.indexB}),e=0;e<this.m_bodyContactBuffer.count;e++)(i=this.m_bodyContactBuffer.data[e]).index=t[i.index];for(this.m_bodyContactBuffer.RemoveIf(function(o){return 0>o.index}),e=0;e<this.m_pairBuffer.count;e++)(i=this.m_pairBuffer.data[e]).indexA=t[i.indexA],i.indexB=t[i.indexB];for(this.m_pairBuffer.RemoveIf(function(o){return 0>o.indexA||0>o.indexB}),e=0;e<this.m_triadBuffer.count;e++)(i=this.m_triadBuffer.data[e]).indexA=t[i.indexA],i.indexB=t[i.indexB],i.indexC=t[i.indexC];if(this.m_triadBuffer.RemoveIf(function(o){return 0>o.indexA||0>o.indexB||0>o.indexC}),this.m_indexByExpirationTimeBuffer.data)for(i=e=0;i<this.m_count;i++)(b=t[this.m_indexByExpirationTimeBuffer.data[i]])!==box2d.b2_invalidParticleIndex&&(this.m_indexByExpirationTimeBuffer.data[e++]=b);for(i=this.m_groupList;i;i=i.GetNext()){b=o;var p=0,n=!1;for(e=i.m_firstIndex;e<i.m_lastIndex;e++){var a=t[e];0<=a?(b=box2d.b2Min(b,a),p=box2d.b2Max(p,a+1)):n=!0}b<p?(i.m_firstIndex=b,i.m_lastIndex=p,n&&i.m_groupFlags&box2d.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SetGroupFlags(i,i.m_groupFlags|box2d.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth)):(i.m_firstIndex=0,i.m_lastIndex=0,i.m_groupFlags&box2d.b2ParticleGroupFlag.b2_particleGroupCanBeEmpty||this.SetGroupFlags(i,i.m_groupFlags|box2d.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed))}for(this.m_count=o,this.m_allParticleFlags=r,this.m_needsUpdateAllParticleFlags=!1,i=this.m_groupList;i;)o=i.GetNext(),i.m_groupFlags&box2d.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed&&this.DestroyParticleGroup(i),i=o},box2d.b2ParticleSystem.prototype.SolveLifetimes=function(o){box2d.b2Assert(null!==this.m_expirationTimeBuffer.data),box2d.b2Assert(null!==this.m_indexByExpirationTimeBuffer.data),this.m_timeElapsed=this.LifetimeToExpirationTime(o.dt),o=this.GetQuantizedTimeElapsed();var t=this.m_expirationTimeBuffer.data,e=this.m_indexByExpirationTimeBuffer.data,r=this.GetParticleCount();for(this.m_expirationTimeBufferRequiresSorting&&(box2d.std_sort(e,0,r,function(o,e){var r=t[o],i=t[e],b=0>=r;return b===0>=i?r>i:b}),this.m_expirationTimeBufferRequiresSorting=!1),--r;0<=r;--r){var i=e[r],b=t[i];if(o<b||0>=b)break;this.DestroyParticle(i)}},box2d.b2ParticleSystem.prototype.RotateBuffer=function(o,t,e){function r(r){return r<o?r:r<t?r+e-t:r<e?r+o-t:r}if(o!==t&&t!==e){if(box2d.b2Assert(t>=o&&t<=e),box2d.std_rotate(this.m_flagsBuffer.data,o,t,e),this.m_lastBodyContactStepBuffer.data&&box2d.std_rotate(this.m_lastBodyContactStepBuffer.data,o,t,e),this.m_bodyContactCountBuffer.data&&box2d.std_rotate(this.m_bodyContactCountBuffer.data,o,t,e),this.m_consecutiveContactStepsBuffer.data&&box2d.std_rotate(this.m_consecutiveContactStepsBuffer.data,o,t,e),box2d.std_rotate(this.m_positionBuffer.data,o,t,e),box2d.std_rotate(this.m_velocityBuffer.data,o,t,e),box2d.std_rotate(this.m_groupBuffer,o,t,e),this.m_hasForce&&box2d.std_rotate(this.m_forceBuffer,o,t,e),this.m_staticPressureBuffer&&box2d.std_rotate(this.m_staticPressureBuffer,o,t,e),this.m_depthBuffer&&box2d.std_rotate(this.m_depthBuffer,o,t,e),this.m_colorBuffer.data&&box2d.std_rotate(this.m_colorBuffer.data,o,t,e),this.m_userDataBuffer.data&&box2d.std_rotate(this.m_userDataBuffer.data,o,t,e),this.m_handleIndexBuffer.data){box2d.std_rotate(this.m_handleIndexBuffer.data,o,t,e);for(var i=o;i<e;++i){(b=this.m_handleIndexBuffer.data[i])&&b.SetIndex(r(b.GetIndex()))}}if(this.m_expirationTimeBuffer.data){box2d.std_rotate(this.m_expirationTimeBuffer.data,o,t,e);var b=this.GetParticleCount(),p=this.m_indexByExpirationTimeBuffer.data;for(i=0;i<b;++i)p[i]=r(p[i])}for(i=0;i<this.m_proxyBuffer.count;i++)(b=this.m_proxyBuffer.data[i]).index=r(b.index);for(i=0;i<this.m_contactBuffer.count;i++)(b=this.m_contactBuffer.data[i]).indexA=r(b.indexA),b.indexB=r(b.indexB);for(i=0;i<this.m_bodyContactBuffer.count;i++)(b=this.m_bodyContactBuffer.data[i]).index=r(b.index);for(i=0;i<this.m_pairBuffer.count;i++)(b=this.m_pairBuffer.data[i]).indexA=r(b.indexA),b.indexB=r(b.indexB);for(i=0;i<this.m_triadBuffer.count;i++)(b=this.m_triadBuffer.data[i]).indexA=r(b.indexA),b.indexB=r(b.indexB),b.indexC=r(b.indexC);for(i=this.m_groupList;i;i=i.GetNext())i.m_firstIndex=r(i.m_firstIndex),i.m_lastIndex=r(i.m_lastIndex-1)+1}},box2d.b2ParticleSystem.prototype.GetCriticalVelocity=function(o){return this.m_particleDiameter*o.inv_dt},box2d.b2ParticleSystem.prototype.GetCriticalVelocitySquared=function(o){return(o=this.GetCriticalVelocity(o))*o},box2d.b2ParticleSystem.prototype.GetCriticalPressure=function(o){return this.m_def.density*this.GetCriticalVelocitySquared(o)},box2d.b2ParticleSystem.prototype.GetParticleStride=function(){return box2d.b2_particleStride*this.m_particleDiameter},box2d.b2ParticleSystem.prototype.GetParticleMass=function(){var o=this.GetParticleStride();return this.m_def.density*o*o},box2d.b2ParticleSystem.prototype.GetParticleInvMass=function(){var o=1/box2d.b2_particleStride*this.m_inverseDiameter;return this.m_inverseDensity*o*o},box2d.b2ParticleSystem.prototype.GetFixtureContactFilter=function(){return this.m_allParticleFlags&box2d.b2ParticleFlag.b2_fixtureContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null},box2d.b2ParticleSystem.prototype.GetParticleContactFilter=function(){return this.m_allParticleFlags&box2d.b2ParticleFlag.b2_particleContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null},box2d.b2ParticleSystem.prototype.GetFixtureContactListener=function(){return this.m_allParticleFlags&box2d.b2ParticleFlag.b2_fixtureContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null},box2d.b2ParticleSystem.prototype.GetParticleContactListener=function(){return this.m_allParticleFlags&box2d.b2ParticleFlag.b2_particleContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null},box2d.b2ParticleSystem.prototype.SetUserOverridableBuffer=function(o,t,e){box2d.b2Assert(null!==t&&0<e||null===t&&0===e),o.data=t,o.userSuppliedCapacity=e},box2d.b2ParticleSystem.prototype.SetGroupFlags=function(o,t){var e=o.m_groupFlags;(e^t)&box2d.b2ParticleGroupFlag.b2_solidParticleGroup&&(t|=box2d.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth),e&~t&&(this.m_needsUpdateAllGroupFlags=!0),~this.m_allGroupFlags&t&&(t&box2d.b2ParticleGroupFlag.b2_solidParticleGroup&&(this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer)),this.m_allGroupFlags|=t),o.m_groupFlags=t},box2d.b2ParticleSystem.prototype.RemoveSpuriousBodyContacts=function(){box2d.std_sort(this.m_bodyContactBuffer.data,0,this.m_bodyContactBuffer.count,box2d.b2ParticleSystem.BodyContactCompare);var o=box2d.b2ParticleSystem.prototype.RemoveSpuriousBodyContacts.s_n,t=box2d.b2ParticleSystem.prototype.RemoveSpuriousBodyContacts.s_pos,e=box2d.b2ParticleSystem.prototype.RemoveSpuriousBodyContacts.s_normal,r=this,i=-1,b=0;this.m_bodyContactBuffer.count=box2d.std_remove_if(this.m_bodyContactBuffer.data,function(p){if(p.index!==i&&(b=0,i=p.index),3<b++)return 0,!0;var n=o.Copy(p.normal);if(n.SelfMul(r.m_particleDiameter*(1-p.weight)),n=box2d.b2Add_V2_V2(r.m_positionBuffer.data[p.index],n,t),!p.fixture.TestPoint(n)){for(var a=p.fixture.GetShape().GetChildCount(),s=0;s<a;s++)if(p.fixture.ComputeDistance(n,e,s)<box2d.b2_linearSlop)return!1;return 0,!0}return!1},this.m_bodyContactBuffer.count)},box2d.b2ParticleSystem.prototype.RemoveSpuriousBodyContacts.s_n=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.RemoveSpuriousBodyContacts.s_pos=new box2d.b2Vec2,box2d.b2ParticleSystem.prototype.RemoveSpuriousBodyContacts.s_normal=new box2d.b2Vec2,box2d.b2ParticleSystem.BodyContactCompare=function(o,t){return o.index===t.index?o.weight>t.weight:o.index<t.index},box2d.b2ParticleSystem.prototype.DetectStuckParticle=function(o){0>=this.m_stuckThreshold||(++this.m_bodyContactCountBuffer.data[o],2===this.m_bodyContactCountBuffer.data[o]&&(++this.m_consecutiveContactStepsBuffer.data[o],this.m_consecutiveContactStepsBuffer.data[o]>this.m_stuckThreshold&&(this.m_stuckParticleBuffer.data[this.m_stuckParticleBuffer.Append()]=o)),this.m_lastBodyContactStepBuffer.data[o]=this.m_timestamp)},box2d.b2ParticleSystem.prototype.ValidateParticleIndex=function(o){return 0<=o&&o<this.GetParticleCount()&&o!==box2d.b2_invalidParticleIndex},box2d.b2ParticleSystem.prototype.GetQuantizedTimeElapsed=function(){return Math.floor(this.m_timeElapsed/4294967296)},box2d.b2ParticleSystem.prototype.LifetimeToExpirationTime=function(o){return this.m_timeElapsed+Math.floor(o/this.m_def.lifetimeGranularity*4294967296)},box2d.b2ParticleSystem.prototype.ForceCanBeApplied=function(o){return!(o&box2d.b2ParticleFlag.b2_wallParticle)},box2d.b2ParticleSystem.prototype.PrepareForceBuffer=function(){if(!this.m_hasForce){for(var o=0;o<this.m_count;o++)this.m_forceBuffer[o].SetZero();this.m_hasForce=!0}},box2d.b2ParticleSystem.prototype.IsRigidGroup=function(o){return null!==o&&0!=(o.m_groupFlags&box2d.b2ParticleGroupFlag.b2_rigidParticleGroup)},box2d.b2ParticleSystem.prototype.GetLinearVelocity=function(o,t,e,r){return this.IsRigidGroup(o)?o.GetLinearVelocityFromWorldPoint(e,r):r.Copy(this.m_velocityBuffer.data[t])},box2d.b2ParticleSystem.prototype.InitDampingParameter=function(o,t,e,r,i,b,p,n){o[0]=0<r?1/r:0,t[0]=0<i?1/i:0,e[0]=box2d.b2Cross_V2_V2(box2d.b2Sub_V2_V2(p,b,box2d.b2Vec2.s_t0),n)},box2d.b2ParticleSystem.prototype.InitDampingParameterWithRigidGroupOrParticle=function(o,t,e,r,i,b,p,n){r?this.InitDampingParameter(o,t,e,i.GetMass(),i.GetInertia(),i.GetCenter(),p,n):this.InitDampingParameter(o,t,e,this.m_flagsBuffer.data[b]&box2d.b2ParticleFlag.b2_wallParticle?0:this.GetParticleMass(),0,p,p,n)},box2d.b2ParticleSystem.prototype.ComputeDampingImpulse=function(o,t,e,r,i,b,p){return 0<(o=o+t*e*e+r+i*b*b)?p/o:0},box2d.b2ParticleSystem.prototype.ApplyDamping=function(o,t,e,r,i,b,p,n){r?(i.m_linearVelocity.SelfMulAdd(p*o,n),i.m_angularVelocity+=p*e*t):this.m_velocityBuffer.data[b].SelfMulAdd(p*o,n)},box2d.b2StackQueue=function(o){this.m_buffer=box2d.b2MakeArray(o),this.m_end=o},box2d.b2StackQueue.prototype.m_buffer=null,box2d.b2StackQueue.prototype.m_front=0,box2d.b2StackQueue.prototype.m_back=0,box2d.b2StackQueue.prototype.m_capacity=0,box2d.b2StackQueue.prototype.Push=function(o){if(this.m_back>=this.m_capacity){for(var t=this.m_front;t<this.m_back;t++)this.m_buffer[t-this.m_front]=this.m_buffer[t];this.m_back-=this.m_front,this.m_front=0,this.m_back>=this.m_capacity&&(0<this.m_capacity?(this.m_buffer.concat(box2d.b2MakeArray(this.m_capacity)),this.m_capacity*=2):(this.m_buffer.concat(box2d.b2MakeArray(1)),this.m_capacity=1))}this.m_buffer[this.m_back]=o,this.m_back++},box2d.b2StackQueue.prototype.Pop=function(){box2d.b2Assert(this.m_front<this.m_back),this.m_buffer[this.m_front]=null,this.m_front++},box2d.b2StackQueue.prototype.Empty=function(){return box2d.b2Assert(this.m_front<=this.m_back),this.m_front===this.m_back},box2d.b2StackQueue.prototype.Front=function(){return this.m_buffer[this.m_front]},box2d.b2VoronoiDiagram=function(o){this.m_generatorBuffer=box2d.b2MakeArray(o,function(o){return new box2d.b2VoronoiDiagram.Generator}),this.m_generatorCapacity=o},goog.exportSymbol("box2d.b2VoronoiDiagram",box2d.b2VoronoiDiagram),box2d.b2VoronoiDiagram.prototype.m_generatorBuffer=null,goog.exportProperty(box2d.b2VoronoiDiagram.prototype,"m_generatorBuffer",box2d.b2VoronoiDiagram.prototype.m_generatorBuffer),box2d.b2VoronoiDiagram.prototype.m_generatorCapacity=0,box2d.b2VoronoiDiagram.prototype.m_generatorCount=0,box2d.b2VoronoiDiagram.prototype.m_countX=0,box2d.b2VoronoiDiagram.prototype.m_countY=0,box2d.b2VoronoiDiagram.prototype.m_diagram=null,box2d.b2VoronoiDiagram.Generator=function(){this.center=new box2d.b2Vec2},box2d.b2VoronoiDiagram.Generator.prototype.center=null,box2d.b2VoronoiDiagram.Generator.prototype.tag=0,box2d.b2VoronoiDiagram.b2VoronoiDiagramTask=function(o,t,e,r){this.m_x=o,this.m_y=t,this.m_i=e,this.m_generator=r},box2d.b2VoronoiDiagram.b2VoronoiDiagramTask.prototype.m_x=0,box2d.b2VoronoiDiagram.b2VoronoiDiagramTask.prototype.m_y=0,box2d.b2VoronoiDiagram.b2VoronoiDiagramTask.prototype.m_i=0,box2d.b2VoronoiDiagram.b2VoronoiDiagramTask.prototype.m_generator=null,box2d.b2VoronoiDiagram.prototype.AddGenerator=function(o,t,e){box2d.b2Assert(this.m_generatorCount<this.m_generatorCapacity);var r=this.m_generatorBuffer[this.m_generatorCount++];r.center.Copy(o),r.tag=t,r.necessary=e},goog.exportProperty(box2d.b2VoronoiDiagram.prototype,"AddGenerator",box2d.b2VoronoiDiagram.prototype.AddGenerator),box2d.b2VoronoiDiagram.prototype.Generate=function(o,t){box2d.b2Assert(null===this.m_diagram);for(var e=1/o,r=new box2d.b2Vec2(+box2d.b2_maxFloat,+box2d.b2_maxFloat),i=new box2d.b2Vec2(-box2d.b2_maxFloat,-box2d.b2_maxFloat),b=0,p=0;p<this.m_generatorCount;p++){(a=this.m_generatorBuffer[p]).necessary&&(box2d.b2Min_V2_V2(r,a.center,r),box2d.b2Max_V2_V2(i,a.center,i),++b)}if(0===b)this.m_countY=this.m_countX=0;else{for(r.x-=t,r.y-=t,i.x+=t,i.y+=t,this.m_countX=1+Math.floor(e*(i.x-r.x)),this.m_countY=1+Math.floor(e*(i.y-r.y)),this.m_diagram=box2d.b2MakeArray(this.m_countX*this.m_countY),i=new box2d.b2StackQueue(4*this.m_countX*this.m_countY),p=0;p<this.m_generatorCount;p++){(a=this.m_generatorBuffer[p]).center.SelfSub(r).SelfMul(e);b=Math.floor(a.center.x);var n=Math.floor(a.center.y);0<=b&&0<=n&&b<this.m_countX&&n<this.m_countY&&i.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(b,n,b+n*this.m_countX,a))}for(;!i.Empty();)b=(p=i.Front()).m_x,n=p.m_y,e=p.m_i,a=p.m_generator,i.Pop(),this.m_diagram[e]||(this.m_diagram[e]=a,0<b&&i.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(b-1,n,e-1,a)),0<n&&i.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(b,n-1,e-this.m_countX,a)),b<this.m_countX-1&&i.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(b+1,n,e+1,a)),n<this.m_countY-1&&i.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(b,n+1,e+this.m_countX,a)));for(n=0;n<this.m_countY;n++)for(b=0;b<this.m_countX-1;b++)e=b+n*this.m_countX,(r=this.m_diagram[e])!==(p=this.m_diagram[e+1])&&(i.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(b,n,e,p)),i.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(b+1,n,e+1,r)));for(n=0;n<this.m_countY-1;n++)for(b=0;b<this.m_countX;b++)e=b+n*this.m_countX,(r=this.m_diagram[e])!==(p=this.m_diagram[e+this.m_countX])&&(i.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(b,n,e,p)),i.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(b,n+1,e+this.m_countX,r)));for(;!i.Empty();)if(b=(p=i.Front()).m_x,n=p.m_y,e=p.m_i,p=p.m_generator,i.Pop(),(r=this.m_diagram[e])!==p){var a=r.center.x-b,s=(r=r.center.y-n,p.center.x-b),d=p.center.y-n;a*a+r*r>s*s+d*d&&(this.m_diagram[e]=p,0<b&&i.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(b-1,n,e-1,p)),0<n&&i.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(b,n-1,e-this.m_countX,p)),b<this.m_countX-1&&i.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(b+1,n,e+1,p)),n<this.m_countY-1&&i.Push(new box2d.b2VoronoiDiagram.b2VoronoiDiagramTask(b,n+1,e+this.m_countX,p)))}}},goog.exportProperty(box2d.b2VoronoiDiagram.prototype,"Generate",box2d.b2VoronoiDiagram.prototype.Generate),box2d.b2VoronoiDiagram.prototype.GetNodes=function(o){for(var t=0;t<this.m_countY-1;t++)for(var e=0;e<this.m_countX-1;e++){var r=e+t*this.m_countX,i=this.m_diagram[r],b=this.m_diagram[r+1],p=this.m_diagram[r+this.m_countX];r=this.m_diagram[r+1+this.m_countX];b!==p&&(i!==b&&i!==p&&(i.necessary||b.necessary||p.necessary)&&o(i.tag,b.tag,p.tag),r!==b&&r!==p&&(i.necessary||b.necessary||p.necessary)&&o(b.tag,r.tag,p.tag))}},goog.exportProperty(box2d.b2VoronoiDiagram.prototype,"GetNodes",box2d.b2VoronoiDiagram.prototype.GetNodes),box2d.b2RopeDef=function(){this.vertices=[],this.masses=[],this.gravity=new box2d.b2Vec2},goog.exportSymbol("box2d.b2RopeDef",box2d.b2RopeDef),box2d.b2RopeDef.prototype.vertices=null,box2d.b2RopeDef.prototype.count=0,box2d.b2RopeDef.prototype.masses=null,box2d.b2RopeDef.prototype.gravity=null,box2d.b2RopeDef.prototype.damping=.1,box2d.b2RopeDef.prototype.k2=.9,box2d.b2RopeDef.prototype.k3=.1,box2d.b2Rope=function(){this.m_gravity=new box2d.b2Vec2},goog.exportSymbol("box2d.b2Rope",box2d.b2Rope),box2d.b2Rope.prototype.m_count=0,box2d.b2Rope.prototype.m_ps=null,box2d.b2Rope.prototype.m_p0s=null,box2d.b2Rope.prototype.m_vs=null,box2d.b2Rope.prototype.m_ims=null,box2d.b2Rope.prototype.m_Ls=null,box2d.b2Rope.prototype.m_as=null,box2d.b2Rope.prototype.m_gravity=null,box2d.b2Rope.prototype.m_damping=0,box2d.b2Rope.prototype.m_k2=1,box2d.b2Rope.prototype.m_k3=.1,box2d.b2Rope.prototype.GetVertexCount=function(){return this.m_count},goog.exportProperty(box2d.b2Rope.prototype,"GetVertexCount",box2d.b2Rope.prototype.GetVertexCount),box2d.b2Rope.prototype.GetVertices=function(){return this.m_ps},goog.exportProperty(box2d.b2Rope.prototype,"GetVertices",box2d.b2Rope.prototype.GetVertices),box2d.b2Rope.prototype.Initialize=function(o){box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=o.count),this.m_count=o.count,this.m_ps=box2d.b2Vec2.MakeArray(this.m_count),this.m_p0s=box2d.b2Vec2.MakeArray(this.m_count),this.m_vs=box2d.b2Vec2.MakeArray(this.m_count),this.m_ims=box2d.b2MakeNumberArray(this.m_count);for(var t=0;t<this.m_count;++t){this.m_ps[t].Copy(o.vertices[t]),this.m_p0s[t].Copy(o.vertices[t]),this.m_vs[t].SetZero();var e=o.masses[t];this.m_ims[t]=0<e?1/e:0}var r=this.m_count-1;e=this.m_count-2;for(this.m_Ls=box2d.b2MakeNumberArray(r),this.m_as=box2d.b2MakeNumberArray(e),t=0;t<r;++t){var i=this.m_ps[t],b=this.m_ps[t+1];this.m_Ls[t]=box2d.b2Distance(i,b)}for(t=0;t<e;++t)i=this.m_ps[t],b=this.m_ps[t+1],r=this.m_ps[t+2],i=box2d.b2Sub_V2_V2(b,i,box2d.b2Vec2.s_t0),r=box2d.b2Sub_V2_V2(r,b,box2d.b2Vec2.s_t1),b=box2d.b2Cross_V2_V2(i,r),i=box2d.b2Dot_V2_V2(i,r),this.m_as[t]=box2d.b2Atan2(b,i);this.m_gravity.Copy(o.gravity),this.m_damping=o.damping,this.m_k2=o.k2,this.m_k3=o.k3},goog.exportProperty(box2d.b2Rope.prototype,"Initialize",box2d.b2Rope.prototype.Initialize),box2d.b2Rope.prototype.Step=function(o,t){if(0!==o){for(var e=Math.exp(-o*this.m_damping),r=0;r<this.m_count;++r)this.m_p0s[r].Copy(this.m_ps[r]),0<this.m_ims[r]&&this.m_vs[r].SelfMulAdd(o,this.m_gravity),this.m_vs[r].SelfMul(e),this.m_ps[r].SelfMulAdd(o,this.m_vs[r]);for(r=0;r<t;++r)this.SolveC2(),this.SolveC3(),this.SolveC2();for(e=1/o,r=0;r<this.m_count;++r)box2d.b2Mul_S_V2(e,box2d.b2Sub_V2_V2(this.m_ps[r],this.m_p0s[r],box2d.b2Vec2.s_t0),this.m_vs[r])}},goog.exportProperty(box2d.b2Rope.prototype,"Step",box2d.b2Rope.prototype.Step),box2d.b2Rope.prototype.SolveC2=function(){for(var o=this.m_count-1,t=0;t<o;++t){var e=this.m_ps[t],r=this.m_ps[t+1],i=box2d.b2Sub_V2_V2(r,e,box2d.b2Rope.s_d),b=i.Normalize(),p=this.m_ims[t],n=this.m_ims[t+1];if(0!==p+n){var a=n/(p+n);e.SelfMulSub(p/(p+n)*this.m_k2*(this.m_Ls[t]-b),i),r.SelfMulAdd(this.m_k2*a*(this.m_Ls[t]-b),i)}}},goog.exportProperty(box2d.b2Rope.prototype,"SolveC2",box2d.b2Rope.prototype.SolveC2),box2d.b2Rope.s_d=new box2d.b2Vec2,box2d.b2Rope.prototype.SetAngle=function(o){for(var t=this.m_count-2,e=0;e<t;++e)this.m_as[e]=o},goog.exportProperty(box2d.b2Rope.prototype,"SetAngle",box2d.b2Rope.prototype.SetAngle),box2d.b2Rope.prototype.SolveC3=function(){for(var o=this.m_count-2,t=0;t<o;++t){var e=this.m_ps[t],r=this.m_ps[t+1],i=this.m_ps[t+2],b=this.m_ims[t],p=this.m_ims[t+1],n=this.m_ims[t+2],a=box2d.b2Sub_V2_V2(r,e,box2d.b2Rope.s_d1),s=box2d.b2Sub_V2_V2(i,r,box2d.b2Rope.s_d2);if(0!=(l=a.LengthSquared())*(y=s.LengthSquared())){var d=box2d.b2Cross_V2_V2(a,s),x=box2d.b2Dot_V2_V2(a,s),l=(d=box2d.b2Atan2(d,x),a=box2d.b2Mul_S_V2(-1/l,a.SelfSkew(),box2d.b2Rope.s_Jd1),box2d.b2Mul_S_V2(1/y,s.SelfSkew(),box2d.b2Rope.s_Jd2)),y=(s=box2d.b2Rope.s_J1.Copy(a).SelfNeg(),box2d.b2Sub_V2_V2(a,l,box2d.b2Rope.s_J2));a=l;if(0!==(l=b*box2d.b2Dot_V2_V2(s,s)+p*box2d.b2Dot_V2_V2(y,y)+n*box2d.b2Dot_V2_V2(a,a))){for(l=1/l,x=d-this.m_as[t];x>box2d.b2_pi;)x=(d-=2*box2d.b2_pi)-this.m_as[t];for(;x<-box2d.b2_pi;)x=(d+=2*box2d.b2_pi)-this.m_as[t];d=-this.m_k3*l*x,e.SelfMulAdd(b*d,s),r.SelfMulAdd(p*d,y),i.SelfMulAdd(n*d,a)}}}},goog.exportProperty(box2d.b2Rope.prototype,"SolveC3",box2d.b2Rope.prototype.SolveC3),box2d.b2Rope.s_d1=new box2d.b2Vec2,box2d.b2Rope.s_d2=new box2d.b2Vec2,box2d.b2Rope.s_Jd1=new box2d.b2Vec2,box2d.b2Rope.s_Jd2=new box2d.b2Vec2,box2d.b2Rope.s_J1=new box2d.b2Vec2,box2d.b2Rope.s_J2=new box2d.b2Vec2,box2d.b2Rope.prototype.Draw=function(o){for(var t=new box2d.b2Color(.4,.5,.7),e=0;e<this.m_count-1;++e)o.DrawSegment(this.m_ps[e],this.m_ps[e+1],t)},goog.exportProperty(box2d.b2Rope.prototype,"Draw",box2d.b2Rope.prototype.Draw);
},{}],"WyQd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.html5Factory=void 0;const e=require("../../thirdparty/box2d-html5"),{b2World:t,b2Vec2:o,b2EdgeShape:r,b2PolygonShape:n,b2BodyDef:y,b2BodyType:d}=e.box2d,a=(e,a,x,p)=>{const s=new t(new o(e.x,e.y)),b=s.CreateBody(new y),c=new r;return c.Set(new o(a.x,a.y),new o(x.x,x.y)),b.CreateFixture(c,p),{name:"box2d-html5",createBoxShape:(e,t)=>(new n).SetAsBox(e,t),createBoxBody(e,t,o,r){const n=new y;n.type=d.b2_dynamicBody,n.position.Set(t,o),s.CreateBody(n).CreateFixture(e,r)},step(e,t,o){s.Step(e,t,o)}}};exports.html5Factory=a;
},{"../../thirdparty/box2d-html5":"HBwq"}],"v6Fx":[function(require,module,exports) {
var t={};!function(t,i){function o(){}!(Object.prototype.defineProperty instanceof Function)&&Object.prototype.__defineGetter__ instanceof Function&&Object.prototype.__defineSetter__ instanceof Function&&(Object.defineProperty=function(t,i,o){o.get instanceof Function&&t.__defineGetter__(i,o.get),o.set instanceof Function&&t.__defineSetter__(i,o.set)}),t.inherit=function(t,i){o.prototype=i.prototype,t.prototype=new o,t.prototype.constructor=t},t.generateCallback=function(t,i){return function(){i.apply(t,arguments)}},t.NVector=function(t){t===i&&(t=0);for(var o=Array(t||0),e=0;e<t;++e)o[e]=0;return o},t.is=function(t,o){return null!==t&&(o instanceof Function&&t instanceof o||!(t.constructor.__implements==i||!t.constructor.__implements[o]))},t.parseUInt=function(t){return Math.abs(parseInt(t))}}(t);var i,o=Array,e=t.NVector;for(void 0===t&&(t={}),void 0===t.Collision&&(t.Collision={}),void 0===t.Collision.Shapes&&(t.Collision.Shapes={}),void 0===t.Common&&(t.Common={}),void 0===t.Common.Math&&(t.Common.Math={}),void 0===t.Dynamics&&(t.Dynamics={}),void 0===t.Dynamics.Contacts&&(t.Dynamics.Contacts={}),void 0===t.Dynamics.Controllers&&(t.Dynamics.Controllers={}),void 0===t.Dynamics.Joints&&(t.Dynamics.Joints={}),function(){t.Collision.IBroadPhase="Box2D.Collision.IBroadPhase",t.Collision.b2AABB=function t(){t.b2AABB.apply(this,arguments)},t.Collision.b2Bound=function t(){t.b2Bound.apply(this,arguments)},t.Collision.b2BoundValues=function t(){t.b2BoundValues.apply(this,arguments),this.constructor===t&&this.b2BoundValues.apply(this,arguments)},t.Collision.b2Collision=function t(){t.b2Collision.apply(this,arguments)},t.Collision.b2ContactID=function t(){t.b2ContactID.apply(this,arguments),this.constructor===t&&this.b2ContactID.apply(this,arguments)},t.Collision.b2ContactPoint=function t(){t.b2ContactPoint.apply(this,arguments)},t.Collision.b2Distance=function t(){t.b2Distance.apply(this,arguments)},t.Collision.b2DistanceInput=function t(){t.b2DistanceInput.apply(this,arguments)},t.Collision.b2DistanceOutput=function t(){t.b2DistanceOutput.apply(this,arguments)},t.Collision.b2DistanceProxy=function t(){t.b2DistanceProxy.apply(this,arguments)},t.Collision.b2DynamicTree=function t(){t.b2DynamicTree.apply(this,arguments),this.constructor===t&&this.b2DynamicTree.apply(this,arguments)},t.Collision.b2DynamicTreeBroadPhase=function t(){t.b2DynamicTreeBroadPhase.apply(this,arguments)},t.Collision.b2DynamicTreeNode=function t(){t.b2DynamicTreeNode.apply(this,arguments)},t.Collision.b2DynamicTreePair=function t(){t.b2DynamicTreePair.apply(this,arguments)},t.Collision.b2Manifold=function t(){t.b2Manifold.apply(this,arguments),this.constructor===t&&this.b2Manifold.apply(this,arguments)},t.Collision.b2ManifoldPoint=function t(){t.b2ManifoldPoint.apply(this,arguments),this.constructor===t&&this.b2ManifoldPoint.apply(this,arguments)},t.Collision.b2Point=function t(){t.b2Point.apply(this,arguments)},t.Collision.b2RayCastInput=function t(){t.b2RayCastInput.apply(this,arguments),this.constructor===t&&this.b2RayCastInput.apply(this,arguments)},t.Collision.b2RayCastOutput=function t(){t.b2RayCastOutput.apply(this,arguments)},t.Collision.b2Segment=function t(){t.b2Segment.apply(this,arguments)},t.Collision.b2SeparationFunction=function t(){t.b2SeparationFunction.apply(this,arguments)},t.Collision.b2Simplex=function t(){t.b2Simplex.apply(this,arguments),this.constructor===t&&this.b2Simplex.apply(this,arguments)},t.Collision.b2SimplexCache=function t(){t.b2SimplexCache.apply(this,arguments)},t.Collision.b2SimplexVertex=function t(){t.b2SimplexVertex.apply(this,arguments)},t.Collision.b2TimeOfImpact=function t(){t.b2TimeOfImpact.apply(this,arguments)},t.Collision.b2TOIInput=function t(){t.b2TOIInput.apply(this,arguments)},t.Collision.b2WorldManifold=function t(){t.b2WorldManifold.apply(this,arguments),this.constructor===t&&this.b2WorldManifold.apply(this,arguments)},t.Collision.ClipVertex=function t(){t.ClipVertex.apply(this,arguments)},t.Collision.Features=function t(){t.Features.apply(this,arguments)},t.Collision.Shapes.b2CircleShape=function t(){t.b2CircleShape.apply(this,arguments),this.constructor===t&&this.b2CircleShape.apply(this,arguments)},t.Collision.Shapes.b2EdgeChainDef=function t(){t.b2EdgeChainDef.apply(this,arguments),this.constructor===t&&this.b2EdgeChainDef.apply(this,arguments)},t.Collision.Shapes.b2EdgeShape=function t(){t.b2EdgeShape.apply(this,arguments),this.constructor===t&&this.b2EdgeShape.apply(this,arguments)},t.Collision.Shapes.b2MassData=function t(){t.b2MassData.apply(this,arguments)},t.Collision.Shapes.b2PolygonShape=function t(){t.b2PolygonShape.apply(this,arguments),this.constructor===t&&this.b2PolygonShape.apply(this,arguments)},t.Collision.Shapes.b2Shape=function t(){t.b2Shape.apply(this,arguments),this.constructor===t&&this.b2Shape.apply(this,arguments)},t.Common.b2internal="Box2D.Common.b2internal",t.Common.b2Color=function t(){t.b2Color.apply(this,arguments),this.constructor===t&&this.b2Color.apply(this,arguments)},t.Common.b2Settings=function t(){t.b2Settings.apply(this,arguments)},t.Common.Math.b2Mat22=function t(){t.b2Mat22.apply(this,arguments),this.constructor===t&&this.b2Mat22.apply(this,arguments)},t.Common.Math.b2Mat33=function t(){t.b2Mat33.apply(this,arguments),this.constructor===t&&this.b2Mat33.apply(this,arguments)},t.Common.Math.b2Math=function t(){t.b2Math.apply(this,arguments)},t.Common.Math.b2Sweep=function t(){t.b2Sweep.apply(this,arguments)},t.Common.Math.b2Transform=function t(){t.b2Transform.apply(this,arguments),this.constructor===t&&this.b2Transform.apply(this,arguments)},t.Common.Math.b2Vec2=function t(){t.b2Vec2.apply(this,arguments),this.constructor===t&&this.b2Vec2.apply(this,arguments)},t.Common.Math.b2Vec3=function t(){t.b2Vec3.apply(this,arguments),this.constructor===t&&this.b2Vec3.apply(this,arguments)},t.Dynamics.b2Body=function t(){t.b2Body.apply(this,arguments),this.constructor===t&&this.b2Body.apply(this,arguments)},t.Dynamics.b2BodyDef=function t(){t.b2BodyDef.apply(this,arguments),this.constructor===t&&this.b2BodyDef.apply(this,arguments)},t.Dynamics.b2ContactFilter=function t(){t.b2ContactFilter.apply(this,arguments)},t.Dynamics.b2ContactImpulse=function t(){t.b2ContactImpulse.apply(this,arguments)},t.Dynamics.b2ContactListener=function t(){t.b2ContactListener.apply(this,arguments)},t.Dynamics.b2ContactManager=function t(){t.b2ContactManager.apply(this,arguments),this.constructor===t&&this.b2ContactManager.apply(this,arguments)},t.Dynamics.b2DebugDraw=function t(){t.b2DebugDraw.apply(this,arguments),this.constructor===t&&this.b2DebugDraw.apply(this,arguments)},t.Dynamics.b2DestructionListener=function t(){t.b2DestructionListener.apply(this,arguments)},t.Dynamics.b2FilterData=function t(){t.b2FilterData.apply(this,arguments)},t.Dynamics.b2Fixture=function t(){t.b2Fixture.apply(this,arguments),this.constructor===t&&this.b2Fixture.apply(this,arguments)},t.Dynamics.b2FixtureDef=function t(){t.b2FixtureDef.apply(this,arguments),this.constructor===t&&this.b2FixtureDef.apply(this,arguments)},t.Dynamics.b2Island=function t(){t.b2Island.apply(this,arguments),this.constructor===t&&this.b2Island.apply(this,arguments)},t.Dynamics.b2TimeStep=function t(){t.b2TimeStep.apply(this,arguments)},t.Dynamics.b2World=function t(){t.b2World.apply(this,arguments),this.constructor===t&&this.b2World.apply(this,arguments)},t.Dynamics.Contacts.b2CircleContact=function t(){t.b2CircleContact.apply(this,arguments)},t.Dynamics.Contacts.b2Contact=function t(){t.b2Contact.apply(this,arguments),this.constructor===t&&this.b2Contact.apply(this,arguments)},t.Dynamics.Contacts.b2ContactConstraint=function t(){t.b2ContactConstraint.apply(this,arguments),this.constructor===t&&this.b2ContactConstraint.apply(this,arguments)},t.Dynamics.Contacts.b2ContactConstraintPoint=function t(){t.b2ContactConstraintPoint.apply(this,arguments)},t.Dynamics.Contacts.b2ContactEdge=function t(){t.b2ContactEdge.apply(this,arguments)},t.Dynamics.Contacts.b2ContactFactory=function t(){t.b2ContactFactory.apply(this,arguments),this.constructor===t&&this.b2ContactFactory.apply(this,arguments)},t.Dynamics.Contacts.b2ContactRegister=function t(){t.b2ContactRegister.apply(this,arguments)},t.Dynamics.Contacts.b2ContactResult=function t(){t.b2ContactResult.apply(this,arguments)},t.Dynamics.Contacts.b2ContactSolver=function t(){t.b2ContactSolver.apply(this,arguments),this.constructor===t&&this.b2ContactSolver.apply(this,arguments)},t.Dynamics.Contacts.b2EdgeAndCircleContact=function t(){t.b2EdgeAndCircleContact.apply(this,arguments)},t.Dynamics.Contacts.b2NullContact=function t(){t.b2NullContact.apply(this,arguments),this.constructor===t&&this.b2NullContact.apply(this,arguments)},t.Dynamics.Contacts.b2PolyAndCircleContact=function t(){t.b2PolyAndCircleContact.apply(this,arguments)},t.Dynamics.Contacts.b2PolyAndEdgeContact=function t(){t.b2PolyAndEdgeContact.apply(this,arguments)},t.Dynamics.Contacts.b2PolygonContact=function t(){t.b2PolygonContact.apply(this,arguments)},t.Dynamics.Contacts.b2PositionSolverManifold=function t(){t.b2PositionSolverManifold.apply(this,arguments),this.constructor===t&&this.b2PositionSolverManifold.apply(this,arguments)},t.Dynamics.Controllers.b2BuoyancyController=function t(){t.b2BuoyancyController.apply(this,arguments)},t.Dynamics.Controllers.b2ConstantAccelController=function t(){t.b2ConstantAccelController.apply(this,arguments)},t.Dynamics.Controllers.b2ConstantForceController=function t(){t.b2ConstantForceController.apply(this,arguments)},t.Dynamics.Controllers.b2Controller=function t(){t.b2Controller.apply(this,arguments)},t.Dynamics.Controllers.b2ControllerEdge=function t(){t.b2ControllerEdge.apply(this,arguments)},t.Dynamics.Controllers.b2GravityController=function t(){t.b2GravityController.apply(this,arguments)},t.Dynamics.Controllers.b2TensorDampingController=function t(){t.b2TensorDampingController.apply(this,arguments)},t.Dynamics.Joints.b2DistanceJoint=function t(){t.b2DistanceJoint.apply(this,arguments),this.constructor===t&&this.b2DistanceJoint.apply(this,arguments)},t.Dynamics.Joints.b2DistanceJointDef=function t(){t.b2DistanceJointDef.apply(this,arguments),this.constructor===t&&this.b2DistanceJointDef.apply(this,arguments)},t.Dynamics.Joints.b2FrictionJoint=function t(){t.b2FrictionJoint.apply(this,arguments),this.constructor===t&&this.b2FrictionJoint.apply(this,arguments)},t.Dynamics.Joints.b2FrictionJointDef=function t(){t.b2FrictionJointDef.apply(this,arguments),this.constructor===t&&this.b2FrictionJointDef.apply(this,arguments)},t.Dynamics.Joints.b2GearJoint=function t(){t.b2GearJoint.apply(this,arguments),this.constructor===t&&this.b2GearJoint.apply(this,arguments)},t.Dynamics.Joints.b2GearJointDef=function t(){t.b2GearJointDef.apply(this,arguments),this.constructor===t&&this.b2GearJointDef.apply(this,arguments)},t.Dynamics.Joints.b2Jacobian=function t(){t.b2Jacobian.apply(this,arguments)},t.Dynamics.Joints.b2Joint=function t(){t.b2Joint.apply(this,arguments),this.constructor===t&&this.b2Joint.apply(this,arguments)},t.Dynamics.Joints.b2JointDef=function t(){t.b2JointDef.apply(this,arguments),this.constructor===t&&this.b2JointDef.apply(this,arguments)},t.Dynamics.Joints.b2JointEdge=function t(){t.b2JointEdge.apply(this,arguments)},t.Dynamics.Joints.b2LineJoint=function t(){t.b2LineJoint.apply(this,arguments),this.constructor===t&&this.b2LineJoint.apply(this,arguments)},t.Dynamics.Joints.b2LineJointDef=function t(){t.b2LineJointDef.apply(this,arguments),this.constructor===t&&this.b2LineJointDef.apply(this,arguments)},t.Dynamics.Joints.b2MouseJoint=function t(){t.b2MouseJoint.apply(this,arguments),this.constructor===t&&this.b2MouseJoint.apply(this,arguments)},t.Dynamics.Joints.b2MouseJointDef=function t(){t.b2MouseJointDef.apply(this,arguments),this.constructor===t&&this.b2MouseJointDef.apply(this,arguments)},t.Dynamics.Joints.b2PrismaticJoint=function t(){t.b2PrismaticJoint.apply(this,arguments),this.constructor===t&&this.b2PrismaticJoint.apply(this,arguments)},t.Dynamics.Joints.b2PrismaticJointDef=function t(){t.b2PrismaticJointDef.apply(this,arguments),this.constructor===t&&this.b2PrismaticJointDef.apply(this,arguments)},t.Dynamics.Joints.b2PulleyJoint=function t(){t.b2PulleyJoint.apply(this,arguments),this.constructor===t&&this.b2PulleyJoint.apply(this,arguments)},t.Dynamics.Joints.b2PulleyJointDef=function t(){t.b2PulleyJointDef.apply(this,arguments),this.constructor===t&&this.b2PulleyJointDef.apply(this,arguments)},t.Dynamics.Joints.b2RevoluteJoint=function t(){t.b2RevoluteJoint.apply(this,arguments),this.constructor===t&&this.b2RevoluteJoint.apply(this,arguments)},t.Dynamics.Joints.b2RevoluteJointDef=function t(){t.b2RevoluteJointDef.apply(this,arguments),this.constructor===t&&this.b2RevoluteJointDef.apply(this,arguments)},t.Dynamics.Joints.b2WeldJoint=function t(){t.b2WeldJoint.apply(this,arguments),this.constructor===t&&this.b2WeldJoint.apply(this,arguments)},t.Dynamics.Joints.b2WeldJointDef=function t(){t.b2WeldJointDef.apply(this,arguments),this.constructor===t&&this.b2WeldJointDef.apply(this,arguments)}}(),t.postDefs=[],function(){var i=t.Collision.Shapes.b2CircleShape,n=t.Collision.Shapes.b2PolygonShape,s=t.Collision.Shapes.b2Shape,r=t.Common.b2Settings,a=t.Common.Math.b2Math,m=t.Common.Math.b2Sweep,l=t.Common.Math.b2Transform,c=t.Common.Math.b2Vec2,_=t.Collision.b2AABB,h=t.Collision.b2Bound,p=t.Collision.b2BoundValues,y=t.Collision.b2Collision,u=t.Collision.b2ContactID,x=t.Collision.b2ContactPoint,f=t.Collision.b2Distance,d=t.Collision.b2DistanceInput,b=t.Collision.b2DistanceOutput,v=t.Collision.b2DistanceProxy,C=t.Collision.b2DynamicTree,A=t.Collision.b2DynamicTreeBroadPhase,w=t.Collision.b2DynamicTreeNode,S=t.Collision.b2DynamicTreePair,g=t.Collision.b2Manifold,B=t.Collision.b2ManifoldPoint,M=t.Collision.b2Point,V=t.Collision.b2RayCastInput,D=t.Collision.b2RayCastOutput,I=t.Collision.b2Segment,G=t.Collision.b2SeparationFunction,L=t.Collision.b2Simplex,J=t.Collision.b2SimplexCache,F=t.Collision.b2SimplexVertex,P=t.Collision.b2TimeOfImpact,R=t.Collision.b2TOIInput,T=t.Collision.b2WorldManifold,k=t.Collision.ClipVertex,z=t.Collision.Features,N=t.Collision.IBroadPhase;_.b2AABB=function(){this.lowerBound=new c,this.upperBound=new c},_.prototype.IsValid=function(){var t=this.upperBound.y-this.lowerBound.y;return(t=this.upperBound.x-this.lowerBound.x>=0&&t>=0)&&this.lowerBound.IsValid()&&this.upperBound.IsValid()},_.prototype.GetCenter=function(){return new c((this.lowerBound.x+this.upperBound.x)/2,(this.lowerBound.y+this.upperBound.y)/2)},_.prototype.GetExtents=function(){return new c((this.upperBound.x-this.lowerBound.x)/2,(this.upperBound.y-this.lowerBound.y)/2)},_.prototype.Contains=function(t){var i=!0;return(i=(i=(i=i&&this.lowerBound.x<=t.lowerBound.x)&&this.lowerBound.y<=t.lowerBound.y)&&t.upperBound.x<=this.upperBound.x)&&t.upperBound.y<=this.upperBound.y},_.prototype.RayCast=function(t,i){var o=-Number.MAX_VALUE,e=Number.MAX_VALUE,n=i.p1.x,s=i.p1.y,r=i.p2.x-i.p1.x,a=i.p2.y-i.p1.y,m=Math.abs(a),l=t.normal,c=0,_=0,h=c=0;if(h=0,Math.abs(r)<Number.MIN_VALUE){if(n<this.lowerBound.x||this.upperBound.x<n)return!1}else if(c=1/r,h=-1,(_=(this.lowerBound.x-n)*c)>(c=(this.upperBound.x-n)*c)&&(h=_,_=c,c=h,h=1),_>o&&(l.x=h,l.y=0,o=_),o>(e=Math.min(e,c)))return!1;if(m<Number.MIN_VALUE){if(s<this.lowerBound.y||this.upperBound.y<s)return!1}else if(c=1/a,h=-1,(_=(this.lowerBound.y-s)*c)>(c=(this.upperBound.y-s)*c)&&(h=_,_=c,c=h,h=1),_>o&&(l.y=h,l.x=0,o=_),o>(e=Math.min(e,c)))return!1;return t.fraction=o,!0},_.prototype.TestOverlap=function(t){var i=t.lowerBound.y-this.upperBound.y,o=this.lowerBound.y-t.upperBound.y;return!(t.lowerBound.x-this.upperBound.x>0||i>0)&&!(this.lowerBound.x-t.upperBound.x>0||o>0)},_.Combine=function(t,i){var o=new _;return o.Combine(t,i),o},_.prototype.Combine=function(t,i){this.lowerBound.x=Math.min(t.lowerBound.x,i.lowerBound.x),this.lowerBound.y=Math.min(t.lowerBound.y,i.lowerBound.y),this.upperBound.x=Math.max(t.upperBound.x,i.upperBound.x),this.upperBound.y=Math.max(t.upperBound.y,i.upperBound.y)},h.b2Bound=function(){},h.prototype.IsLower=function(){return 0==(1&this.value)},h.prototype.IsUpper=function(){return 1==(1&this.value)},h.prototype.Swap=function(t){var i=this.value,o=this.proxy,e=this.stabbingCount;this.value=t.value,this.proxy=t.proxy,this.stabbingCount=t.stabbingCount,t.value=i,t.proxy=o,t.stabbingCount=e},p.b2BoundValues=function(){},p.prototype.b2BoundValues=function(){this.lowerValues=new e,this.lowerValues[0]=0,this.lowerValues[1]=0,this.upperValues=new e,this.upperValues[0]=0,this.upperValues[1]=0},y.b2Collision=function(){},y.ClipSegmentToLine=function(t,i,o,e){void 0===e&&(e=0);var n,s=0,r=(n=i[0]).v,a=(n=i[1]).v,m=o.x*r.x+o.y*r.y-e;return n=o.x*a.x+o.y*a.y-e,m<=0&&t[s++].Set(i[0]),n<=0&&t[s++].Set(i[1]),m*n<0&&(o=m/(m-n),(n=(n=t[s]).v).x=r.x+o*(a.x-r.x),n.y=r.y+o*(a.y-r.y),(n=t[s]).id=(m>0?i[0]:i[1]).id,++s),s},y.EdgeSeparation=function(t,i,o,e,n){void 0===o&&(o=0),parseInt(t.m_vertexCount);var s=t.m_vertices;t=t.m_normals;var r,a,m=parseInt(e.m_vertexCount),l=e.m_vertices;r=i.R,a=t[o],t=r.col1.x*a.x+r.col2.x*a.y,e=r.col1.y*a.x+r.col2.y*a.y;var c=(r=n.R).col1.x*t+r.col1.y*e;r=r.col2.x*t+r.col2.y*e;for(var _=0,h=Number.MAX_VALUE,p=0;p<m;++p)(a=(a=l[p]).x*c+a.y*r)<h&&(h=a,_=p);return a=s[o],r=i.R,o=i.position.x+(r.col1.x*a.x+r.col2.x*a.y),i=i.position.y+(r.col1.y*a.x+r.col2.y*a.y),a=l[_],r=n.R,s=n.position.x+(r.col1.x*a.x+r.col2.x*a.y),n=n.position.y+(r.col1.y*a.x+r.col2.y*a.y),(s-=o)*t+(n-=i)*e},y.FindMaxSeparation=function(t,i,o,e,n){var s,r,a=parseInt(i.m_vertexCount),m=i.m_normals;r=n.R,s=e.m_centroid;var l=n.position.x+(r.col1.x*s.x+r.col2.x*s.y),c=n.position.y+(r.col1.y*s.x+r.col2.y*s.y);r=o.R,s=i.m_centroid,l-=o.position.x+(r.col1.x*s.x+r.col2.x*s.y),c-=o.position.y+(r.col1.y*s.x+r.col2.y*s.y),r=l*o.R.col1.x+c*o.R.col1.y,c=l*o.R.col2.x+c*o.R.col2.y,l=0;for(var _=-Number.MAX_VALUE,h=0;h<a;++h)(s=(s=m[h]).x*r+s.y*c)>_&&(_=s,l=h);m=y.EdgeSeparation(i,o,l,e,n),s=parseInt(l-1>=0?l-1:a-1),r=y.EdgeSeparation(i,o,s,e,n),c=parseInt(l+1<a?l+1:0),_=y.EdgeSeparation(i,o,c,e,n);var p=h=0,u=0;if(r>m&&r>_)u=-1,h=s,p=r;else{if(!(_>m))return t[0]=l,m;u=1,h=c,p=_}for(;l=-1==u?h-1>=0?h-1:a-1:h+1<a?h+1:0,(m=y.EdgeSeparation(i,o,l,e,n))>p;)h=l,p=m;return t[0]=h,p},y.FindIncidentEdge=function(t,i,o,e,n,s){void 0===e&&(e=0),parseInt(i.m_vertexCount);var r,a=i.m_normals,m=parseInt(n.m_vertexCount);i=n.m_vertices,n=n.m_normals,r=o.R,o=a[e],a=r.col1.x*o.x+r.col2.x*o.y;var l=r.col1.y*o.x+r.col2.y*o.y;o=(r=s.R).col1.x*a+r.col1.y*l,l=r.col2.x*a+r.col2.y*l,a=o,r=0;for(var c=Number.MAX_VALUE,_=0;_<m;++_)(o=a*(o=n[_]).x+l*o.y)<c&&(c=o,r=_);n=parseInt(r),a=parseInt(n+1<m?n+1:0),m=t[0],o=i[n],r=s.R,m.v.x=s.position.x+(r.col1.x*o.x+r.col2.x*o.y),m.v.y=s.position.y+(r.col1.y*o.x+r.col2.y*o.y),m.id.features.referenceEdge=e,m.id.features.incidentEdge=n,m.id.features.incidentVertex=0,m=t[1],o=i[a],r=s.R,m.v.x=s.position.x+(r.col1.x*o.x+r.col2.x*o.y),m.v.y=s.position.y+(r.col1.y*o.x+r.col2.y*o.y),m.id.features.referenceEdge=e,m.id.features.incidentEdge=a,m.id.features.incidentVertex=1},y.MakeClipPointVector=function(){var t=new o(2);return t[0]=new k,t[1]=new k,t},y.CollidePolygons=function(t,i,o,e,n){var s;t.m_pointCount=0;var a=i.m_radius+e.m_radius;s=0,y.s_edgeAO[0]=s;var m=y.FindMaxSeparation(y.s_edgeAO,i,o,e,n);if(s=y.s_edgeAO[0],!(m>a)){var l=0;y.s_edgeBO[0]=l;var c=y.FindMaxSeparation(y.s_edgeBO,e,n,i,o);if(l=y.s_edgeBO[0],!(c>a)){var _,h=0,p=0;c>.98*m+.001?(m=e,e=i,i=n,o=o,h=l,t.m_type=g.e_faceB,p=1):(m=i,e=e,i=o,o=n,h=s,t.m_type=g.e_faceA,p=0),s=y.s_incidentEdge,y.FindIncidentEdge(s,m,i,h,e,o),l=parseInt(m.m_vertexCount),m=(n=m.m_vertices)[h],_=h+1<l?n[parseInt(h+1)]:n[0],(h=y.s_localTangent).Set(_.x-m.x,_.y-m.y),h.Normalize(),(n=y.s_localNormal).x=h.y,n.y=-h.x,(e=y.s_planePoint).Set(.5*(m.x+_.x),.5*(m.y+_.y)),c=y.s_tangent,l=i.R,c.x=l.col1.x*h.x+l.col2.x*h.y,c.y=l.col1.y*h.x+l.col2.y*h.y;var u=y.s_tangent2;u.x=-c.x,u.y=-c.y,(h=y.s_normal).x=c.y,h.y=-c.x;var x=y.s_v11,f=y.s_v12;if(x.x=i.position.x+(l.col1.x*m.x+l.col2.x*m.y),x.y=i.position.y+(l.col1.y*m.x+l.col2.y*m.y),f.x=i.position.x+(l.col1.x*_.x+l.col2.x*_.y),f.y=i.position.y+(l.col1.y*_.x+l.col2.y*_.y),i=h.x*x.x+h.y*x.y,l=c.x*f.x+c.y*f.y+a,_=y.s_clipPoints1,m=y.s_clipPoints2,f=0,!((f=y.ClipSegmentToLine(_,s,u,-c.x*x.x-c.y*x.y+a))<2||(f=y.ClipSegmentToLine(m,_,c,l))<2)){for(t.m_localPlaneNormal.SetV(n),t.m_localPoint.SetV(e),e=n=0;e<r.b2_maxManifoldPoints;++e)s=m[e],h.x*s.v.x+h.y*s.v.y-i<=a&&(c=t.m_points[n],l=o.R,u=s.v.x-o.position.x,x=s.v.y-o.position.y,c.m_localPoint.x=u*l.col1.x+x*l.col1.y,c.m_localPoint.y=u*l.col2.x+x*l.col2.y,c.m_id.Set(s.id),c.m_id.features.flip=p,++n);t.m_pointCount=n}}}},y.CollideCircles=function(t,i,o,e,n){var s,r;t.m_pointCount=0,s=o.R,r=i.m_p;var a=o.position.x+(s.col1.x*r.x+s.col2.x*r.y);o=o.position.y+(s.col1.y*r.x+s.col2.y*r.y),s=n.R,r=e.m_p,(a=n.position.x+(s.col1.x*r.x+s.col2.x*r.y)-a)*a+(n=n.position.y+(s.col1.y*r.x+s.col2.y*r.y)-o)*n>(s=i.m_radius+e.m_radius)*s||(t.m_type=g.e_circles,t.m_localPoint.SetV(i.m_p),t.m_localPlaneNormal.SetZero(),t.m_pointCount=1,t.m_points[0].m_localPoint.SetV(e.m_p),t.m_points[0].m_id.key=0)},y.CollidePolygonAndCircle=function(t,i,o,e,n){var s,r,a=t.m_pointCount=0,m=0;r=n.R,s=e.m_p;var l=n.position.y+(r.col1.y*s.x+r.col2.y*s.y);a=n.position.x+(r.col1.x*s.x+r.col2.x*s.y)-o.position.x,m=l-o.position.y,o=a*(r=o.R).col1.x+m*r.col1.y,r=a*r.col2.x+m*r.col2.y;var c=0;l=-Number.MAX_VALUE,n=i.m_radius+e.m_radius;var _=parseInt(i.m_vertexCount),h=i.m_vertices;i=i.m_normals;for(var p=0;p<_;++p){if(a=o-(s=h[p]).x,m=r-s.y,(a=(s=i[p]).x*a+s.y*m)>n)return;a>l&&(l=a,c=p)}if(a=parseInt(c),m=parseInt(a+1<_?a+1:0),s=h[a],h=h[m],l<Number.MIN_VALUE)t.m_pointCount=1,t.m_type=g.e_faceA,t.m_localPlaneNormal.SetV(i[c]),t.m_localPoint.x=.5*(s.x+h.x),t.m_localPoint.y=.5*(s.y+h.y);else if(l=(o-h.x)*(s.x-h.x)+(r-h.y)*(s.y-h.y),(o-s.x)*(h.x-s.x)+(r-s.y)*(h.y-s.y)<=0){if((o-s.x)*(o-s.x)+(r-s.y)*(r-s.y)>n*n)return;t.m_pointCount=1,t.m_type=g.e_faceA,t.m_localPlaneNormal.x=o-s.x,t.m_localPlaneNormal.y=r-s.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(s)}else if(l<=0){if((o-h.x)*(o-h.x)+(r-h.y)*(r-h.y)>n*n)return;t.m_pointCount=1,t.m_type=g.e_faceA,t.m_localPlaneNormal.x=o-h.x,t.m_localPlaneNormal.y=r-h.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(h)}else{if(c=.5*(s.x+h.x),s=.5*(s.y+h.y),(l=(o-c)*i[a].x+(r-s)*i[a].y)>n)return;t.m_pointCount=1,t.m_type=g.e_faceA,t.m_localPlaneNormal.x=i[a].x,t.m_localPlaneNormal.y=i[a].y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.Set(c,s)}t.m_points[0].m_localPoint.SetV(e.m_p),t.m_points[0].m_id.key=0},y.TestOverlap=function(t,i){var o=i.lowerBound,e=t.upperBound,n=o.x-e.x,s=o.y-e.y;o=t.lowerBound,e=i.upperBound;var r=o.y-e.y;return!(n>0||s>0)&&!(o.x-e.x>0||r>0)},t.postDefs.push(function(){t.Collision.b2Collision.s_incidentEdge=y.MakeClipPointVector(),t.Collision.b2Collision.s_clipPoints1=y.MakeClipPointVector(),t.Collision.b2Collision.s_clipPoints2=y.MakeClipPointVector(),t.Collision.b2Collision.s_edgeAO=new e(1),t.Collision.b2Collision.s_edgeBO=new e(1),t.Collision.b2Collision.s_localTangent=new c,t.Collision.b2Collision.s_localNormal=new c,t.Collision.b2Collision.s_planePoint=new c,t.Collision.b2Collision.s_normal=new c,t.Collision.b2Collision.s_tangent=new c,t.Collision.b2Collision.s_tangent2=new c,t.Collision.b2Collision.s_v11=new c,t.Collision.b2Collision.s_v12=new c,t.Collision.b2Collision.b2CollidePolyTempVec=new c,t.Collision.b2Collision.b2_nullFeature=255}),u.b2ContactID=function(){this.features=new z},u.prototype.b2ContactID=function(){this.features._m_id=this},u.prototype.Set=function(t){this.key=t._key},u.prototype.Copy=function(){var t=new u;return t.key=this.key,t},Object.defineProperty(u.prototype,"key",{enumerable:!1,configurable:!0,get:function(){return this._key}}),Object.defineProperty(u.prototype,"key",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._key=t,this.features._referenceEdge=255&this._key,this.features._incidentEdge=(65280&this._key)>>8&255,this.features._incidentVertex=(16711680&this._key)>>16&255,this.features._flip=(4278190080&this._key)>>24&255}}),x.b2ContactPoint=function(){this.position=new c,this.velocity=new c,this.normal=new c,this.id=new u},f.b2Distance=function(){},f.Distance=function(t,i,o){++f.b2_gjkCalls;var e=o.proxyA,n=o.proxyB,s=o.transformA,m=o.transformB,l=f.s_simplex;l.ReadCache(i,e,s,n,m);var _=l.m_vertices,h=f.s_saveA,p=f.s_saveB,y=0;l.GetClosestPoint().LengthSquared();for(var u,x=0,d=0;d<20;){for(y=l.m_count,x=0;x<y;x++)h[x]=_[x].indexA,p[x]=_[x].indexB;switch(l.m_count){case 1:break;case 2:l.Solve2();break;case 3:l.Solve3();break;default:r.b2Assert(!1)}if(3==l.m_count)break;if((u=l.GetClosestPoint()).LengthSquared(),(x=l.GetSearchDirection()).LengthSquared()<Number.MIN_VALUE*Number.MIN_VALUE)break;(u=_[l.m_count]).indexA=e.GetSupport(a.MulTMV(s.R,x.GetNegative())),u.wA=a.MulX(s,e.GetVertex(u.indexA)),u.indexB=n.GetSupport(a.MulTMV(m.R,x)),u.wB=a.MulX(m,n.GetVertex(u.indexB)),u.w=a.SubtractVV(u.wB,u.wA),++d,++f.b2_gjkIters;var b=!1;for(x=0;x<y;x++)if(u.indexA==h[x]&&u.indexB==p[x]){b=!0;break}if(b)break;++l.m_count}f.b2_gjkMaxIters=a.Max(f.b2_gjkMaxIters,d),l.GetWitnessPoints(t.pointA,t.pointB),t.distance=a.SubtractVV(t.pointA,t.pointB).Length(),t.iterations=d,l.WriteCache(i),o.useRadii&&(i=e.m_radius,n=n.m_radius,t.distance>i+n&&t.distance>Number.MIN_VALUE?(t.distance-=i+n,(o=a.SubtractVV(t.pointB,t.pointA)).Normalize(),t.pointA.x+=i*o.x,t.pointA.y+=i*o.y,t.pointB.x-=n*o.x,t.pointB.y-=n*o.y):((u=new c).x=.5*(t.pointA.x+t.pointB.x),u.y=.5*(t.pointA.y+t.pointB.y),t.pointA.x=t.pointB.x=u.x,t.pointA.y=t.pointB.y=u.y,t.distance=0))},t.postDefs.push(function(){t.Collision.b2Distance.s_simplex=new L,t.Collision.b2Distance.s_saveA=new e(3),t.Collision.b2Distance.s_saveB=new e(3)}),d.b2DistanceInput=function(){},b.b2DistanceOutput=function(){this.pointA=new c,this.pointB=new c},v.b2DistanceProxy=function(){},v.prototype.Set=function(t){switch(t.GetType()){case s.e_circleShape:t=t instanceof i?t:null,this.m_vertices=new o(1,!0),this.m_vertices[0]=t.m_p,this.m_count=1,this.m_radius=t.m_radius;break;case s.e_polygonShape:t=t instanceof n?t:null,this.m_vertices=t.m_vertices,this.m_count=t.m_vertexCount,this.m_radius=t.m_radius;break;default:r.b2Assert(!1)}},v.prototype.GetSupport=function(t){for(var i=0,o=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,e=1;e<this.m_count;++e){var n=this.m_vertices[e].x*t.x+this.m_vertices[e].y*t.y;n>o&&(i=e,o=n)}return i},v.prototype.GetSupportVertex=function(t){for(var i=0,o=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,e=1;e<this.m_count;++e){var n=this.m_vertices[e].x*t.x+this.m_vertices[e].y*t.y;n>o&&(i=e,o=n)}return this.m_vertices[i]},v.prototype.GetVertexCount=function(){return this.m_count},v.prototype.GetVertex=function(t){return void 0===t&&(t=0),r.b2Assert(0<=t&&t<this.m_count),this.m_vertices[t]},C.b2DynamicTree=function(){},C.prototype.b2DynamicTree=function(){this.m_freeList=this.m_root=null,this.m_insertionCount=this.m_path=0},C.prototype.CreateProxy=function(t,i){var o=this.AllocateNode(),e=r.b2_aabbExtension,n=r.b2_aabbExtension;return o.aabb.lowerBound.x=t.lowerBound.x-e,o.aabb.lowerBound.y=t.lowerBound.y-n,o.aabb.upperBound.x=t.upperBound.x+e,o.aabb.upperBound.y=t.upperBound.y+n,o.userData=i,this.InsertLeaf(o),o},C.prototype.DestroyProxy=function(t){this.RemoveLeaf(t),this.FreeNode(t)},C.prototype.MoveProxy=function(t,i,o){if(r.b2Assert(t.IsLeaf()),t.aabb.Contains(i))return!1;this.RemoveLeaf(t);var e=r.b2_aabbExtension+r.b2_aabbMultiplier*(o.x>0?o.x:-o.x);return o=r.b2_aabbExtension+r.b2_aabbMultiplier*(o.y>0?o.y:-o.y),t.aabb.lowerBound.x=i.lowerBound.x-e,t.aabb.lowerBound.y=i.lowerBound.y-o,t.aabb.upperBound.x=i.upperBound.x+e,t.aabb.upperBound.y=i.upperBound.y+o,this.InsertLeaf(t),!0},C.prototype.Rebalance=function(t){if(void 0===t&&(t=0),null!=this.m_root)for(var i=0;i<t;i++){for(var o=this.m_root,e=0;0==o.IsLeaf();)o=this.m_path>>e&1?o.child2:o.child1,e=e+1&31;++this.m_path,this.RemoveLeaf(o),this.InsertLeaf(o)}},C.prototype.GetFatAABB=function(t){return t.aabb},C.prototype.GetUserData=function(t){return t.userData},C.prototype.Query=function(t,i){if(null!=this.m_root){var e=new o,n=0;for(e[n++]=this.m_root;n>0;){var s=e[--n];if(s.aabb.TestOverlap(i))if(s.IsLeaf()){if(!t(s))break}else e[n++]=s.child1,e[n++]=s.child2}}},C.prototype.RayCast=function(t,i){if(null!=this.m_root){var e=i.p1,n=i.p2,s=a.SubtractVV(e,n);s.Normalize(),s=a.CrossFV(1,s);var r=a.AbsV(s),m=i.maxFraction,l=new _,c=0,h=0;c=e.x+m*(n.x-e.x),h=e.y+m*(n.y-e.y),l.lowerBound.x=Math.min(e.x,c),l.lowerBound.y=Math.min(e.y,h),l.upperBound.x=Math.max(e.x,c),l.upperBound.y=Math.max(e.y,h);var p=new o,y=0;for(p[y++]=this.m_root;y>0;)if(0!=(m=p[--y]).aabb.TestOverlap(l)&&(c=m.aabb.GetCenter(),h=m.aabb.GetExtents(),!(Math.abs(s.x*(e.x-c.x)+s.y*(e.y-c.y))-r.x*h.x-r.y*h.y>0)))if(m.IsLeaf()){if((c=new V).p1=i.p1,c.p2=i.p2,c.maxFraction=i.maxFraction,0==(m=t(c,m)))break;m>0&&(c=e.x+m*(n.x-e.x),h=e.y+m*(n.y-e.y),l.lowerBound.x=Math.min(e.x,c),l.lowerBound.y=Math.min(e.y,h),l.upperBound.x=Math.max(e.x,c),l.upperBound.y=Math.max(e.y,h))}else p[y++]=m.child1,p[y++]=m.child2}},C.prototype.AllocateNode=function(){if(this.m_freeList){var t=this.m_freeList;return this.m_freeList=t.parent,t.parent=null,t.child1=null,t.child2=null,t}return new w},C.prototype.FreeNode=function(t){t.parent=this.m_freeList,this.m_freeList=t},C.prototype.InsertLeaf=function(t){if(++this.m_insertionCount,null==this.m_root)this.m_root=t,this.m_root.parent=null;else{var i=t.aabb.GetCenter(),o=this.m_root;if(0==o.IsLeaf())do{var e=o.child1;o=o.child2,o=Math.abs((e.aabb.lowerBound.x+e.aabb.upperBound.x)/2-i.x)+Math.abs((e.aabb.lowerBound.y+e.aabb.upperBound.y)/2-i.y)<Math.abs((o.aabb.lowerBound.x+o.aabb.upperBound.x)/2-i.x)+Math.abs((o.aabb.lowerBound.y+o.aabb.upperBound.y)/2-i.y)?e:o}while(0==o.IsLeaf());if(i=o.parent,(e=this.AllocateNode()).parent=i,e.userData=null,e.aabb.Combine(t.aabb,o.aabb),i){o.parent.child1==o?i.child1=e:i.child2=e,e.child1=o,e.child2=t,o.parent=e,t.parent=e;do{if(i.aabb.Contains(e.aabb))break;i.aabb.Combine(i.child1.aabb,i.child2.aabb),e=i,i=i.parent}while(i)}else e.child1=o,e.child2=t,o.parent=e,this.m_root=t.parent=e}},C.prototype.RemoveLeaf=function(t){if(t==this.m_root)this.m_root=null;else{var i=t.parent,o=i.parent;if(t=i.child1==t?i.child2:i.child1,o)for(o.child1==i?o.child1=t:o.child2=t,t.parent=o,this.FreeNode(i);o&&(i=o.aabb,o.aabb=_.Combine(o.child1.aabb,o.child2.aabb),!i.Contains(o.aabb));)o=o.parent;else this.m_root=t,t.parent=null,this.FreeNode(i)}},A.b2DynamicTreeBroadPhase=function(){this.m_tree=new C,this.m_moveBuffer=new o,this.m_pairBuffer=new o,this.m_pairCount=0},A.prototype.CreateProxy=function(t,i){var o=this.m_tree.CreateProxy(t,i);return++this.m_proxyCount,this.BufferMove(o),o},A.prototype.DestroyProxy=function(t){this.UnBufferMove(t),--this.m_proxyCount,this.m_tree.DestroyProxy(t)},A.prototype.MoveProxy=function(t,i,o){this.m_tree.MoveProxy(t,i,o)&&this.BufferMove(t)},A.prototype.TestOverlap=function(t,i){var o=this.m_tree.GetFatAABB(t),e=this.m_tree.GetFatAABB(i);return o.TestOverlap(e)},A.prototype.GetUserData=function(t){return this.m_tree.GetUserData(t)},A.prototype.GetFatAABB=function(t){return this.m_tree.GetFatAABB(t)},A.prototype.GetProxyCount=function(){return this.m_proxyCount},A.prototype.UpdatePairs=function(t){var i,o=this,e=o.m_pairCount=0;for(e=0;e<o.m_moveBuffer.length;++e){i=o.m_moveBuffer[e];var n=o.m_tree.GetFatAABB(i);o.m_tree.Query(function(t){if(t==i)return!0;o.m_pairCount==o.m_pairBuffer.length&&(o.m_pairBuffer[o.m_pairCount]=new S);var e=o.m_pairBuffer[o.m_pairCount];return e.proxyA=t<i?t:i,e.proxyB=t>=i?t:i,++o.m_pairCount,!0},n)}for(e=o.m_moveBuffer.length=0;e<o.m_pairCount;){n=o.m_pairBuffer[e];var s=o.m_tree.GetUserData(n.proxyA);for(t(s,o.m_tree.GetUserData(n.proxyB)),++e;e<o.m_pairCount&&((s=o.m_pairBuffer[e]).proxyA==n.proxyA&&s.proxyB==n.proxyB);)++e}},A.prototype.Query=function(t,i){this.m_tree.Query(t,i)},A.prototype.RayCast=function(t,i){this.m_tree.RayCast(t,i)},A.prototype.Validate=function(){},A.prototype.Rebalance=function(t){void 0===t&&(t=0),this.m_tree.Rebalance(t)},A.prototype.BufferMove=function(t){this.m_moveBuffer[this.m_moveBuffer.length]=t},A.prototype.UnBufferMove=function(t){this.m_moveBuffer.splice(parseInt(this.m_moveBuffer.indexOf(t)),1)},A.prototype.ComparePairs=function(){return 0},A.__implements={},A.__implements[N]=!0,w.b2DynamicTreeNode=function(){this.aabb=new _},w.prototype.IsLeaf=function(){return null==this.child1},S.b2DynamicTreePair=function(){},g.b2Manifold=function(){this.m_pointCount=0},g.prototype.b2Manifold=function(){this.m_points=new o(r.b2_maxManifoldPoints);for(var t=0;t<r.b2_maxManifoldPoints;t++)this.m_points[t]=new B;this.m_localPlaneNormal=new c,this.m_localPoint=new c},g.prototype.Reset=function(){for(var t=0;t<r.b2_maxManifoldPoints;t++)(this.m_points[t]instanceof B?this.m_points[t]:null).Reset();this.m_localPlaneNormal.SetZero(),this.m_localPoint.SetZero(),this.m_pointCount=this.m_type=0},g.prototype.Set=function(t){this.m_pointCount=t.m_pointCount;for(var i=0;i<r.b2_maxManifoldPoints;i++)(this.m_points[i]instanceof B?this.m_points[i]:null).Set(t.m_points[i]);this.m_localPlaneNormal.SetV(t.m_localPlaneNormal),this.m_localPoint.SetV(t.m_localPoint),this.m_type=t.m_type},g.prototype.Copy=function(){var t=new g;return t.Set(this),t},t.postDefs.push(function(){t.Collision.b2Manifold.e_circles=1,t.Collision.b2Manifold.e_faceA=2,t.Collision.b2Manifold.e_faceB=4}),B.b2ManifoldPoint=function(){this.m_localPoint=new c,this.m_id=new u},B.prototype.b2ManifoldPoint=function(){this.Reset()},B.prototype.Reset=function(){this.m_localPoint.SetZero(),this.m_tangentImpulse=this.m_normalImpulse=0,this.m_id.key=0},B.prototype.Set=function(t){this.m_localPoint.SetV(t.m_localPoint),this.m_normalImpulse=t.m_normalImpulse,this.m_tangentImpulse=t.m_tangentImpulse,this.m_id.Set(t.m_id)},M.b2Point=function(){this.p=new c},M.prototype.Support=function(){return this.p},M.prototype.GetFirstVertex=function(){return this.p},V.b2RayCastInput=function(){this.p1=new c,this.p2=new c},V.prototype.b2RayCastInput=function(t,i,o){void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=1),t&&this.p1.SetV(t),i&&this.p2.SetV(i),this.maxFraction=o},D.b2RayCastOutput=function(){this.normal=new c},I.b2Segment=function(){this.p1=new c,this.p2=new c},I.prototype.TestSegment=function(t,i,o,e){void 0===e&&(e=0);var n=o.p1,s=o.p2.x-n.x,r=o.p2.y-n.y;o=this.p2.y-this.p1.y;var a=-(this.p2.x-this.p1.x),m=100*Number.MIN_VALUE,l=-(s*o+r*a);if(l>m){var c=n.x-this.p1.x,_=n.y-this.p1.y;if(0<=(n=c*o+_*a)&&n<=e*l&&-m*l<=(e=-s*_+r*c)&&e<=l*(1+m))return n/=l,o/=e=Math.sqrt(o*o+a*a),a/=e,t[0]=n,i.Set(o,a),!0}return!1},I.prototype.Extend=function(t){this.ExtendForward(t),this.ExtendBackward(t)},I.prototype.ExtendForward=function(t){var i=this.p2.x-this.p1.x,o=this.p2.y-this.p1.y;t=Math.min(i>0?(t.upperBound.x-this.p1.x)/i:i<0?(t.lowerBound.x-this.p1.x)/i:Number.POSITIVE_INFINITY,o>0?(t.upperBound.y-this.p1.y)/o:o<0?(t.lowerBound.y-this.p1.y)/o:Number.POSITIVE_INFINITY),this.p2.x=this.p1.x+i*t,this.p2.y=this.p1.y+o*t},I.prototype.ExtendBackward=function(t){var i=-this.p2.x+this.p1.x,o=-this.p2.y+this.p1.y;t=Math.min(i>0?(t.upperBound.x-this.p2.x)/i:i<0?(t.lowerBound.x-this.p2.x)/i:Number.POSITIVE_INFINITY,o>0?(t.upperBound.y-this.p2.y)/o:o<0?(t.lowerBound.y-this.p2.y)/o:Number.POSITIVE_INFINITY),this.p1.x=this.p2.x+i*t,this.p1.y=this.p2.y+o*t},G.b2SeparationFunction=function(){this.m_localPoint=new c,this.m_axis=new c},G.prototype.Initialize=function(t,i,o,e,n){this.m_proxyA=i,this.m_proxyB=e;var s=parseInt(t.count);r.b2Assert(0<s&&s<3);var m,l,_,h,p=h=_=e=i=0,y=0;p=0,1==s?(this.m_type=G.e_points,m=this.m_proxyA.GetVertex(t.indexA[0]),l=this.m_proxyB.GetVertex(t.indexB[0]),s=m,t=o.R,i=o.position.x+(t.col1.x*s.x+t.col2.x*s.y),e=o.position.y+(t.col1.y*s.x+t.col2.y*s.y),s=l,t=n.R,_=n.position.x+(t.col1.x*s.x+t.col2.x*s.y),h=n.position.y+(t.col1.y*s.x+t.col2.y*s.y),this.m_axis.x=_-i,this.m_axis.y=h-e,this.m_axis.Normalize()):(t.indexB[0]==t.indexB[1]?(this.m_type=G.e_faceA,i=this.m_proxyA.GetVertex(t.indexA[0]),e=this.m_proxyA.GetVertex(t.indexA[1]),l=this.m_proxyB.GetVertex(t.indexB[0]),this.m_localPoint.x=.5*(i.x+e.x),this.m_localPoint.y=.5*(i.y+e.y),this.m_axis=a.CrossVF(a.SubtractVV(e,i),1),this.m_axis.Normalize(),s=this.m_axis,p=(t=o.R).col1.x*s.x+t.col2.x*s.y,y=t.col1.y*s.x+t.col2.y*s.y,s=this.m_localPoint,t=o.R,i=o.position.x+(t.col1.x*s.x+t.col2.x*s.y),e=o.position.y+(t.col1.y*s.x+t.col2.y*s.y),s=l,t=n.R,p=((_=n.position.x+(t.col1.x*s.x+t.col2.x*s.y))-i)*p+((h=n.position.y+(t.col1.y*s.x+t.col2.y*s.y))-e)*y):t.indexA[0]==t.indexA[0]?(this.m_type=G.e_faceB,_=this.m_proxyB.GetVertex(t.indexB[0]),h=this.m_proxyB.GetVertex(t.indexB[1]),m=this.m_proxyA.GetVertex(t.indexA[0]),this.m_localPoint.x=.5*(_.x+h.x),this.m_localPoint.y=.5*(_.y+h.y),this.m_axis=a.CrossVF(a.SubtractVV(h,_),1),this.m_axis.Normalize(),s=this.m_axis,p=(t=n.R).col1.x*s.x+t.col2.x*s.y,y=t.col1.y*s.x+t.col2.y*s.y,s=this.m_localPoint,t=n.R,_=n.position.x+(t.col1.x*s.x+t.col2.x*s.y),h=n.position.y+(t.col1.y*s.x+t.col2.y*s.y),s=m,t=o.R,p=((i=o.position.x+(t.col1.x*s.x+t.col2.x*s.y))-_)*p+((e=o.position.y+(t.col1.y*s.x+t.col2.y*s.y))-h)*y):(i=this.m_proxyA.GetVertex(t.indexA[0]),e=this.m_proxyA.GetVertex(t.indexA[1]),_=this.m_proxyB.GetVertex(t.indexB[0]),h=this.m_proxyB.GetVertex(t.indexB[1]),a.MulX(o,m),m=a.MulMV(o.R,a.SubtractVV(e,i)),a.MulX(n,l),p=a.MulMV(n.R,a.SubtractVV(h,_)),n=m.x*m.x+m.y*m.y,l=p.x*p.x+p.y*p.y,t=a.SubtractVV(p,m),o=m.x*t.x+m.y*t.y,t=p.x*t.x+p.y*t.y,m=m.x*p.x+m.y*p.y,p=0,0!=(y=n*l-m*m)&&(p=a.Clamp((m*t-o*l)/y,0,1)),(m*p+t)/l<0&&(p=a.Clamp((m-o)/n,0,1)),(m=new c).x=i.x+p*(e.x-i.x),m.y=i.y+p*(e.y-i.y),(l=new c).x=_.x+p*(h.x-_.x),l.y=_.y+p*(h.y-_.y),0==p||1==p?(this.m_type=G.e_faceB,this.m_axis=a.CrossVF(a.SubtractVV(h,_),1),this.m_axis.Normalize(),this.m_localPoint=l):(this.m_type=G.e_faceA,this.m_axis=a.CrossVF(a.SubtractVV(e,i),1),this.m_localPoint=m)),p<0&&this.m_axis.NegativeSelf())},G.prototype.Evaluate=function(t,i){var o,e,n=0;switch(this.m_type){case G.e_points:return o=a.MulTMV(t.R,this.m_axis),e=a.MulTMV(i.R,this.m_axis.GetNegative()),o=this.m_proxyA.GetSupportVertex(o),e=this.m_proxyB.GetSupportVertex(e),o=a.MulX(t,o),((e=a.MulX(i,e)).x-o.x)*this.m_axis.x+(e.y-o.y)*this.m_axis.y;case G.e_faceA:return n=a.MulMV(t.R,this.m_axis),o=a.MulX(t,this.m_localPoint),e=a.MulTMV(i.R,n.GetNegative()),e=this.m_proxyB.GetSupportVertex(e),((e=a.MulX(i,e)).x-o.x)*n.x+(e.y-o.y)*n.y;case G.e_faceB:return n=a.MulMV(i.R,this.m_axis),e=a.MulX(i,this.m_localPoint),o=a.MulTMV(t.R,n.GetNegative()),o=this.m_proxyA.GetSupportVertex(o),((o=a.MulX(t,o)).x-e.x)*n.x+(o.y-e.y)*n.y;default:return r.b2Assert(!1),0}},t.postDefs.push(function(){t.Collision.b2SeparationFunction.e_points=1,t.Collision.b2SeparationFunction.e_faceA=2,t.Collision.b2SeparationFunction.e_faceB=4}),L.b2Simplex=function(){this.m_v1=new F,this.m_v2=new F,this.m_v3=new F,this.m_vertices=new o(3)},L.prototype.b2Simplex=function(){this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3},L.prototype.ReadCache=function(t,i,o,e,n){var s,m;r.b2Assert(0<=t.count&&t.count<=3),this.m_count=t.count;for(var l=this.m_vertices,c=0;c<this.m_count;c++){var _=l[c];_.indexA=t.indexA[c],_.indexB=t.indexB[c],s=i.GetVertex(_.indexA),m=e.GetVertex(_.indexB),_.wA=a.MulX(o,s),_.wB=a.MulX(n,m),_.w=a.SubtractVV(_.wB,_.wA),_.a=0}this.m_count>1&&(t=t.metric,((s=this.GetMetric())<.5*t||2*t<s||s<Number.MIN_VALUE)&&(this.m_count=0)),0==this.m_count&&((_=l[0]).indexA=0,_.indexB=0,s=i.GetVertex(0),m=e.GetVertex(0),_.wA=a.MulX(o,s),_.wB=a.MulX(n,m),_.w=a.SubtractVV(_.wB,_.wA),this.m_count=1)},L.prototype.WriteCache=function(i){i.metric=this.GetMetric(),i.count=t.parseUInt(this.m_count);for(var o=this.m_vertices,e=0;e<this.m_count;e++)i.indexA[e]=t.parseUInt(o[e].indexA),i.indexB[e]=t.parseUInt(o[e].indexB)},L.prototype.GetSearchDirection=function(){switch(this.m_count){case 1:return this.m_v1.w.GetNegative();case 2:var t=a.SubtractVV(this.m_v2.w,this.m_v1.w);return a.CrossVV(t,this.m_v1.w.GetNegative())>0?a.CrossFV(1,t):a.CrossVF(t,1);default:return r.b2Assert(!1),new c}},L.prototype.GetClosestPoint=function(){switch(this.m_count){case 0:return r.b2Assert(!1),new c;case 1:return this.m_v1.w;case 2:return new c(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);default:return r.b2Assert(!1),new c}},L.prototype.GetWitnessPoints=function(t,i){switch(this.m_count){case 0:r.b2Assert(!1);break;case 1:t.SetV(this.m_v1.wA),i.SetV(this.m_v1.wB);break;case 2:t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,i.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,i.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:i.x=t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,i.y=t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:r.b2Assert(!1)}},L.prototype.GetMetric=function(){switch(this.m_count){case 0:return r.b2Assert(!1),0;case 1:return 0;case 2:return a.SubtractVV(this.m_v1.w,this.m_v2.w).Length();case 3:return a.CrossVV(a.SubtractVV(this.m_v2.w,this.m_v1.w),a.SubtractVV(this.m_v3.w,this.m_v1.w));default:return r.b2Assert(!1),0}},L.prototype.Solve2=function(){var t=this.m_v1.w,i=this.m_v2.w,o=a.SubtractVV(i,t);(t=-(t.x*o.x+t.y*o.y))<=0?this.m_count=this.m_v1.a=1:(i=i.x*o.x+i.y*o.y)<=0?(this.m_count=this.m_v2.a=1,this.m_v1.Set(this.m_v2)):(o=1/(i+t),this.m_v1.a=i*o,this.m_v2.a=t*o,this.m_count=2)},L.prototype.Solve3=function(){var t=this.m_v1.w,i=this.m_v2.w,o=this.m_v3.w,e=a.SubtractVV(i,t),n=a.Dot(t,e),s=a.Dot(i,e);n=-n;var r=a.SubtractVV(o,t),m=a.Dot(t,r),l=a.Dot(o,r);m=-m;var c=a.SubtractVV(o,i),_=a.Dot(i,c);c=a.Dot(o,c),_=-_,e=(r=a.CrossVV(e,r))*a.CrossVV(i,o),o=r*a.CrossVV(o,t),t=r*a.CrossVV(t,i),n<=0&&m<=0?this.m_count=this.m_v1.a=1:s>0&&n>0&&t<=0?(l=1/(s+n),this.m_v1.a=s*l,this.m_v2.a=n*l,this.m_count=2):l>0&&m>0&&o<=0?(s=1/(l+m),this.m_v1.a=l*s,this.m_v3.a=m*s,this.m_count=2,this.m_v2.Set(this.m_v3)):s<=0&&_<=0?(this.m_count=this.m_v2.a=1,this.m_v1.Set(this.m_v2)):l<=0&&c<=0?(this.m_count=this.m_v3.a=1,this.m_v1.Set(this.m_v3)):c>0&&_>0&&e<=0?(s=1/(c+_),this.m_v2.a=c*s,this.m_v3.a=_*s,this.m_count=2,this.m_v1.Set(this.m_v3)):(s=1/(e+o+t),this.m_v1.a=e*s,this.m_v2.a=o*s,this.m_v3.a=t*s,this.m_count=3)},J.b2SimplexCache=function(){this.indexA=new e(3),this.indexB=new e(3)},F.b2SimplexVertex=function(){},F.prototype.Set=function(t){this.wA.SetV(t.wA),this.wB.SetV(t.wB),this.w.SetV(t.w),this.a=t.a,this.indexA=t.indexA,this.indexB=t.indexB},P.b2TimeOfImpact=function(){},P.TimeOfImpact=function(t){++P.b2_toiCalls;var i=t.proxyA,o=t.proxyB,e=t.sweepA,n=t.sweepB;r.b2Assert(e.t0==n.t0),r.b2Assert(1-e.t0>Number.MIN_VALUE);var s=i.m_radius+o.m_radius;t=t.tolerance;var m=0,l=0,c=0;for(P.s_cache.count=0,P.s_distanceInput.useRadii=!1;;){if(e.GetTransform(P.s_xfA,m),n.GetTransform(P.s_xfB,m),P.s_distanceInput.proxyA=i,P.s_distanceInput.proxyB=o,P.s_distanceInput.transformA=P.s_xfA,P.s_distanceInput.transformB=P.s_xfB,f.Distance(P.s_distanceOutput,P.s_cache,P.s_distanceInput),P.s_distanceOutput.distance<=0){m=1;break}P.s_fcn.Initialize(P.s_cache,i,P.s_xfA,o,P.s_xfB);var _=P.s_fcn.Evaluate(P.s_xfA,P.s_xfB);if(_<=0){m=1;break}if(0==l&&(c=_>s?a.Max(s-t,.75*s):a.Max(_-t,.02*s)),_-c<.5*t){if(0==l){m=1;break}break}var h=m,p=m,y=1;_=_,e.GetTransform(P.s_xfA,y),n.GetTransform(P.s_xfB,y);var u=P.s_fcn.Evaluate(P.s_xfA,P.s_xfB);if(u>=c){m=1;break}for(var x=0;;){var d;d=1&x?p+(c-_)*(y-p)/(u-_):.5*(p+y),e.GetTransform(P.s_xfA,d),n.GetTransform(P.s_xfB,d);var b=P.s_fcn.Evaluate(P.s_xfA,P.s_xfB);if(a.Abs(b-c)<.025*t){h=d;break}if(b>c?(p=d,_=b):(y=d,u=b),++x,++P.b2_toiRootIters,50==x)break}if(P.b2_toiMaxRootIters=a.Max(P.b2_toiMaxRootIters,x),h<(1+100*Number.MIN_VALUE)*m)break;if(m=h,l++,++P.b2_toiIters,1e3==l)break}return P.b2_toiMaxIters=a.Max(P.b2_toiMaxIters,l),m},t.postDefs.push(function(){t.Collision.b2TimeOfImpact.b2_toiCalls=0,t.Collision.b2TimeOfImpact.b2_toiIters=0,t.Collision.b2TimeOfImpact.b2_toiMaxIters=0,t.Collision.b2TimeOfImpact.b2_toiRootIters=0,t.Collision.b2TimeOfImpact.b2_toiMaxRootIters=0,t.Collision.b2TimeOfImpact.s_cache=new J,t.Collision.b2TimeOfImpact.s_distanceInput=new d,t.Collision.b2TimeOfImpact.s_xfA=new l,t.Collision.b2TimeOfImpact.s_xfB=new l,t.Collision.b2TimeOfImpact.s_fcn=new G,t.Collision.b2TimeOfImpact.s_distanceOutput=new b}),R.b2TOIInput=function(){this.proxyA=new v,this.proxyB=new v,this.sweepA=new m,this.sweepB=new m},T.b2WorldManifold=function(){this.m_normal=new c},T.prototype.b2WorldManifold=function(){this.m_points=new o(r.b2_maxManifoldPoints);for(var t=0;t<r.b2_maxManifoldPoints;t++)this.m_points[t]=new c},T.prototype.Initialize=function(t,i,o,e,n){if(void 0===o&&(o=0),void 0===n&&(n=0),0!=t.m_pointCount){var s,r,a=0,m=0,l=0,c=0,_=0,h=0;switch(s=0,t.m_type){case g.e_circles:r=i.R,s=t.m_localPoint,a=i.position.x+r.col1.x*s.x+r.col2.x*s.y,i=i.position.y+r.col1.y*s.x+r.col2.y*s.y,r=e.R,s=t.m_points[0].m_localPoint,t=e.position.x+r.col1.x*s.x+r.col2.x*s.y,e=e.position.y+r.col1.y*s.x+r.col2.y*s.y,(m=(s=t-a)*s+(r=e-i)*r)>Number.MIN_VALUE*Number.MIN_VALUE?(m=Math.sqrt(m),this.m_normal.x=s/m,this.m_normal.y=r/m):(this.m_normal.x=1,this.m_normal.y=0),s=i+o*this.m_normal.y,e-=n*this.m_normal.y,this.m_points[0].x=.5*(a+o*this.m_normal.x+(t-n*this.m_normal.x)),this.m_points[0].y=.5*(s+e);break;case g.e_faceA:for(r=i.R,s=t.m_localPlaneNormal,m=r.col1.x*s.x+r.col2.x*s.y,l=r.col1.y*s.x+r.col2.y*s.y,r=i.R,s=t.m_localPoint,c=i.position.x+r.col1.x*s.x+r.col2.x*s.y,_=i.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_normal.x=m,this.m_normal.y=l,a=0;a<t.m_pointCount;a++)r=e.R,s=t.m_points[a].m_localPoint,h=e.position.x+r.col1.x*s.x+r.col2.x*s.y,s=e.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_points[a].x=h+.5*(o-(h-c)*m-(s-_)*l-n)*m,this.m_points[a].y=s+.5*(o-(h-c)*m-(s-_)*l-n)*l;break;case g.e_faceB:for(r=e.R,s=t.m_localPlaneNormal,m=r.col1.x*s.x+r.col2.x*s.y,l=r.col1.y*s.x+r.col2.y*s.y,r=e.R,s=t.m_localPoint,c=e.position.x+r.col1.x*s.x+r.col2.x*s.y,_=e.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_normal.x=-m,this.m_normal.y=-l,a=0;a<t.m_pointCount;a++)r=i.R,s=t.m_points[a].m_localPoint,h=i.position.x+r.col1.x*s.x+r.col2.x*s.y,s=i.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_points[a].x=h+.5*(n-(h-c)*m-(s-_)*l-o)*m,this.m_points[a].y=s+.5*(n-(h-c)*m-(s-_)*l-o)*l}}},k.ClipVertex=function(){this.v=new c,this.id=new u},k.prototype.Set=function(t){this.v.SetV(t.v),this.id.Set(t.id)},z.Features=function(){},Object.defineProperty(z.prototype,"referenceEdge",{enumerable:!1,configurable:!0,get:function(){return this._referenceEdge}}),Object.defineProperty(z.prototype,"referenceEdge",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._referenceEdge=t,this._m_id._key=4294967040&this._m_id._key|255&this._referenceEdge}}),Object.defineProperty(z.prototype,"incidentEdge",{enumerable:!1,configurable:!0,get:function(){return this._incidentEdge}}),Object.defineProperty(z.prototype,"incidentEdge",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._incidentEdge=t,this._m_id._key=4294902015&this._m_id._key|this._incidentEdge<<8&65280}}),Object.defineProperty(z.prototype,"incidentVertex",{enumerable:!1,configurable:!0,get:function(){return this._incidentVertex}}),Object.defineProperty(z.prototype,"incidentVertex",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._incidentVertex=t,this._m_id._key=4278255615&this._m_id._key|this._incidentVertex<<16&16711680}}),Object.defineProperty(z.prototype,"flip",{enumerable:!1,configurable:!0,get:function(){return this._flip}}),Object.defineProperty(z.prototype,"flip",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._flip=t,this._m_id._key=16777215&this._m_id._key|this._flip<<24&4278190080}})}(),function(){var i=t.Common.b2Settings,n=t.Collision.Shapes.b2CircleShape,s=t.Collision.Shapes.b2EdgeChainDef,r=t.Collision.Shapes.b2EdgeShape,a=t.Collision.Shapes.b2MassData,m=t.Collision.Shapes.b2PolygonShape,l=t.Collision.Shapes.b2Shape,c=t.Common.Math.b2Mat22,_=t.Common.Math.b2Math,h=t.Common.Math.b2Transform,p=t.Common.Math.b2Vec2,y=t.Collision.b2Distance,u=t.Collision.b2DistanceInput,x=t.Collision.b2DistanceOutput,f=t.Collision.b2DistanceProxy,d=t.Collision.b2SimplexCache;t.inherit(n,t.Collision.Shapes.b2Shape),n.prototype.__super=t.Collision.Shapes.b2Shape.prototype,n.b2CircleShape=function(){t.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.m_p=new p},n.prototype.Copy=function(){var t=new n;return t.Set(this),t},n.prototype.Set=function(i){this.__super.Set.call(this,i),t.is(i,n)&&this.m_p.SetV((i instanceof n?i:null).m_p)},n.prototype.TestPoint=function(t,i){var o=t.R,e=t.position.x+(o.col1.x*this.m_p.x+o.col2.x*this.m_p.y);return o=t.position.y+(o.col1.y*this.m_p.x+o.col2.y*this.m_p.y),(e=i.x-e)*e+(o=i.y-o)*o<=this.m_radius*this.m_radius},n.prototype.RayCast=function(t,i,o){var e=o.R,n=i.p1.x-(o.position.x+(e.col1.x*this.m_p.x+e.col2.x*this.m_p.y));o=i.p1.y-(o.position.y+(e.col1.y*this.m_p.x+e.col2.y*this.m_p.y)),e=i.p2.x-i.p1.x;var s=i.p2.y-i.p1.y,r=n*e+o*s,a=e*e+s*s,m=r*r-a*(n*n+o*o-this.m_radius*this.m_radius);return!(m<0||a<Number.MIN_VALUE)&&(0<=(r=-(r+Math.sqrt(m)))&&r<=i.maxFraction*a&&(r/=a,t.fraction=r,t.normal.x=n+r*e,t.normal.y=o+r*s,t.normal.Normalize(),!0))},n.prototype.ComputeAABB=function(t,i){var o=i.R,e=i.position.x+(o.col1.x*this.m_p.x+o.col2.x*this.m_p.y);o=i.position.y+(o.col1.y*this.m_p.x+o.col2.y*this.m_p.y),t.lowerBound.Set(e-this.m_radius,o-this.m_radius),t.upperBound.Set(e+this.m_radius,o+this.m_radius)},n.prototype.ComputeMass=function(t,o){void 0===o&&(o=0),t.mass=o*i.b2_pi*this.m_radius*this.m_radius,t.center.SetV(this.m_p),t.I=t.mass*(.5*this.m_radius*this.m_radius+(this.m_p.x*this.m_p.x+this.m_p.y*this.m_p.y))},n.prototype.ComputeSubmergedArea=function(t,i,o,e){void 0===i&&(i=0),o=_.MulX(o,this.m_p);var n=-(_.Dot(t,o)-i);if(n<-this.m_radius+Number.MIN_VALUE)return 0;if(n>this.m_radius)return e.SetV(o),Math.PI*this.m_radius*this.m_radius;var s=n*n;return n=(i=this.m_radius*this.m_radius)*(Math.asin(n/this.m_radius)+Math.PI/2)+n*Math.sqrt(i-s),i=-2/3*Math.pow(i-s,1.5)/n,e.x=o.x+t.x*i,e.y=o.y+t.y*i,n},n.prototype.GetLocalPosition=function(){return this.m_p},n.prototype.SetLocalPosition=function(t){this.m_p.SetV(t)},n.prototype.GetRadius=function(){return this.m_radius},n.prototype.SetRadius=function(t){void 0===t&&(t=0),this.m_radius=t},n.prototype.b2CircleShape=function(t){void 0===t&&(t=0),this.__super.b2Shape.call(this),this.m_type=l.e_circleShape,this.m_radius=t},s.b2EdgeChainDef=function(){},s.prototype.b2EdgeChainDef=function(){this.vertexCount=0,this.isALoop=!0,this.vertices=[]},t.inherit(r,t.Collision.Shapes.b2Shape),r.prototype.__super=t.Collision.Shapes.b2Shape.prototype,r.b2EdgeShape=function(){t.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.s_supportVec=new p,this.m_v1=new p,this.m_v2=new p,this.m_coreV1=new p,this.m_coreV2=new p,this.m_normal=new p,this.m_direction=new p,this.m_cornerDir1=new p,this.m_cornerDir2=new p},r.prototype.TestPoint=function(){return!1},r.prototype.RayCast=function(t,i,o){var e,n=i.p2.x-i.p1.x,s=i.p2.y-i.p1.y;e=o.R;var r=o.position.x+(e.col1.x*this.m_v1.x+e.col2.x*this.m_v1.y),a=o.position.y+(e.col1.y*this.m_v1.x+e.col2.y*this.m_v1.y),m=o.position.y+(e.col1.y*this.m_v2.x+e.col2.y*this.m_v2.y)-a,l=-(n*m+s*(o=-(o.position.x+(e.col1.x*this.m_v2.x+e.col2.x*this.m_v2.y)-r)));if(l>(e=100*Number.MIN_VALUE)){r=i.p1.x-r;var c=i.p1.y-a;if(0<=(a=r*m+c*o)&&a<=i.maxFraction*l&&-e*l<=(i=-n*c+s*r)&&i<=l*(1+e))return a/=l,t.fraction=a,i=Math.sqrt(m*m+o*o),t.normal.x=m/i,t.normal.y=o/i,!0}return!1},r.prototype.ComputeAABB=function(t,i){var o=i.R,e=i.position.x+(o.col1.x*this.m_v1.x+o.col2.x*this.m_v1.y),n=i.position.y+(o.col1.y*this.m_v1.x+o.col2.y*this.m_v1.y),s=i.position.x+(o.col1.x*this.m_v2.x+o.col2.x*this.m_v2.y);o=i.position.y+(o.col1.y*this.m_v2.x+o.col2.y*this.m_v2.y),e<s?(t.lowerBound.x=e,t.upperBound.x=s):(t.lowerBound.x=s,t.upperBound.x=e),n<o?(t.lowerBound.y=n,t.upperBound.y=o):(t.lowerBound.y=o,t.upperBound.y=n)},r.prototype.ComputeMass=function(t){t.mass=0,t.center.SetV(this.m_v1),t.I=0},r.prototype.ComputeSubmergedArea=function(t,i,o,e){void 0===i&&(i=0);var n=new p(t.x*i,t.y*i),s=_.MulX(o,this.m_v1);o=_.MulX(o,this.m_v2);var r=_.Dot(t,s)-i;if(t=_.Dot(t,o)-i,r>0){if(t>0)return 0;s.x=-t/(r-t)*s.x+r/(r-t)*o.x,s.y=-t/(r-t)*s.y+r/(r-t)*o.y}else t>0&&(o.x=-t/(r-t)*s.x+r/(r-t)*o.x,o.y=-t/(r-t)*s.y+r/(r-t)*o.y);return e.x=(n.x+s.x+o.x)/3,e.y=(n.y+s.y+o.y)/3,.5*((s.x-n.x)*(o.y-n.y)-(s.y-n.y)*(o.x-n.x))},r.prototype.GetLength=function(){return this.m_length},r.prototype.GetVertex1=function(){return this.m_v1},r.prototype.GetVertex2=function(){return this.m_v2},r.prototype.GetCoreVertex1=function(){return this.m_coreV1},r.prototype.GetCoreVertex2=function(){return this.m_coreV2},r.prototype.GetNormalVector=function(){return this.m_normal},r.prototype.GetDirectionVector=function(){return this.m_direction},r.prototype.GetCorner1Vector=function(){return this.m_cornerDir1},r.prototype.GetCorner2Vector=function(){return this.m_cornerDir2},r.prototype.Corner1IsConvex=function(){return this.m_cornerConvex1},r.prototype.Corner2IsConvex=function(){return this.m_cornerConvex2},r.prototype.GetFirstVertex=function(t){var i=t.R;return new p(t.position.x+(i.col1.x*this.m_coreV1.x+i.col2.x*this.m_coreV1.y),t.position.y+(i.col1.y*this.m_coreV1.x+i.col2.y*this.m_coreV1.y))},r.prototype.GetNextEdge=function(){return this.m_nextEdge},r.prototype.GetPrevEdge=function(){return this.m_prevEdge},r.prototype.Support=function(t,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var e=t.R,n=t.position.x+(e.col1.x*this.m_coreV1.x+e.col2.x*this.m_coreV1.y),s=t.position.y+(e.col1.y*this.m_coreV1.x+e.col2.y*this.m_coreV1.y),r=t.position.x+(e.col1.x*this.m_coreV2.x+e.col2.x*this.m_coreV2.y);return n*i+s*o>r*i+(t=t.position.y+(e.col1.y*this.m_coreV2.x+e.col2.y*this.m_coreV2.y))*o?(this.s_supportVec.x=n,this.s_supportVec.y=s):(this.s_supportVec.x=r,this.s_supportVec.y=t),this.s_supportVec},r.prototype.b2EdgeShape=function(t,o){this.__super.b2Shape.call(this),this.m_type=l.e_edgeShape,this.m_nextEdge=this.m_prevEdge=null,this.m_v1=t,this.m_v2=o,this.m_direction.Set(this.m_v2.x-this.m_v1.x,this.m_v2.y-this.m_v1.y),this.m_length=this.m_direction.Normalize(),this.m_normal.Set(this.m_direction.y,-this.m_direction.x),this.m_coreV1.Set(-i.b2_toiSlop*(this.m_normal.x-this.m_direction.x)+this.m_v1.x,-i.b2_toiSlop*(this.m_normal.y-this.m_direction.y)+this.m_v1.y),this.m_coreV2.Set(-i.b2_toiSlop*(this.m_normal.x+this.m_direction.x)+this.m_v2.x,-i.b2_toiSlop*(this.m_normal.y+this.m_direction.y)+this.m_v2.y),this.m_cornerDir1=this.m_normal,this.m_cornerDir2.Set(-this.m_normal.x,-this.m_normal.y)},r.prototype.SetPrevEdge=function(t,i,o,e){this.m_prevEdge=t,this.m_coreV1=i,this.m_cornerDir1=o,this.m_cornerConvex1=e},r.prototype.SetNextEdge=function(t,i,o,e){this.m_nextEdge=t,this.m_coreV2=i,this.m_cornerDir2=o,this.m_cornerConvex2=e},a.b2MassData=function(){this.mass=0,this.center=new p(0,0),this.I=0},t.inherit(m,t.Collision.Shapes.b2Shape),m.prototype.__super=t.Collision.Shapes.b2Shape.prototype,m.b2PolygonShape=function(){t.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments)},m.prototype.Copy=function(){var t=new m;return t.Set(this),t},m.prototype.Set=function(i){if(this.__super.Set.call(this,i),t.is(i,m)){i=i instanceof m?i:null,this.m_centroid.SetV(i.m_centroid),this.m_vertexCount=i.m_vertexCount,this.Reserve(this.m_vertexCount);for(var o=0;o<this.m_vertexCount;o++)this.m_vertices[o].SetV(i.m_vertices[o]),this.m_normals[o].SetV(i.m_normals[o])}},m.prototype.SetAsArray=function(t,i){void 0===i&&(i=0);var e,n=new o,s=0;for(s=0;s<t.length;++s)e=t[s],n.push(e);this.SetAsVector(n,i)},m.AsArray=function(t,i){void 0===i&&(i=0);var o=new m;return o.SetAsArray(t,i),o},m.prototype.SetAsVector=function(t,o){void 0===o&&(o=0),0==o&&(o=t.length),i.b2Assert(2<=o),this.m_vertexCount=o,this.Reserve(o);var e=0;for(e=0;e<this.m_vertexCount;e++)this.m_vertices[e].SetV(t[e]);for(e=0;e<this.m_vertexCount;++e){var n=parseInt(e),s=parseInt(e+1<this.m_vertexCount?e+1:0);n=_.SubtractVV(this.m_vertices[s],this.m_vertices[n]),i.b2Assert(n.LengthSquared()>Number.MIN_VALUE),this.m_normals[e].SetV(_.CrossVF(n,1)),this.m_normals[e].Normalize()}this.m_centroid=m.ComputeCentroid(this.m_vertices,this.m_vertexCount)},m.AsVector=function(t,i){void 0===i&&(i=0);var o=new m;return o.SetAsVector(t,i),o},m.prototype.SetAsBox=function(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-i),this.m_vertices[1].Set(t,-i),this.m_vertices[2].Set(t,i),this.m_vertices[3].Set(-t,i),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero()},m.AsBox=function(t,i){void 0===t&&(t=0),void 0===i&&(i=0);var o=new m;return o.SetAsBox(t,i),o},m.prototype.SetAsOrientedBox=function(t,i,o,e){for(void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=null),void 0===e&&(e=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-i),this.m_vertices[1].Set(t,-i),this.m_vertices[2].Set(t,i),this.m_vertices[3].Set(-t,i),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid=o,(t=new h).position=o,t.R.Set(e),o=0;o<this.m_vertexCount;++o)this.m_vertices[o]=_.MulX(t,this.m_vertices[o]),this.m_normals[o]=_.MulMV(t.R,this.m_normals[o])},m.AsOrientedBox=function(t,i,o,e){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=null),void 0===e&&(e=0);var n=new m;return n.SetAsOrientedBox(t,i,o,e),n},m.prototype.SetAsEdge=function(t,i){this.m_vertexCount=2,this.Reserve(2),this.m_vertices[0].SetV(t),this.m_vertices[1].SetV(i),this.m_centroid.x=.5*(t.x+i.x),this.m_centroid.y=.5*(t.y+i.y),this.m_normals[0]=_.CrossVF(_.SubtractVV(i,t),1),this.m_normals[0].Normalize(),this.m_normals[1].x=-this.m_normals[0].x,this.m_normals[1].y=-this.m_normals[0].y},m.AsEdge=function(t,i){var o=new m;return o.SetAsEdge(t,i),o},m.prototype.TestPoint=function(t,i){var o;o=t.R;for(var e=i.x-t.position.x,n=i.y-t.position.y,s=e*o.col1.x+n*o.col1.y,r=e*o.col2.x+n*o.col2.y,a=0;a<this.m_vertexCount;++a)if(e=s-(o=this.m_vertices[a]).x,n=r-o.y,(o=this.m_normals[a]).x*e+o.y*n>0)return!1;return!0},m.prototype.RayCast=function(t,i,o){var e,n,s=0,r=i.maxFraction,a=0,m=0;a=i.p1.x-o.position.x,m=i.p1.y-o.position.y;var l=a*(e=o.R).col1.x+m*e.col1.y,c=a*e.col2.x+m*e.col2.y;a=i.p2.x-o.position.x,m=i.p2.y-o.position.y,i=a*(e=o.R).col1.x+m*e.col1.y-l,e=a*e.col2.x+m*e.col2.y-c;for(var _=parseInt(-1),h=0;h<this.m_vertexCount;++h){if(a=(n=this.m_vertices[h]).x-l,m=n.y-c,a=(n=this.m_normals[h]).x*a+n.y*m,0==(m=n.x*i+n.y*e)){if(a<0)return!1}else m<0&&a<s*m?(s=a/m,_=h):m>0&&a<r*m&&(r=a/m);if(r<s-Number.MIN_VALUE)return!1}return _>=0&&(t.fraction=s,e=o.R,n=this.m_normals[_],t.normal.x=e.col1.x*n.x+e.col2.x*n.y,t.normal.y=e.col1.y*n.x+e.col2.y*n.y,!0)},m.prototype.ComputeAABB=function(t,i){for(var o=i.R,e=this.m_vertices[0],n=i.position.x+(o.col1.x*e.x+o.col2.x*e.y),s=i.position.y+(o.col1.y*e.x+o.col2.y*e.y),r=n,a=s,m=1;m<this.m_vertexCount;++m){e=this.m_vertices[m];var l=i.position.x+(o.col1.x*e.x+o.col2.x*e.y);n=n<l?n:l,s=s<(e=i.position.y+(o.col1.y*e.x+o.col2.y*e.y))?s:e,r=r>l?r:l,a=a>e?a:e}t.lowerBound.x=n-this.m_radius,t.lowerBound.y=s-this.m_radius,t.upperBound.x=r+this.m_radius,t.upperBound.y=a+this.m_radius},m.prototype.ComputeMass=function(t,i){if(void 0===i&&(i=0),2==this.m_vertexCount)t.center.x=.5*(this.m_vertices[0].x+this.m_vertices[1].x),t.center.y=.5*(this.m_vertices[0].y+this.m_vertices[1].y),t.mass=0,t.I=0;else{for(var o=0,e=0,n=0,s=0,r=1/3,a=0;a<this.m_vertexCount;++a){var m=this.m_vertices[a],l=a+1<this.m_vertexCount?this.m_vertices[parseInt(a+1)]:this.m_vertices[0],c=m.x-0,_=m.y-0,h=l.x-0,p=l.y-0,y=c*p-_*h,u=.5*y;n+=u,o+=u*r*(0+m.x+l.x),e+=u*r*(0+m.y+l.y),s+=y*(r*(.25*((m=c)*m+(h=h)*m+h*h)+(0*m+0*h))+0+(r*(.25*((_=_)*_+(p=p)*_+p*p)+(0*_+0*p))+0))}t.mass=i*n,o*=1/n,e*=1/n,t.center.Set(o,e),t.I=i*s}},m.prototype.ComputeSubmergedArea=function(t,i,o,n){void 0===i&&(i=0);var s=_.MulTMV(o.R,t),r=i-_.Dot(t,o.position),m=new e,l=0,c=parseInt(-1);i=parseInt(-1);var h=!1;for(t=t=0;t<this.m_vertexCount;++t){m[t]=_.Dot(s,this.m_vertices[t])-r;var y=m[t]<-Number.MIN_VALUE;t>0&&(y?h||(c=t-1,l++):h&&(i=t-1,l++)),h=y}switch(l){case 0:return h?(t=new a,this.ComputeMass(t,1),n.SetV(_.MulX(o,t.center)),t.mass):0;case 1:-1==c?c=this.m_vertexCount-1:i=this.m_vertexCount-1}for(t=parseInt((c+1)%this.m_vertexCount),s=parseInt((i+1)%this.m_vertexCount),r=(0-m[c])/(m[t]-m[c]),m=(0-m[i])/(m[s]-m[i]),c=new p(this.m_vertices[c].x*(1-r)+this.m_vertices[t].x*r,this.m_vertices[c].y*(1-r)+this.m_vertices[t].y*r),i=new p(this.m_vertices[i].x*(1-m)+this.m_vertices[s].x*m,this.m_vertices[i].y*(1-m)+this.m_vertices[s].y*m),m=0,r=new p,l=this.m_vertices[t],t=t;t!=s;)h=(t=(t+1)%this.m_vertexCount)==s?i:this.m_vertices[t],m+=y=.5*((l.x-c.x)*(h.y-c.y)-(l.y-c.y)*(h.x-c.x)),r.x+=y*(c.x+l.x+h.x)/3,r.y+=y*(c.y+l.y+h.y)/3,l=h;return r.Multiply(1/m),n.SetV(_.MulX(o,r)),m},m.prototype.GetVertexCount=function(){return this.m_vertexCount},m.prototype.GetVertices=function(){return this.m_vertices},m.prototype.GetNormals=function(){return this.m_normals},m.prototype.GetSupport=function(t){for(var i=0,o=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,e=1;e<this.m_vertexCount;++e){var n=this.m_vertices[e].x*t.x+this.m_vertices[e].y*t.y;n>o&&(i=e,o=n)}return i},m.prototype.GetSupportVertex=function(t){for(var i=0,o=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,e=1;e<this.m_vertexCount;++e){var n=this.m_vertices[e].x*t.x+this.m_vertices[e].y*t.y;n>o&&(i=e,o=n)}return this.m_vertices[i]},m.prototype.Validate=function(){return!1},m.prototype.b2PolygonShape=function(){this.__super.b2Shape.call(this),this.m_type=l.e_polygonShape,this.m_centroid=new p,this.m_vertices=new o,this.m_normals=new o},m.prototype.Reserve=function(t){void 0===t&&(t=0);for(var i=parseInt(this.m_vertices.length);i<t;i++)this.m_vertices[i]=new p,this.m_normals[i]=new p},m.ComputeCentroid=function(t,i){void 0===i&&(i=0);for(var o=new p,e=0,n=0;n<i;++n){var s=t[n],r=n+1<i?t[parseInt(n+1)]:t[0],a=.5*((s.x-0)*(r.y-0)-(s.y-0)*(r.x-0));e+=a,o.x+=a*(1/3)*(0+s.x+r.x),o.y+=a*(1/3)*(0+s.y+r.y)}return o.x*=1/e,o.y*=1/e,o},m.ComputeOBB=function(t,i,e){void 0===e&&(e=0);var n=0,s=new o(e+1);for(n=0;n<e;++n)s[n]=i[n];for(s[e]=s[0],i=Number.MAX_VALUE,n=1;n<=e;++n){for(var r=s[parseInt(n-1)],a=s[n].x-r.x,m=s[n].y-r.y,l=Math.sqrt(a*a+m*m),c=-(m/=l),_=a/=l,h=l=Number.MAX_VALUE,p=-Number.MAX_VALUE,y=-Number.MAX_VALUE,u=0;u<e;++u){var x=s[u].x-r.x,f=s[u].y-r.y,d=a*x+m*f;d<l&&(l=d),(x=c*x+_*f)<h&&(h=x),d>p&&(p=d),x>y&&(y=x)}(u=(p-l)*(y-h))<.95*i&&(i=u,t.R.col1.x=a,t.R.col1.y=m,t.R.col2.x=c,t.R.col2.y=_,a=.5*(l+p),m=.5*(h+y),c=t.R,t.center.x=r.x+(c.col1.x*a+c.col2.x*m),t.center.y=r.y+(c.col1.y*a+c.col2.y*m),t.extents.x=.5*(p-l),t.extents.y=.5*(y-h))}},t.postDefs.push(function(){t.Collision.Shapes.b2PolygonShape.s_mat=new c}),l.b2Shape=function(){},l.prototype.Copy=function(){return null},l.prototype.Set=function(t){this.m_radius=t.m_radius},l.prototype.GetType=function(){return this.m_type},l.prototype.TestPoint=function(){return!1},l.prototype.RayCast=function(){return!1},l.prototype.ComputeAABB=function(){},l.prototype.ComputeMass=function(){},l.prototype.ComputeSubmergedArea=function(){return 0},l.TestOverlap=function(t,i,o,e){var n=new u;return n.proxyA=new f,n.proxyA.Set(t),n.proxyB=new f,n.proxyB.Set(o),n.transformA=i,n.transformB=e,n.useRadii=!0,(t=new d).count=0,i=new x,y.Distance(i,t,n),i.distance<10*Number.MIN_VALUE},l.prototype.b2Shape=function(){this.m_type=l.e_unknownShape,this.m_radius=i.b2_linearSlop},t.postDefs.push(function(){t.Collision.Shapes.b2Shape.e_unknownShape=parseInt(-1),t.Collision.Shapes.b2Shape.e_circleShape=0,t.Collision.Shapes.b2Shape.e_polygonShape=1,t.Collision.Shapes.b2Shape.e_edgeShape=2,t.Collision.Shapes.b2Shape.e_shapeTypeCount=3,t.Collision.Shapes.b2Shape.e_hitCollide=1,t.Collision.Shapes.b2Shape.e_missCollide=0,t.Collision.Shapes.b2Shape.e_startsInsideCollide=parseInt(-1)})}(),function(){var i=t.Common.b2Color,o=t.Common.b2Settings,e=t.Common.Math.b2Math;i.b2Color=function(){this._b=this._g=this._r=0},i.prototype.b2Color=function(i,o,n){void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0),this._r=t.parseUInt(255*e.Clamp(i,0,1)),this._g=t.parseUInt(255*e.Clamp(o,0,1)),this._b=t.parseUInt(255*e.Clamp(n,0,1))},i.prototype.Set=function(i,o,n){void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0),this._r=t.parseUInt(255*e.Clamp(i,0,1)),this._g=t.parseUInt(255*e.Clamp(o,0,1)),this._b=t.parseUInt(255*e.Clamp(n,0,1))},Object.defineProperty(i.prototype,"r",{enumerable:!1,configurable:!0,set:function(i){void 0===i&&(i=0),this._r=t.parseUInt(255*e.Clamp(i,0,1))}}),Object.defineProperty(i.prototype,"g",{enumerable:!1,configurable:!0,set:function(i){void 0===i&&(i=0),this._g=t.parseUInt(255*e.Clamp(i,0,1))}}),Object.defineProperty(i.prototype,"b",{enumerable:!1,configurable:!0,set:function(i){void 0===i&&(i=0),this._b=t.parseUInt(255*e.Clamp(i,0,1))}}),Object.defineProperty(i.prototype,"color",{enumerable:!1,configurable:!0,get:function(){return this._r<<16|this._g<<8|this._b}}),o.b2Settings=function(){},o.b2MixFriction=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=0),Math.sqrt(t*i)},o.b2MixRestitution=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=0),t>i?t:i},o.b2Assert=function(t){if(!t)throw"Assertion Failed"},t.postDefs.push(function(){t.Common.b2Settings.VERSION="2.1alpha",t.Common.b2Settings.USHRT_MAX=65535,t.Common.b2Settings.b2_pi=Math.PI,t.Common.b2Settings.b2_maxManifoldPoints=2,t.Common.b2Settings.b2_aabbExtension=.1,t.Common.b2Settings.b2_aabbMultiplier=2,t.Common.b2Settings.b2_polygonRadius=2*o.b2_linearSlop,t.Common.b2Settings.b2_linearSlop=.005,t.Common.b2Settings.b2_angularSlop=2/180*o.b2_pi,t.Common.b2Settings.b2_toiSlop=8*o.b2_linearSlop,t.Common.b2Settings.b2_maxTOIContactsPerIsland=32,t.Common.b2Settings.b2_maxTOIJointsPerIsland=32,t.Common.b2Settings.b2_velocityThreshold=1,t.Common.b2Settings.b2_maxLinearCorrection=.2,t.Common.b2Settings.b2_maxAngularCorrection=8/180*o.b2_pi,t.Common.b2Settings.b2_maxTranslation=2,t.Common.b2Settings.b2_maxTranslationSquared=o.b2_maxTranslation*o.b2_maxTranslation,t.Common.b2Settings.b2_maxRotation=.5*o.b2_pi,t.Common.b2Settings.b2_maxRotationSquared=o.b2_maxRotation*o.b2_maxRotation,t.Common.b2Settings.b2_contactBaumgarte=.2,t.Common.b2Settings.b2_timeToSleep=.5,t.Common.b2Settings.b2_linearSleepTolerance=.01,t.Common.b2Settings.b2_angularSleepTolerance=2/180*o.b2_pi})}(),function(){var i=t.Common.Math.b2Mat22,o=t.Common.Math.b2Mat33,e=t.Common.Math.b2Math,n=t.Common.Math.b2Sweep,s=t.Common.Math.b2Transform,r=t.Common.Math.b2Vec2,a=t.Common.Math.b2Vec3;i.b2Mat22=function(){this.col1=new r,this.col2=new r},i.prototype.b2Mat22=function(){this.SetIdentity()},i.FromAngle=function(t){void 0===t&&(t=0);var o=new i;return o.Set(t),o},i.FromVV=function(t,o){var e=new i;return e.SetVV(t,o),e},i.prototype.Set=function(t){void 0===t&&(t=0);var i=Math.cos(t);t=Math.sin(t),this.col1.x=i,this.col2.x=-t,this.col1.y=t,this.col2.y=i},i.prototype.SetVV=function(t,i){this.col1.SetV(t),this.col2.SetV(i)},i.prototype.Copy=function(){var t=new i;return t.SetM(this),t},i.prototype.SetM=function(t){this.col1.SetV(t.col1),this.col2.SetV(t.col2)},i.prototype.AddM=function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y},i.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col1.y=0,this.col2.y=1},i.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col1.y=0,this.col2.y=0},i.prototype.GetAngle=function(){return Math.atan2(this.col1.y,this.col1.x)},i.prototype.GetInverse=function(t){var i=this.col1.x,o=this.col2.x,e=this.col1.y,n=this.col2.y,s=i*n-o*e;return 0!=s&&(s=1/s),t.col1.x=s*n,t.col2.x=-s*o,t.col1.y=-s*e,t.col2.y=s*i,t},i.prototype.Solve=function(t,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var e=this.col1.x,n=this.col2.x,s=this.col1.y,r=this.col2.y,a=e*r-n*s;return 0!=a&&(a=1/a),t.x=a*(r*i-n*o),t.y=a*(e*o-s*i),t},i.prototype.Abs=function(){this.col1.Abs(),this.col2.Abs()},o.b2Mat33=function(){this.col1=new a,this.col2=new a,this.col3=new a},o.prototype.b2Mat33=function(t,i,o){void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=null),t||i||o?(this.col1.SetV(t),this.col2.SetV(i),this.col3.SetV(o)):(this.col1.SetZero(),this.col2.SetZero(),this.col3.SetZero())},o.prototype.SetVVV=function(t,i,o){this.col1.SetV(t),this.col2.SetV(i),this.col3.SetV(o)},o.prototype.Copy=function(){return new o(this.col1,this.col2,this.col3)},o.prototype.SetM=function(t){this.col1.SetV(t.col1),this.col2.SetV(t.col2),this.col3.SetV(t.col3)},o.prototype.AddM=function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col1.z+=t.col1.z,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y,this.col2.z+=t.col2.z,this.col3.x+=t.col3.x,this.col3.y+=t.col3.y,this.col3.z+=t.col3.z},o.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=1,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=1},o.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=0,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=0},o.prototype.Solve22=function(t,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var e=this.col1.x,n=this.col2.x,s=this.col1.y,r=this.col2.y,a=e*r-n*s;return 0!=a&&(a=1/a),t.x=a*(r*i-n*o),t.y=a*(e*o-s*i),t},o.prototype.Solve33=function(t,i,o,e){void 0===i&&(i=0),void 0===o&&(o=0),void 0===e&&(e=0);var n=this.col1.x,s=this.col1.y,r=this.col1.z,a=this.col2.x,m=this.col2.y,l=this.col2.z,c=this.col3.x,_=this.col3.y,h=this.col3.z,p=n*(m*h-l*_)+s*(l*c-a*h)+r*(a*_-m*c);return 0!=p&&(p=1/p),t.x=p*(i*(m*h-l*_)+o*(l*c-a*h)+e*(a*_-m*c)),t.y=p*(n*(o*h-e*_)+s*(e*c-i*h)+r*(i*_-o*c)),t.z=p*(n*(m*e-l*o)+s*(l*i-a*e)+r*(a*o-m*i)),t},e.b2Math=function(){},e.IsValid=function(t){return void 0===t&&(t=0),isFinite(t)},e.Dot=function(t,i){return t.x*i.x+t.y*i.y},e.CrossVV=function(t,i){return t.x*i.y-t.y*i.x},e.CrossVF=function(t,i){return void 0===i&&(i=0),new r(i*t.y,-i*t.x)},e.CrossFV=function(t,i){return void 0===t&&(t=0),new r(-t*i.y,t*i.x)},e.MulMV=function(t,i){return new r(t.col1.x*i.x+t.col2.x*i.y,t.col1.y*i.x+t.col2.y*i.y)},e.MulTMV=function(t,i){return new r(e.Dot(i,t.col1),e.Dot(i,t.col2))},e.MulX=function(t,i){var o=e.MulMV(t.R,i);return o.x+=t.position.x,o.y+=t.position.y,o},e.MulXT=function(t,i){var o=e.SubtractVV(i,t.position),n=o.x*t.R.col1.x+o.y*t.R.col1.y;return o.y=o.x*t.R.col2.x+o.y*t.R.col2.y,o.x=n,o},e.AddVV=function(t,i){return new r(t.x+i.x,t.y+i.y)},e.SubtractVV=function(t,i){return new r(t.x-i.x,t.y-i.y)},e.Distance=function(t,i){var o=t.x-i.x,e=t.y-i.y;return Math.sqrt(o*o+e*e)},e.DistanceSquared=function(t,i){var o=t.x-i.x,e=t.y-i.y;return o*o+e*e},e.MulFV=function(t,i){return void 0===t&&(t=0),new r(t*i.x,t*i.y)},e.AddMM=function(t,o){return i.FromVV(e.AddVV(t.col1,o.col1),e.AddVV(t.col2,o.col2))},e.MulMM=function(t,o){return i.FromVV(e.MulMV(t,o.col1),e.MulMV(t,o.col2))},e.MulTMM=function(t,o){var n=new r(e.Dot(t.col1,o.col1),e.Dot(t.col2,o.col1)),s=new r(e.Dot(t.col1,o.col2),e.Dot(t.col2,o.col2));return i.FromVV(n,s)},e.Abs=function(t){return void 0===t&&(t=0),t>0?t:-t},e.AbsV=function(t){return new r(e.Abs(t.x),e.Abs(t.y))},e.AbsM=function(t){return i.FromVV(e.AbsV(t.col1),e.AbsV(t.col2))},e.Min=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=0),t<i?t:i},e.MinV=function(t,i){return new r(e.Min(t.x,i.x),e.Min(t.y,i.y))},e.Max=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=0),t>i?t:i},e.MaxV=function(t,i){return new r(e.Max(t.x,i.x),e.Max(t.y,i.y))},e.Clamp=function(t,i,o){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),t<i?i:t>o?o:t},e.ClampV=function(t,i,o){return e.MaxV(i,e.MinV(t,o))},e.Swap=function(t,i){var o=t[0];t[0]=i[0],i[0]=o},e.Random=function(){return 2*Math.random()-1},e.RandomRange=function(t,i){void 0===t&&(t=0),void 0===i&&(i=0);var o=Math.random();return(i-t)*o+t},e.NextPowerOfTwo=function(t){return void 0===t&&(t=0),t|=t>>1&2147483647,t|=t>>2&1073741823,t|=t>>4&268435455,t|=t>>8&16777215,(t|=t>>16&65535)+1},e.IsPowerOfTwo=function(t){return void 0===t&&(t=0),t>0&&0==(t&t-1)},t.postDefs.push(function(){t.Common.Math.b2Math.b2Vec2_zero=new r(0,0),t.Common.Math.b2Math.b2Mat22_identity=i.FromVV(new r(1,0),new r(0,1)),t.Common.Math.b2Math.b2Transform_identity=new s(e.b2Vec2_zero,e.b2Mat22_identity)}),n.b2Sweep=function(){this.localCenter=new r,this.c0=new r,this.c=new r},n.prototype.Set=function(t){this.localCenter.SetV(t.localCenter),this.c0.SetV(t.c0),this.c.SetV(t.c),this.a0=t.a0,this.a=t.a,this.t0=t.t0},n.prototype.Copy=function(){var t=new n;return t.localCenter.SetV(this.localCenter),t.c0.SetV(this.c0),t.c.SetV(this.c),t.a0=this.a0,t.a=this.a,t.t0=this.t0,t},n.prototype.GetTransform=function(t,i){void 0===i&&(i=0),t.position.x=(1-i)*this.c0.x+i*this.c.x,t.position.y=(1-i)*this.c0.y+i*this.c.y,t.R.Set((1-i)*this.a0+i*this.a);var o=t.R;t.position.x-=o.col1.x*this.localCenter.x+o.col2.x*this.localCenter.y,t.position.y-=o.col1.y*this.localCenter.x+o.col2.y*this.localCenter.y},n.prototype.Advance=function(t){if(void 0===t&&(t=0),this.t0<t&&1-this.t0>Number.MIN_VALUE){var i=(t-this.t0)/(1-this.t0);this.c0.x=(1-i)*this.c0.x+i*this.c.x,this.c0.y=(1-i)*this.c0.y+i*this.c.y,this.a0=(1-i)*this.a0+i*this.a,this.t0=t}},s.b2Transform=function(){this.position=new r,this.R=new i},s.prototype.b2Transform=function(t,i){void 0===t&&(t=null),void 0===i&&(i=null),t&&(this.position.SetV(t),this.R.SetM(i))},s.prototype.Initialize=function(t,i){this.position.SetV(t),this.R.SetM(i)},s.prototype.SetIdentity=function(){this.position.SetZero(),this.R.SetIdentity()},s.prototype.Set=function(t){this.position.SetV(t.position),this.R.SetM(t.R)},s.prototype.GetAngle=function(){return Math.atan2(this.R.col1.y,this.R.col1.x)},r.b2Vec2=function(){},r.prototype.b2Vec2=function(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i},r.prototype.SetZero=function(){this.y=this.x=0},r.prototype.Set=function(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i},r.prototype.SetV=function(t){this.x=t.x,this.y=t.y},r.prototype.GetNegative=function(){return new r(-this.x,-this.y)},r.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y},r.Make=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=0),new r(t,i)},r.prototype.Copy=function(){return new r(this.x,this.y)},r.prototype.Add=function(t){this.x+=t.x,this.y+=t.y},r.prototype.Subtract=function(t){this.x-=t.x,this.y-=t.y},r.prototype.Multiply=function(t){void 0===t&&(t=0),this.x*=t,this.y*=t},r.prototype.MulM=function(t){var i=this.x;this.x=t.col1.x*i+t.col2.x*this.y,this.y=t.col1.y*i+t.col2.y*this.y},r.prototype.MulTM=function(t){var i=e.Dot(this,t.col1);this.y=e.Dot(this,t.col2),this.x=i},r.prototype.CrossVF=function(t){void 0===t&&(t=0);var i=this.x;this.x=t*this.y,this.y=-t*i},r.prototype.CrossFV=function(t){void 0===t&&(t=0);var i=this.x;this.x=-t*this.y,this.y=t*i},r.prototype.MinV=function(t){this.x=this.x<t.x?this.x:t.x,this.y=this.y<t.y?this.y:t.y},r.prototype.MaxV=function(t){this.x=this.x>t.x?this.x:t.x,this.y=this.y>t.y?this.y:t.y},r.prototype.Abs=function(){this.x<0&&(this.x=-this.x),this.y<0&&(this.y=-this.y)},r.prototype.Length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},r.prototype.LengthSquared=function(){return this.x*this.x+this.y*this.y},r.prototype.Normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t<Number.MIN_VALUE)return 0;var i=1/t;return this.x*=i,this.y*=i,t},r.prototype.IsValid=function(){return e.IsValid(this.x)&&e.IsValid(this.y)},a.b2Vec3=function(){},a.prototype.b2Vec3=function(t,i,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x=t,this.y=i,this.z=o},a.prototype.SetZero=function(){this.x=this.y=this.z=0},a.prototype.Set=function(t,i,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x=t,this.y=i,this.z=o},a.prototype.SetV=function(t){this.x=t.x,this.y=t.y,this.z=t.z},a.prototype.GetNegative=function(){return new a(-this.x,-this.y,-this.z)},a.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},a.prototype.Copy=function(){return new a(this.x,this.y,this.z)},a.prototype.Add=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},a.prototype.Subtract=function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},a.prototype.Multiply=function(t){void 0===t&&(t=0),this.x*=t,this.y*=t,this.z*=t}}(),function(){var i=t.Common.Math.b2Math,n=t.Common.Math.b2Sweep,s=t.Common.Math.b2Transform,r=t.Common.Math.b2Vec2,a=t.Common.b2Color,m=t.Common.b2Settings,l=t.Collision.b2AABB,c=t.Collision.b2ContactPoint,_=t.Collision.b2DynamicTreeBroadPhase,h=t.Collision.b2RayCastInput,p=t.Collision.b2RayCastOutput,y=t.Collision.Shapes.b2CircleShape,u=t.Collision.Shapes.b2EdgeShape,x=t.Collision.Shapes.b2MassData,f=t.Collision.Shapes.b2PolygonShape,d=t.Collision.Shapes.b2Shape,b=t.Dynamics.b2Body,v=t.Dynamics.b2BodyDef,C=t.Dynamics.b2ContactFilter,A=t.Dynamics.b2ContactImpulse,w=t.Dynamics.b2ContactListener,S=t.Dynamics.b2ContactManager,g=t.Dynamics.b2DebugDraw,B=t.Dynamics.b2DestructionListener,M=t.Dynamics.b2FilterData,V=t.Dynamics.b2Fixture,D=t.Dynamics.b2FixtureDef,I=t.Dynamics.b2Island,G=t.Dynamics.b2TimeStep,L=t.Dynamics.b2World,J=t.Dynamics.Contacts.b2Contact,F=t.Dynamics.Contacts.b2ContactFactory,P=t.Dynamics.Contacts.b2ContactSolver,R=t.Dynamics.Joints.b2Joint,T=t.Dynamics.Joints.b2PulleyJoint;b.b2Body=function(){this.m_xf=new s,this.m_sweep=new n,this.m_linearVelocity=new r,this.m_force=new r},b.prototype.connectEdges=function(t,o,e){void 0===e&&(e=0);var n=Math.atan2(o.GetDirectionVector().y,o.GetDirectionVector().x);e=i.MulFV(Math.tan(.5*(n-e)),o.GetDirectionVector()),e=i.SubtractVV(e,o.GetNormalVector()),e=i.MulFV(m.b2_toiSlop,e),e=i.AddVV(e,o.GetVertex1());var s=i.AddVV(t.GetDirectionVector(),o.GetDirectionVector());s.Normalize();var r=i.Dot(t.GetDirectionVector(),o.GetNormalVector())>0;return t.SetNextEdge(o,e,s,r),o.SetPrevEdge(t,e,s,r),n},b.prototype.CreateFixture=function(t){if(1==this.m_world.IsLocked())return null;var i=new V;return i.Create(this,this.m_xf,t),this.m_flags&b.e_activeFlag&&i.CreateProxy(this.m_world.m_contactManager.m_broadPhase,this.m_xf),i.m_next=this.m_fixtureList,this.m_fixtureList=i,++this.m_fixtureCount,i.m_body=this,i.m_density>0&&this.ResetMassData(),this.m_world.m_flags|=L.e_newFixture,i},b.prototype.CreateFixture2=function(t,i){void 0===i&&(i=0);var o=new D;return o.shape=t,o.density=i,this.CreateFixture(o)},b.prototype.DestroyFixture=function(t){if(1!=this.m_world.IsLocked()){for(var i=this.m_fixtureList,o=null;null!=i;){if(i==t){o?o.m_next=t.m_next:this.m_fixtureList=t.m_next;break}o=i,i=i.m_next}for(i=this.m_contactList;i;){o=i.contact,i=i.next;var e=o.GetFixtureA(),n=o.GetFixtureB();t!=e&&t!=n||this.m_world.m_contactManager.Destroy(o)}this.m_flags&b.e_activeFlag&&t.DestroyProxy(this.m_world.m_contactManager.m_broadPhase),t.Destroy(),t.m_body=null,t.m_next=null,--this.m_fixtureCount,this.ResetMassData()}},b.prototype.SetPositionAndAngle=function(t,i){var o;if(void 0===i&&(i=0),1!=this.m_world.IsLocked()){this.m_xf.R.Set(i),this.m_xf.position.SetV(t),o=this.m_xf.R;var e=this.m_sweep.localCenter;for(this.m_sweep.c.x=o.col1.x*e.x+o.col2.x*e.y,this.m_sweep.c.y=o.col1.y*e.x+o.col2.y*e.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_sweep.a0=this.m_sweep.a=i,e=this.m_world.m_contactManager.m_broadPhase,o=this.m_fixtureList;o;o=o.m_next)o.Synchronize(e,this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()}},b.prototype.SetTransform=function(t){this.SetPositionAndAngle(t.position,t.GetAngle())},b.prototype.GetTransform=function(){return this.m_xf},b.prototype.GetPosition=function(){return this.m_xf.position},b.prototype.SetPosition=function(t){this.SetPositionAndAngle(t,this.GetAngle())},b.prototype.GetAngle=function(){return this.m_sweep.a},b.prototype.SetAngle=function(t){void 0===t&&(t=0),this.SetPositionAndAngle(this.GetPosition(),t)},b.prototype.GetWorldCenter=function(){return this.m_sweep.c},b.prototype.GetLocalCenter=function(){return this.m_sweep.localCenter},b.prototype.SetLinearVelocity=function(t){this.m_type!=b.b2_staticBody&&this.m_linearVelocity.SetV(t)},b.prototype.GetLinearVelocity=function(){return this.m_linearVelocity},b.prototype.SetAngularVelocity=function(t){void 0===t&&(t=0),this.m_type!=b.b2_staticBody&&(this.m_angularVelocity=t)},b.prototype.GetAngularVelocity=function(){return this.m_angularVelocity},b.prototype.GetDefinition=function(){var t=new v;return t.type=this.GetType(),t.allowSleep=(this.m_flags&b.e_allowSleepFlag)==b.e_allowSleepFlag,t.angle=this.GetAngle(),t.angularDamping=this.m_angularDamping,t.angularVelocity=this.m_angularVelocity,t.fixedRotation=(this.m_flags&b.e_fixedRotationFlag)==b.e_fixedRotationFlag,t.bullet=(this.m_flags&b.e_bulletFlag)==b.e_bulletFlag,t.awake=(this.m_flags&b.e_awakeFlag)==b.e_awakeFlag,t.linearDamping=this.m_linearDamping,t.linearVelocity.SetV(this.GetLinearVelocity()),t.position=this.GetPosition(),t.userData=this.GetUserData(),t},b.prototype.ApplyForce=function(t,i){this.m_type==b.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_force.x+=t.x,this.m_force.y+=t.y,this.m_torque+=(i.x-this.m_sweep.c.x)*t.y-(i.y-this.m_sweep.c.y)*t.x)},b.prototype.ApplyTorque=function(t){void 0===t&&(t=0),this.m_type==b.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_torque+=t)},b.prototype.ApplyImpulse=function(t,i){this.m_type==b.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y,this.m_angularVelocity+=this.m_invI*((i.x-this.m_sweep.c.x)*t.y-(i.y-this.m_sweep.c.y)*t.x))},b.prototype.Split=function(t){for(var o,e=this.GetLinearVelocity().Copy(),n=this.GetAngularVelocity(),s=this.GetWorldCenter(),r=this.m_world.CreateBody(this.GetDefinition()),a=this.m_fixtureList;a;)if(t(a)){var m=a.m_next;o?o.m_next=m:this.m_fixtureList=m,this.m_fixtureCount--,a.m_next=r.m_fixtureList,r.m_fixtureList=a,r.m_fixtureCount++,a.m_body=r,a=m}else o=a,a=a.m_next;return this.ResetMassData(),r.ResetMassData(),o=this.GetWorldCenter(),t=r.GetWorldCenter(),o=i.AddVV(e,i.CrossFV(n,i.SubtractVV(o,s))),e=i.AddVV(e,i.CrossFV(n,i.SubtractVV(t,s))),this.SetLinearVelocity(o),r.SetLinearVelocity(e),this.SetAngularVelocity(n),r.SetAngularVelocity(n),this.SynchronizeFixtures(),r.SynchronizeFixtures(),r},b.prototype.Merge=function(t){var i;for(i=t.m_fixtureList;i;){var o=i.m_next;t.m_fixtureCount--,i.m_next=this.m_fixtureList,this.m_fixtureList=i,this.m_fixtureCount++,i.m_body=n,i=o}e.m_fixtureCount=0;var e=this,n=t;e.GetWorldCenter(),n.GetWorldCenter(),e.GetLinearVelocity().Copy(),n.GetLinearVelocity().Copy(),e.GetAngularVelocity(),n.GetAngularVelocity(),e.ResetMassData(),this.SynchronizeFixtures()},b.prototype.GetMass=function(){return this.m_mass},b.prototype.GetInertia=function(){return this.m_I},b.prototype.GetMassData=function(t){t.mass=this.m_mass,t.I=this.m_I,t.center.SetV(this.m_sweep.localCenter)},b.prototype.SetMassData=function(t){if(m.b2Assert(0==this.m_world.IsLocked()),1!=this.m_world.IsLocked()&&this.m_type==b.b2_dynamicBody){this.m_invI=this.m_I=this.m_invMass=0,this.m_mass=t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,t.I>0&&0==(this.m_flags&b.e_fixedRotationFlag)&&(this.m_I=t.I-this.m_mass*(t.center.x*t.center.x+t.center.y*t.center.y),this.m_invI=1/this.m_I);var o=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(t.center),this.m_sweep.c0.SetV(i.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-o.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-o.x)}},b.prototype.ResetMassData=function(){if(this.m_invI=this.m_I=this.m_invMass=this.m_mass=0,this.m_sweep.localCenter.SetZero(),this.m_type!=b.b2_staticBody&&this.m_type!=b.b2_kinematicBody){for(var t=r.Make(0,0),o=this.m_fixtureList;o;o=o.m_next)if(0!=o.m_density){var e=o.GetMassData();this.m_mass+=e.mass,t.x+=e.center.x*e.mass,t.y+=e.center.y*e.mass,this.m_I+=e.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,t.x*=this.m_invMass,t.y*=this.m_invMass):this.m_invMass=this.m_mass=1,this.m_I>0&&0==(this.m_flags&b.e_fixedRotationFlag)?(this.m_I-=this.m_mass*(t.x*t.x+t.y*t.y),this.m_I*=this.m_inertiaScale,m.b2Assert(this.m_I>0),this.m_invI=1/this.m_I):this.m_invI=this.m_I=0,o=this.m_sweep.c.Copy(),this.m_sweep.localCenter.SetV(t),this.m_sweep.c0.SetV(i.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-o.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-o.x)}},b.prototype.GetWorldPoint=function(t){var i=this.m_xf.R;return(t=new r(i.col1.x*t.x+i.col2.x*t.y,i.col1.y*t.x+i.col2.y*t.y)).x+=this.m_xf.position.x,t.y+=this.m_xf.position.y,t},b.prototype.GetWorldVector=function(t){return i.MulMV(this.m_xf.R,t)},b.prototype.GetLocalPoint=function(t){return i.MulXT(this.m_xf,t)},b.prototype.GetLocalVector=function(t){return i.MulTMV(this.m_xf.R,t)},b.prototype.GetLinearVelocityFromWorldPoint=function(t){return new r(this.m_linearVelocity.x-this.m_angularVelocity*(t.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(t.x-this.m_sweep.c.x))},b.prototype.GetLinearVelocityFromLocalPoint=function(t){var i=this.m_xf.R;return(t=new r(i.col1.x*t.x+i.col2.x*t.y,i.col1.y*t.x+i.col2.y*t.y)).x+=this.m_xf.position.x,t.y+=this.m_xf.position.y,new r(this.m_linearVelocity.x-this.m_angularVelocity*(t.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(t.x-this.m_sweep.c.x))},b.prototype.GetLinearDamping=function(){return this.m_linearDamping},b.prototype.SetLinearDamping=function(t){void 0===t&&(t=0),this.m_linearDamping=t},b.prototype.GetAngularDamping=function(){return this.m_angularDamping},b.prototype.SetAngularDamping=function(t){void 0===t&&(t=0),this.m_angularDamping=t},b.prototype.SetType=function(t){if(void 0===t&&(t=0),this.m_type!=t)for(this.m_type=t,this.ResetMassData(),this.m_type==b.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0,t=this.m_contactList;t;t=t.next)t.contact.FlagForFiltering()},b.prototype.GetType=function(){return this.m_type},b.prototype.SetBullet=function(t){t?this.m_flags|=b.e_bulletFlag:this.m_flags&=~b.e_bulletFlag},b.prototype.IsBullet=function(){return(this.m_flags&b.e_bulletFlag)==b.e_bulletFlag},b.prototype.SetSleepingAllowed=function(t){t?this.m_flags|=b.e_allowSleepFlag:(this.m_flags&=~b.e_allowSleepFlag,this.SetAwake(!0))},b.prototype.SetAwake=function(t){t?(this.m_flags|=b.e_awakeFlag,this.m_sleepTime=0):(this.m_flags&=~b.e_awakeFlag,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)},b.prototype.IsAwake=function(){return(this.m_flags&b.e_awakeFlag)==b.e_awakeFlag},b.prototype.SetFixedRotation=function(t){t?this.m_flags|=b.e_fixedRotationFlag:this.m_flags&=~b.e_fixedRotationFlag,this.ResetMassData()},b.prototype.IsFixedRotation=function(){return(this.m_flags&b.e_fixedRotationFlag)==b.e_fixedRotationFlag},b.prototype.SetActive=function(t){var i;if(t!=this.IsActive())if(t)for(this.m_flags|=b.e_activeFlag,t=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.CreateProxy(t,this.m_xf);else{for(this.m_flags&=~b.e_activeFlag,t=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.DestroyProxy(t);for(t=this.m_contactList;t;)i=t,t=t.next,this.m_world.m_contactManager.Destroy(i.contact);this.m_contactList=null}},b.prototype.IsActive=function(){return(this.m_flags&b.e_activeFlag)==b.e_activeFlag},b.prototype.IsSleepingAllowed=function(){return(this.m_flags&b.e_allowSleepFlag)==b.e_allowSleepFlag},b.prototype.GetFixtureList=function(){return this.m_fixtureList},b.prototype.GetJointList=function(){return this.m_jointList},b.prototype.GetControllerList=function(){return this.m_controllerList},b.prototype.GetContactList=function(){return this.m_contactList},b.prototype.GetNext=function(){return this.m_next},b.prototype.GetUserData=function(){return this.m_userData},b.prototype.SetUserData=function(t){this.m_userData=t},b.prototype.GetWorld=function(){return this.m_world},b.prototype.b2Body=function(t,i){this.m_flags=0,t.bullet&&(this.m_flags|=b.e_bulletFlag),t.fixedRotation&&(this.m_flags|=b.e_fixedRotationFlag),t.allowSleep&&(this.m_flags|=b.e_allowSleepFlag),t.awake&&(this.m_flags|=b.e_awakeFlag),t.active&&(this.m_flags|=b.e_activeFlag),this.m_world=i,this.m_xf.position.SetV(t.position),this.m_xf.R.Set(t.angle),this.m_sweep.localCenter.SetZero(),this.m_sweep.t0=1,this.m_sweep.a0=this.m_sweep.a=t.angle;var o=this.m_xf.R,e=this.m_sweep.localCenter;this.m_sweep.c.x=o.col1.x*e.x+o.col2.x*e.y,this.m_sweep.c.y=o.col1.y*e.x+o.col2.y*e.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_contactList=this.m_controllerList=this.m_jointList=null,this.m_controllerCount=0,this.m_next=this.m_prev=null,this.m_linearVelocity.SetV(t.linearVelocity),this.m_angularVelocity=t.angularVelocity,this.m_linearDamping=t.linearDamping,this.m_angularDamping=t.angularDamping,this.m_force.Set(0,0),this.m_sleepTime=this.m_torque=0,this.m_type=t.type,this.m_type==b.b2_dynamicBody?this.m_invMass=this.m_mass=1:this.m_invMass=this.m_mass=0,this.m_invI=this.m_I=0,this.m_inertiaScale=t.inertiaScale,this.m_userData=t.userData,this.m_fixtureList=null,this.m_fixtureCount=0},b.prototype.SynchronizeFixtures=function(){var t=b.s_xf1;t.R.Set(this.m_sweep.a0);var i=t.R,o=this.m_sweep.localCenter;for(t.position.x=this.m_sweep.c0.x-(i.col1.x*o.x+i.col2.x*o.y),t.position.y=this.m_sweep.c0.y-(i.col1.y*o.x+i.col2.y*o.y),o=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.Synchronize(o,t,this.m_xf)},b.prototype.SynchronizeTransform=function(){this.m_xf.R.Set(this.m_sweep.a);var t=this.m_xf.R,i=this.m_sweep.localCenter;this.m_xf.position.x=this.m_sweep.c.x-(t.col1.x*i.x+t.col2.x*i.y),this.m_xf.position.y=this.m_sweep.c.y-(t.col1.y*i.x+t.col2.y*i.y)},b.prototype.ShouldCollide=function(t){if(this.m_type!=b.b2_dynamicBody&&t.m_type!=b.b2_dynamicBody)return!1;for(var i=this.m_jointList;i;i=i.next)if(i.other==t&&0==i.joint.m_collideConnected)return!1;return!0},b.prototype.Advance=function(t){void 0===t&&(t=0),this.m_sweep.Advance(t),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.SynchronizeTransform()},t.postDefs.push(function(){t.Dynamics.b2Body.s_xf1=new s,t.Dynamics.b2Body.e_islandFlag=1,t.Dynamics.b2Body.e_awakeFlag=2,t.Dynamics.b2Body.e_allowSleepFlag=4,t.Dynamics.b2Body.e_bulletFlag=8,t.Dynamics.b2Body.e_fixedRotationFlag=16,t.Dynamics.b2Body.e_activeFlag=32,t.Dynamics.b2Body.b2_staticBody=0,t.Dynamics.b2Body.b2_kinematicBody=1,t.Dynamics.b2Body.b2_dynamicBody=2}),v.b2BodyDef=function(){this.position=new r,this.linearVelocity=new r},v.prototype.b2BodyDef=function(){this.userData=null,this.position.Set(0,0),this.angle=0,this.linearVelocity.Set(0,0),this.angularDamping=this.linearDamping=this.angularVelocity=0,this.awake=this.allowSleep=!0,this.bullet=this.fixedRotation=!1,this.type=b.b2_staticBody,this.active=!0,this.inertiaScale=1},C.b2ContactFilter=function(){},C.prototype.ShouldCollide=function(t,i){var o=t.GetFilterData(),e=i.GetFilterData();return o.groupIndex==e.groupIndex&&0!=o.groupIndex?o.groupIndex>0:0!=(o.maskBits&e.categoryBits)&&0!=(o.categoryBits&e.maskBits)},C.prototype.RayCollide=function(t,i){return!t||this.ShouldCollide(t instanceof V?t:null,i)},t.postDefs.push(function(){t.Dynamics.b2ContactFilter.b2_defaultFilter=new C}),A.b2ContactImpulse=function(){this.normalImpulses=new e(m.b2_maxManifoldPoints),this.tangentImpulses=new e(m.b2_maxManifoldPoints)},w.b2ContactListener=function(){},w.prototype.BeginContact=function(){},w.prototype.EndContact=function(){},w.prototype.PreSolve=function(){},w.prototype.PostSolve=function(){},t.postDefs.push(function(){t.Dynamics.b2ContactListener.b2_defaultListener=new w}),S.b2ContactManager=function(){},S.prototype.b2ContactManager=function(){this.m_world=null,this.m_contactCount=0,this.m_contactFilter=C.b2_defaultFilter,this.m_contactListener=w.b2_defaultListener,this.m_contactFactory=new F(this.m_allocator),this.m_broadPhase=new _},S.prototype.AddPair=function(t,i){var o=t instanceof V?t:null,e=i instanceof V?i:null,n=o.GetBody(),s=e.GetBody();if(n!=s){for(var r=s.GetContactList();r;){if(r.other==n){var a=r.contact.GetFixtureA(),m=r.contact.GetFixtureB();if(a==o&&m==e)return;if(a==e&&m==o)return}r=r.next}0!=s.ShouldCollide(n)&&0!=this.m_contactFilter.ShouldCollide(o,e)&&(o=(r=this.m_contactFactory.Create(o,e)).GetFixtureA(),e=r.GetFixtureB(),n=o.m_body,s=e.m_body,r.m_prev=null,r.m_next=this.m_world.m_contactList,null!=this.m_world.m_contactList&&(this.m_world.m_contactList.m_prev=r),this.m_world.m_contactList=r,r.m_nodeA.contact=r,r.m_nodeA.other=s,r.m_nodeA.prev=null,r.m_nodeA.next=n.m_contactList,null!=n.m_contactList&&(n.m_contactList.prev=r.m_nodeA),n.m_contactList=r.m_nodeA,r.m_nodeB.contact=r,r.m_nodeB.other=n,r.m_nodeB.prev=null,r.m_nodeB.next=s.m_contactList,null!=s.m_contactList&&(s.m_contactList.prev=r.m_nodeB),s.m_contactList=r.m_nodeB,++this.m_world.m_contactCount)}},S.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(t.generateCallback(this,this.AddPair))},S.prototype.Destroy=function(t){var i=t.GetFixtureA(),o=t.GetFixtureB();i=i.GetBody(),o=o.GetBody(),t.IsTouching()&&this.m_contactListener.EndContact(t),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_world.m_contactList&&(this.m_world.m_contactList=t.m_next),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==i.m_contactList&&(i.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==o.m_contactList&&(o.m_contactList=t.m_nodeB.next),this.m_contactFactory.Destroy(t),--this.m_contactCount},S.prototype.Collide=function(){for(var t=this.m_world.m_contactList;t;){var i=t.GetFixtureA(),o=t.GetFixtureB(),e=i.GetBody(),n=o.GetBody();if(0==e.IsAwake()&&0==n.IsAwake())t=t.GetNext();else{if(t.m_flags&J.e_filterFlag){if(0==n.ShouldCollide(e)){t=(i=t).GetNext(),this.Destroy(i);continue}if(0==this.m_contactFilter.ShouldCollide(i,o)){t=(i=t).GetNext(),this.Destroy(i);continue}t.m_flags&=~J.e_filterFlag}0==this.m_broadPhase.TestOverlap(i.m_proxy,o.m_proxy)?(t=(i=t).GetNext(),this.Destroy(i)):(t.Update(this.m_contactListener),t=t.GetNext())}}},t.postDefs.push(function(){t.Dynamics.b2ContactManager.s_evalCP=new c}),g.b2DebugDraw=function(){},g.prototype.b2DebugDraw=function(){},g.prototype.SetFlags=function(){},g.prototype.GetFlags=function(){},g.prototype.AppendFlags=function(){},g.prototype.ClearFlags=function(){},g.prototype.SetSprite=function(){},g.prototype.GetSprite=function(){},g.prototype.SetDrawScale=function(){},g.prototype.GetDrawScale=function(){},g.prototype.SetLineThickness=function(){},g.prototype.GetLineThickness=function(){},g.prototype.SetAlpha=function(){},g.prototype.GetAlpha=function(){},g.prototype.SetFillAlpha=function(){},g.prototype.GetFillAlpha=function(){},g.prototype.SetXFormScale=function(){},g.prototype.GetXFormScale=function(){},g.prototype.DrawPolygon=function(){},g.prototype.DrawSolidPolygon=function(){},g.prototype.DrawCircle=function(){},g.prototype.DrawSolidCircle=function(){},g.prototype.DrawSegment=function(){},g.prototype.DrawTransform=function(){},t.postDefs.push(function(){t.Dynamics.b2DebugDraw.e_shapeBit=1,t.Dynamics.b2DebugDraw.e_jointBit=2,t.Dynamics.b2DebugDraw.e_aabbBit=4,t.Dynamics.b2DebugDraw.e_pairBit=8,t.Dynamics.b2DebugDraw.e_centerOfMassBit=16,t.Dynamics.b2DebugDraw.e_controllerBit=32}),B.b2DestructionListener=function(){},B.prototype.SayGoodbyeJoint=function(){},B.prototype.SayGoodbyeFixture=function(){},M.b2FilterData=function(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0},M.prototype.Copy=function(){var t=new M;return t.categoryBits=this.categoryBits,t.maskBits=this.maskBits,t.groupIndex=this.groupIndex,t},V.b2Fixture=function(){this.m_filter=new M},V.prototype.GetType=function(){return this.m_shape.GetType()},V.prototype.GetShape=function(){return this.m_shape},V.prototype.SetSensor=function(t){if(this.m_isSensor!=t&&(this.m_isSensor=t,null!=this.m_body))for(t=this.m_body.GetContactList();t;){var i=t.contact,o=i.GetFixtureA(),e=i.GetFixtureB();o!=this&&e!=this||i.SetSensor(o.IsSensor()||e.IsSensor()),t=t.next}},V.prototype.IsSensor=function(){return this.m_isSensor},V.prototype.SetFilterData=function(t){if(this.m_filter=t.Copy(),!this.m_body)for(t=this.m_body.GetContactList();t;){var i=t.contact,o=i.GetFixtureA(),e=i.GetFixtureB();o!=this&&e!=this||i.FlagForFiltering(),t=t.next}},V.prototype.GetFilterData=function(){return this.m_filter.Copy()},V.prototype.GetBody=function(){return this.m_body},V.prototype.GetNext=function(){return this.m_next},V.prototype.GetUserData=function(){return this.m_userData},V.prototype.SetUserData=function(t){this.m_userData=t},V.prototype.TestPoint=function(t){return this.m_shape.TestPoint(this.m_body.GetTransform(),t)},V.prototype.RayCast=function(t,i){return this.m_shape.RayCast(t,i,this.m_body.GetTransform())},V.prototype.GetMassData=function(t){return void 0===t&&(t=null),null==t&&(t=new x),this.m_shape.ComputeMass(t,this.m_density),t},V.prototype.SetDensity=function(t){void 0===t&&(t=0),this.m_density=t},V.prototype.GetDensity=function(){return this.m_density},V.prototype.GetFriction=function(){return this.m_friction},V.prototype.SetFriction=function(t){void 0===t&&(t=0),this.m_friction=t},V.prototype.GetRestitution=function(){return this.m_restitution},V.prototype.SetRestitution=function(t){void 0===t&&(t=0),this.m_restitution=t},V.prototype.GetAABB=function(){return this.m_aabb},V.prototype.b2Fixture=function(){this.m_aabb=new l,this.m_shape=this.m_next=this.m_body=this.m_userData=null,this.m_restitution=this.m_friction=this.m_density=0},V.prototype.Create=function(t,i,o){this.m_userData=o.userData,this.m_friction=o.friction,this.m_restitution=o.restitution,this.m_body=t,this.m_next=null,this.m_filter=o.filter.Copy(),this.m_isSensor=o.isSensor,this.m_shape=o.shape.Copy(),this.m_density=o.density},V.prototype.Destroy=function(){this.m_shape=null},V.prototype.CreateProxy=function(t,i){this.m_shape.ComputeAABB(this.m_aabb,i),this.m_proxy=t.CreateProxy(this.m_aabb,this)},V.prototype.DestroyProxy=function(t){null!=this.m_proxy&&(t.DestroyProxy(this.m_proxy),this.m_proxy=null)},V.prototype.Synchronize=function(t,o,e){if(this.m_proxy){var n=new l,s=new l;this.m_shape.ComputeAABB(n,o),this.m_shape.ComputeAABB(s,e),this.m_aabb.Combine(n,s),o=i.SubtractVV(e.position,o.position),t.MoveProxy(this.m_proxy,this.m_aabb,o)}},D.b2FixtureDef=function(){this.filter=new M},D.prototype.b2FixtureDef=function(){this.userData=this.shape=null,this.friction=.2,this.density=this.restitution=0,this.filter.categoryBits=1,this.filter.maskBits=65535,this.filter.groupIndex=0,this.isSensor=!1},I.b2Island=function(){},I.prototype.b2Island=function(){this.m_bodies=new o,this.m_contacts=new o,this.m_joints=new o},I.prototype.Initialize=function(t,i,o,e,n,s){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0);var r=0;for(this.m_bodyCapacity=t,this.m_contactCapacity=i,this.m_jointCapacity=o,this.m_jointCount=this.m_contactCount=this.m_bodyCount=0,this.m_allocator=e,this.m_listener=n,this.m_contactSolver=s,r=this.m_bodies.length;r<t;r++)this.m_bodies[r]=null;for(r=this.m_contacts.length;r<i;r++)this.m_contacts[r]=null;for(r=this.m_joints.length;r<o;r++)this.m_joints[r]=null},I.prototype.Clear=function(){this.m_jointCount=this.m_contactCount=this.m_bodyCount=0},I.prototype.Solve=function(t,o,e){var n,s=0,r=0;for(s=0;s<this.m_bodyCount;++s)(r=this.m_bodies[s]).GetType()==b.b2_dynamicBody&&(r.m_linearVelocity.x+=t.dt*(o.x+r.m_invMass*r.m_force.x),r.m_linearVelocity.y+=t.dt*(o.y+r.m_invMass*r.m_force.y),r.m_angularVelocity+=t.dt*r.m_invI*r.m_torque,r.m_linearVelocity.Multiply(i.Clamp(1-t.dt*r.m_linearDamping,0,1)),r.m_angularVelocity*=i.Clamp(1-t.dt*r.m_angularDamping,0,1));for(this.m_contactSolver.Initialize(t,this.m_contacts,this.m_contactCount,this.m_allocator),(o=this.m_contactSolver).InitVelocityConstraints(t),s=0;s<this.m_jointCount;++s)(n=this.m_joints[s]).InitVelocityConstraints(t);for(s=0;s<t.velocityIterations;++s){for(r=0;r<this.m_jointCount;++r)(n=this.m_joints[r]).SolveVelocityConstraints(t);o.SolveVelocityConstraints()}for(s=0;s<this.m_jointCount;++s)(n=this.m_joints[s]).FinalizeVelocityConstraints();for(o.FinalizeVelocityConstraints(),s=0;s<this.m_bodyCount;++s)if((r=this.m_bodies[s]).GetType()!=b.b2_staticBody){var a=t.dt*r.m_linearVelocity.x,l=t.dt*r.m_linearVelocity.y;a*a+l*l>m.b2_maxTranslationSquared&&(r.m_linearVelocity.Normalize(),r.m_linearVelocity.x*=m.b2_maxTranslation*t.inv_dt,r.m_linearVelocity.y*=m.b2_maxTranslation*t.inv_dt),(a=t.dt*r.m_angularVelocity)*a>m.b2_maxRotationSquared&&(r.m_angularVelocity=r.m_angularVelocity<0?-m.b2_maxRotation*t.inv_dt:m.b2_maxRotation*t.inv_dt),r.m_sweep.c0.SetV(r.m_sweep.c),r.m_sweep.a0=r.m_sweep.a,r.m_sweep.c.x+=t.dt*r.m_linearVelocity.x,r.m_sweep.c.y+=t.dt*r.m_linearVelocity.y,r.m_sweep.a+=t.dt*r.m_angularVelocity,r.SynchronizeTransform()}for(s=0;s<t.positionIterations;++s){for(a=o.SolvePositionConstraints(m.b2_contactBaumgarte),l=!0,r=0;r<this.m_jointCount;++r)n=(n=this.m_joints[r]).SolvePositionConstraints(m.b2_contactBaumgarte),l=l&&n;if(a&&l)break}if(this.Report(o.m_constraints),e){for(e=Number.MAX_VALUE,o=m.b2_linearSleepTolerance*m.b2_linearSleepTolerance,a=m.b2_angularSleepTolerance*m.b2_angularSleepTolerance,s=0;s<this.m_bodyCount;++s)(r=this.m_bodies[s]).GetType()!=b.b2_staticBody&&(0==(r.m_flags&b.e_allowSleepFlag)&&(e=r.m_sleepTime=0),0==(r.m_flags&b.e_allowSleepFlag)||r.m_angularVelocity*r.m_angularVelocity>a||i.Dot(r.m_linearVelocity,r.m_linearVelocity)>o?e=r.m_sleepTime=0:(r.m_sleepTime+=t.dt,e=i.Min(e,r.m_sleepTime)));if(e>=m.b2_timeToSleep)for(s=0;s<this.m_bodyCount;++s)(r=this.m_bodies[s]).SetAwake(!1)}},I.prototype.SolveTOI=function(t){var i=0,o=0;this.m_contactSolver.Initialize(t,this.m_contacts,this.m_contactCount,this.m_allocator);var e=this.m_contactSolver;for(i=0;i<this.m_jointCount;++i)this.m_joints[i].InitVelocityConstraints(t);for(i=0;i<t.velocityIterations;++i)for(e.SolveVelocityConstraints(),o=0;o<this.m_jointCount;++o)this.m_joints[o].SolveVelocityConstraints(t);for(i=0;i<this.m_bodyCount;++i)if((o=this.m_bodies[i]).GetType()!=b.b2_staticBody){var n=t.dt*o.m_linearVelocity.x,s=t.dt*o.m_linearVelocity.y;n*n+s*s>m.b2_maxTranslationSquared&&(o.m_linearVelocity.Normalize(),o.m_linearVelocity.x*=m.b2_maxTranslation*t.inv_dt,o.m_linearVelocity.y*=m.b2_maxTranslation*t.inv_dt),(n=t.dt*o.m_angularVelocity)*n>m.b2_maxRotationSquared&&(o.m_angularVelocity=o.m_angularVelocity<0?-m.b2_maxRotation*t.inv_dt:m.b2_maxRotation*t.inv_dt),o.m_sweep.c0.SetV(o.m_sweep.c),o.m_sweep.a0=o.m_sweep.a,o.m_sweep.c.x+=t.dt*o.m_linearVelocity.x,o.m_sweep.c.y+=t.dt*o.m_linearVelocity.y,o.m_sweep.a+=t.dt*o.m_angularVelocity,o.SynchronizeTransform()}for(i=0;i<t.positionIterations;++i){for(n=e.SolvePositionConstraints(.75),s=!0,o=0;o<this.m_jointCount;++o){var r=this.m_joints[o].SolvePositionConstraints(m.b2_contactBaumgarte);s=s&&r}if(n&&s)break}this.Report(e.m_constraints)},I.prototype.Report=function(t){if(null!=this.m_listener)for(var i=0;i<this.m_contactCount;++i){for(var o=this.m_contacts[i],e=t[i],n=0;n<e.pointCount;++n)I.s_impulse.normalImpulses[n]=e.points[n].normalImpulse,I.s_impulse.tangentImpulses[n]=e.points[n].tangentImpulse;this.m_listener.PostSolve(o,I.s_impulse)}},I.prototype.AddBody=function(t){t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=t},I.prototype.AddContact=function(t){this.m_contacts[this.m_contactCount++]=t},I.prototype.AddJoint=function(t){this.m_joints[this.m_jointCount++]=t},t.postDefs.push(function(){t.Dynamics.b2Island.s_impulse=new A}),G.b2TimeStep=function(){},G.prototype.Set=function(t){this.dt=t.dt,this.inv_dt=t.inv_dt,this.positionIterations=t.positionIterations,this.velocityIterations=t.velocityIterations,this.warmStarting=t.warmStarting},L.b2World=function(){this.s_stack=new o,this.m_contactManager=new S,this.m_contactSolver=new P,this.m_island=new I},L.prototype.b2World=function(t,i){this.m_controllerList=this.m_jointList=this.m_contactList=this.m_bodyList=this.m_debugDraw=this.m_destructionListener=null,this.m_controllerCount=this.m_jointCount=this.m_contactCount=this.m_bodyCount=0,L.m_warmStarting=!0,L.m_continuousPhysics=!0,this.m_allowSleep=i,this.m_gravity=t,this.m_inv_dt0=0,this.m_contactManager.m_world=this,this.m_groundBody=this.CreateBody(new v)},L.prototype.SetDestructionListener=function(t){this.m_destructionListener=t},L.prototype.SetContactFilter=function(t){this.m_contactManager.m_contactFilter=t},L.prototype.SetContactListener=function(t){this.m_contactManager.m_contactListener=t},L.prototype.SetDebugDraw=function(t){this.m_debugDraw=t},L.prototype.SetBroadPhase=function(t){var i=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=t;for(var o=this.m_bodyList;o;o=o.m_next)for(var e=o.m_fixtureList;e;e=e.m_next)e.m_proxy=t.CreateProxy(i.GetFatAABB(e.m_proxy),e)},L.prototype.Validate=function(){this.m_contactManager.m_broadPhase.Validate()},L.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()},L.prototype.CreateBody=function(t){return 1==this.IsLocked()?null:((t=new b(t,this)).m_prev=null,(t.m_next=this.m_bodyList)&&(this.m_bodyList.m_prev=t),this.m_bodyList=t,++this.m_bodyCount,t)},L.prototype.DestroyBody=function(t){if(1!=this.IsLocked()){for(var i=t.m_jointList;i;){var o=i;i=i.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(o.joint),this.DestroyJoint(o.joint)}for(i=t.m_controllerList;i;)o=i,i=i.nextController,o.controller.RemoveBody(t);for(i=t.m_contactList;i;)o=i,i=i.next,this.m_contactManager.Destroy(o.contact);for(t.m_contactList=null,i=t.m_fixtureList;i;)o=i,i=i.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(o),o.DestroyProxy(this.m_contactManager.m_broadPhase),o.Destroy();t.m_fixtureList=null,t.m_fixtureCount=0,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),--this.m_bodyCount}},L.prototype.CreateJoint=function(t){var i=R.Create(t,null);i.m_prev=null,(i.m_next=this.m_jointList)&&(this.m_jointList.m_prev=i),this.m_jointList=i,++this.m_jointCount,i.m_edgeA.joint=i,i.m_edgeA.other=i.m_bodyB,i.m_edgeA.prev=null,(i.m_edgeA.next=i.m_bodyA.m_jointList)&&(i.m_bodyA.m_jointList.prev=i.m_edgeA),i.m_bodyA.m_jointList=i.m_edgeA,i.m_edgeB.joint=i,i.m_edgeB.other=i.m_bodyA,i.m_edgeB.prev=null,(i.m_edgeB.next=i.m_bodyB.m_jointList)&&(i.m_bodyB.m_jointList.prev=i.m_edgeB),i.m_bodyB.m_jointList=i.m_edgeB;var o=t.bodyA,e=t.bodyB;if(0==t.collideConnected)for(t=e.GetContactList();t;)t.other==o&&t.contact.FlagForFiltering(),t=t.next;return i},L.prototype.DestroyJoint=function(t){var i=t.m_collideConnected;t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var o=t.m_bodyA,e=t.m_bodyB;if(o.SetAwake(!0),e.SetAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==o.m_jointList&&(o.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==e.m_jointList&&(e.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,R.Destroy(t,null),--this.m_jointCount,0==i)for(t=e.GetContactList();t;)t.other==o&&t.contact.FlagForFiltering(),t=t.next},L.prototype.AddController=function(t){return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList=t,t.m_world=this,this.m_controllerCount++,t},L.prototype.RemoveController=function(t){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),this.m_controllerList==t&&(this.m_controllerList=t.m_next),this.m_controllerCount--},L.prototype.CreateController=function(t){if(t.m_world!=this)throw Error("Controller can only be a member of one world");return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=t),this.m_controllerList=t,++this.m_controllerCount,t.m_world=this,t},L.prototype.DestroyController=function(t){t.Clear(),t.m_next&&(t.m_next.m_prev=t.m_prev),t.m_prev&&(t.m_prev.m_next=t.m_next),t==this.m_controllerList&&(this.m_controllerList=t.m_next),--this.m_controllerCount},L.prototype.SetWarmStarting=function(t){L.m_warmStarting=t},L.prototype.SetContinuousPhysics=function(t){L.m_continuousPhysics=t},L.prototype.GetBodyCount=function(){return this.m_bodyCount},L.prototype.GetJointCount=function(){return this.m_jointCount},L.prototype.GetContactCount=function(){return this.m_contactCount},L.prototype.SetGravity=function(t){this.m_gravity=t},L.prototype.GetGravity=function(){return this.m_gravity},L.prototype.GetGroundBody=function(){return this.m_groundBody},L.prototype.Step=function(t,i,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),this.m_flags&L.e_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_flags&=~L.e_newFixture),this.m_flags|=L.e_locked;var e=L.s_timestep2;e.dt=t,e.velocityIterations=i,e.positionIterations=o,e.inv_dt=t>0?1/t:0,e.dtRatio=this.m_inv_dt0*t,e.warmStarting=L.m_warmStarting,this.m_contactManager.Collide(),e.dt>0&&this.Solve(e),L.m_continuousPhysics&&e.dt>0&&this.SolveTOI(e),e.dt>0&&(this.m_inv_dt0=e.inv_dt),this.m_flags&=~L.e_locked},L.prototype.ClearForces=function(){for(var t=this.m_bodyList;t;t=t.m_next)t.m_force.SetZero(),t.m_torque=0},L.prototype.DrawDebugData=function(){if(null!=this.m_debugDraw){this.m_debugDraw.m_sprite.graphics.clear();var t,i,o,e,n=this.m_debugDraw.GetFlags();new r,new r,new r,new l,new l,e=[new r,new r,new r,new r];var s=new a(0,0,0);if(n&g.e_shapeBit)for(t=this.m_bodyList;t;t=t.m_next)for(e=t.m_xf,i=t.GetFixtureList();i;i=i.m_next)o=i.GetShape(),0==t.IsActive()?s.Set(.5,.5,.3):t.GetType()==b.b2_staticBody?s.Set(.5,.9,.5):t.GetType()==b.b2_kinematicBody?s.Set(.5,.5,.9):0==t.IsAwake()?s.Set(.6,.6,.6):s.Set(.9,.7,.7),this.DrawShape(o,e,s);if(n&g.e_jointBit)for(t=this.m_jointList;t;t=t.m_next)this.DrawJoint(t);if(n&g.e_controllerBit)for(t=this.m_controllerList;t;t=t.m_next)t.Draw(this.m_debugDraw);if(n&g.e_pairBit)for(s.Set(.3,.9,.9),t=this.m_contactManager.m_contactList;t;t=t.GetNext())o=t.GetFixtureA(),i=t.GetFixtureB(),o=o.GetAABB().GetCenter(),i=i.GetAABB().GetCenter(),this.m_debugDraw.DrawSegment(o,i,s);if(n&g.e_aabbBit)for(o=this.m_contactManager.m_broadPhase,e=[new r,new r,new r,new r],t=this.m_bodyList;t;t=t.GetNext())if(0!=t.IsActive())for(i=t.GetFixtureList();i;i=i.GetNext()){var m=o.GetFatAABB(i.m_proxy);e[0].Set(m.lowerBound.x,m.lowerBound.y),e[1].Set(m.upperBound.x,m.lowerBound.y),e[2].Set(m.upperBound.x,m.upperBound.y),e[3].Set(m.lowerBound.x,m.upperBound.y),this.m_debugDraw.DrawPolygon(e,4,s)}if(n&g.e_centerOfMassBit)for(t=this.m_bodyList;t;t=t.m_next)(e=L.s_xf).R=t.m_xf.R,e.position=t.GetWorldCenter(),this.m_debugDraw.DrawTransform(e)}},L.prototype.QueryAABB=function(t,i){var o=this.m_contactManager.m_broadPhase;o.Query(function(i){return t(o.GetUserData(i))},i)},L.prototype.QueryShape=function(t,i,o){void 0===o&&(o=null),null==o&&(o=new s).SetIdentity();var e=this.m_contactManager.m_broadPhase,n=new l;i.ComputeAABB(n,o),e.Query(function(n){return n=e.GetUserData(n)instanceof V?e.GetUserData(n):null,!d.TestOverlap(i,o,n.GetShape(),n.GetBody().GetTransform())||t(n)},n)},L.prototype.QueryPoint=function(t,i){var o=this.m_contactManager.m_broadPhase,e=new l;e.lowerBound.Set(i.x-m.b2_linearSlop,i.y-m.b2_linearSlop),e.upperBound.Set(i.x+m.b2_linearSlop,i.y+m.b2_linearSlop),o.Query(function(e){return!(e=o.GetUserData(e)instanceof V?o.GetUserData(e):null).TestPoint(i)||t(e)},e)},L.prototype.RayCast=function(t,i,o){var e=this.m_contactManager.m_broadPhase,n=new p,s=new h(i,o);e.RayCast(function(s,a){var m=e.GetUserData(a);if((m=m instanceof V?m:null).RayCast(n,s)){var l=n.fraction,c=new r((1-l)*i.x+l*o.x,(1-l)*i.y+l*o.y);return t(m,c,n.normal,l)}return s.maxFraction},s)},L.prototype.RayCastOne=function(t,i){var o;return this.RayCast(function(t,i,e,n){return void 0===n&&(n=0),o=t,n},t,i),o},L.prototype.RayCastAll=function(t,i){var e=new o;return this.RayCast(function(t){return e[e.length]=t,1},t,i),e},L.prototype.GetBodyList=function(){return this.m_bodyList},L.prototype.GetJointList=function(){return this.m_jointList},L.prototype.GetContactList=function(){return this.m_contactList},L.prototype.IsLocked=function(){return(this.m_flags&L.e_locked)>0},L.prototype.Solve=function(t){for(var i,o=this.m_controllerList;o;o=o.m_next)o.Step(t);for((o=this.m_island).Initialize(this.m_bodyCount,this.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener,this.m_contactSolver),i=this.m_bodyList;i;i=i.m_next)i.m_flags&=~b.e_islandFlag;for(var e=this.m_contactList;e;e=e.m_next)e.m_flags&=~J.e_islandFlag;for(e=this.m_jointList;e;e=e.m_next)e.m_islandFlag=!1;parseInt(this.m_bodyCount),e=this.s_stack;for(var n=this.m_bodyList;n;n=n.m_next)if(!(n.m_flags&b.e_islandFlag)&&0!=n.IsAwake()&&0!=n.IsActive()&&n.GetType()!=b.b2_staticBody){o.Clear();var s=0;for(e[s++]=n,n.m_flags|=b.e_islandFlag;s>0;)if(i=e[--s],o.AddBody(i),0==i.IsAwake()&&i.SetAwake(!0),i.GetType()!=b.b2_staticBody){for(var r,a=i.m_contactList;a;a=a.next)a.contact.m_flags&J.e_islandFlag||1!=a.contact.IsSensor()&&0!=a.contact.IsEnabled()&&0!=a.contact.IsTouching()&&(o.AddContact(a.contact),a.contact.m_flags|=J.e_islandFlag,(r=a.other).m_flags&b.e_islandFlag||(e[s++]=r,r.m_flags|=b.e_islandFlag));for(i=i.m_jointList;i;i=i.next)1!=i.joint.m_islandFlag&&0!=(r=i.other).IsActive()&&(o.AddJoint(i.joint),i.joint.m_islandFlag=!0,r.m_flags&b.e_islandFlag||(e[s++]=r,r.m_flags|=b.e_islandFlag))}for(o.Solve(t,this.m_gravity,this.m_allowSleep),s=0;s<o.m_bodyCount;++s)(i=o.m_bodies[s]).GetType()==b.b2_staticBody&&(i.m_flags&=~b.e_islandFlag)}for(s=0;s<e.length&&e[s];++s)e[s]=null;for(i=this.m_bodyList;i;i=i.m_next)0==i.IsAwake()||0==i.IsActive()||i.GetType()!=b.b2_staticBody&&i.SynchronizeFixtures();this.m_contactManager.FindNewContacts()},L.prototype.SolveTOI=function(t){var i,o,e,n=this.m_island;n.Initialize(this.m_bodyCount,m.b2_maxTOIContactsPerIsland,m.b2_maxTOIJointsPerIsland,null,this.m_contactManager.m_contactListener,this.m_contactSolver);var s=L.s_queue;for(i=this.m_bodyList;i;i=i.m_next)i.m_flags&=~b.e_islandFlag,i.m_sweep.t0=0;for(e=this.m_contactList;e;e=e.m_next)e.m_flags&=~(J.e_toiFlag|J.e_islandFlag);for(e=this.m_jointList;e;e=e.m_next)e.m_islandFlag=!1;for(;;){var r=null,a=1;for(e=this.m_contactList;e;e=e.m_next)if(1!=e.IsSensor()&&0!=e.IsEnabled()&&0!=e.IsContinuous()){if(i=1,e.m_flags&J.e_toiFlag)i=e.m_toi;else{if(i=e.m_fixtureA,o=e.m_fixtureB,i=i.m_body,o=o.m_body,!(i.GetType()==b.b2_dynamicBody&&0!=i.IsAwake()||o.GetType()==b.b2_dynamicBody&&0!=o.IsAwake()))continue;var l=i.m_sweep.t0;i.m_sweep.t0<o.m_sweep.t0?(l=o.m_sweep.t0,i.m_sweep.Advance(l)):o.m_sweep.t0<i.m_sweep.t0&&(l=i.m_sweep.t0,o.m_sweep.Advance(l)),i=e.ComputeTOI(i.m_sweep,o.m_sweep),m.b2Assert(0<=i&&i<=1),i>0&&i<1&&(i=(1-i)*l+i)>1&&(i=1),e.m_toi=i,e.m_flags|=J.e_toiFlag}Number.MIN_VALUE<i&&i<a&&(r=e,a=i)}if(null==r||1-100*Number.MIN_VALUE<a)break;if(i=r.m_fixtureA,o=r.m_fixtureB,i=i.m_body,o=o.m_body,L.s_backupA.Set(i.m_sweep),L.s_backupB.Set(o.m_sweep),i.Advance(a),o.Advance(a),r.Update(this.m_contactManager.m_contactListener),r.m_flags&=~J.e_toiFlag,1==r.IsSensor()||0==r.IsEnabled())i.m_sweep.Set(L.s_backupA),o.m_sweep.Set(L.s_backupB),i.SynchronizeTransform(),o.SynchronizeTransform();else if(0!=r.IsTouching()){for((i=i).GetType()!=b.b2_dynamicBody&&(i=o),n.Clear(),r=e=0,s[e+r++]=i,i.m_flags|=b.e_islandFlag;r>0;)if(i=s[e++],--r,n.AddBody(i),0==i.IsAwake()&&i.SetAwake(!0),i.GetType()==b.b2_dynamicBody){for(o=i.m_contactList;o&&n.m_contactCount!=n.m_contactCapacity;o=o.next)o.contact.m_flags&J.e_islandFlag||1!=o.contact.IsSensor()&&0!=o.contact.IsEnabled()&&0!=o.contact.IsTouching()&&(n.AddContact(o.contact),o.contact.m_flags|=J.e_islandFlag,(l=o.other).m_flags&b.e_islandFlag||(l.GetType()!=b.b2_staticBody&&(l.Advance(a),l.SetAwake(!0)),s[e+r]=l,++r,l.m_flags|=b.e_islandFlag));for(i=i.m_jointList;i;i=i.next)n.m_jointCount!=n.m_jointCapacity&&1!=i.joint.m_islandFlag&&0!=(l=i.other).IsActive()&&(n.AddJoint(i.joint),i.joint.m_islandFlag=!0,l.m_flags&b.e_islandFlag||(l.GetType()!=b.b2_staticBody&&(l.Advance(a),l.SetAwake(!0)),s[e+r]=l,++r,l.m_flags|=b.e_islandFlag))}for((e=L.s_timestep).warmStarting=!1,e.dt=(1-a)*t.dt,e.inv_dt=1/e.dt,e.dtRatio=0,e.velocityIterations=t.velocityIterations,e.positionIterations=t.positionIterations,n.SolveTOI(e),a=a=0;a<n.m_bodyCount;++a)if((i=n.m_bodies[a]).m_flags&=~b.e_islandFlag,0!=i.IsAwake()&&i.GetType()==b.b2_dynamicBody)for(i.SynchronizeFixtures(),o=i.m_contactList;o;o=o.next)o.contact.m_flags&=~J.e_toiFlag;for(a=0;a<n.m_contactCount;++a)(e=n.m_contacts[a]).m_flags&=~(J.e_toiFlag|J.e_islandFlag);for(a=0;a<n.m_jointCount;++a)(e=n.m_joints[a]).m_islandFlag=!1;this.m_contactManager.FindNewContacts()}}},L.prototype.DrawJoint=function(t){var i=t.GetBodyA(),o=t.GetBodyB(),e=i.m_xf.position,n=o.m_xf.position,s=t.GetAnchorA(),r=t.GetAnchorB(),a=L.s_jointColor;switch(t.m_type){case R.e_distanceJoint:this.m_debugDraw.DrawSegment(s,r,a);break;case R.e_pulleyJoint:t=(i=t instanceof T?t:null).GetGroundAnchorA(),i=i.GetGroundAnchorB(),this.m_debugDraw.DrawSegment(t,s,a),this.m_debugDraw.DrawSegment(i,r,a),this.m_debugDraw.DrawSegment(t,i,a);break;case R.e_mouseJoint:this.m_debugDraw.DrawSegment(s,r,a);break;default:i!=this.m_groundBody&&this.m_debugDraw.DrawSegment(e,s,a),this.m_debugDraw.DrawSegment(s,r,a),o!=this.m_groundBody&&this.m_debugDraw.DrawSegment(n,r,a)}},L.prototype.DrawShape=function(t,e,n){switch(t.m_type){case d.e_circleShape:var s=t instanceof y?t:null;this.m_debugDraw.DrawSolidCircle(i.MulX(e,s.m_p),s.m_radius,e.R.col1,n);break;case d.e_polygonShape:s=0,s=t instanceof f?t:null,t=parseInt(s.GetVertexCount());var r=s.GetVertices(),a=new o(t);for(s=0;s<t;++s)a[s]=i.MulX(e,r[s]);this.m_debugDraw.DrawSolidPolygon(a,t,n);break;case d.e_edgeShape:s=t instanceof u?t:null,this.m_debugDraw.DrawSegment(i.MulX(e,s.GetVertex1()),i.MulX(e,s.GetVertex2()),n)}},t.postDefs.push(function(){t.Dynamics.b2World.s_timestep2=new G,t.Dynamics.b2World.s_xf=new s,t.Dynamics.b2World.s_backupA=new n,t.Dynamics.b2World.s_backupB=new n,t.Dynamics.b2World.s_timestep=new G,t.Dynamics.b2World.s_queue=new o,t.Dynamics.b2World.s_jointColor=new a(.5,.8,.8),t.Dynamics.b2World.e_newFixture=1,t.Dynamics.b2World.e_locked=2})}(),function(){var i=t.Collision.Shapes.b2CircleShape,n=t.Collision.Shapes.b2EdgeShape,s=t.Collision.Shapes.b2PolygonShape,r=t.Collision.Shapes.b2Shape,a=t.Dynamics.Contacts.b2CircleContact,m=t.Dynamics.Contacts.b2Contact,l=t.Dynamics.Contacts.b2ContactConstraint,c=t.Dynamics.Contacts.b2ContactConstraintPoint,_=t.Dynamics.Contacts.b2ContactEdge,h=t.Dynamics.Contacts.b2ContactFactory,p=t.Dynamics.Contacts.b2ContactRegister,y=t.Dynamics.Contacts.b2ContactResult,u=t.Dynamics.Contacts.b2ContactSolver,x=t.Dynamics.Contacts.b2EdgeAndCircleContact,f=t.Dynamics.Contacts.b2NullContact,d=t.Dynamics.Contacts.b2PolyAndCircleContact,b=t.Dynamics.Contacts.b2PolyAndEdgeContact,v=t.Dynamics.Contacts.b2PolygonContact,C=t.Dynamics.Contacts.b2PositionSolverManifold,A=t.Dynamics.b2Body,w=t.Dynamics.b2TimeStep,S=t.Common.b2Settings,g=t.Common.Math.b2Mat22,B=t.Common.Math.b2Math,M=t.Common.Math.b2Vec2,V=t.Collision.b2Collision,D=t.Collision.b2ContactID,I=t.Collision.b2Manifold,G=t.Collision.b2TimeOfImpact,L=t.Collision.b2TOIInput,J=t.Collision.b2WorldManifold;t.inherit(a,t.Dynamics.Contacts.b2Contact),a.prototype.__super=t.Dynamics.Contacts.b2Contact.prototype,a.b2CircleContact=function(){t.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},a.Create=function(){return new a},a.Destroy=function(){},a.prototype.Reset=function(t,i){this.__super.Reset.call(this,t,i)},a.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),o=this.m_fixtureB.GetBody();V.CollideCircles(this.m_manifold,this.m_fixtureA.GetShape()instanceof i?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof i?this.m_fixtureB.GetShape():null,o.m_xf)},m.b2Contact=function(){this.m_nodeA=new _,this.m_nodeB=new _,this.m_manifold=new I,this.m_oldManifold=new I},m.prototype.GetManifold=function(){return this.m_manifold},m.prototype.GetWorldManifold=function(t){var i=this.m_fixtureA.GetBody(),o=this.m_fixtureB.GetBody(),e=this.m_fixtureA.GetShape(),n=this.m_fixtureB.GetShape();t.Initialize(this.m_manifold,i.GetTransform(),e.m_radius,o.GetTransform(),n.m_radius)},m.prototype.IsTouching=function(){return(this.m_flags&m.e_touchingFlag)==m.e_touchingFlag},m.prototype.IsContinuous=function(){return(this.m_flags&m.e_continuousFlag)==m.e_continuousFlag},m.prototype.SetSensor=function(t){t?this.m_flags|=m.e_sensorFlag:this.m_flags&=~m.e_sensorFlag},m.prototype.IsSensor=function(){return(this.m_flags&m.e_sensorFlag)==m.e_sensorFlag},m.prototype.SetEnabled=function(t){t?this.m_flags|=m.e_enabledFlag:this.m_flags&=~m.e_enabledFlag},m.prototype.IsEnabled=function(){return(this.m_flags&m.e_enabledFlag)==m.e_enabledFlag},m.prototype.GetNext=function(){return this.m_next},m.prototype.GetFixtureA=function(){return this.m_fixtureA},m.prototype.GetFixtureB=function(){return this.m_fixtureB},m.prototype.FlagForFiltering=function(){this.m_flags|=m.e_filterFlag},m.prototype.b2Contact=function(){},m.prototype.Reset=function(t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),this.m_flags=m.e_enabledFlag,t&&i){(t.IsSensor()||i.IsSensor())&&(this.m_flags|=m.e_sensorFlag);var o=t.GetBody(),e=i.GetBody();(o.GetType()!=A.b2_dynamicBody||o.IsBullet()||e.GetType()!=A.b2_dynamicBody||e.IsBullet())&&(this.m_flags|=m.e_continuousFlag),this.m_fixtureA=t,this.m_fixtureB=i,this.m_manifold.m_pointCount=0,this.m_next=this.m_prev=null,this.m_nodeA.contact=null,this.m_nodeA.prev=null,this.m_nodeA.next=null,this.m_nodeA.other=null,this.m_nodeB.contact=null,this.m_nodeB.prev=null,this.m_nodeB.next=null,this.m_nodeB.other=null}else this.m_fixtureB=this.m_fixtureA=null},m.prototype.Update=function(t){var i=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=i,this.m_flags|=m.e_enabledFlag;var o=!1;i=(this.m_flags&m.e_touchingFlag)==m.e_touchingFlag;var e=this.m_fixtureA.m_body,n=this.m_fixtureB.m_body,s=this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb);if(this.m_flags&m.e_sensorFlag)s&&(o=this.m_fixtureA.GetShape(),s=this.m_fixtureB.GetShape(),e=e.GetTransform(),n=n.GetTransform(),o=r.TestOverlap(o,e,s,n)),this.m_manifold.m_pointCount=0;else{if(e.GetType()!=A.b2_dynamicBody||e.IsBullet()||n.GetType()!=A.b2_dynamicBody||n.IsBullet()?this.m_flags|=m.e_continuousFlag:this.m_flags&=~m.e_continuousFlag,s)for(this.Evaluate(),o=this.m_manifold.m_pointCount>0,s=0;s<this.m_manifold.m_pointCount;++s){var a=this.m_manifold.m_points[s];a.m_normalImpulse=0,a.m_tangentImpulse=0;for(var l=a.m_id,c=0;c<this.m_oldManifold.m_pointCount;++c){var _=this.m_oldManifold.m_points[c];if(_.m_id.key==l.key){a.m_normalImpulse=_.m_normalImpulse,a.m_tangentImpulse=_.m_tangentImpulse;break}}}else this.m_manifold.m_pointCount=0;o!=i&&(e.SetAwake(!0),n.SetAwake(!0))}o?this.m_flags|=m.e_touchingFlag:this.m_flags&=~m.e_touchingFlag,0==i&&1==o&&t.BeginContact(this),1==i&&0==o&&t.EndContact(this),0==(this.m_flags&m.e_sensorFlag)&&t.PreSolve(this,this.m_oldManifold)},m.prototype.Evaluate=function(){},m.prototype.ComputeTOI=function(t,i){return m.s_input.proxyA.Set(this.m_fixtureA.GetShape()),m.s_input.proxyB.Set(this.m_fixtureB.GetShape()),m.s_input.sweepA=t,m.s_input.sweepB=i,m.s_input.tolerance=S.b2_linearSlop,G.TimeOfImpact(m.s_input)},t.postDefs.push(function(){t.Dynamics.Contacts.b2Contact.e_sensorFlag=1,t.Dynamics.Contacts.b2Contact.e_continuousFlag=2,t.Dynamics.Contacts.b2Contact.e_islandFlag=4,t.Dynamics.Contacts.b2Contact.e_toiFlag=8,t.Dynamics.Contacts.b2Contact.e_touchingFlag=16,t.Dynamics.Contacts.b2Contact.e_enabledFlag=32,t.Dynamics.Contacts.b2Contact.e_filterFlag=64,t.Dynamics.Contacts.b2Contact.s_input=new L}),l.b2ContactConstraint=function(){this.localPlaneNormal=new M,this.localPoint=new M,this.normal=new M,this.normalMass=new g,this.K=new g},l.prototype.b2ContactConstraint=function(){this.points=new o(S.b2_maxManifoldPoints);for(var t=0;t<S.b2_maxManifoldPoints;t++)this.points[t]=new c},c.b2ContactConstraintPoint=function(){this.localPoint=new M,this.rA=new M,this.rB=new M},_.b2ContactEdge=function(){},h.b2ContactFactory=function(){},h.prototype.b2ContactFactory=function(t){this.m_allocator=t,this.InitializeRegisters()},h.prototype.AddType=function(t,i,o,e){void 0===o&&(o=0),void 0===e&&(e=0),this.m_registers[o][e].createFcn=t,this.m_registers[o][e].destroyFcn=i,this.m_registers[o][e].primary=!0,o!=e&&(this.m_registers[e][o].createFcn=t,this.m_registers[e][o].destroyFcn=i,this.m_registers[e][o].primary=!1)},h.prototype.InitializeRegisters=function(){this.m_registers=new o(r.e_shapeTypeCount);for(var t=0;t<r.e_shapeTypeCount;t++){this.m_registers[t]=new o(r.e_shapeTypeCount);for(var i=0;i<r.e_shapeTypeCount;i++)this.m_registers[t][i]=new p}this.AddType(a.Create,a.Destroy,r.e_circleShape,r.e_circleShape),this.AddType(d.Create,d.Destroy,r.e_polygonShape,r.e_circleShape),this.AddType(v.Create,v.Destroy,r.e_polygonShape,r.e_polygonShape),this.AddType(x.Create,x.Destroy,r.e_edgeShape,r.e_circleShape),this.AddType(b.Create,b.Destroy,r.e_polygonShape,r.e_edgeShape)},h.prototype.Create=function(t,i){var o=parseInt(t.GetType()),e=parseInt(i.GetType());return(o=this.m_registers[o][e]).pool?(e=o.pool,o.pool=e.m_next,o.poolCount--,e.Reset(t,i),e):null!=(e=o.createFcn)?(o.primary?(e=e(this.m_allocator)).Reset(t,i):(e=e(this.m_allocator)).Reset(i,t),e):null},h.prototype.Destroy=function(t){t.m_manifold.m_pointCount>0&&(t.m_fixtureA.m_body.SetAwake(!0),t.m_fixtureB.m_body.SetAwake(!0));var i=parseInt(t.m_fixtureA.GetType()),o=parseInt(t.m_fixtureB.GetType());(i=this.m_registers[i][o]).poolCount++,t.m_next=i.pool,i.pool=t,(i=i.destroyFcn)(t,this.m_allocator)},p.b2ContactRegister=function(){},y.b2ContactResult=function(){this.position=new M,this.normal=new M,this.id=new D},u.b2ContactSolver=function(){this.m_step=new w,this.m_constraints=new o},u.prototype.b2ContactSolver=function(){},u.prototype.Initialize=function(t,i,o,e){var n;for(void 0===o&&(o=0),this.m_step.Set(t),this.m_allocator=e,t=0,this.m_constraintCount=o;this.m_constraints.length<this.m_constraintCount;)this.m_constraints[this.m_constraints.length]=new l;for(t=0;t<o;++t){e=(n=i[t]).m_fixtureA;var s=n.m_fixtureB,r=e.m_shape.m_radius,a=s.m_shape.m_radius,m=e.m_body,c=s.m_body,_=n.GetManifold(),h=S.b2MixFriction(e.GetFriction(),s.GetFriction()),p=S.b2MixRestitution(e.GetRestitution(),s.GetRestitution()),y=m.m_linearVelocity.x,x=m.m_linearVelocity.y,f=c.m_linearVelocity.x,d=c.m_linearVelocity.y,b=m.m_angularVelocity,v=c.m_angularVelocity;for(S.b2Assert(_.m_pointCount>0),u.s_worldManifold.Initialize(_,m.m_xf,r,c.m_xf,a),s=u.s_worldManifold.m_normal.x,n=u.s_worldManifold.m_normal.y,(e=this.m_constraints[t]).bodyA=m,e.bodyB=c,e.manifold=_,e.normal.x=s,e.normal.y=n,e.pointCount=_.m_pointCount,e.friction=h,e.restitution=p,e.localPlaneNormal.x=_.m_localPlaneNormal.x,e.localPlaneNormal.y=_.m_localPlaneNormal.y,e.localPoint.x=_.m_localPoint.x,e.localPoint.y=_.m_localPoint.y,e.radius=r+a,e.type=_.m_type,r=0;r<e.pointCount;++r){h=_.m_points[r],(a=e.points[r]).normalImpulse=h.m_normalImpulse,a.tangentImpulse=h.m_tangentImpulse,a.localPoint.SetV(h.m_localPoint),h=a.rA.x=u.s_worldManifold.m_points[r].x-m.m_sweep.c.x,p=a.rA.y=u.s_worldManifold.m_points[r].y-m.m_sweep.c.y;var C=a.rB.x=u.s_worldManifold.m_points[r].x-c.m_sweep.c.x,A=a.rB.y=u.s_worldManifold.m_points[r].y-c.m_sweep.c.y,w=h*n-p*s,g=C*n-A*s;w*=w,g*=g,a.normalMass=1/(m.m_invMass+c.m_invMass+m.m_invI*w+c.m_invI*g);var B=m.m_mass*m.m_invMass+c.m_mass*c.m_invMass;B+=m.m_mass*m.m_invI*w+c.m_mass*c.m_invI*g,a.equalizedMass=1/B,w=h*(B=-s)-p*(g=n),g=C*B-A*g,w*=w,g*=g,a.tangentMass=1/(m.m_invMass+c.m_invMass+m.m_invI*w+c.m_invI*g),a.velocityBias=0,(h=e.normal.x*(f+-v*A-y- -b*p)+e.normal.y*(d+v*C-x-b*h))<-S.b2_velocityThreshold&&(a.velocityBias+=-e.restitution*h)}2==e.pointCount&&(d=e.points[0],f=e.points[1],_=m.m_invMass,m=m.m_invI,y=c.m_invMass,c=c.m_invI,x=d.rA.x*n-d.rA.y*s,d=d.rB.x*n-d.rB.y*s,b=f.rA.x*n-f.rA.y*s,f=f.rB.x*n-f.rB.y*s,(s=_+y+m*x*x+c*d*d)*s<100*(s*(n=_+y+m*b*b+c*f*f)-(c=_+y+m*x*b+c*d*f)*c)?(e.K.col1.Set(s,c),e.K.col2.Set(c,n),e.K.GetInverse(e.normalMass)):e.pointCount=1)}},u.prototype.InitVelocityConstraints=function(t){for(var i=0;i<this.m_constraintCount;++i){var o=this.m_constraints[i],e=o.bodyA,n=o.bodyB,s=e.m_invMass,r=e.m_invI,a=n.m_invMass,m=n.m_invI,l=o.normal.x,c=o.normal.y,_=c,h=-l,p=0,y=0;if(t.warmStarting)for(y=o.pointCount,p=0;p<y;++p){var u=o.points[p];u.normalImpulse*=t.dtRatio,u.tangentImpulse*=t.dtRatio;var x=u.normalImpulse*l+u.tangentImpulse*_,f=u.normalImpulse*c+u.tangentImpulse*h;e.m_angularVelocity-=r*(u.rA.x*f-u.rA.y*x),e.m_linearVelocity.x-=s*x,e.m_linearVelocity.y-=s*f,n.m_angularVelocity+=m*(u.rB.x*f-u.rB.y*x),n.m_linearVelocity.x+=a*x,n.m_linearVelocity.y+=a*f}else for(y=o.pointCount,p=0;p<y;++p)(e=o.points[p]).normalImpulse=0,e.tangentImpulse=0}},u.prototype.SolveVelocityConstraints=function(){for(var t,i,o=0,e=0,n=0,s=0,r=n=n=e=e=0,a=e=e=0,m=e=s=0,l=0,c=0;c<this.m_constraintCount;++c){var _=(s=this.m_constraints[c]).bodyA,h=s.bodyB,p=_.m_angularVelocity,y=h.m_angularVelocity,u=_.m_linearVelocity,x=h.m_linearVelocity,f=_.m_invMass,d=_.m_invI,b=h.m_invMass,v=h.m_invI;m=s.normal.x;var C=l=s.normal.y;for(i=-m,a=s.friction,o=0;o<s.pointCount;o++)t=s.points[o],e=(e=x.x-y*t.rB.y-u.x+p*t.rA.y)*C+(n=x.y+y*t.rB.x-u.y-p*t.rA.x)*i,e=t.tangentMass*-e,n=a*t.normalImpulse,r=(e=(n=B.Clamp(t.tangentImpulse+e,-n,n))-t.tangentImpulse)*C,e*=i,u.x-=f*r,u.y-=f*e,p-=d*(t.rA.x*e-t.rA.y*r),x.x+=b*r,x.y+=b*e,y+=v*(t.rB.x*e-t.rB.y*r),t.tangentImpulse=n;if(parseInt(s.pointCount),1==s.pointCount)t=s.points[0],s=(e=x.x+-y*t.rB.y-u.x- -p*t.rA.y)*m+(n=x.y+y*t.rB.x-u.y-p*t.rA.x)*l,e=-t.normalMass*(s-t.velocityBias),r=(e=(n=(n=t.normalImpulse+e)>0?n:0)-t.normalImpulse)*m,e*=l,u.x-=f*r,u.y-=f*e,p-=d*(t.rA.x*e-t.rA.y*r),x.x+=b*r,x.y+=b*e,y+=v*(t.rB.x*e-t.rB.y*r),t.normalImpulse=n;else{t=s.points[0],o=s.points[1],e=t.normalImpulse,a=o.normalImpulse;var A=(x.x-y*t.rB.y-u.x+p*t.rA.y)*m+(x.y+y*t.rB.x-u.y-p*t.rA.x)*l,w=(x.x-y*o.rB.y-u.x+p*o.rA.y)*m+(x.y+y*o.rB.x-u.y-p*o.rA.x)*l;for(n=A-t.velocityBias,r=w-o.velocityBias,n-=(i=s.K).col1.x*e+i.col2.x*a,r-=i.col1.y*e+i.col2.y*a;;){if(C=-((i=s.normalMass).col1.x*n+i.col2.x*r),i=-(i.col1.y*n+i.col2.y*r),C>=0&&i>=0){s=(e=C-e)*m,e*=l,m*=a=i-a,l*=a,u.x-=f*(s+m),u.y-=f*(e+l),p-=d*(t.rA.x*e-t.rA.y*s+o.rA.x*l-o.rA.y*m),x.x+=b*(s+m),x.y+=b*(e+l),y+=v*(t.rB.x*e-t.rB.y*s+o.rB.x*l-o.rB.y*m),t.normalImpulse=C,o.normalImpulse=i;break}if(C=-t.normalMass*n,i=0,w=s.K.col1.y*C+r,C>=0&&w>=0){s=(e=C-e)*m,e*=l,m*=a=i-a,l*=a,u.x-=f*(s+m),u.y-=f*(e+l),p-=d*(t.rA.x*e-t.rA.y*s+o.rA.x*l-o.rA.y*m),x.x+=b*(s+m),x.y+=b*(e+l),y+=v*(t.rB.x*e-t.rB.y*s+o.rB.x*l-o.rB.y*m),t.normalImpulse=C,o.normalImpulse=i;break}if(C=0,i=-o.normalMass*r,A=s.K.col2.x*i+n,i>=0&&A>=0){s=(e=C-e)*m,e*=l,m*=a=i-a,l*=a,u.x-=f*(s+m),u.y-=f*(e+l),p-=d*(t.rA.x*e-t.rA.y*s+o.rA.x*l-o.rA.y*m),x.x+=b*(s+m),x.y+=b*(e+l),y+=v*(t.rB.x*e-t.rB.y*s+o.rB.x*l-o.rB.y*m),t.normalImpulse=C,o.normalImpulse=i;break}if(i=C=0,w=r,(A=n)>=0&&w>=0){s=(e=C-e)*m,e*=l,m*=a=i-a,l*=a,u.x-=f*(s+m),u.y-=f*(e+l),p-=d*(t.rA.x*e-t.rA.y*s+o.rA.x*l-o.rA.y*m),x.x+=b*(s+m),x.y+=b*(e+l),y+=v*(t.rB.x*e-t.rB.y*s+o.rB.x*l-o.rB.y*m),t.normalImpulse=C,o.normalImpulse=i;break}break}}_.m_angularVelocity=p,h.m_angularVelocity=y}},u.prototype.FinalizeVelocityConstraints=function(){for(var t=0;t<this.m_constraintCount;++t)for(var i=this.m_constraints[t],o=i.manifold,e=0;e<i.pointCount;++e){var n=o.m_points[e],s=i.points[e];n.m_normalImpulse=s.normalImpulse,n.m_tangentImpulse=s.tangentImpulse}},u.prototype.SolvePositionConstraints=function(t){void 0===t&&(t=0);for(var i=0,o=0;o<this.m_constraintCount;o++){var e=this.m_constraints[o],n=e.bodyA,s=e.bodyB,r=n.m_mass*n.m_invMass,a=n.m_mass*n.m_invI,m=s.m_mass*s.m_invMass,l=s.m_mass*s.m_invI;u.s_psm.Initialize(e);for(var c=u.s_psm.m_normal,_=0;_<e.pointCount;_++){var h=e.points[_],p=u.s_psm.m_points[_],y=u.s_psm.m_separations[_],x=p.x-n.m_sweep.c.x,f=p.y-n.m_sweep.c.y,d=p.x-s.m_sweep.c.x;p=p.y-s.m_sweep.c.y,i=i<y?i:y,y=B.Clamp(t*(y+S.b2_linearSlop),-S.b2_maxLinearCorrection,0),h=(y=-h.equalizedMass*y)*c.x,y*=c.y,n.m_sweep.c.x-=r*h,n.m_sweep.c.y-=r*y,n.m_sweep.a-=a*(x*y-f*h),n.SynchronizeTransform(),s.m_sweep.c.x+=m*h,s.m_sweep.c.y+=m*y,s.m_sweep.a+=l*(d*y-p*h),s.SynchronizeTransform()}}return i>-1.5*S.b2_linearSlop},t.postDefs.push(function(){t.Dynamics.Contacts.b2ContactSolver.s_worldManifold=new J,t.Dynamics.Contacts.b2ContactSolver.s_psm=new C}),t.inherit(x,t.Dynamics.Contacts.b2Contact),x.prototype.__super=t.Dynamics.Contacts.b2Contact.prototype,x.b2EdgeAndCircleContact=function(){t.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},x.Create=function(){return new x},x.Destroy=function(){},x.prototype.Reset=function(t,i){this.__super.Reset.call(this,t,i)},x.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),o=this.m_fixtureB.GetBody();this.b2CollideEdgeAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof n?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof i?this.m_fixtureB.GetShape():null,o.m_xf)},x.prototype.b2CollideEdgeAndCircle=function(){},t.inherit(f,t.Dynamics.Contacts.b2Contact),f.prototype.__super=t.Dynamics.Contacts.b2Contact.prototype,f.b2NullContact=function(){t.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},f.prototype.b2NullContact=function(){this.__super.b2Contact.call(this)},f.prototype.Evaluate=function(){},t.inherit(d,t.Dynamics.Contacts.b2Contact),d.prototype.__super=t.Dynamics.Contacts.b2Contact.prototype,d.b2PolyAndCircleContact=function(){t.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},d.Create=function(){return new d},d.Destroy=function(){},d.prototype.Reset=function(t,i){this.__super.Reset.call(this,t,i),S.b2Assert(t.GetType()==r.e_polygonShape),S.b2Assert(i.GetType()==r.e_circleShape)},d.prototype.Evaluate=function(){var t=this.m_fixtureA.m_body,o=this.m_fixtureB.m_body;V.CollidePolygonAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof s?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof i?this.m_fixtureB.GetShape():null,o.m_xf)},t.inherit(b,t.Dynamics.Contacts.b2Contact),b.prototype.__super=t.Dynamics.Contacts.b2Contact.prototype,b.b2PolyAndEdgeContact=function(){t.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},b.Create=function(){return new b},b.Destroy=function(){},b.prototype.Reset=function(t,i){this.__super.Reset.call(this,t,i),S.b2Assert(t.GetType()==r.e_polygonShape),S.b2Assert(i.GetType()==r.e_edgeShape)},b.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody();this.b2CollidePolyAndEdge(this.m_manifold,this.m_fixtureA.GetShape()instanceof s?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof n?this.m_fixtureB.GetShape():null,i.m_xf)},b.prototype.b2CollidePolyAndEdge=function(){},t.inherit(v,t.Dynamics.Contacts.b2Contact),v.prototype.__super=t.Dynamics.Contacts.b2Contact.prototype,v.b2PolygonContact=function(){t.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},v.Create=function(){return new v},v.Destroy=function(){},v.prototype.Reset=function(t,i){this.__super.Reset.call(this,t,i)},v.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody();V.CollidePolygons(this.m_manifold,this.m_fixtureA.GetShape()instanceof s?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof s?this.m_fixtureB.GetShape():null,i.m_xf)},C.b2PositionSolverManifold=function(){},C.prototype.b2PositionSolverManifold=function(){this.m_normal=new M,this.m_separations=new e(S.b2_maxManifoldPoints),this.m_points=new o(S.b2_maxManifoldPoints);for(var t=0;t<S.b2_maxManifoldPoints;t++)this.m_points[t]=new M},C.prototype.Initialize=function(t){S.b2Assert(t.pointCount>0);var i,o=0,e=0,n=0,s=0,r=0;switch(t.type){case I.e_circles:i=t.bodyA.m_xf.R,n=t.localPoint,o=t.bodyA.m_xf.position.x+(i.col1.x*n.x+i.col2.x*n.y),e=t.bodyA.m_xf.position.y+(i.col1.y*n.x+i.col2.y*n.y),i=t.bodyB.m_xf.R,n=t.points[0].localPoint,s=t.bodyB.m_xf.position.x+(i.col1.x*n.x+i.col2.x*n.y),i=t.bodyB.m_xf.position.y+(i.col1.y*n.x+i.col2.y*n.y);var a=(n=s-o)*n+(r=i-e)*r;a>Number.MIN_VALUE*Number.MIN_VALUE?(a=Math.sqrt(a),this.m_normal.x=n/a,this.m_normal.y=r/a):(this.m_normal.x=1,this.m_normal.y=0),this.m_points[0].x=.5*(o+s),this.m_points[0].y=.5*(e+i),this.m_separations[0]=n*this.m_normal.x+r*this.m_normal.y-t.radius;break;case I.e_faceA:for(i=t.bodyA.m_xf.R,n=t.localPlaneNormal,this.m_normal.x=i.col1.x*n.x+i.col2.x*n.y,this.m_normal.y=i.col1.y*n.x+i.col2.y*n.y,i=t.bodyA.m_xf.R,n=t.localPoint,s=t.bodyA.m_xf.position.x+(i.col1.x*n.x+i.col2.x*n.y),r=t.bodyA.m_xf.position.y+(i.col1.y*n.x+i.col2.y*n.y),i=t.bodyB.m_xf.R,o=0;o<t.pointCount;++o)n=t.points[o].localPoint,e=t.bodyB.m_xf.position.x+(i.col1.x*n.x+i.col2.x*n.y),n=t.bodyB.m_xf.position.y+(i.col1.y*n.x+i.col2.y*n.y),this.m_separations[o]=(e-s)*this.m_normal.x+(n-r)*this.m_normal.y-t.radius,this.m_points[o].x=e,this.m_points[o].y=n;break;case I.e_faceB:for(i=t.bodyB.m_xf.R,n=t.localPlaneNormal,this.m_normal.x=i.col1.x*n.x+i.col2.x*n.y,this.m_normal.y=i.col1.y*n.x+i.col2.y*n.y,i=t.bodyB.m_xf.R,n=t.localPoint,s=t.bodyB.m_xf.position.x+(i.col1.x*n.x+i.col2.x*n.y),r=t.bodyB.m_xf.position.y+(i.col1.y*n.x+i.col2.y*n.y),i=t.bodyA.m_xf.R,o=0;o<t.pointCount;++o)n=t.points[o].localPoint,e=t.bodyA.m_xf.position.x+(i.col1.x*n.x+i.col2.x*n.y),n=t.bodyA.m_xf.position.y+(i.col1.y*n.x+i.col2.y*n.y),this.m_separations[o]=(e-s)*this.m_normal.x+(n-r)*this.m_normal.y-t.radius,this.m_points[o].Set(e,n);this.m_normal.x*=-1,this.m_normal.y*=-1}},t.postDefs.push(function(){t.Dynamics.Contacts.b2PositionSolverManifold.circlePointA=new M,t.Dynamics.Contacts.b2PositionSolverManifold.circlePointB=new M})}(),function(){var i=t.Common.Math.b2Mat22,o=t.Common.Math.b2Math,e=t.Common.Math.b2Vec2,n=t.Common.b2Color,s=t.Dynamics.Controllers.b2BuoyancyController,r=t.Dynamics.Controllers.b2ConstantAccelController,a=t.Dynamics.Controllers.b2ConstantForceController,m=t.Dynamics.Controllers.b2Controller,l=t.Dynamics.Controllers.b2ControllerEdge,c=t.Dynamics.Controllers.b2GravityController,_=t.Dynamics.Controllers.b2TensorDampingController;t.inherit(s,t.Dynamics.Controllers.b2Controller),s.prototype.__super=t.Dynamics.Controllers.b2Controller.prototype,s.b2BuoyancyController=function(){t.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.normal=new e(0,-1),this.density=this.offset=0,this.velocity=new e(0,0),this.linearDrag=2,this.angularDrag=1,this.useDensity=!1,this.useWorldGravity=!0,this.gravity=null},s.prototype.Step=function(){if(this.m_bodyList){this.useWorldGravity&&(this.gravity=this.GetWorld().GetGravity().Copy());for(var t=this.m_bodyList;t;t=t.nextBody){var i=t.body;if(0!=i.IsAwake()){for(var o=new e,n=new e,s=0,r=0,a=i.GetFixtureList();a;a=a.GetNext()){var m=new e,l=a.GetShape().ComputeSubmergedArea(this.normal,this.offset,i.GetTransform(),m);s+=l,o.x+=l*m.x,o.y+=l*m.y;1,r+=1*l,n.x+=l*m.x*1,n.y+=l*m.y*1}o.x/=s,o.y/=s,n.x/=r,n.y/=r,s<Number.MIN_VALUE||((r=this.gravity.GetNegative()).Multiply(this.density*s),i.ApplyForce(r,n),(n=i.GetLinearVelocityFromWorldPoint(o)).Subtract(this.velocity),n.Multiply(-this.linearDrag*s),i.ApplyForce(n,o),i.ApplyTorque(-i.GetInertia()/i.GetMass()*s*i.GetAngularVelocity()*this.angularDrag))}}}},s.prototype.Draw=function(t){var i=new e,o=new e;i.x=this.normal.x*this.offset+1e3*this.normal.y,i.y=this.normal.y*this.offset-1e3*this.normal.x,o.x=this.normal.x*this.offset-1e3*this.normal.y,o.y=this.normal.y*this.offset+1e3*this.normal.x;var s=new n(0,0,1);t.DrawSegment(i,o,s)},t.inherit(r,t.Dynamics.Controllers.b2Controller),r.prototype.__super=t.Dynamics.Controllers.b2Controller.prototype,r.b2ConstantAccelController=function(){t.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.A=new e(0,0)},r.prototype.Step=function(t){t=new e(this.A.x*t.dt,this.A.y*t.dt);for(var i=this.m_bodyList;i;i=i.nextBody){var o=i.body;o.IsAwake()&&o.SetLinearVelocity(new e(o.GetLinearVelocity().x+t.x,o.GetLinearVelocity().y+t.y))}},t.inherit(a,t.Dynamics.Controllers.b2Controller),a.prototype.__super=t.Dynamics.Controllers.b2Controller.prototype,a.b2ConstantForceController=function(){t.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.F=new e(0,0)},a.prototype.Step=function(){for(var t=this.m_bodyList;t;t=t.nextBody){var i=t.body;i.IsAwake()&&i.ApplyForce(this.F,i.GetWorldCenter())}},m.b2Controller=function(){},m.prototype.Step=function(){},m.prototype.Draw=function(){},m.prototype.AddBody=function(t){var i=new l;i.controller=this,i.body=t,i.nextBody=this.m_bodyList,i.prevBody=null,this.m_bodyList=i,i.nextBody&&(i.nextBody.prevBody=i),this.m_bodyCount++,i.nextController=t.m_controllerList,i.prevController=null,t.m_controllerList=i,i.nextController&&(i.nextController.prevController=i),t.m_controllerCount++},m.prototype.RemoveBody=function(t){for(var i=t.m_controllerList;i&&i.controller!=this;)i=i.nextController;i.prevBody&&(i.prevBody.nextBody=i.nextBody),i.nextBody&&(i.nextBody.prevBody=i.prevBody),i.nextController&&(i.nextController.prevController=i.prevController),i.prevController&&(i.prevController.nextController=i.nextController),this.m_bodyList==i&&(this.m_bodyList=i.nextBody),t.m_controllerList==i&&(t.m_controllerList=i.nextController),t.m_controllerCount--,this.m_bodyCount--},m.prototype.Clear=function(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body)},m.prototype.GetNext=function(){return this.m_next},m.prototype.GetWorld=function(){return this.m_world},m.prototype.GetBodyList=function(){return this.m_bodyList},l.b2ControllerEdge=function(){},t.inherit(c,t.Dynamics.Controllers.b2Controller),c.prototype.__super=t.Dynamics.Controllers.b2Controller.prototype,c.b2GravityController=function(){t.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.G=1,this.invSqr=!0},c.prototype.Step=function(){var t=null,i=null,o=null,n=0,s=null,r=null,a=null,m=0,l=0,c=0;if(m=null,this.invSqr)for(t=this.m_bodyList;t;t=t.nextBody)for(o=(i=t.body).GetWorldCenter(),n=i.GetMass(),s=this.m_bodyList;s!=t;s=s.nextBody)(c=(m=(a=(r=s.body).GetWorldCenter()).x-o.x)*m+(l=a.y-o.y)*l)<Number.MIN_VALUE||((m=new e(m,l)).Multiply(this.G/c/Math.sqrt(c)*n*r.GetMass()),i.IsAwake()&&i.ApplyForce(m,o),m.Multiply(-1),r.IsAwake()&&r.ApplyForce(m,a));else for(t=this.m_bodyList;t;t=t.nextBody)for(o=(i=t.body).GetWorldCenter(),n=i.GetMass(),s=this.m_bodyList;s!=t;s=s.nextBody)(c=(m=(a=(r=s.body).GetWorldCenter()).x-o.x)*m+(l=a.y-o.y)*l)<Number.MIN_VALUE||((m=new e(m,l)).Multiply(this.G/c*n*r.GetMass()),i.IsAwake()&&i.ApplyForce(m,o),m.Multiply(-1),r.IsAwake()&&r.ApplyForce(m,a))},t.inherit(_,t.Dynamics.Controllers.b2Controller),_.prototype.__super=t.Dynamics.Controllers.b2Controller.prototype,_.b2TensorDampingController=function(){t.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.T=new i,this.maxTimestep=0},_.prototype.SetAxisAligned=function(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.T.col1.x=-t,this.T.col1.y=0,this.T.col2.x=0,this.T.col2.y=-i,this.maxTimestep=t>0||i>0?1/Math.max(t,i):0},_.prototype.Step=function(t){if(!((t=t.dt)<=Number.MIN_VALUE)){t>this.maxTimestep&&this.maxTimestep>0&&(t=this.maxTimestep);for(var i=this.m_bodyList;i;i=i.nextBody){var n=i.body;if(n.IsAwake()){var s=n.GetWorldVector(o.MulMV(this.T,n.GetLocalVector(n.GetLinearVelocity())));n.SetLinearVelocity(new e(n.GetLinearVelocity().x+s.x*t,n.GetLinearVelocity().y+s.y*t))}}}}}(),function(){var i=t.Common.b2Settings,o=t.Common.Math.b2Mat22,e=t.Common.Math.b2Mat33,n=t.Common.Math.b2Math,s=t.Common.Math.b2Vec2,r=t.Common.Math.b2Vec3,a=t.Dynamics.Joints.b2DistanceJoint,m=t.Dynamics.Joints.b2DistanceJointDef,l=t.Dynamics.Joints.b2FrictionJoint,c=t.Dynamics.Joints.b2FrictionJointDef,_=t.Dynamics.Joints.b2GearJoint,h=t.Dynamics.Joints.b2GearJointDef,p=t.Dynamics.Joints.b2Jacobian,y=t.Dynamics.Joints.b2Joint,u=t.Dynamics.Joints.b2JointDef,x=t.Dynamics.Joints.b2JointEdge,f=t.Dynamics.Joints.b2LineJoint,d=t.Dynamics.Joints.b2LineJointDef,b=t.Dynamics.Joints.b2MouseJoint,v=t.Dynamics.Joints.b2MouseJointDef,C=t.Dynamics.Joints.b2PrismaticJoint,A=t.Dynamics.Joints.b2PrismaticJointDef,w=t.Dynamics.Joints.b2PulleyJoint,S=t.Dynamics.Joints.b2PulleyJointDef,g=t.Dynamics.Joints.b2RevoluteJoint,B=t.Dynamics.Joints.b2RevoluteJointDef,M=t.Dynamics.Joints.b2WeldJoint,V=t.Dynamics.Joints.b2WeldJointDef;t.inherit(a,t.Dynamics.Joints.b2Joint),a.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,a.b2DistanceJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new s,this.m_localAnchor2=new s,this.m_u=new s},a.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},a.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},a.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*this.m_impulse*this.m_u.x,t*this.m_impulse*this.m_u.y)},a.prototype.GetReactionTorque=function(){return 0},a.prototype.GetLength=function(){return this.m_length},a.prototype.SetLength=function(t){void 0===t&&(t=0),this.m_length=t},a.prototype.GetFrequency=function(){return this.m_frequencyHz},a.prototype.SetFrequency=function(t){void 0===t&&(t=0),this.m_frequencyHz=t},a.prototype.GetDampingRatio=function(){return this.m_dampingRatio},a.prototype.SetDampingRatio=function(t){void 0===t&&(t=0),this.m_dampingRatio=t},a.prototype.b2DistanceJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_length=t.length,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_bias=this.m_gamma=this.m_impulse=0},a.prototype.InitVelocityConstraints=function(t){var o,e=0,n=this.m_bodyA,s=this.m_bodyB;o=n.m_xf.R;var r=this.m_localAnchor1.x-n.m_sweep.localCenter.x,a=this.m_localAnchor1.y-n.m_sweep.localCenter.y;e=o.col1.x*r+o.col2.x*a,a=o.col1.y*r+o.col2.y*a,r=e,o=s.m_xf.R;var m=this.m_localAnchor2.x-s.m_sweep.localCenter.x,l=this.m_localAnchor2.y-s.m_sweep.localCenter.y;e=o.col1.x*m+o.col2.x*l,l=o.col1.y*m+o.col2.y*l,m=e,this.m_u.x=s.m_sweep.c.x+m-n.m_sweep.c.x-r,this.m_u.y=s.m_sweep.c.y+l-n.m_sweep.c.y-a,(e=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y))>i.b2_linearSlop?this.m_u.Multiply(1/e):this.m_u.SetZero(),o=r*this.m_u.y-a*this.m_u.x;var c=m*this.m_u.y-l*this.m_u.x;if(o=n.m_invMass+n.m_invI*o*o+s.m_invMass+s.m_invI*c*c,this.m_mass=0!=o?1/o:0,this.m_frequencyHz>0){e-=this.m_length,c=2*Math.PI*this.m_frequencyHz;var _=this.m_mass*c*c;this.m_gamma=t.dt*(2*this.m_mass*this.m_dampingRatio*c+t.dt*_),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=e*t.dt*_*this.m_gamma,this.m_mass=o+this.m_gamma,this.m_mass=0!=this.m_mass?1/this.m_mass:0}t.warmStarting?(this.m_impulse*=t.dtRatio,t=this.m_impulse*this.m_u.x,o=this.m_impulse*this.m_u.y,n.m_linearVelocity.x-=n.m_invMass*t,n.m_linearVelocity.y-=n.m_invMass*o,n.m_angularVelocity-=n.m_invI*(r*o-a*t),s.m_linearVelocity.x+=s.m_invMass*t,s.m_linearVelocity.y+=s.m_invMass*o,s.m_angularVelocity+=s.m_invI*(m*o-l*t)):this.m_impulse=0},a.prototype.SolveVelocityConstraints=function(){var t,i=this.m_bodyA,o=this.m_bodyB;t=i.m_xf.R;var e=this.m_localAnchor1.x-i.m_sweep.localCenter.x,n=this.m_localAnchor1.y-i.m_sweep.localCenter.y,s=t.col1.x*e+t.col2.x*n;n=t.col1.y*e+t.col2.y*n,e=s,t=o.m_xf.R;var r=this.m_localAnchor2.x-o.m_sweep.localCenter.x,a=this.m_localAnchor2.y-o.m_sweep.localCenter.y;s=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=s,s=-this.m_mass*(this.m_u.x*(o.m_linearVelocity.x+-o.m_angularVelocity*a-(i.m_linearVelocity.x+-i.m_angularVelocity*n))+this.m_u.y*(o.m_linearVelocity.y+o.m_angularVelocity*r-(i.m_linearVelocity.y+i.m_angularVelocity*e))+this.m_bias+this.m_gamma*this.m_impulse),this.m_impulse+=s,t=s*this.m_u.x,s*=this.m_u.y,i.m_linearVelocity.x-=i.m_invMass*t,i.m_linearVelocity.y-=i.m_invMass*s,i.m_angularVelocity-=i.m_invI*(e*s-n*t),o.m_linearVelocity.x+=o.m_invMass*t,o.m_linearVelocity.y+=o.m_invMass*s,o.m_angularVelocity+=o.m_invI*(r*s-a*t)},a.prototype.SolvePositionConstraints=function(){var t;if(this.m_frequencyHz>0)return!0;var o=this.m_bodyA,e=this.m_bodyB;t=o.m_xf.R;var s=this.m_localAnchor1.x-o.m_sweep.localCenter.x,r=this.m_localAnchor1.y-o.m_sweep.localCenter.y,a=t.col1.x*s+t.col2.x*r;r=t.col1.y*s+t.col2.y*r,s=a,t=e.m_xf.R;var m=this.m_localAnchor2.x-e.m_sweep.localCenter.x,l=this.m_localAnchor2.y-e.m_sweep.localCenter.y;a=t.col1.x*m+t.col2.x*l,l=t.col1.y*m+t.col2.y*l,m=a,a=e.m_sweep.c.x+m-o.m_sweep.c.x-s;var c=e.m_sweep.c.y+l-o.m_sweep.c.y-r;a/=t=Math.sqrt(a*a+c*c),c/=t,t-=this.m_length,t=n.Clamp(t,-i.b2_maxLinearCorrection,i.b2_maxLinearCorrection);var _=-this.m_mass*t;return this.m_u.Set(a,c),a=_*this.m_u.x,c=_*this.m_u.y,o.m_sweep.c.x-=o.m_invMass*a,o.m_sweep.c.y-=o.m_invMass*c,o.m_sweep.a-=o.m_invI*(s*c-r*a),e.m_sweep.c.x+=e.m_invMass*a,e.m_sweep.c.y+=e.m_invMass*c,e.m_sweep.a+=e.m_invI*(m*c-l*a),o.SynchronizeTransform(),e.SynchronizeTransform(),n.Abs(t)<i.b2_linearSlop},t.inherit(m,t.Dynamics.Joints.b2JointDef),m.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,m.b2DistanceJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new s,this.localAnchorB=new s},m.prototype.b2DistanceJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_distanceJoint,this.length=1,this.dampingRatio=this.frequencyHz=0},m.prototype.Initialize=function(t,i,o,e){this.bodyA=t,this.bodyB=i,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(o)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(e)),t=e.x-o.x,o=e.y-o.y,this.length=Math.sqrt(t*t+o*o),this.dampingRatio=this.frequencyHz=0},t.inherit(l,t.Dynamics.Joints.b2Joint),l.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,l.b2FrictionJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new s,this.m_localAnchorB=new s,this.m_linearMass=new o,this.m_linearImpulse=new s},l.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},l.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},l.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*this.m_linearImpulse.x,t*this.m_linearImpulse.y)},l.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_angularImpulse},l.prototype.SetMaxForce=function(t){void 0===t&&(t=0),this.m_maxForce=t},l.prototype.GetMaxForce=function(){return this.m_maxForce},l.prototype.SetMaxTorque=function(t){void 0===t&&(t=0),this.m_maxTorque=t},l.prototype.GetMaxTorque=function(){return this.m_maxTorque},l.prototype.b2FrictionJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchorA.SetV(t.localAnchorA),this.m_localAnchorB.SetV(t.localAnchorB),this.m_linearMass.SetZero(),this.m_angularMass=0,this.m_linearImpulse.SetZero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque},l.prototype.InitVelocityConstraints=function(t){var i,e=0,n=this.m_bodyA,s=this.m_bodyB;i=n.m_xf.R;var r=this.m_localAnchorA.x-n.m_sweep.localCenter.x,a=this.m_localAnchorA.y-n.m_sweep.localCenter.y;e=i.col1.x*r+i.col2.x*a,a=i.col1.y*r+i.col2.y*a,r=e,i=s.m_xf.R;var m=this.m_localAnchorB.x-s.m_sweep.localCenter.x,l=this.m_localAnchorB.y-s.m_sweep.localCenter.y;e=i.col1.x*m+i.col2.x*l,l=i.col1.y*m+i.col2.y*l,m=e,i=n.m_invMass,e=s.m_invMass;var c=n.m_invI,_=s.m_invI,h=new o;h.col1.x=i+e,h.col2.x=0,h.col1.y=0,h.col2.y=i+e,h.col1.x+=c*a*a,h.col2.x+=-c*r*a,h.col1.y+=-c*r*a,h.col2.y+=c*r*r,h.col1.x+=_*l*l,h.col2.x+=-_*m*l,h.col1.y+=-_*m*l,h.col2.y+=_*m*m,h.GetInverse(this.m_linearMass),this.m_angularMass=c+_,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting?(this.m_linearImpulse.x*=t.dtRatio,this.m_linearImpulse.y*=t.dtRatio,this.m_angularImpulse*=t.dtRatio,t=this.m_linearImpulse,n.m_linearVelocity.x-=i*t.x,n.m_linearVelocity.y-=i*t.y,n.m_angularVelocity-=c*(r*t.y-a*t.x+this.m_angularImpulse),s.m_linearVelocity.x+=e*t.x,s.m_linearVelocity.y+=e*t.y,s.m_angularVelocity+=_*(m*t.y-l*t.x+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0)},l.prototype.SolveVelocityConstraints=function(t){var i,o=0,e=this.m_bodyA,r=this.m_bodyB,a=e.m_linearVelocity,m=e.m_angularVelocity,l=r.m_linearVelocity,c=r.m_angularVelocity,_=e.m_invMass,h=r.m_invMass,p=e.m_invI,y=r.m_invI;i=e.m_xf.R;var u=this.m_localAnchorA.x-e.m_sweep.localCenter.x,x=this.m_localAnchorA.y-e.m_sweep.localCenter.y;o=i.col1.x*u+i.col2.x*x,x=i.col1.y*u+i.col2.y*x,u=o,i=r.m_xf.R;var f=this.m_localAnchorB.x-r.m_sweep.localCenter.x,d=this.m_localAnchorB.y-r.m_sweep.localCenter.y;o=i.col1.x*f+i.col2.x*d,d=i.col1.y*f+i.col2.y*d,f=o,i=0,o=-this.m_angularMass*(c-m);var b=this.m_angularImpulse;i=t.dt*this.m_maxTorque,this.m_angularImpulse=n.Clamp(this.m_angularImpulse+o,-i,i),m-=p*(o=this.m_angularImpulse-b),c+=y*o,i=n.MulMV(this.m_linearMass,new s(-(l.x-c*d-a.x+m*x),-(l.y+c*f-a.y-m*u))),o=this.m_linearImpulse.Copy(),this.m_linearImpulse.Add(i),i=t.dt*this.m_maxForce,this.m_linearImpulse.LengthSquared()>i*i&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.Multiply(i)),i=n.SubtractVV(this.m_linearImpulse,o),a.x-=_*i.x,a.y-=_*i.y,m-=p*(u*i.y-x*i.x),l.x+=h*i.x,l.y+=h*i.y,c+=y*(f*i.y-d*i.x),e.m_angularVelocity=m,r.m_angularVelocity=c},l.prototype.SolvePositionConstraints=function(){return!0},t.inherit(c,t.Dynamics.Joints.b2JointDef),c.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,c.b2FrictionJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new s,this.localAnchorB=new s},c.prototype.b2FrictionJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_frictionJoint,this.maxTorque=this.maxForce=0},c.prototype.Initialize=function(t,i,o){this.bodyA=t,this.bodyB=i,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(o)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(o))},t.inherit(_,t.Dynamics.Joints.b2Joint),_.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,_.b2GearJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new s,this.m_groundAnchor2=new s,this.m_localAnchor1=new s,this.m_localAnchor2=new s,this.m_J=new p},_.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},_.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},_.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*this.m_impulse*this.m_J.linearB.x,t*this.m_impulse*this.m_J.linearB.y)},_.prototype.GetReactionTorque=function(t){void 0===t&&(t=0);var i=this.m_bodyB.m_xf.R,o=this.m_localAnchor1.x-this.m_bodyB.m_sweep.localCenter.x,e=this.m_localAnchor1.y-this.m_bodyB.m_sweep.localCenter.y,n=i.col1.x*o+i.col2.x*e;return e=i.col1.y*o+i.col2.y*e,o=n,t*(this.m_impulse*this.m_J.angularB-o*this.m_impulse*this.m_J.linearB.y+e*this.m_impulse*this.m_J.linearB.x)},_.prototype.GetRatio=function(){return this.m_ratio},_.prototype.SetRatio=function(t){void 0===t&&(t=0),this.m_ratio=t},_.prototype.b2GearJoint=function(t){this.__super.b2Joint.call(this,t);var i=parseInt(t.joint1.m_type),o=parseInt(t.joint2.m_type);this.m_prismatic2=this.m_revolute2=this.m_prismatic1=this.m_revolute1=null;var e=0,n=0;this.m_ground1=t.joint1.GetBodyA(),this.m_bodyA=t.joint1.GetBodyB(),i==y.e_revoluteJoint?(this.m_revolute1=t.joint1 instanceof g?t.joint1:null,this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2),e=this.m_revolute1.GetJointAngle()):(this.m_prismatic1=t.joint1 instanceof C?t.joint1:null,this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2),e=this.m_prismatic1.GetJointTranslation()),this.m_ground2=t.joint2.GetBodyA(),this.m_bodyB=t.joint2.GetBodyB(),o==y.e_revoluteJoint?(this.m_revolute2=t.joint2 instanceof g?t.joint2:null,this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2),n=this.m_revolute2.GetJointAngle()):(this.m_prismatic2=t.joint2 instanceof C?t.joint2:null,this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2),n=this.m_prismatic2.GetJointTranslation()),this.m_ratio=t.ratio,this.m_constant=e+this.m_ratio*n,this.m_impulse=0},_.prototype.InitVelocityConstraints=function(t){var i=this.m_ground1,o=this.m_ground2,e=this.m_bodyA,n=this.m_bodyB,s=0,r=0,a=0,m=0,l=a=0,c=0;this.m_J.SetZero(),this.m_revolute1?(this.m_J.angularA=-1,c+=e.m_invI):(i=i.m_xf.R,r=this.m_prismatic1.m_localXAxis1,s=i.col1.x*r.x+i.col2.x*r.y,r=i.col1.y*r.x+i.col2.y*r.y,i=e.m_xf.R,a=this.m_localAnchor1.x-e.m_sweep.localCenter.x,m=this.m_localAnchor1.y-e.m_sweep.localCenter.y,l=i.col1.x*a+i.col2.x*m,m=i.col1.y*a+i.col2.y*m,a=(a=l)*r-m*s,this.m_J.linearA.Set(-s,-r),this.m_J.angularA=-a,c+=e.m_invMass+e.m_invI*a*a),this.m_revolute2?(this.m_J.angularB=-this.m_ratio,c+=this.m_ratio*this.m_ratio*n.m_invI):(i=o.m_xf.R,r=this.m_prismatic2.m_localXAxis1,s=i.col1.x*r.x+i.col2.x*r.y,r=i.col1.y*r.x+i.col2.y*r.y,i=n.m_xf.R,a=this.m_localAnchor2.x-n.m_sweep.localCenter.x,m=this.m_localAnchor2.y-n.m_sweep.localCenter.y,l=i.col1.x*a+i.col2.x*m,m=i.col1.y*a+i.col2.y*m,a=(a=l)*r-m*s,this.m_J.linearB.Set(-this.m_ratio*s,-this.m_ratio*r),this.m_J.angularB=-this.m_ratio*a,c+=this.m_ratio*this.m_ratio*(n.m_invMass+n.m_invI*a*a)),this.m_mass=c>0?1/c:0,t.warmStarting?(e.m_linearVelocity.x+=e.m_invMass*this.m_impulse*this.m_J.linearA.x,e.m_linearVelocity.y+=e.m_invMass*this.m_impulse*this.m_J.linearA.y,e.m_angularVelocity+=e.m_invI*this.m_impulse*this.m_J.angularA,n.m_linearVelocity.x+=n.m_invMass*this.m_impulse*this.m_J.linearB.x,n.m_linearVelocity.y+=n.m_invMass*this.m_impulse*this.m_J.linearB.y,n.m_angularVelocity+=n.m_invI*this.m_impulse*this.m_J.angularB):this.m_impulse=0},_.prototype.SolveVelocityConstraints=function(){var t=this.m_bodyA,i=this.m_bodyB,o=-this.m_mass*this.m_J.Compute(t.m_linearVelocity,t.m_angularVelocity,i.m_linearVelocity,i.m_angularVelocity);this.m_impulse+=o,t.m_linearVelocity.x+=t.m_invMass*o*this.m_J.linearA.x,t.m_linearVelocity.y+=t.m_invMass*o*this.m_J.linearA.y,t.m_angularVelocity+=t.m_invI*o*this.m_J.angularA,i.m_linearVelocity.x+=i.m_invMass*o*this.m_J.linearB.x,i.m_linearVelocity.y+=i.m_invMass*o*this.m_J.linearB.y,i.m_angularVelocity+=i.m_invI*o*this.m_J.angularB},_.prototype.SolvePositionConstraints=function(){var t,o=this.m_bodyA,e=this.m_bodyB,n=0;return n=this.m_revolute1?this.m_revolute1.GetJointAngle():this.m_prismatic1.GetJointTranslation(),t=this.m_revolute2?this.m_revolute2.GetJointAngle():this.m_prismatic2.GetJointTranslation(),n=-this.m_mass*(this.m_constant-(n+this.m_ratio*t)),o.m_sweep.c.x+=o.m_invMass*n*this.m_J.linearA.x,o.m_sweep.c.y+=o.m_invMass*n*this.m_J.linearA.y,o.m_sweep.a+=o.m_invI*n*this.m_J.angularA,e.m_sweep.c.x+=e.m_invMass*n*this.m_J.linearB.x,e.m_sweep.c.y+=e.m_invMass*n*this.m_J.linearB.y,e.m_sweep.a+=e.m_invI*n*this.m_J.angularB,o.SynchronizeTransform(),e.SynchronizeTransform(),0<i.b2_linearSlop},t.inherit(h,t.Dynamics.Joints.b2JointDef),h.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,h.b2GearJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments)},h.prototype.b2GearJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_gearJoint,this.joint2=this.joint1=null,this.ratio=1},p.b2Jacobian=function(){this.linearA=new s,this.linearB=new s},p.prototype.SetZero=function(){this.linearA.SetZero(),this.angularA=0,this.linearB.SetZero(),this.angularB=0},p.prototype.Set=function(t,i,o,e){void 0===i&&(i=0),void 0===e&&(e=0),this.linearA.SetV(t),this.angularA=i,this.linearB.SetV(o),this.angularB=e},p.prototype.Compute=function(t,i,o,e){return void 0===i&&(i=0),void 0===e&&(e=0),this.linearA.x*t.x+this.linearA.y*t.y+this.angularA*i+(this.linearB.x*o.x+this.linearB.y*o.y)+this.angularB*e},y.b2Joint=function(){this.m_edgeA=new x,this.m_edgeB=new x,this.m_localCenterA=new s,this.m_localCenterB=new s},y.prototype.GetType=function(){return this.m_type},y.prototype.GetAnchorA=function(){return null},y.prototype.GetAnchorB=function(){return null},y.prototype.GetReactionForce=function(){return null},y.prototype.GetReactionTorque=function(){return 0},y.prototype.GetBodyA=function(){return this.m_bodyA},y.prototype.GetBodyB=function(){return this.m_bodyB},y.prototype.GetNext=function(){return this.m_next},y.prototype.GetUserData=function(){return this.m_userData},y.prototype.SetUserData=function(t){this.m_userData=t},y.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()},y.Create=function(t){var i=null;switch(t.type){case y.e_distanceJoint:i=new a(t instanceof m?t:null);break;case y.e_mouseJoint:i=new b(t instanceof v?t:null);break;case y.e_prismaticJoint:i=new C(t instanceof A?t:null);break;case y.e_revoluteJoint:i=new g(t instanceof B?t:null);break;case y.e_pulleyJoint:i=new w(t instanceof S?t:null);break;case y.e_gearJoint:i=new _(t instanceof h?t:null);break;case y.e_lineJoint:i=new f(t instanceof d?t:null);break;case y.e_weldJoint:i=new M(t instanceof V?t:null);break;case y.e_frictionJoint:i=new l(t instanceof c?t:null)}return i},y.Destroy=function(){},y.prototype.b2Joint=function(t){i.b2Assert(t.bodyA!=t.bodyB),this.m_type=t.type,this.m_next=this.m_prev=null,this.m_bodyA=t.bodyA,this.m_bodyB=t.bodyB,this.m_collideConnected=t.collideConnected,this.m_islandFlag=!1,this.m_userData=t.userData},y.prototype.InitVelocityConstraints=function(){},y.prototype.SolveVelocityConstraints=function(){},y.prototype.FinalizeVelocityConstraints=function(){},y.prototype.SolvePositionConstraints=function(){return!1},t.postDefs.push(function(){t.Dynamics.Joints.b2Joint.e_unknownJoint=0,t.Dynamics.Joints.b2Joint.e_revoluteJoint=1,t.Dynamics.Joints.b2Joint.e_prismaticJoint=2,t.Dynamics.Joints.b2Joint.e_distanceJoint=3,t.Dynamics.Joints.b2Joint.e_pulleyJoint=4,t.Dynamics.Joints.b2Joint.e_mouseJoint=5,t.Dynamics.Joints.b2Joint.e_gearJoint=6,t.Dynamics.Joints.b2Joint.e_lineJoint=7,t.Dynamics.Joints.b2Joint.e_weldJoint=8,t.Dynamics.Joints.b2Joint.e_frictionJoint=9,t.Dynamics.Joints.b2Joint.e_inactiveLimit=0,t.Dynamics.Joints.b2Joint.e_atLowerLimit=1,t.Dynamics.Joints.b2Joint.e_atUpperLimit=2,t.Dynamics.Joints.b2Joint.e_equalLimits=3}),u.b2JointDef=function(){},u.prototype.b2JointDef=function(){this.type=y.e_unknownJoint,this.bodyB=this.bodyA=this.userData=null,this.collideConnected=!1},x.b2JointEdge=function(){},t.inherit(f,t.Dynamics.Joints.b2Joint),f.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,f.b2LineJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new s,this.m_localAnchor2=new s,this.m_localXAxis1=new s,this.m_localYAxis1=new s,this.m_axis=new s,this.m_perp=new s,this.m_K=new o,this.m_impulse=new s},f.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},f.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},f.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y))},f.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.y},f.prototype.GetJointTranslation=function(){var t=this.m_bodyA,i=this.m_bodyB,o=t.GetWorldPoint(this.m_localAnchor1),e=i.GetWorldPoint(this.m_localAnchor2);return i=e.x-o.x,o=e.y-o.y,(t=t.GetWorldVector(this.m_localXAxis1)).x*i+t.y*o},f.prototype.GetJointSpeed=function(){var t,i=this.m_bodyA,o=this.m_bodyB;t=i.m_xf.R;var e=this.m_localAnchor1.x-i.m_sweep.localCenter.x,n=this.m_localAnchor1.y-i.m_sweep.localCenter.y,s=t.col1.x*e+t.col2.x*n;n=t.col1.y*e+t.col2.y*n,e=s,t=o.m_xf.R;var r=this.m_localAnchor2.x-o.m_sweep.localCenter.x,a=this.m_localAnchor2.y-o.m_sweep.localCenter.y;s=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=s,t=o.m_sweep.c.x+r-(i.m_sweep.c.x+e),s=o.m_sweep.c.y+a-(i.m_sweep.c.y+n);var m=i.GetWorldVector(this.m_localXAxis1),l=i.m_linearVelocity,c=o.m_linearVelocity;return i=i.m_angularVelocity,o=o.m_angularVelocity,t*-i*m.y+s*i*m.x+(m.x*(c.x+-o*a-l.x- -i*n)+m.y*(c.y+o*r-l.y-i*e))},f.prototype.IsLimitEnabled=function(){return this.m_enableLimit},f.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t},f.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},f.prototype.GetUpperLimit=function(){return this.m_upperTranslation},f.prototype.SetLimits=function(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=i},f.prototype.IsMotorEnabled=function(){return this.m_enableMotor},f.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},f.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},f.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},f.prototype.SetMaxMotorForce=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},f.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce},f.prototype.GetMotorForce=function(){return this.m_motorImpulse},f.prototype.b2LineJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_localXAxis1.SetV(t.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_impulse.SetZero(),this.m_motorImpulse=this.m_motorMass=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=y.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},f.prototype.InitVelocityConstraints=function(t){var o,e=this.m_bodyA,s=this.m_bodyB,r=0;this.m_localCenterA.SetV(e.GetLocalCenter()),this.m_localCenterB.SetV(s.GetLocalCenter());var a=e.GetTransform();s.GetTransform(),o=e.m_xf.R;var m=this.m_localAnchor1.x-this.m_localCenterA.x,l=this.m_localAnchor1.y-this.m_localCenterA.y;r=o.col1.x*m+o.col2.x*l,l=o.col1.y*m+o.col2.y*l,m=r,o=s.m_xf.R;var c=this.m_localAnchor2.x-this.m_localCenterB.x,_=this.m_localAnchor2.y-this.m_localCenterB.y;r=o.col1.x*c+o.col2.x*_,_=o.col1.y*c+o.col2.y*_,c=r,o=s.m_sweep.c.x+c-e.m_sweep.c.x-m,r=s.m_sweep.c.y+_-e.m_sweep.c.y-l,this.m_invMassA=e.m_invMass,this.m_invMassB=s.m_invMass,this.m_invIA=e.m_invI,this.m_invIB=s.m_invI,this.m_axis.SetV(n.MulMV(a.R,this.m_localXAxis1)),this.m_a1=(o+m)*this.m_axis.y-(r+l)*this.m_axis.x,this.m_a2=c*this.m_axis.y-_*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass=this.m_motorMass>Number.MIN_VALUE?1/this.m_motorMass:0,this.m_perp.SetV(n.MulMV(a.R,this.m_localYAxis1)),this.m_s1=(o+m)*this.m_perp.y-(r+l)*this.m_perp.x,this.m_s2=c*this.m_perp.y-_*this.m_perp.x,a=this.m_invMassA,m=this.m_invMassB,l=this.m_invIA,c=this.m_invIB,this.m_K.col1.x=a+m+l*this.m_s1*this.m_s1+c*this.m_s2*this.m_s2,this.m_K.col1.y=l*this.m_s1*this.m_a1+c*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=a+m+l*this.m_a1*this.m_a1+c*this.m_a2*this.m_a2,this.m_enableLimit?(o=this.m_axis.x*o+this.m_axis.y*r,n.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*i.b2_linearSlop?this.m_limitState=y.e_equalLimits:o<=this.m_lowerTranslation?this.m_limitState!=y.e_atLowerLimit&&(this.m_limitState=y.e_atLowerLimit,this.m_impulse.y=0):o>=this.m_upperTranslation?this.m_limitState!=y.e_atUpperLimit&&(this.m_limitState=y.e_atUpperLimit,this.m_impulse.y=0):(this.m_limitState=y.e_inactiveLimit,this.m_impulse.y=0)):this.m_limitState=y.e_inactiveLimit,0==this.m_enableMotor&&(this.m_motorImpulse=0),t.warmStarting?(this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_motorImpulse*=t.dtRatio,t=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x,o=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y,r=this.m_impulse.x*this.m_s1+(this.m_motorImpulse+this.m_impulse.y)*this.m_a1,a=this.m_impulse.x*this.m_s2+(this.m_motorImpulse+this.m_impulse.y)*this.m_a2,e.m_linearVelocity.x-=this.m_invMassA*t,e.m_linearVelocity.y-=this.m_invMassA*o,e.m_angularVelocity-=this.m_invIA*r,s.m_linearVelocity.x+=this.m_invMassB*t,s.m_linearVelocity.y+=this.m_invMassB*o,s.m_angularVelocity+=this.m_invIB*a):(this.m_impulse.SetZero(),this.m_motorImpulse=0)},f.prototype.SolveVelocityConstraints=function(t){var i=this.m_bodyA,o=this.m_bodyB,e=i.m_linearVelocity,r=i.m_angularVelocity,a=o.m_linearVelocity,m=o.m_angularVelocity,l=0,c=0,_=0,h=0;this.m_enableMotor&&this.m_limitState!=y.e_equalLimits&&(h=this.m_motorMass*(this.m_motorSpeed-(this.m_axis.x*(a.x-e.x)+this.m_axis.y*(a.y-e.y)+this.m_a2*m-this.m_a1*r)),l=this.m_motorImpulse,c=t.dt*this.m_maxMotorForce,this.m_motorImpulse=n.Clamp(this.m_motorImpulse+h,-c,c),l=(h=this.m_motorImpulse-l)*this.m_axis.x,c=h*this.m_axis.y,_=h*this.m_a1,h*=this.m_a2,e.x-=this.m_invMassA*l,e.y-=this.m_invMassA*c,r-=this.m_invIA*_,a.x+=this.m_invMassB*l,a.y+=this.m_invMassB*c,m+=this.m_invIB*h),c=this.m_perp.x*(a.x-e.x)+this.m_perp.y*(a.y-e.y)+this.m_s2*m-this.m_s1*r,this.m_enableLimit&&this.m_limitState!=y.e_inactiveLimit?(_=this.m_axis.x*(a.x-e.x)+this.m_axis.y*(a.y-e.y)+this.m_a2*m-this.m_a1*r,l=this.m_impulse.Copy(),t=this.m_K.Solve(new s,-c,-_),this.m_impulse.Add(t),this.m_limitState==y.e_atLowerLimit?this.m_impulse.y=n.Max(this.m_impulse.y,0):this.m_limitState==y.e_atUpperLimit&&(this.m_impulse.y=n.Min(this.m_impulse.y,0)),c=-c-(this.m_impulse.y-l.y)*this.m_K.col2.x,_=0,_=0!=this.m_K.col1.x?c/this.m_K.col1.x+l.x:l.x,this.m_impulse.x=_,t.x=this.m_impulse.x-l.x,t.y=this.m_impulse.y-l.y,l=t.x*this.m_perp.x+t.y*this.m_axis.x,c=t.x*this.m_perp.y+t.y*this.m_axis.y,_=t.x*this.m_s1+t.y*this.m_a1,h=t.x*this.m_s2+t.y*this.m_a2):(t=0,t=0!=this.m_K.col1.x?-c/this.m_K.col1.x:0,this.m_impulse.x+=t,l=t*this.m_perp.x,c=t*this.m_perp.y,_=t*this.m_s1,h=t*this.m_s2),e.x-=this.m_invMassA*l,e.y-=this.m_invMassA*c,r-=this.m_invIA*_,a.x+=this.m_invMassB*l,a.y+=this.m_invMassB*c,m+=this.m_invIB*h,i.m_linearVelocity.SetV(e),i.m_angularVelocity=r,o.m_linearVelocity.SetV(a),o.m_angularVelocity=m},f.prototype.SolvePositionConstraints=function(){var t,e=this.m_bodyA,r=this.m_bodyB,a=e.m_sweep.c,m=e.m_sweep.a,l=r.m_sweep.c,c=r.m_sweep.a,_=0,h=0,p=0,y=0,u=t=0,x=0;h=!1;var f=0,d=o.FromAngle(m);p=o.FromAngle(c),t=d,x=this.m_localAnchor1.x-this.m_localCenterA.x;var b=this.m_localAnchor1.y-this.m_localCenterA.y;if(_=t.col1.x*x+t.col2.x*b,b=t.col1.y*x+t.col2.y*b,x=_,t=p,p=this.m_localAnchor2.x-this.m_localCenterB.x,y=this.m_localAnchor2.y-this.m_localCenterB.y,_=t.col1.x*p+t.col2.x*y,y=t.col1.y*p+t.col2.y*y,p=_,t=l.x+p-a.x-x,_=l.y+y-a.y-b,this.m_enableLimit){this.m_axis=n.MulMV(d,this.m_localXAxis1),this.m_a1=(t+x)*this.m_axis.y-(_+b)*this.m_axis.x,this.m_a2=p*this.m_axis.y-y*this.m_axis.x;var v=this.m_axis.x*t+this.m_axis.y*_;n.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*i.b2_linearSlop?(f=n.Clamp(v,-i.b2_maxLinearCorrection,i.b2_maxLinearCorrection),u=n.Abs(v),h=!0):v<=this.m_lowerTranslation?(f=n.Clamp(v-this.m_lowerTranslation+i.b2_linearSlop,-i.b2_maxLinearCorrection,0),u=this.m_lowerTranslation-v,h=!0):v>=this.m_upperTranslation&&(f=n.Clamp(v-this.m_upperTranslation+i.b2_linearSlop,0,i.b2_maxLinearCorrection),u=v-this.m_upperTranslation,h=!0)}return this.m_perp=n.MulMV(d,this.m_localYAxis1),this.m_s1=(t+x)*this.m_perp.y-(_+b)*this.m_perp.x,this.m_s2=p*this.m_perp.y-y*this.m_perp.x,d=new s,b=this.m_perp.x*t+this.m_perp.y*_,u=n.Max(u,n.Abs(b)),x=0,h?(h=this.m_invMassA,p=this.m_invMassB,y=this.m_invIA,t=this.m_invIB,this.m_K.col1.x=h+p+y*this.m_s1*this.m_s1+t*this.m_s2*this.m_s2,this.m_K.col1.y=y*this.m_s1*this.m_a1+t*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=h+p+y*this.m_a1*this.m_a1+t*this.m_a2*this.m_a2,this.m_K.Solve(d,-b,-f)):(h=this.m_invMassA,p=this.m_invMassB,y=this.m_invIA,t=this.m_invIB,f=h+p+y*this.m_s1*this.m_s1+t*this.m_s2*this.m_s2,h=0,h=0!=f?-b/f:0,d.x=h,d.y=0),f=d.x*this.m_perp.x+d.y*this.m_axis.x,h=d.x*this.m_perp.y+d.y*this.m_axis.y,b=d.x*this.m_s1+d.y*this.m_a1,d=d.x*this.m_s2+d.y*this.m_a2,a.x-=this.m_invMassA*f,a.y-=this.m_invMassA*h,m-=this.m_invIA*b,l.x+=this.m_invMassB*f,l.y+=this.m_invMassB*h,c+=this.m_invIB*d,e.m_sweep.a=m,r.m_sweep.a=c,e.SynchronizeTransform(),r.SynchronizeTransform(),u<=i.b2_linearSlop&&x<=i.b2_angularSlop},t.inherit(d,t.Dynamics.Joints.b2JointDef),d.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,d.b2LineJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new s,this.localAnchorB=new s,this.localAxisA=new s},d.prototype.b2LineJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_lineJoint,this.localAxisA.Set(1,0),this.enableLimit=!1,this.upperTranslation=this.lowerTranslation=0,this.enableMotor=!1,this.motorSpeed=this.maxMotorForce=0},d.prototype.Initialize=function(t,i,o,e){this.bodyA=t,this.bodyB=i,this.localAnchorA=this.bodyA.GetLocalPoint(o),this.localAnchorB=this.bodyB.GetLocalPoint(o),this.localAxisA=this.bodyA.GetLocalVector(e)},t.inherit(b,t.Dynamics.Joints.b2Joint),b.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,b.b2MouseJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new o,this.K1=new o,this.K2=new o,this.m_localAnchor=new s,this.m_target=new s,this.m_impulse=new s,this.m_mass=new o,this.m_C=new s},b.prototype.GetAnchorA=function(){return this.m_target},b.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor)},b.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*this.m_impulse.x,t*this.m_impulse.y)},b.prototype.GetReactionTorque=function(){return 0},b.prototype.GetTarget=function(){return this.m_target},b.prototype.SetTarget=function(t){0==this.m_bodyB.IsAwake()&&this.m_bodyB.SetAwake(!0),this.m_target=t},b.prototype.GetMaxForce=function(){return this.m_maxForce},b.prototype.SetMaxForce=function(t){void 0===t&&(t=0),this.m_maxForce=t},b.prototype.GetFrequency=function(){return this.m_frequencyHz},b.prototype.SetFrequency=function(t){void 0===t&&(t=0),this.m_frequencyHz=t},b.prototype.GetDampingRatio=function(){return this.m_dampingRatio},b.prototype.SetDampingRatio=function(t){void 0===t&&(t=0),this.m_dampingRatio=t},b.prototype.b2MouseJoint=function(t){this.__super.b2Joint.call(this,t),this.m_target.SetV(t.target);var i=this.m_target.x-this.m_bodyB.m_xf.position.x,o=this.m_target.y-this.m_bodyB.m_xf.position.y,e=this.m_bodyB.m_xf.R;this.m_localAnchor.x=i*e.col1.x+o*e.col1.y,this.m_localAnchor.y=i*e.col2.x+o*e.col2.y,this.m_maxForce=t.maxForce,this.m_impulse.SetZero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_gamma=this.m_beta=0},b.prototype.InitVelocityConstraints=function(t){var i=this.m_bodyB,o=i.GetMass(),e=2*Math.PI*this.m_frequencyHz,n=o*e*e;this.m_gamma=t.dt*(2*o*this.m_dampingRatio*e+t.dt*n),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_beta=t.dt*n*this.m_gamma,n=i.m_xf.R,o=this.m_localAnchor.x-i.m_sweep.localCenter.x,e=this.m_localAnchor.y-i.m_sweep.localCenter.y;var s=n.col1.x*o+n.col2.x*e;e=n.col1.y*o+n.col2.y*e,o=s,n=i.m_invMass,s=i.m_invI,this.K1.col1.x=n,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=n,this.K2.col1.x=s*e*e,this.K2.col2.x=-s*o*e,this.K2.col1.y=-s*o*e,this.K2.col2.y=s*o*o,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.col1.x+=this.m_gamma,this.K.col2.y+=this.m_gamma,this.K.GetInverse(this.m_mass),this.m_C.x=i.m_sweep.c.x+o-this.m_target.x,this.m_C.y=i.m_sweep.c.y+e-this.m_target.y,i.m_angularVelocity*=.98,this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,i.m_linearVelocity.x+=n*this.m_impulse.x,i.m_linearVelocity.y+=n*this.m_impulse.y,i.m_angularVelocity+=s*(o*this.m_impulse.y-e*this.m_impulse.x)},b.prototype.SolveVelocityConstraints=function(t){var i,o=this.m_bodyB,e=0,n=0;i=o.m_xf.R;var s=this.m_localAnchor.x-o.m_sweep.localCenter.x,r=this.m_localAnchor.y-o.m_sweep.localCenter.y;e=i.col1.x*s+i.col2.x*r,r=i.col1.y*s+i.col2.y*r,s=e,e=o.m_linearVelocity.x+-o.m_angularVelocity*r;var a=o.m_linearVelocity.y+o.m_angularVelocity*s;i=this.m_mass,e=e+this.m_beta*this.m_C.x+this.m_gamma*this.m_impulse.x,n=a+this.m_beta*this.m_C.y+this.m_gamma*this.m_impulse.y,a=-(i.col1.x*e+i.col2.x*n),n=-(i.col1.y*e+i.col2.y*n),i=this.m_impulse.x,e=this.m_impulse.y,this.m_impulse.x+=a,this.m_impulse.y+=n,t=t.dt*this.m_maxForce,this.m_impulse.LengthSquared()>t*t&&this.m_impulse.Multiply(t/this.m_impulse.Length()),a=this.m_impulse.x-i,n=this.m_impulse.y-e,o.m_linearVelocity.x+=o.m_invMass*a,o.m_linearVelocity.y+=o.m_invMass*n,o.m_angularVelocity+=o.m_invI*(s*n-r*a)},b.prototype.SolvePositionConstraints=function(){return!0},t.inherit(v,t.Dynamics.Joints.b2JointDef),v.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,v.b2MouseJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.target=new s},v.prototype.b2MouseJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_mouseJoint,this.maxForce=0,this.frequencyHz=5,this.dampingRatio=.7},t.inherit(C,t.Dynamics.Joints.b2Joint),C.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,C.b2PrismaticJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new s,this.m_localAnchor2=new s,this.m_localXAxis1=new s,this.m_localYAxis1=new s,this.m_axis=new s,this.m_perp=new s,this.m_K=new e,this.m_impulse=new r},C.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},C.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},C.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))},C.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.y},C.prototype.GetJointTranslation=function(){var t=this.m_bodyA,i=this.m_bodyB,o=t.GetWorldPoint(this.m_localAnchor1),e=i.GetWorldPoint(this.m_localAnchor2);return i=e.x-o.x,o=e.y-o.y,(t=t.GetWorldVector(this.m_localXAxis1)).x*i+t.y*o},C.prototype.GetJointSpeed=function(){var t,i=this.m_bodyA,o=this.m_bodyB;t=i.m_xf.R;var e=this.m_localAnchor1.x-i.m_sweep.localCenter.x,n=this.m_localAnchor1.y-i.m_sweep.localCenter.y,s=t.col1.x*e+t.col2.x*n;n=t.col1.y*e+t.col2.y*n,e=s,t=o.m_xf.R;var r=this.m_localAnchor2.x-o.m_sweep.localCenter.x,a=this.m_localAnchor2.y-o.m_sweep.localCenter.y;s=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=s,t=o.m_sweep.c.x+r-(i.m_sweep.c.x+e),s=o.m_sweep.c.y+a-(i.m_sweep.c.y+n);var m=i.GetWorldVector(this.m_localXAxis1),l=i.m_linearVelocity,c=o.m_linearVelocity;return i=i.m_angularVelocity,o=o.m_angularVelocity,t*-i*m.y+s*i*m.x+(m.x*(c.x+-o*a-l.x- -i*n)+m.y*(c.y+o*r-l.y-i*e))},C.prototype.IsLimitEnabled=function(){return this.m_enableLimit},C.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t},C.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},C.prototype.GetUpperLimit=function(){return this.m_upperTranslation},C.prototype.SetLimits=function(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=i},C.prototype.IsMotorEnabled=function(){return this.m_enableMotor},C.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},C.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},C.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},C.prototype.SetMaxMotorForce=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},C.prototype.GetMotorForce=function(){return this.m_motorImpulse},C.prototype.b2PrismaticJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_localXAxis1.SetV(t.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_refAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_motorImpulse=this.m_motorMass=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=y.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},C.prototype.InitVelocityConstraints=function(t){var o,e=this.m_bodyA,s=this.m_bodyB,r=0;this.m_localCenterA.SetV(e.GetLocalCenter()),this.m_localCenterB.SetV(s.GetLocalCenter());var a=e.GetTransform();s.GetTransform(),o=e.m_xf.R;var m=this.m_localAnchor1.x-this.m_localCenterA.x,l=this.m_localAnchor1.y-this.m_localCenterA.y;r=o.col1.x*m+o.col2.x*l,l=o.col1.y*m+o.col2.y*l,m=r,o=s.m_xf.R;var c=this.m_localAnchor2.x-this.m_localCenterB.x,_=this.m_localAnchor2.y-this.m_localCenterB.y;r=o.col1.x*c+o.col2.x*_,_=o.col1.y*c+o.col2.y*_,c=r,o=s.m_sweep.c.x+c-e.m_sweep.c.x-m,r=s.m_sweep.c.y+_-e.m_sweep.c.y-l,this.m_invMassA=e.m_invMass,this.m_invMassB=s.m_invMass,this.m_invIA=e.m_invI,this.m_invIB=s.m_invI,this.m_axis.SetV(n.MulMV(a.R,this.m_localXAxis1)),this.m_a1=(o+m)*this.m_axis.y-(r+l)*this.m_axis.x,this.m_a2=c*this.m_axis.y-_*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass>Number.MIN_VALUE&&(this.m_motorMass=1/this.m_motorMass),this.m_perp.SetV(n.MulMV(a.R,this.m_localYAxis1)),this.m_s1=(o+m)*this.m_perp.y-(r+l)*this.m_perp.x,this.m_s2=c*this.m_perp.y-_*this.m_perp.x,a=this.m_invMassA,m=this.m_invMassB,l=this.m_invIA,c=this.m_invIB,this.m_K.col1.x=a+m+l*this.m_s1*this.m_s1+c*this.m_s2*this.m_s2,this.m_K.col1.y=l*this.m_s1+c*this.m_s2,this.m_K.col1.z=l*this.m_s1*this.m_a1+c*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=l+c,this.m_K.col2.z=l*this.m_a1+c*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=a+m+l*this.m_a1*this.m_a1+c*this.m_a2*this.m_a2,this.m_enableLimit?(o=this.m_axis.x*o+this.m_axis.y*r,n.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*i.b2_linearSlop?this.m_limitState=y.e_equalLimits:o<=this.m_lowerTranslation?this.m_limitState!=y.e_atLowerLimit&&(this.m_limitState=y.e_atLowerLimit,this.m_impulse.z=0):o>=this.m_upperTranslation?this.m_limitState!=y.e_atUpperLimit&&(this.m_limitState=y.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=y.e_inactiveLimit,this.m_impulse.z=0)):this.m_limitState=y.e_inactiveLimit,0==this.m_enableMotor&&(this.m_motorImpulse=0),t.warmStarting?(this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_motorImpulse*=t.dtRatio,t=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x,o=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y,r=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,a=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2,e.m_linearVelocity.x-=this.m_invMassA*t,e.m_linearVelocity.y-=this.m_invMassA*o,e.m_angularVelocity-=this.m_invIA*r,s.m_linearVelocity.x+=this.m_invMassB*t,s.m_linearVelocity.y+=this.m_invMassB*o,s.m_angularVelocity+=this.m_invIB*a):(this.m_impulse.SetZero(),this.m_motorImpulse=0)},C.prototype.SolveVelocityConstraints=function(t){var i=this.m_bodyA,o=this.m_bodyB,e=i.m_linearVelocity,a=i.m_angularVelocity,m=o.m_linearVelocity,l=o.m_angularVelocity,c=0,_=0,h=0,p=0;this.m_enableMotor&&this.m_limitState!=y.e_equalLimits&&(p=this.m_motorMass*(this.m_motorSpeed-(this.m_axis.x*(m.x-e.x)+this.m_axis.y*(m.y-e.y)+this.m_a2*l-this.m_a1*a)),c=this.m_motorImpulse,t=t.dt*this.m_maxMotorForce,this.m_motorImpulse=n.Clamp(this.m_motorImpulse+p,-t,t),c=(p=this.m_motorImpulse-c)*this.m_axis.x,_=p*this.m_axis.y,h=p*this.m_a1,p*=this.m_a2,e.x-=this.m_invMassA*c,e.y-=this.m_invMassA*_,a-=this.m_invIA*h,m.x+=this.m_invMassB*c,m.y+=this.m_invMassB*_,l+=this.m_invIB*p),h=this.m_perp.x*(m.x-e.x)+this.m_perp.y*(m.y-e.y)+this.m_s2*l-this.m_s1*a,_=l-a,this.m_enableLimit&&this.m_limitState!=y.e_inactiveLimit?(t=this.m_axis.x*(m.x-e.x)+this.m_axis.y*(m.y-e.y)+this.m_a2*l-this.m_a1*a,c=this.m_impulse.Copy(),t=this.m_K.Solve33(new r,-h,-_,-t),this.m_impulse.Add(t),this.m_limitState==y.e_atLowerLimit?this.m_impulse.z=n.Max(this.m_impulse.z,0):this.m_limitState==y.e_atUpperLimit&&(this.m_impulse.z=n.Min(this.m_impulse.z,0)),h=-h-(this.m_impulse.z-c.z)*this.m_K.col3.x,_=-_-(this.m_impulse.z-c.z)*this.m_K.col3.y,(_=this.m_K.Solve22(new s,h,_)).x+=c.x,_.y+=c.y,this.m_impulse.x=_.x,this.m_impulse.y=_.y,t.x=this.m_impulse.x-c.x,t.y=this.m_impulse.y-c.y,t.z=this.m_impulse.z-c.z,c=t.x*this.m_perp.x+t.z*this.m_axis.x,_=t.x*this.m_perp.y+t.z*this.m_axis.y,h=t.x*this.m_s1+t.y+t.z*this.m_a1,p=t.x*this.m_s2+t.y+t.z*this.m_a2):(t=this.m_K.Solve22(new s,-h,-_),this.m_impulse.x+=t.x,this.m_impulse.y+=t.y,c=t.x*this.m_perp.x,_=t.x*this.m_perp.y,h=t.x*this.m_s1+t.y,p=t.x*this.m_s2+t.y),e.x-=this.m_invMassA*c,e.y-=this.m_invMassA*_,a-=this.m_invIA*h,m.x+=this.m_invMassB*c,m.y+=this.m_invMassB*_,l+=this.m_invIB*p,i.m_linearVelocity.SetV(e),i.m_angularVelocity=a,o.m_linearVelocity.SetV(m),o.m_angularVelocity=l},C.prototype.SolvePositionConstraints=function(){var t,e=this.m_bodyA,a=this.m_bodyB,m=e.m_sweep.c,l=e.m_sweep.a,c=a.m_sweep.c,_=a.m_sweep.a,h=0,p=0,y=0,u=h=t=0,x=0;p=!1;var f=0,d=o.FromAngle(l),b=o.FromAngle(_);t=d,x=this.m_localAnchor1.x-this.m_localCenterA.x;var v=this.m_localAnchor1.y-this.m_localCenterA.y;if(h=t.col1.x*x+t.col2.x*v,v=t.col1.y*x+t.col2.y*v,x=h,t=b,b=this.m_localAnchor2.x-this.m_localCenterB.x,y=this.m_localAnchor2.y-this.m_localCenterB.y,h=t.col1.x*b+t.col2.x*y,y=t.col1.y*b+t.col2.y*y,b=h,t=c.x+b-m.x-x,h=c.y+y-m.y-v,this.m_enableLimit){this.m_axis=n.MulMV(d,this.m_localXAxis1),this.m_a1=(t+x)*this.m_axis.y-(h+v)*this.m_axis.x,this.m_a2=b*this.m_axis.y-y*this.m_axis.x;var C=this.m_axis.x*t+this.m_axis.y*h;n.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*i.b2_linearSlop?(f=n.Clamp(C,-i.b2_maxLinearCorrection,i.b2_maxLinearCorrection),u=n.Abs(C),p=!0):C<=this.m_lowerTranslation?(f=n.Clamp(C-this.m_lowerTranslation+i.b2_linearSlop,-i.b2_maxLinearCorrection,0),u=this.m_lowerTranslation-C,p=!0):C>=this.m_upperTranslation&&(f=n.Clamp(C-this.m_upperTranslation+i.b2_linearSlop,0,i.b2_maxLinearCorrection),u=C-this.m_upperTranslation,p=!0)}return this.m_perp=n.MulMV(d,this.m_localYAxis1),this.m_s1=(t+x)*this.m_perp.y-(h+v)*this.m_perp.x,this.m_s2=b*this.m_perp.y-y*this.m_perp.x,d=new r,v=this.m_perp.x*t+this.m_perp.y*h,b=_-l-this.m_refAngle,u=n.Max(u,n.Abs(v)),x=n.Abs(b),p?(p=this.m_invMassA,y=this.m_invMassB,t=this.m_invIA,h=this.m_invIB,this.m_K.col1.x=p+y+t*this.m_s1*this.m_s1+h*this.m_s2*this.m_s2,this.m_K.col1.y=t*this.m_s1+h*this.m_s2,this.m_K.col1.z=t*this.m_s1*this.m_a1+h*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=t+h,this.m_K.col2.z=t*this.m_a1+h*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=p+y+t*this.m_a1*this.m_a1+h*this.m_a2*this.m_a2,this.m_K.Solve33(d,-v,-b,-f)):(p=this.m_invMassA,y=this.m_invMassB,t=this.m_invIA,h=this.m_invIB,f=t*this.m_s1+h*this.m_s2,C=t+h,this.m_K.col1.Set(p+y+t*this.m_s1*this.m_s1+h*this.m_s2*this.m_s2,f,0),this.m_K.col2.Set(f,C,0),f=this.m_K.Solve22(new s,-v,-b),d.x=f.x,d.y=f.y,d.z=0),f=d.x*this.m_perp.x+d.z*this.m_axis.x,p=d.x*this.m_perp.y+d.z*this.m_axis.y,v=d.x*this.m_s1+d.y+d.z*this.m_a1,d=d.x*this.m_s2+d.y+d.z*this.m_a2,m.x-=this.m_invMassA*f,m.y-=this.m_invMassA*p,l-=this.m_invIA*v,c.x+=this.m_invMassB*f,c.y+=this.m_invMassB*p,_+=this.m_invIB*d,e.m_sweep.a=l,a.m_sweep.a=_,e.SynchronizeTransform(),a.SynchronizeTransform(),u<=i.b2_linearSlop&&x<=i.b2_angularSlop},t.inherit(A,t.Dynamics.Joints.b2JointDef),A.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,A.b2PrismaticJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new s,this.localAnchorB=new s,this.localAxisA=new s},A.prototype.b2PrismaticJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_prismaticJoint,this.localAxisA.Set(1,0),this.referenceAngle=0,this.enableLimit=!1,this.upperTranslation=this.lowerTranslation=0,this.enableMotor=!1,this.motorSpeed=this.maxMotorForce=0},A.prototype.Initialize=function(t,i,o,e){this.bodyA=t,this.bodyB=i,this.localAnchorA=this.bodyA.GetLocalPoint(o),this.localAnchorB=this.bodyB.GetLocalPoint(o),this.localAxisA=this.bodyA.GetLocalVector(e),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},t.inherit(w,t.Dynamics.Joints.b2Joint),w.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,w.b2PulleyJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new s,this.m_groundAnchor2=new s,this.m_localAnchor1=new s,this.m_localAnchor2=new s,this.m_u1=new s,this.m_u2=new s},w.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},w.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},w.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*this.m_impulse*this.m_u2.x,t*this.m_impulse*this.m_u2.y)},w.prototype.GetReactionTorque=function(){return 0},w.prototype.GetGroundAnchorA=function(){var t=this.m_ground.m_xf.position.Copy();return t.Add(this.m_groundAnchor1),t},w.prototype.GetGroundAnchorB=function(){var t=this.m_ground.m_xf.position.Copy();return t.Add(this.m_groundAnchor2),t},w.prototype.GetLength1=function(){var t=this.m_bodyA.GetWorldPoint(this.m_localAnchor1),i=t.x-(this.m_ground.m_xf.position.x+this.m_groundAnchor1.x);return t=t.y-(this.m_ground.m_xf.position.y+this.m_groundAnchor1.y),Math.sqrt(i*i+t*t)},w.prototype.GetLength2=function(){var t=this.m_bodyB.GetWorldPoint(this.m_localAnchor2),i=t.x-(this.m_ground.m_xf.position.x+this.m_groundAnchor2.x);return t=t.y-(this.m_ground.m_xf.position.y+this.m_groundAnchor2.y),Math.sqrt(i*i+t*t)},w.prototype.GetRatio=function(){return this.m_ratio},w.prototype.b2PulleyJoint=function(t){this.__super.b2Joint.call(this,t),this.m_ground=this.m_bodyA.m_world.m_groundBody,this.m_groundAnchor1.x=t.groundAnchorA.x-this.m_ground.m_xf.position.x,this.m_groundAnchor1.y=t.groundAnchorA.y-this.m_ground.m_xf.position.y,this.m_groundAnchor2.x=t.groundAnchorB.x-this.m_ground.m_xf.position.x,this.m_groundAnchor2.y=t.groundAnchorB.y-this.m_ground.m_xf.position.y,this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_ratio=t.ratio,this.m_constant=t.lengthA+this.m_ratio*t.lengthB,this.m_maxLength1=n.Min(t.maxLengthA,this.m_constant-this.m_ratio*w.b2_minPulleyLength),this.m_maxLength2=n.Min(t.maxLengthB,(this.m_constant-w.b2_minPulleyLength)/this.m_ratio),this.m_limitImpulse2=this.m_limitImpulse1=this.m_impulse=0},w.prototype.InitVelocityConstraints=function(t){var o,e=this.m_bodyA,n=this.m_bodyB;o=e.m_xf.R;var s=this.m_localAnchor1.x-e.m_sweep.localCenter.x,r=this.m_localAnchor1.y-e.m_sweep.localCenter.y,a=o.col1.x*s+o.col2.x*r;r=o.col1.y*s+o.col2.y*r,s=a,o=n.m_xf.R;var m=this.m_localAnchor2.x-n.m_sweep.localCenter.x,l=this.m_localAnchor2.y-n.m_sweep.localCenter.y;a=o.col1.x*m+o.col2.x*l,l=o.col1.y*m+o.col2.y*l,m=a,o=n.m_sweep.c.x+m,a=n.m_sweep.c.y+l;var c=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,_=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y;this.m_u1.Set(e.m_sweep.c.x+s-(this.m_ground.m_xf.position.x+this.m_groundAnchor1.x),e.m_sweep.c.y+r-(this.m_ground.m_xf.position.y+this.m_groundAnchor1.y)),this.m_u2.Set(o-c,a-_),o=this.m_u1.Length(),a=this.m_u2.Length(),o>i.b2_linearSlop?this.m_u1.Multiply(1/o):this.m_u1.SetZero(),a>i.b2_linearSlop?this.m_u2.Multiply(1/a):this.m_u2.SetZero(),this.m_constant-o-this.m_ratio*a>0?(this.m_state=y.e_inactiveLimit,this.m_impulse=0):this.m_state=y.e_atUpperLimit,o<this.m_maxLength1?(this.m_limitState1=y.e_inactiveLimit,this.m_limitImpulse1=0):this.m_limitState1=y.e_atUpperLimit,a<this.m_maxLength2?(this.m_limitState2=y.e_inactiveLimit,this.m_limitImpulse2=0):this.m_limitState2=y.e_atUpperLimit,o=s*this.m_u1.y-r*this.m_u1.x,a=m*this.m_u2.y-l*this.m_u2.x,this.m_limitMass1=e.m_invMass+e.m_invI*o*o,this.m_limitMass2=n.m_invMass+n.m_invI*a*a,this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2,this.m_limitMass1=1/this.m_limitMass1,this.m_limitMass2=1/this.m_limitMass2,this.m_pulleyMass=1/this.m_pulleyMass,t.warmStarting?(this.m_impulse*=t.dtRatio,this.m_limitImpulse1*=t.dtRatio,this.m_limitImpulse2*=t.dtRatio,t=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.x,o=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.y,a=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.x,c=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.y,e.m_linearVelocity.x+=e.m_invMass*t,e.m_linearVelocity.y+=e.m_invMass*o,e.m_angularVelocity+=e.m_invI*(s*o-r*t),n.m_linearVelocity.x+=n.m_invMass*a,n.m_linearVelocity.y+=n.m_invMass*c,n.m_angularVelocity+=n.m_invI*(m*c-l*a)):this.m_limitImpulse2=this.m_limitImpulse1=this.m_impulse=0},w.prototype.SolveVelocityConstraints=function(){var t,i=this.m_bodyA,o=this.m_bodyB;t=i.m_xf.R;var e=this.m_localAnchor1.x-i.m_sweep.localCenter.x,s=this.m_localAnchor1.y-i.m_sweep.localCenter.y,r=t.col1.x*e+t.col2.x*s;s=t.col1.y*e+t.col2.y*s,e=r,t=o.m_xf.R;var a=this.m_localAnchor2.x-o.m_sweep.localCenter.x,m=this.m_localAnchor2.y-o.m_sweep.localCenter.y;r=t.col1.x*a+t.col2.x*m,m=t.col1.y*a+t.col2.y*m,a=r;var l=r=t=0,c=0;t=c=t=c=l=r=t=0,this.m_state==y.e_atUpperLimit&&(t=i.m_linearVelocity.x+-i.m_angularVelocity*s,r=i.m_linearVelocity.y+i.m_angularVelocity*e,l=o.m_linearVelocity.x+-o.m_angularVelocity*m,c=o.m_linearVelocity.y+o.m_angularVelocity*a,t=-(this.m_u1.x*t+this.m_u1.y*r)-this.m_ratio*(this.m_u2.x*l+this.m_u2.y*c),c=this.m_pulleyMass*-t,t=this.m_impulse,this.m_impulse=n.Max(0,this.m_impulse+c),t=-(c=this.m_impulse-t)*this.m_u1.x,r=-c*this.m_u1.y,l=-this.m_ratio*c*this.m_u2.x,c=-this.m_ratio*c*this.m_u2.y,i.m_linearVelocity.x+=i.m_invMass*t,i.m_linearVelocity.y+=i.m_invMass*r,i.m_angularVelocity+=i.m_invI*(e*r-s*t),o.m_linearVelocity.x+=o.m_invMass*l,o.m_linearVelocity.y+=o.m_invMass*c,o.m_angularVelocity+=o.m_invI*(a*c-m*l)),this.m_limitState1==y.e_atUpperLimit&&(t=i.m_linearVelocity.x+-i.m_angularVelocity*s,r=i.m_linearVelocity.y+i.m_angularVelocity*e,t=-(this.m_u1.x*t+this.m_u1.y*r),c=-this.m_limitMass1*t,t=this.m_limitImpulse1,this.m_limitImpulse1=n.Max(0,this.m_limitImpulse1+c),t=-(c=this.m_limitImpulse1-t)*this.m_u1.x,r=-c*this.m_u1.y,i.m_linearVelocity.x+=i.m_invMass*t,i.m_linearVelocity.y+=i.m_invMass*r,i.m_angularVelocity+=i.m_invI*(e*r-s*t)),this.m_limitState2==y.e_atUpperLimit&&(l=o.m_linearVelocity.x+-o.m_angularVelocity*m,c=o.m_linearVelocity.y+o.m_angularVelocity*a,t=-(this.m_u2.x*l+this.m_u2.y*c),c=-this.m_limitMass2*t,t=this.m_limitImpulse2,this.m_limitImpulse2=n.Max(0,this.m_limitImpulse2+c),l=-(c=this.m_limitImpulse2-t)*this.m_u2.x,c=-c*this.m_u2.y,o.m_linearVelocity.x+=o.m_invMass*l,o.m_linearVelocity.y+=o.m_invMass*c,o.m_angularVelocity+=o.m_invI*(a*c-m*l))},w.prototype.SolvePositionConstraints=function(){var t,o=this.m_bodyA,e=this.m_bodyB,s=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,r=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,a=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,m=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,l=0,c=0,_=0,h=0,p=t=0,u=0,x=0,f=p=x=t=p=t=0;return this.m_state==y.e_atUpperLimit&&(t=o.m_xf.R,l=this.m_localAnchor1.x-o.m_sweep.localCenter.x,c=this.m_localAnchor1.y-o.m_sweep.localCenter.y,p=t.col1.x*l+t.col2.x*c,c=t.col1.y*l+t.col2.y*c,l=p,t=e.m_xf.R,_=this.m_localAnchor2.x-e.m_sweep.localCenter.x,h=this.m_localAnchor2.y-e.m_sweep.localCenter.y,p=t.col1.x*_+t.col2.x*h,h=t.col1.y*_+t.col2.y*h,_=p,t=o.m_sweep.c.x+l,p=o.m_sweep.c.y+c,u=e.m_sweep.c.x+_,x=e.m_sweep.c.y+h,this.m_u1.Set(t-s,p-r),this.m_u2.Set(u-a,x-m),t=this.m_u1.Length(),p=this.m_u2.Length(),t>i.b2_linearSlop?this.m_u1.Multiply(1/t):this.m_u1.SetZero(),p>i.b2_linearSlop?this.m_u2.Multiply(1/p):this.m_u2.SetZero(),t=this.m_constant-t-this.m_ratio*p,f=n.Max(f,-t),t=n.Clamp(t+i.b2_linearSlop,-i.b2_maxLinearCorrection,0),t=-(x=-this.m_pulleyMass*t)*this.m_u1.x,p=-x*this.m_u1.y,u=-this.m_ratio*x*this.m_u2.x,x=-this.m_ratio*x*this.m_u2.y,o.m_sweep.c.x+=o.m_invMass*t,o.m_sweep.c.y+=o.m_invMass*p,o.m_sweep.a+=o.m_invI*(l*p-c*t),e.m_sweep.c.x+=e.m_invMass*u,e.m_sweep.c.y+=e.m_invMass*x,e.m_sweep.a+=e.m_invI*(_*x-h*u),o.SynchronizeTransform(),e.SynchronizeTransform()),this.m_limitState1==y.e_atUpperLimit&&(t=o.m_xf.R,l=this.m_localAnchor1.x-o.m_sweep.localCenter.x,c=this.m_localAnchor1.y-o.m_sweep.localCenter.y,p=t.col1.x*l+t.col2.x*c,c=t.col1.y*l+t.col2.y*c,l=p,t=o.m_sweep.c.x+l,p=o.m_sweep.c.y+c,this.m_u1.Set(t-s,p-r),(t=this.m_u1.Length())>i.b2_linearSlop?(this.m_u1.x*=1/t,this.m_u1.y*=1/t):this.m_u1.SetZero(),t=this.m_maxLength1-t,f=n.Max(f,-t),t=n.Clamp(t+i.b2_linearSlop,-i.b2_maxLinearCorrection,0),t=-(x=-this.m_limitMass1*t)*this.m_u1.x,p=-x*this.m_u1.y,o.m_sweep.c.x+=o.m_invMass*t,o.m_sweep.c.y+=o.m_invMass*p,o.m_sweep.a+=o.m_invI*(l*p-c*t),o.SynchronizeTransform()),this.m_limitState2==y.e_atUpperLimit&&(t=e.m_xf.R,_=this.m_localAnchor2.x-e.m_sweep.localCenter.x,h=this.m_localAnchor2.y-e.m_sweep.localCenter.y,p=t.col1.x*_+t.col2.x*h,h=t.col1.y*_+t.col2.y*h,_=p,u=e.m_sweep.c.x+_,x=e.m_sweep.c.y+h,this.m_u2.Set(u-a,x-m),(p=this.m_u2.Length())>i.b2_linearSlop?(this.m_u2.x*=1/p,this.m_u2.y*=1/p):this.m_u2.SetZero(),t=this.m_maxLength2-p,f=n.Max(f,-t),t=n.Clamp(t+i.b2_linearSlop,-i.b2_maxLinearCorrection,0),u=-(x=-this.m_limitMass2*t)*this.m_u2.x,x=-x*this.m_u2.y,e.m_sweep.c.x+=e.m_invMass*u,e.m_sweep.c.y+=e.m_invMass*x,e.m_sweep.a+=e.m_invI*(_*x-h*u),e.SynchronizeTransform()),f<i.b2_linearSlop},t.postDefs.push(function(){t.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength=2}),t.inherit(S,t.Dynamics.Joints.b2JointDef),S.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,S.b2PulleyJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.groundAnchorA=new s,this.groundAnchorB=new s,this.localAnchorA=new s,this.localAnchorB=new s},S.prototype.b2PulleyJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_pulleyJoint,this.groundAnchorA.Set(-1,1),this.groundAnchorB.Set(1,1),this.localAnchorA.Set(-1,0),this.localAnchorB.Set(1,0),this.maxLengthB=this.lengthB=this.maxLengthA=this.lengthA=0,this.ratio=1,this.collideConnected=!0},S.prototype.Initialize=function(t,i,o,e,n,s,r){void 0===r&&(r=0),this.bodyA=t,this.bodyB=i,this.groundAnchorA.SetV(o),this.groundAnchorB.SetV(e),this.localAnchorA=this.bodyA.GetLocalPoint(n),this.localAnchorB=this.bodyB.GetLocalPoint(s),t=n.x-o.x,o=n.y-o.y,this.lengthA=Math.sqrt(t*t+o*o),o=s.x-e.x,e=s.y-e.y,this.lengthB=Math.sqrt(o*o+e*e),this.ratio=r,r=this.lengthA+this.ratio*this.lengthB,this.maxLengthA=r-this.ratio*w.b2_minPulleyLength,this.maxLengthB=(r-w.b2_minPulleyLength)/this.ratio},t.inherit(g,t.Dynamics.Joints.b2Joint),g.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,g.b2RevoluteJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new o,this.K1=new o,this.K2=new o,this.K3=new o,this.impulse3=new r,this.impulse2=new s,this.reduced=new s,this.m_localAnchor1=new s,this.m_localAnchor2=new s,this.m_impulse=new r,this.m_mass=new e},g.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},g.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},g.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*this.m_impulse.x,t*this.m_impulse.y)},g.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.z},g.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},g.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},g.prototype.IsLimitEnabled=function(){return this.m_enableLimit},g.prototype.EnableLimit=function(t){this.m_enableLimit=t},g.prototype.GetLowerLimit=function(){return this.m_lowerAngle},g.prototype.GetUpperLimit=function(){return this.m_upperAngle},g.prototype.SetLimits=function(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.m_lowerAngle=t,this.m_upperAngle=i},g.prototype.IsMotorEnabled=function(){return this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor},g.prototype.EnableMotor=function(t){this.m_enableMotor=t},g.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},g.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},g.prototype.SetMaxMotorTorque=function(t){void 0===t&&(t=0),this.m_maxMotorTorque=t},g.prototype.GetMotorTorque=function(){return this.m_maxMotorTorque},g.prototype.b2RevoluteJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=y.e_inactiveLimit},g.prototype.InitVelocityConstraints=function(t){var o,e=this.m_bodyA,s=this.m_bodyB,r=0;o=e.m_xf.R;var a=this.m_localAnchor1.x-e.m_sweep.localCenter.x,m=this.m_localAnchor1.y-e.m_sweep.localCenter.y;r=o.col1.x*a+o.col2.x*m,m=o.col1.y*a+o.col2.y*m,a=r,o=s.m_xf.R;var l=this.m_localAnchor2.x-s.m_sweep.localCenter.x,c=this.m_localAnchor2.y-s.m_sweep.localCenter.y;r=o.col1.x*l+o.col2.x*c,c=o.col1.y*l+o.col2.y*c,l=r,o=e.m_invMass,r=s.m_invMass;var _=e.m_invI,h=s.m_invI;if(this.m_mass.col1.x=o+r+m*m*_+c*c*h,this.m_mass.col2.x=-m*a*_-c*l*h,this.m_mass.col3.x=-m*_-c*h,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=o+r+a*a*_+l*l*h,this.m_mass.col3.y=a*_+l*h,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=_+h,this.m_motorMass=1/(_+h),0==this.m_enableMotor&&(this.m_motorImpulse=0),this.m_enableLimit){var p=s.m_sweep.a-e.m_sweep.a-this.m_referenceAngle;n.Abs(this.m_upperAngle-this.m_lowerAngle)<2*i.b2_angularSlop?this.m_limitState=y.e_equalLimits:p<=this.m_lowerAngle?(this.m_limitState!=y.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=y.e_atLowerLimit):p>=this.m_upperAngle?(this.m_limitState!=y.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=y.e_atUpperLimit):(this.m_limitState=y.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=y.e_inactiveLimit;t.warmStarting?(this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_motorImpulse*=t.dtRatio,t=this.m_impulse.x,p=this.m_impulse.y,e.m_linearVelocity.x-=o*t,e.m_linearVelocity.y-=o*p,e.m_angularVelocity-=_*(a*p-m*t+this.m_motorImpulse+this.m_impulse.z),s.m_linearVelocity.x+=r*t,s.m_linearVelocity.y+=r*p,s.m_angularVelocity+=h*(l*p-c*t+this.m_motorImpulse+this.m_impulse.z)):(this.m_impulse.SetZero(),this.m_motorImpulse=0)},g.prototype.SolveVelocityConstraints=function(t){var i=this.m_bodyA,o=this.m_bodyB,e=0,s=e=0,r=0,a=0,m=0,l=i.m_linearVelocity,c=i.m_angularVelocity,_=o.m_linearVelocity,h=o.m_angularVelocity,p=i.m_invMass,u=o.m_invMass,x=i.m_invI,f=o.m_invI;if(this.m_enableMotor&&this.m_limitState!=y.e_equalLimits&&(s=this.m_motorMass*-(h-c-this.m_motorSpeed),r=this.m_motorImpulse,a=t.dt*this.m_maxMotorTorque,this.m_motorImpulse=n.Clamp(this.m_motorImpulse+s,-a,a),c-=x*(s=this.m_motorImpulse-r),h+=f*s),this.m_enableLimit&&this.m_limitState!=y.e_inactiveLimit){t=i.m_xf.R,s=this.m_localAnchor1.x-i.m_sweep.localCenter.x,r=this.m_localAnchor1.y-i.m_sweep.localCenter.y,e=t.col1.x*s+t.col2.x*r,r=t.col1.y*s+t.col2.y*r,s=e,t=o.m_xf.R,a=this.m_localAnchor2.x-o.m_sweep.localCenter.x,m=this.m_localAnchor2.y-o.m_sweep.localCenter.y,e=t.col1.x*a+t.col2.x*m,m=t.col1.y*a+t.col2.y*m,a=e,t=_.x+-h*m-l.x- -c*r;var d=_.y+h*a-l.y-c*s;this.m_mass.Solve33(this.impulse3,-t,-d,-(h-c)),this.m_limitState==y.e_equalLimits?this.m_impulse.Add(this.impulse3):this.m_limitState==y.e_atLowerLimit?(e=this.m_impulse.z+this.impulse3.z)<0&&(this.m_mass.Solve22(this.reduced,-t,-d),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0):this.m_limitState==y.e_atUpperLimit&&(e=this.m_impulse.z+this.impulse3.z)>0&&(this.m_mass.Solve22(this.reduced,-t,-d),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0),l.x-=p*this.impulse3.x,l.y-=p*this.impulse3.y,c-=x*(s*this.impulse3.y-r*this.impulse3.x+this.impulse3.z),_.x+=u*this.impulse3.x,_.y+=u*this.impulse3.y,h+=f*(a*this.impulse3.y-m*this.impulse3.x+this.impulse3.z)}else t=i.m_xf.R,s=this.m_localAnchor1.x-i.m_sweep.localCenter.x,r=this.m_localAnchor1.y-i.m_sweep.localCenter.y,e=t.col1.x*s+t.col2.x*r,r=t.col1.y*s+t.col2.y*r,s=e,t=o.m_xf.R,a=this.m_localAnchor2.x-o.m_sweep.localCenter.x,m=this.m_localAnchor2.y-o.m_sweep.localCenter.y,e=t.col1.x*a+t.col2.x*m,m=t.col1.y*a+t.col2.y*m,a=e,this.m_mass.Solve22(this.impulse2,-(_.x+-h*m-l.x- -c*r),-(_.y+h*a-l.y-c*s)),this.m_impulse.x+=this.impulse2.x,this.m_impulse.y+=this.impulse2.y,l.x-=p*this.impulse2.x,l.y-=p*this.impulse2.y,c-=x*(s*this.impulse2.y-r*this.impulse2.x),_.x+=u*this.impulse2.x,_.y+=u*this.impulse2.y,h+=f*(a*this.impulse2.y-m*this.impulse2.x);i.m_linearVelocity.SetV(l),i.m_angularVelocity=c,o.m_linearVelocity.SetV(_),o.m_angularVelocity=h},g.prototype.SolvePositionConstraints=function(){var t,o=0,e=this.m_bodyA,s=this.m_bodyB,r=0,a=t=0,m=0,l=0;if(this.m_enableLimit&&this.m_limitState!=y.e_inactiveLimit){o=s.m_sweep.a-e.m_sweep.a-this.m_referenceAngle;var c=0;this.m_limitState==y.e_equalLimits?(o=n.Clamp(o-this.m_lowerAngle,-i.b2_maxAngularCorrection,i.b2_maxAngularCorrection),c=-this.m_motorMass*o,r=n.Abs(o)):this.m_limitState==y.e_atLowerLimit?(r=-(o-=this.m_lowerAngle),o=n.Clamp(o+i.b2_angularSlop,-i.b2_maxAngularCorrection,0),c=-this.m_motorMass*o):this.m_limitState==y.e_atUpperLimit&&(r=o-=this.m_upperAngle,o=n.Clamp(o-i.b2_angularSlop,0,i.b2_maxAngularCorrection),c=-this.m_motorMass*o),e.m_sweep.a-=e.m_invI*c,s.m_sweep.a+=s.m_invI*c,e.SynchronizeTransform(),s.SynchronizeTransform()}t=e.m_xf.R,c=this.m_localAnchor1.x-e.m_sweep.localCenter.x,o=this.m_localAnchor1.y-e.m_sweep.localCenter.y,a=t.col1.x*c+t.col2.x*o,o=t.col1.y*c+t.col2.y*o,c=a,t=s.m_xf.R;var _=this.m_localAnchor2.x-s.m_sweep.localCenter.x,h=this.m_localAnchor2.y-s.m_sweep.localCenter.y;a=t.col1.x*_+t.col2.x*h,h=t.col1.y*_+t.col2.y*h,_=a;var p=(m=s.m_sweep.c.x+_-e.m_sweep.c.x-c)*m+(l=s.m_sweep.c.y+h-e.m_sweep.c.y-o)*l;t=Math.sqrt(p),a=e.m_invMass;var u=s.m_invMass,x=e.m_invI,f=s.m_invI,d=10*i.b2_linearSlop;return p>d*d&&(m=(p=1/(a+u))*-m,l=p*-l,e.m_sweep.c.x-=.5*a*m,e.m_sweep.c.y-=.5*a*l,s.m_sweep.c.x+=.5*u*m,s.m_sweep.c.y+=.5*u*l,m=s.m_sweep.c.x+_-e.m_sweep.c.x-c,l=s.m_sweep.c.y+h-e.m_sweep.c.y-o),this.K1.col1.x=a+u,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=a+u,this.K2.col1.x=x*o*o,this.K2.col2.x=-x*c*o,this.K2.col1.y=-x*c*o,this.K2.col2.y=x*c*c,this.K3.col1.x=f*h*h,this.K3.col2.x=-f*_*h,this.K3.col1.y=-f*_*h,this.K3.col2.y=f*_*_,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.AddM(this.K3),this.K.Solve(g.tImpulse,-m,-l),m=g.tImpulse.x,l=g.tImpulse.y,e.m_sweep.c.x-=e.m_invMass*m,e.m_sweep.c.y-=e.m_invMass*l,e.m_sweep.a-=e.m_invI*(c*l-o*m),s.m_sweep.c.x+=s.m_invMass*m,s.m_sweep.c.y+=s.m_invMass*l,s.m_sweep.a+=s.m_invI*(_*l-h*m),e.SynchronizeTransform(),s.SynchronizeTransform(),t<=i.b2_linearSlop&&r<=i.b2_angularSlop},t.postDefs.push(function(){t.Dynamics.Joints.b2RevoluteJoint.tImpulse=new s}),t.inherit(B,t.Dynamics.Joints.b2JointDef),B.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,B.b2RevoluteJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new s,this.localAnchorB=new s},B.prototype.b2RevoluteJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_revoluteJoint,this.localAnchorA.Set(0,0),this.localAnchorB.Set(0,0),this.motorSpeed=this.maxMotorTorque=this.upperAngle=this.lowerAngle=this.referenceAngle=0,this.enableMotor=this.enableLimit=!1},B.prototype.Initialize=function(t,i,o){this.bodyA=t,this.bodyB=i,this.localAnchorA=this.bodyA.GetLocalPoint(o),this.localAnchorB=this.bodyB.GetLocalPoint(o),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},t.inherit(M,t.Dynamics.Joints.b2Joint),M.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,M.b2WeldJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new s,this.m_localAnchorB=new s,this.m_impulse=new r,this.m_mass=new e},M.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},M.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},M.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*this.m_impulse.x,t*this.m_impulse.y)},M.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.z},M.prototype.b2WeldJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchorA.SetV(t.localAnchorA),this.m_localAnchorB.SetV(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_mass=new e},M.prototype.InitVelocityConstraints=function(t){var i,o=0,e=this.m_bodyA,n=this.m_bodyB;i=e.m_xf.R;var s=this.m_localAnchorA.x-e.m_sweep.localCenter.x,r=this.m_localAnchorA.y-e.m_sweep.localCenter.y;o=i.col1.x*s+i.col2.x*r,r=i.col1.y*s+i.col2.y*r,s=o,i=n.m_xf.R;var a=this.m_localAnchorB.x-n.m_sweep.localCenter.x,m=this.m_localAnchorB.y-n.m_sweep.localCenter.y;o=i.col1.x*a+i.col2.x*m,m=i.col1.y*a+i.col2.y*m,a=o,i=e.m_invMass,o=n.m_invMass;var l=e.m_invI,c=n.m_invI;this.m_mass.col1.x=i+o+r*r*l+m*m*c,this.m_mass.col2.x=-r*s*l-m*a*c,this.m_mass.col3.x=-r*l-m*c,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=i+o+s*s*l+a*a*c,this.m_mass.col3.y=s*l+a*c,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=l+c,t.warmStarting?(this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_impulse.z*=t.dtRatio,e.m_linearVelocity.x-=i*this.m_impulse.x,e.m_linearVelocity.y-=i*this.m_impulse.y,e.m_angularVelocity-=l*(s*this.m_impulse.y-r*this.m_impulse.x+this.m_impulse.z),n.m_linearVelocity.x+=o*this.m_impulse.x,n.m_linearVelocity.y+=o*this.m_impulse.y,n.m_angularVelocity+=c*(a*this.m_impulse.y-m*this.m_impulse.x+this.m_impulse.z)):this.m_impulse.SetZero()},M.prototype.SolveVelocityConstraints=function(){var t,i=0,o=this.m_bodyA,e=this.m_bodyB,n=o.m_linearVelocity,s=o.m_angularVelocity,a=e.m_linearVelocity,m=e.m_angularVelocity,l=o.m_invMass,c=e.m_invMass,_=o.m_invI,h=e.m_invI;t=o.m_xf.R;var p=this.m_localAnchorA.x-o.m_sweep.localCenter.x,y=this.m_localAnchorA.y-o.m_sweep.localCenter.y;i=t.col1.x*p+t.col2.x*y,y=t.col1.y*p+t.col2.y*y,p=i,t=e.m_xf.R;var u=this.m_localAnchorB.x-e.m_sweep.localCenter.x,x=this.m_localAnchorB.y-e.m_sweep.localCenter.y;i=t.col1.x*u+t.col2.x*x,x=t.col1.y*u+t.col2.y*x,u=i,t=a.x-m*x-n.x+s*y,i=a.y+m*u-n.y-s*p;var f=m-s,d=new r;this.m_mass.Solve33(d,-t,-i,-f),this.m_impulse.Add(d),n.x-=l*d.x,n.y-=l*d.y,s-=_*(p*d.y-y*d.x+d.z),a.x+=c*d.x,a.y+=c*d.y,m+=h*(u*d.y-x*d.x+d.z),o.m_angularVelocity=s,e.m_angularVelocity=m},M.prototype.SolvePositionConstraints=function(){var t,o=0,e=this.m_bodyA,s=this.m_bodyB;t=e.m_xf.R;var a=this.m_localAnchorA.x-e.m_sweep.localCenter.x,m=this.m_localAnchorA.y-e.m_sweep.localCenter.y;o=t.col1.x*a+t.col2.x*m,m=t.col1.y*a+t.col2.y*m,a=o,t=s.m_xf.R;var l=this.m_localAnchorB.x-s.m_sweep.localCenter.x,c=this.m_localAnchorB.y-s.m_sweep.localCenter.y;o=t.col1.x*l+t.col2.x*c,c=t.col1.y*l+t.col2.y*c,l=o,t=e.m_invMass,o=s.m_invMass;var _=e.m_invI,h=s.m_invI,p=s.m_sweep.c.x+l-e.m_sweep.c.x-a,y=s.m_sweep.c.y+c-e.m_sweep.c.y-m,u=s.m_sweep.a-e.m_sweep.a-this.m_referenceAngle,x=10*i.b2_linearSlop,f=Math.sqrt(p*p+y*y),d=n.Abs(u);return f>x&&(_*=1,h*=1),this.m_mass.col1.x=t+o+m*m*_+c*c*h,this.m_mass.col2.x=-m*a*_-c*l*h,this.m_mass.col3.x=-m*_-c*h,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=t+o+a*a*_+l*l*h,this.m_mass.col3.y=a*_+l*h,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=_+h,x=new r,this.m_mass.Solve33(x,-p,-y,-u),e.m_sweep.c.x-=t*x.x,e.m_sweep.c.y-=t*x.y,e.m_sweep.a-=_*(a*x.y-m*x.x+x.z),s.m_sweep.c.x+=o*x.x,s.m_sweep.c.y+=o*x.y,s.m_sweep.a+=h*(l*x.y-c*x.x+x.z),e.SynchronizeTransform(),s.SynchronizeTransform(),f<=i.b2_linearSlop&&d<=i.b2_angularSlop},t.inherit(V,t.Dynamics.Joints.b2JointDef),V.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,V.b2WeldJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new s,this.localAnchorB=new s},V.prototype.b2WeldJointDef=function(){this.__super.b2JointDef.call(this),this.type=y.e_weldJoint,this.referenceAngle=0},V.prototype.Initialize=function(t,i,o){this.bodyA=t,this.bodyB=i,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(o)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(o)),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}(),function(){var i=t.Dynamics.b2DebugDraw;i.b2DebugDraw=function(){this.m_xformScale=this.m_fillAlpha=this.m_alpha=this.m_lineThickness=this.m_drawScale=1;var t=this;this.m_sprite={graphics:{clear:function(){t.m_ctx.clearRect(0,0,t.m_ctx.canvas.width,t.m_ctx.canvas.height)}}}},i.prototype._color=function(t,i){return"rgba("+((16711680&t)>>16)+","+((65280&t)>>8)+","+(255&t)+","+i+")"},i.prototype.b2DebugDraw=function(){this.m_drawFlags=0},i.prototype.SetFlags=function(t){void 0===t&&(t=0),this.m_drawFlags=t},i.prototype.GetFlags=function(){return this.m_drawFlags},i.prototype.AppendFlags=function(t){void 0===t&&(t=0),this.m_drawFlags|=t},i.prototype.ClearFlags=function(t){void 0===t&&(t=0),this.m_drawFlags&=~t},i.prototype.SetSprite=function(t){this.m_ctx=t},i.prototype.GetSprite=function(){return this.m_ctx},i.prototype.SetDrawScale=function(t){void 0===t&&(t=0),this.m_drawScale=t},i.prototype.GetDrawScale=function(){return this.m_drawScale},i.prototype.SetLineThickness=function(t){void 0===t&&(t=0),this.m_lineThickness=t,this.m_ctx.strokeWidth=t},i.prototype.GetLineThickness=function(){return this.m_lineThickness},i.prototype.SetAlpha=function(t){void 0===t&&(t=0),this.m_alpha=t},i.prototype.GetAlpha=function(){return this.m_alpha},i.prototype.SetFillAlpha=function(t){void 0===t&&(t=0),this.m_fillAlpha=t},i.prototype.GetFillAlpha=function(){return this.m_fillAlpha},i.prototype.SetXFormScale=function(t){void 0===t&&(t=0),this.m_xformScale=t},i.prototype.GetXFormScale=function(){return this.m_xformScale},i.prototype.DrawPolygon=function(t,i,o){if(i){var e=this.m_ctx,n=this.m_drawScale;for(e.beginPath(),e.strokeStyle=this._color(o.color,this.m_alpha),e.moveTo(t[0].x*n,t[0].y*n),o=1;o<i;o++)e.lineTo(t[o].x*n,t[o].y*n);e.lineTo(t[0].x*n,t[0].y*n),e.closePath(),e.stroke()}},i.prototype.DrawSolidPolygon=function(t,i,o){if(i){var e=this.m_ctx,n=this.m_drawScale;for(e.beginPath(),e.strokeStyle=this._color(o.color,this.m_alpha),e.fillStyle=this._color(o.color,this.m_fillAlpha),e.moveTo(t[0].x*n,t[0].y*n),o=1;o<i;o++)e.lineTo(t[o].x*n,t[o].y*n);e.lineTo(t[0].x*n,t[0].y*n),e.closePath(),e.fill(),e.stroke()}},i.prototype.DrawCircle=function(t,i,o){if(i){var e=this.m_ctx,n=this.m_drawScale;e.beginPath(),e.strokeStyle=this._color(o.color,this.m_alpha),e.arc(t.x*n,t.y*n,i*n,0,2*Math.PI,!0),e.closePath(),e.stroke()}},i.prototype.DrawSolidCircle=function(t,i,o,e){if(i){var n=this.m_ctx,s=this.m_drawScale,r=t.x*s,a=t.y*s;n.moveTo(0,0),n.beginPath(),n.strokeStyle=this._color(e.color,this.m_alpha),n.fillStyle=this._color(e.color,this.m_fillAlpha),n.arc(r,a,i*s,0,2*Math.PI,!0),n.moveTo(r,a),n.lineTo((t.x+o.x*i)*s,(t.y+o.y*i)*s),n.closePath(),n.fill(),n.stroke()}},i.prototype.DrawSegment=function(t,i,o){var e=this.m_ctx,n=this.m_drawScale;e.strokeStyle=this._color(o.color,this.m_alpha),e.beginPath(),e.moveTo(t.x*n,t.y*n),e.lineTo(i.x*n,i.y*n),e.closePath(),e.stroke()},i.prototype.DrawTransform=function(t){var i=this.m_ctx,o=this.m_drawScale;i.beginPath(),i.strokeStyle=this._color(16711680,this.m_alpha),i.moveTo(t.position.x*o,t.position.y*o),i.lineTo((t.position.x+this.m_xformScale*t.R.col1.x)*o,(t.position.y+this.m_xformScale*t.R.col1.y)*o),i.strokeStyle=this._color(65280,this.m_alpha),i.moveTo(t.position.x*o,t.position.y*o),i.lineTo((t.position.x+this.m_xformScale*t.R.col2.x)*o,(t.position.y+this.m_xformScale*t.R.col2.y)*o),i.closePath(),i.stroke()}}(),i=0;i<t.postDefs.length;++i)t.postDefs[i]();delete t.postDefs,exports.Box2D=t;
},{}],"H3S7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.webFactory=void 0;const e=require("../../thirdparty/Box2dWeb-2.1.a.3.min"),{b2Vec2:t}=e.Box2D.Common.Math,{b2BodyDef:o,b2Body:n,b2World:r,b2FixtureDef:s}=e.Box2D.Dynamics,{b2PolygonShape:a}=e.Box2D.Collision.Shapes,y=(e,y,d,i)=>{const x=new r(new t(e.x,e.y)),c=x.CreateBody(new o),p=new a;p.SetAsEdge(new t(y.x,y.y),new t(d.x,d.y));const b=new s;return b.density=i,b.shape=p,c.CreateFixture(b),{name:"box2d-web",createBoxShape(e,t){const o=new a;return o.SetAsBox(e,t),o},createBoxBody(e,t,r,a){const y=new o;y.type=n.b2_dynamicBody,y.position.Set(t,r);const d=x.CreateBody(y),i=new s;i.density=a,i.shape=e,d.CreateFixture(i)},step(e,t,o){x.Step(e,t,o)}}};exports.webFactory=y;
},{"../../thirdparty/Box2dWeb-2.1.a.3.min":"v6Fx"}],"dXjw":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,r,t,o){void 0===o&&(o=t);var i=Object.getOwnPropertyDescriptor(r,t);i&&("get"in i?r.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,o,i)}:function(e,r,t,o){void 0===o&&(o=t),e[o]=r[t]}),r=this&&this.__exportStar||function(r,t){for(var o in r)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||e(t,r,o)};Object.defineProperty(exports,"__esModule",{value:!0}),r(require("./planck"),exports),r(require("./box2d-js"),exports),r(require("./box2d-core"),exports),r(require("./flyover-box2d"),exports),r(require("./html5"),exports),r(require("./web"),exports);
},{"./planck":"Rikx","./box2d-js":"NLPN","./box2d-core":"HNse","./flyover-box2d":"W87g","./html5":"WyQd","./web":"H3S7"}],"fZFK":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&("get"in n?t.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var i={};if(null!=r)for(var n in r)"default"!==n&&Object.prototype.hasOwnProperty.call(r,n)&&e(i,r,n);return t(i,r),i};Object.defineProperty(exports,"__esModule",{value:!0}),exports.tests=void 0;const i=r(require("./testMap"));exports.tests=Object.keys(i).map(e=>i[e]);
},{"./testMap":"dXjw"}],"o2OF":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=this&&this.__exportStar||function(t,r){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(r,i)||e(r,t,i)};Object.defineProperty(exports,"__esModule",{value:!0}),t(require("./types"),exports),t(require("./testRunner"),exports),t(require("./tests"),exports);
},{"./types":"uXNM","./testRunner":"l0Jm","./tests":"fZFK"}],"HJOk":[function(require,module,exports) {
"use strict";function e(){var e,r;const t=navigator.userAgent;let o,i=null!==(e=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i))&&void 0!==e?e:[];if(/trident/i.test(i[1])){return`IE ${(o=null!==(r=/\brv[ :]+(\d+)/g.exec(t))&&void 0!==r?r:[])[1]||""}`}return"Chrome"===i[1]&&null!==(o=t.match(/\bOPR|Edge\/(\d+)/))?`Opera ${o[1]}`:(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(o=t.match(/version\/(\d+)/i))&&i.splice(1,1,o[1]),`${i[0]} ${i[1]}`)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBrowserInfo=void 0,exports.getBrowserInfo=e;
},{}],"QCba":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.runAllTestsAsync=void 0;const e=require(".."),t=require("../testRunner"),n=require("./browserInfo"),o=document.getElementById("start"),r=document.querySelector("tbody"),d=document.getElementById("ratio"),s=document.querySelector("textarea"),a=document.getElementById("copy"),c=(0,t.prepareTests)(e.tests).map(e=>{const t=document.createElement("tr");r.appendChild(t);const n=document.createElement("td"),o=document.createElement("td"),d=document.createElement("td"),s=document.createElement("td"),a=document.createElement("td");n.textContent=e.name,t.appendChild(n),t.appendChild(o),t.appendChild(d),t.appendChild(s),t.appendChild(a);const c=document.createElement("progress");return{row:t,test:e,begin(){a.appendChild(c),c.value=0},progress(e,t){c.value=e,c.max=t},end(e){o.textContent=e.avg.toFixed(2),d.textContent=e.p5.toString(),s.textContent=e.p95.toString(),a.textContent="✓"},final(e){a.textContent=e.toFixed(2),r.appendChild(t)}}});async function l(){d.textContent="";const e=[];for(const n of c){n.begin();const o=await(0,t.runTestAsync)(n.test,n.progress);n.end(o),e.push({...o,testRow:n})}e.sort((e,t)=>e.avg-t.avg).forEach(t=>t.testRow.final(t.avg/e[0].avg)),o.removeAttribute("disabled"),d.textContent="Ratio",s.value=`**Browser:** ${(0,n.getBrowserInfo)()}\n${(0,t.resultsToMarkdown)(e)}`}exports.runAllTestsAsync=l,o.addEventListener("click",()=>{o.disabled=!0,l()}),a.addEventListener("click",()=>{s.select(),s.setSelectionRange(0,99999),document.execCommand("copy"),alert("Copied to clipboard")});
},{"..":"o2OF","../testRunner":"l0Jm","./browserInfo":"HJOk"}]},{},["QCba"], null)